const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dist-BLxv5vlB.js","assets/es-D2zejqFQ.js","assets/react-CgFsfECK.js","assets/src-UW24ZMRV-DUh4ooGF.js","assets/es-o9pB67Wb.js","assets/client-BoYiH0Lb.js","assets/client-lhWkofpa.js"])))=>i.map(i=>d[i]);
import{a as e,c as t,i as n,n as r,o as i,r as a,s as o,t as s}from"./react-CgFsfECK.js";import{n as c,t as l}from"./client-lhWkofpa.js";import{X as u,Zt as d,bn as f,en as p,fn as m,sn as h,tn as g,zt as _}from"./es-D2zejqFQ.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`)continue;for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var v=t(l()),y=t(c()),b=t(s());
/**
* @remix-run/router v1.16.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/
function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}var S;(function(e){e.Pop=`POP`,e.Push=`PUSH`,e.Replace=`REPLACE`})(S||={});var C=`popstate`;function w(e){e===void 0&&(e={});function t(e,t){let{pathname:n,search:r,hash:i}=e.location;return k(``,{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||`default`)}function n(e,t){return typeof t==`string`?t:A(t)}return M(t,n,null,e)}function T(e,t){if(e===!1||e==null)throw Error(t)}function E(e,t){if(!e){typeof console<`u`&&console.warn(t);try{throw Error(t)}catch{}}}function D(){return Math.random().toString(36).substr(2,8)}function O(e,t){return{usr:e.state,key:e.key,idx:t}}function k(e,t,n,r){return n===void 0&&(n=null),x({pathname:typeof e==`string`?e:e.pathname,search:``,hash:``},typeof t==`string`?j(t):t,{state:n,key:t&&t.key||r||D()})}function A(e){let{pathname:t=`/`,search:n=``,hash:r=``}=e;return n&&n!==`?`&&(t+=n.charAt(0)===`?`?n:`?`+n),r&&r!==`#`&&(t+=r.charAt(0)===`#`?r:`#`+r),t}function j(e){let t={};if(e){let n=e.indexOf(`#`);n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf(`?`);r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function M(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=S.Pop,c=null,l=u();l??(l=0,o.replaceState(x({},o.state,{idx:l}),``));function u(){return(o.state||{idx:null}).idx}function d(){s=S.Pop;let e=u(),t=e==null?null:e-l;l=e,c&&c({action:s,location:h.location,delta:t})}function f(e,t){s=S.Push;let r=k(h.location,e,t);n&&n(r,e),l=u()+1;let d=O(r,l),f=h.createHref(r);try{o.pushState(d,``,f)}catch(e){if(e instanceof DOMException&&e.name===`DataCloneError`)throw e;i.location.assign(f)}a&&c&&c({action:s,location:h.location,delta:1})}function p(e,t){s=S.Replace;let r=k(h.location,e,t);n&&n(r,e),l=u();let i=O(r,l),d=h.createHref(r);o.replaceState(i,``,d),a&&c&&c({action:s,location:h.location,delta:0})}function m(e){let t=i.location.origin===`null`?i.location.href:i.location.origin,n=typeof e==`string`?e:A(e);return n=n.replace(/ $/,`%20`),T(t,`No window.location.(origin|href) available to create URL for href: `+n),new URL(n,t)}let h={get action(){return s},get location(){return e(i,o)},listen(e){if(c)throw Error(`A history only accepts one active listener`);return i.addEventListener(C,d),c=e,()=>{i.removeEventListener(C,d),c=null}},createHref(e){return t(i,e)},createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:f,replace:p,go(e){return o.go(e)}};return h}var ee;(function(e){e.data=`data`,e.deferred=`deferred`,e.redirect=`redirect`,e.error=`error`})(ee||={});function N(e,t,n){n===void 0&&(n=`/`);let r=typeof t==`string`?j(t):t,i=pe(r.pathname||`/`,n);if(i==null)return null;let a=te(e);re(a);let o=null;for(let e=0;o==null&&e<a.length;++e){let t=fe(i);o=le(a[e],t)}return o}function te(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=``);let i=(e,i,a)=>{let o={relativePath:a===void 0?e.path||``:a,caseSensitive:e.caseSensitive===!0,childrenIndex:i,route:e};o.relativePath.startsWith(`/`)&&(T(o.relativePath.startsWith(r),`Absolute route path "`+o.relativePath+`" nested under path `+(`"`+r+`" is not valid. An absolute child route path `)+`must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(r.length));let s=be([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(T(e.index!==!0,`Index routes must not have child routes. Please remove `+(`all child routes from route path "`+s+`".`)),te(e.children,t,c,s)),!(e.path==null&&!e.index)&&t.push({path:s,score:se(s,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(e.path===``||!((n=e.path)!=null&&n.includes(`?`)))i(e,t);else for(let n of ne(e.path))i(e,t,n)}),t}function ne(e){let t=e.split(`/`);if(t.length===0)return[];let[n,...r]=t,i=n.endsWith(`?`),a=n.replace(/\?$/,``);if(r.length===0)return i?[a,``]:[a];let o=ne(r.join(`/`)),s=[];return s.push(...o.map(e=>e===``?a:[a,e].join(`/`))),i&&s.push(...o),s.map(t=>e.startsWith(`/`)&&t===``?`/`:t)}function re(e){e.sort((e,t)=>e.score===t.score?ce(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)):t.score-e.score)}var P=/^:[\w-]+$/,F=3,I=2,ie=1,ae=10,L=-2,oe=e=>e===`*`;function se(e,t){let n=e.split(`/`),r=n.length;return n.some(oe)&&(r+=L),t&&(r+=I),n.filter(e=>!oe(e)).reduce((e,t)=>e+(P.test(t)?F:t===``?ie:ae),r)}function ce(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}function le(e,t){let{routesMeta:n}=e,r={},i=`/`,a=[];for(let e=0;e<n.length;++e){let o=n[e],s=e===n.length-1,c=i===`/`?t:t.slice(i.length)||`/`,l=ue({path:o.relativePath,caseSensitive:o.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);let u=o.route;a.push({params:r,pathname:be([i,l.pathname]),pathnameBase:xe(be([i,l.pathnameBase])),route:u}),l.pathnameBase!==`/`&&(i=be([i,l.pathnameBase]))}return a}function ue(e,t){typeof e==`string`&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=de(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,`$1`),s=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if(r===`*`){let e=s[n]||``;o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,`$1`)}let c=s[n];return i&&!c?e[r]=void 0:e[r]=(c||``).replace(/%2F/g,`/`),e},{}),pathname:a,pathnameBase:o,pattern:e}}function de(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),E(e===`*`||!e.endsWith(`*`)||e.endsWith(`/*`),`Route path "`+e+`" will be treated as if it were `+(`"`+e.replace(/\*$/,`/*`)+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+(`please change the route path to "`+e.replace(/\*$/,`/*`)+`".`));let r=[],i=`^`+e.replace(/\/*\*?$/,``).replace(/^\/*/,`/`).replace(/[\\.*+^${}|()[\]]/g,`\\$&`).replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:n!=null}),n?`/?([^\\/]+)?`:`/([^\\/]+)`));return e.endsWith(`*`)?(r.push({paramName:`*`}),i+=e===`*`||e===`/*`?`(.*)$`:`(?:\\/(.+)|\\/*)$`):n?i+=`\\/*$`:e!==``&&e!==`/`&&(i+=`(?:(?=\\/|$))`),[new RegExp(i,t?void 0:`i`),r]}function fe(e){try{return e.split(`/`).map(e=>decodeURIComponent(e).replace(/\//g,`%2F`)).join(`/`)}catch(t){return E(!1,`The URL path "`+e+`" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent `+(`encoding (`+t+`).`)),e}}function pe(e,t){if(t===`/`)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith(`/`)?t.length-1:t.length,r=e.charAt(n);return r&&r!==`/`?null:e.slice(n)||`/`}function me(e,t){t===void 0&&(t=`/`);let{pathname:n,search:r=``,hash:i=``}=typeof e==`string`?j(e):e;return{pathname:n?n.startsWith(`/`)?n:he(n,t):t,search:Se(r),hash:Ce(i)}}function he(e,t){let n=t.replace(/\/+$/,``).split(`/`);return e.split(`/`).forEach(e=>{e===`..`?n.length>1&&n.pop():e!==`.`&&n.push(e)}),n.length>1?n.join(`/`):`/`}function ge(e,t,n,r){return`Cannot include a '`+e+`' character in a manually specified `+("`to."+t+"` field ["+JSON.stringify(r)+`].  Please separate it out to the `)+("`to."+n+"` field. Alternatively you may provide the full path as ")+`a string in <Link to="..."> and the router will parse it for you.`}function _e(e){return e.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ve(e,t){let n=_e(e);return t?n.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase):n.map(e=>e.pathnameBase)}function ye(e,t,n,r){r===void 0&&(r=!1);let i;typeof e==`string`?i=j(e):(i=x({},e),T(!i.pathname||!i.pathname.includes(`?`),ge(`?`,`pathname`,`search`,i)),T(!i.pathname||!i.pathname.includes(`#`),ge(`#`,`pathname`,`hash`,i)),T(!i.search||!i.search.includes(`#`),ge(`#`,`search`,`hash`,i)));let a=e===``||i.pathname===``,o=a?`/`:i.pathname,s;if(o==null)s=n;else{let e=t.length-1;if(!r&&o.startsWith(`..`)){let t=o.split(`/`);for(;t[0]===`..`;)t.shift(),--e;i.pathname=t.join(`/`)}s=e>=0?t[e]:`/`}let c=me(i,s),l=o&&o!==`/`&&o.endsWith(`/`),u=(a||o===`.`)&&n.endsWith(`/`);return!c.pathname.endsWith(`/`)&&(l||u)&&(c.pathname+=`/`),c}var be=e=>e.join(`/`).replace(/\/\/+/g,`/`),xe=e=>e.replace(/\/+$/,``).replace(/^\/*/,`/`),Se=e=>!e||e===`?`?``:e.startsWith(`?`)?e:`?`+e,Ce=e=>!e||e===`#`?``:e.startsWith(`#`)?e:`#`+e;function we(e){return e!=null&&typeof e.status==`number`&&typeof e.statusText==`string`&&typeof e.internal==`boolean`&&`data`in e}function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Te.apply(this,arguments)}var Ee=b.createContext(null),De=b.createContext(null),Oe=b.createContext(null),ke=b.createContext(null),Ae=b.createContext({outlet:null,matches:[],isDataRoute:!1}),je=b.createContext(null);function Me(e,t){let{relative:n}=t===void 0?{}:t;!Ne()&&T(!1);let{basename:r,navigator:i}=b.useContext(Oe),{hash:a,pathname:o,search:s}=ze(e,{relative:n}),c=o;return r!==`/`&&(c=o===`/`?r:be([r,o])),i.createHref({pathname:c,search:s,hash:a})}function Ne(){return b.useContext(ke)!=null}function Pe(){return!Ne()&&T(!1),b.useContext(ke).location}function Fe(e){b.useContext(Oe).static||b.useLayoutEffect(e)}function Ie(){let{isDataRoute:e}=b.useContext(Ae);return e?et():Le()}function Le(){!Ne()&&T(!1);let e=b.useContext(Ee),{basename:t,future:n,navigator:r}=b.useContext(Oe),{matches:i}=b.useContext(Ae),{pathname:a}=Pe(),o=JSON.stringify(ve(i,n.v7_relativeSplatPath)),s=b.useRef(!1);return Fe(()=>{s.current=!0}),b.useCallback(function(n,i){if(i===void 0&&(i={}),!s.current)return;if(typeof n==`number`){r.go(n);return}let c=ye(n,JSON.parse(o),a,i.relative===`path`);e==null&&t!==`/`&&(c.pathname=c.pathname===`/`?t:be([t,c.pathname])),(i.replace?r.replace:r.push)(c,i.state,i)},[t,r,o,a,e])}function Re(){let{matches:e}=b.useContext(Ae),t=e[e.length-1];return t?t.params:{}}function ze(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=b.useContext(Oe),{matches:i}=b.useContext(Ae),{pathname:a}=Pe(),o=JSON.stringify(ve(i,r.v7_relativeSplatPath));return b.useMemo(()=>ye(e,JSON.parse(o),a,n===`path`),[e,o,a,n])}function Be(e,t){return Ve(e,t)}function Ve(e,t,n,r){!Ne()&&T(!1);let{navigator:i}=b.useContext(Oe),{matches:a}=b.useContext(Ae),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:`/`;o&&o.route;let l=Pe(),u;if(t){let e=typeof t==`string`?j(t):t;!(c===`/`||e.pathname?.startsWith(c))&&T(!1),u=e}else u=l;let d=u.pathname||`/`,f=d;if(c!==`/`){let e=c.replace(/^\//,``).split(`/`);f=`/`+d.replace(/^\//,``).split(`/`).slice(e.length).join(`/`)}let p=N(e,{pathname:f}),m=Ke(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:be([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:e.pathnameBase===`/`?c:be([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,r);return t&&m?b.createElement(ke.Provider,{value:{location:Te({pathname:`/`,search:``,hash:``,state:null,key:`default`},u),navigationType:S.Pop}},m):m}function He(){let e=$e(),t=we(e)?e.status+` `+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null;return b.createElement(b.Fragment,null,b.createElement(`h2`,null,`Unexpected Application Error!`),b.createElement(`h3`,{style:{fontStyle:`italic`}},t),n?b.createElement(`pre`,{style:{padding:`0.5rem`,backgroundColor:`rgba(200,200,200, 0.5)`}},n):null,null)}var Ue=b.createElement(He,null),We=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!==`idle`&&e.revalidation===`idle`?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error===void 0?t.error:e.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error(`React Router caught the following error during render`,e,t)}render(){return this.state.error===void 0?this.props.children:b.createElement(Ae.Provider,{value:this.props.routeContext},b.createElement(je.Provider,{value:this.state.error,children:this.props.component}))}};function Ge(e){let{routeContext:t,match:n,children:r}=e,i=b.useContext(Ee);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Ae.Provider,{value:t},r)}function Ke(e,t,n,r){if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let e=a.findIndex(e=>e.route.id&&o?.[e.route.id]!==void 0);!(e>=0)&&T(!1),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&e[t.route.id]===void 0&&(!r||r[t.route.id]===void 0);if(t.route.lazy||i){s=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight((e,r,i)=>{let l,u=!1,d=null,f=null;n&&(l=o&&r.route.id?o[r.route.id]:void 0,d=r.route.errorElement||Ue,s&&(c<0&&i===0?(nt(`route-fallback`,!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,f=null):c===i&&(u=!0,f=r.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,i+1)),m=()=>{let t;return t=l?d:u?f:r.route.Component?b.createElement(r.route.Component,null):r.route.element?r.route.element:e,b.createElement(Ge,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:n!=null},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||i===0)?b.createElement(We,{location:n.location,revalidation:n.revalidation,component:d,error:l,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var qe=function(e){return e.UseBlocker=`useBlocker`,e.UseRevalidator=`useRevalidator`,e.UseNavigateStable=`useNavigate`,e}(qe||{}),Je=function(e){return e.UseBlocker=`useBlocker`,e.UseLoaderData=`useLoaderData`,e.UseActionData=`useActionData`,e.UseRouteError=`useRouteError`,e.UseNavigation=`useNavigation`,e.UseRouteLoaderData=`useRouteLoaderData`,e.UseMatches=`useMatches`,e.UseRevalidator=`useRevalidator`,e.UseNavigateStable=`useNavigate`,e.UseRouteId=`useRouteId`,e}(Je||{});function Ye(e){let t=b.useContext(Ee);return!t&&T(!1),t}function Xe(e){let t=b.useContext(De);return!t&&T(!1),t}function Ze(e){let t=b.useContext(Ae);return!t&&T(!1),t}function Qe(e){let t=Ze(e),n=t.matches[t.matches.length-1];return!n.route.id&&T(!1),n.route.id}function $e(){let e=b.useContext(je),t=Xe(Je.UseRouteError),n=Qe(Je.UseRouteError);return e===void 0?t.errors?.[n]:e}function et(){let{router:e}=Ye(qe.UseNavigateStable),t=Qe(Je.UseNavigateStable),n=b.useRef(!1);return Fe(()=>{n.current=!0}),b.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r==`number`?e.navigate(r):e.navigate(r,Te({fromRouteId:t},i)))},[e,t])}var tt={};function nt(e,t,n){!t&&!tt[e]&&(tt[e]=!0)}b.startTransition;function rt(e){T(!1)}function it(e){let{basename:t=`/`,children:n=null,location:r,navigationType:i=S.Pop,navigator:a,static:o=!1,future:s}=e;Ne()&&T(!1);let c=t.replace(/^\/*/,`/`),l=b.useMemo(()=>({basename:c,navigator:a,static:o,future:Te({v7_relativeSplatPath:!1},s)}),[c,s,a,o]);typeof r==`string`&&(r=j(r));let{pathname:u=`/`,search:d=``,hash:f=``,state:p=null,key:m=`default`}=r,h=b.useMemo(()=>{let e=pe(u,c);return e==null?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:i}},[c,u,d,f,p,m,i]);return h==null?null:b.createElement(Oe.Provider,{value:l},b.createElement(ke.Provider,{children:n,value:h}))}function at(e){let{children:t,location:n}=e;return Be(ot(t),n)}new Promise(()=>{});function ot(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(e,r)=>{if(!b.isValidElement(e))return;let i=[...t,r];if(e.type===b.Fragment){n.push.apply(n,ot(e.props.children,i));return}e.type!==rt&&T(!1),!(!e.props.index||!e.props.children)&&T(!1);let a={id:e.props.id||i.join(`-`),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:e.props.ErrorBoundary!=null||e.props.errorElement!=null,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ot(e.props.children,i)),n.push(a)}),n}var st=`6`;try{window.__reactRouterVersion=st}catch{}var ct=b.startTransition;y.flushSync,b.useId;function lt(e){let{basename:t,children:n,future:r,window:i}=e,a=b.useRef();a.current??=w({window:i,v5Compat:!0});let o=a.current,[s,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=b.useCallback(e=>{l&&ct?ct(()=>c(e)):c(e)},[c,l]);return b.useLayoutEffect(()=>o.listen(u),[o,u]),b.createElement(it,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:o,future:r})}typeof window<`u`&&window.document!==void 0&&window.document.createElement;var ut;(function(e){e.UseScrollRestoration=`useScrollRestoration`,e.UseSubmit=`useSubmit`,e.UseSubmitFetcher=`useSubmitFetcher`,e.UseFetcher=`useFetcher`,e.useViewTransitionState=`useViewTransitionState`})(ut||={});var dt;(function(e){e.UseFetcher=`useFetcher`,e.UseFetchers=`useFetchers`,e.UseScrollRestoration=`useScrollRestoration`})(dt||={});function ft(e={}){let{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=e,i=b.createContext(void 0);i.displayName=r;function a(){var e;let r=b.useContext(i);if(!r&&t){let t=Error(n);throw t.name=`ContextError`,(e=Error.captureStackTrace)==null||e.call(Error,t,a),t}return r}return[i.Provider,a,i]}function pt(){return!!(typeof window<`u`&&window.document&&window.document.createElement)}pt();function mt(e){return{UNSAFE_getDOMNode(){return e.current}}}function ht(e){let t=(0,b.useRef)(null);return(0,b.useImperativeHandle)(e,()=>t.current),t}var gt=e=>e;function _t(e){return Array.isArray(e)}function vt(e){return _t(e)&&e.length===0}function yt(e){let t=typeof e;return e!=null&&(t===`object`||t===`function`)&&!_t(e)}function bt(e){return yt(e)&&Object.keys(e).length===0}function xt(e){return _t(e)?vt(e):yt(e)?bt(e):e==null||e===``}function St(e){return typeof e==`function`}var R=e=>e?`true`:void 0;function Ct(e){var t,n,r=``;if(typeof e==`string`||typeof e==`number`)r+=e;else if(typeof e==`object`)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Ct(e[t]))&&(r&&(r+=` `),r+=n);else for(t in e)e[t]&&(r&&(r+=` `),r+=t);return r}function wt(...e){for(var t=0,n,r,i=``;t<e.length;)(n=e[t++])&&(r=Ct(n))&&(i&&(i+=` `),i+=r);return i}var Tt=(...e)=>{let t=` `;for(let n of e)if(typeof n==`string`&&n.length>0){t=n;break}return t},Et=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():``;function Dt(e){return`${e}-${Math.floor(Math.random()*1e6)}`}function Ot(e){for(let t in e)t.startsWith(`on`)&&delete e[t];return e}function kt(e){if(!e||typeof e!=`object`)return``;try{return JSON.stringify(e)}catch{return``}}function At(e,t,n){return Math.min(Math.max(e,t),n)}var jt={};function Mt(e,t,...n){let r=`[Hero UI]${t?` [${t}]`:` `}: ${e}`;typeof console>`u`||jt[r]||(jt[r]=!0)}function Nt(...e){return(...t)=>{for(let n of e)typeof n==`function`&&n(...t)}}var Pt=new Map;function Ft(e,t){if(e===t)return e;let n=Pt.get(e);if(n)return n.forEach(e=>e.current=t),t;let r=Pt.get(t);return r?(r.forEach(t=>t.current=e),e):t}function It(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],i=r[e];typeof n==`function`&&typeof i==`function`&&e[0]===`o`&&e[1]===`n`&&e.charCodeAt(2)>=65&&e.charCodeAt(2)<=90?t[e]=Nt(n,i):(e===`className`||e===`UNSAFE_className`)&&typeof n==`string`&&typeof i==`string`?t[e]=wt(n,i):e===`id`&&n&&i?t.id=Ft(n,i):t[e]=i===void 0?n:i}}return t}function Lt(...e){return e.length===1&&e[0]?e[0]:t=>{let n=!1,r=e.map(e=>{let r=Rt(e,t);return n||=typeof r==`function`,r});if(n)return()=>{r.forEach((t,n)=>{typeof t==`function`?t?.():Rt(e[n],null)})}}}function Rt(e,t){if(typeof e==`function`)return()=>e(t);e!=null&&`current`in e&&(e.current=t)}function zt(e,t){if(e!=null){if(St(e)){e(t);return}try{e.current=t}catch{throw Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function Bt(...e){return t=>{e.forEach(e=>zt(e,t))}}var Vt=(e,t)=>{let n=[],r=b.Children.map(e,e=>(0,b.isValidElement)(e)&&e.type===t?(n.push(e),null):e)?.filter(Boolean),i=n.length>=0?n:void 0;return[r,i]},Ht=new Set(`id.type.style.title.role.tabIndex.htmlFor.width.height.abbr.accept.acceptCharset.accessKey.action.allowFullScreen.allowTransparency.alt.async.autoComplete.autoFocus.autoPlay.cellPadding.cellSpacing.challenge.charset.checked.cite.class.className.cols.colSpan.command.content.contentEditable.contextMenu.controls.coords.crossOrigin.data.dateTime.default.defer.dir.disabled.download.draggable.dropzone.encType.enterKeyHint.for.form.formAction.formEncType.formMethod.formNoValidate.formTarget.frameBorder.headers.hidden.high.href.hrefLang.httpEquiv.icon.inputMode.isMap.itemId.itemProp.itemRef.itemScope.itemType.kind.label.lang.list.loop.manifest.max.maxLength.media.mediaGroup.method.min.minLength.multiple.muted.name.noValidate.open.optimum.pattern.ping.placeholder.poster.preload.radioGroup.referrerPolicy.readOnly.rel.required.rows.rowSpan.sandbox.scope.scoped.scrolling.seamless.selected.shape.size.sizes.slot.sortable.span.spellCheck.src.srcDoc.srcSet.start.step.target.translate.typeMustMatch.useMap.value.wmode.wrap`.split(`.`)),Ut=new Set(`onCopy.onCut.onPaste.onLoad.onError.onWheel.onScroll.onCompositionEnd.onCompositionStart.onCompositionUpdate.onKeyDown.onKeyPress.onKeyUp.onFocus.onBlur.onChange.onInput.onSubmit.onClick.onContextMenu.onDoubleClick.onDrag.onDragEnd.onDragEnter.onDragExit.onDragLeave.onDragOver.onDragStart.onDrop.onMouseDown.onMouseEnter.onMouseLeave.onMouseMove.onMouseOut.onMouseOver.onMouseUp.onPointerDown.onPointerEnter.onPointerLeave.onPointerUp.onSelect.onTouchCancel.onTouchEnd.onTouchMove.onTouchStart.onAnimationStart.onAnimationEnd.onAnimationIteration.onTransitionEnd`.split(`.`)),Wt=/^(data-.*)$/,Gt=/^(aria-.*)$/,Kt=/^(on[A-Z].*)$/;function qt(e,t={}){let{labelable:n=!0,enabled:r=!0,propNames:i,omitPropNames:a,omitEventNames:o,omitDataProps:s,omitEventProps:c}=t,l={};if(!r)return e;for(let t in e){if(a?.has(t)||o?.has(t)&&Kt.test(t)||Kt.test(t)&&!Ut.has(t)||s&&Wt.test(t)||c&&Kt.test(t))continue;(Object.prototype.hasOwnProperty.call(e,t)&&(Ht.has(t)||n&&Gt.test(t)||i?.has(t)||Wt.test(t))||Kt.test(t))&&(l[t]=e[t])}return l}var[Jt,Yt]=ft({name:`ProviderContext`,strict:!1}),Xt=new Set([`Arab`,`Syrc`,`Samr`,`Mand`,`Thaa`,`Mend`,`Nkoo`,`Adlm`,`Rohg`,`Hebr`]),Zt=new Set([`ae`,`ar`,`arc`,`bcc`,`bqi`,`ckb`,`dv`,`fa`,`glk`,`he`,`ku`,`mzn`,`nqo`,`pnb`,`ps`,`sd`,`ug`,`ur`,`yi`]);function Qt(e){if(Intl.Locale){let t=new Intl.Locale(e).maximize(),n=typeof t.getTextInfo==`function`?t.getTextInfo():t.textInfo;if(n)return n.direction===`rtl`;if(t.script)return Xt.has(t.script)}let t=e.split(`-`)[0];return Zt.has(t)}var $t={prefix:String(Math.round(Math.random()*1e10)),current:0},en=b.createContext($t),tn=b.createContext(!1);typeof window<`u`&&window.document&&window.document.createElement;var nn=new WeakMap;function rn(e=!1){let t=(0,b.useContext)(en),n=(0,b.useRef)(null);if(n.current===null&&!e){let e=b.default.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED?.ReactCurrentOwner?.current;if(e){let n=nn.get(e);n==null?nn.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,nn.delete(e))}n.current=++t.current}return n.current}function an(e){let t=(0,b.useContext)(en),n=rn(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`}function on(e){let t=b.useId(),[n]=(0,b.useState)(dn()),r=n?`react-aria`:`react-aria${$t.prefix}`;return e||`${r}-${t}`}var sn=typeof b.useId==`function`?on:an;function cn(){return!1}function ln(){return!0}function un(e){return()=>{}}function dn(){return typeof b.useSyncExternalStore==`function`?b.useSyncExternalStore(un,cn,ln):(0,b.useContext)(tn)}var fn=Symbol.for(`react-aria.i18n.locale`);function pn(){let e=typeof window<`u`&&window[fn]||typeof navigator<`u`&&(navigator.language||navigator.userLanguage)||`en-US`;try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e=`en-US`}return{locale:e,direction:Qt(e)?`rtl`:`ltr`}}var mn=pn(),hn=new Set;function gn(){mn=pn();for(let e of hn)e(mn)}function _n(){let e=dn(),[t,n]=(0,b.useState)(mn);return(0,b.useEffect)(()=>(hn.size===0&&window.addEventListener(`languagechange`,gn),hn.add(n),()=>{hn.delete(n),hn.size===0&&window.removeEventListener(`languagechange`,gn)}),[]),e?{locale:`en-US`,direction:`ltr`}:t}var vn=b.createContext(null);function yn(e){let{locale:t,children:n}=e,r=b.useMemo(()=>({locale:t,direction:Qt(t)?`rtl`:`ltr`}),[t]);return b.createElement(vn.Provider,{value:r},n)}function bn(e){let{children:t}=e,n=_n();return b.createElement(vn.Provider,{value:n},t)}function xn(e){let{locale:t,children:n}=e;return t?b.createElement(yn,{locale:t,children:n}):b.createElement(bn,{children:n})}function Sn(){let e=_n();return(0,b.useContext)(vn)||e}var Cn=function(e,t){return Cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Cn(e,t)};function wn(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Class extends value `+String(t)+` is not a constructor or null`);Cn(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var z=function(){return z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},z.apply(this,arguments)};function Tn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function En(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function Dn(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)}function B(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function On(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function kn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function An(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)}var jn=Symbol.for(`react-aria.i18n.locale`),Mn=Symbol.for(`react-aria.i18n.strings`),Nn=void 0,Pn=class e{getStringForLocale(e,t){let n=this.getStringsForLocale(t)[e];if(!n)throw Error(`Could not find intl message ${e} in ${t} locale`);return n}getStringsForLocale(e){let t=this.strings[e];return t||(t=Fn(e,this.strings,this.defaultLocale),this.strings[e]=t),t}static getGlobalDictionaryForPackage(t){if(typeof window>`u`)return null;let n=window[jn];if(Nn===void 0){let t=window[Mn];if(!t)return null;for(let r in Nn={},t)Nn[r]=new e({[n]:t[r]},n)}let r=Nn?.[t];if(!r)throw Error(`Strings for package "${t}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return r}constructor(e,t=`en-US`){this.strings=Object.fromEntries(Object.entries(e).filter(([,e])=>e)),this.defaultLocale=t}};function Fn(e,t,n=`en-US`){if(t[e])return t[e];let r=In(e);if(t[r])return t[r];for(let e in t)if(e.startsWith(r+`-`))return t[e];return t[n]}function In(e){return Intl.Locale?new Intl.Locale(e).language:e.split(`-`)[0]}var Ln=new Map,Rn=new Map,eee=class{format(e,t){let n=this.strings.getStringForLocale(e,this.locale);return typeof n==`function`?n(t,this):n}plural(e,t,n=`cardinal`){let r=t[`=`+e];if(r)return typeof r==`function`?r():r;let i=this.locale+`:`+n,a=Ln.get(i);a||(a=new Intl.PluralRules(this.locale,{type:n}),Ln.set(i,a));let o=a.select(e);return r=t[o]||t.other,typeof r==`function`?r():r}number(e){let t=Rn.get(this.locale);return t||(t=new Intl.NumberFormat(this.locale),Rn.set(this.locale,t)),t.format(e)}select(e,t){let n=e[t]||e.other;return typeof n==`function`?n():n}constructor(e,t){this.locale=e,this.strings=t}},zn=new WeakMap;function Bn(e){let t=zn.get(e);return t||(t=new Pn(e),zn.set(e,t)),t}function Vn(e,t){return t&&Pn.getGlobalDictionaryForPackage(t)||Bn(e)}function Hn(e,t){let{locale:n}=Sn(),r=Vn(e,t);return(0,b.useMemo)(()=>new eee(n,r),[n,r])}function Un(e,t){if(t.has(e))throw TypeError(`Cannot initialize the same private elements twice on an object`)}function Wn(e,t,n){Un(e,t),t.set(e,n)}var Gn=typeof document<`u`?b.useLayoutEffect:()=>{},Kn=b.useInsertionEffect??Gn;function qn(e){let t=(0,b.useRef)(null);return Kn(()=>{t.current=e},[e]),(0,b.useCallback)((...e)=>{let n=t.current;return n?.(...e)},[])}function Jn(e){let[t,n]=(0,b.useState)(e),r=(0,b.useRef)(null),i=qn(()=>{if(!r.current)return;let e=r.current.next();if(e.done){r.current=null;return}t===e.value?i():n(e.value)});Gn(()=>{r.current&&i()});let a=qn(e=>{r.current=e(t),i()});return[t,a]}var Yn=!!(typeof window<`u`&&window.document&&window.document.createElement),Xn=new Map,Zn;typeof FinalizationRegistry<`u`&&(Zn=new FinalizationRegistry(e=>{Xn.delete(e)}));function Qn(e){let[t,n]=(0,b.useState)(e),r=(0,b.useRef)(null),i=sn(t),a=(0,b.useRef)(null);if(Zn&&Zn.register(a,i),Yn){let e=Xn.get(i);e&&!e.includes(r)?e.push(r):Xn.set(i,[r])}return Gn(()=>{let e=i;return()=>{Zn&&Zn.unregister(a),Xn.delete(e)}},[i]),(0,b.useEffect)(()=>{let e=r.current;return e&&n(e),()=>{e&&(r.current=null)}}),i}function $n(e,t){if(e===t)return e;let n=Xn.get(e);if(n)return n.forEach(e=>e.current=t),t;let r=Xn.get(t);return r?(r.forEach(t=>t.current=e),e):t}function er(e=[]){let t=Qn(),[n,r]=Jn(t),i=(0,b.useCallback)(()=>{r(function*(){yield t,yield document.getElementById(t)?t:void 0})},[t,r]);return Gn(i,[t,i,...e]),n}function tr(...e){return(...t)=>{for(let n of e)typeof n==`function`&&n(...t)}}var nr=e=>e?.ownerDocument??document,rr=e=>e&&`window`in e&&e.window===e?e:nr(e).defaultView||window;function ir(e){return typeof e==`object`&&!!e&&`nodeType`in e&&typeof e.nodeType==`number`}function ar(e){return ir(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&`host`in e}var or=!1;function sr(){return or}function cr(e,t){if(!sr())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n=n.tagName===`SLOT`&&n.assignedSlot?n.assignedSlot.parentNode:ar(n)?n.host:n.parentNode}return!1}var lr=(e=document)=>{if(!sr())return e.activeElement;let t=e.activeElement;for(;t&&`shadowRoot`in t&&t.shadowRoot?.activeElement;)t=t.shadowRoot.activeElement;return t};function ur(e){return sr()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}var dr=class{get currentNode(){return this._currentNode}set currentNode(e){if(!cr(this.root,e))throw Error(`Cannot set currentNode to a node that is not contained by the root node.`);let t=[],n=e,r=e;for(this._currentNode=e;n&&n!==this.root;)if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let e=n,i=this._doc.createTreeWalker(e,this.whatToShow,{acceptNode:this._acceptNode});t.push(i),i.currentNode=r,this._currentSetFor.add(i),n=r=e.host}else n=n.parentNode;let i=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});t.push(i),i.currentNode=r,this._currentSetFor.add(i),this._walkerStack=t}get doc(){return this._doc}firstChild(){let e=this.currentNode,t=this.nextNode();return cr(e,t)?(t&&(this.currentNode=t),t):(this.currentNode=e,null)}lastChild(){let e=this._walkerStack[0].lastChild();return e&&(this.currentNode=e),e}nextNode(){let e=this._walkerStack[0].nextNode();if(e){if(e.shadowRoot){let t;if(typeof this.filter==`function`?t=this.filter(e):this.filter?.acceptNode&&(t=this.filter.acceptNode(e)),t===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e;let n=this.nextNode();return n&&(this.currentNode=n),n}return e&&(this.currentNode=e),e}else if(this._walkerStack.length>1){this._walkerStack.shift();let e=this.nextNode();return e&&(this.currentNode=e),e}else return null}previousNode(){let e=this._walkerStack[0];if(e.currentNode===e.root){if(this._currentSetFor.has(e))if(this._currentSetFor.delete(e),this._walkerStack.length>1){this._walkerStack.shift();let e=this.previousNode();return e&&(this.currentNode=e),e}else return null;return null}let t=e.previousNode();if(t){if(t.shadowRoot){let e;if(typeof this.filter==`function`?e=this.filter(t):this.filter?.acceptNode&&(e=this.filter.acceptNode(t)),e===NodeFilter.FILTER_ACCEPT)return t&&(this.currentNode=t),t;let n=this.lastChild();return n&&(this.currentNode=n),n}return t&&(this.currentNode=t),t}else if(this._walkerStack.length>1){this._walkerStack.shift();let e=this.previousNode();return e&&(this.currentNode=e),e}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(e,t,n,r){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=e=>{if(e.nodeType===Node.ELEMENT_NODE){let t=e.shadowRoot;if(t){let e=this._doc.createTreeWalker(t,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(e),NodeFilter.FILTER_ACCEPT}else{if(typeof this.filter==`function`)return this.filter(e);if(this.filter?.acceptNode)return this.filter.acceptNode(e);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=e,this.root=t,this.filter=r??null,this.whatToShow=n??NodeFilter.SHOW_ALL,this._currentNode=t,this._walkerStack.unshift(e.createTreeWalker(t,n,this._acceptNode));let i=t.shadowRoot;if(i){let e=this._doc.createTreeWalker(i,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(e)}}};function fr(e,t,n,r){return sr()?new dr(e,t,n,r):e.createTreeWalker(t,n,r)}function pr(e){var t,n,r=``;if(typeof e==`string`||typeof e==`number`)r+=e;else if(typeof e==`object`)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=pr(e[t]))&&(r&&(r+=` `),r+=n)}else for(n in e)e[n]&&(r&&(r+=` `),r+=n);return r}function mr(){for(var e,t,n=0,r=``,i=arguments.length;n<i;n++)(e=arguments[n])&&(t=pr(e))&&(r&&(r+=` `),r+=t);return r}var hr=mr;function gr(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],i=r[e];typeof n==`function`&&typeof i==`function`&&e[0]===`o`&&e[1]===`n`&&e.charCodeAt(2)>=65&&e.charCodeAt(2)<=90?t[e]=tr(n,i):(e===`className`||e===`UNSAFE_className`)&&typeof n==`string`&&typeof i==`string`?t[e]=hr(n,i):e===`id`&&n&&i?t.id=$n(n,i):t[e]=i===void 0?n:i}}return t}var _r=new Set([`id`]),tee=new Set([`aria-label`,`aria-labelledby`,`aria-describedby`,`aria-details`]),vr=new Set([`href`,`hrefLang`,`target`,`rel`,`download`,`ping`,`referrerPolicy`]),yr=new Set([`dir`,`lang`,`hidden`,`inert`,`translate`]),br=new Set(`onClick.onAuxClick.onContextMenu.onDoubleClick.onMouseDown.onMouseEnter.onMouseLeave.onMouseMove.onMouseOut.onMouseOver.onMouseUp.onTouchCancel.onTouchEnd.onTouchMove.onTouchStart.onPointerDown.onPointerMove.onPointerUp.onPointerCancel.onPointerEnter.onPointerLeave.onPointerOver.onPointerOut.onGotPointerCapture.onLostPointerCapture.onScroll.onWheel.onAnimationStart.onAnimationEnd.onAnimationIteration.onTransitionCancel.onTransitionEnd.onTransitionRun.onTransitionStart`.split(`.`)),xr=/^(data-.*)$/;function Sr(e,t={}){let{labelable:n,isLink:r,global:i,events:a=i,propNames:o}=t,s={};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(_r.has(t)||n&&tee.has(t)||r&&vr.has(t)||i&&yr.has(t)||a&&br.has(t)||t.endsWith(`Capture`)&&br.has(t.slice(0,-7))||o?.has(t)||xr.test(t))&&(s[t]=e[t]);return s}function Cr(e){if(Tr())e.focus({preventScroll:!0});else{let t=Er(e);e.focus(),Dr(t)}}var wr=null;function Tr(){if(wr==null){wr=!1;try{document.createElement(`div`).focus({get preventScroll(){return wr=!0,!0}})}catch{}}return wr}function Er(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function Dr(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}function Or(e){if(typeof window>`u`||window.navigator==null)return!1;let t=window.navigator.userAgentData?.brands;return Array.isArray(t)&&t.some(t=>e.test(t.brand))||e.test(window.navigator.userAgent)}function kr(e){return typeof window<`u`&&window.navigator!=null?e.test(window.navigator.userAgentData?.platform||window.navigator.platform):!1}function Ar(e){let t=null;return()=>(t??=e(),t)}var jr=Ar(function(){return kr(/^Mac/i)}),Mr=Ar(function(){return kr(/^iPhone/i)}),Nr=Ar(function(){return kr(/^iPad/i)||jr()&&navigator.maxTouchPoints>1}),Pr=Ar(function(){return Mr()||Nr()}),Fr=Ar(function(){return jr()||Pr()}),Ir=Ar(function(){return Or(/AppleWebKit/i)&&!Lr()}),Lr=Ar(function(){return Or(/Chrome/i)}),Rr=Ar(function(){return Or(/Android/i)}),zr=Ar(function(){return Or(/Firefox/i)}),Br=(0,b.createContext)({isNative:!0,open:Kr,useHref:e=>e});function Vr(e){let{children:t,navigate:n,useHref:r}=e,i=(0,b.useMemo)(()=>({isNative:!1,open:(e,t,r,i)=>{Gr(e,e=>{Ur(e,t)?n(r,i):Wr(e,t)})},useHref:r||(e=>e)}),[n,r]);return b.createElement(Br.Provider,{value:i},t)}function Hr(){return(0,b.useContext)(Br)}function Ur(e,t){let n=e.getAttribute(`target`);return(!n||n===`_self`)&&e.origin===location.origin&&!e.hasAttribute(`download`)&&!t.metaKey&&!t.ctrlKey&&!t.altKey&&!t.shiftKey}function Wr(e,t,n=!0){var r;let{metaKey:i,ctrlKey:a,altKey:o,shiftKey:s}=t;zr()&&(r=window.event)!=null&&r.type?.startsWith(`key`)&&e.target===`_blank`&&(jr()?i=!0:a=!0);let c=Ir()&&jr()&&!Nr()?new KeyboardEvent(`keydown`,{keyIdentifier:`Enter`,metaKey:i,ctrlKey:a,altKey:o,shiftKey:s}):new MouseEvent(`click`,{metaKey:i,ctrlKey:a,altKey:o,shiftKey:s,bubbles:!0,cancelable:!0});Wr.isOpening=n,Cr(e),e.dispatchEvent(c),Wr.isOpening=!1}Wr.isOpening=!1;function Gr(e,t){if(e instanceof HTMLAnchorElement)t(e);else if(e.hasAttribute(`data-href`)){let n=document.createElement(`a`);n.href=e.getAttribute(`data-href`),e.hasAttribute(`data-target`)&&(n.target=e.getAttribute(`data-target`)),e.hasAttribute(`data-rel`)&&(n.rel=e.getAttribute(`data-rel`)),e.hasAttribute(`data-download`)&&(n.download=e.getAttribute(`data-download`)),e.hasAttribute(`data-ping`)&&(n.ping=e.getAttribute(`data-ping`)),e.hasAttribute(`data-referrer-policy`)&&(n.referrerPolicy=e.getAttribute(`data-referrer-policy`)),e.appendChild(n),t(n),e.removeChild(n)}}function Kr(e,t){Gr(e,e=>Wr(e,t))}function qr(e){let t=Hr().useHref(e?.href??``);return{href:e?.href?t:void 0,target:e?.target,rel:e?.rel,download:e?.download,ping:e?.ping,referrerPolicy:e?.referrerPolicy}}function Jr(e,t,n,r){!t.isNative&&e.currentTarget instanceof HTMLAnchorElement&&e.currentTarget.href&&!e.isDefaultPrevented()&&Ur(e.currentTarget,e)&&n&&(e.preventDefault(),t.open(e.currentTarget,e,n,r))}var Yr=new Map,Xr=new Set;function Zr(){if(typeof window>`u`)return;function e(e){return`propertyName`in e}let t=t=>{if(!e(t)||!t.target)return;let r=Yr.get(t.target);r||(r=new Set,Yr.set(t.target,r),t.target.addEventListener(`transitioncancel`,n,{once:!0})),r.add(t.propertyName)},n=t=>{if(!e(t)||!t.target)return;let r=Yr.get(t.target);if(r&&(r.delete(t.propertyName),r.size===0&&(t.target.removeEventListener(`transitioncancel`,n),Yr.delete(t.target)),Yr.size===0)){for(let e of Xr)e();Xr.clear()}};document.body.addEventListener(`transitionrun`,t),document.body.addEventListener(`transitionend`,n)}typeof document<`u`&&(document.readyState===`loading`?document.addEventListener(`DOMContentLoaded`,Zr):Zr());function Qr(){for(let[e]of Yr)`isConnected`in e&&!e.isConnected&&Yr.delete(e)}function $r(e){requestAnimationFrame(()=>{Qr(),Yr.size===0?e():Xr.add(e)})}function ei(){let e=(0,b.useRef)(new Map),t=(0,b.useCallback)((t,n,r,i)=>{let a=i?.once?(...t)=>{e.current.delete(r),r(...t)}:r;e.current.set(r,{type:n,eventTarget:t,fn:a,options:i}),t.addEventListener(n,a,i)},[]),n=(0,b.useCallback)((t,n,r,i)=>{let a=e.current.get(r)?.fn||r;t.removeEventListener(n,a,i),e.current.delete(r)},[]),r=(0,b.useCallback)(()=>{e.current.forEach((e,t)=>{n(e.eventTarget,e.type,t,e.options)})},[n]);return(0,b.useEffect)(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function ti(e,t){let{id:n,"aria-label":r,"aria-labelledby":i}=e;return n=Qn(n),i&&r?i=[...new Set([n,...i.trim().split(/\s+/)])].join(` `):i&&=i.trim().split(/\s+/).join(` `),!r&&!i&&t&&(r=t),{id:n,"aria-label":r,"aria-labelledby":i}}function ni(e,t){let n=(0,b.useRef)(!0),r=(0,b.useRef)(null);Gn(()=>(n.current=!0,()=>{n.current=!1}),[]),Gn(()=>{n.current?n.current=!1:(!r.current||t.some((e,t)=>!Object.is(e,r[t])))&&e(),r.current=t},t)}function ri(){return window.ResizeObserver!==void 0}function ii(e){let{ref:t,box:n,onResize:r}=e;(0,b.useEffect)(()=>{let e=t?.current;if(e)if(ri()){let t=new window.ResizeObserver(e=>{e.length&&r()});return t.observe(e,{box:n}),()=>{e&&t.unobserve(e)}}else return window.addEventListener(`resize`,r,!1),()=>{window.removeEventListener(`resize`,r,!1)}},[r,t,n])}function ai(e,t){Gn(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref&&(e.ref.current=null)}})}function oi(e,t){if(!e)return!1;let n=window.getComputedStyle(e),r=/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY);return r&&t&&(r=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),r}function si(e,t){let n=e;for(oi(n,t)&&(n=n.parentElement);n&&!oi(n,t);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}function nee(e,t){let n=[];for(;e&&e!==document.documentElement;)oi(e,t)&&n.push(e),e=e.parentElement;return n}var ci=0,li=new Map;function ui(e){let[t,n]=(0,b.useState)();return Gn(()=>{if(!e)return;let t=li.get(e);if(t)n(t.element.id);else{let r=`react-aria-description-${ci++}`;n(r);let i=document.createElement(`div`);i.id=r,i.style.display=`none`,i.textContent=e,document.body.appendChild(i),t={refCount:0,element:i},li.set(e,t)}return t.refCount++,()=>{t&&--t.refCount===0&&(t.element.remove(),li.delete(e))}},[e]),{"aria-describedby":e?t:void 0}}function di(e,t,n,r){let i=qn(n),a=n==null;(0,b.useEffect)(()=>{if(a||!e.current)return;let n=e.current;return n.addEventListener(t,i,r),()=>{n.removeEventListener(t,i,r)}},[e,t,r,a,i])}function fi(e,t){let n=pi(e,t,`left`),r=pi(e,t,`top`),i=t.offsetWidth,a=t.offsetHeight,o=e.scrollLeft,s=e.scrollTop,{borderTopWidth:c,borderLeftWidth:l,scrollPaddingTop:u,scrollPaddingRight:d,scrollPaddingBottom:f,scrollPaddingLeft:p}=getComputedStyle(e),m=o+parseInt(l,10),h=s+parseInt(c,10),g=m+e.clientWidth,_=h+e.clientHeight,v=parseInt(u,10)||0,y=parseInt(f,10)||0,b=parseInt(d,10)||0,x=parseInt(p,10)||0;n<=o+x?o=n-parseInt(l,10)-x:n+i>g-b&&(o+=n+i-g+b),r<=h+v?s=r-parseInt(c,10)-v:r+a>_-y&&(s+=r+a-_+y),e.scrollLeft=o,e.scrollTop=s}function pi(e,t,n){let r=n===`left`?`offsetLeft`:`offsetTop`,i=0;for(;t.offsetParent&&(i+=t[r],t.offsetParent!==e);){if(t.offsetParent.contains(e)){i-=e[r];break}t=t.offsetParent}return i}function mi(e,t){if(e&&document.contains(e)){let o=document.scrollingElement||document.documentElement;if(window.getComputedStyle(o).overflow!==`hidden`){var n;let{left:o,top:s}=e.getBoundingClientRect();e==null||(n=e.scrollIntoView)==null||n.call(e,{block:`nearest`});let{left:c,top:l}=e.getBoundingClientRect();if(Math.abs(o-c)>1||Math.abs(s-l)>1){var r,i,a;t==null||(i=t.containingElement)==null||(r=i.scrollIntoView)==null||r.call(i,{block:`center`,inline:`center`}),(a=e.scrollIntoView)==null||a.call(e,{block:`nearest`})}}else{let t=nee(e);for(let n of t)fi(n,e)}}}function hi(e){return e.pointerType===``&&e.isTrusted?!0:Rr()&&e.pointerType?e.type===`click`&&e.buttons===1:e.detail===0&&!e.pointerType}function gi(e){return!Rr()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType===`mouse`}function _i(e,t,n){let r=qn(()=>{n&&n(t)});(0,b.useEffect)(()=>{let t=e?.current?.form;return t?.addEventListener(`reset`,r),()=>{t?.removeEventListener(`reset`,r)}},[e,r])}var vi=`react-aria-clear-focus`,yi=`react-aria-focus`;function bi(e){return jr()?e.metaKey:e.ctrlKey}var xi=typeof Element<`u`&&`checkVisibility`in Element.prototype;function Si(e){let t=rr(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:r}=e.style,i=n!==`none`&&r!==`hidden`&&r!==`collapse`;if(i){let{getComputedStyle:t}=e.ownerDocument.defaultView,{display:n,visibility:r}=t(e);i=n!==`none`&&r!==`hidden`&&r!==`collapse`}return i}function Ci(e,t){return!e.hasAttribute(`hidden`)&&!e.hasAttribute(`data-react-aria-prevent-focus`)&&(e.nodeName===`DETAILS`&&t&&t.nodeName!==`SUMMARY`?e.hasAttribute(`open`):!0)}function wi(e,t){return xi?e.checkVisibility()&&!e.closest(`[data-react-aria-prevent-focus]`):e.nodeName!==`#comment`&&Si(e)&&Ci(e,t)&&(!e.parentElement||wi(e.parentElement,e))}var Ti=[`input:not([disabled]):not([type=hidden])`,`select:not([disabled])`,`textarea:not([disabled])`,`button:not([disabled])`,`a[href]`,`area[href]`,`summary`,`iframe`,`object`,`embed`,`audio[controls]`,`video[controls]`,`[contenteditable]:not([contenteditable^="false"])`,`permission`],Ei=Ti.join(`:not([hidden]),`)+`,[tabindex]:not([disabled]):not([hidden])`;Ti.push(`[tabindex]:not([tabindex="-1"]):not([disabled])`);var Di=Ti.join(`:not([hidden]):not([tabindex="-1"]),`);function Oi(e){return e.matches(Ei)&&wi(e)&&!Ai(e)}function ki(e){return e.matches(Di)&&wi(e)&&!Ai(e)}function Ai(e){let t=e;for(;t!=null;){if(t instanceof t.ownerDocument.defaultView.HTMLElement&&t.inert)return!0;t=t.parentElement}return!1}function ji(e,t,n){let[r,i]=(0,b.useState)(e||t),a=(0,b.useRef)(e!==void 0),o=e!==void 0;(0,b.useEffect)(()=>{a.current,a.current=o},[o]);let s=o?e:r,c=(0,b.useCallback)((e,...t)=>{let r=(e,...t)=>{n&&(Object.is(s,e)||n(e,...t)),o||(s=e)};typeof e==`function`?i((n,...i)=>{let a=e(o?s:n,...i);return r(a,...t),o?n:a}):(o||i(e),r(e,...t))},[o,s,n]);return[s,c]}function Mi(e,t=-1/0,n=1/0){return Math.min(Math.max(e,t),n)}var Ni=new Map;function Pi(e){let{locale:t}=Sn(),n=t+(e?Object.entries(e).sort((e,t)=>e[0]<t[0]?-1:1).join():``);if(Ni.has(n))return Ni.get(n);let r=new Intl.Collator(t,e);return Ni.set(n,r),r}var Fi={top:`top`,bottom:`top`,left:`left`,right:`left`},Ii={top:`bottom`,bottom:`top`,left:`right`,right:`left`},Li={top:`left`,left:`top`},Ri={top:`height`,left:`width`},zi={width:`totalWidth`,height:`totalHeight`},Bi={},Vi=typeof document<`u`?window.visualViewport:null;function Hi(e){let t=0,n=0,r=0,i=0,a=0,o=0,s={},c=(Vi?.scale??1)>1;if(e.tagName===`BODY`){let c=document.documentElement;r=c.clientWidth,i=c.clientHeight,t=Vi?.width??r,n=Vi?.height??i,s.top=c.scrollTop||e.scrollTop,s.left=c.scrollLeft||e.scrollLeft,Vi&&(a=Vi.offsetTop,o=Vi.offsetLeft)}else ({width:t,height:n,top:a,left:o}=Qi(e)),s.top=e.scrollTop,s.left=e.scrollLeft,r=t,i=n;return Ir()&&(e.tagName===`BODY`||e.tagName===`HTML`)&&c&&(s.top=0,s.left=0,a=Vi?.pageTop??0,o=Vi?.pageLeft??0),{width:t,height:n,totalWidth:r,totalHeight:i,scroll:s,top:a,left:o}}function Ui(e){return{top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}}function Wi(e,t,n,r,i,a,o){let s=i.scroll[e]??0,c=r[Ri[e]],l=r.scroll[Fi[e]]+a,u=c+r.scroll[Fi[e]]-a,d=t-s+o[e]-r[Fi[e]],f=t-s+n+o[e]-r[Fi[e]];return d<l?l-d:f>u?Math.max(u-f,l-d):0}function Gi(e){let t=window.getComputedStyle(e);return{top:parseInt(t.marginTop,10)||0,bottom:parseInt(t.marginBottom,10)||0,left:parseInt(t.marginLeft,10)||0,right:parseInt(t.marginRight,10)||0}}function Ki(e){if(Bi[e])return Bi[e];let[t,n]=e.split(` `),r=Fi[t]||`right`,i=Li[r];Fi[n]||(n=`center`);let a=Ri[r],o=Ri[i];return Bi[e]={placement:t,crossPlacement:n,axis:r,crossAxis:i,size:a,crossSize:o},Bi[e]}function qi(e,t,n,r,i,a,o,s,c,l){let{placement:u,crossPlacement:d,axis:f,crossAxis:p,size:m,crossSize:h}=r,g={};g[p]=e[p]??0,d===`center`?g[p]+=((e[h]??0)-(n[h]??0))/2:d!==p&&(g[p]+=(e[h]??0)-(n[h]??0)),g[p]+=a;let _=e[p]-n[h]+c+l,v=e[p]+e[h]-c-l;if(g[p]=Mi(g[p],_,v),u===f){let n=s?o[m]:t[zi[m]];g[Ii[f]]=Math.floor(n-e[f]+i)}else g[f]=Math.floor(e[f]+e[m]+i);return g}function Ji(e,t,n,r,i,a,o,s){let c=r?n.height:t[zi.height],l=e.top==null?n.top+(c-(e.bottom??0)-o):n.top+e.top,u=s===`top`?Math.max(0,l+o-(t.top+(t.scroll.top??0))-((i.top??0)+(i.bottom??0)+a)):Math.max(0,t.height+t.top+(t.scroll.top??0)-l-((i.top??0)+(i.bottom??0)+a));return Math.min(t.height-a*2,u)}function Yi(e,t,n,r,i,a){let{placement:o,axis:s,size:c}=a;return o===s?Math.max(0,n[s]-e[s]-(e.scroll[s]??0)+t[s]-(r[s]??0)-r[Ii[s]]-i):Math.max(0,e[c]+e[s]+e.scroll[s]-t[s]-n[s]-n[c]-(r[s]??0)-r[Ii[s]]-i)}function Xi(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h){let g=Ki(e),{size:_,crossAxis:v,crossSize:y,placement:b,crossPlacement:x}=g,S=qi(t,s,n,g,u,d,l,f,m,h),C=u,w=Yi(s,l,t,i,a+u,g);if(o&&r[_]>w){let e=Ki(`${Ii[b]} ${x}`),r=qi(t,s,n,e,u,d,l,f,m,h);Yi(s,l,t,i,a+u,e)>w&&(g=e,S=r,C=u)}let T=`bottom`;g.axis===`top`?g.placement===`top`?T=`top`:g.placement===`bottom`&&(T=`bottom`):g.crossAxis===`top`&&(g.crossPlacement===`top`?T=`bottom`:g.crossPlacement===`bottom`&&(T=`top`));let E=Wi(v,S[v],n[y],s,c,a,l);S[v]+=E;let D=Ji(S,s,l,f,i,a,n.height,T);p&&p<D&&(D=p),n.height=Math.min(n.height,D),S=qi(t,s,n,g,C,d,l,f,m,h),E=Wi(v,S[v],n[y],s,c,a,l),S[v]+=E;let O={},k=t[v]-S[v]-i[Fi[v]],A=k+.5*t[y],j=m/2+h,M=Fi[v]===`left`?(i.left??0)+(i.right??0):(i.top??0)+(i.bottom??0),ee=n[y]-M-m/2-h,N=t[v]+m/2-(S[v]+i[Fi[v]]),te=t[v]+t[y]-m/2-(S[v]+i[Fi[v]]),ne=Mi(A,N,te);O[v]=Mi(ne,j,ee),{placement:b,crossPlacement:x}=g,m?k=O[v]:x===`right`?k+=t[y]:x===`center`&&(k+=t[y]/2);let re=b===`left`||b===`top`?n[_]:0,P={x:b===`top`||b===`bottom`?k:re,y:b===`left`||b===`right`?k:re};return{position:S,maxHeight:D,arrowOffsetLeft:O.left,arrowOffsetTop:O.top,placement:b,triggerAnchorPoint:P}}function Zi(e){let{placement:t,targetNode:n,overlayNode:r,scrollNode:i,padding:a,shouldFlip:o,boundaryElement:s,offset:c,crossOffset:l,maxHeight:u,arrowSize:d=0,arrowBoundaryOffset:f=0}=e,p=r instanceof HTMLElement?ea(r):document.documentElement,m=p===document.documentElement,h=window.getComputedStyle(p).position,g=!!h&&h!==`static`,_=m?Qi(n):$i(n,p);if(!m){let{marginTop:e,marginLeft:t}=window.getComputedStyle(n);_.top+=parseInt(e,10)||0,_.left+=parseInt(t,10)||0}let v=Qi(r),y=Gi(r);v.width+=(y.left??0)+(y.right??0),v.height+=(y.top??0)+(y.bottom??0);let b=Ui(i),x=Hi(s),S=Hi(p),C=s.tagName===`BODY`?Qi(p):$i(p,s);return p.tagName===`HTML`&&s.tagName===`BODY`&&(S.scroll.top=0,S.scroll.left=0),Xi(t,_,v,b,y,a,o,x,S,C,c,l,g,u,d,f)}function Qi(e){let{top:t,left:n,width:r,height:i}=e.getBoundingClientRect(),{scrollTop:a,scrollLeft:o,clientTop:s,clientLeft:c}=document.documentElement;return{top:t+a-s,left:n+o-c,width:r,height:i}}function $i(e,t){let n=window.getComputedStyle(e),r;if(n.position===`fixed`){let{top:t,left:n,width:i,height:a}=e.getBoundingClientRect();r={top:t,left:n,width:i,height:a}}else{r=Qi(e);let n=Qi(t),i=window.getComputedStyle(t);n.top+=(parseInt(i.borderTopWidth,10)||0)-t.scrollTop,n.left+=(parseInt(i.borderLeftWidth,10)||0)-t.scrollLeft,r.top-=n.top,r.left-=n.left}return r.top-=parseInt(n.marginTop,10)||0,r.left-=parseInt(n.marginLeft,10)||0,r}function ea(e){let t=e.offsetParent;if(t&&t===document.body&&window.getComputedStyle(t).position===`static`&&!ta(t)&&(t=document.documentElement),t==null)for(t=e.parentElement;t&&!ta(t);)t=t.parentElement;return t||document.documentElement}function ta(e){let t=window.getComputedStyle(e);return t.transform!==`none`||/transform|perspective/.test(t.willChange)||t.filter!==`none`||t.contain===`paint`||`backdropFilter`in t&&t.backdropFilter!==`none`||`WebkitBackdropFilter`in t&&t.WebkitBackdropFilter!==`none`}var na=new WeakMap;function ra(e){let{triggerRef:t,isOpen:n,onClose:r}=e;(0,b.useEffect)(()=>{if(!n||r===null)return;let e=e=>{let n=e.target;if(!t.current||n instanceof Node&&!n.contains(t.current)||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)return;let i=r||na.get(t.current);i&&i()};return window.addEventListener(`scroll`,e,!0),()=>{window.removeEventListener(`scroll`,e,!0)}},[n,r,t])}var ia=typeof document<`u`?window.visualViewport:null;function aa(e){let{direction:t}=Sn(),{arrowSize:n,targetRef:r,overlayRef:i,arrowRef:a,scrollRef:o=i,placement:s=`bottom`,containerPadding:c=12,shouldFlip:l=!0,boundaryElement:u=typeof document<`u`?document.body:null,offset:d=0,crossOffset:f=0,shouldUpdatePosition:p=!0,isOpen:m=!0,onClose:h,maxHeight:g,arrowBoundaryOffset:_=0}=e,[v,y]=(0,b.useState)(null),x=[p,s,i.current,r.current,a?.current,o.current,c,l,u,d,f,m,t,g,_,n],S=(0,b.useRef)(ia?.scale);(0,b.useEffect)(()=>{m&&(S.current=ia?.scale)},[m]);let C=(0,b.useCallback)(()=>{var e;if(p===!1||!m||!i.current||!r.current||!u||ia?.scale!==S.current||i.current.querySelector(`[data-react-aria-incomplete]`)||(e=i.current).getAnimations?.call(e).length>0)return;let h=null;if(o.current&&o.current.contains(document.activeElement)){let e=document.activeElement?.getBoundingClientRect(),t=o.current.getBoundingClientRect();h={type:`top`,offset:(e?.top??0)-t.top},h.offset>t.height/2&&(h.type=`bottom`,h.offset=(e?.bottom??0)-t.bottom)}let v=i.current;!g&&i.current&&(v.style.top=`0px`,v.style.bottom=``,v.style.maxHeight=(window.visualViewport?.height??window.innerHeight)+`px`);let b=Zi({placement:oa(s,t),overlayNode:i.current,targetNode:r.current,scrollNode:o.current||i.current,padding:c,shouldFlip:l,boundaryElement:u,offset:d,crossOffset:f,maxHeight:g,arrowSize:n??a?.current?.getBoundingClientRect().width??0,arrowBoundaryOffset:_});if(b.position){if(v.style.top=``,v.style.bottom=``,v.style.left=``,v.style.right=``,Object.keys(b.position).forEach(e=>v.style[e]=b.position[e]+`px`),v.style.maxHeight=b.maxHeight==null?``:b.maxHeight+`px`,h&&document.activeElement&&o.current){let e=document.activeElement.getBoundingClientRect(),t=o.current.getBoundingClientRect(),n=e[h.type]-t[h.type];o.current.scrollTop+=n-h.offset}y(b)}},x);Gn(C,x),ree(C),ii({ref:i,onResize:C}),ii({ref:r,onResize:C});let w=(0,b.useRef)(!1);Gn(()=>{let e,t=()=>{w.current=!0,clearTimeout(e),e=setTimeout(()=>{w.current=!1},500),C()},n=()=>{w.current&&t()};return ia?.addEventListener(`resize`,t),ia?.addEventListener(`scroll`,n),()=>{ia?.removeEventListener(`resize`,t),ia?.removeEventListener(`scroll`,n)}},[C]);let T=(0,b.useCallback)(()=>{w.current||h?.()},[h,w]);return ra({triggerRef:r,isOpen:m,onClose:h&&T}),{overlayProps:{style:{position:v?`absolute`:`fixed`,top:v?void 0:0,left:v?void 0:0,zIndex:1e5,...v?.position,maxHeight:v?.maxHeight??`100vh`}},placement:v?.placement??null,triggerAnchorPoint:v?.triggerAnchorPoint??null,arrowProps:{"aria-hidden":`true`,role:`presentation`,style:{left:v?.arrowOffsetLeft,top:v?.arrowOffsetTop}},updatePosition:C}}function ree(e){Gn(()=>(window.addEventListener(`resize`,e,!1),()=>{window.removeEventListener(`resize`,e,!1)}),[e])}function oa(e,t){return t===`rtl`?e.replace(`start`,`right`).replace(`end`,`left`):e.replace(`start`,`left`).replace(`end`,`right`)}function sa(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function ca(e,t){Object.defineProperty(e,`target`,{value:t}),Object.defineProperty(e,`currentTarget`,{value:t})}function la(e){let t=(0,b.useRef)({isFocused:!1,observer:null});Gn(()=>{let e=t.current;return()=>{e.observer&&=(e.observer.disconnect(),null)}},[]);let n=qn(t=>{e?.(t)});return(0,b.useCallback)(e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target;r.addEventListener(`focusout`,e=>{if(t.current.isFocused=!1,r.disabled){let t=sa(e);n(t)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)},{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var e;(e=t.current.observer)==null||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent(`blur`,{relatedTarget:n})),r.dispatchEvent(new FocusEvent(`focusout`,{bubbles:!0,relatedTarget:n}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:[`disabled`]})}},[n])}var ua=!1;function da(e){for(;e&&!Oi(e);)e=e.parentElement;let t=rr(e),n=t.document.activeElement;if(!n||n===e)return;ua=!0;let r=!1,i=e=>{(e.target===n||r)&&e.stopImmediatePropagation()},a=t=>{(t.target===n||r)&&(t.stopImmediatePropagation(),!e&&!r&&(r=!0,Cr(n),c()))},o=t=>{(t.target===e||r)&&t.stopImmediatePropagation()},s=t=>{(t.target===e||r)&&(t.stopImmediatePropagation(),r||(r=!0,Cr(n),c()))};t.addEventListener(`blur`,i,!0),t.addEventListener(`focusout`,a,!0),t.addEventListener(`focusin`,s,!0),t.addEventListener(`focus`,o,!0);let c=()=>{cancelAnimationFrame(l),t.removeEventListener(`blur`,i,!0),t.removeEventListener(`focusout`,a,!0),t.removeEventListener(`focusin`,s,!0),t.removeEventListener(`focus`,o,!0),ua=!1,r=!1},l=requestAnimationFrame(c);return c}var fa=`default`,pa=``,ma=new WeakMap;function ha(e){if(Pr()){if(fa===`default`){let t=nr(e);pa=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect=`none`}fa=`disabled`}else if(e instanceof HTMLElement||e instanceof SVGElement){let t=`userSelect`in e.style?`userSelect`:`webkitUserSelect`;ma.set(e,e.style[t]),e.style[t]=`none`}}function ga(e){if(Pr()){if(fa!==`disabled`)return;fa=`restoring`,setTimeout(()=>{$r(()=>{if(fa===`restoring`){let t=nr(e);t.documentElement.style.webkitUserSelect===`none`&&(t.documentElement.style.webkitUserSelect=pa||``),pa=``,fa=`default`}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&ma.has(e)){let t=ma.get(e),n=`userSelect`in e.style?`userSelect`:`webkitUserSelect`;e.style[n]===`none`&&(e.style[n]=t),e.getAttribute(`style`)===``&&e.removeAttribute(`style`),ma.delete(e)}}var _a=b.createContext({register:()=>{}});_a.displayName=`PressResponderContext`;function va(e,t){return t.get?t.get.call(e):t.value}function ya(e,t,n){if(!t.has(e))throw TypeError(`attempted to `+n+` private field on non-instance`);return t.get(e)}function ba(e,t){var n=ya(e,t,`get`);return va(e,n)}function xa(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError(`attempted to set read only private field`);t.value=n}}function Sa(e,t,n){var r=ya(e,t,`set`);return xa(e,r,n),n}c();function Ca(e){let t=(0,b.useContext)(_a);if(t){let{register:n,...r}=t;e=gr(r,e),n()}return ai(t,e.ref),e}var wa=new WeakMap,Ta=class{continuePropagation(){Sa(this,wa,!1)}get shouldStopPropagation(){return ba(this,wa)}constructor(e,t,n,r){Wn(this,wa,{writable:!0,value:void 0}),Sa(this,wa,!0);let i=r?.target??n.currentTarget,a=i?.getBoundingClientRect(),o,s=0,c,l=null;n.clientX!=null&&n.clientY!=null&&(c=n.clientX,l=n.clientY),a&&(c!=null&&l!=null?(o=c-a.left,s=l-a.top):(o=a.width/2,s=a.height/2)),this.type=e,this.pointerType=t,this.target=n.currentTarget,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.x=o,this.y=s}},Ea=Symbol(`linkClicked`),Da=`react-aria-pressable-style`,Oa=`data-react-aria-pressable`;function ka(e){let{onPress:t,onPressChange:n,onPressStart:r,onPressEnd:i,onPressUp:a,onClick:o,isDisabled:s,isPressed:c,preventFocusOnPress:l,shouldCancelOnPointerExit:u,allowTextSelectionOnPress:d,ref:f,...p}=Ca(e),[m,h]=(0,b.useState)(!1),g=(0,b.useRef)({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:_,removeAllGlobalListeners:v}=ei(),y=qn((e,t)=>{let i=g.current;if(s||i.didFirePressStart)return!1;let a=!0;if(i.isTriggeringEvent=!0,r){let n=new Ta(`pressstart`,t,e);r(n),a=n.shouldStopPropagation}return n&&n(!0),i.isTriggeringEvent=!1,i.didFirePressStart=!0,h(!0),a}),x=qn((e,r,a=!0)=>{let o=g.current;if(!o.didFirePressStart)return!1;o.didFirePressStart=!1,o.isTriggeringEvent=!0;let c=!0;if(i){let t=new Ta(`pressend`,r,e);i(t),c=t.shouldStopPropagation}if(n&&n(!1),h(!1),t&&a&&!s){let n=new Ta(`press`,r,e);t(n),c&&=n.shouldStopPropagation}return o.isTriggeringEvent=!1,c}),S=qn((e,t)=>{let n=g.current;if(s)return!1;if(a){n.isTriggeringEvent=!0;let r=new Ta(`pressup`,t,e);return a(r),n.isTriggeringEvent=!1,r.shouldStopPropagation}return!0}),C=qn(e=>{let t=g.current;if(t.isPressed&&t.target){t.didFirePressStart&&t.pointerType!=null&&x(Ma(t.target,e),t.pointerType,!1),t.isPressed=!1,t.isOverTarget=!1,t.activePointerId=null,t.pointerType=null,v(),d||ga(t.target);for(let e of t.disposables)e();t.disposables=[]}}),w=qn(e=>{u&&C(e)}),T=qn(e=>{o?.(e)}),E=qn((e,t)=>{if(o){let n=new MouseEvent(`click`,e);ca(n,t),o(sa(n))}}),D=(0,b.useMemo)(()=>{let e=g.current,t={onKeyDown(t){if(ja(t.nativeEvent,t.currentTarget)&&cr(t.currentTarget,ur(t.nativeEvent))){var r;Pa(ur(t.nativeEvent),t.key)&&t.preventDefault();let i=!0;if(!e.isPressed&&!t.repeat){e.target=t.currentTarget,e.isPressed=!0,e.pointerType=`keyboard`,i=y(t,`keyboard`);let r=t.currentTarget;_(nr(t.currentTarget),`keyup`,tr(t=>{ja(t,r)&&!t.repeat&&cr(r,ur(t))&&e.target&&S(Ma(e.target,t),`keyboard`)},n),!0)}i&&t.stopPropagation(),t.metaKey&&jr()&&((r=e.metaKeyEvents)==null||r.set(t.key,t.nativeEvent))}else t.key===`Meta`&&(e.metaKeyEvents=new Map)},onClick(t){if(!(t&&!cr(t.currentTarget,ur(t.nativeEvent)))&&t&&t.button===0&&!e.isTriggeringEvent&&!Wr.isOpening){let n=!0;if(s&&t.preventDefault(),!e.ignoreEmulatedMouseEvents&&!e.isPressed&&(e.pointerType===`virtual`||hi(t.nativeEvent))){let e=y(t,`virtual`),r=S(t,`virtual`),i=x(t,`virtual`);T(t),n=e&&r&&i}else if(e.isPressed&&e.pointerType!==`keyboard`){let r=e.pointerType||t.nativeEvent.pointerType||`virtual`,i=S(Ma(t.currentTarget,t),r),a=x(Ma(t.currentTarget,t),r,!0);n=i&&a,e.isOverTarget=!1,T(t),C(t)}e.ignoreEmulatedMouseEvents=!1,n&&t.stopPropagation()}}},n=t=>{if(e.isPressed&&e.target&&ja(t,e.target)){var n;Pa(ur(t),t.key)&&t.preventDefault();let r=ur(t),i=cr(e.target,ur(t));x(Ma(e.target,t),`keyboard`,i),i&&E(t,e.target),v(),t.key!==`Enter`&&Aa(e.target)&&cr(e.target,r)&&!t[Ea]&&(t[Ea]=!0,Wr(e.target,t,!1)),e.isPressed=!1,(n=e.metaKeyEvents)==null||n.delete(t.key)}else if(t.key===`Meta`&&e.metaKeyEvents?.size){var r;let t=e.metaKeyEvents;e.metaKeyEvents=void 0;for(let n of t.values())(r=e.target)==null||r.dispatchEvent(new KeyboardEvent(`keyup`,n))}};if(typeof PointerEvent<`u`){t.onPointerDown=t=>{if(t.button!==0||!cr(t.currentTarget,ur(t.nativeEvent)))return;if(gi(t.nativeEvent)){e.pointerType=`virtual`;return}e.pointerType=t.pointerType;let i=!0;if(!e.isPressed){e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=t.pointerId,e.target=t.currentTarget,d||ha(e.target),i=y(t,e.pointerType);let a=ur(t.nativeEvent);`releasePointerCapture`in a&&a.releasePointerCapture(t.pointerId),_(nr(t.currentTarget),`pointerup`,n,!1),_(nr(t.currentTarget),`pointercancel`,r,!1)}i&&t.stopPropagation()},t.onMouseDown=t=>{if(cr(t.currentTarget,ur(t.nativeEvent))&&t.button===0){if(l){let n=da(t.target);n&&e.disposables.push(n)}t.stopPropagation()}},t.onPointerUp=t=>{!cr(t.currentTarget,ur(t.nativeEvent))||e.pointerType===`virtual`||t.button===0&&!e.isPressed&&S(t,e.pointerType||t.pointerType)},t.onPointerEnter=t=>{t.pointerId===e.activePointerId&&e.target&&!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,y(Ma(e.target,t),e.pointerType))},t.onPointerLeave=t=>{t.pointerId===e.activePointerId&&e.target&&e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,x(Ma(e.target,t),e.pointerType,!1),w(t))};let n=t=>{if(t.pointerId===e.activePointerId&&e.isPressed&&t.button===0&&e.target){if(cr(e.target,ur(t))&&e.pointerType!=null){let n=!1,r=setTimeout(()=>{e.isPressed&&e.target instanceof HTMLElement&&(n?C(t):(Cr(e.target),e.target.click()))},80);_(t.currentTarget,`click`,()=>n=!0,!0),e.disposables.push(()=>clearTimeout(r))}else C(t);e.isOverTarget=!1}},r=e=>{C(e)};t.onDragStart=e=>{cr(e.currentTarget,ur(e.nativeEvent))&&C(e)}}return t},[_,s,l,v,d,C,w,x,y,S,T,E]);return(0,b.useEffect)(()=>{if(!f)return;let e=nr(f.current);if(!e||!e.head||e.getElementById(Da))return;let t=e.createElement(`style`);t.id=Da,t.textContent=`
@layer {
  [${Oa}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),e.head.prepend(t)},[f]),(0,b.useEffect)(()=>{let e=g.current;return()=>{d||ga(e.target??void 0);for(let t of e.disposables)t();e.disposables=[]}},[d]),{isPressed:c||m,pressProps:gr(p,D,{[Oa]:!0})}}function Aa(e){return e.tagName===`A`&&e.hasAttribute(`href`)}function ja(e,t){let{key:n,code:r}=e,i=t,a=i.getAttribute(`role`);return(n===`Enter`||n===` `||n===`Spacebar`||r===`Space`)&&!(i instanceof rr(i).HTMLInputElement&&!Ia(i,n)||i instanceof rr(i).HTMLTextAreaElement||i.isContentEditable)&&!((a===`link`||!a&&Aa(i))&&n!==`Enter`)}function Ma(e,t){let n=t.clientX,r=t.clientY;return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:n,clientY:r}}function Na(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!==`submit`&&e.type!==`reset`:!Aa(e)}function Pa(e,t){return e instanceof HTMLInputElement?!Ia(e,t):Na(e)}var Fa=new Set([`checkbox`,`radio`,`range`,`color`,`file`,`image`,`button`,`submit`,`reset`]);function Ia(e,t){return e.type===`checkbox`||e.type===`radio`?t===` `:Fa.has(e.type)}var La=null,Ra=new Set,za=new Map,Ba=!1,Va=!1,Ha={Tab:!0,Escape:!0};function Ua(e,t){for(let n of Ra)n(e,t)}function Wa(e){return!(e.metaKey||!jr()&&e.altKey||e.ctrlKey||e.key===`Control`||e.key===`Shift`||e.key===`Meta`)}function Ga(e){Ba=!0,Wa(e)&&(La=`keyboard`,Ua(`keyboard`,e))}function Ka(e){La=`pointer`,(e.type===`mousedown`||e.type===`pointerdown`)&&(Ba=!0,Ua(`pointer`,e))}function qa(e){hi(e)&&(Ba=!0,La=`virtual`)}function Ja(e){e.target===window||e.target===document||ua||!e.isTrusted||(!Ba&&!Va&&(La=`virtual`,Ua(`virtual`,e)),Ba=!1,Va=!1)}function Ya(){ua||(Ba=!1,Va=!0)}function Xa(e){if(typeof window>`u`||typeof document>`u`||za.get(rr(e)))return;let t=rr(e),n=nr(e),r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){Ba=!0,r.apply(this,arguments)},n.addEventListener(`keydown`,Ga,!0),n.addEventListener(`keyup`,Ga,!0),n.addEventListener(`click`,qa,!0),t.addEventListener(`focus`,Ja,!0),t.addEventListener(`blur`,Ya,!1),typeof PointerEvent<`u`&&(n.addEventListener(`pointerdown`,Ka,!0),n.addEventListener(`pointermove`,Ka,!0),n.addEventListener(`pointerup`,Ka,!0)),t.addEventListener(`beforeunload`,()=>{Za(e)},{once:!0}),za.set(t,{focus:r})}var Za=(e,t)=>{let n=rr(e),r=nr(e);t&&r.removeEventListener(`DOMContentLoaded`,t),za.has(n)&&(n.HTMLElement.prototype.focus=za.get(n).focus,r.removeEventListener(`keydown`,Ga,!0),r.removeEventListener(`keyup`,Ga,!0),r.removeEventListener(`click`,qa,!0),n.removeEventListener(`focus`,Ja,!0),n.removeEventListener(`blur`,Ya,!1),typeof PointerEvent<`u`&&(r.removeEventListener(`pointerdown`,Ka,!0),r.removeEventListener(`pointermove`,Ka,!0),r.removeEventListener(`pointerup`,Ka,!0)),za.delete(n))};function Qa(e){let t=nr(e),n;return t.readyState===`loading`?(n=()=>{Xa(e)},t.addEventListener(`DOMContentLoaded`,n)):Xa(e),()=>Za(e,n)}typeof document<`u`&&Qa();function $a(){return La!==`pointer`}function eo(){return La}function to(e){La=e,Ua(e,null)}var no=new Set([`checkbox`,`radio`,`range`,`color`,`file`,`image`,`button`,`submit`,`reset`]);function ro(e,t,n){let r=nr(n?.target),i=typeof window<`u`?rr(n?.target).HTMLInputElement:HTMLInputElement,a=typeof window<`u`?rr(n?.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<`u`?rr(n?.target).HTMLElement:HTMLElement,s=typeof window<`u`?rr(n?.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof i&&!no.has(r.activeElement.type)||r.activeElement instanceof a||r.activeElement instanceof o&&r.activeElement.isContentEditable,!(e&&t===`keyboard`&&n instanceof s&&!Ha[n.key])}function io(e,t,n){Xa(),(0,b.useEffect)(()=>{let t=(t,r)=>{ro(!!n?.isTextInput,t,r)&&e($a())};return Ra.add(t),()=>{Ra.delete(t)}},t)}function ao(e){let t=nr(e),n=lr(t);if(eo()===`virtual`){let r=n;$r(()=>{lr(t)===r&&e.isConnected&&Cr(e)})}else Cr(e)}function oo(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e,a=(0,b.useCallback)(e=>{if(e.target===e.currentTarget)return r&&r(e),i&&i(!1),!0},[r,i]),o=la(a),s=(0,b.useCallback)(e=>{let t=nr(e.target),r=t?lr(t):lr();e.target===e.currentTarget&&r===ur(e.nativeEvent)&&(n&&n(e),i&&i(!0),o(e))},[i,n,o]);return{focusProps:{onFocus:!t&&(n||i||r)?s:void 0,onBlur:!t&&(r||i)?a:void 0}}}function so(e){if(!e)return;let t=!0;return n=>{let r={...n,preventDefault(){n.preventDefault()},isDefaultPrevented(){return n.isDefaultPrevented()},stopPropagation(){t=!0},continuePropagation(){t=!1},isPropagationStopped(){return t}};e(r),t&&n.stopPropagation()}}function co(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:so(e.onKeyDown),onKeyUp:so(e.onKeyUp)}}}var lo=b.createContext(null);function uo(e){let t=(0,b.useContext)(lo)||{};ai(t,e);let{ref:n,...r}=t;return r}function fo(e,t){let{focusProps:n}=oo(e),{keyboardProps:r}=co(e),i=gr(n,r),a=uo(t),o=e.isDisabled?{}:a,s=(0,b.useRef)(e.autoFocus);(0,b.useEffect)(()=>{s.current&&t.current&&ao(t.current),s.current=!1},[t]);let c=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(c=void 0),{focusableProps:gr({...i,tabIndex:c},o)}}function po({children:e}){let t=(0,b.useMemo)(()=>({register:()=>{}}),[]);return b.createElement(_a.Provider,{value:t},e)}function mo(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,a=(0,b.useRef)({isFocusWithin:!1}),{addGlobalListener:o,removeAllGlobalListeners:s}=ei(),c=(0,b.useCallback)(e=>{e.currentTarget.contains(e.target)&&a.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(a.current.isFocusWithin=!1,s(),n&&n(e),i&&i(!1))},[n,i,a,s]),l=la(c),u=(0,b.useCallback)(e=>{if(!e.currentTarget.contains(e.target))return;let t=nr(e.target),n=lr(t);if(!a.current.isFocusWithin&&n===ur(e.nativeEvent)){r&&r(e),i&&i(!0),a.current.isFocusWithin=!0,l(e);let n=e.currentTarget;o(t,`focus`,e=>{if(a.current.isFocusWithin&&!cr(n,e.target)){let r=new t.defaultView.FocusEvent(`blur`,{relatedTarget:e.target});ca(r,n);let i=sa(r);c(i)}},{capture:!0})}},[r,i,l,o,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:c}}}var ho=!1,go=0;function _o(){ho=!0,setTimeout(()=>{ho=!1},50)}function vo(e){e.pointerType===`touch`&&_o()}function yo(){if(!(typeof document>`u`))return go===0&&typeof PointerEvent<`u`&&document.addEventListener(`pointerup`,vo),go++,()=>{go--,!(go>0)&&typeof PointerEvent<`u`&&document.removeEventListener(`pointerup`,vo)}}function bo(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[a,o]=(0,b.useState)(!1),s=(0,b.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:``,target:null}).current;(0,b.useEffect)(yo,[]);let{addGlobalListener:c,removeAllGlobalListeners:l}=ei(),{hoverProps:u,triggerHoverEnd:d}=(0,b.useMemo)(()=>{let e=(e,r)=>{if(s.pointerType=r,i||r===`touch`||s.isHovered||!e.currentTarget.contains(e.target))return;s.isHovered=!0;let l=e.currentTarget;s.target=l,c(nr(e.target),`pointerover`,e=>{s.isHovered&&s.target&&!cr(s.target,e.target)&&a(e,e.pointerType)},{capture:!0}),t&&t({type:`hoverstart`,target:l,pointerType:r}),n&&n(!0),o(!0)},a=(e,t)=>{let i=s.target;s.pointerType=``,s.target=null,!(t===`touch`||!s.isHovered||!i)&&(s.isHovered=!1,l(),r&&r({type:`hoverend`,target:i,pointerType:t}),n&&n(!1),o(!1))},u={};return typeof PointerEvent<`u`&&(u.onPointerEnter=t=>{ho&&t.pointerType===`mouse`||e(t,t.pointerType)},u.onPointerLeave=e=>{!i&&e.currentTarget.contains(e.target)&&a(e,e.pointerType)}),{hoverProps:u,triggerHoverEnd:a}},[t,n,r,i,s,c,l]);return(0,b.useEffect)(()=>{i&&d({currentTarget:s.target},s.pointerType)},[i]),{hoverProps:u,isHovered:a}}function xo(e){let{ref:t,onInteractOutside:n,isDisabled:r,onInteractOutsideStart:i}=e,a=(0,b.useRef)({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),o=qn(e=>{n&&So(e,t)&&(i&&i(e),a.current.isPointerDown=!0)}),s=qn(e=>{n&&n(e)});(0,b.useEffect)(()=>{let e=a.current;if(r)return;let n=t.current,i=nr(n);if(typeof PointerEvent<`u`){let n=n=>{e.isPointerDown&&So(n,t)&&s(n),e.isPointerDown=!1};return i.addEventListener(`pointerdown`,o,!0),i.addEventListener(`click`,n,!0),()=>{i.removeEventListener(`pointerdown`,o,!0),i.removeEventListener(`click`,n,!0)}}},[t,r,o,s])}function So(e,t){if(e.button>0)return!1;if(e.target){let t=e.target.ownerDocument;if(!t||!t.documentElement.contains(e.target)||e.target.closest(`[data-react-aria-top-layer]`))return!1}return t.current?!e.composedPath().includes(t.current):!1}var Co=500;function wo(e){let{isDisabled:t,onLongPressStart:n,onLongPressEnd:r,onLongPress:i,threshold:a=Co,accessibilityDescription:o}=e,s=(0,b.useRef)(void 0),{addGlobalListener:c,removeGlobalListener:l}=ei(),{pressProps:u}=ka({isDisabled:t,onPressStart(e){if(e.continuePropagation(),(e.pointerType===`mouse`||e.pointerType===`touch`)&&(n&&n({...e,type:`longpressstart`}),s.current=setTimeout(()=>{e.target.dispatchEvent(new PointerEvent(`pointercancel`,{bubbles:!0})),nr(e.target).activeElement!==e.target&&Cr(e.target),i&&i({...e,type:`longpress`}),s.current=void 0},a),e.pointerType===`touch`)){let t=e=>{e.preventDefault()};c(e.target,`contextmenu`,t,{once:!0}),c(window,`pointerup`,()=>{setTimeout(()=>{l(e.target,`contextmenu`,t)},30)},{once:!0})}},onPressEnd(e){s.current&&clearTimeout(s.current),r&&(e.pointerType===`mouse`||e.pointerType===`touch`)&&r({...e,type:`longpressend`})}}),d=ui(i&&!t?o:void 0);return{longPressProps:gr(u,d)}}var To=b.createContext(null),Eo=`react-aria-focus-scope-restore`,Do=null;function Oo(e){let{children:t,contain:n,restoreFocus:r,autoFocus:i}=e,a=(0,b.useRef)(null),o=(0,b.useRef)(null),s=(0,b.useRef)([]),{parentNode:c}=(0,b.useContext)(To)||{},l=(0,b.useMemo)(()=>new Yo({scopeRef:s}),[s]);Gn(()=>{let e=c||Xo.root;if(Xo.getTreeNode(e.scopeRef)&&Do&&!Ro(Do,e.scopeRef)){let t=Xo.getTreeNode(Do);t&&(e=t)}e.addChild(l),Xo.addNode(l)},[l,c]),Gn(()=>{let e=Xo.getTreeNode(s);e&&(e.contain=!!n)},[n]),Gn(()=>{let e=a.current?.nextSibling,t=[],n=e=>e.stopPropagation();for(;e&&e!==o.current;)t.push(e),e.addEventListener(Eo,n),e=e.nextSibling;return s.current=t,()=>{for(let e of t)e.removeEventListener(Eo,n)}},[t]),Uo(s,r,n),No(s,n),Go(s,r,n),Ho(s,i),(0,b.useEffect)(()=>{let e=lr(nr(s.current?s.current[0]:void 0)),t=null;if(Fo(e,s.current)){for(let n of Xo.traverse())n.scopeRef&&Fo(e,n.scopeRef.current)&&(t=n);t===Xo.getTreeNode(s)&&(Do=t.scopeRef)}},[s]),Gn(()=>()=>{let e=Xo.getTreeNode(s)?.parent?.scopeRef??null;(s===Do||Ro(s,Do))&&(!e||Xo.getTreeNode(e))&&(Do=e),Xo.removeTreeNode(s)},[s]);let u=(0,b.useMemo)(()=>ko(s),[]),d=(0,b.useMemo)(()=>({focusManager:u,parentNode:l}),[l,u]);return b.createElement(To.Provider,{value:d},b.createElement(`span`,{"data-focus-scope-start":!0,hidden:!0,ref:a}),t,b.createElement(`span`,{"data-focus-scope-end":!0,hidden:!0,ref:o}))}function ko(e){return{focusNext(t={}){let n=e.current,{from:r,tabbable:i,wrap:a,accept:o}=t,s=r||lr(nr(n[0]??void 0)),c=n[0].previousElementSibling,l=Ao(n),u=qo(l,{tabbable:i,accept:o},n);u.currentNode=Fo(s,n)?s:c;let d=u.nextNode();return!d&&a&&(u.currentNode=c,d=u.nextNode()),d&&zo(d,!0),d},focusPrevious(t={}){let n=e.current,{from:r,tabbable:i,wrap:a,accept:o}=t,s=r||lr(nr(n[0]??void 0)),c=n[n.length-1].nextElementSibling,l=Ao(n),u=qo(l,{tabbable:i,accept:o},n);u.currentNode=Fo(s,n)?s:c;let d=u.previousNode();return!d&&a&&(u.currentNode=c,d=u.previousNode()),d&&zo(d,!0),d},focusFirst(t={}){let n=e.current,{tabbable:r,accept:i}=t,a=Ao(n),o=qo(a,{tabbable:r,accept:i},n);o.currentNode=n[0].previousElementSibling;let s=o.nextNode();return s&&zo(s,!0),s},focusLast(t={}){let n=e.current,{tabbable:r,accept:i}=t,a=Ao(n),o=qo(a,{tabbable:r,accept:i},n);o.currentNode=n[n.length-1].nextElementSibling;let s=o.previousNode();return s&&zo(s,!0),s}}}function Ao(e){return e[0].parentElement}function jo(e){let t=Xo.getTreeNode(Do);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function Mo(e){if(e.checked)return!0;let t=[];return t=e.form?[...e.form?.elements?.namedItem(e.name)??[]]:[...nr(e).querySelectorAll(`input[type="radio"][name="${CSS.escape(e.name)}"]`)].filter(e=>!e.form),t?!t.some(e=>e.checked):!1}function No(e,t){let n=(0,b.useRef)(void 0),r=(0,b.useRef)(void 0);Gn(()=>{let i=e.current;if(!t){r.current&&=(cancelAnimationFrame(r.current),void 0);return}let a=nr(i?i[0]:void 0),o=t=>{if(t.key!==`Tab`||t.altKey||t.ctrlKey||t.metaKey||!jo(e)||t.isComposing)return;let n=lr(a),r=e.current;if(!r||!Fo(n,r))return;let i=Ao(r),o=qo(i,{tabbable:!0},r);if(!n)return;o.currentNode=n;let s=t.shiftKey?o.previousNode():o.nextNode();s||=(o.currentNode=t.shiftKey?r[r.length-1].nextElementSibling:r[0].previousElementSibling,t.shiftKey?o.previousNode():o.nextNode()),t.preventDefault(),s&&zo(s,!0)},s=t=>{(!Do||Ro(Do,e))&&Fo(ur(t),e.current)?(Do=e,n.current=ur(t)):jo(e)&&!Io(ur(t),e)?n.current?n.current.focus():Do&&Do.current&&Vo(Do.current):jo(e)&&(n.current=ur(t))},c=t=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{let r=eo(),i=(r===`virtual`||r===null)&&Rr()&&Lr(),o=lr(a);if(!i&&o&&jo(e)&&!Io(o,e)){Do=e;let r=ur(t);if(r&&r.isConnected){var s;n.current=r,(s=n.current)==null||s.focus()}else Do.current&&Vo(Do.current)}})};return a.addEventListener(`keydown`,o,!1),a.addEventListener(`focusin`,s,!1),i?.forEach(e=>e.addEventListener(`focusin`,s,!1)),i?.forEach(e=>e.addEventListener(`focusout`,c,!1)),()=>{a.removeEventListener(`keydown`,o,!1),a.removeEventListener(`focusin`,s,!1),i?.forEach(e=>e.removeEventListener(`focusin`,s,!1)),i?.forEach(e=>e.removeEventListener(`focusout`,c,!1))}},[e,t]),Gn(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function Po(e){return Io(e)}function Fo(e,t){return!e||!t?!1:t.some(t=>t.contains(e))}function Io(e,t=null){if(e instanceof Element&&e.closest(`[data-react-aria-top-layer]`))return!0;for(let{scopeRef:n}of Xo.traverse(Xo.getTreeNode(t)))if(n&&Fo(e,n.current))return!0;return!1}function Lo(e){return Io(e,Do)}function Ro(e,t){let n=Xo.getTreeNode(t)?.parent;for(;n;){if(n.scopeRef===e)return!0;n=n.parent}return!1}function zo(e,t=!1){if(e!=null&&!t)try{ao(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function Bo(e,t=!0){let n=e[0].previousElementSibling,r=Ao(e),i=qo(r,{tabbable:t},e);i.currentNode=n;let a=i.nextNode();return t&&!a&&(r=Ao(e),i=qo(r,{tabbable:!1},e),i.currentNode=n,a=i.nextNode()),a}function Vo(e,t=!0){zo(Bo(e,t))}function Ho(e,t){let n=b.useRef(t);(0,b.useEffect)(()=>{if(n.current){Do=e;let t=nr(e.current?e.current[0]:void 0);!Fo(lr(t),Do.current)&&e.current&&Vo(e.current)}n.current=!1},[e])}function Uo(e,t,n){Gn(()=>{if(t||n)return;let r=e.current,i=nr(r?r[0]:void 0),a=t=>{let n=ur(t);Fo(n,e.current)?Do=e:Po(n)||(Do=null)};return i.addEventListener(`focusin`,a,!1),r?.forEach(e=>e.addEventListener(`focusin`,a,!1)),()=>{i.removeEventListener(`focusin`,a,!1),r?.forEach(e=>e.removeEventListener(`focusin`,a,!1))}},[e,t,n])}function Wo(e){let t=Xo.getTreeNode(Do);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return t?.scopeRef===e}function Go(e,t,n){let r=(0,b.useRef)(typeof document<`u`?lr(nr(e.current?e.current[0]:void 0)):null);Gn(()=>{let r=e.current,i=nr(r?r[0]:void 0);if(!t||n)return;let a=()=>{(!Do||Ro(Do,e))&&Fo(lr(i),e.current)&&(Do=e)};return i.addEventListener(`focusin`,a,!1),r?.forEach(e=>e.addEventListener(`focusin`,a,!1)),()=>{i.removeEventListener(`focusin`,a,!1),r?.forEach(e=>e.removeEventListener(`focusin`,a,!1))}},[e,n]),Gn(()=>{let r=nr(e.current?e.current[0]:void 0);if(!t)return;let i=t=>{if(t.key!==`Tab`||t.altKey||t.ctrlKey||t.metaKey||!jo(e)||t.isComposing)return;let n=r.activeElement;if(!Io(n,e)||!Wo(e))return;let i=Xo.getTreeNode(e);if(!i)return;let a=i.nodeToRestore,o=qo(r.body,{tabbable:!0});o.currentNode=n;let s=t.shiftKey?o.previousNode():o.nextNode();if((!a||!a.isConnected||a===r.body)&&(a=void 0,i.nodeToRestore=void 0),(!s||!Io(s,e))&&a){o.currentNode=a;do s=t.shiftKey?o.previousNode():o.nextNode();while(Io(s,e));t.preventDefault(),t.stopPropagation(),s?zo(s,!0):Po(a)?zo(a,!0):n.blur()}};return n||r.addEventListener(`keydown`,i,!0),()=>{n||r.removeEventListener(`keydown`,i,!0)}},[e,t,n]),Gn(()=>{let n=nr(e.current?e.current[0]:void 0);if(!t)return;let i=Xo.getTreeNode(e);if(i)return i.nodeToRestore=r.current??void 0,()=>{let r=Xo.getTreeNode(e);if(!r)return;let i=r.nodeToRestore,a=lr(n);if(t&&i&&(a&&Io(a,e)||a===n.body&&Wo(e))){let t=Xo.clone();requestAnimationFrame(()=>{if(n.activeElement===n.body){let n=t.getTreeNode(e);for(;n;){if(n.nodeToRestore&&n.nodeToRestore.isConnected){Ko(n.nodeToRestore);return}n=n.parent}for(n=t.getTreeNode(e);n;){if(n.scopeRef&&n.scopeRef.current&&Xo.getTreeNode(n.scopeRef)){let e=Bo(n.scopeRef.current,!0);Ko(e);return}n=n.parent}}})}}},[e,t])}function Ko(e){e.dispatchEvent(new CustomEvent(Eo,{bubbles:!0,cancelable:!0}))&&zo(e)}function qo(e,t,n){let r=t?.tabbable?ki:Oi,i=e?.nodeType===Node.ELEMENT_NODE?e:null,a=nr(i),o=fr(a,e||a,NodeFilter.SHOW_ELEMENT,{acceptNode(e){return t!=null&&t.from?.contains(e)||t?.tabbable&&e.tagName===`INPUT`&&e.getAttribute(`type`)===`radio`&&(!Mo(e)||o.currentNode.tagName===`INPUT`&&o.currentNode.type===`radio`&&o.currentNode.name===e.name)?NodeFilter.FILTER_REJECT:r(e)&&(!n||Fo(e,n))&&(!t?.accept||t.accept(e))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t?.from&&(o.currentNode=t.from),o}var Jo=class e{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,t,n){let r=this.fastMap.get(t??null);if(!r)return;let i=new Yo({scopeRef:e});r.addChild(i),i.parent=r,this.fastMap.set(e,i),n&&(i.nodeToRestore=n)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let t=this.fastMap.get(e);if(!t)return;let n=t.parent;for(let e of this.traverse())e!==t&&t.nodeToRestore&&e.nodeToRestore&&t.scopeRef&&t.scopeRef.current&&Fo(e.nodeToRestore,t.scopeRef.current)&&(e.nodeToRestore=t.nodeToRestore);let r=t.children;n&&(n.removeChild(t),r.size>0&&r.forEach(e=>n&&n.addChild(e))),this.fastMap.delete(t.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let t of e.children)yield*this.traverse(t)}clone(){let t=new e;for(let e of this.traverse())t.addTreeNode(e.scopeRef,e.parent?.scopeRef??null,e.nodeToRestore);return t}constructor(){this.fastMap=new Map,this.root=new Yo({scopeRef:null}),this.fastMap.set(null,this.root)}},Yo=class{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}},Xo=new Jo;function Zo(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=(0,b.useRef)({isFocused:!1,isFocusVisible:t||$a()}),[a,o]=(0,b.useState)(!1),[s,c]=(0,b.useState)(()=>i.current.isFocused&&i.current.isFocusVisible),l=(0,b.useCallback)(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),u=(0,b.useCallback)(e=>{i.current.isFocused=e,o(e),l()},[l]);io(e=>{i.current.isFocusVisible=e,l()},[],{isTextInput:n});let{focusProps:d}=oo({isDisabled:r,onFocusChange:u}),{focusWithinProps:f}=mo({isDisabled:!r,onFocusWithinChange:u});return{isFocused:a,isFocusVisible:s,focusProps:r?f:d}}function Qo(e,t){let n=t?.isDisabled,[r,i]=(0,b.useState)(!1);return Gn(()=>{if(e?.current&&!n){let t=()=>{if(e.current){let t=qo(e.current,{tabbable:!0});i(!!t.nextNode())}};t();let n=new MutationObserver(t);return n.observe(e.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:[`tabIndex`,`disabled`]}),()=>{n.disconnect()}}}),n?!1:r}function $o(e){let t=ns(nr(e));t!==e&&(t&&es(t,e),e&&ts(e,t))}function es(e,t){e.dispatchEvent(new FocusEvent(`blur`,{relatedTarget:t})),e.dispatchEvent(new FocusEvent(`focusout`,{bubbles:!0,relatedTarget:t}))}function ts(e,t){e.dispatchEvent(new FocusEvent(`focus`,{relatedTarget:t})),e.dispatchEvent(new FocusEvent(`focusin`,{bubbles:!0,relatedTarget:t}))}function ns(e){let t=lr(e),n=t?.getAttribute(`aria-activedescendant`);return n&&e.getElementById(n)||t}function rs(e,t,n){let{type:r}=e,{isOpen:i}=t;(0,b.useEffect)(()=>{n&&n.current&&na.set(n.current,t.close)});let a;r===`menu`?a=!0:r===`listbox`&&(a=`listbox`);let o=Qn();return{triggerProps:{"aria-haspopup":a,"aria-expanded":i,"aria-controls":i?o:void 0,onPress:t.toggle},overlayProps:{id:o}}}var os=typeof document<`u`&&window.visualViewport,ss=new Set([`checkbox`,`radio`,`range`,`color`,`file`,`image`,`button`,`submit`,`reset`]),cs=0,ls;function us(e={}){let{isDisabled:t}=e;Gn(()=>{if(!t)return cs++,cs===1&&(ls=Pr()?fs():ds()),()=>{cs--,cs===0&&ls()}},[t])}function ds(){let e=window.innerWidth-document.documentElement.clientWidth;return tr(e>0&&(`scrollbarGutter`in document.documentElement.style?ps(document.documentElement,`scrollbarGutter`,`stable`):ps(document.documentElement,`paddingRight`,`${e}px`)),ps(document.documentElement,`overflow`,`hidden`))}function fs(){let e,t,n=n=>{e=si(n.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior===`auto`&&(t=ps(e,`overscrollBehavior`,`contain`))},r=t=>{if(!e||e===document.documentElement||e===document.body){t.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&t.preventDefault()},i=()=>{t&&t()},a=e=>{let t=e.target;gs(t)&&(s(),t.style.transform=`translateY(-2000px)`,requestAnimationFrame(()=>{t.style.transform=``,os&&(os.height<window.innerHeight?requestAnimationFrame(()=>{hs(t)}):os.addEventListener(`resize`,()=>hs(t),{once:!0}))}))},o=null,s=()=>{if(o)return;let e=()=>{window.scrollTo(0,0)},t=window.pageXOffset,n=window.pageYOffset;o=tr(ms(window,`scroll`,e),ps(document.documentElement,`paddingRight`,`${window.innerWidth-document.documentElement.clientWidth}px`),ps(document.documentElement,`overflow`,`hidden`),ps(document.body,`marginTop`,`-${n}px`),()=>{window.scrollTo(t,n)}),window.scrollTo(0,0)},c=tr(ms(document,`touchstart`,n,{passive:!1,capture:!0}),ms(document,`touchmove`,r,{passive:!1,capture:!0}),ms(document,`touchend`,i,{passive:!1,capture:!0}),ms(document,`focus`,a,!0));return()=>{t?.(),o?.(),c()}}function ps(e,t,n){let r=e.style[t];return e.style[t]=n,()=>{e.style[t]=r}}function ms(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}function hs(e){let t=document.scrollingElement||document.documentElement,n=e;for(;n&&n!==t;){let e=si(n);if(e!==document.documentElement&&e!==document.body&&e!==n){let t=e.getBoundingClientRect().top,r=n.getBoundingClientRect().top;r>t+n.clientHeight&&(e.scrollTop+=r-t)}n=e.parentElement}}function gs(e){return e instanceof HTMLInputElement&&!ss.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}var _s=(0,b.createContext)({});function vs(){return(0,b.useContext)(_s)??{}}var ys=t(c(),1),bs=b.createContext(null);function xs(e){let{children:t}=e,n=(0,b.useContext)(bs),[r,i]=(0,b.useState)(0),a=(0,b.useMemo)(()=>({parent:n,modalCount:r,addModal(){i(e=>e+1),n&&n.addModal()},removeModal(){i(e=>e-1),n&&n.removeModal()}}),[n,r]);return b.createElement(bs.Provider,{value:a},t)}function Ss(){let e=(0,b.useContext)(bs);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:void 0}}}function Cs(e){let{modalProviderProps:t}=Ss();return b.createElement(`div`,{"data-overlay-container":!0,...e,...t})}function ws(e){return b.createElement(xs,null,b.createElement(Cs,e))}function Ts(e){let t=dn(),{portalContainer:n=t?null:document.body,...r}=e,{getContainer:i}=vs();if(!e.portalContainer&&i&&(n=i()),b.useEffect(()=>{if(n?.closest(`[data-overlay-container]`))throw Error(`An OverlayContainer must not be inside another container. Please change the portalContainer prop.`)},[n]),!n)return null;let a=b.createElement(ws,r);return ys.createPortal(a,n)}var Es={};Es={dismiss:`تجاهل`};var Ds={};Ds={dismiss:`Отхвърляне`};var Os={};Os={dismiss:`Odstranit`};var ks={};ks={dismiss:`Luk`};var As={};As={dismiss:`Schließen`};var js={};js={dismiss:`Απόρριψη`};var Ms={};Ms={dismiss:`Dismiss`};var Ns={};Ns={dismiss:`Descartar`};var Ps={};Ps={dismiss:`Lõpeta`};var Fs={};Fs={dismiss:`Hylkää`};var Is={};Is={dismiss:`Rejeter`};var Ls={};Ls={dismiss:`התעלם`};var Rs={};Rs={dismiss:`Odbaci`};var zs={};zs={dismiss:`Elutasítás`};var Bs={};Bs={dismiss:`Ignora`};var Vs={};Vs={dismiss:`閉じる`};var Hs={};Hs={dismiss:`무시`};var Us={};Us={dismiss:`Atmesti`};var Ws={};Ws={dismiss:`Nerādīt`};var Gs={};Gs={dismiss:`Lukk`};var Ks={};Ks={dismiss:`Negeren`};var qs={};qs={dismiss:`Zignoruj`};var Js={};Js={dismiss:`Descartar`};var Ys={};Ys={dismiss:`Dispensar`};var Xs={};Xs={dismiss:`Revocare`};var Zs={};Zs={dismiss:`Пропустить`};var Qs={};Qs={dismiss:`Zrušiť`};var $s={};$s={dismiss:`Opusti`};var ec={};ec={dismiss:`Odbaci`};var tc={};tc={dismiss:`Avvisa`};var nc={};nc={dismiss:`Kapat`};var rc={};rc={dismiss:`Скасувати`};var ic={};ic={dismiss:`取消`};var ac={};ac={dismiss:`關閉`};var oc={};oc={"ar-AE":Es,"bg-BG":Ds,"cs-CZ":Os,"da-DK":ks,"de-DE":As,"el-GR":js,"en-US":Ms,"es-ES":Ns,"et-EE":Ps,"fi-FI":Fs,"fr-FR":Is,"he-IL":Ls,"hr-HR":Rs,"hu-HU":zs,"it-IT":Bs,"ja-JP":Vs,"ko-KR":Hs,"lt-LT":Us,"lv-LV":Ws,"nb-NO":Gs,"nl-NL":Ks,"pl-PL":qs,"pt-BR":Js,"pt-PT":Ys,"ro-RO":Xs,"ru-RU":Zs,"sk-SK":Qs,"sl-SI":$s,"sr-SP":ec,"sv-SE":tc,"tr-TR":nc,"uk-UA":rc,"zh-CN":ic,"zh-TW":ac};var sc={border:0,clip:`rect(0 0 0 0)`,clipPath:`inset(50%)`,height:`1px`,margin:`-1px`,overflow:`hidden`,padding:0,position:`absolute`,width:`1px`,whiteSpace:`nowrap`};function cc(e={}){let{style:t,isFocusable:n}=e,[r,i]=(0,b.useState)(!1),{focusWithinProps:a}=mo({isDisabled:!n,onFocusWithinChange:e=>i(e)}),o=(0,b.useMemo)(()=>r?t:t?{...sc,...t}:sc,[r]);return{visuallyHiddenProps:{...a,style:o}}}function lc(e){let{children:t,elementType:n=`div`,isFocusable:r,style:i,...a}=e,{visuallyHiddenProps:o}=cc(e);return b.createElement(n,gr(a,o),t)}function uc(e){return e&&e.__esModule?e.default:e}function dc(e){let{onDismiss:t,...n}=e,r=Hn(uc(oc),`@react-aria/overlays`),i=ti(n,r.format(`dismiss`)),a=()=>{t&&t()};return b.createElement(lc,null,b.createElement(`button`,{...i,tabIndex:-1,onClick:a,style:{width:1,height:1}}))}var fc=t(c(),1),pc=b.createContext(null);function mc(e){let t=dn(),{portalContainer:n=t?null:document.body,isExiting:r}=e,[i,a]=(0,b.useState)(!1),o=(0,b.useMemo)(()=>({contain:i,setContain:a}),[i,a]),{getContainer:s}=vs();if(!e.portalContainer&&s&&(n=s()),!n)return null;let c=e.children;return e.disableFocusManagement||(c=b.createElement(Oo,{restoreFocus:!0,contain:(e.shouldContainFocus||i)&&!r},c)),c=b.createElement(pc.Provider,{value:o},b.createElement(po,null,c)),fc.createPortal(c,n)}function hc(){let e=(0,b.useContext)(pc),t=e?.setContain;Gn(()=>{t?.(!0)},[t])}var V=t(f(),1),gc=({children:e,navigate:t,disableAnimation:n,useHref:r,disableRipple:i=!1,skipFramerMotionAnimations:a=n,reducedMotion:o=`never`,validationBehavior:s,locale:c=`en-US`,labelPlacement:l,defaultDates:u,createCalendar:f,spinnerVariant:p,...m})=>{let g=e;t&&(g=(0,V.jsx)(Vr,{navigate:t,useHref:r,children:g}));let _=(0,b.useMemo)(()=>(n&&a&&(h.skipAnimations=!0),{createCalendar:f,defaultDates:u,disableAnimation:n,disableRipple:i,validationBehavior:s,labelPlacement:l,spinnerVariant:p}),[f,u?.maxDate,u?.minDate,n,i,s,l,p]);return(0,V.jsx)(Jt,{value:_,children:(0,V.jsx)(xn,{locale:c,children:(0,V.jsx)(d,{reducedMotion:o,children:(0,V.jsx)(ws,{...m,children:g})})})})};function _c(e){let t=Yt(),n=t?.labelPlacement;return(0,b.useMemo)(()=>{let t=e.labelPlacement??n??`inside`;return t===`inside`&&!e.label?`outside`:t},[e.labelPlacement,n,e.label])}function vc(e){let t=Yt(),n=t?.labelPlacement;return(0,b.useMemo)(()=>{let t=e.labelPlacement??n??`inside`;return t===`inside`&&!e.label?`outside`:t},[e.labelPlacement,n,e.label])}function yc(e){return(0,b.forwardRef)(e)}var bc=(e,t,n=!0)=>{if(!t)return[e,{}];let r=t.reduce((t,n)=>n in e?{...t,[n]:e[n]}:t,{});return n?[Object.keys(e).filter(e=>!t.includes(e)).reduce((t,n)=>({...t,[n]:e[n]}),{}),r]:[e,r]},H={solid:{default:`bg-default text-default-foreground`,primary:`bg-primary text-primary-foreground`,secondary:`bg-secondary text-secondary-foreground`,success:`bg-success text-success-foreground`,warning:`bg-warning text-warning-foreground`,danger:`bg-danger text-danger-foreground`,foreground:`bg-foreground text-background`},shadow:{default:`shadow-lg shadow-default/50 bg-default text-default-foreground`,primary:`shadow-lg shadow-primary/40 bg-primary text-primary-foreground`,secondary:`shadow-lg shadow-secondary/40 bg-secondary text-secondary-foreground`,success:`shadow-lg shadow-success/40 bg-success text-success-foreground`,warning:`shadow-lg shadow-warning/40 bg-warning text-warning-foreground`,danger:`shadow-lg shadow-danger/40 bg-danger text-danger-foreground`,foreground:`shadow-lg shadow-foreground/40 bg-foreground text-background`},bordered:{default:`bg-transparent border-default text-foreground`,primary:`bg-transparent border-primary text-primary`,secondary:`bg-transparent border-secondary text-secondary`,success:`bg-transparent border-success text-success`,warning:`bg-transparent border-warning text-warning`,danger:`bg-transparent border-danger text-danger`,foreground:`bg-transparent border-foreground text-foreground`},flat:{default:`bg-default/40 text-default-700`,primary:`bg-primary/20 text-primary-600`,secondary:`bg-secondary/20 text-secondary-600`,success:`bg-success/20 text-success-700 dark:text-success`,warning:`bg-warning/20 text-warning-700 dark:text-warning`,danger:`bg-danger/20 text-danger-600 dark:text-danger-500`,foreground:`bg-foreground/10 text-foreground`},faded:{default:`border-default bg-default-100 text-default-foreground`,primary:`border-default bg-default-100 text-primary`,secondary:`border-default bg-default-100 text-secondary`,success:`border-default bg-default-100 text-success`,warning:`border-default bg-default-100 text-warning`,danger:`border-default bg-default-100 text-danger`,foreground:`border-default bg-default-100 text-foreground`},light:{default:`bg-transparent text-default-foreground`,primary:`bg-transparent text-primary`,secondary:`bg-transparent text-secondary`,success:`bg-transparent text-success`,warning:`bg-transparent text-warning`,danger:`bg-transparent text-danger`,foreground:`bg-transparent text-foreground`},ghost:{default:`border-default text-default-foreground`,primary:`border-primary text-primary`,secondary:`border-secondary text-secondary`,success:`border-success text-success`,warning:`border-warning text-warning`,danger:`border-danger text-danger`,foreground:`border-foreground text-foreground hover:!bg-foreground`}},xc={".spinner-bar-animation":{"animation-delay":`calc(-1.2s + (0.1s * var(--bar-index)))`,transform:`rotate(calc(30deg * var(--bar-index)))translate(140%)`},".spinner-dot-animation":{"animation-delay":`calc(250ms * var(--dot-index))`},".spinner-dot-blink-animation":{"animation-delay":`calc(200ms * var(--dot-index))`}},Sc={".leading-inherit":{"line-height":`inherit`},".bg-img-inherit":{"background-image":`inherit`},".bg-clip-inherit":{"background-clip":`inherit`},".text-fill-inherit":{"-webkit-text-fill-color":`inherit`},".tap-highlight-transparent":{"-webkit-tap-highlight-color":`transparent`},".input-search-cancel-button-none":{"&::-webkit-search-cancel-button":{"-webkit-appearance":`none`}}},Cc={".scrollbar-hide":{"-ms-overflow-style":`none`,"scrollbar-width":`none`,"&::-webkit-scrollbar":{display:`none`}},".scrollbar-default":{"-ms-overflow-style":`auto`,"scrollbar-width":`auto`,"&::-webkit-scrollbar":{display:`block`}}},wc={".text-tiny":{"font-size":`var(--heroui-font-size-tiny)`,"line-height":`var(--heroui-line-height-tiny)`},".text-small":{"font-size":`var(--heroui-font-size-small)`,"line-height":`var(--heroui-line-height-small)`},".text-medium":{"font-size":`var(--heroui-font-size-medium)`,"line-height":`var(--heroui-line-height-medium)`},".text-large":{"font-size":`var(--heroui-font-size-large)`,"line-height":`var(--heroui-line-height-large)`}},Tc=`250ms`,Ec={".transition-background":{"transition-property":`background`,"transition-timing-function":`ease`,"transition-duration":Tc},".transition-colors-opacity":{"transition-property":`color, background-color, border-color, text-decoration-color, fill, stroke, opacity`,"transition-timing-function":`ease`,"transition-duration":Tc},".transition-width":{"transition-property":`width`,"transition-timing-function":`ease`,"transition-duration":Tc},".transition-height":{"transition-property":`height`,"transition-timing-function":`ease`,"transition-duration":Tc},".transition-size":{"transition-property":`width, height`,"transition-timing-function":`ease`,"transition-duration":Tc},".transition-left":{"transition-property":`left`,"transition-timing-function":`ease`,"transition-duration":Tc},".transition-transform-opacity":{"transition-property":`transform, scale, opacity rotate`,"transition-timing-function":`ease`,"transition-duration":Tc},".transition-transform-background":{"transition-property":`transform, scale, background`,"transition-timing-function":`ease`,"transition-duration":Tc},".transition-transform-colors":{"transition-property":`transform, scale, color, background, background-color, border-color, text-decoration-color, fill, stroke`,"transition-timing-function":`ease`,"transition-duration":Tc},".transition-transform-colors-opacity":{"transition-property":`transform, scale, color, background, background-color, border-color, text-decoration-color, fill, stroke, opacity`,"transition-timing-function":`ease`,"transition-duration":Tc}},Dc={...Sc,...Ec,...Cc,...wc,...xc},Oc=[`small`,`medium`,`large`],kc={theme:{spacing:[`divider`],radius:Oc},classGroups:{shadow:[{shadow:Oc}],opacity:[{opacity:[`disabled`]}],"font-size":[{text:[`tiny`,...Oc]}],"border-w":[{border:Oc}],"bg-image":[`bg-stripe-gradient-default`,`bg-stripe-gradient-primary`,`bg-stripe-gradient-secondary`,`bg-stripe-gradient-success`,`bg-stripe-gradient-warning`,`bg-stripe-gradient-danger`],transition:Object.keys(Dc).filter(e=>e.includes(`.transition`)).map(e=>e.replace(`.`,``))}},Ac=/\s+/g,jc=e=>typeof e!=`string`||!e?e:e.replace(Ac,` `).trim(),Mc=(...e)=>{let t=[],n=e=>{if(!e&&e!==0&&e!==0n)return;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)n(e[t]);return}let r=typeof e;if(r===`string`||r===`number`||r===`bigint`){if(r===`number`&&e!==e)return;t.push(String(e))}else if(r===`object`){let n=Object.keys(e);for(let r=0,i=n.length;r<i;r++){let i=n[r];e[i]&&t.push(i)}}};for(let t=0,r=e.length;t<r;t++){let r=e[t];r!=null&&n(r)}return t.length>0?jc(t.join(` `)):void 0},Nc=e=>e===!1?`false`:e===!0?`true`:e===0?`0`:e,Pc=e=>{if(!e||typeof e!=`object`)return!0;for(let t in e)return!1;return!0},Fc=(e,t)=>{if(e===t)return!0;if(!e||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){let a=n[i];if(!r.includes(a)||e[a]!==t[a])return!1}return!0},Ic=(e,t)=>{for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let r=t[n];n in e?e[n]=Mc(e[n],r):e[n]=r}return e},Lc=(e,t)=>{for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?Lc(r,t):r&&t.push(r)}},Rc=(...e)=>{let t=[];Lc(e,t);let n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(t[e]);return n},zc=(e,t)=>{let n={};for(let r in e){let i=e[r];if(r in t){let e=t[r];Array.isArray(i)||Array.isArray(e)?n[r]=Rc(e,i):typeof i==`object`&&typeof e==`object`&&i&&e?n[r]=zc(i,e):n[r]=e+` `+i}else n[r]=i}for(let r in t)r in e||(n[r]=t[r]);return n},Bc={twMerge:!0,twMergeConfig:{},responsiveVariants:!1};function Vc(){let e=null,t={},n=!1;return{get cachedTwMerge(){return e},set cachedTwMerge(t){e=t},get cachedTwMergeConfig(){return t},set cachedTwMergeConfig(e){t=e},get didTwMergeConfigChange(){return n},set didTwMergeConfigChange(e){n=e},reset(){e=null,t={},n=!1}}}var Hc=Vc(),Uc=e=>{let t=(t,n)=>{let{extend:r=null,slots:i={},variants:a={},compoundVariants:o=[],compoundSlots:s=[],defaultVariants:c={}}=t,l={...Bc,...n},u=r?.base?Mc(r.base,t?.base):t?.base,d=r?.variants&&!Pc(r.variants)?zc(a,r.variants):a,f=r?.defaultVariants&&!Pc(r.defaultVariants)?{...r.defaultVariants,...c}:c;!Pc(l.twMergeConfig)&&!Fc(l.twMergeConfig,Hc.cachedTwMergeConfig)&&(Hc.didTwMergeConfigChange=!0,Hc.cachedTwMergeConfig=l.twMergeConfig);let p=Pc(r?.slots),m=Pc(i)?{}:{base:Mc(t?.base,p&&r?.base),...i},h=p?m:Ic({...r?.slots},Pc(m)?{base:t?.base}:m),g=Pc(r?.compoundVariants)?o:Rc(r?.compoundVariants,o),_=t=>{if(Pc(d)&&Pc(i)&&p)return e(u,t?.class,t?.className)(l);if(g&&!Array.isArray(g))throw TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof g}`);if(s&&!Array.isArray(s))throw TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof s}`);let n=(e,t,n=[],r)=>{let i=n;if(typeof t==`string`){let n=jc(t).split(` `);for(let t=0;t<n.length;t++)i.push(`${e}:${n[t]}`)}else if(Array.isArray(t))for(let n=0;n<t.length;n++)i.push(`${e}:${t[n]}`);else if(typeof t==`object`&&typeof r==`string`&&r in t){let n=t[r];if(n&&typeof n==`string`){let t=jc(n).split(` `),a=[];for(let n=0;n<t.length;n++)a.push(`${e}:${t[n]}`);i[r]=i[r]?i[r].concat(a):a}else if(Array.isArray(n)&&n.length>0){let t=[];for(let r=0;r<n.length;r++)t.push(`${e}:${n[r]}`);i[r]=t}}return i},r=(e,r=d,i=null,a=null)=>{let o=r[e];if(!o||Pc(o))return null;let s=a?.[e]??t?.[e];if(s===null)return null;let c=Nc(s),u=Array.isArray(l.responsiveVariants)&&l.responsiveVariants.length>0||l.responsiveVariants===!0,p=f?.[e],m=[];if(typeof c==`object`&&u)for(let[e,t]of Object.entries(c)){let r=o[t];if(e===`initial`){p=t;continue}Array.isArray(l.responsiveVariants)&&!l.responsiveVariants.includes(e)||(m=n(e,r,m,i))}let h=c!=null&&typeof c!=`object`?c:Nc(p),g=o[h||`false`];return typeof m==`object`&&typeof i==`string`&&m[i]?Ic(m,g):m.length>0?(m.push(g),i===`base`?m.join(` `):m):g},a=()=>{if(!d)return null;let e=Object.keys(d),t=[];for(let n=0;n<e.length;n++){let i=r(e[n],d);i&&t.push(i)}return t},o=(e,t)=>{if(!d||typeof d!=`object`)return null;let n=[];for(let i in d){let a=r(i,d,e,t),o=e===`base`&&typeof a==`string`?a:a&&a[e];o&&n.push(o)}return n},c={};for(let e in t){let n=t[e];n!==void 0&&(c[e]=n)}let m=(e,n)=>{let r=typeof t?.[e]==`object`?{[e]:t[e]?.initial}:{};return{...f,...c,...r,...n}},_=(e=[],t)=>{let n=[],r=e.length;for(let i=0;i<r;i++){let{class:r,className:a,...o}=e[i],s=!0,c=m(null,t);for(let e in o){let t=o[e],n=c[e];if(Array.isArray(t)){if(!t.includes(n)){s=!1;break}}else{if((t==null||t===!1)&&(n==null||n===!1))continue;if(n!==t){s=!1;break}}}s&&(r&&n.push(r),a&&n.push(a))}return n},v=t=>{let n=_(g,t);if(!Array.isArray(n))return n;let r={},i=e;for(let e=0;e<n.length;e++){let t=n[e];if(typeof t==`string`)r.base=i(r.base,t)(l);else if(typeof t==`object`)for(let e in t)r[e]=i(r[e],t[e])(l)}return r},y=e=>{if(s.length<1)return null;let t={},n=m(null,e);for(let e=0;e<s.length;e++){let{slots:r=[],class:i,className:a,...o}=s[e];if(!Pc(o)){let e=!0;for(let t in o){let r=n[t],i=o[t];if(r===void 0||(Array.isArray(i)?!i.includes(r):i!==r)){e=!1;break}}if(!e)continue}for(let e=0;e<r.length;e++){let n=r[e];t[n]||(t[n]=[]),t[n].push([i,a])}}return t};if(!Pc(i)||!p){let t={};if(typeof h==`object`&&!Pc(h)){let n=e;for(let e in h)t[e]=t=>{let r=v(t),i=y(t);return n(h[e],o(e,t),r?r[e]:void 0,i?i[e]:void 0,t?.class,t?.className)(l)}}return t}return e(u,a(),_(g),t?.class,t?.className)(l)};return _.variantKeys=(()=>{if(!(!d||typeof d!=`object`))return Object.keys(d)})(),_.extend=r,_.base=u,_.slots=h,_.variants=d,_.defaultVariants=f,_.compoundSlots=s,_.compoundVariants=g,_};return{tv:t,createTV:e=>(n,r)=>t(n,r?zc(e,r):e)}},Wc=`-`,Gc=e=>{let t=Yc(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{let n=e.split(Wc);return n[0]===``&&n.length!==1&&n.shift(),Kc(n,t)||Jc(e)},getConflictingClassGroupIds:(e,t)=>{let i=n[e]||[];return t&&r[e]?[...i,...r[e]]:i}}},Kc=(e,t)=>{if(e.length===0)return t.classGroupId;let n=e[0],r=t.nextPart.get(n),i=r?Kc(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;let a=e.join(Wc);return t.validators.find(({validator:e})=>e(a))?.classGroupId},qc=/^\[(.+)\]$/,Jc=e=>{if(qc.test(e)){let t=qc.exec(e)[1],n=t?.substring(0,t.indexOf(`:`));if(n)return`arbitrary..`+n}},Yc=e=>{let{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(let e in n)Xc(n[e],r,e,t);return r},Xc=(e,t,n,r)=>{e.forEach(e=>{if(typeof e==`string`){let r=e===``?t:Zc(t,e);r.classGroupId=n;return}if(typeof e==`function`){if(Qc(e)){Xc(e(r),t,n,r);return}t.validators.push({validator:e,classGroupId:n});return}Object.entries(e).forEach(([e,i])=>{Xc(i,Zc(t,e),n,r)})})},Zc=(e,t)=>{let n=e;return t.split(Wc).forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Qc=e=>e.isThemeGetter,$c=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,n=new Map,r=new Map,i=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);if(t!==void 0)return t;if((t=r.get(e))!==void 0)return i(e,t),t},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}},el=`!`,tl=`:`,nl=1,rl=e=>{let{prefix:t,experimentalParseClassName:n}=e,r=e=>{let t=[],n=0,r=0,i=0,a;for(let o=0;o<e.length;o++){let s=e[o];if(n===0&&r===0){if(s===tl){t.push(e.slice(i,o)),i=o+nl;continue}if(s===`/`){a=o;continue}}s===`[`?n++:s===`]`?n--:s===`(`?r++:s===`)`&&r--}let o=t.length===0?e:e.substring(i),s=il(o),c=s!==o,l=a&&a>i?a-i:void 0;return{modifiers:t,hasImportantModifier:c,baseClassName:s,maybePostfixModifierPosition:l}};if(t){let e=t+tl,n=r;r=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){let e=r;r=t=>n({className:t,parseClassName:e})}return r},il=e=>e.endsWith(el)?e.substring(0,e.length-1):e.startsWith(el)?e.substring(1):e,al=e=>{let t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;let n=[],r=[];return e.forEach(e=>{e[0]===`[`||t[e]?(n.push(...r.sort(),e),r=[]):r.push(e)}),n.push(...r.sort()),n}},ol=e=>({cache:$c(e.cacheSize),parseClassName:rl(e),sortModifiers:al(e),...Gc(e)}),sl=/\s+/,cl=(e,t)=>{let{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=t,o=[],s=e.trim().split(sl),c=``;for(let e=s.length-1;e>=0;--e){let t=s[e],{isExternal:l,modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=n(t);if(l){c=t+(c.length>0?` `+c:c);continue}let m=!!p,h=r(m?f.substring(0,p):f);if(!h){if(!m){c=t+(c.length>0?` `+c:c);continue}if(h=r(f),!h){c=t+(c.length>0?` `+c:c);continue}m=!1}let g=a(u).join(`:`),_=d?g+el:g,v=_+h;if(o.includes(v))continue;o.push(v);let y=i(h,m);for(let e=0;e<y.length;++e){let t=y[e];o.push(_+t)}c=t+(c.length>0?` `+c:c)}return c};function ll(){let e=0,t,n,r=``;for(;e<arguments.length;)(t=arguments[e++])&&(n=ul(t))&&(r&&(r+=` `),r+=n);return r}var ul=e=>{if(typeof e==`string`)return e;let t,n=``;for(let r=0;r<e.length;r++)e[r]&&(t=ul(e[r]))&&(n&&(n+=` `),n+=t);return n};function dl(e,...t){let n,r,i,a=o;function o(o){let c=t.reduce((e,t)=>t(e),e());return n=ol(c),r=n.cache.get,i=n.cache.set,a=s,s(o)}function s(e){let t=r(e);if(t)return t;let a=cl(e,n);return i(e,a),a}return function(){return a(ll.apply(null,arguments))}}var fl=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},pl=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ml=/^\((?:(\w[\w-]*):)?(.+)\)$/i,hl=/^\d+\/\d+$/,gl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_l=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vl=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,yl=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bl=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xl=e=>hl.test(e),Sl=e=>!!e&&!Number.isNaN(Number(e)),Cl=e=>!!e&&Number.isInteger(Number(e)),wl=e=>e.endsWith(`%`)&&Sl(e.slice(0,-1)),Tl=e=>gl.test(e),El=()=>!0,Dl=e=>_l.test(e)&&!vl.test(e),Ol=()=>!1,kl=e=>yl.test(e),Al=e=>bl.test(e),jl=e=>!Nl(e)&&!zl(e),Ml=e=>Kl(e,Xl,Ol),Nl=e=>pl.test(e),Pl=e=>Kl(e,Zl,Dl),Fl=e=>Kl(e,Ql,Sl),Il=e=>Kl(e,Jl,Ol),Ll=e=>Kl(e,Yl,Al),Rl=e=>Kl(e,eu,kl),zl=e=>ml.test(e),Bl=e=>ql(e,Zl),Vl=e=>ql(e,$l),Hl=e=>ql(e,Jl),Ul=e=>ql(e,Xl),Wl=e=>ql(e,Yl),Gl=e=>ql(e,eu,!0),Kl=(e,t,n)=>{let r=pl.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},ql=(e,t,n=!1)=>{let r=ml.exec(e);return r?r[1]?t(r[1]):n:!1},Jl=e=>e===`position`||e===`percentage`,Yl=e=>e===`image`||e===`url`,Xl=e=>e===`length`||e===`size`||e===`bg-size`,Zl=e=>e===`length`,Ql=e=>e===`number`,$l=e=>e===`family-name`,eu=e=>e===`shadow`,tu=()=>{let e=fl(`color`),t=fl(`font`),n=fl(`text`),r=fl(`font-weight`),i=fl(`tracking`),a=fl(`leading`),o=fl(`breakpoint`),s=fl(`container`),c=fl(`spacing`),l=fl(`radius`),u=fl(`shadow`),d=fl(`inset-shadow`),f=fl(`text-shadow`),p=fl(`drop-shadow`),m=fl(`blur`),h=fl(`perspective`),g=fl(`aspect`),_=fl(`ease`),v=fl(`animate`),y=()=>[`auto`,`avoid`,`all`,`avoid-page`,`page`,`left`,`right`,`column`],b=()=>[`center`,`top`,`bottom`,`left`,`right`,`top-left`,`left-top`,`top-right`,`right-top`,`bottom-right`,`right-bottom`,`bottom-left`,`left-bottom`],x=()=>[...b(),zl,Nl],S=()=>[`auto`,`hidden`,`clip`,`visible`,`scroll`],C=()=>[`auto`,`contain`,`none`],w=()=>[zl,Nl,c],T=()=>[xl,`full`,`auto`,...w()],E=()=>[Cl,`none`,`subgrid`,zl,Nl],D=()=>[`auto`,{span:[`full`,Cl,zl,Nl]},Cl,zl,Nl],O=()=>[Cl,`auto`,zl,Nl],k=()=>[`auto`,`min`,`max`,`fr`,zl,Nl],A=()=>[`start`,`end`,`center`,`between`,`around`,`evenly`,`stretch`,`baseline`,`center-safe`,`end-safe`],j=()=>[`start`,`end`,`center`,`stretch`,`center-safe`,`end-safe`],M=()=>[`auto`,...w()],ee=()=>[xl,`auto`,`full`,`dvw`,`dvh`,`lvw`,`lvh`,`svw`,`svh`,`min`,`max`,`fit`,...w()],N=()=>[e,zl,Nl],te=()=>[...b(),Hl,Il,{position:[zl,Nl]}],ne=()=>[`no-repeat`,{repeat:[``,`x`,`y`,`space`,`round`]}],re=()=>[`auto`,`cover`,`contain`,Ul,Ml,{size:[zl,Nl]}],P=()=>[wl,Bl,Pl],F=()=>[``,`none`,`full`,l,zl,Nl],I=()=>[``,Sl,Bl,Pl],ie=()=>[`solid`,`dashed`,`dotted`,`double`],ae=()=>[`normal`,`multiply`,`screen`,`overlay`,`darken`,`lighten`,`color-dodge`,`color-burn`,`hard-light`,`soft-light`,`difference`,`exclusion`,`hue`,`saturation`,`color`,`luminosity`],L=()=>[Sl,wl,Hl,Il],oe=()=>[``,`none`,m,zl,Nl],se=()=>[`none`,Sl,zl,Nl],ce=()=>[`none`,Sl,zl,Nl],le=()=>[Sl,zl,Nl],ue=()=>[xl,`full`,...w()];return{cacheSize:500,theme:{animate:[`spin`,`ping`,`pulse`,`bounce`],aspect:[`video`],blur:[Tl],breakpoint:[Tl],color:[El],container:[Tl],"drop-shadow":[Tl],ease:[`in`,`out`,`in-out`],font:[jl],"font-weight":[`thin`,`extralight`,`light`,`normal`,`medium`,`semibold`,`bold`,`extrabold`,`black`],"inset-shadow":[Tl],leading:[`none`,`tight`,`snug`,`normal`,`relaxed`,`loose`],perspective:[`dramatic`,`near`,`normal`,`midrange`,`distant`,`none`],radius:[Tl],shadow:[Tl],spacing:[`px`,Sl],text:[Tl],"text-shadow":[Tl],tracking:[`tighter`,`tight`,`normal`,`wide`,`wider`,`widest`]},classGroups:{aspect:[{aspect:[`auto`,`square`,xl,Nl,zl,g]}],container:[`container`],columns:[{columns:[Sl,Nl,zl,s]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":[`auto`,`avoid`,`avoid-page`,`avoid-column`]}],"box-decoration":[{"box-decoration":[`slice`,`clone`]}],box:[{box:[`border`,`content`]}],display:[`block`,`inline-block`,`inline`,`flex`,`inline-flex`,`table`,`inline-table`,`table-caption`,`table-cell`,`table-column`,`table-column-group`,`table-footer-group`,`table-header-group`,`table-row-group`,`table-row`,`flow-root`,`grid`,`inline-grid`,`contents`,`list-item`,`hidden`],sr:[`sr-only`,`not-sr-only`],float:[{float:[`right`,`left`,`none`,`start`,`end`]}],clear:[{clear:[`left`,`right`,`both`,`none`,`start`,`end`]}],isolation:[`isolate`,`isolation-auto`],"object-fit":[{object:[`contain`,`cover`,`fill`,`none`,`scale-down`]}],"object-position":[{object:x()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:[`static`,`fixed`,`absolute`,`relative`,`sticky`],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:[`visible`,`invisible`,`collapse`],z:[{z:[Cl,`auto`,zl,Nl]}],basis:[{basis:[xl,`full`,`auto`,s,...w()]}],"flex-direction":[{flex:[`row`,`row-reverse`,`col`,`col-reverse`]}],"flex-wrap":[{flex:[`nowrap`,`wrap`,`wrap-reverse`]}],flex:[{flex:[Sl,xl,`auto`,`initial`,`none`,Nl]}],grow:[{grow:[``,Sl,zl,Nl]}],shrink:[{shrink:[``,Sl,zl,Nl]}],order:[{order:[Cl,`first`,`last`,`none`,zl,Nl]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":[`row`,`col`,`dense`,`row-dense`,`col-dense`]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:[...A(),`normal`]}],"justify-items":[{"justify-items":[...j(),`normal`]}],"justify-self":[{"justify-self":[`auto`,...j()]}],"align-content":[{content:[`normal`,...A()]}],"align-items":[{items:[...j(),{baseline:[``,`last`]}]}],"align-self":[{self:[`auto`,...j(),{baseline:[``,`last`]}]}],"place-content":[{"place-content":A()}],"place-items":[{"place-items":[...j(),`baseline`]}],"place-self":[{"place-self":[`auto`,...j()]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":w()}],"space-x-reverse":[`space-x-reverse`],"space-y":[{"space-y":w()}],"space-y-reverse":[`space-y-reverse`],size:[{size:ee()}],w:[{w:[s,`screen`,...ee()]}],"min-w":[{"min-w":[s,`screen`,`none`,...ee()]}],"max-w":[{"max-w":[s,`screen`,`none`,`prose`,{screen:[o]},...ee()]}],h:[{h:[`screen`,`lh`,...ee()]}],"min-h":[{"min-h":[`screen`,`lh`,`none`,...ee()]}],"max-h":[{"max-h":[`screen`,`lh`,...ee()]}],"font-size":[{text:[`base`,n,Bl,Pl]}],"font-smoothing":[`antialiased`,`subpixel-antialiased`],"font-style":[`italic`,`not-italic`],"font-weight":[{font:[r,zl,Fl]}],"font-stretch":[{"font-stretch":[`ultra-condensed`,`extra-condensed`,`condensed`,`semi-condensed`,`normal`,`semi-expanded`,`expanded`,`extra-expanded`,`ultra-expanded`,wl,Nl]}],"font-family":[{font:[Vl,Nl,t]}],"fvn-normal":[`normal-nums`],"fvn-ordinal":[`ordinal`],"fvn-slashed-zero":[`slashed-zero`],"fvn-figure":[`lining-nums`,`oldstyle-nums`],"fvn-spacing":[`proportional-nums`,`tabular-nums`],"fvn-fraction":[`diagonal-fractions`,`stacked-fractions`],tracking:[{tracking:[i,zl,Nl]}],"line-clamp":[{"line-clamp":[Sl,`none`,zl,Fl]}],leading:[{leading:[a,...w()]}],"list-image":[{"list-image":[`none`,zl,Nl]}],"list-style-position":[{list:[`inside`,`outside`]}],"list-style-type":[{list:[`disc`,`decimal`,`none`,zl,Nl]}],"text-alignment":[{text:[`left`,`center`,`right`,`justify`,`start`,`end`]}],"placeholder-color":[{placeholder:N()}],"text-color":[{text:N()}],"text-decoration":[`underline`,`overline`,`line-through`,`no-underline`],"text-decoration-style":[{decoration:[...ie(),`wavy`]}],"text-decoration-thickness":[{decoration:[Sl,`from-font`,`auto`,zl,Pl]}],"text-decoration-color":[{decoration:N()}],"underline-offset":[{"underline-offset":[Sl,`auto`,zl,Nl]}],"text-transform":[`uppercase`,`lowercase`,`capitalize`,`normal-case`],"text-overflow":[`truncate`,`text-ellipsis`,`text-clip`],"text-wrap":[{text:[`wrap`,`nowrap`,`balance`,`pretty`]}],indent:[{indent:w()}],"vertical-align":[{align:[`baseline`,`top`,`middle`,`bottom`,`text-top`,`text-bottom`,`sub`,`super`,zl,Nl]}],whitespace:[{whitespace:[`normal`,`nowrap`,`pre`,`pre-line`,`pre-wrap`,`break-spaces`]}],break:[{break:[`normal`,`words`,`all`,`keep`]}],wrap:[{wrap:[`break-word`,`anywhere`,`normal`]}],hyphens:[{hyphens:[`none`,`manual`,`auto`]}],content:[{content:[`none`,zl,Nl]}],"bg-attachment":[{bg:[`fixed`,`local`,`scroll`]}],"bg-clip":[{"bg-clip":[`border`,`padding`,`content`,`text`]}],"bg-origin":[{"bg-origin":[`border`,`padding`,`content`]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:ne()}],"bg-size":[{bg:re()}],"bg-image":[{bg:[`none`,{linear:[{to:[`t`,`tr`,`r`,`br`,`b`,`bl`,`l`,`tl`]},Cl,zl,Nl],radial:[``,zl,Nl],conic:[Cl,zl,Nl]},Wl,Ll]}],"bg-color":[{bg:N()}],"gradient-from-pos":[{from:P()}],"gradient-via-pos":[{via:P()}],"gradient-to-pos":[{to:P()}],"gradient-from":[{from:N()}],"gradient-via":[{via:N()}],"gradient-to":[{to:N()}],rounded:[{rounded:F()}],"rounded-s":[{"rounded-s":F()}],"rounded-e":[{"rounded-e":F()}],"rounded-t":[{"rounded-t":F()}],"rounded-r":[{"rounded-r":F()}],"rounded-b":[{"rounded-b":F()}],"rounded-l":[{"rounded-l":F()}],"rounded-ss":[{"rounded-ss":F()}],"rounded-se":[{"rounded-se":F()}],"rounded-ee":[{"rounded-ee":F()}],"rounded-es":[{"rounded-es":F()}],"rounded-tl":[{"rounded-tl":F()}],"rounded-tr":[{"rounded-tr":F()}],"rounded-br":[{"rounded-br":F()}],"rounded-bl":[{"rounded-bl":F()}],"border-w":[{border:I()}],"border-w-x":[{"border-x":I()}],"border-w-y":[{"border-y":I()}],"border-w-s":[{"border-s":I()}],"border-w-e":[{"border-e":I()}],"border-w-t":[{"border-t":I()}],"border-w-r":[{"border-r":I()}],"border-w-b":[{"border-b":I()}],"border-w-l":[{"border-l":I()}],"divide-x":[{"divide-x":I()}],"divide-x-reverse":[`divide-x-reverse`],"divide-y":[{"divide-y":I()}],"divide-y-reverse":[`divide-y-reverse`],"border-style":[{border:[...ie(),`hidden`,`none`]}],"divide-style":[{divide:[...ie(),`hidden`,`none`]}],"border-color":[{border:N()}],"border-color-x":[{"border-x":N()}],"border-color-y":[{"border-y":N()}],"border-color-s":[{"border-s":N()}],"border-color-e":[{"border-e":N()}],"border-color-t":[{"border-t":N()}],"border-color-r":[{"border-r":N()}],"border-color-b":[{"border-b":N()}],"border-color-l":[{"border-l":N()}],"divide-color":[{divide:N()}],"outline-style":[{outline:[...ie(),`none`,`hidden`]}],"outline-offset":[{"outline-offset":[Sl,zl,Nl]}],"outline-w":[{outline:[``,Sl,Bl,Pl]}],"outline-color":[{outline:N()}],shadow:[{shadow:[``,`none`,u,Gl,Rl]}],"shadow-color":[{shadow:N()}],"inset-shadow":[{"inset-shadow":[`none`,d,Gl,Rl]}],"inset-shadow-color":[{"inset-shadow":N()}],"ring-w":[{ring:I()}],"ring-w-inset":[`ring-inset`],"ring-color":[{ring:N()}],"ring-offset-w":[{"ring-offset":[Sl,Pl]}],"ring-offset-color":[{"ring-offset":N()}],"inset-ring-w":[{"inset-ring":I()}],"inset-ring-color":[{"inset-ring":N()}],"text-shadow":[{"text-shadow":[`none`,f,Gl,Rl]}],"text-shadow-color":[{"text-shadow":N()}],opacity:[{opacity:[Sl,zl,Nl]}],"mix-blend":[{"mix-blend":[...ae(),`plus-darker`,`plus-lighter`]}],"bg-blend":[{"bg-blend":ae()}],"mask-clip":[{"mask-clip":[`border`,`padding`,`content`,`fill`,`stroke`,`view`]},`mask-no-clip`],"mask-composite":[{mask:[`add`,`subtract`,`intersect`,`exclude`]}],"mask-image-linear-pos":[{"mask-linear":[Sl]}],"mask-image-linear-from-pos":[{"mask-linear-from":L()}],"mask-image-linear-to-pos":[{"mask-linear-to":L()}],"mask-image-linear-from-color":[{"mask-linear-from":N()}],"mask-image-linear-to-color":[{"mask-linear-to":N()}],"mask-image-t-from-pos":[{"mask-t-from":L()}],"mask-image-t-to-pos":[{"mask-t-to":L()}],"mask-image-t-from-color":[{"mask-t-from":N()}],"mask-image-t-to-color":[{"mask-t-to":N()}],"mask-image-r-from-pos":[{"mask-r-from":L()}],"mask-image-r-to-pos":[{"mask-r-to":L()}],"mask-image-r-from-color":[{"mask-r-from":N()}],"mask-image-r-to-color":[{"mask-r-to":N()}],"mask-image-b-from-pos":[{"mask-b-from":L()}],"mask-image-b-to-pos":[{"mask-b-to":L()}],"mask-image-b-from-color":[{"mask-b-from":N()}],"mask-image-b-to-color":[{"mask-b-to":N()}],"mask-image-l-from-pos":[{"mask-l-from":L()}],"mask-image-l-to-pos":[{"mask-l-to":L()}],"mask-image-l-from-color":[{"mask-l-from":N()}],"mask-image-l-to-color":[{"mask-l-to":N()}],"mask-image-x-from-pos":[{"mask-x-from":L()}],"mask-image-x-to-pos":[{"mask-x-to":L()}],"mask-image-x-from-color":[{"mask-x-from":N()}],"mask-image-x-to-color":[{"mask-x-to":N()}],"mask-image-y-from-pos":[{"mask-y-from":L()}],"mask-image-y-to-pos":[{"mask-y-to":L()}],"mask-image-y-from-color":[{"mask-y-from":N()}],"mask-image-y-to-color":[{"mask-y-to":N()}],"mask-image-radial":[{"mask-radial":[zl,Nl]}],"mask-image-radial-from-pos":[{"mask-radial-from":L()}],"mask-image-radial-to-pos":[{"mask-radial-to":L()}],"mask-image-radial-from-color":[{"mask-radial-from":N()}],"mask-image-radial-to-color":[{"mask-radial-to":N()}],"mask-image-radial-shape":[{"mask-radial":[`circle`,`ellipse`]}],"mask-image-radial-size":[{"mask-radial":[{closest:[`side`,`corner`],farthest:[`side`,`corner`]}]}],"mask-image-radial-pos":[{"mask-radial-at":b()}],"mask-image-conic-pos":[{"mask-conic":[Sl]}],"mask-image-conic-from-pos":[{"mask-conic-from":L()}],"mask-image-conic-to-pos":[{"mask-conic-to":L()}],"mask-image-conic-from-color":[{"mask-conic-from":N()}],"mask-image-conic-to-color":[{"mask-conic-to":N()}],"mask-mode":[{mask:[`alpha`,`luminance`,`match`]}],"mask-origin":[{"mask-origin":[`border`,`padding`,`content`,`fill`,`stroke`,`view`]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:ne()}],"mask-size":[{mask:re()}],"mask-type":[{"mask-type":[`alpha`,`luminance`]}],"mask-image":[{mask:[`none`,zl,Nl]}],filter:[{filter:[``,`none`,zl,Nl]}],blur:[{blur:oe()}],brightness:[{brightness:[Sl,zl,Nl]}],contrast:[{contrast:[Sl,zl,Nl]}],"drop-shadow":[{"drop-shadow":[``,`none`,p,Gl,Rl]}],"drop-shadow-color":[{"drop-shadow":N()}],grayscale:[{grayscale:[``,Sl,zl,Nl]}],"hue-rotate":[{"hue-rotate":[Sl,zl,Nl]}],invert:[{invert:[``,Sl,zl,Nl]}],saturate:[{saturate:[Sl,zl,Nl]}],sepia:[{sepia:[``,Sl,zl,Nl]}],"backdrop-filter":[{"backdrop-filter":[``,`none`,zl,Nl]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[Sl,zl,Nl]}],"backdrop-contrast":[{"backdrop-contrast":[Sl,zl,Nl]}],"backdrop-grayscale":[{"backdrop-grayscale":[``,Sl,zl,Nl]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Sl,zl,Nl]}],"backdrop-invert":[{"backdrop-invert":[``,Sl,zl,Nl]}],"backdrop-opacity":[{"backdrop-opacity":[Sl,zl,Nl]}],"backdrop-saturate":[{"backdrop-saturate":[Sl,zl,Nl]}],"backdrop-sepia":[{"backdrop-sepia":[``,Sl,zl,Nl]}],"border-collapse":[{border:[`collapse`,`separate`]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:[`auto`,`fixed`]}],caption:[{caption:[`top`,`bottom`]}],transition:[{transition:[``,`all`,`colors`,`opacity`,`shadow`,`transform`,`none`,zl,Nl]}],"transition-behavior":[{transition:[`normal`,`discrete`]}],duration:[{duration:[Sl,`initial`,zl,Nl]}],ease:[{ease:[`linear`,`initial`,_,zl,Nl]}],delay:[{delay:[Sl,zl,Nl]}],animate:[{animate:[`none`,v,zl,Nl]}],backface:[{backface:[`hidden`,`visible`]}],perspective:[{perspective:[h,zl,Nl]}],"perspective-origin":[{"perspective-origin":x()}],rotate:[{rotate:se()}],"rotate-x":[{"rotate-x":se()}],"rotate-y":[{"rotate-y":se()}],"rotate-z":[{"rotate-z":se()}],scale:[{scale:ce()}],"scale-x":[{"scale-x":ce()}],"scale-y":[{"scale-y":ce()}],"scale-z":[{"scale-z":ce()}],"scale-3d":[`scale-3d`],skew:[{skew:le()}],"skew-x":[{"skew-x":le()}],"skew-y":[{"skew-y":le()}],transform:[{transform:[zl,Nl,``,`none`,`gpu`,`cpu`]}],"transform-origin":[{origin:x()}],"transform-style":[{transform:[`3d`,`flat`]}],translate:[{translate:ue()}],"translate-x":[{"translate-x":ue()}],"translate-y":[{"translate-y":ue()}],"translate-z":[{"translate-z":ue()}],"translate-none":[`translate-none`],accent:[{accent:N()}],appearance:[{appearance:[`none`,`auto`]}],"caret-color":[{caret:N()}],"color-scheme":[{scheme:[`normal`,`dark`,`light`,`light-dark`,`only-dark`,`only-light`]}],cursor:[{cursor:[`auto`,`default`,`pointer`,`wait`,`text`,`move`,`help`,`not-allowed`,`none`,`context-menu`,`progress`,`cell`,`crosshair`,`vertical-text`,`alias`,`copy`,`no-drop`,`grab`,`grabbing`,`all-scroll`,`col-resize`,`row-resize`,`n-resize`,`e-resize`,`s-resize`,`w-resize`,`ne-resize`,`nw-resize`,`se-resize`,`sw-resize`,`ew-resize`,`ns-resize`,`nesw-resize`,`nwse-resize`,`zoom-in`,`zoom-out`,zl,Nl]}],"field-sizing":[{"field-sizing":[`fixed`,`content`]}],"pointer-events":[{"pointer-events":[`auto`,`none`]}],resize:[{resize:[`none`,``,`y`,`x`]}],"scroll-behavior":[{scroll:[`auto`,`smooth`]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:[`start`,`end`,`center`,`align-none`]}],"snap-stop":[{snap:[`normal`,`always`]}],"snap-type":[{snap:[`none`,`x`,`y`,`both`]}],"snap-strictness":[{snap:[`mandatory`,`proximity`]}],touch:[{touch:[`auto`,`none`,`manipulation`]}],"touch-x":[{"touch-pan":[`x`,`left`,`right`]}],"touch-y":[{"touch-pan":[`y`,`up`,`down`]}],"touch-pz":[`touch-pinch-zoom`],select:[{select:[`none`,`text`,`all`,`auto`]}],"will-change":[{"will-change":[`auto`,`scroll`,`contents`,`transform`,zl,Nl]}],fill:[{fill:[`none`,...N()]}],"stroke-w":[{stroke:[Sl,Bl,Pl,Fl]}],stroke:[{stroke:[`none`,...N()]}],"forced-color-adjust":[{"forced-color-adjust":[`auto`,`none`]}]},conflictingClassGroups:{overflow:[`overflow-x`,`overflow-y`],overscroll:[`overscroll-x`,`overscroll-y`],inset:[`inset-x`,`inset-y`,`start`,`end`,`top`,`right`,`bottom`,`left`],"inset-x":[`right`,`left`],"inset-y":[`top`,`bottom`],flex:[`basis`,`grow`,`shrink`],gap:[`gap-x`,`gap-y`],p:[`px`,`py`,`ps`,`pe`,`pt`,`pr`,`pb`,`pl`],px:[`pr`,`pl`],py:[`pt`,`pb`],m:[`mx`,`my`,`ms`,`me`,`mt`,`mr`,`mb`,`ml`],mx:[`mr`,`ml`],my:[`mt`,`mb`],size:[`w`,`h`],"font-size":[`leading`],"fvn-normal":[`fvn-ordinal`,`fvn-slashed-zero`,`fvn-figure`,`fvn-spacing`,`fvn-fraction`],"fvn-ordinal":[`fvn-normal`],"fvn-slashed-zero":[`fvn-normal`],"fvn-figure":[`fvn-normal`],"fvn-spacing":[`fvn-normal`],"fvn-fraction":[`fvn-normal`],"line-clamp":[`display`,`overflow`],rounded:[`rounded-s`,`rounded-e`,`rounded-t`,`rounded-r`,`rounded-b`,`rounded-l`,`rounded-ss`,`rounded-se`,`rounded-ee`,`rounded-es`,`rounded-tl`,`rounded-tr`,`rounded-br`,`rounded-bl`],"rounded-s":[`rounded-ss`,`rounded-es`],"rounded-e":[`rounded-se`,`rounded-ee`],"rounded-t":[`rounded-tl`,`rounded-tr`],"rounded-r":[`rounded-tr`,`rounded-br`],"rounded-b":[`rounded-br`,`rounded-bl`],"rounded-l":[`rounded-tl`,`rounded-bl`],"border-spacing":[`border-spacing-x`,`border-spacing-y`],"border-w":[`border-w-x`,`border-w-y`,`border-w-s`,`border-w-e`,`border-w-t`,`border-w-r`,`border-w-b`,`border-w-l`],"border-w-x":[`border-w-r`,`border-w-l`],"border-w-y":[`border-w-t`,`border-w-b`],"border-color":[`border-color-x`,`border-color-y`,`border-color-s`,`border-color-e`,`border-color-t`,`border-color-r`,`border-color-b`,`border-color-l`],"border-color-x":[`border-color-r`,`border-color-l`],"border-color-y":[`border-color-t`,`border-color-b`],translate:[`translate-x`,`translate-y`,`translate-none`],"translate-none":[`translate`,`translate-x`,`translate-y`,`translate-z`],"scroll-m":[`scroll-mx`,`scroll-my`,`scroll-ms`,`scroll-me`,`scroll-mt`,`scroll-mr`,`scroll-mb`,`scroll-ml`],"scroll-mx":[`scroll-mr`,`scroll-ml`],"scroll-my":[`scroll-mt`,`scroll-mb`],"scroll-p":[`scroll-px`,`scroll-py`,`scroll-ps`,`scroll-pe`,`scroll-pt`,`scroll-pr`,`scroll-pb`,`scroll-pl`],"scroll-px":[`scroll-pr`,`scroll-pl`],"scroll-py":[`scroll-pt`,`scroll-pb`],touch:[`touch-x`,`touch-y`,`touch-pz`],"touch-x":[`touch`],"touch-y":[`touch`],"touch-pz":[`touch`]},conflictingClassGroupModifiers:{"font-size":[`leading`]},orderSensitiveModifiers:[`*`,`**`,`after`,`backdrop`,`before`,`details-content`,`file`,`first-letter`,`first-line`,`marker`,`placeholder`,`selection`]}},nu=(e,{cacheSize:t,prefix:n,experimentalParseClassName:r,extend:i={},override:a={}})=>(ru(e,`cacheSize`,t),ru(e,`prefix`,n),ru(e,`experimentalParseClassName`,r),iu(e.theme,a.theme),iu(e.classGroups,a.classGroups),iu(e.conflictingClassGroups,a.conflictingClassGroups),iu(e.conflictingClassGroupModifiers,a.conflictingClassGroupModifiers),ru(e,`orderSensitiveModifiers`,a.orderSensitiveModifiers),au(e.theme,i.theme),au(e.classGroups,i.classGroups),au(e.conflictingClassGroups,i.conflictingClassGroups),au(e.conflictingClassGroupModifiers,i.conflictingClassGroupModifiers),ou(e,i,`orderSensitiveModifiers`),e),ru=(e,t,n)=>{n!==void 0&&(e[t]=n)},iu=(e,t)=>{if(t)for(let n in t)ru(e,n,t[n])},au=(e,t)=>{if(t)for(let n in t)ou(e,t,n)},ou=(e,t,n)=>{let r=t[n];r!==void 0&&(e[n]=e[n]?e[n].concat(r):r)},su=(e,...t)=>typeof e==`function`?dl(tu,e,...t):dl(()=>nu(tu(),e),...t),cu=dl(tu),lu=e=>Pc(e)?cu:su({...e,extend:{theme:e.theme,classGroups:e.classGroups,conflictingClassGroupModifiers:e.conflictingClassGroupModifiers,conflictingClassGroups:e.conflictingClassGroups,...e.extend}}),{createTV:iee,tv:uu}=Uc((...e)=>t=>{let n=Mc(e);return!n||!t.twMerge?n:((!Hc.cachedTwMerge||Hc.didTwMergeConfigChange)&&(Hc.didTwMergeConfigChange=!1,Hc.cachedTwMerge=lu(Hc.cachedTwMergeConfig)),Hc.cachedTwMerge(n)||void 0)}),du=(e,t)=>uu(e,{...t,twMerge:t?.twMerge??!0,twMergeConfig:{...t?.twMergeConfig,theme:{...t?.twMergeConfig?.theme,...kc.theme},classGroups:{...t?.twMergeConfig?.classGroups,...kc.classGroups}}}),fu=du({slots:{base:`relative inline-flex flex-col gap-2 items-center justify-center`,wrapper:`relative flex`,label:`text-foreground dark:text-foreground-dark font-regular`,circle1:`absolute w-full h-full rounded-full`,circle2:`absolute w-full h-full rounded-full`,dots:`relative rounded-full mx-auto`,spinnerBars:[`absolute`,`animate-fade-out`,`rounded-full`,`w-[25%]`,`h-[8%]`,`left-[calc(37.5%)]`,`top-[calc(46%)]`,`spinner-bar-animation`]},variants:{size:{sm:{wrapper:`w-5 h-5`,circle1:`border-2`,circle2:`border-2`,dots:`size-1`,label:`text-small`},md:{wrapper:`w-8 h-8`,circle1:`border-3`,circle2:`border-3`,dots:`size-1.5`,label:`text-medium`},lg:{wrapper:`w-10 h-10`,circle1:`border-3`,circle2:`border-3`,dots:`size-2`,label:`text-large`}},color:{current:{circle1:`border-b-current`,circle2:`border-b-current`,dots:`bg-current`,spinnerBars:`bg-current`},white:{circle1:`border-b-white`,circle2:`border-b-white`,dots:`bg-white`,spinnerBars:`bg-white`},default:{circle1:`border-b-default`,circle2:`border-b-default`,dots:`bg-default`,spinnerBars:`bg-default`},primary:{circle1:`border-b-primary`,circle2:`border-b-primary`,dots:`bg-primary`,spinnerBars:`bg-primary`},secondary:{circle1:`border-b-secondary`,circle2:`border-b-secondary`,dots:`bg-secondary`,spinnerBars:`bg-secondary`},success:{circle1:`border-b-success`,circle2:`border-b-success`,dots:`bg-success`,spinnerBars:`bg-success`},warning:{circle1:`border-b-warning`,circle2:`border-b-warning`,dots:`bg-warning`,spinnerBars:`bg-warning`},danger:{circle1:`border-b-danger`,circle2:`border-b-danger`,dots:`bg-danger`,spinnerBars:`bg-danger`}},labelColor:{foreground:{label:`text-foreground`},primary:{label:`text-primary`},secondary:{label:`text-secondary`},success:{label:`text-success`},warning:{label:`text-warning`},danger:{label:`text-danger`}},variant:{default:{circle1:[`animate-spinner-ease-spin`,`border-solid`,`border-t-transparent`,`border-l-transparent`,`border-r-transparent`],circle2:[`opacity-75`,`animate-spinner-linear-spin`,`border-dotted`,`border-t-transparent`,`border-l-transparent`,`border-r-transparent`]},gradient:{circle1:[`border-0`,`bg-gradient-to-b`,`from-transparent`,`via-transparent`,`to-primary`,`animate-spinner-linear-spin`,`[animation-duration:1s]`,`[-webkit-mask:radial-gradient(closest-side,rgba(0,0,0,0.0)calc(100%-3px),rgba(0,0,0,1)calc(100%-3px))]`],circle2:[`hidden`]},wave:{wrapper:`translate-y-3/4`,dots:[`animate-sway`,`spinner-dot-animation`]},dots:{wrapper:`translate-y-2/4`,dots:[`animate-blink`,`spinner-dot-blink-animation`]},spinner:{},simple:{wrapper:`text-foreground h-5 w-5 animate-spin`,circle1:`opacity-25`,circle2:`opacity-75`}}},defaultVariants:{size:`md`,color:`primary`,labelColor:`foreground`,variant:`default`},compoundVariants:[{variant:`gradient`,color:`current`,class:{circle1:`to-current`}},{variant:`gradient`,color:`white`,class:{circle1:`to-white`}},{variant:`gradient`,color:`default`,class:{circle1:`to-default`}},{variant:`gradient`,color:`primary`,class:{circle1:`to-primary`}},{variant:`gradient`,color:`secondary`,class:{circle1:`to-secondary`}},{variant:`gradient`,color:`success`,class:{circle1:`to-success`}},{variant:`gradient`,color:`warning`,class:{circle1:`to-warning`}},{variant:`gradient`,color:`danger`,class:{circle1:`to-danger`}},{variant:`wave`,size:`sm`,class:{wrapper:`w-5 h-5`}},{variant:`wave`,size:`md`,class:{wrapper:`w-8 h-8`}},{variant:`wave`,size:`lg`,class:{wrapper:`w-12 h-12`}},{variant:`dots`,size:`sm`,class:{wrapper:`w-5 h-5`}},{variant:`dots`,size:`md`,class:{wrapper:`w-8 h-8`}},{variant:`dots`,size:`lg`,class:{wrapper:`w-12 h-12`}},{variant:`simple`,size:`sm`,class:{wrapper:`w-5 h-5`}},{variant:`simple`,size:`md`,class:{wrapper:`w-8 h-8`}},{variant:`simple`,size:`lg`,class:{wrapper:`w-12 h-12`}},{variant:`simple`,color:`current`,class:{wrapper:`text-current`}},{variant:`simple`,color:`white`,class:{wrapper:`text-white`}},{variant:`simple`,color:`default`,class:{wrapper:`text-default`}},{variant:`simple`,color:`primary`,class:{wrapper:`text-primary`}},{variant:`simple`,color:`secondary`,class:{wrapper:`text-secondary`}},{variant:`simple`,color:`success`,class:{wrapper:`text-success`}},{variant:`simple`,color:`warning`,class:{wrapper:`text-warning`}},{variant:`simple`,color:`danger`,class:{wrapper:`text-danger`}}]}),pu=[`outline-solid outline-transparent`,`data-[focus-visible=true]:z-10`,`data-[focus-visible=true]:outline-2`,`data-[focus-visible=true]:outline-focus`,`data-[focus-visible=true]:outline-offset-2`],mu=[`outline-solid outline-transparent`,`group-data-[focus-visible=true]:z-10`,`group-data-[focus-visible=true]:ring-2`,`group-data-[focus-visible=true]:ring-focus`,`group-data-[focus-visible=true]:ring-offset-2`,`group-data-[focus-visible=true]:ring-offset-background`],hu=[`outline-solid outline-transparent`,`ring-2`,`ring-focus`,`ring-offset-2`,`ring-offset-background`],gu={default:[`[&+.border-medium.border-default]:ms-[calc(var(--heroui-border-width-medium)*-1)]`],primary:[`[&+.border-medium.border-primary]:ms-[calc(var(--heroui-border-width-medium)*-1)]`],secondary:[`[&+.border-medium.border-secondary]:ms-[calc(var(--heroui-border-width-medium)*-1)]`],success:[`[&+.border-medium.border-success]:ms-[calc(var(--heroui-border-width-medium)*-1)]`],warning:[`[&+.border-medium.border-warning]:ms-[calc(var(--heroui-border-width-medium)*-1)]`],danger:[`[&+.border-medium.border-danger]:ms-[calc(var(--heroui-border-width-medium)*-1)]`]},_u=[`font-inherit`,`text-[100%]`,`leading-[1.15]`,`m-0`,`p-0`,`overflow-visible`,`box-border`,`absolute`,`top-0`,`w-full`,`h-full`,`opacity-[0.0001]`,`z-[1]`,`cursor-pointer`,`disabled:cursor-default`],vu=du({slots:{base:`inline-flex`,tabList:[`flex`,`p-1`,`h-fit`,`gap-2`,`items-center`,`flex-nowrap`,`overflow-x-scroll`,`scrollbar-hide`,`bg-default-100`],tab:[`z-0`,`w-full`,`px-3`,`py-1`,`flex`,`group`,`relative`,`justify-center`,`items-center`,`outline-solid outline-transparent`,`cursor-pointer`,`transition-opacity`,`tap-highlight-transparent`,`data-[disabled=true]:cursor-not-allowed`,`data-[disabled=true]:opacity-30`,`data-[hover-unselected=true]:opacity-disabled`,...pu],tabContent:[`relative`,`z-10`,`text-inherit`,`whitespace-nowrap`,`transition-colors`,`text-default-500`,`group-data-[selected=true]:text-foreground`],cursor:[`absolute`,`z-0`,`bg-white`],panel:[`py-3`,`px-1`,`outline-solid outline-transparent`,`data-[inert=true]:hidden`,...pu],tabWrapper:[]},variants:{variant:{solid:{cursor:`inset-0`},light:{tabList:`bg-transparent dark:bg-transparent`,cursor:`inset-0`},underlined:{tabList:`bg-transparent dark:bg-transparent`,cursor:`h-[2px] w-[80%] bottom-0 shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]`},bordered:{tabList:`bg-transparent dark:bg-transparent border-medium border-default-200 shadow-xs`,cursor:`inset-0`}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{tabList:`rounded-medium`,tab:`h-7 text-tiny rounded-small`,cursor:`rounded-small`},md:{tabList:`rounded-medium`,tab:`h-8 text-small rounded-small`,cursor:`rounded-small`},lg:{tabList:`rounded-large`,tab:`h-9 text-medium rounded-medium`,cursor:`rounded-medium`}},radius:{none:{tabList:`rounded-none`,tab:`rounded-none`,cursor:`rounded-none`},sm:{tabList:`rounded-medium`,tab:`rounded-small`,cursor:`rounded-small`},md:{tabList:`rounded-medium`,tab:`rounded-small`,cursor:`rounded-small`},lg:{tabList:`rounded-large`,tab:`rounded-medium`,cursor:`rounded-medium`},full:{tabList:`rounded-full`,tab:`rounded-full`,cursor:`rounded-full`}},fullWidth:{true:{base:`w-full`,tabList:`w-full`}},isDisabled:{true:{tabList:`opacity-disabled pointer-events-none`}},disableAnimation:{true:{tab:`transition-none`,tabContent:`transition-none`}},placement:{top:{},start:{tabList:`flex-col`,panel:`py-0 px-3`,tabWrapper:`flex`},end:{tabList:`flex-col`,panel:`py-0 px-3`,tabWrapper:`flex flex-row-reverse`},bottom:{tabWrapper:`flex flex-col-reverse`}}},defaultVariants:{color:`default`,variant:`solid`,size:`md`,fullWidth:!1,isDisabled:!1},compoundVariants:[{variant:[`solid`,`bordered`,`light`],color:`default`,class:{cursor:[`bg-background`,`dark:bg-default`,`shadow-small`],tabContent:`group-data-[selected=true]:text-default-foreground`}},{variant:[`solid`,`bordered`,`light`],color:`primary`,class:{cursor:H.solid.primary,tabContent:`group-data-[selected=true]:text-primary-foreground`}},{variant:[`solid`,`bordered`,`light`],color:`secondary`,class:{cursor:H.solid.secondary,tabContent:`group-data-[selected=true]:text-secondary-foreground`}},{variant:[`solid`,`bordered`,`light`],color:`success`,class:{cursor:H.solid.success,tabContent:`group-data-[selected=true]:text-success-foreground`}},{variant:[`solid`,`bordered`,`light`],color:`warning`,class:{cursor:H.solid.warning,tabContent:`group-data-[selected=true]:text-warning-foreground`}},{variant:[`solid`,`bordered`,`light`],color:`danger`,class:{cursor:H.solid.danger,tabContent:`group-data-[selected=true]:text-danger-foreground`}},{variant:`underlined`,color:`default`,class:{cursor:`bg-foreground`,tabContent:`group-data-[selected=true]:text-foreground`}},{variant:`underlined`,color:`primary`,class:{cursor:`bg-primary`,tabContent:`group-data-[selected=true]:text-primary`}},{variant:`underlined`,color:`secondary`,class:{cursor:`bg-secondary`,tabContent:`group-data-[selected=true]:text-secondary`}},{variant:`underlined`,color:`success`,class:{cursor:`bg-success`,tabContent:`group-data-[selected=true]:text-success`}},{variant:`underlined`,color:`warning`,class:{cursor:`bg-warning`,tabContent:`group-data-[selected=true]:text-warning`}},{variant:`underlined`,color:`danger`,class:{cursor:`bg-danger`,tabContent:`group-data-[selected=true]:text-danger`}},{disableAnimation:!0,variant:`underlined`,class:{tab:[`after:content-['']`,`after:absolute`,`after:bottom-0`,`after:h-[2px]`,`after:w-[80%]`,`after:opacity-0`,`after:shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]`,`data-[selected=true]:after:opacity-100`]}},{disableAnimation:!0,color:`default`,variant:[`solid`,`bordered`,`light`],class:{tab:`data-[selected=true]:bg-default data-[selected=true]:text-default-foreground`}},{disableAnimation:!0,color:`primary`,variant:[`solid`,`bordered`,`light`],class:{tab:`data-[selected=true]:bg-primary data-[selected=true]:text-primary-foreground`}},{disableAnimation:!0,color:`secondary`,variant:[`solid`,`bordered`,`light`],class:{tab:`data-[selected=true]:bg-secondary data-[selected=true]:text-secondary-foreground`}},{disableAnimation:!0,color:`success`,variant:[`solid`,`bordered`,`light`],class:{tab:`data-[selected=true]:bg-success data-[selected=true]:text-success-foreground`}},{disableAnimation:!0,color:`warning`,variant:[`solid`,`bordered`,`light`],class:{tab:`data-[selected=true]:bg-warning data-[selected=true]:text-warning-foreground`}},{disableAnimation:!0,color:`danger`,variant:[`solid`,`bordered`,`light`],class:{tab:`data-[selected=true]:bg-danger data-[selected=true]:text-danger-foreground`}},{disableAnimation:!0,color:`default`,variant:`underlined`,class:{tab:`data-[selected=true]:after:bg-foreground`}},{disableAnimation:!0,color:`primary`,variant:`underlined`,class:{tab:`data-[selected=true]:after:bg-primary`}},{disableAnimation:!0,color:`secondary`,variant:`underlined`,class:{tab:`data-[selected=true]:after:bg-secondary`}},{disableAnimation:!0,color:`success`,variant:`underlined`,class:{tab:`data-[selected=true]:after:bg-success`}},{disableAnimation:!0,color:`warning`,variant:`underlined`,class:{tab:`data-[selected=true]:after:bg-warning`}},{disableAnimation:!0,color:`danger`,variant:`underlined`,class:{tab:`data-[selected=true]:after:bg-danger`}}],compoundSlots:[{variant:`underlined`,slots:[`tab`,`tabList`,`cursor`],class:[`rounded-none`]}]}),yu=du({slots:{base:`relative z-[100]`},variants:{disableAnimation:{false:{base:``},true:{base:[`data-[placement=bottom-right]:bottom-0 data-[placement=bottom-right]:right-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=bottom-right]:fixed data-[placement=bottom-right]:flex data-[placement=bottom-right]:flex-col`,`data-[placement=bottom-left]:bottom-0 data-[placement=bottom-left]:left-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=bottom-left]:fixed data-[placement=bottom-left]:flex data-[placement=bottom-left]:flex-col`,`data-[placement=bottom-center]:bottom-0 data-[placement=bottom-center]:fixed w-full px-2 sm:w-auto sm:px-0 data-[placement=bottom-center]:flex data-[placement=bottom-center]:flex-col data-[placement=bottom-center]:left-1/2 data-[placement=bottom-center]:-translate-x-1/2`,`data-[placement=top-right]:top-0 data-[placement=top-right]:right-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=top-right]:fixed data-[placement=top-right]:flex data-[placement=top-right]:flex-col`,`data-[placement=top-left]:top-0 data-[placement=top-left]:left-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=top-left]:fixed data-[placement=top-left]:flex data-[placement=top-left]:flex-col`,`data-[placement=top-center]:top-0 data-[placement=top-center]:fixed w-full px-2 sm:w-auto sm:px-0 data-[placement=top-center]:flex data-[placement=top-center]:flex-col data-[placement=top-center]:left-1/2 data-[placement=top-center]:-translate-x-1/2`]}}},defaultVariants:{disableAnimation:!1}}),bu=du({slots:{base:`flex gap-x-4 items-center.group.cursor-pointer.relative.z-50.box-border.outline-solid outline-transparent.p-3 sm:mx-1.my-1.w-full sm:w-[356px].min-h-4.before:content-[''].before:absolute.before:left-0.before:right-0.data-[placement=bottom-right]:before:h-[var(--top-extension,16px)].data-[placement=bottom-left]:before:h-[var(--top-extension,16px)].data-[placement=bottom-center]:before:h-[var(--top-extension,16px)].data-[placement=bottom-right]:before:top-[calc(-1*var(--top-extension,16px))].data-[placement=bottom-left]:before:top-[calc(-1*var(--top-extension,16px))].data-[placement=bottom-center]:before:top-[calc(-1*var(--top-extension,16px))].before:z-[-1].before:pointer-events-auto.before:bg-transparent.after:content-[''].after:absolute.after:left-0.after:right-0.data-[placement=bottom-right]:after:h-[var(--bottom-extension,16px)].data-[placement=bottom-left]:after:h-[var(--bottom-extension,16px)].data-[placement=bottom-center]:after:h-[var(--bottom-extension,16px)].data-[placement=bottom-right]:after:bottom-[calc(-1*var(--bottom-extension,16px))].data-[placement=bottom-left]:after:bottom-[calc(-1*var(--bottom-extension,16px))].data-[placement=bottom-center]:after:bottom-[calc(-1*var(--bottom-extension,16px))].after:z-[-1].after:pointer-events-auto.after:bg-transparent.transform-gpu.will-change-transform.backface-visibility-hidden`.split(`.`),wrapper:[`flex flex-col gap-y-0`],title:[`text-sm`,`me-4`,`font-medium`,`text-foreground`],description:[`text-sm`,`me-4`,`text-default-500`],icon:[`w-6 h-6 flex-none fill-current`],loadingComponent:[`w-6 h-6 flex-none fill-current`],content:[`flex flex-grow flex-row gap-x-4 items-center relative`],progressTrack:[`absolute inset-0 pointer-events-none bg-transparent overflow-hidden`],progressIndicator:[`h-full bg-default-400 opacity-20`],motionDiv:[`fixed`,`px-4 sm:px-0`,`data-[placement=bottom-right]:bottom-0 data-[placement=bottom-right]:right-0 data-[placement=bottom-right]:mx-auto w-full sm:data-[placement=bottom-right]:w-max mb-1 sm:data-[placement=bottom-right]:mr-2`,`data-[placement=bottom-left]:bottom-0 data-[placement=bottom-left]:left-0 data-[placement=bottom-left]:mx-auto w-full sm:data-[placement=bottom-left]:w-max mb-1 sm:data-[placement=bottom-left]:ml-2`,`data-[placement=bottom-center]:bottom-0 data-[placement=bottom-center]:left-0 data-[placement=bottom-center]:right-0 w-full sm:data-[placement=bottom-center]:w-max sm:data-[placement=bottom-center]:mx-auto`,`data-[placement=top-right]:top-0 data-[placement=top-right]:right-0 data-[placement=top-right]:mx-auto w-full sm:data-[placement=top-right]:w-max sm:data-[placement=top-right]:mr-2`,`data-[placement=top-left]:top-0 data-[placement=top-left]:left-0 data-[placement=top-left]:mx-auto w-full sm:data-[placement=top-left]:w-max sm:data-[placement=top-left]:ml-2`,`data-[placement=top-center]:top-0 data-[placement=top-center]:left-0 data-[placement=top-center]:right-0 w-full sm:data-[placement=top-center]:w-max sm:data-[placement=top-center]:mx-auto`],closeButton:[`opacity-0 group-hover:opacity-100`,`transform-gpu`,`transition-all duration-200 ease-out`,`will-change-opacity will-change-transform`,`p-0 group-hover:pointer-events-auto w-6 h-6 min-w-4 absolute -right-2 -top-2 items-center justify-center bg-transparent text-default-400 hover:text-default-600 border border-3 border-transparent`,`data-[hidden=true]:hidden`],closeIcon:[`rounded-full w-full h-full p-0.5 border border-default-400 bg-default-100`]},variants:{size:{sm:{icon:`w-5 h-5`,loadingComponent:`w-5 h-5`},md:{},lg:{}},variant:{flat:`bg-content1 border border-default-100`,solid:H.solid.default,bordered:`bg-background border border-default-200`},color:{default:``,foreground:{progressIndicator:`h-full opacity-20 bg-foreground-400`},primary:{progressIndicator:`h-full opacity-20 bg-primary-400`},secondary:{progressIndicator:`h-full opacity-20 bg-secondary-400`},success:{progressIndicator:`h-full opacity-20 bg-success-400`},warning:{progressIndicator:`h-full opacity-20 bg-warning-400`},danger:{progressIndicator:`h-full opacity-20 bg-danger-400`}},radius:{none:{base:`rounded-none`,progressTrack:`rounded-none`},sm:{base:`rounded-small`,progressTrack:`rounded-small`},md:{base:`rounded-medium`,progressTrack:`rounded-medium`},lg:{base:`rounded-large`,progressTrack:`rounded-large`},full:{base:`rounded-full`,closeButton:`-top-px -right-px`,progressTrack:`rounded-full`}},disableAnimation:{true:{closeButton:`transition-none`,base:`data-[animation=exiting]:opacity-0 transition-none`},false:{closeButton:`transition-all ease-out duration-200`,base:[`data-[toast-exiting=true]:transform-gpu`,`data-[toast-exiting=true]:will-change-transform`,`data-[toast-exiting=true]:transition-all`,`data-[toast-exiting=true]:ease-out`,`data-[toast-exiting=true]:data-[placement=bottom-right]:translate-x-full`,`data-[toast-exiting=true]:data-[placement=bottom-left]:-translate-x-full`,`data-[toast-exiting=true]:data-[placement=bottom-center]:translate-y-full`,`data-[toast-exiting=true]:data-[placement=top-right]:translate-x-full`,`data-[toast-exiting=true]:data-[placement=top-left]:-translate-x-full`,`data-[toast-exiting=true]:data-[placement=top-center]:-translate-y-full`,`data-[toast-exiting=true]:opacity-0`,`data-[toast-exiting=true]:duration-300`,`data-[toast-exiting=true]:ease-out`]}},shadow:{none:{base:`shadow-none`},sm:{base:`shadow-small`},md:{base:`shadow-medium`},lg:{base:`shadow-large`}}},defaultVariants:{size:`md`,variant:`flat`,radius:`md`,shadow:`sm`},compoundVariants:[{variant:`flat`,color:`foreground`,class:{base:`bg-foreground text-background`,closeButton:`text-foreground-400 hover:text-foreground-600`,closeIcon:`border border-foreground-400 bg-foreground-100`,title:`text-background-600`,description:`text-background-500`}},{variant:`flat`,color:`primary`,class:{base:`bg-primary-50 text-primary-600 border-primary-100`,closeButton:`text-primary-400 hover:text-primary-600`,closeIcon:`border border-primary-400 bg-primary-100`,title:`text-primary-600`,description:`text-primary-500`}},{variant:`flat`,color:`secondary`,class:{base:`bg-secondary-50 text-secondary-600 border-secondary-100`,closeButton:`text-secondary-400 hover:text-secondary-600`,closeIcon:`border border-secondary-400 bg-secondary-100`,title:`text-secondary-600`,description:`text-secondary-500`}},{variant:`flat`,color:`success`,class:{base:`bg-success-50 text-success-600 border-success-100`,closeButton:`text-success-400 hover:text-success-600`,closeIcon:`border border-success-400 bg-success-100`,title:`text-success-600`,description:`text-success-500`}},{variant:`flat`,color:`warning`,class:{base:`bg-warning-50 text-warning-600 border-warning-100`,closeButton:`text-warning-400 hover:text-warning-600`,closeIcon:`border border-warning-400 bg-warning-100`,title:`text-warning-600`,description:`text-warning-500`}},{variant:`flat`,color:`danger`,class:{base:`bg-danger-50 text-danger-600 border-danger-100`,closeButton:`text-danger-400 hover:text-danger-600`,closeIcon:`border border-danger-400 bg-danger-100`,title:`text-danger-600`,description:`text-danger-500`}},{variant:`bordered`,color:`foreground`,class:{base:`bg-foreground border-foreground-400 text-background`,closeButton:`text-foreground-400 hover:text-foreground-600`,closeIcon:`border border-foreground-400 bg-foreground-100`,title:`text-background-600`,description:`text-background-500`}},{variant:`bordered`,color:`primary`,class:{base:`border-primary-400 text-primary-600`,closeButton:`text-primary-400 hover:text-primary-600`,closeIcon:`border border-primary-400 bg-primary-100`,title:`text-primary-600`,description:`text-primary-500`}},{variant:`bordered`,color:`secondary`,class:{base:`border-secondary-400 text-secondary-600`,closeButton:`text-secondary-400 hover:text-secondary-600`,closeIcon:`border border-secondary-400 bg-secondary-100`,title:`text-secondary-600`,description:`text-secondary-500`}},{variant:`bordered`,color:`success`,class:{base:`border-success-400 text-success-600`,closeButton:`text-success-400 hover:text-success-600`,closeIcon:`border border-success-400 bg-success-100`,title:`text-success-600`,description:`text-success-500`}},{variant:`bordered`,color:`warning`,class:{base:`border-warning-400 text-warning-600`,closeButton:`text-warning-400 hover:text-warning-600`,closeIcon:`border border-warning-400 bg-warning-100`,title:`text-warning-600`,description:`text-warning-500`}},{variant:`bordered`,color:`danger`,class:{base:`border-danger-400 text-danger-600`,closeButton:`text-danger-400 hover:text-danger-600`,closeIcon:`border border-danger-400 bg-danger-100`,title:`text-danger-600`,description:`text-danger-500`}},{variant:`solid`,color:`foreground`,class:{base:H.solid.foreground,closeButton:`text-foreground-400 hover:text-foreground-600`,closeIcon:`border border-foreground-400 bg-foreground-100`,title:`text-background`,description:`text-background`}},{variant:`solid`,color:`primary`,class:{base:H.solid.primary,closeButton:`text-primary-400 hover:text-primary-600`,closeIcon:`border border-primary-400 bg-primary-100`,title:`text-primary-foreground`,description:`text-primary-foreground`}},{variant:`solid`,color:`secondary`,class:{base:H.solid.secondary,closeButton:`text-secondary-400 hover:text-secondary-600`,closeIcon:`border border-secondary-400 bg-secondary-100`,title:`text-secondary-foreground`,description:`text-secondary-foreground`}},{variant:`solid`,color:`success`,class:{base:H.solid.success,closeButton:`text-success-400 hover:text-success-600`,closeIcon:`border border-success-400 bg-success-100`,title:`text-success-foreground`,description:`text-success-foreground`}},{variant:`solid`,color:`warning`,class:{base:H.solid.warning,closeButton:`text-warning-400 hover:text-warning-600`,closeIcon:`border border-warning-400 bg-warning-100`,title:`text-warning-foreground`,description:`text-warning-foreground`}},{variant:`solid`,color:`danger`,class:{base:H.solid.danger,closeButton:`text-danger-400 hover:text-danger-600`,closeIcon:`border border-danger-400 bg-danger-100`,title:`text-danger-foreground`,description:`text-danger-foreground`}}]}),xu=du({slots:{base:`group relative max-w-fit inline-flex items-center justify-start cursor-pointer touch-none tap-highlight-transparent select-none`,wrapper:[`px-1`,`relative`,`inline-flex`,`items-center`,`justify-start`,`shrink-0`,`overflow-hidden`,`bg-default-200`,`rounded-full`,...mu],thumb:[`z-10`,`flex`,`items-center`,`justify-center`,`bg-white`,`shadow-small`,`rounded-full`,`origin-right`,`pointer-events-none`],hiddenInput:_u,startContent:`z-0 absolute start-1.5 text-current`,endContent:`z-0 absolute end-1.5 text-default-600`,thumbIcon:`text-black`,label:`relative text-foreground select-none ms-2`},variants:{color:{default:{wrapper:[`group-data-[selected=true]:bg-default-400`,`group-data-[selected=true]:text-default-foreground`]},primary:{wrapper:[`group-data-[selected=true]:bg-primary`,`group-data-[selected=true]:text-primary-foreground`]},secondary:{wrapper:[`group-data-[selected=true]:bg-secondary`,`group-data-[selected=true]:text-secondary-foreground`]},success:{wrapper:[`group-data-[selected=true]:bg-success`,`group-data-[selected=true]:text-success-foreground`]},warning:{wrapper:[`group-data-[selected=true]:bg-warning`,`group-data-[selected=true]:text-warning-foreground`]},danger:{wrapper:[`group-data-[selected=true]:bg-danger`,`data-[selected=true]:text-danger-foreground`]}},size:{sm:{wrapper:`w-10 h-6`,thumb:[`w-4 h-4 text-tiny`,`group-data-[selected=true]:ms-4`],endContent:`text-tiny`,startContent:`text-tiny`,label:`text-small`},md:{wrapper:`w-12 h-7`,thumb:[`w-5 h-5 text-small`,`group-data-[selected=true]:ms-5`],endContent:`text-small`,startContent:`text-small`,label:`text-medium`},lg:{wrapper:`w-14 h-8`,thumb:[`w-6 h-6 text-medium`,`group-data-[selected=true]:ms-6`],endContent:`text-medium`,startContent:`text-medium`,label:`text-large`}},isDisabled:{true:{base:`opacity-disabled pointer-events-none`}},disableAnimation:{true:{wrapper:`transition-none`,thumb:`transition-none`},false:{wrapper:`transition-background`,thumb:`transition-all`,startContent:[`opacity-0`,`scale-50`,`transition-transform-opacity`,`group-data-[selected=true]:scale-100`,`group-data-[selected=true]:opacity-100`],endContent:[`opacity-100`,`transition-transform-opacity`,`group-data-[selected=true]:translate-x-3`,`group-data-[selected=true]:opacity-0`]}}},defaultVariants:{color:`primary`,size:`md`,isDisabled:!1},compoundVariants:[{disableAnimation:!1,size:`sm`,class:{thumb:[`group-data-[pressed=true]:w-5`,`group-data-[selected]:group-data-[pressed]:ml-3`]}},{disableAnimation:!1,size:`md`,class:{thumb:[`group-data-[pressed=true]:w-6`,`group-data-[selected]:group-data-[pressed]:ml-4`]}},{disableAnimation:!1,size:`lg`,class:{thumb:[`group-data-[pressed=true]:w-7`,`group-data-[selected]:group-data-[pressed]:ml-5`]}}]}),Su=du({slots:{base:[`z-0`,`relative`,`bg-transparent`,`[transform-origin:var(--trigger-anchor-point)]`,`before:content-['']`,`before:hidden`,`before:z-[-1]`,`before:absolute`,`before:rotate-45`,`before:w-2.5`,`before:h-2.5`,`before:rounded-sm`,`data-[arrow=true]:before:block`,`data-[placement=top]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]`,`data-[placement=top]:before:left-1/2`,`data-[placement=top]:before:-translate-x-1/2`,`data-[placement=top-start]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]`,`data-[placement=top-start]:before:left-3`,`data-[placement=top-end]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]`,`data-[placement=top-end]:before:right-3`,`data-[placement=bottom]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]`,`data-[placement=bottom]:before:left-1/2`,`data-[placement=bottom]:before:-translate-x-1/2`,`data-[placement=bottom-start]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]`,`data-[placement=bottom-start]:before:left-3`,`data-[placement=bottom-end]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]`,`data-[placement=bottom-end]:before:right-3`,`data-[placement=left]:before:-right-[calc(theme(spacing.5)/4_-_2px)]`,`data-[placement=left]:before:top-1/2`,`data-[placement=left]:before:-translate-y-1/2`,`data-[placement=left-start]:before:-right-[calc(theme(spacing.5)/4_-_3px)]`,`data-[placement=left-start]:before:top-1/4`,`data-[placement=left-end]:before:-right-[calc(theme(spacing.5)/4_-_3px)]`,`data-[placement=left-end]:before:bottom-1/4`,`data-[placement=right]:before:-left-[calc(theme(spacing.5)/4_-_2px)]`,`data-[placement=right]:before:top-1/2`,`data-[placement=right]:before:-translate-y-1/2`,`data-[placement=right-start]:before:-left-[calc(theme(spacing.5)/4_-_3px)]`,`data-[placement=right-start]:before:top-1/4`,`data-[placement=right-end]:before:-left-[calc(theme(spacing.5)/4_-_3px)]`,`data-[placement=right-end]:before:bottom-1/4`,...pu],content:[`z-10`,`px-2.5`,`py-1`,`w-full`,`inline-flex`,`flex-col`,`items-center`,`justify-center`,`box-border`,`subpixel-antialiased`,`outline-solid outline-transparent`,`box-border`],trigger:[`z-10`],backdrop:[`hidden`],arrow:[]},variants:{size:{sm:{content:`text-tiny`},md:{content:`text-small`},lg:{content:`text-medium`}},color:{default:{base:`before:bg-content1 before:shadow-small`,content:`bg-content1`},foreground:{base:`before:bg-foreground`,content:H.solid.foreground},primary:{base:`before:bg-primary`,content:H.solid.primary},secondary:{base:`before:bg-secondary`,content:H.solid.secondary},success:{base:`before:bg-success`,content:H.solid.success},warning:{base:`before:bg-warning`,content:H.solid.warning},danger:{base:`before:bg-danger`,content:H.solid.danger}},radius:{none:{content:`rounded-none`},sm:{content:`rounded-small`},md:{content:`rounded-medium`},lg:{content:`rounded-large`},full:{content:`rounded-full`}},shadow:{none:{content:`shadow-none`},sm:{content:`shadow-small`},md:{content:`shadow-medium`},lg:{content:`shadow-large`}},backdrop:{transparent:{},opaque:{backdrop:`bg-overlay/50 backdrop-opacity-disabled`},blur:{backdrop:`backdrop-blur-sm backdrop-saturate-150 bg-overlay/30`}},triggerScaleOnOpen:{true:{trigger:[`aria-expanded:scale-[0.97]`,`aria-expanded:opacity-70`,`subpixel-antialiased`]},false:{}},disableAnimation:{true:{base:`animate-none`}},isTriggerDisabled:{true:{trigger:`opacity-disabled pointer-events-none`},false:{}}},defaultVariants:{color:`default`,radius:`lg`,size:`md`,shadow:`md`,backdrop:`transparent`,triggerScaleOnOpen:!0},compoundVariants:[{backdrop:[`opaque`,`blur`],class:{backdrop:`block w-full h-full fixed inset-0 -z-30`}}]}),Cu=[`data-[top-scroll=true]:[mask-image:linear-gradient(0deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]`,`data-[bottom-scroll=true]:[mask-image:linear-gradient(180deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]`,`data-[top-bottom-scroll=true]:[mask-image:linear-gradient(#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]`],wu=[`data-[left-scroll=true]:[mask-image:linear-gradient(270deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]`,`data-[right-scroll=true]:[mask-image:linear-gradient(90deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]`,`data-[left-right-scroll=true]:[mask-image:linear-gradient(to_right,#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]`],Tu=du({base:[],variants:{orientation:{vertical:[`overflow-y-auto`,...Cu],horizontal:[`overflow-x-auto`,...wu]},hideScrollBar:{true:`scrollbar-hide`,false:``}},defaultVariants:{orientation:`vertical`,hideScrollBar:!1}}),Eu=du({slots:{base:[`group inline-flex flex-col relative`],label:[`block`,`absolute`,`z-10`,`origin-top-left`,`flex-shrink-0`,`rtl:origin-top-right`,`subpixel-antialiased`,`text-small`,`text-foreground-500`,`pointer-events-none`,`group-data-[has-label-outside=true]:pointer-events-auto`],mainWrapper:`w-full flex flex-col`,trigger:`relative px-3 gap-3 w-full inline-flex flex-row items-center shadow-xs outline-solid outline-transparent tap-highlight-transparent`,innerWrapper:`inline-flex h-fit w-[calc(100%_-theme(spacing.6))] min-h-4 items-center gap-1.5 box-border`,selectorIcon:`absolute end-3 w-4 h-4`,spinner:`absolute end-3`,value:[`text-foreground-500`,`font-normal`,`w-full`,`text-start`],listboxWrapper:`scroll-py-6 w-full`,listbox:``,popoverContent:`w-full p-1 overflow-hidden`,clearButton:[`w-4`,`h-4`,`z-10`,`mb-4`,`relative`,`start-auto`,`appearance-none`,`outline-none`,`select-none`,`opacity-70`,`hover:!opacity-100`,`cursor-pointer`,`active:!opacity-70`,`rounded-full`,...pu],helperWrapper:`p-1 flex relative flex-col gap-1.5 group-data-[has-helper=true]:flex`,description:`text-tiny text-foreground-400`,errorMessage:`text-tiny text-danger`,endWrapper:`flex end-18`,endContent:`mb-4`},variants:{variant:{flat:{trigger:[`bg-default-100`,`data-[hover=true]:bg-default-200`,`group-data-[focus=true]:bg-default-200`],clearButton:`mb-4`},faded:{trigger:[`bg-default-100`,`border-medium`,`border-default-200`,`data-[hover=true]:border-default-400 data-[focus=true]:border-default-400 data-[open=true]:border-default-400`],value:`group-data-[has-value=true]:text-default-foreground`,clearButton:`mb-4`},bordered:{trigger:[`border-medium`,`border-default-200`,`data-[hover=true]:border-default-400`,`data-[open=true]:border-default-foreground`,`data-[focus=true]:border-default-foreground`],value:`group-data-[has-value=true]:text-default-foreground`,clearButton:`mb-4`},underlined:{trigger:[`!px-1`,`!pb-0`,`!gap-0`,`relative`,`box-border`,`border-b-medium`,`shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]`,`border-default-200`,`!rounded-none`,`hover:border-default-300`,`after:content-['']`,`after:w-0`,`after:origin-center`,`after:bg-default-foreground`,`after:absolute`,`after:left-1/2`,`after:-translate-x-1/2`,`after:-bottom-[2px]`,`after:h-[2px]`,`data-[open=true]:after:w-full`,`data-[focus=true]:after:w-full`],value:`group-data-[has-value=true]:text-default-foreground`,clearButton:`mb-4 me-2`}},color:{default:{},primary:{selectorIcon:`text-primary`},secondary:{selectorIcon:`text-secondary`},success:{selectorIcon:`text-success`},warning:{selectorIcon:`text-warning`},danger:{selectorIcon:`text-danger`}},size:{sm:{label:`text-tiny`,trigger:`h-8 min-h-8 px-2 rounded-small`,value:`text-small`,clearButton:`text-medium`},md:{trigger:`h-10 min-h-10 rounded-medium`,value:`text-small`,clearButton:`text-large`},lg:{trigger:`h-12 min-h-12 rounded-large`,value:`text-medium`,clearButton:`mb-5 text-large`}},radius:{none:{trigger:`rounded-none`},sm:{trigger:`rounded-small`},md:{trigger:`rounded-medium`},lg:{trigger:`rounded-large`},full:{trigger:`rounded-full`}},labelPlacement:{outside:{base:`flex flex-col`,clearButton:`mb-0`},"outside-left":{base:`flex-row items-center flex-nowrap data-[has-helper=true]:items-start`,label:`relative pe-2 text-foreground`,clearButton:`mb-0`},inside:{label:`text-tiny cursor-pointer`,trigger:`flex-col items-start justify-center gap-0`}},fullWidth:{true:{base:`w-full`},false:{base:`min-w-40`}},isClearable:{true:{clearButton:`peer-data-[filled=true]:opacity-70 peer-data-[filled=true]:block`,endContent:`ms-3`}},isDisabled:{true:{base:`opacity-disabled pointer-events-none`,trigger:`pointer-events-none`}},isInvalid:{true:{label:`!text-danger`,value:`!text-danger`,selectorIcon:`text-danger`}},isRequired:{true:{label:`after:content-['*'] after:text-danger after:ms-0.5`}},isMultiline:{true:{label:`relative`,trigger:`!h-auto`},false:{value:`truncate`}},disableAnimation:{true:{trigger:`after:transition-none`,base:`transition-none`,label:`transition-none`,selectorIcon:`transition-none`},false:{base:`transition-background motion-reduce:transition-none !duration-150`,label:[`will-change-auto`,`origin-top-left`,`rtl:origin-top-right`,`!duration-200`,`!ease-out`,`transition-[transform,color,left,opacity,translate,scale]`,`motion-reduce:transition-none`],selectorIcon:`transition-transform duration-150 ease motion-reduce:transition-none`,clearButton:[`transition-opacity`,`motion-reduce:transition-none`]}},disableSelectorIconRotation:{true:{},false:{selectorIcon:`data-[open=true]:rotate-180`}}},defaultVariants:{variant:`flat`,color:`default`,size:`md`,fullWidth:!0,isDisabled:!1,isMultiline:!1,disableSelectorIconRotation:!1},compoundVariants:[{variant:`flat`,color:`default`,class:{value:`group-data-[has-value=true]:text-default-foreground`,trigger:[`bg-default-100`,`data-[hover=true]:bg-default-200`]}},{variant:`flat`,color:`primary`,class:{trigger:[`bg-primary-100`,`text-primary`,`data-[hover=true]:bg-primary-50`,`group-data-[focus=true]:bg-primary-50`],value:`text-primary`,label:`text-primary`}},{variant:`flat`,color:`secondary`,class:{trigger:[`bg-secondary-100`,`text-secondary`,`data-[hover=true]:bg-secondary-50`,`group-data-[focus=true]:bg-secondary-50`],value:`text-secondary`,label:`text-secondary`}},{variant:`flat`,color:`success`,class:{trigger:[`bg-success-100`,`text-success-600`,`dark:text-success`,`data-[hover=true]:bg-success-50`,`group-data-[focus=true]:bg-success-50`],value:`text-success-600 dark:text-success`,label:`text-success-600 dark:text-success`}},{variant:`flat`,color:`warning`,class:{trigger:[`bg-warning-100`,`text-warning-600`,`dark:text-warning`,`data-[hover=true]:bg-warning-50`,`group-data-[focus=true]:bg-warning-50`],value:`text-warning-600 dark:text-warning`,label:`text-warning-600 dark:text-warning`}},{variant:`flat`,color:`danger`,class:{trigger:[`bg-danger-100`,`text-danger`,`dark:text-danger-500`,`data-[hover=true]:bg-danger-50`,`group-data-[focus=true]:bg-danger-50`],value:`text-danger dark:text-danger-500`,label:`text-danger dark:text-danger-500`}},{variant:`faded`,color:`primary`,class:{trigger:`data-[hover=true]:border-primary data-[focus=true]:border-primary data-[open=true]:border-primary`,label:`text-primary`}},{variant:`faded`,color:`secondary`,class:{trigger:`data-[hover=true]:border-secondary data-[focus=true]:border-secondary data-[open=true]:border-secondary`,label:`text-secondary`}},{variant:`faded`,color:`success`,class:{trigger:`data-[hover=true]:border-success data-[focus=true]:border-success data-[open=true]:border-success`,label:`text-success`}},{variant:`faded`,color:`warning`,class:{trigger:`data-[hover=true]:border-warning data-[focus=true]:border-warning data-[open=true]:border-warning`,label:`text-warning`}},{variant:`faded`,color:`danger`,class:{trigger:`data-[hover=true]:border-danger data-[focus=true]:border-danger data-[open=true]:border-danger`,label:`text-danger`}},{variant:`underlined`,color:`default`,class:{value:`group-data-[has-value=true]:text-foreground`}},{variant:`underlined`,color:`primary`,class:{trigger:`after:bg-primary`,label:`text-primary`}},{variant:`underlined`,color:`secondary`,class:{trigger:`after:bg-secondary`,label:`text-secondary`}},{variant:`underlined`,color:`success`,class:{trigger:`after:bg-success`,label:`text-success`}},{variant:`underlined`,color:`warning`,class:{trigger:`after:bg-warning`,label:`text-warning`}},{variant:`underlined`,color:`danger`,class:{trigger:`after:bg-danger`,label:`text-danger`}},{variant:`bordered`,color:`primary`,class:{trigger:[`data-[open=true]:border-primary`,`data-[focus=true]:border-primary`],label:`text-primary`}},{variant:`bordered`,color:`secondary`,class:{trigger:[`data-[open=true]:border-secondary`,`data-[focus=true]:border-secondary`],label:`text-secondary`}},{variant:`bordered`,color:`success`,class:{trigger:[`data-[open=true]:border-success`,`data-[focus=true]:border-success`],label:`text-success`}},{variant:`bordered`,color:`warning`,class:{trigger:[`data-[open=true]:border-warning`,`data-[focus=true]:border-warning`],label:`text-warning`}},{variant:`bordered`,color:`danger`,class:{trigger:[`data-[open=true]:border-danger`,`data-[focus=true]:border-danger`],label:`text-danger`}},{labelPlacement:`inside`,color:`default`,class:{label:`group-data-[filled=true]:text-default-600`}},{labelPlacement:`outside`,color:`default`,class:{label:`group-data-[filled=true]:text-foreground`}},{radius:`full`,size:[`sm`],class:{trigger:`px-3`}},{radius:`full`,size:`md`,class:{trigger:`px-4`}},{radius:`full`,size:`lg`,class:{trigger:`px-5`}},{disableAnimation:!1,variant:[`faded`,`bordered`],class:{trigger:`transition-colors motion-reduce:transition-none`}},{disableAnimation:!1,variant:`underlined`,class:{trigger:`after:transition-width motion-reduce:after:transition-none`}},{variant:[`flat`,`faded`],class:{trigger:[...pu]}},{isInvalid:!0,variant:`flat`,class:{trigger:[`bg-danger-50`,`data-[hover=true]:bg-danger-100`,`group-data-[focus=true]:bg-danger-50`]}},{isInvalid:!0,variant:`bordered`,class:{trigger:`!border-danger group-data-[focus=true]:border-danger`}},{isInvalid:!0,variant:`underlined`,class:{trigger:`after:bg-danger`}},{labelPlacement:`inside`,size:`sm`,class:{trigger:`h-12 min-h-12 py-1.5 px-3`}},{labelPlacement:`inside`,size:`md`,class:{trigger:`h-14 min-h-14 py-2`}},{labelPlacement:`inside`,size:`lg`,class:{label:`text-medium`,trigger:`h-16 min-h-16 py-2.5 gap-0`}},{labelPlacement:`outside`,isMultiline:!1,class:{base:`group relative justify-end`,label:[`pb-0`,`z-20`,`top-1/2`,`-translate-y-1/2`,`group-data-[filled=true]:start-0`]}},{labelPlacement:[`inside`],class:{label:`group-data-[filled=true]:scale-85`}},{labelPlacement:`inside`,size:[`sm`,`md`],class:{label:`text-small`}},{labelPlacement:`inside`,isMultiline:!1,size:`sm`,class:{label:[`group-data-[filled=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-tiny)/2_-_8px)]`],innerWrapper:`group-data-[has-label=true]:pt-4`}},{labelPlacement:`inside`,isMultiline:!1,size:`md`,class:{label:[`group-data-[filled=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_6px)]`],innerWrapper:`group-data-[has-label=true]:pt-4`}},{labelPlacement:`inside`,isMultiline:!1,size:`lg`,class:{label:[`text-medium`,`group-data-[filled=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_8px)]`],innerWrapper:`group-data-[has-label=true]:pt-5`}},{labelPlacement:`inside`,variant:[`faded`,`bordered`],isMultiline:!1,size:`sm`,class:{label:[`group-data-[filled=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-tiny)/2_-_8px_-_var(--heroui-border-width-medium))]`]}},{labelPlacement:`inside`,variant:[`faded`,`bordered`],isMultiline:!1,size:`md`,class:{label:[`group-data-[filled=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_6px_-_var(--heroui-border-width-medium))]`]}},{labelPlacement:`inside`,variant:[`faded`,`bordered`],isMultiline:!1,size:`lg`,class:{label:[`text-medium`,`group-data-[filled=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_8px_-_var(--heroui-border-width-medium))]`]}},{labelPlacement:`inside`,variant:`underlined`,isMultiline:!1,size:`sm`,class:{label:[`group-data-[filled=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-tiny)/2_-_5px)]`]}},{labelPlacement:`inside`,variant:`underlined`,isMultiline:!1,size:`md`,class:{label:[`group-data-[filled=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_3.5px)]`]}},{labelPlacement:`inside`,variant:`underlined`,isMultiline:!1,size:`lg`,class:{label:[`text-medium`,`group-data-[filled=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_4px)]`]}},{labelPlacement:`outside`,size:`sm`,isMultiline:!1,class:{label:[`start-2`,`text-tiny`,`group-data-[filled=true]:-translate-y-[calc(100%_+var(--heroui-font-size-tiny)/2_+_16px)]`,`group-data-[has-helper=true]:-translate-y-[calc(100%_+_var(--heroui-font-size-small)/2_+_26px)]`],base:`data-[has-label=true]:mt-[calc(var(--heroui-font-size-small)_+_8px)]`}},{labelPlacement:`outside`,isMultiline:!1,size:`md`,class:{label:[`start-3`,`text-small`,`group-data-[filled=true]:-translate-y-[calc(100%_+_var(--heroui-font-size-small)/2_+_20px)]`,`group-data-[has-helper=true]:-translate-y-[calc(100%_+_var(--heroui-font-size-small)/2_+_30px)]`],base:`data-[has-label=true]:mt-[calc(var(--heroui-font-size-small)_+_10px)]`}},{labelPlacement:`outside`,isMultiline:!1,size:`lg`,class:{label:[`start-3`,`text-medium`,`group-data-[filled=true]:-translate-y-[calc(100%_+_var(--heroui-font-size-small)/2_+_24px)]`,`group-data-[has-helper=true]:-translate-y-[calc(100%_+_var(--heroui-font-size-small)/2_+_34px)]`],base:`data-[has-label=true]:mt-[calc(var(--heroui-font-size-small)_+_12px)]`}},{labelPlacement:`outside-left`,size:`sm`,class:{label:`group-data-[has-helper=true]:pt-2`}},{labelPlacement:`outside-left`,size:`md`,class:{label:`group-data-[has-helper=true]:pt-3`}},{labelPlacement:`outside-left`,size:`lg`,class:{label:`group-data-[has-helper=true]:pt-4`}},{labelPlacement:`outside`,isMultiline:!0,class:{label:`pb-1.5`}},{labelPlacement:[`inside`,`outside`],class:{label:[`pe-2`,`max-w-full`,`text-ellipsis`,`overflow-hidden`]}},{labelPlacement:[`outside`,`outside-left`],isClearable:!0,class:{endContent:[`mt-4`],clearButton:[`group-data-[has-end-content=true]:mt-4`]}},{isClearable:!1,labelPlacement:[`outside`,`outside-left`],class:{endContent:[`mt-4`]}},{isClearable:!0,variant:[`underlined`],class:{clearButton:[`relative group-data-[has-end-content=true]:left-2`],endContent:[`me-2`]}},{isClearable:!1,variant:[`underlined`],class:{endContent:[`me-2`]}},{isClearable:!0,size:`sm`,class:{endContent:`ms-2`}}]}),Du=du({slots:{base:`group flex flex-col data-[hidden=true]:hidden`,label:[`absolute`,`z-10`,`pointer-events-none`,`origin-top-left`,`shrink-0`,`rtl:origin-top-right`,`subpixel-antialiased`,`block`,`text-small`,`text-foreground-500`],mainWrapper:`h-full`,inputWrapper:`relative w-full inline-flex tap-highlight-transparent flex-row items-center shadow-xs px-3 gap-3`,innerWrapper:`inline-flex w-full items-center h-full box-border`,input:[`w-full font-normal bg-transparent !outline-solid outline-transparent placeholder:text-foreground-500 focus-visible:outline-solid outline-transparent`,`data-[has-start-content=true]:ps-1.5`,`data-[has-end-content=true]:pe-1.5`,`data-[type=color]:rounded-none`,`file:cursor-pointer file:bg-transparent file:border-0`,`autofill:bg-transparent bg-clip-text`],clearButton:[`p-2`,`-m-2`,`z-10`,`absolute`,`end-3`,`start-auto`,`pointer-events-none`,`appearance-none`,`outline-solid outline-transparent`,`select-none`,`opacity-0`,`cursor-pointer`,`active:!opacity-70`,`rounded-full`,...pu],helperWrapper:`hidden group-data-[has-helper=true]:flex p-1 relative flex-col gap-1.5`,description:`text-tiny text-foreground-400`,errorMessage:`text-tiny text-danger`},variants:{variant:{flat:{inputWrapper:[`bg-default-100`,`data-[hover=true]:bg-default-200`,`group-data-[focus=true]:bg-default-100`]},faded:{inputWrapper:[`bg-default-100`,`border-medium`,`border-default-200`,`data-[hover=true]:border-default-400 focus-within:border-default-400`],value:`group-data-[has-value=true]:text-default-foreground`},bordered:{inputWrapper:[`border-medium`,`border-default-200`,`data-[hover=true]:border-default-400`,`group-data-[focus=true]:border-default-foreground`]},underlined:{inputWrapper:[`!px-1`,`!pb-0`,`!gap-0`,`relative`,`box-border`,`border-b-medium`,`shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]`,`border-default-200`,`!rounded-none`,`hover:border-default-300`,`after:content-['']`,`after:w-0`,`after:origin-center`,`after:bg-default-foreground`,`after:absolute`,`after:left-1/2`,`after:-translate-x-1/2`,`after:-bottom-[2px]`,`after:h-[2px]`,`group-data-[focus=true]:after:w-full`],innerWrapper:`pb-1`,label:`group-data-[filled-within=true]:text-foreground`}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{label:`text-tiny`,inputWrapper:`h-8 min-h-8 px-2 rounded-small`,input:`text-small`,clearButton:`text-medium`},md:{inputWrapper:`h-10 min-h-10 rounded-medium`,input:`text-small`,clearButton:`text-large hover:!opacity-100`},lg:{label:`text-medium`,inputWrapper:`h-12 min-h-12 rounded-large`,input:`text-medium`,clearButton:`text-large hover:!opacity-100`}},radius:{none:{inputWrapper:`rounded-none`},sm:{inputWrapper:`rounded-small`},md:{inputWrapper:`rounded-medium`},lg:{inputWrapper:`rounded-large`},full:{inputWrapper:`rounded-full`}},labelPlacement:{outside:{mainWrapper:`flex flex-col`},"outside-left":{base:`flex-row items-center flex-nowrap data-[has-helper=true]:items-start`,inputWrapper:`flex-1`,mainWrapper:`flex flex-col`,label:`relative text-foreground pe-2 ps-2 pointer-events-auto`},"outside-top":{mainWrapper:`flex flex-col`,label:`relative text-foreground pb-2 pointer-events-auto`},inside:{label:`cursor-text`,inputWrapper:`flex-col items-start justify-center gap-0`,innerWrapper:`group-data-[has-label=true]:items-end`}},fullWidth:{true:{base:`w-full`},false:{}},isClearable:{true:{input:`peer pe-6 input-search-cancel-button-none`,clearButton:[`peer-data-[filled=true]:pointer-events-auto`,`peer-data-[filled=true]:opacity-70 peer-data-[filled=true]:block`,`peer-data-[filled=true]:scale-100`]}},isDisabled:{true:{base:`opacity-disabled pointer-events-none`,inputWrapper:`pointer-events-none`,label:`pointer-events-none`}},isInvalid:{true:{label:`!text-danger`,input:`!placeholder:text-danger !text-danger`}},isRequired:{true:{label:`after:content-['*'] after:text-danger after:ms-0.5`}},isMultiline:{true:{label:`relative`,inputWrapper:`!h-auto`,innerWrapper:`items-start group-data-[has-label=true]:items-start`,input:`resize-none data-[hide-scroll=true]:scrollbar-hide`,clearButton:`absolute top-2 right-2 rtl:right-auto rtl:left-2 z-10`}},disableAnimation:{true:{input:`transition-none`,inputWrapper:`transition-none`,label:`transition-none`},false:{inputWrapper:`transition-background motion-reduce:transition-none !duration-150`,label:[`will-change-auto`,`!duration-200`,`!ease-out`,`motion-reduce:transition-none`,`transition-[transform,color,left,opacity,translate,scale]`],clearButton:[`scale-90`,`ease-out`,`duration-150`,`transition-[opacity,transform]`,`motion-reduce:transition-none`,`motion-reduce:scale-100`]}}},defaultVariants:{variant:`flat`,color:`default`,size:`md`,fullWidth:!0,isDisabled:!1,isMultiline:!1},compoundVariants:[{variant:`flat`,color:`default`,class:{input:`group-data-[has-value=true]:text-default-foreground`}},{variant:`flat`,color:`primary`,class:{inputWrapper:[`bg-primary-100`,`data-[hover=true]:bg-primary-50`,`text-primary`,`group-data-[focus=true]:bg-primary-50`,`placeholder:text-primary`],input:`placeholder:text-primary`,label:`text-primary`}},{variant:`flat`,color:`secondary`,class:{inputWrapper:[`bg-secondary-100`,`text-secondary`,`data-[hover=true]:bg-secondary-50`,`group-data-[focus=true]:bg-secondary-50`,`placeholder:text-secondary`],input:`placeholder:text-secondary`,label:`text-secondary`}},{variant:`flat`,color:`success`,class:{inputWrapper:[`bg-success-100`,`text-success-600`,`dark:text-success`,`placeholder:text-success-600`,`dark:placeholder:text-success`,`data-[hover=true]:bg-success-50`,`group-data-[focus=true]:bg-success-50`],input:`placeholder:text-success-600 dark:placeholder:text-success`,label:`text-success-600 dark:text-success`}},{variant:`flat`,color:`warning`,class:{inputWrapper:[`bg-warning-100`,`text-warning-600`,`dark:text-warning`,`placeholder:text-warning-600`,`dark:placeholder:text-warning`,`data-[hover=true]:bg-warning-50`,`group-data-[focus=true]:bg-warning-50`],input:`placeholder:text-warning-600 dark:placeholder:text-warning`,label:`text-warning-600 dark:text-warning`}},{variant:`flat`,color:`danger`,class:{inputWrapper:[`bg-danger-100`,`text-danger`,`dark:text-danger-500`,`placeholder:text-danger`,`dark:placeholder:text-danger-500`,`data-[hover=true]:bg-danger-50`,`group-data-[focus=true]:bg-danger-50`],input:`placeholder:text-danger dark:placeholder:text-danger-500`,label:`text-danger dark:text-danger-500`}},{variant:`faded`,color:`primary`,class:{label:`text-primary`,inputWrapper:`data-[hover=true]:border-primary focus-within:border-primary`}},{variant:`faded`,color:`secondary`,class:{label:`text-secondary`,inputWrapper:`data-[hover=true]:border-secondary focus-within:border-secondary`}},{variant:`faded`,color:`success`,class:{label:`text-success`,inputWrapper:`data-[hover=true]:border-success focus-within:border-success`}},{variant:`faded`,color:`warning`,class:{label:`text-warning`,inputWrapper:`data-[hover=true]:border-warning focus-within:border-warning`}},{variant:`faded`,color:`danger`,class:{label:`text-danger`,inputWrapper:`data-[hover=true]:border-danger focus-within:border-danger`}},{variant:`underlined`,color:`default`,class:{input:`group-data-[has-value=true]:text-foreground`}},{variant:`underlined`,color:`primary`,class:{inputWrapper:`after:bg-primary`,label:`text-primary`}},{variant:`underlined`,color:`secondary`,class:{inputWrapper:`after:bg-secondary`,label:`text-secondary`}},{variant:`underlined`,color:`success`,class:{inputWrapper:`after:bg-success`,label:`text-success`}},{variant:`underlined`,color:`warning`,class:{inputWrapper:`after:bg-warning`,label:`text-warning`}},{variant:`underlined`,color:`danger`,class:{inputWrapper:`after:bg-danger`,label:`text-danger`}},{variant:`bordered`,color:`primary`,class:{inputWrapper:`group-data-[focus=true]:border-primary`,label:`text-primary`}},{variant:`bordered`,color:`secondary`,class:{inputWrapper:`group-data-[focus=true]:border-secondary`,label:`text-secondary`}},{variant:`bordered`,color:`success`,class:{inputWrapper:`group-data-[focus=true]:border-success`,label:`text-success`}},{variant:`bordered`,color:`warning`,class:{inputWrapper:`group-data-[focus=true]:border-warning`,label:`text-warning`}},{variant:`bordered`,color:`danger`,class:{inputWrapper:`group-data-[focus=true]:border-danger`,label:`text-danger`}},{labelPlacement:`inside`,color:`default`,class:{label:`group-data-[filled-within=true]:text-default-600`}},{labelPlacement:`outside`,color:`default`,class:{label:`group-data-[filled-within=true]:text-foreground`}},{radius:`full`,size:[`sm`],class:{inputWrapper:`px-3`}},{radius:`full`,size:`md`,class:{inputWrapper:`px-4`}},{radius:`full`,size:`lg`,class:{inputWrapper:`px-5`}},{disableAnimation:!1,variant:[`faded`,`bordered`],class:{inputWrapper:`transition-colors motion-reduce:transition-none`}},{disableAnimation:!1,variant:`underlined`,class:{inputWrapper:`after:transition-width motion-reduce:after:transition-none`}},{variant:[`flat`,`faded`],class:{inputWrapper:[...mu]}},{isInvalid:!0,variant:`flat`,class:{inputWrapper:[`!bg-danger-50`,`data-[hover=true]:!bg-danger-100`,`group-data-[focus=true]:!bg-danger-50`]}},{isInvalid:!0,variant:`bordered`,class:{inputWrapper:`!border-danger group-data-[focus=true]:!border-danger`}},{isInvalid:!0,variant:`underlined`,class:{inputWrapper:`after:!bg-danger`}},{labelPlacement:`inside`,size:`sm`,class:{inputWrapper:`h-12 py-1.5 px-3`}},{labelPlacement:`inside`,size:`md`,class:{inputWrapper:`h-14 py-2`}},{labelPlacement:`inside`,size:`lg`,class:{inputWrapper:`h-16 py-2.5 gap-0`}},{labelPlacement:`inside`,size:`sm`,variant:[`bordered`,`faded`],class:{inputWrapper:`py-1`}},{labelPlacement:[`inside`,`outside`],class:{label:[`group-data-[filled-within=true]:pointer-events-auto`]}},{labelPlacement:`outside`,isMultiline:!1,class:{base:`relative justify-end`,label:[`pb-0`,`z-20`,`top-1/2`,`-translate-y-1/2`,`group-data-[filled-within=true]:start-0`]}},{labelPlacement:[`inside`],class:{label:[`group-data-[filled-within=true]:scale-85`]}},{labelPlacement:[`inside`],variant:`flat`,class:{innerWrapper:`pb-0.5`}},{variant:`underlined`,size:`sm`,class:{innerWrapper:`pb-1`}},{variant:`underlined`,size:[`md`,`lg`],class:{innerWrapper:`pb-1.5`}},{labelPlacement:`inside`,size:[`sm`,`md`],class:{label:`text-small`}},{labelPlacement:`inside`,isMultiline:!1,size:`sm`,class:{label:[`group-data-[filled-within=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-tiny)/2_-_8px)]`]}},{labelPlacement:`inside`,isMultiline:!1,size:`md`,class:{label:[`group-data-[filled-within=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_6px)]`]}},{labelPlacement:`inside`,isMultiline:!1,size:`lg`,class:{label:[`text-medium`,`group-data-[filled-within=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_8px)]`]}},{labelPlacement:`inside`,variant:[`faded`,`bordered`],isMultiline:!1,size:`sm`,class:{label:[`group-data-[filled-within=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-tiny)/2_-_8px_-_var(--heroui-border-width-medium))]`]}},{labelPlacement:`inside`,variant:[`faded`,`bordered`],isMultiline:!1,size:`md`,class:{label:[`group-data-[filled-within=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_6px_-_var(--heroui-border-width-medium))]`]}},{labelPlacement:`inside`,variant:[`faded`,`bordered`],isMultiline:!1,size:`lg`,class:{label:[`text-medium`,`group-data-[filled-within=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_8px_-_var(--heroui-border-width-medium))]`]}},{labelPlacement:`inside`,variant:`underlined`,isMultiline:!1,size:`sm`,class:{label:[`group-data-[filled-within=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-tiny)/2_-_5px)]`]}},{labelPlacement:`inside`,variant:`underlined`,isMultiline:!1,size:`md`,class:{label:[`group-data-[filled-within=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_3.5px)]`]}},{labelPlacement:`inside`,variant:`underlined`,size:`lg`,isMultiline:!1,class:{label:[`text-medium`,`group-data-[filled-within=true]:-translate-y-[calc(50%_+_var(--heroui-font-size-small)/2_-_4px)]`]}},{labelPlacement:`outside`,size:`sm`,isMultiline:!1,class:{label:[`start-2`,`text-tiny`,`group-data-[filled-within=true]:-translate-y-[calc(100%_+_var(--heroui-font-size-tiny)/2_+_16px)]`],base:`data-[has-label=true]:mt-[calc(var(--heroui-font-size-small)_+_8px)]`}},{labelPlacement:`outside`,size:`md`,isMultiline:!1,class:{label:[`start-3`,`end-auto`,`text-small`,`group-data-[filled-within=true]:-translate-y-[calc(100%_+_var(--heroui-font-size-small)/2_+_20px)]`],base:`data-[has-label=true]:mt-[calc(var(--heroui-font-size-small)_+_10px)]`}},{labelPlacement:`outside`,size:`lg`,isMultiline:!1,class:{label:[`start-3`,`end-auto`,`text-medium`,`group-data-[filled-within=true]:-translate-y-[calc(100%_+_var(--heroui-font-size-small)/2_+_24px)]`],base:`data-[has-label=true]:mt-[calc(var(--heroui-font-size-small)_+_12px)]`}},{labelPlacement:`outside-left`,size:`sm`,class:{label:`group-data-[has-helper=true]:pt-2`}},{labelPlacement:`outside-left`,size:`md`,class:{label:`group-data-[has-helper=true]:pt-3`}},{labelPlacement:`outside-left`,size:`lg`,class:{label:`group-data-[has-helper=true]:pt-4`}},{labelPlacement:[`outside`,`outside-left`],isMultiline:!0,class:{inputWrapper:`py-2`}},{labelPlacement:`outside`,isMultiline:!0,class:{label:`pb-1.5`}},{labelPlacement:`inside`,isMultiline:!0,class:{label:`pb-0.5`,input:`pt-0`}},{isMultiline:!0,disableAnimation:!1,class:{input:`transition-height !duration-100 motion-reduce:transition-none`}},{labelPlacement:[`inside`,`outside`],class:{label:[`pe-2`,`max-w-full`,`text-ellipsis`,`overflow-hidden`]}},{isMultiline:!0,radius:`full`,class:{inputWrapper:`data-[has-multiple-rows=true]:rounded-large`}},{isClearable:!0,isMultiline:!0,class:{clearButton:[`group-data-[has-value=true]:opacity-70 group-data-[has-value=true]:block`,`group-data-[has-value=true]:scale-100`,`group-data-[has-value=true]:pointer-events-auto`]}},{isClearable:!0,isDisabled:!0,class:{clearButton:`peer-data-[filled=true]:pointer-events-none`}}]}),Ou=du({base:[`relative inline-flex items-center outline-solid outline-transparent tap-highlight-transparent`,...pu],variants:{size:{sm:`text-small`,md:`text-medium`,lg:`text-large`},color:{foreground:`text-foreground`,primary:`text-primary`,secondary:`text-secondary`,success:`text-success`,warning:`text-warning`,danger:`text-danger`},underline:{none:`no-underline`,hover:`hover:underline`,always:`underline`,active:`active:underline`,focus:`focus:underline`},isBlock:{true:[`px-2`,`py-1`,`hover:after:opacity-100`,`after:content-['']`,`after:inset-0`,`after:opacity-0`,`after:w-full`,`after:h-full`,`after:rounded-xl`,`after:transition-background`,`after:absolute`],false:`hover:opacity-hover active:opacity-disabled transition-opacity`},isDisabled:{true:`opacity-disabled cursor-default pointer-events-none`},disableAnimation:{true:`after:transition-none transition-none`}},compoundVariants:[{isBlock:!0,color:`foreground`,class:`hover:after:bg-foreground/10`},{isBlock:!0,color:`primary`,class:`hover:after:bg-primary/20`},{isBlock:!0,color:`secondary`,class:`hover:after:bg-secondary/20`},{isBlock:!0,color:`success`,class:`hover:after:bg-success/20`},{isBlock:!0,color:`warning`,class:`hover:after:bg-warning/20`},{isBlock:!0,color:`danger`,class:`hover:after:bg-danger/20`},{underline:[`hover`,`always`,`active`,`focus`],class:`underline-offset-4`}],defaultVariants:{color:`primary`,size:`md`,isBlock:!1,underline:`none`,isDisabled:!1}}),ku=`flex mx-1 text-current self-center`,Au=du({slots:{base:`w-full relative flex flex-col gap-1 p-1 overflow-clip`,list:`w-full flex flex-col gap-0.5 outline-solid outline-transparent`,emptyContent:[`h-10`,`px-2`,`py-1.5`,`w-full`,`h-full`,`text-foreground-400`,`text-start`]}}),ju=du({slots:{base:[`flex`,`group`,`gap-2`,`items-center`,`justify-between`,`relative`,`px-2`,`py-1.5`,`w-full`,`h-full`,`box-border`,`rounded-small`,`subpixel-antialiased`,`outline-solid outline-transparent`,`cursor-pointer`,`tap-highlight-transparent`,...pu,`data-[focus-visible=true]:dark:ring-offset-background-content1`],wrapper:`w-full flex flex-col items-start justify-center min-w-0`,title:`flex-1 text-small font-normal w-full`,description:[`w-full`,`text-tiny`,`text-foreground-500`,`group-hover:text-current`],selectedIcon:[`text-inherit`,`w-3`,`h-3`,`shrink-0`],shortcut:[`px-1`,`py-0.5`,`rounded-sm`,`font-sans`,`text-foreground-500`,`text-tiny`,`border-small`,`border-default-300`,`group-hover:border-current`]},variants:{variant:{solid:{base:``},bordered:{base:`border-medium border-transparent bg-transparent`},light:{base:`bg-transparent`},faded:{base:[`border-small border-transparent hover:border-default data-[hover=true]:bg-default-100`,`data-[selectable=true]:focus:border-default data-[selectable=true]:focus:bg-default-100`]},flat:{base:``},shadow:{base:`data-[hover=true]:shadow-lg`}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},showDivider:{true:{base:[`mb-1.5`,`after:content-['']`,`after:absolute`,`after:-bottom-1`,`after:left-0`,`after:right-0`,`after:h-divider`,`after:bg-divider`]},false:{}},isDisabled:{true:{base:`opacity-disabled pointer-events-none`}},disableAnimation:{true:{},false:{base:`data-[hover=true]:transition-colors`}},hasTitleTextChild:{true:{title:`truncate`}},hasDescriptionTextChild:{true:{description:`truncate`}}},defaultVariants:{variant:`solid`,color:`default`,showDivider:!1},compoundVariants:[{variant:`solid`,color:`default`,class:{base:[`data-[hover=true]:bg-default`,`data-[hover=true]:text-default-foreground`,`data-[selectable=true]:focus:bg-default`,`data-[selectable=true]:focus:text-default-foreground`]}},{variant:`solid`,color:`primary`,class:{base:[`data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground`,`data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground`]}},{variant:`solid`,color:`secondary`,class:{base:[`data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground`,`data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground`]}},{variant:`solid`,color:`success`,class:{base:[`data-[hover=true]:bg-success data-[hover=true]:text-success-foreground`,`data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground`]}},{variant:`solid`,color:`warning`,class:{base:[`data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground`,`data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground`]}},{variant:`solid`,color:`danger`,class:{base:[`data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground`,`data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground`]}},{variant:`shadow`,color:`default`,class:{base:[`data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground`,`data-[selectable=true]:focus:shadow-default/50 data-[selectable=true]:focus:bg-default data-[selectable=true]:focus:text-default-foreground`]}},{variant:`shadow`,color:`primary`,class:{base:[`data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground`,`data-[selectable=true]:focus:shadow-primary/30 data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground`]}},{variant:`shadow`,color:`secondary`,class:{base:[`data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground`,`data-[selectable=true]:focus:shadow-secondary/30 data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground`]}},{variant:`shadow`,color:`success`,class:{base:[`data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground`,`data-[selectable=true]:focus:shadow-success/30 data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground`]}},{variant:`shadow`,color:`warning`,class:{base:[`data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground`,`data-[selectable=true]:focus:shadow-warning/30 data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground`]}},{variant:`shadow`,color:`danger`,class:{base:[`data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground`,`data-[selectable=true]:focus:shadow-danger/30 data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground`]}},{variant:`bordered`,color:`default`,class:{base:[`data-[hover=true]:border-default`,`data-[selectable=true]:focus:border-default`]}},{variant:`bordered`,color:`primary`,class:{base:[`data-[hover=true]:border-primary data-[hover=true]:text-primary`,`data-[selectable=true]:focus:border-primary data-[selectable=true]:focus:text-primary`]}},{variant:`bordered`,color:`secondary`,class:{base:[`data-[hover=true]:border-secondary data-[hover=true]:text-secondary`,`data-[selectable=true]:focus:border-secondary data-[selectable=true]:focus:text-secondary`]}},{variant:`bordered`,color:`success`,class:{base:[`data-[hover=true]:border-success data-[hover=true]:text-success`,`data-[selectable=true]:focus:border-success data-[selectable=true]:focus:text-success`]}},{variant:`bordered`,color:`warning`,class:{base:[`data-[hover=true]:border-warning data-[hover=true]:text-warning`,`data-[selectable=true]:focus:border-warning data-[selectable=true]:focus:text-warning`]}},{variant:`bordered`,color:`danger`,class:{base:[`data-[hover=true]:border-danger data-[hover=true]:text-danger`,`data-[selectable=true]:focus:border-danger data-[selectable=true]:focus:text-danger`]}},{variant:`flat`,color:`default`,class:{base:[`data-[hover=true]:bg-default/40`,`data-[hover=true]:text-default-foreground`,`data-[selectable=true]:focus:bg-default/40`,`data-[selectable=true]:focus:text-default-foreground`]}},{variant:`flat`,color:`primary`,class:{base:[`data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary`,`data-[selectable=true]:focus:bg-primary/20 data-[selectable=true]:focus:text-primary`]}},{variant:`flat`,color:`secondary`,class:{base:[`data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary`,`data-[selectable=true]:focus:bg-secondary/20 data-[selectable=true]:focus:text-secondary`]}},{variant:`flat`,color:`success`,class:{base:[`data-[hover=true]:bg-success/20 data-[hover=true]:text-success`,`data-[selectable=true]:focus:bg-success/20 data-[selectable=true]:focus:text-success`]}},{variant:`flat`,color:`warning`,class:{base:[`data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning`,`data-[selectable=true]:focus:bg-warning/20 data-[selectable=true]:focus:text-warning`]}},{variant:`flat`,color:`danger`,class:{base:[`data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger`,`data-[selectable=true]:focus:bg-danger/20 data-[selectable=true]:focus:text-danger`]}},{variant:`faded`,color:`default`,class:{base:[`data-[hover=true]:text-default-foreground`,`data-[selectable=true]:focus:text-default-foreground`]}},{variant:`faded`,color:`primary`,class:{base:[`data-[hover=true]:text-primary`,`data-[selectable=true]:focus:text-primary`]}},{variant:`faded`,color:`secondary`,class:{base:[`data-[hover=true]:text-secondary`,`data-[selectable=true]:focus:text-secondary`]}},{variant:`faded`,color:`success`,class:{base:[`data-[hover=true]:text-success`,`data-[selectable=true]:focus:text-success`]}},{variant:`faded`,color:`warning`,class:{base:[`data-[hover=true]:text-warning`,`data-[selectable=true]:focus:text-warning`]}},{variant:`faded`,color:`danger`,class:{base:[`data-[hover=true]:text-danger`,`data-[selectable=true]:focus:text-danger`]}},{variant:`light`,color:`default`,class:{base:[`data-[hover=true]:text-default-500`,`data-[selectable=true]:focus:text-default-500`]}},{variant:`light`,color:`primary`,class:{base:[`data-[hover=true]:text-primary`,`data-[selectable=true]:focus:text-primary`]}},{variant:`light`,color:`secondary`,class:{base:[`data-[hover=true]:text-secondary`,`data-[selectable=true]:focus:text-secondary`]}},{variant:`light`,color:`success`,class:{base:[`data-[hover=true]:text-success`,`data-[selectable=true]:focus:text-success`]}},{variant:`light`,color:`warning`,class:{base:[`data-[hover=true]:text-warning`,`data-[selectable=true]:focus:text-warning`]}},{variant:`light`,color:`danger`,class:{base:[`data-[hover=true]:text-danger`,`data-[selectable=true]:focus:text-danger`]}}]}),Mu=du({slots:{base:`relative mb-2`,heading:`pl-1 text-tiny text-foreground-500`,group:`data-[has-title=true]:pt-1`,divider:`mt-2`}}),Nu=du({slots:{base:[`flex`,`z-40`,`w-full`,`h-auto`,`items-center`,`justify-center`,`data-[menu-open=true]:border-none`],wrapper:[`z-40`,`flex`,`px-6`,`gap-4`,`w-full`,`flex-row`,`relative`,`flex-nowrap`,`items-center`,`justify-between`,`h-[var(--navbar-height)]`],toggle:[`group`,`flex`,`items-center`,`justify-center`,`w-6`,`h-full`,`outline-solid outline-transparent`,`rounded-small`,`tap-highlight-transparent`,...pu],srOnly:[`sr-only`],toggleIcon:`w-full.h-full.pointer-events-none.flex.flex-col.items-center.justify-center.text-inherit.group-data-[pressed=true]:opacity-70.transition-opacity.before:content-[''].before:block.before:h-px.before:w-6.before:bg-current.before:transition-transform.before:duration-150.before:-translate-y-1.before:rotate-0.group-data-[open=true]:before:translate-y-px.group-data-[open=true]:before:rotate-45.after:content-[''].after:block.after:h-px.after:w-6.after:bg-current.after:transition-transform.after:duration-150.after:translate-y-1.after:rotate-0.group-data-[open=true]:after:translate-y-0.group-data-[open=true]:after:-rotate-45`.split(`.`),brand:[`flex`,`basis-0`,`flex-row`,`flex-grow`,`flex-nowrap`,`justify-start`,`bg-transparent`,`items-center`,`no-underline`,`text-medium`,`whitespace-nowrap`,`box-border`],content:[`flex`,`gap-4`,`h-full`,`flex-row`,`flex-nowrap`,`items-center`,`data-[justify=start]:justify-start`,`data-[justify=start]:flex-grow`,`data-[justify=start]:basis-0`,`data-[justify=center]:justify-center`,`data-[justify=end]:justify-end`,`data-[justify=end]:flex-grow`,`data-[justify=end]:basis-0`],item:[`text-medium`,`whitespace-nowrap`,`box-border`,`list-none`,`data-[active=true]:font-semibold`],menu:[`z-30`,`px-6`,`pt-2`,`fixed`,`flex`,`max-w-full`,`top-[var(--navbar-height)]`,`inset-x-0`,`bottom-0`,`w-screen`,`flex-col`,`gap-2`,`overflow-y-auto`],menuItem:[`text-large`,`data-[active=true]:font-semibold`]},variants:{position:{static:{base:`static`},sticky:{base:`sticky top-0 inset-x-0`}},maxWidth:{sm:{wrapper:`max-w-[640px]`},md:{wrapper:`max-w-[768px]`},lg:{wrapper:`max-w-[1024px]`},xl:{wrapper:`max-w-[1280px]`},"2xl":{wrapper:`max-w-[1536px]`},full:{wrapper:`max-w-full`}},hideOnScroll:{true:{base:[`sticky`,`top-0`,`inset-x-0`]}},isBordered:{true:{base:[`border-b`,`border-divider`]}},isBlurred:{false:{base:`bg-background`,menu:`bg-background`},true:{base:[`backdrop-blur-lg`,`data-[menu-open=true]:backdrop-blur-xl`,`backdrop-saturate-150`,`bg-background/70`],menu:[`backdrop-blur-xl`,`backdrop-saturate-150`,`bg-background/70`]}},disableAnimation:{true:{menu:[`hidden`,`h-[calc(100dvh_-_var(--navbar-height))]`,`data-[open=true]:flex`]}}},defaultVariants:{maxWidth:`lg`,position:`sticky`,isBlurred:!0}}),Pu=du({base:`shrink-0 bg-divider border-none`,variants:{orientation:{horizontal:`w-full h-divider`,vertical:`h-full w-divider`}},defaultVariants:{orientation:`horizontal`}}),Fu=du({base:`flex flex-col gap-2 items-start`}),Iu=du({base:[`z-0`,`group`,`relative`,`inline-flex`,`items-center`,`justify-center`,`box-border`,`appearance-none`,`outline-solid outline-transparent`,`select-none`,`whitespace-nowrap`,`min-w-max`,`font-normal`,`subpixel-antialiased`,`overflow-hidden`,`tap-highlight-transparent`,`transform-gpu data-[pressed=true]:scale-[0.97]`,`cursor-pointer`,...pu],variants:{variant:{solid:``,bordered:`border-medium bg-transparent`,light:`bg-transparent`,flat:``,faded:`border-medium`,shadow:``,ghost:`border-medium bg-transparent`},size:{sm:`px-3 min-w-16 h-8 text-tiny gap-2 rounded-small`,md:`px-4 min-w-20 h-10 text-small gap-2 rounded-medium`,lg:`px-6 min-w-24 h-12 text-medium gap-3 rounded-large`},color:{default:``,primary:``,secondary:``,success:``,warning:``,danger:``},radius:{none:`rounded-none`,sm:`rounded-small`,md:`rounded-medium`,lg:`rounded-large`,full:`rounded-full`},fullWidth:{true:`w-full`},isDisabled:{true:`opacity-disabled pointer-events-none`},isInGroup:{true:`[&:not(:first-child):not(:last-child)]:rounded-none`},isIconOnly:{true:`px-0 !gap-0`,false:`[&>svg]:max-w-[theme(spacing.8)]`},disableAnimation:{true:`!transition-none data-[pressed=true]:scale-100`,false:`transition-transform-colors-opacity motion-reduce:transition-none`}},defaultVariants:{size:`md`,variant:`solid`,color:`default`,fullWidth:!1,isDisabled:!1,isInGroup:!1},compoundVariants:[{variant:`solid`,color:`default`,class:H.solid.default},{variant:`solid`,color:`primary`,class:H.solid.primary},{variant:`solid`,color:`secondary`,class:H.solid.secondary},{variant:`solid`,color:`success`,class:H.solid.success},{variant:`solid`,color:`warning`,class:H.solid.warning},{variant:`solid`,color:`danger`,class:H.solid.danger},{variant:`shadow`,color:`default`,class:H.shadow.default},{variant:`shadow`,color:`primary`,class:H.shadow.primary},{variant:`shadow`,color:`secondary`,class:H.shadow.secondary},{variant:`shadow`,color:`success`,class:H.shadow.success},{variant:`shadow`,color:`warning`,class:H.shadow.warning},{variant:`shadow`,color:`danger`,class:H.shadow.danger},{variant:`bordered`,color:`default`,class:H.bordered.default},{variant:`bordered`,color:`primary`,class:H.bordered.primary},{variant:`bordered`,color:`secondary`,class:H.bordered.secondary},{variant:`bordered`,color:`success`,class:H.bordered.success},{variant:`bordered`,color:`warning`,class:H.bordered.warning},{variant:`bordered`,color:`danger`,class:H.bordered.danger},{variant:`flat`,color:`default`,class:H.flat.default},{variant:`flat`,color:`primary`,class:H.flat.primary},{variant:`flat`,color:`secondary`,class:H.flat.secondary},{variant:`flat`,color:`success`,class:H.flat.success},{variant:`flat`,color:`warning`,class:H.flat.warning},{variant:`flat`,color:`danger`,class:H.flat.danger},{variant:`faded`,color:`default`,class:H.faded.default},{variant:`faded`,color:`primary`,class:H.faded.primary},{variant:`faded`,color:`secondary`,class:H.faded.secondary},{variant:`faded`,color:`success`,class:H.faded.success},{variant:`faded`,color:`warning`,class:H.faded.warning},{variant:`faded`,color:`danger`,class:H.faded.danger},{variant:`light`,color:`default`,class:[H.light.default,`data-[hover=true]:bg-default/40`]},{variant:`light`,color:`primary`,class:[H.light.primary,`data-[hover=true]:bg-primary/20`]},{variant:`light`,color:`secondary`,class:[H.light.secondary,`data-[hover=true]:bg-secondary/20`]},{variant:`light`,color:`success`,class:[H.light.success,`data-[hover=true]:bg-success/20`]},{variant:`light`,color:`warning`,class:[H.light.warning,`data-[hover=true]:bg-warning/20`]},{variant:`light`,color:`danger`,class:[H.light.danger,`data-[hover=true]:bg-danger/20`]},{variant:`ghost`,color:`default`,class:[H.ghost.default,`data-[hover=true]:!bg-default`]},{variant:`ghost`,color:`primary`,class:[H.ghost.primary,`data-[hover=true]:!bg-primary data-[hover=true]:!text-primary-foreground`]},{variant:`ghost`,color:`secondary`,class:[H.ghost.secondary,`data-[hover=true]:!bg-secondary data-[hover=true]:!text-secondary-foreground`]},{variant:`ghost`,color:`success`,class:[H.ghost.success,`data-[hover=true]:!bg-success data-[hover=true]:!text-success-foreground`]},{variant:`ghost`,color:`warning`,class:[H.ghost.warning,`data-[hover=true]:!bg-warning data-[hover=true]:!text-warning-foreground`]},{variant:`ghost`,color:`danger`,class:[H.ghost.danger,`data-[hover=true]:!bg-danger data-[hover=true]:!text-danger-foreground`]},{isInGroup:!0,class:`rounded-none first:rounded-s-medium last:rounded-e-medium`},{isInGroup:!0,size:`sm`,class:`rounded-none first:rounded-s-small last:rounded-e-small`},{isInGroup:!0,size:`md`,class:`rounded-none first:rounded-s-medium last:rounded-e-medium`},{isInGroup:!0,size:`lg`,class:`rounded-none first:rounded-s-large last:rounded-e-large`},{isInGroup:!0,isRounded:!0,class:`rounded-none first:rounded-s-full last:rounded-e-full`},{isInGroup:!0,radius:`none`,class:`rounded-none first:rounded-s-none last:rounded-e-none`},{isInGroup:!0,radius:`sm`,class:`rounded-none first:rounded-s-small last:rounded-e-small`},{isInGroup:!0,radius:`md`,class:`rounded-none first:rounded-s-medium last:rounded-e-medium`},{isInGroup:!0,radius:`lg`,class:`rounded-none first:rounded-s-large last:rounded-e-large`},{isInGroup:!0,radius:`full`,class:`rounded-none first:rounded-s-full last:rounded-e-full`},{isInGroup:!0,variant:[`ghost`,`bordered`],color:`default`,className:gu.default},{isInGroup:!0,variant:[`ghost`,`bordered`],color:`primary`,className:gu.primary},{isInGroup:!0,variant:[`ghost`,`bordered`],color:`secondary`,className:gu.secondary},{isInGroup:!0,variant:[`ghost`,`bordered`],color:`success`,className:gu.success},{isInGroup:!0,variant:[`ghost`,`bordered`],color:`warning`,className:gu.warning},{isInGroup:!0,variant:[`ghost`,`bordered`],color:`danger`,className:gu.danger},{isIconOnly:!0,size:`sm`,class:`min-w-8 w-8 h-8`},{isIconOnly:!0,size:`md`,class:`min-w-10 w-10 h-10`},{isIconOnly:!0,size:`lg`,class:`min-w-12 w-12 h-12`},{variant:[`solid`,`faded`,`flat`,`bordered`,`shadow`],class:`data-[hover=true]:opacity-hover`}]});du({base:`inline-flex items-center justify-center h-auto`,variants:{fullWidth:{true:`w-full`}},defaultVariants:{fullWidth:!1}});var Lu=du({slots:{base:[`flex`,`flex-col`,`relative`,`overflow-hidden`,`h-auto`,`outline-solid outline-transparent`,`text-foreground`,`box-border`,`bg-content1`,...pu],header:[`flex`,`p-3`,`z-10`,`w-full`,`justify-start`,`items-center`,`shrink-0`,`overflow-inherit`,`color-inherit`,`subpixel-antialiased`],body:[`relative`,`flex`,`flex-1`,`w-full`,`p-3`,`flex-auto`,`flex-col`,`place-content-inherit`,`align-items-inherit`,`h-auto`,`break-words`,`text-left`,`overflow-y-auto`,`subpixel-antialiased`],footer:[`p-3`,`h-auto`,`flex`,`w-full`,`items-center`,`overflow-hidden`,`color-inherit`,`subpixel-antialiased`]},variants:{shadow:{none:{base:`shadow-none`},sm:{base:`shadow-small`},md:{base:`shadow-medium`},lg:{base:`shadow-large`}},radius:{none:{base:`rounded-none`,header:`rounded-none`,footer:`rounded-none`},sm:{base:`rounded-small`,header:`rounded-t-small`,footer:`rounded-b-small`},md:{base:`rounded-medium`,header:`rounded-t-medium`,footer:`rounded-b-medium`},lg:{base:`rounded-large`,header:`rounded-t-large`,footer:`rounded-b-large`}},fullWidth:{true:{base:`w-full`}},isHoverable:{true:{base:`data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2`}},isPressable:{true:{base:`cursor-pointer`}},isBlurred:{true:{base:[`bg-background/80`,`dark:bg-background/20`,`backdrop-blur-md`,`backdrop-saturate-150`]}},isFooterBlurred:{true:{footer:[`bg-background/10`,`backdrop-blur`,`backdrop-saturate-150`]}},isDisabled:{true:{base:`opacity-disabled cursor-not-allowed`}},disableAnimation:{true:``,false:{base:`transition-transform-background motion-reduce:transition-none`}}},compoundVariants:[{isPressable:!0,class:`data-[pressed=true]:scale-[0.97] tap-highlight-transparent`}],defaultVariants:{radius:`lg`,shadow:`md`,fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,isFooterBlurred:!1}}),Ru=du({slots:{base:[`relative`,`max-w-fit`,`min-w-min`,`inline-flex`,`items-center`,`justify-between`,`box-border`,`whitespace-nowrap`],content:`flex-1 text-inherit font-normal`,dot:[`w-2`,`h-2`,`ml-1`,`rounded-full`],avatar:`shrink-0`,closeButton:[`z-10`,`appearance-none`,`outline-solid outline-transparent`,`select-none`,`transition-opacity`,`opacity-70`,`hover:opacity-100`,`cursor-pointer`,`active:opacity-disabled`,`tap-highlight-transparent`]},variants:{variant:{solid:{},bordered:{base:`border-medium bg-transparent`},light:{base:`bg-transparent`},flat:{},faded:{base:`border-medium`},shadow:{},dot:{base:`border-medium border-default text-foreground bg-transparent`}},color:{default:{dot:`bg-default-400`},primary:{dot:`bg-primary`},secondary:{dot:`bg-secondary`},success:{dot:`bg-success`},warning:{dot:`bg-warning`},danger:{dot:`bg-danger`}},size:{sm:{base:`px-1 h-6 text-tiny`,content:`px-1`,closeButton:`text-medium`,avatar:`w-4 h-4`},md:{base:`px-1 h-7 text-small`,content:`px-2`,closeButton:`text-large`,avatar:`w-5 h-5`},lg:{base:`px-2 h-8 text-medium`,content:`px-2`,closeButton:`text-xl`,avatar:`w-6 h-6`}},radius:{none:{base:`rounded-none`},sm:{base:`rounded-small`},md:{base:`rounded-medium`},lg:{base:`rounded-large`},full:{base:`rounded-full`}},isOneChar:{true:{},false:{}},isCloseable:{true:{},false:{}},hasStartContent:{true:{}},hasEndContent:{true:{}},isDisabled:{true:{base:`opacity-disabled pointer-events-none`}},isCloseButtonFocusVisible:{true:{closeButton:[...hu,`ring-1`,`rounded-full`]}}},defaultVariants:{variant:`solid`,color:`default`,size:`md`,radius:`full`,isDisabled:!1},compoundVariants:[{variant:`solid`,color:`default`,class:{base:H.solid.default}},{variant:`solid`,color:`primary`,class:{base:H.solid.primary}},{variant:`solid`,color:`secondary`,class:{base:H.solid.secondary}},{variant:`solid`,color:`success`,class:{base:H.solid.success}},{variant:`solid`,color:`warning`,class:{base:H.solid.warning}},{variant:`solid`,color:`danger`,class:{base:H.solid.danger}},{variant:`shadow`,color:`default`,class:{base:H.shadow.default}},{variant:`shadow`,color:`primary`,class:{base:H.shadow.primary}},{variant:`shadow`,color:`secondary`,class:{base:H.shadow.secondary}},{variant:`shadow`,color:`success`,class:{base:H.shadow.success}},{variant:`shadow`,color:`warning`,class:{base:H.shadow.warning}},{variant:`shadow`,color:`danger`,class:{base:H.shadow.danger}},{variant:`bordered`,color:`default`,class:{base:H.bordered.default}},{variant:`bordered`,color:`primary`,class:{base:H.bordered.primary}},{variant:`bordered`,color:`secondary`,class:{base:H.bordered.secondary}},{variant:`bordered`,color:`success`,class:{base:H.bordered.success}},{variant:`bordered`,color:`warning`,class:{base:H.bordered.warning}},{variant:`bordered`,color:`danger`,class:{base:H.bordered.danger}},{variant:`flat`,color:`default`,class:{base:H.flat.default}},{variant:`flat`,color:`primary`,class:{base:H.flat.primary}},{variant:`flat`,color:`secondary`,class:{base:H.flat.secondary}},{variant:`flat`,color:`success`,class:{base:H.flat.success}},{variant:`flat`,color:`warning`,class:{base:H.flat.warning}},{variant:`flat`,color:`danger`,class:{base:H.flat.danger}},{variant:`faded`,color:`default`,class:{base:H.faded.default}},{variant:`faded`,color:`primary`,class:{base:H.faded.primary}},{variant:`faded`,color:`secondary`,class:{base:H.faded.secondary}},{variant:`faded`,color:`success`,class:{base:H.faded.success}},{variant:`faded`,color:`warning`,class:{base:H.faded.warning}},{variant:`faded`,color:`danger`,class:{base:H.faded.danger}},{variant:`light`,color:`default`,class:{base:H.light.default}},{variant:`light`,color:`primary`,class:{base:H.light.primary}},{variant:`light`,color:`secondary`,class:{base:H.light.secondary}},{variant:`light`,color:`success`,class:{base:H.light.success}},{variant:`light`,color:`warning`,class:{base:H.light.warning}},{variant:`light`,color:`danger`,class:{base:H.light.danger}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:`sm`,class:{base:`w-5 h-5 min-w-5 min-h-5`}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:`md`,class:{base:`w-6 h-6 min-w-6 min-h-6`}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:`lg`,class:{base:`w-7 h-7 min-w-7 min-h-7`}},{isOneChar:!0,isCloseable:!1,hasStartContent:!1,hasEndContent:!1,class:{base:`px-0 justify-center`,content:`px-0 flex-none`}},{isOneChar:!0,isCloseable:!0,hasStartContent:!1,hasEndContent:!1,class:{base:`w-auto`}},{isOneChar:!0,variant:`dot`,class:{base:`w-auto h-7 px-1 items-center`,content:`px-2`}},{hasStartContent:!0,size:`sm`,class:{content:`pl-0.5`}},{hasStartContent:!0,size:[`md`,`lg`],class:{content:`pl-1`}},{hasEndContent:!0,size:`sm`,class:{content:`pr-0.5`}},{hasEndContent:!0,size:[`md`,`lg`],class:{content:`pr-1`}}]}),zu=du({slots:{base:`flex flex-grow flex-row w-full items-center py-3 px-4 gap-x-1`,mainWrapper:`h-full flex-grow min-h-10 ms-2 flex flex-col box-border items-start text-inherit justify-center`,title:`text-small w-full font-medium block text-inherit leading-5`,description:`pl-[1px] text-small font-normal text-inherit`,closeButton:`relative text-inherit translate-x-1 -translate-y-1`,iconWrapper:`flex-none relative w-9 h-9 rounded-full grid place-items-center`,alertIcon:`fill-current w-6 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2`},variants:{color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},variant:{solid:{},flat:{},faded:{base:`border-small`},bordered:{base:`border-small bg-transparent`}},radius:{none:{base:`rounded-none`},sm:{base:`rounded-small`},md:{base:`rounded-medium`},lg:{base:`rounded-large`},full:{base:`rounded-full`}},hideIcon:{true:{iconWrapper:`hidden`}},hideIconWrapper:{true:{base:`gap-x-0`,iconWrapper:`!bg-transparent !shadow-none !border-none`}},hasContent:{false:{base:`items-center`,mainWrapper:`justify-center items-center`}}},defaultVariants:{color:`default`,variant:`flat`,radius:`md`,hideIcon:!1,hideIconWrapper:!1},compoundVariants:[{variant:`solid`,color:`default`,class:{base:H.solid.default,closeButton:`data-[hover]:bg-default-100`,alertIcon:`text-default-foreground`}},{variant:`solid`,color:`primary`,class:{base:H.solid.primary}},{variant:`solid`,color:`secondary`,class:{base:H.solid.secondary}},{variant:`solid`,color:`success`,class:{base:H.solid.success}},{variant:`solid`,color:`warning`,class:{base:H.solid.warning}},{variant:`solid`,color:`danger`,class:{base:H.solid.danger}},{variant:[`flat`,`faded`],color:`default`,class:{base:[H.flat.default,`bg-default-100 dark:bg-default-50/50`,`text-default-foreground`],description:`text-default-600`,closeButton:`text-default-400`,iconWrapper:`bg-default-50 dark:bg-default-100 border-default-200`}},{variant:[`flat`,`faded`],color:`primary`,class:{base:[H.flat.primary,`bg-primary-50 dark:bg-primary-50/50`],closeButton:`text-primary-500 data-[hover]:bg-primary-200`,iconWrapper:`bg-primary-50 dark:bg-primary-100 border-primary-100`}},{variant:[`flat`,`faded`],color:`secondary`,class:{base:[H.flat.secondary,`bg-secondary-50 dark:bg-secondary-50/50`],closeButton:`text-secondary-500 data-[hover]:bg-secondary-200`,iconWrapper:`bg-secondary-50 dark:bg-secondary-100 border-secondary-100`}},{variant:[`flat`,`faded`],color:`success`,class:{base:[H.flat.success,`bg-success-50 dark:bg-success-50/50`],closeButton:`text-success-500 data-[hover]:bg-success-200`,iconWrapper:`bg-success-50 dark:bg-success-100 border-success-100`}},{variant:[`flat`,`faded`],color:`warning`,class:{base:[H.flat.warning,`bg-warning-50 dark:bg-warning-50/50`],closeButton:`text-warning-500 data-[hover]:bg-warning-200`,iconWrapper:`bg-warning-50 dark:bg-warning-100 border-warning-100`}},{variant:[`flat`,`faded`],color:`danger`,class:{base:[H.flat.danger,`bg-danger-50 dark:bg-danger-50/50`],closeButton:`text-danger-500 data-[hover]:bg-danger-200`,iconWrapper:`bg-danger-50 dark:bg-danger-100 border-danger-100`}},{variant:`faded`,color:`default`,class:{base:`border-default-300 dark:border-default-200`}},{variant:`faded`,color:`primary`,class:{base:`border-primary-200 dark:border-primary-100`}},{variant:`faded`,color:`secondary`,class:{base:`border-secondary-200`}},{variant:`faded`,color:`success`,class:{base:`border-success-300 dark:border-success-100`}},{variant:`faded`,color:`warning`,class:{base:`border-warning-300 dark:border-warning-100`}},{variant:`faded`,color:`danger`,class:{base:`border-danger-200 dark:border-danger-100`}},{variant:`bordered`,color:`default`,class:{base:[H.bordered.default],description:`text-default-600`,closeButton:`text-default-400`}},{variant:`bordered`,color:`primary`,class:{base:[H.bordered.primary],closeButton:`data-[hover]:bg-primary-50`}},{variant:`bordered`,color:`secondary`,class:{base:[H.bordered.secondary],closeButton:`data-[hover]:bg-secondary-50`}},{variant:`bordered`,color:`success`,class:{base:[H.bordered.success],closeButton:`data-[hover]:bg-success-50`}},{variant:`bordered`,color:`warning`,class:{base:[H.bordered.warning],closeButton:`data-[hover]:bg-warning-100`}},{variant:`bordered`,color:`danger`,class:{base:[H.bordered.danger],closeButton:`data-[hover]:bg-danger-50`}},{variant:[`flat`,`bordered`,`faded`],class:{iconWrapper:`shadow-small`}},{variant:[`flat`,`faded`],class:{iconWrapper:`shadow-small border-1`}},{variant:`bordered`,color:`default`,class:{iconWrapper:`bg-default-200 dark:bg-default-100`}},{variant:`bordered`,color:`primary`,class:{iconWrapper:`bg-primary-100 dark:bg-primary-50`}},{variant:`bordered`,color:`secondary`,class:{iconWrapper:`bg-secondary-100 dark:bg-secondary-50`}},{variant:`bordered`,color:`success`,class:{iconWrapper:`bg-success-100 dark:bg-success-50`}},{variant:`bordered`,color:`warning`,class:{iconWrapper:`bg-warning-100 dark:bg-warning-50`}},{variant:`bordered`,color:`danger`,class:{iconWrapper:`bg-danger-100 dark:bg-danger-50`}}]});function Bu(e){var t,n,r=``;if(typeof e==`string`||typeof e==`number`)r+=e;else if(typeof e==`object`)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Bu(e[t]))&&(r&&(r+=` `),r+=n);else for(t in e)e[t]&&(r&&(r+=` `),r+=t);return r}function aee(){for(var e,t,n=0,r=``;n<arguments.length;)(e=arguments[n++])&&(t=Bu(e))&&(r&&(r+=` `),r+=t);return r}var oee=aee,see=su({extend:kc});function Vu(...e){return see(oee(e))}var cee=r(((exports,t)=>{t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}})),lee=r(((exports,t)=>{t.exports=function(e){return!e||typeof e==`string`?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!==`String`)}})),uee=r(((exports,t)=>{var n=lee(),r=Array.prototype.concat,i=Array.prototype.slice,a=t.exports=function(e){for(var t=[],a=0,o=e.length;a<o;a++){var s=e[a];n(s)?t=r.call(t,i.call(s)):t.push(s)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}})),Hu=r(((exports,t)=>{var n=cee(),r=uee(),i=Object.hasOwnProperty,a=Object.create(null);for(var o in n)i.call(n,o)&&(a[n[o]]=o);var s=t.exports={to:{},get:{}};s.get=function(e){var t=e.substring(0,3).toLowerCase(),n,r;switch(t){case`hsl`:n=s.get.hsl(e),r=`hsl`;break;case`hwb`:n=s.get.hwb(e),r=`hwb`;break;default:n=s.get.rgb(e),r=`rgb`;break}return n?{model:r,value:n}:null},s.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,a=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,l=[0,0,0,1],u,d,f;if(u=e.match(r)){for(f=u[2],u=u[1],d=0;d<3;d++){var p=d*2;l[d]=parseInt(u.slice(p,p+2),16)}f&&(l[3]=parseInt(f,16)/255)}else if(u=e.match(t)){for(u=u[1],f=u[3],d=0;d<3;d++)l[d]=parseInt(u[d]+u[d],16);f&&(l[3]=parseInt(f+f,16)/255)}else if(u=e.match(a)){for(d=0;d<3;d++)l[d]=parseInt(u[d+1],0);u[4]&&(u[5]?l[3]=parseFloat(u[4])*.01:l[3]=parseFloat(u[4]))}else if(u=e.match(o)){for(d=0;d<3;d++)l[d]=Math.round(parseFloat(u[d+1])*2.55);u[4]&&(u[5]?l[3]=parseFloat(u[4])*.01:l[3]=parseFloat(u[4]))}else if(u=e.match(s))return u[1]===`transparent`?[0,0,0,0]:i.call(n,u[1])?(l=n[u[1]],l[3]=1,l):null;else return null;for(d=0;d<3;d++)l[d]=c(l[d],0,255);return l[3]=c(l[3],0,1),l},s.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]),r=(parseFloat(t[1])%360+360)%360,i=c(parseFloat(t[2]),0,100),a=c(parseFloat(t[3]),0,100),o=c(isNaN(n)?1:n,0,1);return[r,i,a,o]}return null},s.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]),r=(parseFloat(t[1])%360+360)%360,i=c(parseFloat(t[2]),0,100),a=c(parseFloat(t[3]),0,100),o=c(isNaN(n)?1:n,0,1);return[r,i,a,o]}return null},s.to.hex=function(){var e=r(arguments);return`#`+l(e[0])+l(e[1])+l(e[2])+(e[3]<1?l(Math.round(e[3]*255)):``)},s.to.rgb=function(){var e=r(arguments);return e.length<4||e[3]===1?`rgb(`+Math.round(e[0])+`, `+Math.round(e[1])+`, `+Math.round(e[2])+`)`:`rgba(`+Math.round(e[0])+`, `+Math.round(e[1])+`, `+Math.round(e[2])+`, `+e[3]+`)`},s.to.rgb.percent=function(){var e=r(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),i=Math.round(e[2]/255*100);return e.length<4||e[3]===1?`rgb(`+t+`%, `+n+`%, `+i+`%)`:`rgba(`+t+`%, `+n+`%, `+i+`%, `+e[3]+`)`},s.to.hsl=function(){var e=r(arguments);return e.length<4||e[3]===1?`hsl(`+e[0]+`, `+e[1]+`%, `+e[2]+`%)`:`hsla(`+e[0]+`, `+e[1]+`%, `+e[2]+`%, `+e[3]+`)`},s.to.hwb=function(){var e=r(arguments),t=``;return e.length>=4&&e[3]!==1&&(t=`, `+e[3]),`hwb(`+e[0]+`, `+e[1]+`%, `+e[2]+`%`+t+`)`},s.to.keyword=function(e){return a[e.slice(0,3)]};function c(e,t,n){return Math.min(Math.max(t,e),n)}function l(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?`0`+t:t}}));function Uu(e){return Fr()?e.altKey:e.ctrlKey}function Wu(e,t){let n=`[data-key="${CSS.escape(String(t))}"]`,r=e.current?.dataset.collection;return r&&(n=`[data-collection="${CSS.escape(r)}"]${n}`),e.current?.querySelector(n)}var Gu=new WeakMap;function Ku(e){let t=Qn();return Gu.set(e,t),t}function qu(e){return Gu.get(e)}var Ju=1e3;function Yu(e){let{keyboardDelegate:t,selectionManager:n,onTypeSelect:r}=e,i=(0,b.useRef)({search:``,timeout:void 0}).current;return{typeSelectProps:{onKeyDownCapture:t.getKeyForSearch?e=>{let a=Xu(e.key);if(!(!a||e.ctrlKey||e.metaKey||!e.currentTarget.contains(e.target)||i.search.length===0&&a===` `)){if(a===` `&&i.search.trim().length>0&&(e.preventDefault(),`continuePropagation`in e||e.stopPropagation()),i.search+=a,t.getKeyForSearch!=null){let e=t.getKeyForSearch(i.search,n.focusedKey);e??=t.getKeyForSearch(i.search),e!=null&&(n.setFocusedKey(e),r&&r(e))}clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=``},Ju)}}:void 0}}}function Xu(e){return e.length===1||!/^[A-Z]/i.test(e)?e:``}var Zu=t(c(),1);function Qu(e){let{selectionManager:t,keyboardDelegate:n,ref:r,autoFocus:i=!1,shouldFocusWrap:a=!1,disallowEmptySelection:o=!1,disallowSelectAll:s=!1,escapeKeyBehavior:c=`clearSelection`,selectOnFocus:l=t.selectionBehavior===`replace`,disallowTypeAhead:u=!1,shouldUseVirtualFocus:d,allowsTabNavigation:f=!1,isVirtualized:p,scrollRef:m=r,linkBehavior:h=`action`}=e,{direction:g}=Sn(),_=Hr(),v=e=>{if(e.altKey&&e.key===`Tab`&&e.preventDefault(),!r.current?.contains(e.target))return;let i=(n,i)=>{if(n!=null){if(t.isLink(n)&&h===`selection`&&l&&!Uu(e)){(0,Zu.flushSync)(()=>{t.setFocusedKey(n,i)});let a=Wu(r,n),o=t.getItemProps(n);a&&_.open(a,e,o.href,o.routerOptions);return}if(t.setFocusedKey(n,i),t.isLink(n)&&h===`override`)return;e.shiftKey&&t.selectionMode===`multiple`?t.extendSelection(n):l&&!Uu(e)&&t.replaceSelection(n)}};switch(e.key){case`ArrowDown`:if(n.getKeyBelow){let r=t.focusedKey==null?n.getFirstKey?.call(n):n.getKeyBelow?.call(n,t.focusedKey);r==null&&a&&(r=n.getFirstKey?.call(n,t.focusedKey)),r!=null&&(e.preventDefault(),i(r))}break;case`ArrowUp`:if(n.getKeyAbove){let r=t.focusedKey==null?n.getLastKey?.call(n):n.getKeyAbove?.call(n,t.focusedKey);r==null&&a&&(r=n.getLastKey?.call(n,t.focusedKey)),r!=null&&(e.preventDefault(),i(r))}break;case`ArrowLeft`:if(n.getKeyLeftOf){let r=t.focusedKey==null?null:n.getKeyLeftOf?.call(n,t.focusedKey);r==null&&a&&(r=g===`rtl`?n.getFirstKey?.call(n,t.focusedKey):n.getLastKey?.call(n,t.focusedKey)),r!=null&&(e.preventDefault(),i(r,g===`rtl`?`first`:`last`))}break;case`ArrowRight`:if(n.getKeyRightOf){let r=t.focusedKey==null?null:n.getKeyRightOf?.call(n,t.focusedKey);r==null&&a&&(r=g===`rtl`?n.getLastKey?.call(n,t.focusedKey):n.getFirstKey?.call(n,t.focusedKey)),r!=null&&(e.preventDefault(),i(r,g===`rtl`?`last`:`first`))}break;case`Home`:if(n.getFirstKey){if(t.focusedKey===null&&e.shiftKey)return;e.preventDefault();let r=n.getFirstKey(t.focusedKey,bi(e));t.setFocusedKey(r),r!=null&&(bi(e)&&e.shiftKey&&t.selectionMode===`multiple`?t.extendSelection(r):l&&t.replaceSelection(r))}break;case`End`:if(n.getLastKey){if(t.focusedKey===null&&e.shiftKey)return;e.preventDefault();let r=n.getLastKey(t.focusedKey,bi(e));t.setFocusedKey(r),r!=null&&(bi(e)&&e.shiftKey&&t.selectionMode===`multiple`?t.extendSelection(r):l&&t.replaceSelection(r))}break;case`PageDown`:if(n.getKeyPageBelow&&t.focusedKey!=null){let r=n.getKeyPageBelow(t.focusedKey);r!=null&&(e.preventDefault(),i(r))}break;case`PageUp`:if(n.getKeyPageAbove&&t.focusedKey!=null){let r=n.getKeyPageAbove(t.focusedKey);r!=null&&(e.preventDefault(),i(r))}break;case`a`:bi(e)&&t.selectionMode===`multiple`&&s!==!0&&(e.preventDefault(),t.selectAll());break;case`Escape`:c===`clearSelection`&&!o&&t.selectedKeys.size!==0&&(e.stopPropagation(),e.preventDefault(),t.clearSelection());break;case`Tab`:if(!f){if(e.shiftKey)r.current.focus();else{let e=qo(r.current,{tabbable:!0}),t,n;do n=e.lastChild(),n&&(t=n);while(n);t&&!t.contains(document.activeElement)&&Cr(t)}break}}},y=(0,b.useRef)({top:0,left:0});di(m,`scroll`,p?void 0:()=>{y.current={top:m.current?.scrollTop??0,left:m.current?.scrollLeft??0}});let x=e=>{if(t.isFocused){e.currentTarget.contains(e.target)||t.setFocused(!1);return}if(e.currentTarget.contains(e.target)){if(t.setFocused(!0),t.focusedKey==null){let r=e=>{e!=null&&(t.setFocusedKey(e),l&&!t.isSelected(e)&&t.replaceSelection(e))},i=e.relatedTarget;i&&e.currentTarget.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_FOLLOWING?r(t.lastSelectedKey??n.getLastKey?.call(n)):r(t.firstSelectedKey??n.getFirstKey?.call(n))}else !p&&m.current&&(m.current.scrollTop=y.current.top,m.current.scrollLeft=y.current.left);if(t.focusedKey!=null&&m.current){let e=Wu(r,t.focusedKey);e instanceof HTMLElement&&(!e.contains(document.activeElement)&&!d&&Cr(e),eo()===`keyboard`&&mi(e,{containingElement:r.current}))}}},S=e=>{e.currentTarget.contains(e.relatedTarget)||t.setFocused(!1)},C=(0,b.useRef)(!1);di(r,yi,d?e=>{let{detail:n}=e;e.stopPropagation(),t.setFocused(!0),n?.focusStrategy===`first`&&(C.current=!0)}:void 0);let w=qn(()=>{let e=n.getFirstKey?.call(n)??null;if(e==null){let e=lr();$o(r.current),ts(e,null),t.collection.size>0&&(C.current=!1)}else t.setFocusedKey(e),C.current=!1});ni(()=>{C.current&&w()},[t.collection,w]);let T=qn(()=>{t.collection.size>0&&(C.current=!1)});ni(()=>{T()},[t.focusedKey,T]),di(r,vi,d?e=>{e.stopPropagation(),t.setFocused(!1),e.detail?.clearFocusKey&&t.setFocusedKey(null)}:void 0);let E=(0,b.useRef)(i),D=(0,b.useRef)(!1);(0,b.useEffect)(()=>{if(E.current){let e=null;i===`first`&&(e=n.getFirstKey?.call(n)??null),i===`last`&&(e=n.getLastKey?.call(n)??null);let a=t.selectedKeys;if(a.size){for(let n of a)if(t.canSelectItem(n)){e=n;break}}t.setFocused(!0),t.setFocusedKey(e),e==null&&!d&&r.current&&ao(r.current),t.collection.size>0&&(E.current=!1,D.current=!0)}});let O=(0,b.useRef)(t.focusedKey),k=(0,b.useRef)(null);(0,b.useEffect)(()=>{if(t.isFocused&&t.focusedKey!=null&&(t.focusedKey!==O.current||D.current)&&m.current&&r.current){let e=eo(),n=Wu(r,t.focusedKey);if(!(n instanceof HTMLElement))return;(e===`keyboard`||D.current)&&(k.current&&cancelAnimationFrame(k.current),k.current=requestAnimationFrame(()=>{m.current&&(fi(m.current,n),e!==`virtual`&&mi(n,{containingElement:r.current}))}))}!d&&t.isFocused&&t.focusedKey==null&&O.current!=null&&r.current&&ao(r.current),O.current=t.focusedKey,D.current=!1}),(0,b.useEffect)(()=>()=>{k.current&&cancelAnimationFrame(k.current)},[]),di(r,`react-aria-focus-scope-restore`,e=>{e.preventDefault(),t.setFocused(!0)});let A={onKeyDown:v,onFocus:x,onBlur:S,onMouseDown(e){m.current===e.target&&e.preventDefault()}},{typeSelectProps:j}=Yu({keyboardDelegate:n,selectionManager:t});u||(A=gr(j,A));let M;d||(M=t.focusedKey==null?0:-1);let ee=Ku(t.collection);return{collectionProps:gr(A,{tabIndex:M,"data-collection":ee})}}function $u(e){let{id:t,selectionManager:n,key:r,ref:i,shouldSelectOnPressUp:a,shouldUseVirtualFocus:o,focus:s,isDisabled:c,onAction:l,allowsDifferentPressOrigin:u,linkBehavior:d=`action`}=e,f=Hr();t=Qn(t);let p=e=>{if(e.pointerType===`keyboard`&&Uu(e))n.toggleSelection(r);else{if(n.selectionMode===`none`)return;if(n.isLink(r)){if(d===`selection`&&i.current){let t=n.getItemProps(r);f.open(i.current,e,t.href,t.routerOptions),n.setSelectedKeys(n.selectedKeys);return}else if(d===`override`||d===`none`)return}n.selectionMode===`single`?n.isSelected(r)&&!n.disallowEmptySelection?n.toggleSelection(r):n.replaceSelection(r):e&&e.shiftKey?n.extendSelection(r):n.selectionBehavior===`toggle`||e&&(bi(e)||e.pointerType===`touch`||e.pointerType===`virtual`)?n.toggleSelection(r):n.replaceSelection(r)}};(0,b.useEffect)(()=>{r===n.focusedKey&&n.isFocused&&(o?$o(i.current):s?s():document.activeElement!==i.current&&i.current&&ao(i.current))},[i,r,n.focusedKey,n.childFocusStrategy,n.isFocused,o]),c||=n.isDisabled(r);let m={};!o&&!c?m={tabIndex:r===n.focusedKey?0:-1,onFocus(e){e.target===i.current&&n.setFocusedKey(r)}}:c&&(m.onMouseDown=e=>{e.preventDefault()});let h=n.isLink(r)&&d===`override`,g=n.isLink(r)&&d!==`selection`&&d!==`none`,_=!c&&n.canSelectItem(r)&&!h,v=(l||g)&&!c,y=v&&(n.selectionBehavior===`replace`?!_:!_||n.isEmpty),x=v&&_&&n.selectionBehavior===`replace`,S=y||x,C=(0,b.useRef)(null),w=S&&_,T=(0,b.useRef)(!1),E=(0,b.useRef)(!1),D=n.getItemProps(r),O=e=>{l&&l(),g&&i.current&&f.open(i.current,e,D.href,D.routerOptions)},k={ref:i};if(a?(k.onPressStart=e=>{C.current=e.pointerType,T.current=w,e.pointerType===`keyboard`&&(!S||td())&&p(e)},u?(k.onPressUp=y?void 0:e=>{e.pointerType===`mouse`&&_&&p(e)},k.onPress=y?O:e=>{e.pointerType!==`keyboard`&&e.pointerType!==`mouse`&&_&&p(e)}):k.onPress=e=>{if(y||x&&e.pointerType!==`mouse`){if(e.pointerType===`keyboard`&&!ed())return;O(e)}else e.pointerType!==`keyboard`&&_&&p(e)}):(k.onPressStart=e=>{C.current=e.pointerType,T.current=w,E.current=y,_&&(e.pointerType===`mouse`&&!y||e.pointerType===`keyboard`&&(!v||td()))&&p(e)},k.onPress=e=>{(e.pointerType===`touch`||e.pointerType===`pen`||e.pointerType===`virtual`||e.pointerType===`keyboard`&&S&&ed()||e.pointerType===`mouse`&&E.current)&&(S?O(e):_&&p(e))}),m[`data-collection`]=qu(n.collection),m[`data-key`]=r,k.preventFocusOnPress=o,o&&(k=gr(k,{onPressStart(e){e.pointerType!==`touch`&&(n.setFocused(!0),n.setFocusedKey(r))},onPress(e){e.pointerType===`touch`&&(n.setFocused(!0),n.setFocusedKey(r))}})),D)for(let e of[`onPressStart`,`onPressEnd`,`onPressChange`,`onPress`,`onPressUp`,`onClick`])D[e]&&(k[e]=tr(k[e],D[e]));let{pressProps:A,isPressed:j}=ka(k),M=x?e=>{C.current===`mouse`&&(e.stopPropagation(),e.preventDefault(),O(e))}:void 0,{longPressProps:ee}=wo({isDisabled:!w,onLongPress(e){e.pointerType===`touch`&&(p(e),n.setSelectionBehavior(`toggle`))}}),N=e=>{C.current===`touch`&&T.current&&e.preventDefault()},te=d!==`none`&&n.isLink(r)?e=>{Wr.isOpening||e.preventDefault()}:void 0;return{itemProps:gr(m,_||y||o&&!c?A:{},w?ee:{},{onDoubleClick:M,onDragStartCapture:N,onClick:te,id:t},o?{onMouseDown:e=>e.preventDefault()}:void 0),isPressed:j,isSelected:n.isSelected(r),isFocused:n.isFocused&&n.focusedKey===r,isDisabled:c,allowsSelection:_,hasAction:S}}function ed(){return window.event?.key===`Enter`}function td(){let e=window.event;return e?.key===` `||e?.code===`Space`}var nd=class{getItemRect(e){let t=this.ref.current;if(!t)return null;let n=e==null?null:Wu(this.ref,e);if(!n)return null;let r=t.getBoundingClientRect(),i=n.getBoundingClientRect();return{x:i.left-r.left+t.scrollLeft,y:i.top-r.top+t.scrollTop,width:i.width,height:i.height}}getContentSize(){let e=this.ref.current;return{width:e?.scrollWidth??0,height:e?.scrollHeight??0}}getVisibleRect(){let e=this.ref.current;return{x:e?.scrollLeft??0,y:e?.scrollTop??0,width:e?.offsetWidth??0,height:e?.offsetHeight??0}}constructor(e){this.ref=e}},rd=class{isDisabled(e){return this.disabledBehavior===`all`&&(e.props?.isDisabled||this.disabledKeys.has(e.key))}findNextNonDisabled(e,t){let n=e;for(;n!=null;){let e=this.collection.getItem(n);if(e?.type===`item`&&!this.isDisabled(e))return n;n=t(n)}return null}getNextKey(e){let t=e;return t=this.collection.getKeyAfter(t),this.findNextNonDisabled(t,e=>this.collection.getKeyAfter(e))}getPreviousKey(e){let t=e;return t=this.collection.getKeyBefore(t),this.findNextNonDisabled(t,e=>this.collection.getKeyBefore(e))}findKey(e,t,n){let r=e,i=this.layoutDelegate.getItemRect(r);if(!i||r==null)return null;let a=i;do{if(r=t(r),r==null)break;i=this.layoutDelegate.getItemRect(r)}while(i&&n(a,i)&&r!=null);return r}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return this.layout===`grid`&&this.orientation===`vertical`?this.findKey(e,e=>this.getNextKey(e),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout===`grid`&&this.orientation===`vertical`?this.findKey(e,e=>this.getPreviousKey(e),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let t=this.direction===`ltr`?`getKeyRightOf`:`getKeyLeftOf`;return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,e=>this.layoutDelegate[t](e))):this.layout===`grid`?this.orientation===`vertical`?this.getNextColumn(e,this.direction===`rtl`):this.findKey(e,e=>this.getNextColumn(e,this.direction===`rtl`),this.isSameColumn):this.orientation===`horizontal`?this.getNextColumn(e,this.direction===`rtl`):null}getKeyLeftOf(e){let t=this.direction===`ltr`?`getKeyLeftOf`:`getKeyRightOf`;return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,e=>this.layoutDelegate[t](e))):this.layout===`grid`?this.orientation===`vertical`?this.getNextColumn(e,this.direction===`ltr`):this.findKey(e,e=>this.getNextColumn(e,this.direction===`ltr`),this.isSameColumn):this.orientation===`horizontal`?this.getNextColumn(e,this.direction===`ltr`):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,e=>this.collection.getKeyAfter(e))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,e=>this.collection.getKeyBefore(e))}getKeyPageAbove(e){let t=this.ref.current,n=this.layoutDelegate.getItemRect(e);if(!n)return null;if(t&&!oi(t))return this.getFirstKey();let r=e;if(this.orientation===`horizontal`){let e=Math.max(0,n.x+n.width-this.layoutDelegate.getVisibleRect().width);for(;n&&n.x>e&&r!=null;)r=this.getKeyAbove(r),n=r==null?null:this.layoutDelegate.getItemRect(r)}else{let e=Math.max(0,n.y+n.height-this.layoutDelegate.getVisibleRect().height);for(;n&&n.y>e&&r!=null;)r=this.getKeyAbove(r),n=r==null?null:this.layoutDelegate.getItemRect(r)}return r??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,n=this.layoutDelegate.getItemRect(e);if(!n)return null;if(t&&!oi(t))return this.getLastKey();let r=e;if(this.orientation===`horizontal`){let e=Math.min(this.layoutDelegate.getContentSize().width,n.y-n.width+this.layoutDelegate.getVisibleRect().width);for(;n&&n.x<e&&r!=null;)r=this.getKeyBelow(r),n=r==null?null:this.layoutDelegate.getItemRect(r)}else{let e=Math.min(this.layoutDelegate.getContentSize().height,n.y-n.height+this.layoutDelegate.getVisibleRect().height);for(;n&&n.y<e&&r!=null;)r=this.getKeyBelow(r),n=r==null?null:this.layoutDelegate.getItemRect(r)}return r??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let n=this.collection,r=t||this.getFirstKey();for(;r!=null;){let t=n.getItem(r);if(!t)return null;let i=t.textValue.slice(0,e.length);if(t.textValue&&this.collator.compare(i,e)===0)return r;r=this.getNextKey(r)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||`all`,this.orientation=t.orientation||`vertical`,this.direction=t.direction,this.layout=t.layout||`stack`,this.layoutDelegate=t.layoutDelegate||new nd(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout=`stack`,this.orientation=`vertical`,this.disabledBehavior=`all`,this.layoutDelegate=new nd(this.ref);this.layout===`stack`&&this.orientation===`vertical`&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}};function id(e){let{selectionManager:t,collection:n,disabledKeys:r,ref:i,keyboardDelegate:a,layoutDelegate:o}=e,s=Pi({usage:`search`,sensitivity:`base`}),c=t.disabledBehavior,l=(0,b.useMemo)(()=>a||new rd({collection:n,disabledKeys:r,disabledBehavior:c,ref:i,collator:s,layoutDelegate:o}),[a,o,n,r,i,s,c]),{collectionProps:u}=Qu({...e,ref:i,selectionManager:t,keyboardDelegate:l});return{listProps:u}}var ad=e=>(0,V.jsx)(`svg`,{fill:`none`,height:`24`,viewBox:`0 0 24 24`,width:`24`,xmlns:`http://www.w3.org/2000/svg`,...e,children:(0,V.jsx)(`path`,{d:`
          M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2Z
          M16.78 9.7L11.11 15.37C10.97 15.51 10.78 15.59 10.58 15.59C10.38 15.59 10.19 15.51 10.05 15.37L7.22 12.54
          C6.93 12.25 6.93 11.77 7.22 11.48C7.51 11.19 7.99 11.19 8.28 11.48L10.58 13.78L15.72 8.64
          C16.01 8.35 16.49 8.35 16.78 8.64C17.07 8.93 17.07 9.4 16.78 9.7Z
        `})}),od=e=>(0,V.jsx)(`svg`,{className:`fill-current`,fill:`none`,height:`24`,viewBox:`0 0 24 24`,width:`24`,xmlns:`http://www.w3.org/2000/svg`,...e,children:(0,V.jsx)(`path`,{clipRule:`evenodd`,d:`M3 10.417C3 7.219 3 5.62 3.378 5.082C3.755 4.545 5.258 4.03 8.265 3.001L8.838 2.805C10.405 2.268 11.188 2 12 2C12.812 2 13.595 2.268 15.162 2.805L15.735 3.001C18.742 4.03 20.245 4.545 20.622 5.082C21 5.62 21 7.22 21 10.417V11.991C21 17.629 16.761 20.366 14.101 21.527C13.38 21.842 13.02 22 12 22C10.98 22 10.62 21.842 9.899 21.527C7.239 20.365 3 17.63 3 11.991V10.417ZM12 7.25C12.1989 7.25 12.3897 7.32902 12.5303 7.46967C12.671 7.61032 12.75 7.80109 12.75 8V12C12.75 12.1989 12.671 12.3897 12.5303 12.5303C12.3897 12.671 12.1989 12.75 12 12.75C11.8011 12.75 11.6103 12.671 11.4697 12.5303C11.329 12.3897 11.25 12.1989 11.25 12V8C11.25 7.80109 11.329 7.61032 11.4697 7.46967C11.6103 7.32902 11.8011 7.25 12 7.25ZM12 16C12.2652 16 12.5196 15.8946 12.7071 15.7071C12.8946 15.5196 13 15.2652 13 15C13 14.7348 12.8946 14.4804 12.7071 14.2929C12.5196 14.1054 12.2652 14 12 14C11.7348 14 11.4804 14.1054 11.2929 14.2929C11.1054 14.4804 11 14.7348 11 15C11 15.2652 11.1054 15.5196 11.2929 15.7071C11.4804 15.8946 11.7348 16 12 16Z`,fill:`currentColor`,fillRule:`evenodd`})}),sd=e=>(0,V.jsx)(`svg`,{fill:`none`,height:`24`,viewBox:`0 0 24 24`,width:`24`,xmlns:`http://www.w3.org/2000/svg`,...e,children:(0,V.jsx)(`path`,{d:`M12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22ZM12.75 16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16L11.25 11C11.25 10.59 11.59 10.25 12 10.25C12.41 10.25 12.75 10.59 12.75 11L12.75 16ZM11.08 7.62C11.13 7.49 11.2 7.39 11.29 7.29C11.39 7.2 11.5 7.13 11.62 7.08C11.74 7.03 11.87 7 12 7C12.13 7 12.26 7.03 12.38 7.08C12.5 7.13 12.61 7.2 12.71 7.29C12.8 7.39 12.87 7.49 12.92 7.62C12.97 7.74 13 7.87 13 8C13 8.13 12.97 8.26 12.92 8.38C12.87 8.5 12.8 8.61 12.71 8.71C12.61 8.8 12.5 8.87 12.38 8.92C12.14 9.02 11.86 9.02 11.62 8.92C11.5 8.87 11.39 8.8 11.29 8.71C11.2 8.61 11.13 8.5 11.08 8.38C11.03 8.26 11 8.13 11 8C11 7.87 11.03 7.74 11.08 7.62Z`})}),cd=e=>(0,V.jsx)(`svg`,{fill:`none`,height:`24`,viewBox:`0 0 24 24`,width:`24`,xmlns:`http://www.w3.org/2000/svg`,...e,children:(0,V.jsx)(`path`,{d:`M12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22ZM12.75 16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16L11.25 11C11.25 10.59 11.59 10.25 12 10.25C12.41 10.25 12.75 10.59 12.75 11L12.75 16ZM11.08 7.62C11.13 7.49 11.2 7.39 11.29 7.29C11.39 7.2 11.5 7.13 11.62 7.08C11.74 7.03 11.87 7 12 7C12.13 7 12.26 7.03 12.38 7.08C12.5 7.13 12.61 7.2 12.71 7.29C12.8 7.39 12.87 7.49 12.92 7.62C12.97 7.74 13 7.87 13 8C13 8.13 12.97 8.26 12.92 8.38C12.87 8.5 12.8 8.61 12.71 8.71C12.61 8.8 12.5 8.87 12.38 8.92C12.14 9.02 11.86 9.02 11.62 8.92C11.5 8.87 11.39 8.8 11.29 8.71C11.2 8.61 11.13 8.5 11.08 8.38C11.03 8.26 11 8.13 11 8C11 7.87 11.03 7.74 11.08 7.62Z`})}),ld=e=>(0,V.jsxs)(`svg`,{"aria-hidden":`true`,fill:`none`,focusable:`false`,height:`1em`,shapeRendering:`geometricPrecision`,stroke:`currentColor`,strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`1.5`,viewBox:`0 0 24 24`,width:`1em`,...e,children:[(0,V.jsx)(`path`,{d:`M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6`}),(0,V.jsx)(`path`,{d:`M15 3h6v6`}),(0,V.jsx)(`path`,{d:`M10 14L21 3`})]}),ud=e=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:`1em`,role:`presentation`,viewBox:`0 0 24 24`,width:`1em`,...e,children:(0,V.jsx)(`path`,{d:`M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z`,fill:`currentColor`})}),dd=e=>{let{isSelected:t,isIndeterminate:n,disableAnimation:r,...i}=e;return(0,V.jsx)(`svg`,{"aria-hidden":`true`,className:`fill-current`,fill:`none`,focusable:`false`,height:`1em`,role:`presentation`,stroke:`currentColor`,strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,viewBox:`0 0 24 24`,width:`1em`,...i,children:(0,V.jsx)(`path`,{d:`M18 6L6 18M6 6l12 12`})})},fd=e=>(0,V.jsx)(`svg`,{className:`fill-current`,fill:`none`,height:`20`,viewBox:`0 0 20 20`,width:`20`,xmlns:`http://www.w3.org/2000/svg`,...e,children:(0,V.jsx)(`path`,{d:`M17.51 3.85L11.57 0.42C10.6 -0.14 9.4 -0.14 8.42 0.42L2.49 3.85C1.52 4.41 0.919998 5.45 0.919998 6.58V13.42C0.919998 14.54 1.52 15.58 2.49 16.15L8.43 19.58C9.4 20.14 10.6 20.14 11.58 19.58L17.52 16.15C18.49 15.59 19.09 14.55 19.09 13.42V6.58C19.08 5.45 18.48 4.42 17.51 3.85ZM9.25 5.75C9.25 5.34 9.59 5 10 5C10.41 5 10.75 5.34 10.75 5.75V11C10.75 11.41 10.41 11.75 10 11.75C9.59 11.75 9.25 11.41 9.25 11V5.75ZM10.92 14.63C10.87 14.75 10.8 14.86 10.71 14.96C10.52 15.15 10.27 15.25 10 15.25C9.87 15.25 9.74 15.22 9.62 15.17C9.49 15.12 9.39 15.05 9.29 14.96C9.2 14.86 9.13 14.75 9.07 14.63C9.02 14.51 9 14.38 9 14.25C9 13.99 9.1 13.73 9.29 13.54C9.39 13.45 9.49 13.38 9.62 13.33C9.99 13.17 10.43 13.26 10.71 13.54C10.8 13.64 10.87 13.74 10.92 13.87C10.97 13.99 11 14.12 11 14.25C11 14.38 10.97 14.51 10.92 14.63Z`})}),pd=({strokeWidth:e=1.5,...t})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,fill:`none`,focusable:`false`,height:`1em`,role:`presentation`,stroke:`currentColor`,strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:e,viewBox:`0 0 24 24`,width:`1em`,...t,children:(0,V.jsx)(`path`,{d:`m6 9 6 6 6-6`})}),md={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1],spring:[.155,1.105,.295,1.12],springOut:[.57,-.15,.62,.07],softSpring:[.16,1.11,.3,1.02]};md.easeOut,md.easeIn;var hd={scaleSpring:{enter:{transform:`scale(1)`,opacity:1,transition:{type:`spring`,bounce:0,duration:.2}},exit:{transform:`scale(0.85)`,opacity:0,transition:{type:`easeOut`,duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:`scale(0.8)`},enter:{opacity:1,transform:`scale(1)`,transition:{type:`spring`,bounce:0,duration:.3}},exit:{opacity:0,transform:`scale(0.96)`,transition:{type:`easeOut`,bounce:0,duration:.15}}},scale:{enter:{scale:1},exit:{scale:.95}},scaleFadeIn:{enter:{transform:`scale(1)`,opacity:1,transition:{duration:.25,ease:md.easeIn}},exit:{transform:`scale(0.95)`,opacity:0,transition:{duration:.2,ease:md.easeOut}}},scaleInOut:{enter:{transform:`scale(1)`,opacity:1,transition:{duration:.4,ease:md.ease}},exit:{transform:`scale(1.03)`,opacity:0,transition:{duration:.3,ease:md.ease}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:md.ease}},exit:{opacity:0,transition:{duration:.3,ease:md.ease}}},collapse:{enter:{opacity:1,height:`auto`,transition:{height:{type:`spring`,bounce:0,duration:.3},opacity:{easings:`ease`,duration:.4}}},exit:{opacity:0,height:0,transition:{easings:`ease`,duration:.3}}}},gd=`modulepreload`,_d=function(e){return`/dialog-editor/`+e},vd={};const yd=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=_d(t,n),t in vd)return;vd[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:gd,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[]){if(e.status!==`rejected`)continue;i(e.reason)}return e().catch(i)})};var bd=class e extends Set{constructor(t,n,r){super(t),t instanceof e?(this.anchorKey=n??t.anchorKey,this.currentKey=r??t.currentKey):(this.anchorKey=n??null,this.currentKey=r??null)}};function xd(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function Sd(e){let{selectionMode:t=`none`,disallowEmptySelection:n=!1,allowDuplicateSelectionEvents:r,selectionBehavior:i=`toggle`,disabledBehavior:a=`all`}=e,o=(0,b.useRef)(!1),[,s]=(0,b.useState)(!1),c=(0,b.useRef)(null),l=(0,b.useRef)(null),[,u]=(0,b.useState)(null),d=(0,b.useMemo)(()=>Cd(e.selectedKeys),[e.selectedKeys]),f=(0,b.useMemo)(()=>Cd(e.defaultSelectedKeys,new bd),[e.defaultSelectedKeys]),[p,m]=ji(d,f,e.onSelectionChange),h=(0,b.useMemo)(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),[g,_]=(0,b.useState)(i);i===`replace`&&g===`toggle`&&typeof p==`object`&&p.size===0&&_(`replace`);let v=(0,b.useRef)(i);return(0,b.useEffect)(()=>{i!==v.current&&(_(i),v.current=i)},[i]),{selectionMode:t,disallowEmptySelection:n,selectionBehavior:g,setSelectionBehavior:_,get isFocused(){return o.current},setFocused(e){o.current=e,s(e)},get focusedKey(){return c.current},get childFocusStrategy(){return l.current},setFocusedKey(e,t=`first`){c.current=e,l.current=t,u(e)},selectedKeys:p,setSelectedKeys(e){(r||!xd(e,p))&&m(e)},disabledKeys:h,disabledBehavior:a}}function Cd(e,t){return e?e===`all`?`all`:new bd(e):t}function wd(e){return null}wd.getCollectionNode=function*(e,t){let{childItems:n,title:r,children:i}=e,a=e.title||e.children,o=e.textValue||(typeof a==`string`?a:``)||e[`aria-label`]||``;!o&&t?.suppressTextValueWarning,yield{type:`item`,props:e,rendered:a,textValue:o,"aria-label":e[`aria-label`],hasChildNodes:Td(e),*childNodes(){if(n)for(let e of n)yield{type:`item`,value:e};else if(r){let e=[];b.Children.forEach(i,t=>{e.push({type:`item`,element:t})}),yield*e}}}};function Td(e){return e.hasChildItems==null?!!(e.childItems||e.title&&b.Children.count(e.children)>0):e.hasChildItems}var Ed=wd,Dd=class{build(e,t){return this.context=t,Od(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:n}=e;if(b.isValidElement(t)&&t.type===b.Fragment)yield*this.iterateCollection({children:t.props.children,items:n});else if(typeof t==`function`){if(!n)throw Error(`props.children was a function but props.items is missing`);let e=0;for(let r of n)yield*this.getFullNode({value:r,index:e},{renderer:t}),e++}else{let e=[];b.Children.forEach(t,t=>{t&&e.push(t)});let n=0;for(let t of e){let e=this.getFullNode({element:t,index:n},{});for(let t of e)n++,yield t}}}getKey(e,t,n,r){if(e.key!=null)return e.key;if(t.type===`cell`&&t.key!=null)return`${r}${t.key}`;let i=t.value;if(i!=null){let e=i.key??i.id;if(e==null)throw Error(`No key found for item`);return e}return r?`${r}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,n,r){if(b.isValidElement(e.element)&&e.element.type===b.Fragment){let i=[];b.Children.forEach(e.element.props.children,e=>{i.push(e)});let a=e.index??0;for(let e of i)yield*this.getFullNode({element:e,index:a++},t,n,r);return}let i=e.element;if(!i&&e.value&&t&&t.renderer){let n=this.cache.get(e.value);if(n&&(!n.shouldInvalidate||!n.shouldInvalidate(this.context))){n.index=e.index,n.parentKey=r?r.key:null,yield n;return}i=t.renderer(e.value)}if(b.isValidElement(i)){let a=i.type;if(typeof a!=`function`&&typeof a.getCollectionNode!=`function`){let e=i.type;throw Error(`Unknown element <${e}> in collection.`)}let o=a.getCollectionNode(i.props,this.context),s=e.index??0,c=o.next();for(;!c.done&&c.value;){let a=c.value;e.index=s;let l=a.key??null;l??=a.element?null:this.getKey(i,e,t,n);let u=[...this.getFullNode({...a,key:l,index:s,wrapper:kd(e.wrapper,a.wrapper)},this.getChildState(t,a),n?`${n}${i.key}`:i.key,r)];for(let t of u){if(t.value=a.value??e.value??null,t.value&&this.cache.set(t.value,t),e.type&&t.type!==e.type)throw Error(`Unsupported type <${Ad(t.type)}> in <${Ad(r?.type??`unknown parent type`)}>. Only <${Ad(e.type)}> is supported.`);s++,yield t}c=o.next(u)}return}if(e.key==null||e.type==null)return;let a=this,o={type:e.type,props:e.props,key:e.key,parentKey:r?r.key:null,value:e.value??null,level:r?r.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue??``,"aria-label":e[`aria-label`],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes||!1,childNodes:Od(function*(){if(!e.hasChildNodes||!e.childNodes)return;let n=0;for(let r of e.childNodes()){r.key!=null&&(r.key=`${o.key}${r.key}`);let e=a.getFullNode({...r,index:n},a.getChildState(t,r),o.key,o);for(let t of e)n++,yield t}})};yield o}constructor(){this.cache=new WeakMap}};function Od(e){let t=[],n=null;return{*[Symbol.iterator](){for(let e of t)yield e;n||=e();for(let e of n)t.push(e),yield e}}}function kd(e,t){if(e&&t)return n=>e(t(n));if(e)return e;if(t)return t}function Ad(e){return e[0].toUpperCase()+e.slice(1)}function jd(e,t,n){let r=(0,b.useMemo)(()=>new Dd,[]),{children:i,items:a,collection:o}=e;return(0,b.useMemo)(()=>{if(o)return o;let e=r.build({children:i,items:a},n);return t(e)},[r,i,a,o,n,t])}function Md(e,t){return typeof t.getChildren==`function`?t.getChildren(e.key):e.childNodes}function Nd(e){return Pd(e,0)}function Pd(e,t){if(t<0)return;let n=0;for(let r of e){if(n===t)return r;n++}}function Fd(e,t,n){if(t.parentKey===n.parentKey)return t.index-n.index;let r=[...Id(e,t),t],i=[...Id(e,n),n],a=r.slice(0,i.length).findIndex((e,t)=>e!==i[t]);return a===-1?r.findIndex(e=>e===n)>=0?1:(i.findIndex(e=>e===t),-1):(t=r[a],n=i[a],t.index-n.index)}function Id(e,t){let n=[],r=t;for(;r?.parentKey!=null;)r=e.getItem(r.parentKey),r&&n.unshift(r);return n}var Ld=new WeakMap;function Rd(e){let t=Ld.get(e);if(t!=null)return t;let n=0,r=t=>{for(let i of t)i.type===`section`?r(Md(i,e)):i.type===`item`&&n++};return r(e),Ld.set(e,n),n}var zd=class e{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys===`all`?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){if(this.state.selectionMode===`none`)return!1;let t=this.getKey(e);return t==null?!1:this.state.selectedKeys===`all`?this.canSelectItem(t):this.state.selectedKeys.has(t)}get isEmpty(){return this.state.selectedKeys!==`all`&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys===`all`)return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(e=>t.has(e)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let n=this.collection.getItem(t);(!e||n&&Fd(this.collection,n,e)<0)&&(e=n)}return e?.key??null}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let n=this.collection.getItem(t);(!e||n&&Fd(this.collection,n,e)>0)&&(e=n)}return e?.key??null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode===`none`)return;if(this.selectionMode===`single`){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let n;if(this.state.selectedKeys===`all`)n=new bd([t],t,t);else{let e=this.state.selectedKeys,r=e.anchorKey??t;n=new bd(e,r,t);for(let i of this.getKeyRange(r,e.currentKey??t))n.delete(i);for(let e of this.getKeyRange(t,r))this.canSelectItem(e)&&n.add(e)}this.state.setSelectedKeys(n)}getKeyRange(e,t){let n=this.collection.getItem(e),r=this.collection.getItem(t);return n&&r?Fd(this.collection,n,r)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){if(this.layoutDelegate?.getKeyRange)return this.layoutDelegate.getKeyRange(e,t);let n=[],r=e;for(;r!=null;){let e=this.collection.getItem(r);if(e&&(e.type===`item`||e.type===`cell`&&this.allowsCellSelection)&&n.push(r),r===t)return n;r=this.collection.getKeyAfter(r)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type===`cell`&&this.allowsCellSelection)return e;for(;t&&t.type!==`item`&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!==`item`?null:t.key}toggleSelection(e){if(this.selectionMode===`none`)return;if(this.selectionMode===`single`&&!this.isSelected(e)){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let n=new bd(this.state.selectedKeys===`all`?this.getSelectAllKeys():this.state.selectedKeys);n.has(t)?n.delete(t):this.canSelectItem(t)&&(n.add(t),n.anchorKey=t,n.currentKey=t),!(this.disallowEmptySelection&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode===`none`)return;let t=this.getKey(e);if(t==null)return;let n=this.canSelectItem(t)?new bd([t],t,t):new bd;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode===`none`)return;let t=new bd;for(let n of e){let e=this.getKey(n);if(e!=null&&(t.add(e),this.selectionMode===`single`))break}this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=n=>{for(;n!=null;){if(this.canSelectItem(n)){let r=this.collection.getItem(n);r?.type===`item`&&e.push(n),r?.hasChildNodes&&(this.allowsCellSelection||r.type!==`item`)&&t(Nd(Md(r,this.collection))?.key??null)}n=this.collection.getKeyAfter(n)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode===`multiple`&&this.state.setSelectedKeys(`all`)}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys===`all`||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new bd)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!==`none`&&(this.selectionMode===`single`?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior===`toggle`||t&&(t.pointerType===`touch`||t.pointerType===`virtual`)?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;for(let n of t)if(!e.has(n))return!1;return!0}canSelectItem(e){if(this.state.selectionMode===`none`||this.state.disabledKeys.has(e))return!1;let t=this.collection.getItem(e);return!(!t||t!=null&&t.props?.isDisabled||t.type===`cell`&&!this.allowsCellSelection)}isDisabled(e){var t;return this.state.disabledBehavior===`all`&&(this.state.disabledKeys.has(e)||!!((t=this.collection.getItem(e))!=null&&t.props?.isDisabled))}isLink(e){var t;return!!((t=this.collection.getItem(e))!=null&&t.props?.href)}getItemProps(e){return this.collection.getItem(e)?.props}withCollection(t){return new e(t,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(e,t,n){this.collection=e,this.state=t,this.allowsCellSelection=n?.allowsCellSelection??!1,this._isSelectAll=null,this.layoutDelegate=n?.layoutDelegate||null}};function Bd(e){let t=qt(e,{enabled:typeof e.elementType==`string`}),n;return e.orientation===`vertical`&&(n=`vertical`),e.elementType===`hr`?{separatorProps:t}:{separatorProps:{...t,role:`separator`,"aria-orientation":n}}}function Vd(e){let{as:t,className:n,orientation:r,...i}=e,a=t||`hr`;a===`hr`&&r===`vertical`&&(a=`div`);let{separatorProps:o}=Bd({elementType:typeof a==`string`?a:`hr`,orientation:r}),s=(0,b.useMemo)(()=>Pu({orientation:r,className:n}),[r,n]),c=(0,b.useCallback)((e={})=>({className:s,role:`separator`,"data-orientation":r,...o,...i,...e}),[s,r,o,i]);return{Component:a,getDividerProps:c}}var Hd=yc((e,t)=>{let{Component:n,getDividerProps:r}=Vd({...e});return(0,V.jsx)(n,{ref:t,...r()})});Hd.displayName=`HeroUI.Divider`;var Ud=Hd,Wd=e=>({top:{originY:1},bottom:{originY:0},left:{originX:1},right:{originX:0},"top-start":{originX:0,originY:1},"top-end":{originX:1,originY:1},"bottom-start":{originX:0,originY:0},"bottom-end":{originX:1,originY:0},"right-start":{originX:0,originY:0},"right-end":{originX:0,originY:1},"left-start":{originX:1,originY:0},"left-end":{originX:1,originY:1}})?.[e]||{},Gd=e=>({top:`top`,bottom:`bottom`,left:`left`,right:`right`,"top-start":`top start`,"top-end":`top end`,"bottom-start":`bottom start`,"bottom-end":`bottom end`,"left-start":`left top`,"left-end":`left bottom`,"right-start":`right top`,"right-end":`right bottom`})[e],Kd=(e,t)=>{if(t.includes(`-`)){let[n]=t.split(`-`);if(n.includes(e))return!1}return!0},qd=(e,t)=>{if(t.includes(`-`)){let[,n]=t.split(`-`);return`${e}-${n}`}return e},Jd=new WeakMap,Yd=[];function Xd(e,t=document.body){let n=new Set(e),r=new Set,i=e=>{for(let t of e.querySelectorAll(`[data-live-announcer], [data-react-aria-top-layer]`))n.add(t);let t=e=>{if(n.has(e)||e.parentElement&&r.has(e.parentElement)&&e.parentElement.getAttribute(`role`)!==`row`)return NodeFilter.FILTER_REJECT;for(let t of n)if(e.contains(t))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:t}),o=t(e);if(o===NodeFilter.FILTER_ACCEPT&&a(e),o!==NodeFilter.FILTER_REJECT){let e=i.nextNode();for(;e!=null;)a(e),e=i.nextNode()}},a=e=>{let t=Jd.get(e)??0;e.getAttribute(`aria-hidden`)===`true`&&t===0||(t===0&&e.setAttribute(`aria-hidden`,`true`),r.add(e),Jd.set(e,t+1))};Yd.length&&Yd[Yd.length-1].disconnect(),i(t);let o=new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`||t.addedNodes.length===0)continue;if(![...n,...r].some(e=>e.contains(t.target))){for(let e of t.removedNodes)e instanceof Element&&(n.delete(e),r.delete(e));for(let e of t.addedNodes)(e instanceof HTMLElement||e instanceof SVGElement)&&(e.dataset.liveAnnouncer===`true`||e.dataset.reactAriaTopLayer===`true`)?n.add(e):e instanceof Element&&i(e)}}});o.observe(t,{childList:!0,subtree:!0});let s={visibleNodes:n,hiddenNodes:r,observe(){o.observe(t,{childList:!0,subtree:!0})},disconnect(){o.disconnect()}};return Yd.push(s),()=>{o.disconnect();for(let e of r){let t=Jd.get(e);if(t==null)continue;t===1?(e.removeAttribute(`aria-hidden`),Jd.delete(e)):Jd.set(e,t-1)}s===Yd[Yd.length-1]?(Yd.pop(),Yd.length&&Yd[Yd.length-1].observe()):Yd.splice(Yd.indexOf(s),1)}}function Zd(e){let t=Yd[Yd.length-1];if(t&&!t.visibleNodes.has(e))return t.visibleNodes.add(e),()=>{t.visibleNodes.delete(e)}}var Qd=globalThis!=null&&globalThis.document?b.useLayoutEffect:b.useEffect,[dee,$d]=ft({name:`ButtonGroupContext`,strict:!1});function ef(e,t){let{elementType:n=`button`,isDisabled:r,onPress:i,onPressStart:a,onPressEnd:o,onPressUp:s,onPressChange:c,preventFocusOnPress:l,allowFocusWhenDisabled:u,onClick:d,href:f,target:p,rel:m,type:h=`button`,allowTextSelectionOnPress:g}=e,_;_=n===`button`?{type:h,disabled:r}:{role:`button`,href:n===`a`&&!r?f:void 0,target:n===`a`?p:void 0,type:n===`input`?h:void 0,disabled:n===`input`?r:void 0,"aria-disabled":!r||n===`input`?void 0:r,rel:n===`a`?m:void 0};let{pressProps:v,isPressed:y}=ka({onClick:d,onPressStart:a,onPressEnd:o,onPressUp:s,onPressChange:c,onPress:i,isDisabled:r,preventFocusOnPress:l,allowTextSelectionOnPress:g,ref:t}),{focusableProps:b}=fo(e,t);u&&(b.tabIndex=r?-1:b.tabIndex);let x=gr(b,v,Sr(e,{labelable:!0}));return{isPressed:y,buttonProps:gr(_,x,{"aria-haspopup":e[`aria-haspopup`],"aria-expanded":e[`aria-expanded`],"aria-controls":e[`aria-controls`],"aria-pressed":e[`aria-pressed`],"aria-current":e[`aria-current`]})}}var tf=()=>yd(()=>import(`./dist-BLxv5vlB.js`),__vite__mapDeps([0,1,2])).then(e=>e.default),nf=e=>{let{ripples:t=[],motionProps:n,color:r=`currentColor`,style:i,onClear:a}=e;return(0,V.jsx)(V.Fragment,{children:t.map(e=>{let t=At(.01*e.size,.2,e.size>100?.75:.5);return(0,V.jsx)(p,{features:tf,children:(0,V.jsx)(m,{mode:`popLayout`,children:(0,V.jsx)(_.span,{animate:{transform:`scale(2)`,opacity:0},className:`heroui-ripple`,exit:{opacity:0},initial:{transform:`scale(0)`,opacity:.35},style:{position:`absolute`,backgroundColor:r,borderRadius:`100%`,transformOrigin:`center`,pointerEvents:`none`,overflow:`hidden`,inset:0,zIndex:0,top:e.y,left:e.x,width:`${e.size}px`,height:`${e.size}px`,...i},transition:{duration:t},onAnimationComplete:()=>{a(e.key)},...n})})},e.key)})})};nf.displayName=`HeroUI.Ripple`;var rf=nf;function af(e={}){let[t,n]=(0,b.useState)([]),r=(0,b.useCallback)(e=>{let t=e.target,r=Math.max(t.clientWidth,t.clientHeight);n(t=>[...t,{key:Dt(t.length.toString()),size:r,x:e.x-r/2,y:e.y-r/2}])},[]),i=(0,b.useCallback)(e=>{n(t=>t.filter(t=>t.key!==e))},[]);return{ripples:t,onClear:i,onPress:r,...e}}function sf(e){let t=$d(),n=Yt(),r=!!t,{ref:i,as:a,children:o,startContent:s,endContent:c,autoFocus:l,className:u,spinner:d,isLoading:f=!1,disableRipple:p=!1,fullWidth:m=t?.fullWidth??!1,radius:h=t?.radius,size:g=t?.size??`md`,color:_=t?.color??`default`,variant:v=t?.variant??`solid`,disableAnimation:y=t?.disableAnimation??n?.disableAnimation??!1,isDisabled:x=t?.isDisabled??!1,isIconOnly:S=t?.isIconOnly??!1,spinnerPlacement:C=`start`,onPress:w,onClick:T,...E}=e,D=a||`button`,O=typeof D==`string`,k=ht(i),A=(p||n?.disableRipple)??y,{isFocusVisible:j,isFocused:M,focusProps:ee}=Zo({autoFocus:l}),N=x||f,te=(0,b.useMemo)(()=>Iu({size:g,color:_,variant:v,radius:h,fullWidth:m,isDisabled:N,isInGroup:r,disableAnimation:y,isIconOnly:S,className:u}),[g,_,v,h,m,N,r,S,y,u]),{onPress:ne,onClear:re,ripples:P}=af(),F=(0,b.useCallback)(e=>{A||N||y||k.current&&ne(e)},[A,N,y,k,ne]),{buttonProps:I,isPressed:ie}=ef({elementType:a,isDisabled:N,onPress:Nt(w,F),onClick:T,...E},k),{isHovered:ae,hoverProps:L}=bo({isDisabled:N}),oe=(0,b.useCallback)((e={})=>({"data-disabled":R(N),"data-focus":R(M),"data-pressed":R(ie),"data-focus-visible":R(j),"data-hover":R(ae),"data-loading":R(f),...It(I,ee,L,qt(E,{enabled:O}),qt(e)),className:te}),[f,N,M,ie,O,j,ae,I,ee,L,E,te]),se=e=>(0,b.isValidElement)(e)?(0,b.cloneElement)(e,{"aria-hidden":!0,focusable:!1}):null,ce=se(s),le=se(c),ue=(0,b.useMemo)(()=>({sm:`sm`,md:`sm`,lg:`md`})[g],[g]),de=(0,b.useCallback)(()=>({ripples:P,onClear:re}),[P,re]);return{Component:D,children:o,domRef:k,spinner:d,styles:te,startContent:ce,endContent:le,isLoading:f,spinnerPlacement:C,spinnerSize:ue,disableRipple:A,getButtonProps:oe,getRippleProps:de,isIconOnly:S}}function cf(e){let[t,n]=bc(e,fu.variantKeys),r=Yt(),i=e?.variant??r?.spinnerVariant??`default`,{children:a,className:o,classNames:s,label:c,...l}=t,u=(0,b.useMemo)(()=>fu({...n}),[kt(n)]),d=wt(s?.base,o),f=c||a,p=(0,b.useMemo)(()=>f&&typeof f==`string`?f:l[`aria-label`]?``:`Loading`,[a,f,l[`aria-label`]]),m=(0,b.useCallback)(()=>({"aria-label":p,className:u.base({class:d}),...l}),[p,u,d,l]);return{label:f,slots:u,classNames:s,variant:i,getSpinnerProps:m}}var lf=yc((e,t)=>{let{slots:n,classNames:r,label:i,variant:a,getSpinnerProps:o}=cf({...e});return a===`wave`||a===`dots`?(0,V.jsxs)(`div`,{ref:t,...o(),children:[(0,V.jsx)(`div`,{className:n.wrapper({class:r?.wrapper}),children:[...[,,,]].map((e,t)=>(0,V.jsx)(`i`,{className:n.dots({class:r?.dots}),style:{"--dot-index":t}},`dot-${t}`))}),i&&(0,V.jsx)(`span`,{className:n.label({class:r?.label}),children:i})]}):a===`simple`?(0,V.jsxs)(`div`,{ref:t,...o(),children:[(0,V.jsxs)(`svg`,{className:n.wrapper({class:r?.wrapper}),fill:`none`,viewBox:`0 0 24 24`,children:[(0,V.jsx)(`circle`,{className:n.circle1({class:r?.circle1}),cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,V.jsx)(`path`,{className:n.circle2({class:r?.circle2}),d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`,fill:`currentColor`})]}),i&&(0,V.jsx)(`span`,{className:n.label({class:r?.label}),children:i})]}):a===`spinner`?(0,V.jsxs)(`div`,{ref:t,...o(),children:[(0,V.jsx)(`div`,{className:n.wrapper({class:r?.wrapper}),children:[...Array(12)].map((e,t)=>(0,V.jsx)(`i`,{className:n.spinnerBars({class:r?.spinnerBars}),style:{"--bar-index":t}},`star-${t}`))}),i&&(0,V.jsx)(`span`,{className:n.label({class:r?.label}),children:i})]}):(0,V.jsxs)(`div`,{ref:t,...o(),children:[(0,V.jsxs)(`div`,{className:n.wrapper({class:r?.wrapper}),children:[(0,V.jsx)(`i`,{className:n.circle1({class:r?.circle1})}),(0,V.jsx)(`i`,{className:n.circle2({class:r?.circle2})})]}),i&&(0,V.jsx)(`span`,{className:n.label({class:r?.label}),children:i})]})});lf.displayName=`HeroUI.Spinner`;var uf=lf,df=yc((e,t)=>{let{Component:n,domRef:r,children:i,spinnerSize:a,spinner:o=(0,V.jsx)(uf,{color:`current`,size:a}),spinnerPlacement:s,startContent:c,endContent:l,isLoading:u,disableRipple:d,getButtonProps:f,getRippleProps:p,isIconOnly:m}=sf({...e,ref:t});return(0,V.jsxs)(n,{ref:r,...f(),children:[c,u&&s===`start`&&o,u&&m?null:i,u&&s===`end`&&o,l,!d&&(0,V.jsx)(rf,{...p()})]})});df.displayName=`HeroUI.Button`;var ff=df,[pf,mf]=ft({name:`CardContext`,strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"}),hf=yc((e,t)=>{let{as:n,className:r,children:i,...a}=e,o=n||`div`,s=ht(t),{slots:c,classNames:l}=mf(),u=wt(l?.body,r);return(0,V.jsx)(o,{ref:s,className:c.body?.call(c,{class:u}),...a,children:i})});hf.displayName=`HeroUI.CardBody`;var gf=hf;function _f(e){let t=Yt(),[n,r]=bc(e,Lu.variantKeys),{ref:i,as:a,children:o,onClick:s,onPress:c,autoFocus:l,className:u,classNames:d,allowTextSelectionOnPress:f=!0,...p}=n,m=ht(i),h=a||(e.isPressable?`button`:`div`),g=typeof h==`string`,_=e.disableAnimation??t?.disableAnimation??!1,v=e.disableRipple??t?.disableRipple??!1,y=wt(d?.base,u),{onClear:x,onPress:S,ripples:C}=af(),w=(0,b.useCallback)(e=>{v||_||m.current&&S(e)},[v,_,m,S]),{buttonProps:T,isPressed:E}=ef({onPress:Nt(c,w),elementType:a,isDisabled:!e.isPressable,onClick:s,allowTextSelectionOnPress:f,...p},m),{hoverProps:D,isHovered:O}=bo({isDisabled:!e.isHoverable,...p}),{isFocusVisible:k,isFocused:A,focusProps:j}=Zo({autoFocus:l}),M=(0,b.useMemo)(()=>Lu({...r,disableAnimation:_}),[kt(r),_]),ee=(0,b.useMemo)(()=>({slots:M,classNames:d,disableAnimation:_,isDisabled:e.isDisabled,isFooterBlurred:e.isFooterBlurred,fullWidth:e.fullWidth}),[M,d,e.isDisabled,e.isFooterBlurred,_,e.fullWidth]),N=(0,b.useCallback)((t={})=>({ref:m,className:M.base({class:y}),tabIndex:e.isPressable?0:-1,"data-hover":R(O),"data-pressed":R(E),"data-focus":R(A),"data-focus-visible":R(k),"data-disabled":R(e.isDisabled),...It(e.isPressable?{...T,...j,role:`button`}:{},e.isHoverable?D:{},qt(p,{enabled:g}),qt(t))}),[m,M,y,g,e.isPressable,e.isHoverable,e.isDisabled,O,E,k,T,j,D,p]),te=(0,b.useCallback)(()=>({ripples:C,onClear:x}),[C,x]);return{context:ee,domRef:m,Component:h,classNames:d,children:o,isHovered:O,isPressed:E,disableAnimation:_,isPressable:e.isPressable,isHoverable:e.isHoverable,disableRipple:v,handlePress:w,isFocusVisible:k,getCardProps:N,getRippleProps:te}}var vf=yc((e,t)=>{let{children:n,context:r,Component:i,isPressable:a,disableAnimation:o,disableRipple:s,getCardProps:c,getRippleProps:l}=_f({...e,ref:t});return(0,V.jsxs)(i,{...c(),children:[(0,V.jsx)(pf,{value:r,children:n}),a&&!o&&!s&&(0,V.jsx)(rf,{...l()})]})});vf.displayName=`HeroUI.Card`;var yf=vf;function bf(e){let[t,n]=bc(e,Ru.variantKeys),{ref:r,as:i,children:a,avatar:o,startContent:s,endContent:c,onClose:l,classNames:u,className:d,...f}=t,p=i||`div`,m=ht(r),h=wt(u?.base,d),g=!!l,_=e.variant===`dot`,{focusProps:v,isFocusVisible:y}=Zo(),x=(0,b.useMemo)(()=>typeof a==`string`&&a?.length===1,[a]),S=(0,b.useMemo)(()=>!!o||!!s,[o,s]),C=(0,b.useMemo)(()=>!!c||g,[c,g]),w=(0,b.useMemo)(()=>Ru({...n,hasStartContent:S,hasEndContent:C,isOneChar:x,isCloseable:g,isCloseButtonFocusVisible:y}),[kt(n),y,S,C,x,g]),{pressProps:T}=ka({isDisabled:!!e?.isDisabled,onPress:l}),E=()=>({ref:m,className:w.base({class:h}),...f}),D=()=>({role:`button`,tabIndex:0,className:w.closeButton({class:u?.closeButton}),"aria-label":`close chip`,...It(T,v)}),O=e=>(0,b.isValidElement)(e)?(0,b.cloneElement)(e,{className:w.avatar({class:u?.avatar})}):null,k=e=>(0,b.isValidElement)(e)?(0,b.cloneElement)(e,{className:wt(`max-h-[80%]`,e.props.className)}):null;return{Component:p,children:a,slots:w,classNames:u,isDot:_,isCloseable:g,startContent:O(o)||k(s),endContent:k(c),getCloseButtonProps:D,getChipProps:E}}var xf=yc((e,t)=>{let{Component:n,children:r,slots:i,classNames:a,isDot:o,isCloseable:s,startContent:c,endContent:l,getCloseButtonProps:u,getChipProps:d}=bf({...e,ref:t}),f=(0,b.useMemo)(()=>o&&!c?(0,V.jsx)(`span`,{className:i.dot({class:a?.dot})}):c,[i,c,o]),p=(0,b.useMemo)(()=>s?(0,V.jsx)(`span`,{...u(),children:l||(0,V.jsx)(ud,{})}):l,[l,s,u]);return(0,V.jsxs)(n,{...d(),children:[f,(0,V.jsx)(`span`,{className:i.content({class:a?.content}),children:r}),p]})});xf.displayName=`HeroUI.Chip`;var Sf=xf,Cf={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},wf={...Cf,customError:!0,valid:!1},Tf={isInvalid:!1,validationDetails:Cf,validationErrors:[]},Ef=(0,b.createContext)({}),Df=`__formValidationState`+Date.now();function Of(e){if(e[Df]){let{realtimeValidation:t,displayValidation:n,updateValidation:r,resetValidation:i,commitValidation:a}=e[Df];return{realtimeValidation:t,displayValidation:n,updateValidation:r,resetValidation:i,commitValidation:a}}return kf(e)}function kf(e){let{isInvalid:t,validationState:n,name:r,value:i,builtinValidation:a,validate:o,validationBehavior:s=`aria`}=e;n&&(t||=n===`invalid`);let c=t===void 0?null:{isInvalid:t,validationErrors:[],validationDetails:wf},l=(0,b.useMemo)(()=>{if(!o||i==null)return null;let e=jf(o,i);return Mf(e)},[o,i]);a?.validationDetails.valid&&(a=void 0);let u=(0,b.useContext)(Ef),d=(0,b.useMemo)(()=>r?Array.isArray(r)?r.flatMap(e=>Af(u[e])):Af(u[r]):[],[u,r]),[f,p]=(0,b.useState)(u),[m,h]=(0,b.useState)(!1);u!==f&&(p(u),h(!1));let g=(0,b.useMemo)(()=>Mf(m?[]:d),[m,d]),_=(0,b.useRef)(Tf),[v,y]=(0,b.useState)(Tf),x=(0,b.useRef)(Tf),S=()=>{if(!C)return;w(!1);let e=l||a||_.current;Nf(e,x.current)||(x.current=e,y(e))},[C,w]=(0,b.useState)(!1);return(0,b.useEffect)(S),{realtimeValidation:c||g||l||a||Tf,displayValidation:s===`native`?c||g||v:c||g||l||a||v,updateValidation(e){s===`aria`&&!Nf(v,e)?y(e):_.current=e},resetValidation(){let e=Tf;Nf(e,x.current)||(x.current=e,y(e)),s===`native`&&w(!1),h(!0)},commitValidation(){s===`native`&&w(!0),h(!0)}}}function Af(e){return e?Array.isArray(e)?e:[e]:[]}function jf(e,t){if(typeof e==`function`){let n=e(t);if(n&&typeof n!=`boolean`)return Af(n)}return[]}function Mf(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:wf}:null}function Nf(e,t){return e===t?!0:!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((e,n)=>e===t.validationErrors[n])&&Object.entries(e.validationDetails).every(([e,n])=>t.validationDetails[e]===n)}function Pf(e,t,n){let{validationBehavior:r,focus:i}=e;Gn(()=>{if(r===`native`&&n?.current&&!n.current.disabled){let e=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(` `)||`Invalid value.`:``;n.current.setCustomValidity(e),n.current.hasAttribute(`title`)||(n.current.title=``),t.realtimeValidation.isInvalid||t.updateValidation(If(n.current))}});let a=(0,b.useRef)(!1),o=qn(()=>{a.current||t.resetValidation()}),s=qn(e=>{t.displayValidation.isInvalid||t.commitValidation();let r=n?.current?.form;if(!e.defaultPrevented&&n&&r&&Lf(r)===n.current){var a;i?i():(a=n.current)==null||a.focus(),to(`keyboard`)}e.preventDefault()}),c=qn(()=>{t.commitValidation()});(0,b.useEffect)(()=>{let e=n?.current;if(!e)return;let t=e.form,r=t?.reset;return t&&(t.reset=()=>{a.current=!window.event||window.event.type===`message`&&window.event.target instanceof MessagePort,r?.call(t),a.current=!1}),e.addEventListener(`invalid`,s),e.addEventListener(`change`,c),t?.addEventListener(`reset`,o),()=>{e.removeEventListener(`invalid`,s),e.removeEventListener(`change`,c),t?.removeEventListener(`reset`,o),t&&(t.reset=r)}},[n,s,c,o,r])}function Ff(e){let t=e.validity;return{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing,valid:t.valid}}function If(e){return{isInvalid:!e.validity.valid,validationDetails:Ff(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function Lf(e){for(let t=0;t<e.elements.length;t++){let n=e.elements[t];if(!n.validity.valid)return n}return null}function Rf(e,t,n){let{isDisabled:r=!1,isReadOnly:i=!1,value:a,name:o,form:s,children:c,"aria-label":l,"aria-labelledby":u,validationState:d=`valid`,isInvalid:f,onPressStart:p,onPressEnd:m,onPressChange:h,onPress:g,onPressUp:_,onClick:v}=e,y=e=>{e.stopPropagation(),t.setSelected(e.target.checked)},{pressProps:b,isPressed:x}=ka({onPressStart:p,onPressEnd:m,onPressChange:h,onPress:g,onPressUp:_,onClick:v,isDisabled:r}),{pressProps:S,isPressed:C}=ka({onPressStart:p,onPressEnd:m,onPressChange:h,onPressUp:_,onClick:v,onPress(e){var r;g?.(e),t.toggle(),(r=n.current)==null||r.focus()},isDisabled:r||i}),{focusableProps:w}=fo(e,n),T=gr(b,w),E=Sr(e,{labelable:!0});return _i(n,t.defaultSelected,t.setSelected),{labelProps:gr(S,{onClick:e=>e.preventDefault()}),inputProps:gr(E,{"aria-invalid":f||d===`invalid`||void 0,"aria-errormessage":e[`aria-errormessage`],"aria-controls":e[`aria-controls`],"aria-readonly":i||void 0,onChange:y,disabled:r,...a==null?{}:{value:a},name:o,form:s,type:`checkbox`,...T}),isSelected:t.isSelected,isPressed:x||C,isDisabled:r,isReadOnly:i,isInvalid:f||d===`invalid`}}function zf(e){let{id:t,label:n,"aria-labelledby":r,"aria-label":i,labelElementType:a=`label`}=e;t=Qn(t);let o=Qn(),s={};n&&(r=r?`${o} ${r}`:o,s={id:o,htmlFor:a===`label`?t:void 0});let c=ti({id:t,"aria-label":i,"aria-labelledby":r});return{labelProps:s,fieldProps:c}}function Bf(e){let{description:t,errorMessage:n,isInvalid:r,validationState:i}=e,{labelProps:a,fieldProps:o}=zf(e),s=er([!!t,!!n,r,i]),c=er([!!t,!!n,r,i]);return o=gr(o,{"aria-describedby":[s,c,e[`aria-describedby`]].filter(Boolean).join(` `)||void 0}),{labelProps:a,fieldProps:o,descriptionProps:{id:s},errorMessageProps:{id:c}}}function Vf(e={}){let{isReadOnly:t}=e,[n,r]=ji(e.isSelected,e.defaultSelected||!1,e.onChange),[i]=(0,b.useState)(n);function a(e){t||r(e)}function o(){t||r(!n)}return{isSelected:n,defaultSelected:e.defaultSelected??i,setSelected:a,toggle:o}}var Hf=Symbol(`default`);function Uf(e){let t=(0,b.useRef)(null),n=(0,b.useRef)(void 0),r=(0,b.useCallback)(t=>{if(typeof e==`function`){let n=e,r=n(t);return()=>{typeof r==`function`?r():n(null)}}else if(e)return e.current=t,()=>{e.current=null}},[e]);return(0,b.useMemo)(()=>({get current(){return t.current},set current(e){t.current=e,n.current&&=(n.current(),void 0),e!=null&&(n.current=r(e))}}),[r])}function Wf(e,t){let n=(0,b.useContext)(e);if(t===null)return null;if(n&&typeof n==`object`&&`slots`in n&&n.slots){let e=new Intl.ListFormat().format(Object.keys(n.slots).map(e=>`"${e}"`));if(!t&&!n.slots[Hf])throw Error(`A slot prop is required. Valid slot names are ${e}.`);let r=t||Hf;if(!n.slots[r])throw Error(`Invalid slot "${t}". Valid slot names are ${e}.`);return n.slots[r]}return n}function Gf(e,t,n){let{ref:r,...i}=Wf(n,e.slot)||{},a=Uf((0,b.useMemo)(()=>Lt(t,r),[t,r])),o=It(i,e);return`style`in i&&i.style&&`style`in e&&e.style&&(typeof i.style==`function`||typeof e.style==`function`?o.style=t=>{let n=typeof i.style==`function`?i.style(t):i.style,r={...t.defaultStyle,...n},a=typeof e.style==`function`?e.style({...t,defaultStyle:r}):e.style;return{...r,...a}}:o.style={...i.style,...e.style}),[o,a]}var Kf=(0,b.createContext)(null),qf=(0,b.forwardRef)(function(e,t){[e,t]=Gf(e,t,Kf);let{validationErrors:n,validationBehavior:r=`native`,children:i,className:a,...o}=e,s=(0,b.useMemo)(()=>Fu({className:a}),[a]);return(0,V.jsx)(`form`,{noValidate:r!==`native`,...o,ref:t,className:s,children:(0,V.jsx)(Kf.Provider,{value:{...e,validationBehavior:r},children:(0,V.jsx)(Ef.Provider,{value:n??{},children:i})})})}),Jf=(0,b.forwardRef)(function(e,t){let n=Yt(),r=e.validationBehavior??n?.validationBehavior??`native`;return(0,V.jsx)(qf,{...e,ref:t,validationBehavior:r})});function Yf(e,t){let{elementType:n=`a`,onPress:r,onPressStart:i,onPressEnd:a,onClick:o,isDisabled:s,...c}=e,l={};n!==`a`&&(l={role:`link`,tabIndex:s?void 0:0});let{focusableProps:u}=fo(e,t),{pressProps:d,isPressed:f}=ka({onClick:o,onPress:r,onPressStart:i,onPressEnd:a,isDisabled:s,ref:t}),p=Sr(c,{labelable:!0,isLink:n===`a`}),m=gr(u,d),h=Hr(),g=qr(e);return{isPressed:f,linkProps:gr(p,g,{...m,...l,"aria-disabled":s||void 0,"aria-current":e[`aria-current`],onClick:t=>{var n;(n=d.onClick)==null||n.call(d,t),Jr(t,h,e.href,e.routerOptions)}})}}function Xf(e){let t=Yt(),[n,r]=bc(e,Ou.variantKeys),{ref:i,as:a,children:o,anchorIcon:s,isExternal:c=!1,showAnchorIcon:l=!1,autoFocus:u=!1,className:d,onPress:f,onPressStart:p,onPressEnd:m,onClick:h,...g}=n,_=a||`a`,v=ht(i),y=e?.disableAnimation??t?.disableAnimation??!1,{linkProps:x}=Yf({...g,onPress:f,onPressStart:p,onPressEnd:m,onClick:h,isDisabled:e.isDisabled,elementType:`${a}`},v),{isFocused:S,isFocusVisible:C,focusProps:w}=Zo({autoFocus:u});c&&(g.rel=g.rel??`noopener noreferrer`,g.target=g.target??`_blank`);let T=(0,b.useMemo)(()=>Ou({...r,disableAnimation:y,className:d}),[kt(r),y,d]),E=(0,b.useCallback)(()=>({ref:v,className:T,"data-focus":R(S),"data-disabled":R(e.isDisabled),"data-focus-visible":R(C),...It(w,x,g)}),[T,S,C,w,x,g]);return{Component:_,children:o,anchorIcon:s,showAnchorIcon:l,getLinkProps:E}}var Zf=yc((e,t)=>{let{Component:n,children:r,showAnchorIcon:i,anchorIcon:a=(0,V.jsx)(ld,{className:ku}),getLinkProps:o}=Xf({ref:t,...e});return(0,V.jsx)(n,{...o(),children:(0,V.jsxs)(V.Fragment,{children:[r,i&&a]})})});Zf.displayName=`HeroUI.Link`;var Qf=Zf,$f=e=>typeof e==`object`&&!!e&&e.nodeType===1,ep=(e,t)=>(!t||e!==`hidden`)&&e!==`visible`&&e!==`clip`,tp=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let n=getComputedStyle(e,null);return ep(n.overflowY,t)||ep(n.overflowX,t)||(e=>{let t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch{return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},np=(e,t,n,r,i,a,o,s)=>a<e&&o>t||a>e&&o<t?0:a<=e&&s<=n||o>=t&&s>=n?a-e-r:o>t&&s<n||a<e&&s>n?o-t+i:0,rp=e=>e.parentElement??(e.getRootNode().host||null),ip=(e,t)=>{if(typeof document>`u`)return[];let{scrollMode:n,block:r,inline:i,boundary:a,skipOverflowHiddenElements:o}=t,s=typeof a==`function`?a:e=>e!==a;if(!$f(e))throw TypeError(`Invalid target`);let c=document.scrollingElement||document.documentElement,l=[],u=e;for(;$f(u)&&s(u);){if(u=rp(u),u===c){l.push(u);break}u!=null&&u===document.body&&tp(u)&&!tp(document.documentElement)||u!=null&&tp(u,o)&&l.push(u)}let d=window.visualViewport?.width??innerWidth,f=window.visualViewport?.height??innerHeight,{scrollX:p,scrollY:m}=window,{height:h,width:g,top:_,right:v,bottom:y,left:b}=e.getBoundingClientRect(),{top:x,right:S,bottom:C,left:w}=(e=>{let t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e),T=r===`start`||r===`nearest`?_-x:r===`end`?y+C:_+h/2-x+C,E=i===`center`?b+g/2-w+S:i===`end`?v+S:b-w,D=[];for(let e=0;e<l.length;e++){let t=l[e],{height:a,width:o,top:s,right:u,bottom:x,left:S}=t.getBoundingClientRect();if(n===`if-needed`&&_>=0&&b>=0&&y<=f&&v<=d&&(t===c&&!tp(t)||_>=s&&y<=x&&b>=S&&v<=u))return D;let C=getComputedStyle(t),w=parseInt(C.borderLeftWidth,10),O=parseInt(C.borderTopWidth,10),k=parseInt(C.borderRightWidth,10),A=parseInt(C.borderBottomWidth,10),j=0,M=0,ee=`offsetWidth`in t?t.offsetWidth-t.clientWidth-w-k:0,N=`offsetHeight`in t?t.offsetHeight-t.clientHeight-O-A:0,te=`offsetWidth`in t?t.offsetWidth===0?0:o/t.offsetWidth:0,ne=`offsetHeight`in t?t.offsetHeight===0?0:a/t.offsetHeight:0;if(c===t)j=r===`start`?T:r===`end`?T-f:r===`nearest`?np(m,m+f,f,O,A,m+T,m+T+h,h):T-f/2,M=i===`start`?E:i===`center`?E-d/2:i===`end`?E-d:np(p,p+d,d,w,k,p+E,p+E+g,g),j=Math.max(0,j+m),M=Math.max(0,M+p);else{j=r===`start`?T-s-O:r===`end`?T-x+A+N:r===`nearest`?np(s,x,a,O,A+N,T,T+h,h):T-(s+a/2)+N/2,M=i===`start`?E-S-w:i===`center`?E-(S+o/2)+ee/2:i===`end`?E-u+k+ee:np(S,u,o,w,k+ee,E,E+g,g);let{scrollLeft:e,scrollTop:n}=t;j=ne===0?0:Math.max(0,Math.min(n+j/ne,t.scrollHeight-a/ne+N)),M=te===0?0:Math.max(0,Math.min(e+M/te,t.scrollWidth-o/te+ee)),T+=n-j,E+=e-M}D.push({el:t,top:j,left:M})}return D},ap=e=>!1===e?{block:`end`,inline:`nearest`}:(e=>e===Object(e)&&Object.keys(e).length!==0)(e)?e:{block:`start`,inline:`nearest`};function op(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;if((e=>typeof e==`object`&&typeof e.behavior==`function`)(t))return t.behavior(ip(e,t));let n=typeof t==`boolean`||t==null?void 0:t.behavior;for(let{el:r,top:i,left:a}of ip(e,ap(t)))r.scroll({top:i,left:a,behavior:n})}function sp(e){let[t,n]=ji(e.isOpen,e.defaultOpen||!1,e.onOpenChange),r=(0,b.useCallback)(()=>{n(!0)},[n]),i=(0,b.useCallback)(()=>{n(!1)},[n]),a=(0,b.useCallback)(()=>{n(!t)},[n,t]);return{isOpen:t,setOpen:n,open:r,close:i,toggle:a}}var cp=1500,lp=500,up={},dp=0,fp=!1,pp=null,mp=null;function hp(e={}){let{delay:t=cp,closeDelay:n=lp}=e,{isOpen:r,open:i,close:a}=sp(e),o=(0,b.useMemo)(()=>`${++dp}`,[]),s=(0,b.useRef)(null),c=(0,b.useRef)(a),l=()=>{up[o]=f},u=()=>{for(let e in up)e!==o&&(up[e](!0),delete up[e])},d=()=>{s.current&&clearTimeout(s.current),s.current=null,u(),l(),fp=!0,i(),pp&&=(clearTimeout(pp),null),mp&&=(clearTimeout(mp),null)},f=e=>{e||n<=0?(s.current&&clearTimeout(s.current),s.current=null,c.current()):s.current||=setTimeout(()=>{s.current=null,c.current()},n),pp&&=(clearTimeout(pp),null),fp&&(mp&&clearTimeout(mp),mp=setTimeout(()=>{delete up[o],mp=null,fp=!1},Math.max(lp,n)))},p=()=>{u(),l(),!r&&!pp&&!fp?pp=setTimeout(()=>{pp=null,fp=!0,d()},t):r||d()};return(0,b.useEffect)(()=>{c.current=a},[a]),(0,b.useEffect)(()=>()=>{s.current&&clearTimeout(s.current),up[o]&&delete up[o]},[o]),{isOpen:r,open:e=>{!e&&t>0&&!s.current?p():d()},close:f}}function gp(e,t){let n=Sr(e,{labelable:!0}),{hoverProps:r}=bo({onHoverStart:()=>t?.open(!0),onHoverEnd:()=>t?.close()});return{tooltipProps:gr(n,r,{role:`tooltip`})}}function _p(e,t,n){let{isDisabled:r,trigger:i}=e,a=Qn(),o=(0,b.useRef)(!1),s=(0,b.useRef)(!1),c=()=>{(o.current||s.current)&&t.open(s.current)},l=e=>{!o.current&&!s.current&&t.close(e)};(0,b.useEffect)(()=>{let e=e=>{n&&n.current&&e.key===`Escape`&&(e.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener(`keydown`,e,!0),()=>{document.removeEventListener(`keydown`,e,!0)}},[n,t]);let u=()=>{i!==`focus`&&(eo()===`pointer`?o.current=!0:o.current=!1,c())},d=()=>{i!==`focus`&&(s.current=!1,o.current=!1,l())},f=()=>{s.current=!1,o.current=!1,l(!0)},p=()=>{$a()&&(s.current=!0,c())},m=()=>{s.current=!1,o.current=!1,l(!0)},{hoverProps:h}=bo({isDisabled:r,onHoverStart:u,onHoverEnd:d}),{focusableProps:g}=fo({isDisabled:r,onFocus:p,onBlur:m},n);return{triggerProps:{"aria-describedby":t.isOpen?a:void 0,...gr(g,h,{onPointerDown:f,onKeyDown:f}),tabIndex:void 0},tooltipProps:{id:a}}}var vp=[];function yp(e,t){let{disableOutsideEvents:n=!0,isDismissable:r=!1,isKeyboardDismissDisabled:i=!1,isOpen:a,onClose:o,shouldCloseOnBlur:s,shouldCloseOnInteractOutside:c}=e;(0,b.useEffect)(()=>{if(a&&!vp.includes(t))return vp.push(t),()=>{let e=vp.indexOf(t);e>=0&&vp.splice(e,1)}},[a,t]);let l=()=>{vp[vp.length-1]===t&&o&&o()},u=e=>{(!c||c(e.target))&&(vp[vp.length-1]===t&&n&&(e.stopPropagation(),e.preventDefault()),h(t)!==`pressEnd`&&l())},d=e=>{(!c||c(e.target))&&(vp[vp.length-1]===t&&n&&(e.stopPropagation(),e.preventDefault()),l())},f=e=>{e.key===`Escape`&&!i&&!e.nativeEvent.isComposing&&(e.stopPropagation(),e.preventDefault(),l())};xo({isDisabled:!(r&&a),onInteractOutside:r&&a?d:void 0,onInteractOutsideStart:u,ref:t});let{focusWithinProps:p}=mo({isDisabled:!s,onBlurWithin:e=>{!e.relatedTarget||Lo(e.relatedTarget)||(!c||c(e.relatedTarget))&&l()}}),m=e=>{e.target===e.currentTarget&&e.preventDefault()};function h(e){let t=e.current;if(!t)return`unknown`;let n=(t.getAttribute(`role`)||``).toLowerCase(),r=t.getAttribute(`aria-modal`);return(n===`dialog`||n===`alertdialog`)&&(r===null||r.toLowerCase()===`true`)?`pressEnd`:[`listbox`,`menu`,`tree`,`grid`,`combobox`].includes(n)?`pressStart`:`unknown`}return{overlayProps:{onKeyDown:f,...p},underlayProps:{onPointerDown:m}}}function bp(e){let t=Yt(),[n,r]=bc(e,Su.variantKeys),{ref:i,as:a,isOpen:o,content:s,children:c,defaultOpen:l,onOpenChange:u,isDisabled:d,trigger:f,shouldFlip:p=!0,containerPadding:m=12,placement:h=`top`,delay:g=0,closeDelay:_=500,showArrow:v=!1,offset:y=7,crossOffset:x=0,isDismissable:S,shouldCloseOnBlur:C=!0,portalContainer:w,isKeyboardDismissDisabled:T=!1,updatePositionDeps:E=[],shouldCloseOnInteractOutside:D,className:O,onClose:k,motionProps:A,classNames:j,...M}=n,ee=a||`div`,N=e?.disableAnimation??t?.disableAnimation??!1,te=hp({delay:g,closeDelay:_,isDisabled:d,defaultOpen:l,isOpen:o,onOpenChange:e=>{u?.(e),e||k?.()}}),ne=(0,b.useRef)(null),re=(0,b.useRef)(null),P=(0,b.useId)(),F=te.isOpen&&!d;(0,b.useImperativeHandle)(i,()=>mt(re));let{triggerProps:I,tooltipProps:ie}=_p({isDisabled:d,trigger:f},te,ne),{tooltipProps:ae}=gp({isOpen:F,...It(n,ie)},te),{overlayProps:L,placement:oe,updatePosition:se}=aa({isOpen:F,targetRef:ne,placement:Gd(h),overlayRef:re,offset:v?y+3:y,crossOffset:x,shouldFlip:p,containerPadding:m});Qd(()=>{E.length&&se()},E);let{overlayProps:ce}=yp({isOpen:F,onClose:te.close,isDismissable:S,shouldCloseOnBlur:C,isKeyboardDismissDisabled:T,shouldCloseOnInteractOutside:D},re),le=(0,b.useMemo)(()=>Su({...r,disableAnimation:N,radius:e?.radius??`md`,size:e?.size??`md`,shadow:e?.shadow??`sm`}),[kt(r),N,e?.radius,e?.size,e?.shadow]),ue=(0,b.useCallback)((e={},t=null)=>({...It(I,e),ref:Bt(t,ne),"aria-describedby":F?P:void 0}),[I,F,P,te]),de=(0,b.useCallback)(()=>({ref:re,"data-slot":`base`,"data-open":R(F),"data-arrow":R(v),"data-disabled":R(d),"data-placement":qd(oe||`top`,h),...It(ae,ce,M),style:It(L.style,M.style,n.style),className:le.base({class:j?.base}),id:P}),[le,F,v,d,oe,h,ae,ce,M,L,n,P]),fe=(0,b.useCallback)(()=>({"data-slot":`content`,"data-open":R(F),"data-arrow":R(v),"data-disabled":R(d),"data-placement":qd(oe||`top`,h),className:le.content({class:wt(j?.content,O)})}),[le,F,v,d,oe,h,j]);return{Component:ee,content:s,children:c,isOpen:F,triggerRef:ne,showArrow:v,portalContainer:w,placement:h,disableAnimation:N,isDisabled:d,motionProps:A,getTooltipContentProps:fe,getTriggerProps:ue,getTooltipProps:de}}var xp=()=>yd(()=>import(`./dist-BLxv5vlB.js`),__vite__mapDeps([0,1,2])).then(e=>e.default),Sp=yc((e,t)=>{let{Component:n,children:r,content:i,isOpen:a,portalContainer:o,placement:s,disableAnimation:c,motionProps:l,getTriggerProps:u,getTooltipProps:d,getTooltipContentProps:f}=bp({...e,ref:t}),h;try{if(b.Children.count(r)!==1)throw Error();if(!(0,b.isValidElement)(r))h=(0,V.jsx)(`p`,{...u(),children:r});else{let e=r,t=e.props.ref??e.ref;h=(0,b.cloneElement)(e,u(e.props,t))}}catch{h=(0,V.jsx)(`span`,{}),Mt(`Tooltip must have only one child node. Please, check your code.`)}let{ref:g,id:v,style:y,...x}=d(),S=(0,V.jsx)(`div`,{ref:g,id:v,style:y,children:(0,V.jsx)(_.div,{animate:`enter`,exit:`exit`,initial:`exit`,variants:hd.scaleSpring,...It(l,x),style:{...Wd(s)},children:(0,V.jsx)(n,{...f(),children:i})},`${v}-tooltip-inner`)},`${v}-tooltip-content`);return(0,V.jsxs)(V.Fragment,{children:[h,c?a&&(0,V.jsx)(Ts,{portalContainer:o,children:(0,V.jsx)(`div`,{ref:g,id:v,style:y,...x,children:(0,V.jsx)(n,{...f(),children:i})})}):(0,V.jsx)(p,{features:xp,children:(0,V.jsx)(m,{children:a&&(0,V.jsx)(Ts,{portalContainer:o,children:S})})})]})});Sp.displayName=`HeroUI.Tooltip`;var Cp=Sp;function wp(e,t,n){let{labelProps:r,inputProps:i,isSelected:a,isPressed:o,isDisabled:s,isReadOnly:c}=Rf(e,t,n);return{labelProps:r,inputProps:{...i,role:`switch`,checked:a},isSelected:a,isPressed:o,isDisabled:s,isReadOnly:c}}function Tp(e={}){let t=Yt(),[n,r]=bc(e,xu.variantKeys),{ref:i,as:a,name:o,value:s=``,isReadOnly:c=!1,autoFocus:l=!1,startContent:u,endContent:d,defaultSelected:f,isSelected:p,children:m,thumbIcon:h,className:g,classNames:_,onChange:v,onValueChange:y,...x}=n,S=a||`label`,C=(0,b.useRef)(null),w=(0,b.useRef)(null),T=e.disableAnimation??t?.disableAnimation??!1,E=(0,b.useId)(),D=(0,b.useMemo)(()=>{let t=x[`aria-label`]||typeof m==`string`?m:void 0;return{name:o,value:s,children:m,autoFocus:l,defaultSelected:f,isSelected:p,isDisabled:!!e.isDisabled,isReadOnly:c,"aria-label":t,"aria-labelledby":x[`aria-labelledby`]||E,onChange:y}},[s,o,E,m,l,c,p,f,e.isDisabled,x[`aria-label`],x[`aria-labelledby`],y]),O=Vf(D);Qd(()=>{if(!w.current)return;let e=!!w.current.checked;O.setSelected(e)},[w.current]);let{inputProps:k,isPressed:A,isReadOnly:j}=wp(D,O,w),{focusProps:M,isFocused:ee,isFocusVisible:N}=Zo({autoFocus:k.autoFocus}),{hoverProps:te,isHovered:ne}=bo({isDisabled:k.disabled}),re=D.isDisabled||j?!1:A,P=k.checked,F=k.disabled,I=(0,b.useMemo)(()=>xu({...r,disableAnimation:T}),[kt(r),T]),ie=wt(_?.base,g),ae=e=>({...It(te,x,e),ref:C,className:I.base({class:wt(ie,e?.className)}),"data-disabled":R(F),"data-selected":R(P),"data-readonly":R(j),"data-focus":R(ee),"data-focus-visible":R(N),"data-hover":R(ne),"data-pressed":R(re)}),L=(0,b.useCallback)((e={})=>({...e,"aria-hidden":!0,className:wt(I.wrapper({class:wt(_?.wrapper,e?.className)}))}),[I,_?.wrapper]),oe=(e={})=>({...It(k,M,e),ref:Bt(w,i),id:k.id,className:I.hiddenInput({class:_?.hiddenInput}),onChange:Nt(v,k.onChange)}),se=(0,b.useCallback)((e={})=>({...e,className:I.thumb({class:wt(_?.thumb,e?.className)})}),[I,_?.thumb]),ce=(0,b.useCallback)((e={})=>({...e,id:E,className:I.label({class:wt(_?.label,e?.className)})}),[I,_?.label,F,P]),le=(0,b.useCallback)((e={includeStateProps:!1})=>It({width:`1em`,height:`1em`,className:I.thumbIcon({class:wt(_?.thumbIcon)})},e.includeStateProps?{isSelected:P}:{}),[I,_?.thumbIcon,P]),ue=(0,b.useCallback)((e={})=>({width:`1em`,height:`1em`,...e,className:I.startContent({class:wt(_?.startContent,e?.className)})}),[I,_?.startContent,P]),de=(0,b.useCallback)((e={})=>({width:`1em`,height:`1em`,...e,className:I.endContent({class:wt(_?.endContent,e?.className)})}),[I,_?.endContent,P]);return{Component:S,slots:I,classNames:_,domRef:C,children:m,thumbIcon:h,startContent:u,endContent:d,isHovered:ne,isSelected:P,isPressed:re,isFocused:ee,isFocusVisible:N,isDisabled:F,getBaseProps:ae,getWrapperProps:L,getInputProps:oe,getLabelProps:ce,getThumbProps:se,getThumbIconProps:le,getStartContentProps:ue,getEndContentProps:de}}var Ep=yc((e,t)=>{let{Component:n,children:r,startContent:i,endContent:a,thumbIcon:o,getBaseProps:s,getInputProps:c,getWrapperProps:l,getThumbProps:u,getThumbIconProps:d,getLabelProps:f,getStartContentProps:p,getEndContentProps:m}=Tp({...e,ref:t}),h=typeof o==`function`?o(d({includeStateProps:!0})):o&&(0,b.cloneElement)(o,d()),g=i&&(0,b.cloneElement)(i,p()),_=a&&(0,b.cloneElement)(a,m());return(0,V.jsxs)(n,{...s(),children:[(0,V.jsx)(`input`,{...c()}),(0,V.jsxs)(`span`,{...l(),children:[i&&g,(0,V.jsx)(`span`,{...u(),children:o&&h}),a&&_]}),r&&(0,V.jsx)(`span`,{...f(),children:r})]})});Ep.displayName=`HeroUI.Switch`;var Dp=Ep;function Op(e={}){let{rerender:t=!1,delay:n=0}=e,r=(0,b.useRef)(!1),[i,a]=(0,b.useState)(!1);return(0,b.useEffect)(()=>{r.current=!0;let e=null;return t&&(n>0?e=setTimeout(()=>{a(!0)},n):a(!0)),()=>{r.current=!1,t&&a(!1),e&&clearTimeout(e)}},[t]),[(0,b.useCallback)(()=>r.current,[]),i]}function kp(e,t){let{inputElementType:n=`input`,isDisabled:r=!1,isRequired:i=!1,isReadOnly:a=!1,type:o=`text`,validationBehavior:s=`aria`}=e,[c,l]=ji(e.value,e.defaultValue||``,e.onChange),{focusableProps:u}=fo(e,t),d=Of({...e,value:c}),{isInvalid:f,validationErrors:p,validationDetails:m}=d.displayValidation,{labelProps:h,fieldProps:g,descriptionProps:_,errorMessageProps:v}=Bf({...e,isInvalid:f,errorMessage:e.errorMessage||p}),y=Sr(e,{labelable:!0}),x={type:o,pattern:e.pattern},[S]=(0,b.useState)(c);return _i(t,e.defaultValue??S,l),Pf(e,d,t),(0,b.useEffect)(()=>{if(t.current instanceof rr(t.current).HTMLTextAreaElement){let e=t.current;Object.defineProperty(e,`defaultValue`,{get:()=>e.value,set:()=>{},configurable:!0})}},[t]),{labelProps:h,inputProps:gr(y,n===`input`?x:void 0,{disabled:r,readOnly:a,required:i&&s===`native`,"aria-required":i&&s===`aria`||void 0,"aria-invalid":f||void 0,"aria-errormessage":e[`aria-errormessage`],"aria-activedescendant":e[`aria-activedescendant`],"aria-autocomplete":e[`aria-autocomplete`],"aria-haspopup":e[`aria-haspopup`],"aria-controls":e[`aria-controls`],value:c,onChange:e=>l(e.target.value),autoComplete:e.autoComplete,autoCapitalize:e.autoCapitalize,maxLength:e.maxLength,minLength:e.minLength,name:e.name,form:e.form,placeholder:e.placeholder,inputMode:e.inputMode,autoCorrect:e.autoCorrect,spellCheck:e.spellCheck,enterKeyHint:e.enterKeyHint,onCopy:e.onCopy,onCut:e.onCut,onPaste:e.onPaste,onCompositionEnd:e.onCompositionEnd,onCompositionStart:e.onCompositionStart,onCompositionUpdate:e.onCompositionUpdate,onSelect:e.onSelect,onBeforeInput:e.onBeforeInput,onInput:e.onInput,...u,...g}),descriptionProps:_,errorMessageProps:v,isInvalid:f,validationErrors:p,validationDetails:m}}function Ap(e){let t=Yt(),{validationBehavior:n}=Wf(Kf)||{},[r,i]=bc(e,Du.variantKeys),{ref:a,as:o,type:s,label:c,baseRef:l,wrapperRef:u,description:d,className:f,classNames:p,autoFocus:m,startContent:h,endContent:g,onClear:_,onChange:v,validationState:y,validationBehavior:x=n??t?.validationBehavior??`native`,innerWrapperRef:S,onValueChange:C=()=>{},...w}=r,T=(0,b.useCallback)(e=>{C(e??``)},[C]),[E,D]=(0,b.useState)(!1),O=o||`div`,k=e.disableAnimation??t?.disableAnimation??!1,A=ht(a),j=ht(l),M=ht(u),ee=ht(S),[N,te]=ji(r.value,r.defaultValue??``,T),ne=s===`file`,re=(A?.current?.files?.length??0)>0,P=[`date`,`time`,`month`,`week`,`range`].includes(s),F=!xt(N)||P||re,I=F||E,ie=s===`hidden`,ae=e.isMultiline,L=wt(p?.base,f,F?`is-filled`:``),oe=(0,b.useCallback)(()=>{var e;ne?A.current.value=``:te(``),_?.(),(e=A.current)==null||e.focus()},[te,_,ne]);Qd(()=>{A.current&&te(A.current.value)},[A.current]);let{labelProps:se,inputProps:ce,isInvalid:le,validationErrors:ue,validationDetails:de,descriptionProps:fe,errorMessageProps:pe}=kp({...e,validationBehavior:x,autoCapitalize:e.autoCapitalize,value:N,"aria-label":e.label?e[`aria-label`]:Tt(e[`aria-label`],e.placeholder),inputElementType:ae?`textarea`:`input`,onChange:te},A);ne&&(delete ce.value,delete ce.onChange);let{isFocusVisible:me,isFocused:he,focusProps:ge}=Zo({autoFocus:m,isTextInput:!0}),{isHovered:_e,hoverProps:ve}=bo({isDisabled:!!e?.isDisabled}),{isHovered:ye,hoverProps:be}=bo({isDisabled:!!e?.isDisabled}),{focusProps:xe,isFocusVisible:Se}=Zo(),{focusWithinProps:Ce}=mo({onFocusWithinChange:D}),{pressProps:we}=ka({isDisabled:!!e?.isDisabled||!!e?.isReadOnly,onPress:oe}),Te=y===`invalid`||le,Ee=vc({labelPlacement:e.labelPlacement,label:c}),De=typeof r.errorMessage==`function`?r.errorMessage({isInvalid:Te,validationErrors:ue,validationDetails:de}):r.errorMessage||ue?.join(` `),Oe=!!_||e.isClearable,ke=!!c||!!d||!!De,Ae=!!r.placeholder,je=!!c,Me=!!d||!!De,Ne=Ee===`outside-left`,Pe=Ee===`outside-top`,Fe=Ee===`outside`||Ne||Pe,Ie=Ee===`inside`,Le=A.current?(!A.current.value||A.current.value===``||!N||N===``)&&Ae:!1,Re=!!h,ze=Fe?Ne||Pe||Ae||Ee===`outside`&&Re:!1,Be=Ee===`outside`&&!Ae&&!Re,Ve=(0,b.useMemo)(()=>Du({...i,isInvalid:Te,labelPlacement:Ee,isClearable:Oe,disableAnimation:k}),[kt(i),Te,Ee,Oe,Re,k]),He=(0,b.useCallback)((t={})=>({ref:j,className:Ve.base({class:L}),"data-slot":`base`,"data-filled":R(F||Ae||Re||Le||ne),"data-filled-within":R(I||Ae||Re||Le||ne),"data-focus-within":R(E),"data-focus-visible":R(me),"data-readonly":R(e.isReadOnly),"data-focus":R(he),"data-hover":R(_e||ye),"data-required":R(e.isRequired),"data-invalid":R(Te),"data-disabled":R(e.isDisabled),"data-has-elements":R(ke),"data-has-helper":R(Me),"data-has-label":R(je),"data-has-value":R(!Le),"data-hidden":R(ie),...Ce,...t}),[Ve,L,F,he,_e,ye,Te,Me,je,ke,Le,Re,E,me,I,Ae,Ce,ie,e.isReadOnly,e.isRequired,e.isDisabled]),Ue=(0,b.useCallback)((e={})=>({"data-slot":`label`,className:Ve.label({class:p?.label}),...It(se,be,e)}),[Ve,ye,se,p?.label]),We=(0,b.useCallback)(t=>{t.key===`Escape`&&N&&(Oe||_)&&!e.isReadOnly&&(te(``),_?.())},[N,te,_,Oe,e.isReadOnly]),Ge=(0,b.useCallback)((t={})=>({"data-slot":`input`,"data-filled":R(F),"data-filled-within":R(I),"data-has-start-content":R(Re),"data-has-end-content":R(!!g),"data-type":s,className:Ve.input({class:wt(p?.input,F?`is-filled`:``,ae?`pe-0`:``,s===`password`?`[&::-ms-reveal]:hidden`:``)}),...It(ge,ce,qt(w,{enabled:!0,labelable:!0,omitEventNames:new Set(Object.keys(ce))}),t),"aria-readonly":R(e.isReadOnly),onChange:Nt(ce.onChange,v),onKeyDown:Nt(ce.onKeyDown,t.onKeyDown,We),ref:A}),[Ve,N,ge,ce,w,F,I,Re,g,p?.input,e.isReadOnly,e.isRequired,v,We]),Ke=(0,b.useCallback)((e={})=>({ref:M,"data-slot":`input-wrapper`,"data-hover":R(_e||ye),"data-focus-visible":R(me),"data-focus":R(he),className:Ve.inputWrapper({class:wt(p?.inputWrapper,F?`is-filled`:``)}),...It(e,ve),onClick:e=>{A.current&&e.currentTarget===e.target&&A.current.focus()},style:{cursor:`text`,...e.style}}),[Ve,_e,ye,me,he,N,p?.inputWrapper]),qe=(0,b.useCallback)((e={})=>({...e,ref:ee,"data-slot":`inner-wrapper`,onClick:e=>{A.current&&e.currentTarget===e.target&&A.current.focus()},className:Ve.innerWrapper({class:wt(p?.innerWrapper,e?.className)})}),[Ve,p?.innerWrapper]),Je=(0,b.useCallback)((e={})=>({...e,"data-slot":`main-wrapper`,className:Ve.mainWrapper({class:wt(p?.mainWrapper,e?.className)})}),[Ve,p?.mainWrapper]),Ye=(0,b.useCallback)((e={})=>({...e,"data-slot":`helper-wrapper`,className:Ve.helperWrapper({class:wt(p?.helperWrapper,e?.className)})}),[Ve,p?.helperWrapper]),Xe=(0,b.useCallback)((e={})=>({...e,...fe,"data-slot":`description`,className:Ve.description({class:wt(p?.description,e?.className)})}),[Ve,p?.description]),Ze=(0,b.useCallback)((e={})=>({...e,...pe,"data-slot":`error-message`,className:Ve.errorMessage({class:wt(p?.errorMessage,e?.className)})}),[Ve,pe,p?.errorMessage]),Qe=(0,b.useCallback)((t={})=>({...t,type:`button`,tabIndex:-1,disabled:e.isDisabled,"aria-label":`clear input`,"data-slot":`clear-button`,"data-focus-visible":R(Se),className:Ve.clearButton({class:wt(p?.clearButton,t?.className)}),...It(we,xe)}),[Ve,Se,we,xe,p?.clearButton]);return{Component:O,classNames:p,domRef:A,label:c,description:d,startContent:h,endContent:g,labelPlacement:Ee,isClearable:Oe,hasHelper:Me,hasStartContent:Re,isLabelOutside:ze,isOutsideLeft:Ne,isOutsideTop:Pe,isLabelOutsideAsPlaceholder:Be,shouldLabelBeOutside:Fe,shouldLabelBeInside:Ie,hasPlaceholder:Ae,isInvalid:Te,errorMessage:De,getBaseProps:He,getLabelProps:Ue,getInputProps:Ge,getMainWrapperProps:Je,getInputWrapperProps:Ke,getInnerWrapperProps:qe,getHelperWrapperProps:Ye,getDescriptionProps:Xe,getErrorMessageProps:Ze,getClearButtonProps:Qe}}var jp=yc((e,t)=>{let{Component:n,label:r,description:i,isClearable:a,startContent:o,endContent:s,labelPlacement:c,hasHelper:l,isOutsideLeft:u,isOutsideTop:d,shouldLabelBeOutside:f,errorMessage:p,isInvalid:m,getBaseProps:h,getLabelProps:g,getInputProps:_,getInnerWrapperProps:v,getInputWrapperProps:y,getMainWrapperProps:x,getHelperWrapperProps:S,getDescriptionProps:C,getErrorMessageProps:w,getClearButtonProps:T}=Ap({...e,ref:t}),E=r?(0,V.jsx)(`label`,{...g(),children:r}):null,D=(0,b.useMemo)(()=>a?(0,V.jsx)(`button`,{...T(),children:s||(0,V.jsx)(ud,{})}):s,[a,T]),O=(0,b.useMemo)(()=>{let e=m&&p;return!l||!(e||i)?null:(0,V.jsx)(`div`,{...S(),children:e?(0,V.jsx)(`div`,{...w(),children:p}):(0,V.jsx)(`div`,{...C(),children:i})})},[l,m,p,i,S,w,C]),k=(0,b.useMemo)(()=>(0,V.jsxs)(`div`,{...v(),children:[o,(0,V.jsx)(`input`,{..._()}),D]}),[o,D,_,v]),A=(0,b.useMemo)(()=>f?(0,V.jsxs)(`div`,{...x(),children:[(0,V.jsxs)(`div`,{...y(),children:[!u&&!d?E:null,k]}),O]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(`div`,{...y(),children:[E,k]}),O]}),[c,O,f,E,k,p,i,x,y,w,C]);return(0,V.jsxs)(n,{...h(),children:[u||d?E:null,A]})});jp.displayName=`HeroUI.Input`;var Mp=jp;function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Np.apply(null,arguments)}function Pp(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Fp=b.useLayoutEffect,Ip=function(e){var t=b.useRef(e);return Fp(function(){t.current=e}),t},Lp=function(e,t){if(typeof e==`function`){e(t);return}e.current=t},Rp=function(e,t){var n=b.useRef();return b.useCallback(function(r){e.current=r,n.current&&Lp(n.current,null),n.current=t,t&&Lp(t,r)},[t])},zp={"min-height":`0`,"max-height":`none`,height:`0`,visibility:`hidden`,overflow:`hidden`,position:`absolute`,"z-index":`-1000`,top:`0`,right:`0`,display:`block`},Bp=function(e){Object.keys(zp).forEach(function(t){e.style.setProperty(t,zp[t],`important`)})},Vp=null,Hp=function(e,t){var n=e.scrollHeight;return t.sizingStyle.boxSizing===`border-box`?n+t.borderSize:n-t.paddingSize};function Up(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Vp||(Vp=document.createElement(`textarea`),Vp.setAttribute(`tabindex`,`-1`),Vp.setAttribute(`aria-hidden`,`true`),Bp(Vp)),Vp.parentNode===null&&document.body.appendChild(Vp);var i=e.paddingSize,a=e.borderSize,o=e.sizingStyle,s=o.boxSizing;Object.keys(o).forEach(function(e){var t=e;Vp.style[t]=o[t]}),Bp(Vp),Vp.value=t;var c=Hp(Vp,e);Vp.value=t,c=Hp(Vp,e),Vp.value=`x`;var l=Vp.scrollHeight-i,u=l*n;s===`border-box`&&(u=u+i+a),c=Math.max(u,c);var d=l*r;return s===`border-box`&&(d=d+i+a),c=Math.min(d,c),[c,l]}var Wp=function(){},Gp=function(e,t){return e.reduce(function(e,n){return e[n]=t[n],e},{})},Kp=[`borderBottomWidth`,`borderLeftWidth`,`borderRightWidth`,`borderTopWidth`,`boxSizing`,`fontFamily`,`fontSize`,`fontStyle`,`fontWeight`,`letterSpacing`,`lineHeight`,`paddingBottom`,`paddingLeft`,`paddingRight`,`paddingTop`,`tabSize`,`textIndent`,`textRendering`,`textTransform`,`width`,`wordBreak`,`wordSpacing`,`scrollbarGutter`],qp=!!document.documentElement.currentStyle,Jp=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var n=Gp(Kp,t),r=n.boxSizing;if(r===``)return null;qp&&r===`border-box`&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+`px`);var i=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),a=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:i,borderSize:a}};function Yp(e,t,n){var r=Ip(n);b.useLayoutEffect(function(){var n=function(e){return r.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var Xp=function(e,t){Yp(document.body,`reset`,function(n){e.current.form===n.target&&t(n)})},Zp=function(e){Yp(window,`resize`,e)},Qp=function(e){Yp(document.fonts,`loadingdone`,e)},$p=[`cacheMeasurements`,`maxRows`,`minRows`,`onChange`,`onHeightChange`],em=b.forwardRef(function(e,t){var n=e.cacheMeasurements,r=e.maxRows,i=e.minRows,a=e.onChange,o=a===void 0?Wp:a,s=e.onHeightChange,c=s===void 0?Wp:s,l=Pp(e,$p),u=l.value!==void 0,d=b.useRef(null),f=Rp(d,t),p=b.useRef(0),m=b.useRef(),h=function(){var e=d.current,t=n&&m.current?m.current:Jp(e);if(t){m.current=t;var a=Up(t,e.value||e.placeholder||`x`,i,r),o=a[0],s=a[1];p.current!==o&&(p.current=o,e.style.setProperty(`height`,o+`px`,`important`),c(o,{rowHeight:s}))}};return b.useLayoutEffect(h),Xp(d,function(){if(!u){var e=d.current.value;requestAnimationFrame(function(){var t=d.current;t&&e!==t.value&&h()})}}),Zp(h),Qp(h),b.createElement(`textarea`,Np({},l,{onChange:function(e){u||h(),o(e)},ref:f}))}),tm=yc(({style:e,minRows:t=3,maxRows:n=8,cacheMeasurements:r=!1,disableAutosize:i=!1,onHeightChange:a,...o},s)=>{let{Component:c,label:l,description:u,startContent:d,endContent:f,hasHelper:p,shouldLabelBeOutside:m,shouldLabelBeInside:h,isInvalid:g,errorMessage:_,getBaseProps:v,getLabelProps:y,getInputProps:x,getInnerWrapperProps:S,getInputWrapperProps:C,getHelperWrapperProps:w,getDescriptionProps:T,getErrorMessageProps:E,isClearable:D,getClearButtonProps:O}=Ap({...o,ref:s,isMultiline:!0}),[k,A]=(0,b.useState)(t>1),[j,M]=(0,b.useState)(!1),ee=l?(0,V.jsx)(`label`,{...y(),children:l}):null,N=x(),te=(e,r)=>{if(t===1&&A(e>=r.rowHeight*2),n>t){let t=e>=n*r.rowHeight;M(t)}a?.(e,r)},ne=i?(0,V.jsx)(`textarea`,{...N,style:It(N.style,e??{})}):(0,V.jsx)(em,{...N,cacheMeasurements:r,"data-hide-scroll":R(!j),maxRows:n,minRows:t,style:It(N.style,e??{}),onHeightChange:te}),re=(0,b.useMemo)(()=>D?(0,V.jsx)(`button`,{...O(),children:(0,V.jsx)(ud,{})}):null,[D,O]),P=(0,b.useMemo)(()=>d||f?(0,V.jsxs)(`div`,{...S(),children:[d,ne,f]}):(0,V.jsx)(`div`,{...S(),children:ne}),[d,N,f,S]),F=g&&_,I=F||u;return(0,V.jsxs)(c,{...v(),children:[m?ee:null,(0,V.jsxs)(`div`,{...C(),"data-has-multiple-rows":R(k),children:[h?ee:null,P,re]}),p&&I?(0,V.jsx)(`div`,{...w(),children:F?(0,V.jsx)(`div`,{...E(),children:_}):(0,V.jsx)(`div`,{...T(),children:u})}):null]})});tm.displayName=`HeroUI.Textarea`;var nm=tm;function rm(e,t){let{groupRef:n,triggerRef:r,popoverRef:i,showArrow:a,offset:o=7,crossOffset:s=0,scrollRef:c,shouldFlip:l,boundaryElement:u,isDismissable:d=!0,shouldCloseOnBlur:f=!0,shouldCloseOnScroll:p=!0,placement:m=`top`,containerPadding:h,shouldCloseOnInteractOutside:g,isNonModal:_,isKeyboardDismissDisabled:v,updatePositionDeps:y=[],...x}=e,S=_??!0,C=x.trigger===`SubmenuTrigger`,{overlayProps:w,underlayProps:T}=yp({isOpen:t.isOpen,onClose:t.close,shouldCloseOnBlur:f,isDismissable:d||C,isKeyboardDismissDisabled:v,shouldCloseOnInteractOutside:g||(e=>!r.current?.contains(e)),disableOutsideEvents:!S},i),{overlayProps:E,arrowProps:D,placement:O,updatePosition:k,triggerAnchorPoint:A}=aa({...x,shouldFlip:l,crossOffset:s,targetRef:r,overlayRef:i,isOpen:t.isOpen,scrollRef:c,boundaryElement:u,containerPadding:h,placement:Gd(m),offset:a?o+3:o,onClose:S&&!C&&p?t.close:()=>{}});return Qd(()=>{y.length&&k()},y),(0,b.useEffect)(()=>{if(t.isOpen&&i.current)return S?Zd(n?.current??i.current):Xd([n?.current??i.current])},[S,t.isOpen,i,n]),{popoverProps:It(w,E),arrowProps:D,underlayProps:T,placement:O,triggerAnchorPoint:A}}var im=`top`;function am(e){let t=Yt(),[n,r]=bc(e,Su.variantKeys),{as:i,ref:a,children:o,state:s,triggerRef:c,scrollRef:l,defaultOpen:u,onOpenChange:d,isOpen:f,isNonModal:p=!0,shouldFlip:m=!0,containerPadding:h=12,shouldBlockScroll:g=!1,isDismissable:_=!0,shouldCloseOnBlur:v,portalContainer:y,updatePositionDeps:x,dialogProps:S,placement:C=im,triggerType:w=`dialog`,showArrow:T=!1,offset:E=7,crossOffset:D=0,boundaryElement:O,isKeyboardDismissDisabled:k,shouldCloseOnInteractOutside:A,shouldCloseOnScroll:j,triggerAnchorPoint:M,motionProps:ee,className:N,classNames:te,onClose:ne,...re}=n,P=i||`div`,F=ht(a),I=(0,b.useRef)(null),ie=(0,b.useRef)(!1),ae=c||I,L=e.disableAnimation??t?.disableAnimation??!1,oe=sp({isOpen:f,defaultOpen:u,onOpenChange:e=>{d?.(e),e||ne?.()}}),se=s||oe,{popoverProps:ce,underlayProps:le,placement:ue}=rm({triggerRef:ae,isNonModal:p,popoverRef:F,placement:C,offset:E,scrollRef:l,isDismissable:_,shouldCloseOnBlur:v,boundaryElement:O,crossOffset:D,shouldFlip:m,containerPadding:h,updatePositionDeps:x,isKeyboardDismissDisabled:k,shouldCloseOnScroll:j,shouldCloseOnInteractOutside:A,triggerAnchorPoint:M},se),de=(0,b.useMemo)(()=>ue?Kd(ue,C)?ue:C:null,[ue,C]),{triggerProps:fe}=rs({type:w},se,ae),{isFocusVisible:pe,isFocused:me,focusProps:he}=Zo(),ge=(0,b.useMemo)(()=>Su({...r}),[kt(r)]),_e=wt(te?.base,N),ve={"--trigger-anchor-point":M?`${M.x}px ${M.y}px`:void 0};us({isDisabled:!(g&&se.isOpen)});let ye=(e={})=>({ref:F,...It(ce,re,e),style:It(ce.style,re.style,e.style)}),be=(e={})=>({"data-slot":`base`,"data-open":R(se.isOpen),"data-focus":R(me),"data-arrow":R(T),"data-focus-visible":R(pe),"data-placement":ue?qd(ue,C):void 0,...It(he,S,e),className:ge.base({class:wt(_e)}),style:{outline:`none`,...ve}}),xe=(0,b.useCallback)((e={})=>({"data-slot":`content`,"data-open":R(se.isOpen),"data-arrow":R(T),"data-placement":ue?qd(ue,C):void 0,className:ge.content({class:wt(te?.content,e.className)})}),[ge,se.isOpen,T,de,C,te,ue]),Se=(0,b.useCallback)(t=>{var n;let r;return t.pointerType===`touch`&&(e?.backdrop===`blur`||e?.backdrop===`opaque`)?r=setTimeout(()=>{ie.current=!0},100):ie.current=!0,(n=fe.onPress)==null||n.call(fe,t),()=>{clearTimeout(r)}},[fe?.onPress]),Ce=(0,b.useCallback)((e={},t=null)=>{let{isDisabled:n,...r}=e;return{"data-slot":`trigger`,...It({"aria-haspopup":`dialog`},fe,r),onPress:Se,isDisabled:n,className:ge.trigger({class:wt(te?.trigger,e.className),isTriggerDisabled:n}),ref:Lt(t,ae)}},[se,fe,Se,ae]),we=(0,b.useCallback)((e={})=>({"data-slot":`backdrop`,className:ge.backdrop({class:te?.backdrop}),onClick:e=>{if(!ie.current){e.preventDefault();return}se.close(),ie.current=!1},...le,...e}),[ge,se.isOpen,te,le]);return{state:se,Component:P,children:o,classNames:te,showArrow:T,triggerRef:ae,placement:de,isNonModal:p,popoverRef:F,portalContainer:y,isOpen:se.isOpen,onClose:se.close,disableAnimation:L,shouldBlockScroll:g,backdrop:e.backdrop??`transparent`,motionProps:ee,getBackdropProps:we,getPopoverProps:ye,getTriggerProps:Ce,getDialogProps:be,getContentProps:xe}}function om(e,t){let{role:n=`dialog`}=e,r=er();r=e[`aria-label`]?void 0:r;let i=(0,b.useRef)(!1);return(0,b.useEffect)(()=>{if(t.current&&!t.current.contains(document.activeElement)){ao(t.current);let e=setTimeout(()=>{(document.activeElement===t.current||document.activeElement===document.body)&&(i.current=!0,t.current&&(t.current.blur(),ao(t.current)),i.current=!1)},500);return()=>{clearTimeout(e)}}},[t]),hc(),{dialogProps:{...Sr(e,{labelable:!0}),role:n,tabIndex:-1,"aria-labelledby":e[`aria-labelledby`]||r,onBlur:e=>{i.current&&e.stopPropagation()}},titleProps:{id:r}}}var sm=()=>yd(()=>import(`./dist-BLxv5vlB.js`),__vite__mapDeps([0,1,2])).then(e=>e.default),cm=yc(({children:e,motionProps:t,placement:n,disableAnimation:r,style:i={},transformOrigin:a={},...o},s)=>{let c=i;return a.originX!==void 0||a.originY!==void 0?c={...c,transformOrigin:a}:n&&(c={...c,...Wd(n===`center`?`top`:n)}),r?(0,V.jsx)(`div`,{...o,ref:s,children:e}):(0,V.jsx)(p,{features:sm,children:(0,V.jsx)(_.div,{ref:s,animate:`enter`,exit:`exit`,initial:`initial`,style:c,variants:hd.scaleSpringOpacity,...It(o,t),children:e})})});cm.displayName=`HeroUI.FreeSoloPopoverWrapper`;var lm=yc(({children:e,transformOrigin:t,disableDialogFocus:n=!1,...r},i)=>{let{Component:a,state:o,placement:s,backdrop:c,portalContainer:l,disableAnimation:u,motionProps:d,isNonModal:f,getPopoverProps:m,getBackdropProps:h,getDialogProps:g,getContentProps:v}=am({...r,ref:i}),y=b.useRef(null),{dialogProps:x,titleProps:S}=om({},y),C=g({...!n&&{ref:y},...x}),w=b.useMemo(()=>c===`transparent`?null:u?(0,V.jsx)(`div`,{...h()}):(0,V.jsx)(p,{features:sm,children:(0,V.jsx)(_.div,{animate:`enter`,exit:`exit`,initial:`exit`,variants:hd.fade,...h()})}),[c,u,h]);return(0,V.jsxs)(mc,{portalContainer:l,children:[!f&&w,(0,V.jsx)(a,{...m(),children:(0,V.jsxs)(cm,{disableAnimation:u,motionProps:d,placement:s,tabIndex:-1,transformOrigin:t,...C,children:[!f&&(0,V.jsx)(dc,{onDismiss:o.close}),(0,V.jsx)(`div`,{...v(),children:typeof e==`function`?e(S):e}),(0,V.jsx)(dc,{onDismiss:o.close})]})})]})});lm.displayName=`HeroUI.FreeSoloPopover`;var um=lm,[dm,fm]=ft({name:`PopoverContext`,errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),pm=()=>yd(()=>import(`./dist-BLxv5vlB.js`),__vite__mapDeps([0,1,2])).then(e=>e.default),mm=e=>{let{as:t,children:n,className:r,...i}=e,{Component:a,placement:o,backdrop:s,motionProps:c,disableAnimation:l,getPopoverProps:u,getDialogProps:d,getBackdropProps:f,getContentProps:m,isNonModal:h,onClose:g}=fm(),v=(0,b.useRef)(null),{dialogProps:y,titleProps:x}=om({},v),S=d({ref:v,...y,...i}),C=n&&(0,V.jsxs)(V.Fragment,{children:[!h&&(0,V.jsx)(dc,{onDismiss:g}),(0,V.jsx)(t||a||`div`,{...S,children:(0,V.jsx)(`div`,{...m({className:r}),children:typeof n==`function`?n(x):n})}),(0,V.jsx)(dc,{onDismiss:g})]}),w=(0,b.useMemo)(()=>s===`transparent`?null:l?(0,V.jsx)(`div`,{...f()}):(0,V.jsx)(p,{features:pm,children:(0,V.jsx)(_.div,{animate:`enter`,exit:`exit`,initial:`exit`,variants:hd.fade,...f()})}),[s,l,f]),T=o?Wd(o===`center`?`top`:o):void 0,E=(0,V.jsx)(V.Fragment,{children:l?C:(0,V.jsx)(p,{features:pm,children:(0,V.jsx)(_.div,{animate:`enter`,exit:`exit`,initial:`initial`,style:T,variants:hd.scaleSpringOpacity,...c,children:C})})});return(0,V.jsxs)(`div`,{...u(),children:[w,E]})};mm.displayName=`HeroUI.PopoverContent`;var hm=mm,gm=e=>{let{triggerRef:t,getTriggerProps:n}=fm(),{children:r,...i}=e,a=(0,b.useMemo)(()=>typeof r==`string`?(0,V.jsx)(`p`,{children:r}):b.Children.only(r),[r]),o=a.props.ref??a.ref,{onPress:s,isDisabled:c,...l}=(0,b.useMemo)(()=>n(It(i,a.props),o),[n,a.props,i,o]),[,u]=Vt(r,ff),{buttonProps:d}=ef({onPress:s,isDisabled:c},t),f=(0,b.useMemo)(()=>u?.[0]!==void 0,[u]);return f||delete l.preventFocusOnPress,(0,b.cloneElement)(a,It(l,f?{onPress:s,isDisabled:c}:d))};gm.displayName=`HeroUI.PopoverTrigger`;var _m=gm,vm=yc((e,t)=>{let{children:n,...r}=e,i=am({...r,ref:t}),[a,o]=b.Children.toArray(n),s=(0,V.jsx)(mc,{portalContainer:i.portalContainer,children:o});return(0,V.jsxs)(dm,{value:i,children:[a,i.disableAnimation&&i.isOpen?s:(0,V.jsx)(m,{children:i.isOpen?s:null})]})});vm.displayName=`HeroUI.Popover`;var ym=vm,bm={};bm={longPressMessage:`اضغط مطولاً أو اضغط على Alt + السهم لأسفل لفتح القائمة`};var xm={};xm={longPressMessage:`Натиснете продължително или натиснете Alt+ стрелка надолу, за да отворите менюто`};var Sm={};Sm={longPressMessage:`Dlouhým stiskem nebo stisknutím kláves Alt + šipka dolů otevřete nabídku`};var Cm={};Cm={longPressMessage:`Langt tryk eller tryk på Alt + pil ned for at åbne menuen`};var wm={};wm={longPressMessage:`Drücken Sie lange oder drücken Sie Alt + Nach-unten, um das Menü zu öffnen`};var Tm={};Tm={longPressMessage:`Πιέστε παρατεταμένα ή πατήστε Alt + κάτω βέλος για να ανοίξετε το μενού`};var Em={};Em={longPressMessage:`Long press or press Alt + ArrowDown to open menu`};var Dm={};Dm={longPressMessage:`Mantenga pulsado o pulse Alt + flecha abajo para abrir el menú`};var Om={};Om={longPressMessage:`Menüü avamiseks vajutage pikalt või vajutage klahve Alt + allanool`};var km={};km={longPressMessage:`Avaa valikko painamalla pohjassa tai näppäinyhdistelmällä Alt + Alanuoli`};var Am={};Am={longPressMessage:`Appuyez de manière prolongée ou appuyez sur Alt\xA0+\xA0Flèche vers le bas pour ouvrir le menu.`};var jm={};jm={longPressMessage:`לחץ לחיצה ארוכה או הקש Alt + ArrowDown כדי לפתוח את התפריט`};var Mm={};Mm={longPressMessage:`Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika`};var Nm={};Nm={longPressMessage:`Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyíl gombot a menü megnyitásához`};var Pm={};Pm={longPressMessage:`Premere a lungo o premere Alt + Freccia giù per aprire il menu`};var Fm={};Fm={longPressMessage:`長押しまたは Alt+下矢印キーでメニューを開く`};var Im={};Im={longPressMessage:`길게 누르거나 Alt + 아래쪽 화살표를 눌러 메뉴 열기`};var Lm={};Lm={longPressMessage:`Norėdami atidaryti meniu, nuspaudę palaikykite arba paspauskite „Alt + ArrowDown“.`};var Rm={};Rm={longPressMessage:`Lai atvērtu izvēlni, turiet nospiestu vai nospiediet taustiņu kombināciju Alt + lejupvērstā bultiņa`};var zm={};zm={longPressMessage:`Langt trykk eller trykk Alt + PilNed for å åpne menyen`};var Bm={};Bm={longPressMessage:`Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen`};var Vm={};Vm={longPressMessage:`Naciśnij i przytrzymaj lub naciśnij klawisze Alt + Strzałka w dół, aby otworzyć menu`};var Hm={};Hm={longPressMessage:`Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu`};var Um={};Um={longPressMessage:`Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu`};var Wm={};Wm={longPressMessage:`Apăsați lung sau apăsați pe Alt + săgeată în jos pentru a deschide meniul`};var Gm={};Gm={longPressMessage:`Нажмите и удерживайте или нажмите Alt + Стрелка вниз, чтобы открыть меню`};var Km={};Km={longPressMessage:`Ponuku otvoríte dlhým stlačením alebo stlačením klávesu Alt + klávesu so šípkou nadol`};var qm={};qm={longPressMessage:`Za odprtje menija pritisnite in držite gumb ali pritisnite Alt+puščica navzdol`};var Jm={};Jm={longPressMessage:`Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni`};var Ym={};Ym={longPressMessage:`Håll nedtryckt eller tryck på Alt + pil nedåt för att öppna menyn`};var Xm={};Xm={longPressMessage:`Menüyü açmak için uzun basın veya Alt + Aşağı Ok tuşuna basın`};var Zm={};Zm={longPressMessage:`Довго або звичайно натисніть комбінацію клавіш Alt і стрілка вниз, щоб відкрити меню`};var Qm={};Qm={longPressMessage:`长按或按 Alt + 向下方向键以打开菜单`};var $m={};$m={longPressMessage:`長按或按 Alt+向下鍵以開啟功能表`};var eh={};eh={"ar-AE":bm,"bg-BG":xm,"cs-CZ":Sm,"da-DK":Cm,"de-DE":wm,"el-GR":Tm,"en-US":Em,"es-ES":Dm,"et-EE":Om,"fi-FI":km,"fr-FR":Am,"he-IL":jm,"hr-HR":Mm,"hu-HU":Nm,"it-IT":Pm,"ja-JP":Fm,"ko-KR":Im,"lt-LT":Lm,"lv-LV":Rm,"nb-NO":zm,"nl-NL":Bm,"pl-PL":Vm,"pt-BR":Hm,"pt-PT":Um,"ro-RO":Wm,"ru-RU":Gm,"sk-SK":Km,"sl-SI":qm,"sr-SP":Jm,"sv-SE":Ym,"tr-TR":Xm,"uk-UA":Zm,"zh-CN":Qm,"zh-TW":$m};function th(e){return e&&e.__esModule?e.default:e}function nh(e,t,n){let{type:r=`menu`,isDisabled:i,trigger:a=`press`}=e,o=Qn(),{triggerProps:s,overlayProps:c}=rs({type:r},t,n),l=e=>{if(!i&&!(a===`longPress`&&!e.altKey)&&n&&n.current)switch(e.key){case`Enter`:case` `:if(a===`longPress`||e.isDefaultPrevented())return;case`ArrowDown`:`continuePropagation`in e||e.stopPropagation(),e.preventDefault(),t.toggle(`first`);break;case`ArrowUp`:`continuePropagation`in e||e.stopPropagation(),e.preventDefault(),t.toggle(`last`);break;default:`continuePropagation`in e&&e.continuePropagation()}},u=Hn(th(eh),`@react-aria/menu`),{longPressProps:d}=wo({isDisabled:i||a!==`longPress`,accessibilityDescription:u.format(`longPressMessage`),onLongPressStart(){t.close()},onLongPress(){t.open(`first`)}}),f={preventFocusOnPress:!0,onPressStart(e){e.pointerType!==`touch`&&e.pointerType!==`keyboard`&&!i&&(Cr(e.target),t.open(e.pointerType===`virtual`?`first`:null))},onPress(e){e.pointerType===`touch`&&!i&&(Cr(e.target),t.toggle())}};return delete s.onPress,{menuTriggerProps:{...s,...a===`press`?f:d,id:o,onKeyDown:l},menuProps:{...c,"aria-labelledby":o,autoFocus:t.focusStrategy||!0,onClose:t.close}}}var rh=700;function ih(){return dn()||typeof window>`u`?!1:window.screen.width<=rh}function ah(e){let t=sp(e),[n,r]=(0,b.useState)(null),[i,a]=(0,b.useState)([]),o=()=>{a([]),t.close()},s=(e,t)=>{a(n=>t>n.length?n:[...n.slice(0,t),e])},c=(e,t)=>{a(n=>n[t]===e?n.slice(0,t):n)};return{focusStrategy:n,...t,open(e=null){r(e),t.open()},toggle(e=null){r(e),t.toggle()},close(){o()},expandedKeysStack:i,openSubmenu:s,closeSubmenu:c}}var[oh,sh]=ft({name:`NavbarContext`,strict:!0,errorMessage:"useNavbarContext: `context` is undefined. Seems you forgot to wrap component within <Navbar />"}),ch={enter:{height:`calc(100vh - var(--navbar-height))`,transition:{duration:.3,easings:`easeOut`}},exit:{height:0,transition:{duration:.25,easings:`easeIn`}}},lh=()=>yd(()=>import(`./dist-BLxv5vlB.js`),__vite__mapDeps([0,1,2])).then(e=>e.default),uh=yc((e,t)=>{let{className:n,children:r,portalContainer:i,motionProps:a,style:o,...s}=e,c=ht(t),{slots:l,isMenuOpen:u,height:d,disableAnimation:f,classNames:h}=sh(),g=wt(h?.menu,n);return f?u?(0,V.jsx)(mc,{portalContainer:i,children:(0,V.jsx)(`ul`,{ref:c,className:l.menu?.call(l,{class:g}),"data-open":R(u),style:{"--navbar-height":typeof d==`number`?`${d}px`:d},...s,children:r})}):null:(0,V.jsx)(m,{mode:`wait`,children:u?(0,V.jsx)(mc,{portalContainer:i,children:(0,V.jsx)(p,{features:lh,children:(0,V.jsx)(_.ul,{ref:c,layoutScroll:!0,animate:`enter`,className:l.menu?.call(l,{class:g}),"data-open":R(u),exit:`exit`,initial:`exit`,style:{"--navbar-height":typeof d==`number`?`${d}px`:d,...o},variants:ch,...It(a,s),children:r})})}):null})});uh.displayName=`HeroUI.NavbarMenu`;var dh=uh,fh={visible:{y:0,transition:{ease:md.easeOut}},hidden:{y:`-100%`,transition:{ease:md.easeIn}}},ph=typeof window<`u`;function mh(e){return ph?e?{x:e.scrollLeft,y:e.scrollTop}:{x:window.scrollX,y:window.scrollY}:{x:0,y:0}}var hh=e=>{let{elementRef:t,delay:n=30,callback:r,isEnabled:i}=e,a=(0,b.useRef)(i?mh(t?.current):{x:0,y:0}),o=(0,b.useRef)(null),s=(0,b.useCallback)(()=>{let e=mh(t?.current);typeof r==`function`&&r({prevPos:a.current,currPos:e}),a.current=e,o.current=null},[r,t]);return(0,b.useEffect)(()=>{if(!i)return;let e=()=>{n?(o.current&&clearTimeout(o.current),o.current=setTimeout(s,n)):s()},r=t?.current||window;return r.addEventListener(`scroll`,e),()=>{r.removeEventListener(`scroll`,e),o.current&&=(clearTimeout(o.current),null)}},[t?.current,n,s,i]),a.current};function gh(){return window.ResizeObserver!==void 0}function _h(e){let{ref:t,box:n,onResize:r}=e;(0,b.useEffect)(()=>{let e=t?.current;if(e)if(gh()){let t=new window.ResizeObserver(e=>{e.length&&r()});return t.observe(e,{box:n}),()=>{e&&t.unobserve(e)}}else return window.addEventListener(`resize`,r,!1),()=>{window.removeEventListener(`resize`,r,!1)}},[r,t,n])}function vh(e){let t=Yt(),[n,r]=bc(e,Nu.variantKeys),{ref:i,as:a,parentRef:o,height:s=`4rem`,shouldHideOnScroll:c=!1,disableScrollHandler:l=!1,shouldBlockScroll:u=!0,onScrollPositionChange:d,isMenuOpen:f,isMenuDefaultOpen:p,onMenuOpenChange:m=()=>{},motionProps:h,className:g,classNames:_,...v}=n,y=a||`nav`,x=e.disableAnimation??t?.disableAnimation??!1,S=ht(i),C=(0,b.useRef)(0),w=(0,b.useRef)(0),[T,E]=(0,b.useState)(!1),D=(0,b.useCallback)(e=>{m(e||!1)},[m]),[O,k]=ji(f,p??!1,D),A=()=>{if(S.current){let e=S.current.offsetWidth;e!==C.current&&(C.current=e)}};us({isDisabled:!(u&&O)}),_h({ref:S,onResize:()=>{let e=S.current?.offsetWidth,t=window.innerWidth-document.documentElement.clientWidth;e&&e+t==C.current||e!==C.current&&(A(),k(!1))}}),(0,b.useEffect)(()=>{A(),w.current=S.current?.offsetHeight||0},[]);let j=(0,b.useMemo)(()=>Nu({...r,disableAnimation:x,hideOnScroll:c}),[kt(r),x,c]),M=wt(_?.base,g);return hh({elementRef:o,isEnabled:c||!l,callback:({prevPos:e,currPos:t})=>{d?.(t.y),c&&E(n=>{let r=t.y>e.y&&t.y>w.current;return r===n?n:r})}}),{Component:y,slots:j,domRef:S,height:s,isHidden:T,disableAnimation:x,shouldHideOnScroll:c,isMenuOpen:O,classNames:_,setIsMenuOpen:k,motionProps:h,getBaseProps:(e={})=>({...It(v,e),"data-hidden":R(T),"data-menu-open":R(O),ref:S,className:j.base({class:wt(M,e?.className)}),style:{"--navbar-height":typeof s==`number`?`${s}px`:s,...v?.style,...e?.style}}),getWrapperProps:(e={})=>({...e,"data-menu-open":R(O),className:j.wrapper({class:wt(_?.wrapper,e?.className)})})}}var yh=()=>yd(()=>import(`./dist-BLxv5vlB.js`),__vite__mapDeps([0,1,2])).then(e=>e.default),bh=yc((e,t)=>{let{children:n,...r}=e,i=vh({...r,ref:t}),a=i.Component,[o,s]=Vt(n,dh),c=(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(`header`,{...i.getWrapperProps(),children:o}),s]});return(0,V.jsx)(oh,{value:i,children:i.shouldHideOnScroll?(0,V.jsx)(p,{features:yh,children:(0,V.jsx)(_.nav,{animate:i.isHidden?`hidden`:`visible`,initial:!1,variants:fh,...It(i.getBaseProps(),i.motionProps),children:c})}):(0,V.jsx)(a,{...i.getBaseProps(),children:c})})});bh.displayName=`HeroUI.Navbar`;var xh=bh,Sh=yc((e,t)=>{let{as:n,className:r,children:i,...a}=e,o=n||`div`,s=ht(t),{slots:c,classNames:l}=sh(),u=wt(l?.brand,r);return(0,V.jsx)(o,{ref:s,className:c.brand?.call(c,{class:u}),...a,children:i})});Sh.displayName=`HeroUI.NavbarBrand`;var Ch=Sh,wh=yc((e,t)=>{let{as:n,className:r,children:i,justify:a=`start`,...o}=e,s=n||`ul`,c=ht(t),{slots:l,classNames:u}=sh(),d=wt(u?.content,r);return(0,V.jsx)(s,{ref:c,className:l.content?.call(l,{class:d}),"data-justify":a,...o,children:i})});wh.displayName=`HeroUI.NavbarContent`;var Th=wh;function Eh(e,t,n){let r=n.initialDeps??[],i;return()=>{var a;let o;n.key&&n.debug?.call(n)&&(o=Date.now());let s=e();if(!(s.length!==r.length||s.some((e,t)=>r[t]!==e)))return i;r=s;let c;if(n.key&&n.debug?.call(n)&&(c=Date.now()),i=t(...s),n.key&&n.debug?.call(n)){let e=Math.round((Date.now()-o)*100)/100,t=Math.round((Date.now()-c)*100)/100,r=t/16,i=(e,t)=>{for(e=String(e);e.length<t;)e=` `+e;return e};console.info(`%c⏱ ${i(t,5)} /${i(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*r,120))}deg 100% 31%);`,n?.key)}return(a=n?.onChange)==null||a.call(n,i),i}}function Dh(e,t){if(e===void 0)throw Error(`Unexpected undefined${t?`: ${t}`:``}`);return e}var Oh=(e,t)=>Math.abs(e-t)<1,kh=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},Ah=e=>e,jh=e=>{let t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let e=t;e<=n;e++)r.push(e);return r},Mh=(e,t)=>{let n=e.scrollElement;if(!n)return;let r=e.targetWindow;if(!r)return;let i=e=>{let{width:n,height:r}=e;t({width:Math.round(n),height:Math.round(r)})};if(i(n.getBoundingClientRect()),!r.ResizeObserver)return()=>{};let a=new r.ResizeObserver(e=>{let t=e[0];if(t?.borderBoxSize){let e=t.borderBoxSize[0];if(e){i({width:e.inlineSize,height:e.blockSize});return}}i(n.getBoundingClientRect())});return a.observe(n,{box:`border-box`}),()=>{a.unobserve(n)}},Nh={passive:!0},Ph=typeof window>`u`?!0:`onscrollend`in window,Fh=(e,t)=>{let n=e.scrollElement;if(!n)return;let r=e.targetWindow;if(!r)return;let i=0,a=e.options.useScrollendEvent&&Ph?()=>void 0:kh(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),o=r=>()=>{let{horizontal:o,isRtl:s}=e.options;i=o?n.scrollLeft*(s&&-1||1):n.scrollTop,a(),t(i,r)},s=o(!0),c=o(!1);return c(),n.addEventListener(`scroll`,s,Nh),n.addEventListener(`scrollend`,c,Nh),()=>{n.removeEventListener(`scroll`,s),n.removeEventListener(`scrollend`,c)}},Ih=(e,t,n)=>{if(t?.borderBoxSize){let e=t.borderBoxSize[0];if(e)return Math.round(e[n.options.horizontal?`inlineSize`:`blockSize`])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?`width`:`height`])},Lh=(e,{adjustments:t=0,behavior:n},r)=>{var i,a;let o=e+t;(a=(i=r.scrollElement)?.scrollTo)==null||a.call(i,{[r.options.horizontal?`left`:`top`]:o,behavior:n})},Rh=class{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null,t=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(e=>{e.forEach(e=>{this._measureElement(e.target,e)})}));return{disconnect:()=>{var n;(n=t())==null||n.disconnect(),e=null},observe:e=>t()?.observe(e,{box:`border-box`}),unobserve:e=>t()?.unobserve(e)}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,n])=>{n===void 0&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ah,rangeExtractor:jh,onChange:()=>{},measureElement:Ih,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:`data-index`,initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...e}},this.notify=e=>{var t,n;(n=(t=this.options).onChange)==null||n.call(t,this,e)},this.maybeNotify=Eh(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{let e=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==e){if(this.cleanup(),!e){this.maybeNotify();return}this.scrollElement=e,this.scrollElement&&`ownerDocument`in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=this.scrollElement?.window??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?`forward`:`backward`:null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?`width`:`height`]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset==`function`?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{let n=new Map,r=new Map;for(let i=t-1;i>=0;i--){let t=e[i];if(n.has(t.lane))continue;let a=r.get(t.lane);if(a==null||t.end>a.end?r.set(t.lane,t):t.end<a.end&&n.set(t.lane,!0),n.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end)[0]:void 0},this.getMeasurementOptions=Eh(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,t,n,r,i)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:r,enabled:i}),{key:!1}),this.getMeasurements=Eh(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:n,getItemKey:r,enabled:i},a)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}));let o=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];let s=this.measurementsCache.slice(0,o);for(let i=o;i<e;i++){let e=r(i),o=this.options.lanes===1?s[i-1]:this.getFurthestMeasurement(s,i),c=o?o.end+this.options.gap:t+n,l=a.get(e),u=typeof l==`number`?l:this.options.estimateSize(i),d=c+u,f=o?o.lane:i%this.options.lanes;s[i]={index:i,start:c,size:u,end:d,key:e,lane:f}}return this.measurementsCache=s,s},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Eh(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(e,t,n)=>this.range=e.length>0&&t>0?Bh({measurements:e,outerSize:t,scrollOffset:n}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=Eh(()=>{let e=null,t=null,n=this.calculateRange();return n&&(e=n.startIndex,t=n.endIndex),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,n,r,i)=>r===null||i===null?[]:e({startIndex:r,endIndex:i,overscan:t,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{let t=this.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{let n=this.indexFromElement(e),r=this.measurementsCache[n];if(!r)return;let i=r.key,a=this.elementsCache.get(i);a!==e&&(a&&this.observer.unobserve(a),this.observer.observe(e),this.elementsCache.set(i,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{let n=this.measurementsCache[e];if(!n)return;let r=this.itemSizeCache.get(n.key)??n.size,i=t-r;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange===void 0?n.start<this.getScrollOffset()+this.scrollAdjustments:this.shouldAdjustScrollPositionOnItemSizeChange(n,i,this))&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,t)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))});return}this._measureElement(e,void 0)},this.getVirtualItems=Eh(()=>[this.getIndexes(),this.getMeasurements()],(e,t)=>{let n=[];for(let r=0,i=e.length;r<i;r++){let i=e[r],a=t[i];n.push(a)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{let t=this.getMeasurements();if(t.length!==0)return Dh(t[zh(0,t.length-1,e=>Dh(t[e]).start,e)])},this.getOffsetForAlignment=(e,t)=>{let n=this.getSize(),r=this.getScrollOffset();t===`auto`&&e>=r+n&&(t=`end`),t===`end`&&(e-=n);let i=this.options.horizontal?`scrollWidth`:`scrollHeight`,a=(this.scrollElement?`document`in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-n;return Math.max(Math.min(a,e),0)},this.getOffsetForIndex=(e,t=`auto`)=>{e=Math.max(0,Math.min(e,this.options.count-1));let n=this.measurementsCache[e];if(!n)return;let r=this.getSize(),i=this.getScrollOffset();if(t===`auto`)if(n.end>=i+r-this.options.scrollPaddingEnd)t=`end`;else if(n.start<=i+this.options.scrollPaddingStart)t=`start`;else return[i,t];let a=n.start-this.options.scrollPaddingStart+(n.size-r)/2;switch(t){case`center`:return[this.getOffsetForAlignment(a,t),t];case`end`:return[this.getOffsetForAlignment(n.end+this.options.scrollPaddingEnd,t),t];default:return[this.getOffsetForAlignment(n.start-this.options.scrollPaddingStart,t),t]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:t=`start`,behavior:n}={})=>{this.cancelScrollToIndex(),n===`smooth`&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:t=`auto`,behavior:n}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),n===`smooth`&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");let r=this.getOffsetForIndex(e,t);if(!r)return;let[i,a]=r;this._scrollToOffset(i,{adjustments:void 0,behavior:n}),n!==`smooth`&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){let[t]=Dh(this.getOffsetForIndex(e,a));Oh(t,this.getScrollOffset())||this.scrollToIndex(e,{align:a,behavior:n})}else this.scrollToIndex(e,{align:a,behavior:n})}))},this.scrollBy=(e,{behavior:t}={})=>{this.cancelScrollToIndex(),t===`smooth`&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{let e=this.getMeasurements(),t;return t=e.length===0?this.options.paddingStart:this.options.lanes===1?e[e.length-1]?.end??0:Math.max(...e.slice(-this.options.lanes).map(e=>e.end)),Math.max(t-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}},zh=(e,t,n,r)=>{for(;e<=t;){let i=(e+t)/2|0,a=n(i);if(a<r)e=i+1;else if(a>r)t=i-1;else return i}return e>0?e-1:0};function Bh({measurements:e,outerSize:t,scrollOffset:n}){let r=e.length-1,i=zh(0,r,t=>e[t].start,n),a=i;for(;a<r&&e[a].end<n+t;)a++;return{startIndex:i,endIndex:a}}var Vh=t(c()),Hh=typeof document<`u`?b.useLayoutEffect:b.useEffect;function Uh(e){let t=b.useReducer(()=>({}),{})[1],n={...e,onChange:(n,r)=>{var i;r?(0,Vh.flushSync)(t):t(),(i=e.onChange)==null||i.call(e,n,r)}},[r]=b.useState(()=>new Rh(n));return r.setOptions(n),Hh(()=>r._didMount(),[]),Hh(()=>r._willUpdate()),r}function Wh(e){return Uh({observeElementRect:Mh,observeElementOffset:Fh,scrollToFn:Lh,...e})}var Gh=new WeakMap;function Kh(e,t,n){return e?(typeof t==`string`&&(t=t.replace(/\s+/g,``)),`${Gh.get(e)}-${n}-${t}`):``}function qh(e,t,n){let{key:r,isDisabled:i,shouldSelectOnPressUp:a}=e,{selectionManager:o,selectedKey:s}=t,c=r===s,l=i||t.isDisabled||t.selectionManager.isDisabled(r),{itemProps:u,isPressed:d}=$u({selectionManager:o,key:r,ref:n,isDisabled:l,shouldSelectOnPressUp:a,linkBehavior:`selection`}),f=Kh(t,r,`tab`),p=Kh(t,r,`tabpanel`),{tabIndex:m}=u,h=t.collection.getItem(r),g=Sr(h?.props,{labelable:!0});delete g.id;let _=qr(h?.props),{focusableProps:v}=fo({isDisabled:l},n);return{tabProps:gr(g,v,_,u,{id:f,"aria-selected":c,"aria-disabled":l||void 0,"aria-controls":c?p:void 0,tabIndex:l?void 0:m,role:`tab`}),isSelected:c,isDisabled:l,isPressed:d}}function Jh(e,t,n){let r=Qo(n)?void 0:0,i=Kh(t,e.id??t?.selectedKey,`tabpanel`),a=ti({...e,id:i,"aria-labelledby":Kh(t,t?.selectedKey,`tab`)});return{tabPanelProps:gr(a,{tabIndex:r,role:`tabpanel`,"aria-describedby":e[`aria-describedby`],"aria-details":e[`aria-details`]})}}var Yh=class{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var t;return this.disabledKeys.has(e)||!!((t=this.collection.getItem(e))!=null&&t.props?.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){let t=e;do t=this.collection.getKeyAfter(t),t??=this.collection.getFirstKey();while(t!=null&&this.isDisabled(t));return t}getPreviousKey(e){let t=e;do t=this.collection.getKeyBefore(t),t??=this.collection.getLastKey();while(t!=null&&this.isDisabled(t));return t}constructor(e,t,n,r=new Set){this.collection=e,this.flipDirection=t===`rtl`&&n===`horizontal`,this.disabledKeys=r,this.tabDirection=n===`horizontal`}};function Xh(e,t,n){let{orientation:r=`horizontal`,keyboardActivation:i=`automatic`}=e,{collection:a,selectionManager:o,disabledKeys:s}=t,{direction:c}=Sn(),l=(0,b.useMemo)(()=>new Yh(a,c,r,s),[a,s,r,c]),{collectionProps:u}=Qu({ref:n,selectionManager:o,keyboardDelegate:l,selectOnFocus:i===`automatic`,disallowEmptySelection:!0,scrollRef:n,linkBehavior:`selection`}),d=Qn();Gh.set(t,d);let f=ti({...e,id:d});return{tabListProps:{...gr(u,f),role:`tablist`,"aria-orientation":r,tabIndex:void 0}}}var Zh=yc((e,t)=>{let{as:n,tabKey:r,destroyInactiveTabPanel:i,state:a,className:o,slots:s,classNames:c,...l}=e,u=n||`div`,d=ht(t),{tabPanelProps:f}=Jh({...e,id:String(r)},a,d),{focusProps:p,isFocused:m,isFocusVisible:h}=Zo(),g=a.selectedItem,_=a.collection.getItem(r).props.children,v=wt(c?.panel,o,g?.props?.className),y=r===g?.key;return!_||!y&&i?null:(0,V.jsx)(u,{ref:d,"data-focus":m,"data-focus-visible":h,"data-inert":y?void 0:`true`,inert:gt(!y),...y&&It(f,p,l),className:s.panel?.call(s,{class:v}),"data-slot":`panel`,children:_})});Zh.displayName=`HeroUI.TabPanel`;var Qh=Zh,$h=yc((e,t)=>{let{className:n,as:r,item:i,state:a,classNames:o,isDisabled:s,listRef:c,slots:l,motionProps:d,disableAnimation:f,disableCursorAnimation:m,shouldSelectOnPressUp:h,tabRef:g,...v}=e,{key:y}=i,b=ht(t),x=r||(e.href?`a`:`button`),S=typeof x==`string`,{tabProps:C,isSelected:w,isDisabled:T,isPressed:E}=qh({key:y,isDisabled:s,shouldSelectOnPressUp:h},a,b);e.children??delete C[`aria-controls`];let D=s||T,{focusProps:O,isFocused:k,isFocusVisible:A}=Zo(),{hoverProps:j,isHovered:M}=bo({isDisabled:D}),ee=wt(o?.tab,n),[,N]=Op({rerender:!0}),te=(b?.current)?.closest(`[aria-modal="true"]`)!==null,ne=()=>{!b?.current||!c?.current||op(b.current,{scrollMode:`if-needed`,behavior:`smooth`,block:`end`,inline:`end`,boundary:c?.current})};return(0,V.jsxs)(x,{ref:Bt(b,g),"data-disabled":R(T),"data-focus":R(k),"data-focus-visible":R(A),"data-hover":R(M),"data-hover-unselected":R((M||E)&&!w),"data-pressed":R(E),"data-selected":R(w),"data-slot":`tab`,...It(C,D?{}:{...O,...j},qt(v,{enabled:S,omitPropNames:new Set([`title`]),omitEventNames:new Set([`onClick`])}),{onClick:Nt(ne,C.onClick)}),className:l.tab?.call(l,{class:ee}),title:v?.titleValue,type:x===`button`?`button`:void 0,children:[w&&!f&&!m&&N&&!te?(0,V.jsx)(p,{features:u,children:(0,V.jsx)(_.span,{className:l.cursor({class:o?.cursor}),"data-slot":`cursor`,layoutDependency:!1,layoutId:`cursor`,transition:{type:`spring`,bounce:.15,duration:.5},...d})}):null,(0,V.jsx)(`div`,{className:l.tabContent({class:o?.tabContent}),"data-slot":`tabContent`,children:i.rendered})]})});$h.displayName=`HeroUI.Tab`;var eg=$h,tg=class{*[Symbol.iterator](){yield*this.iterable}get size(){return this._size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);return t?t.prevKey??null:null}getKeyAfter(e){let t=this.keyMap.get(e);return t?t.nextKey??null:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)??null}at(e){let t=[...this.getKeys()];return this.getItem(t[e])}getChildren(e){return this.keyMap.get(e)?.childNodes||[]}constructor(e){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=e;let t=e=>{if(this.keyMap.set(e.key,e),e.childNodes&&e.type===`section`)for(let n of e.childNodes)t(n)};for(let n of e)t(n);let n=null,r=0,i=0;for(let[e,t]of this.keyMap)n?(n.nextKey=e,t.prevKey=n.key):(this.firstKey=e,t.prevKey=void 0),t.type===`item`&&(t.index=r++),(t.type===`section`||t.type===`item`)&&i++,n=t,n.nextKey=void 0;this._size=i,this.lastKey=n?.key??null}};function ng(e){let{filter:t,layoutDelegate:n}=e,r=Sd(e),i=(0,b.useMemo)(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),a=(0,b.useCallback)(e=>t?new tg(t(e)):new tg(e),[t]),o=(0,b.useMemo)(()=>({suppressTextValueWarning:e.suppressTextValueWarning}),[e.suppressTextValueWarning]),s=jd(e,a,o),c=(0,b.useMemo)(()=>new zd(s,r,{layoutDelegate:n}),[s,r,n]);return rg(s,c),{collection:s,disabledKeys:i,selectionManager:c}}function rg(e,t){let n=(0,b.useRef)(null);(0,b.useEffect)(()=>{if(t.focusedKey!=null&&!e.getItem(t.focusedKey)&&n.current){let r=n.current.getItem(t.focusedKey),i=[...n.current.getKeys()].map(e=>{let t=n.current.getItem(e);return t?.type===`item`?t:null}).filter(e=>e!==null),a=[...e.getKeys()].map(t=>{let n=e.getItem(t);return n?.type===`item`?n:null}).filter(e=>e!==null),o=(i?.length??0)-(a?.length??0),s=Math.min(o>1?Math.max((r?.index??0)-o+1,0):r?.index??0,(a?.length??0)-1),c=null,l=!1;for(;s>=0;){if(!t.isDisabled(a[s].key)){c=a[s];break}s<a.length-1&&!l?s++:(l=!0,s>(r?.index??0)&&(s=r?.index??0),s--)}t.setFocusedKey(c?c.key:null)}n.current=e},[e,t])}function ig(e){let[t,n]=ji(e.selectedKey,e.defaultSelectedKey??null,e.onSelectionChange),r=(0,b.useMemo)(()=>t==null?[]:[t],[t]),{collection:i,disabledKeys:a,selectionManager:o}=ng({...e,selectionMode:`single`,disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:r,onSelectionChange:r=>{if(r===`all`)return;let i=r.values().next().value??null;i===t&&e.onSelectionChange&&e.onSelectionChange(i),n(i)}}),s=t==null?null:i.getItem(t);return{collection:i,disabledKeys:a,selectionManager:o,selectedKey:t,setSelectedKey:n,selectedItem:s}}function ag(e){let t=ig({...e,onSelectionChange:e.onSelectionChange?t=>{var n;t!=null&&((n=e.onSelectionChange)==null||n.call(e,t))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:e.defaultSelectedKey??og(e.collection,e.disabledKeys?new Set(e.disabledKeys):new Set)??void 0}),{selectionManager:n,collection:r,selectedKey:i}=t,a=(0,b.useRef)(i);return(0,b.useEffect)(()=>{let o=i;e.selectedKey==null&&(n.isEmpty||o==null||!r.getItem(o))&&(o=og(r,t.disabledKeys),o!=null&&n.setSelectedKeys([o])),(o!=null&&n.focusedKey==null||!n.isFocused&&o!==a.current)&&n.setFocusedKey(o),a.current=o}),{...t,isDisabled:e.isDisabled||!1}}function og(e,t){let n=null;if(e){var r,i;for(n=e.getFirstKey();n!=null&&(t.has(n)||(r=e.getItem(n))!=null&&r.props?.isDisabled)&&n!==e.getLastKey();)n=e.getKeyAfter(n);n!=null&&(t.has(n)||(i=e.getItem(n))!=null&&i.props?.isDisabled)&&n===e.getLastKey()&&(n=e.getFirstKey())}return n}function sg(e){let t=Yt(),[n,r]=bc(e,vu.variantKeys),{ref:i,as:a,className:o,classNames:s,children:c,disableCursorAnimation:l,motionProps:u,isVertical:d=!1,shouldSelectOnPressUp:f=!0,destroyInactiveTabPanel:p=!0,...m}=n,h=a||`div`,g=typeof h==`string`,_=ht(i),v=e?.disableAnimation??t?.disableAnimation??!1,y=ag({children:c,...m}),{tabListProps:x}=Xh(m,y,_),S=(0,b.useMemo)(()=>vu({...r,disableAnimation:v,...d?{placement:`start`}:{}}),[kt(r),v,d]),C=wt(s?.base,o),w=(0,b.useMemo)(()=>({state:y,slots:S,classNames:s,motionProps:u,disableAnimation:v,listRef:_,shouldSelectOnPressUp:f,disableCursorAnimation:l,isDisabled:e?.isDisabled}),[y,S,_,u,v,l,f,e?.isDisabled,s]),T=(0,b.useCallback)(e=>({"data-slot":`base`,className:S.base({class:wt(C,e?.className)}),...It(qt(m,{enabled:g}),e)}),[C,m,S]),E=r.placement??(d?`start`:`top`),D=(0,b.useCallback)(e=>({"data-slot":`tabWrapper`,className:S.tabWrapper({class:wt(s?.tabWrapper,e?.className)}),"data-placement":E,"data-vertical":d||E===`start`||E===`end`?`vertical`:`horizontal`}),[s,S,E,d]),O=(0,b.useCallback)(e=>({ref:_,"data-slot":`tabList`,className:S.tabList({class:wt(s?.tabList,e?.className)}),...It(x,e)}),[_,x,s,S]);return{Component:h,domRef:_,state:y,values:w,destroyInactiveTabPanel:p,getBaseProps:T,getTabListProps:O,getWrapperProps:D}}var cg=yc(function(e,t){let{Component:n,values:r,state:i,domRef:a,destroyInactiveTabPanel:o,getBaseProps:s,getTabListProps:c,getWrapperProps:l}=sg({...e,ref:t}),u=(0,b.useId)(),d=(a?.current)?.closest(`[aria-modal="true"]`)!==null,f=!e.disableAnimation&&!e.disableCursorAnimation&&!d,p={state:i,listRef:r.listRef,slots:r.slots,classNames:r.classNames,isDisabled:r.isDisabled,motionProps:r.motionProps,disableAnimation:r.disableAnimation,shouldSelectOnPressUp:r.shouldSelectOnPressUp,disableCursorAnimation:r.disableCursorAnimation},m=[...i.collection].map(e=>(0,V.jsx)(eg,{item:e,...p,...e.props},e.key)),h=(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(`div`,{...s(),children:(0,V.jsx)(n,{...c(),children:f?(0,V.jsx)(g,{id:u,children:m}):m})}),[...i.collection].map(e=>(0,V.jsx)(Qh,{classNames:r.classNames,destroyInactiveTabPanel:o,slots:r.slots,state:r.state,tabKey:e.key},e.key))]});return`placement`in e||`isVertical`in e?(0,V.jsx)(`div`,{...l(),children:h}):h}),lg=Ed;function ug(e={}){let{domRef:t,isEnabled:n=!0,overflowCheck:r=`vertical`,visibility:i=`auto`,offset:a=0,onVisibilityChange:o,updateDeps:s=[]}=e,c=(0,b.useRef)(i);(0,b.useEffect)(()=>{let e=t?.current;if(!e||!n)return;let s=(t,n,r,a,s)=>{if(i===`auto`){let t=`${a}${Et(s)}Scroll`;n&&r?(e.dataset[t]=`true`,e.removeAttribute(`data-${a}-scroll`),e.removeAttribute(`data-${s}-scroll`)):(e.dataset[`${a}Scroll`]=n.toString(),e.dataset[`${s}Scroll`]=r.toString(),e.removeAttribute(`data-${a}-${s}-scroll`))}else{let e=n&&r?`both`:n?a:r?s:`none`;e!==c.current&&(o?.(e),c.current=e)}},l=()=>{let t=[{type:`vertical`,prefix:`top`,suffix:`bottom`},{type:`horizontal`,prefix:`left`,suffix:`right`}],n=e.querySelector(`ul[data-slot="list"]`),i=+(n?.getAttribute(`data-virtual-scroll-height`)??e.scrollHeight),o=+(n?.getAttribute(`data-virtual-scroll-top`)??e.scrollTop);for(let{type:n,prefix:c,suffix:l}of t)if(r===n||r===`both`){let t=n===`vertical`?o>a:e.scrollLeft>a,r=n===`vertical`?o+e.clientHeight+a<i:e.scrollLeft+e.clientWidth+a<e.scrollWidth;s(n,t,r,c,l)}},u=()=>{[`top`,`bottom`,`top-bottom`,`left`,`right`,`left-right`].forEach(t=>{e.removeAttribute(`data-${t}-scroll`)})};return l(),e.addEventListener(`scroll`,l,!0),i!==`auto`&&(u(),i===`both`?(e.dataset.topBottomScroll=String(r===`vertical`),e.dataset.leftRightScroll=String(r===`horizontal`)):(e.dataset.topBottomScroll=`false`,e.dataset.leftRightScroll=`false`,[`top`,`bottom`,`left`,`right`].forEach(t=>{e.dataset[`${t}Scroll`]=String(i===t)}))),()=>{e.removeEventListener(`scroll`,l,!0),u()}},[...s,n,i,r,o,t])}function dg(e){let[t,n]=bc(e,Tu.variantKeys),{ref:r,as:i,children:a,className:o,style:s,size:c=40,offset:l=0,visibility:u=`auto`,isEnabled:d=!0,onVisibilityChange:f,...p}=t,m=i||`div`,h=ht(r);ug({domRef:h,offset:l,visibility:u,isEnabled:d,onVisibilityChange:f,updateDeps:[a],overflowCheck:e.orientation??`vertical`});let g=(0,b.useMemo)(()=>Tu({...n,className:o}),[kt(n),o]);return{Component:m,styles:g,domRef:h,children:a,getBaseProps:(t={})=>({ref:h,className:g,"data-orientation":e.orientation??`vertical`,style:{"--scroll-shadow-size":`${c}px`,...s,...t.style},...p,...t})}}var fg=yc((e,t)=>{let{Component:n,children:r,getBaseProps:i}=dg({...e,ref:t});return(0,V.jsx)(n,{...i(),children:r})});fg.displayName=`HeroUI.ScrollShadow`;var pg=fg;function mg(e){let{collection:t,disabledKeys:n,selectionManager:r,selectionManager:{setSelectedKeys:i,selectedKeys:a,selectionMode:o}}=ng(e),s=(0,b.useMemo)(()=>!e.isLoading&&a.size!==0?Array.from(a).filter(Boolean).filter(e=>!t.getItem(e)):[],[a,t]),c=a.size===0?null:Array.from(a).map(e=>t.getItem(e)).filter(Boolean);return s.length&&console.warn(`Select: Keys "${s.join(`, `)}" passed to "selectedKeys" are not present in the collection.`),{collection:t,disabledKeys:n,selectionManager:r,selectionMode:o,selectedKeys:a,setSelectedKeys:i.bind(r),selectedItems:c}}function hg({validate:e,validationBehavior:t,...n}){let[r,i]=(0,b.useState)(!1),[a,o]=(0,b.useState)(null),s=ah(n),c=mg({...n,onSelectionChange:e=>{n.onSelectionChange!=null&&(e===`all`?n.onSelectionChange(new Set(c.collection.getKeys())):n.onSelectionChange(e)),n.selectionMode===`single`&&s.close()}}),l=Of({...n,validationBehavior:t,validate:t=>{if(!e)return;let r=Array.from(t);return e(n.selectionMode===`single`?r[0]:r)},value:c.selectedKeys}),u=c.collection.size===0&&n.hideEmptyContent;return{...l,...c,...s,focusStrategy:a,close(){s.close()},open(e=null){u||(o(e),s.open())},toggle(e=null){u||(o(e),s.toggle())},isFocused:r,setFocused:i}}function gg(e,t,n){let{disallowEmptySelection:r,isDisabled:i}=e,a=Pi({usage:`search`,sensitivity:`base`}),o=(0,b.useMemo)(()=>new rd(t.collection,t.disabledKeys,null,a),[t.collection,t.disabledKeys,a]),{menuTriggerProps:s,menuProps:c}=nh({isDisabled:i,type:`listbox`},t,n),l=e=>{if(t.selectionMode===`single`)switch(e.key){case`ArrowLeft`:{e.preventDefault();let n=t.selectedKeys.size>0?o.getKeyAbove(t.selectedKeys.values().next().value):o.getFirstKey();n&&t.setSelectedKeys([n]);break}case`ArrowRight`:{e.preventDefault();let n=t.selectedKeys.size>0?o.getKeyBelow(t.selectedKeys.values().next().value):o.getFirstKey();n&&t.setSelectedKeys([n]);break}}},{typeSelectProps:u}=Yu({keyboardDelegate:o,selectionManager:t.selectionManager,onTypeSelect(e){t.setSelectedKeys([e])}}),{isInvalid:d,validationErrors:f,validationDetails:p}=t.displayValidation,{labelProps:m,fieldProps:h,descriptionProps:g,errorMessageProps:_}=Bf({...e,labelElementType:`span`,isInvalid:d,errorMessage:e.errorMessage||f});u.onKeyDown=u.onKeyDownCapture,delete u.onKeyDownCapture,s.onPressStart=e=>{e.pointerType!==`touch`&&e.pointerType!==`keyboard`&&!i&&t.toggle(e.pointerType===`virtual`?`first`:null)};let v=Sr(e,{labelable:!0}),y=gr(u,s,h),x=Qn();return{labelProps:{...m,onClick:()=>{var t;e.isDisabled||((t=n.current)==null||t.focus(),to(`keyboard`))}},triggerProps:gr(v,{...y,onKeyDown:tr(y.onKeyDown,l,e.onKeyDown),onKeyUp:e.onKeyUp,"aria-labelledby":[x,y[`aria-labelledby`],y[`aria-label`]&&!y[`aria-labelledby`]?y.id:null].join(` `),onFocus(n){t.isFocused||(e.onFocus&&e.onFocus(n),t.setFocused(!0))},onBlur(n){t.isOpen||(e.onBlur&&e.onBlur(n),t.setFocused(!1))}}),valueProps:{id:x},menuProps:{...c,disallowEmptySelection:r,autoFocus:t.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,onBlur:n=>{n.currentTarget.contains(n.relatedTarget)||(e.onBlur&&e.onBlur(n),t.setFocused(!1))},onFocus:c?.onFocus,"aria-labelledby":[h[`aria-labelledby`],y[`aria-label`]&&!h[`aria-labelledby`]?y.id:null].filter(Boolean).join(` `)},descriptionProps:g,errorMessageProps:_,isInvalid:d,validationErrors:f,validationDetails:p}}var _g=new WeakMap;function vg(e){let t=Yt(),{validationBehavior:n}=Wf(Kf)||{},[r,i]=bc(e,Eu.variantKeys),a=e.disableAnimation??t?.disableAnimation??!1,{ref:o,as:s,label:c,name:l,isLoading:u,selectorIcon:d,isOpen:f,defaultOpen:p,onOpenChange:m,startContent:h,endContent:g,description:_,renderValue:v,onSelectionChange:y,placeholder:x,isVirtualized:S,itemHeight:C=36,maxListboxHeight:w=256,children:T,disallowEmptySelection:E=!1,selectionMode:D=`single`,spinnerRef:O,scrollRef:k,popoverProps:A={},scrollShadowProps:j={},listboxProps:M={},spinnerProps:ee={},validationState:N,onChange:te,onClose:ne,className:re,classNames:P,validationBehavior:F=n??t?.validationBehavior??`native`,hideEmptyContent:I=!1,onClear:ie,...ae}=r,L=ht(k),oe={popoverProps:It({placement:`bottom`,triggerScaleOnOpen:!1,offset:5,disableAnimation:a},A),scrollShadowProps:It({ref:L,isEnabled:e.showScrollIndicators??!0,hideScrollBar:!0,offset:15},j),listboxProps:It({disableAnimation:a},M)},se=s||`button`,ce=typeof se==`string`,le=ht(o),ue=(0,b.useRef)(null),de=(0,b.useRef)(null),fe=(0,b.useRef)(null),pe=hg({...r,isOpen:f,selectionMode:D,disallowEmptySelection:E,validationBehavior:F,children:T,isRequired:e.isRequired,isDisabled:e.isDisabled,isInvalid:e.isInvalid,defaultOpen:p,hideEmptyContent:I,onOpenChange:e=>{m?.(e),e||ne?.()},onSelectionChange:e=>{y?.(e),te&&typeof te==`function`&&te({target:{...le.current&&{...le.current,name:le.current.name},value:Array.from(e).join(`,`)}}),pe.commitValidation()}});pe={...pe,...e.isDisabled&&{disabledKeys:new Set([...pe.collection.getKeys()])}},Qd(()=>{le.current?.value&&pe.setSelectedKeys(new Set([...pe.selectedKeys,le.current.value]))},[le.current]);let{labelProps:me,triggerProps:he,valueProps:ge,menuProps:_e,descriptionProps:ve,errorMessageProps:ye,isInvalid:be,validationErrors:xe,validationDetails:Se}=gg({...r,disallowEmptySelection:E,isDisabled:e.isDisabled},pe,ue),Ce=(0,b.useCallback)(()=>{var e;pe.setSelectedKeys(new Set([])),ie?.(),(e=ue.current)==null||e.focus()},[ie,pe]),{pressProps:we}=ka({isDisabled:!!e?.isDisabled,onPress:Ce}),Te=e.isInvalid||N===`invalid`||be,{isPressed:Ee,buttonProps:De}=ef(he,ue),{focusProps:Oe,isFocused:ke,isFocusVisible:Ae}=Zo(),{focusProps:je,isFocusVisible:Me}=Zo(),{isHovered:Ne,hoverProps:Pe}=bo({isDisabled:e.isDisabled}),Fe=_c({labelPlacement:e.labelPlacement,label:c}),Ie=!!x,Le=Fe===`outside-left`||Fe===`outside`,Re=Fe===`inside`,ze=Fe===`outside-left`,Be=e.isClearable,Ve=pe.isOpen||Ie||!!pe.selectedItems?.length||!!h||!!g||!!e.isMultiline,He=!!pe.selectedItems?.length,Ue=!!c,We=Ue&&(ze||Le&&Ie),Ge=wt(P?.base,re),Ke=(0,b.useMemo)(()=>Eu({...i,isInvalid:Te,isClearable:Be,labelPlacement:Fe,disableAnimation:a}),[kt(i),Te,Fe,a]);us({isDisabled:!pe.isOpen});let qe=typeof r.errorMessage==`function`?r.errorMessage({isInvalid:Te,validationErrors:xe,validationDetails:Se}):r.errorMessage||xe?.join(` `),Je=!!_||!!qe,Ye=!!g;(0,b.useEffect)(()=>{if(pe.isOpen&&fe.current&&ue.current){let e=ue.current.getBoundingClientRect(),t=fe.current;t.style.width=e.width+`px`}},[pe.isOpen]);let Xe=(0,b.useCallback)((e={})=>({"data-slot":`base`,"data-filled":R(Ve),"data-has-value":R(He),"data-has-label":R(Ue),"data-has-helper":R(Je),"data-has-end-content":R(Ye),"data-invalid":R(Te),"data-has-label-outside":R(We),className:Ke.base({class:wt(Ge,e.className)}),...e}),[Ke,Je,He,Ue,We,Ve,Ge]),Ze=(0,b.useCallback)((t={})=>({ref:ue,"data-slot":`trigger`,"data-open":R(pe.isOpen),"data-disabled":R(e?.isDisabled),"data-focus":R(ke),"data-pressed":R(Ee),"data-focus-visible":R(Ae),"data-hover":R(Ne),className:Ke.trigger({class:P?.trigger}),...It(De,Oe,Pe,qt(ae,{enabled:ce}),qt(t))}),[Ke,ue,pe.isOpen,P?.trigger,e?.isDisabled,ke,Ee,Ae,Ne,De,Oe,Pe,ae,ce]),Qe=(0,b.useCallback)((t={})=>({state:pe,triggerRef:ue,selectRef:le,selectionMode:D,label:e?.label,name:e?.name,isRequired:e?.isRequired,autoComplete:e?.autoComplete,isDisabled:e?.isDisabled,form:e?.form,onChange:te,...t}),[pe,D,e?.label,e?.autoComplete,e?.name,e?.isDisabled,ue]),$e=(0,b.useCallback)((e={})=>({"data-slot":`label`,className:Ke.label({class:wt(P?.label,e.className)}),...me,...e}),[Ke,P?.label,me]),et=(0,b.useCallback)((e={})=>({"data-slot":`value`,className:Ke.value({class:wt(P?.value,e.className)}),...ge,...e}),[Ke,P?.value,ge]),tt=(0,b.useCallback)((e={})=>({"data-slot":`listboxWrapper`,className:Ke.listboxWrapper({class:wt(P?.listboxWrapper,e?.className)}),style:{maxHeight:w??256,...e.style},...It(oe.scrollShadowProps,e)}),[Ke.listboxWrapper,P?.listboxWrapper,oe.scrollShadowProps,w]),nt=(e={})=>{let t=S??pe.collection.size>50;return{state:pe,ref:de,isVirtualized:t,virtualization:t?{maxListboxHeight:w,itemHeight:C}:void 0,"data-slot":`listbox`,className:Ke.listbox({class:wt(P?.listbox,e?.className)}),scrollShadowProps:oe.scrollShadowProps,...It(oe.listboxProps,e,_e)}},rt=(0,b.useCallback)((e={})=>{let t=It(oe.popoverProps,e);return{state:pe,triggerRef:ue,ref:fe,"data-slot":`popover`,scrollRef:de,triggerType:`listbox`,classNames:{content:Ke.popoverContent({class:wt(P?.popoverContent,e.className)})},...t,offset:pe.selectedItems&&pe.selectedItems.length>0?pe.selectedItems.length*1e-8+(oe.popoverProps?.offset||0):oe.popoverProps?.offset}},[Ke,P?.popoverContent,oe.popoverProps,ue,pe,pe.selectedItems]),it=(0,b.useCallback)(()=>({"data-slot":`selectorIcon`,"aria-hidden":R(!0),"data-open":R(pe.isOpen),className:Ke.selectorIcon({class:P?.selectorIcon})}),[Ke,P?.selectorIcon,pe.isOpen]),at=(0,b.useCallback)((e={})=>({...e,"data-slot":`innerWrapper`,className:Ke.innerWrapper({class:wt(P?.innerWrapper,e?.className)})}),[Ke,P?.innerWrapper]),ot=(0,b.useCallback)((e={})=>({...e,"data-slot":`helperWrapper`,className:Ke.helperWrapper({class:wt(P?.helperWrapper,e?.className)})}),[Ke,P?.helperWrapper]),st=(0,b.useCallback)((e={})=>({...e,...ve,"data-slot":`description`,className:Ke.description({class:wt(P?.description,e?.className)})}),[Ke,P?.description]),ct=(0,b.useCallback)((e={})=>({...e,"data-slot":`mainWrapper`,className:Ke.mainWrapper({class:wt(P?.mainWrapper,e?.className)})}),[Ke,P?.mainWrapper]),lt=(0,b.useCallback)((e={})=>({...e,"data-slot":`end-wrapper`,className:Ke.endWrapper({class:wt(P?.endWrapper,e?.className)})}),[Ke,P?.endWrapper]),ut=(0,b.useCallback)((e={})=>({...e,"data-slot":`end-content`,className:Ke.endContent({class:wt(P?.endContent,e?.className)})}),[Ke,P?.endContent]),dt=(0,b.useCallback)((e={})=>({...e,...ye,"data-slot":`error-message`,className:Ke.errorMessage({class:wt(P?.errorMessage,e?.className)})}),[Ke,ye,P?.errorMessage]),ft=(0,b.useCallback)((e={})=>({"aria-hidden":R(!0),"data-slot":`spinner`,color:`current`,size:`sm`,...ee,...e,ref:O,className:Ke.spinner({class:wt(P?.spinner,e?.className)})}),[Ke,O,ee,P?.spinner]),pt=(0,b.useCallback)((e={})=>({...e,type:`button`,tabIndex:-1,"aria-label":`clear selection`,"data-slot":`clear-button`,"data-focus-visible":R(Me),className:Ke.clearButton({class:wt(P?.clearButton,e?.className)}),...It(we,je)}),[Ke,Me,we,je,P?.clearButton]);return _g.set(pe,{isDisabled:e?.isDisabled,isRequired:e?.isRequired,name:e?.name,isInvalid:Te,validationBehavior:F}),{Component:se,domRef:le,state:pe,label:c,name:l,triggerRef:ue,isLoading:u,placeholder:x,startContent:h,endContent:g,description:_,selectorIcon:d,hasHelper:Je,labelPlacement:Fe,hasPlaceholder:Ie,renderValue:v,selectionMode:D,disableAnimation:a,isOutsideLeft:ze,shouldLabelBeOutside:Le,shouldLabelBeInside:Re,isInvalid:Te,errorMessage:qe,isClearable:Be,getClearButtonProps:pt,getBaseProps:Xe,getTriggerProps:Ze,getLabelProps:$e,getValueProps:et,getListboxProps:nt,getPopoverProps:rt,getSpinnerProps:ft,getMainWrapperProps:ct,getListboxWrapperProps:tt,getHiddenSelectProps:Qe,getInnerWrapperProps:at,getHelperWrapperProps:ot,getDescriptionProps:st,getErrorMessageProps:dt,getSelectorIconProps:it,getEndWrapperProps:lt,getEndContentProps:ut}}var yg=typeof document<`u`?b.useLayoutEffect:()=>{};function bg(e){let t=(0,b.useRef)(null);return yg(()=>{t.current=e},[e]),(0,b.useCallback)((...e)=>{let n=t.current;return n?.(...e)},[])}function xg(e,t,n){let r=(0,b.useRef)(t),i=bg(()=>{n&&n(r.current)});(0,b.useEffect)(()=>{let t=e?.current?.form;return t?.addEventListener(`reset`,i),()=>{t?.removeEventListener(`reset`,i)}},[e,i])}function Sg(e,t,n){let r=_g.get(t)||{},{autoComplete:i,name:a=r.name,isDisabled:o=r.isDisabled,selectionMode:s,onChange:c,form:l}=e,{validationBehavior:u,isRequired:d,isInvalid:f}=r,{visuallyHiddenProps:p}=cc();return xg(e.selectRef,t.selectedKeys,t.setSelectedKeys),Pf({validationBehavior:u,focus:()=>n.current?.focus()},t,e.selectRef),{containerProps:{...p,"aria-hidden":!0,"data-a11y-ignore":`aria-hidden-focus`},inputProps:{style:{display:`none`}},selectProps:{form:l,autoComplete:i,disabled:o,"aria-invalid":f||void 0,"aria-required":d&&u===`aria`||void 0,required:d&&u===`native`,name:a,tabIndex:-1,value:s===`multiple`?[...t.selectedKeys].map(e=>String(e)):[...t.selectedKeys][0]??``,multiple:s===`multiple`,onChange:e=>{t.setSelectedKeys(e.target.value),c?.(e)}}}}function Cg(e){let{state:t,triggerRef:n,selectRef:r,label:i,name:a,isDisabled:o,form:s}=e,{containerProps:c,selectProps:l}=Sg({...e,selectRef:r},t,n);return t.collection.size<=300?(0,V.jsx)(`div`,{...c,"data-testid":`hidden-select-container`,children:(0,V.jsxs)(`label`,{children:[i,(0,V.jsxs)(`select`,{...l,ref:r,children:[(0,V.jsx)(`option`,{}),[...t.collection.getKeys()].map(e=>{let n=t.collection.getItem(e);if(n?.type===`item`)return(0,V.jsx)(`option`,{value:n.key,children:n.textValue},n.key)})]})]})}):a?(0,V.jsx)(`input`,{autoComplete:l.autoComplete,disabled:o,form:s,name:a,type:`hidden`,value:[...t.selectedKeys].join(`,`)??``}):null}var wg=Ed,Tg=new WeakMap;function Eg(e){return typeof e==`string`?e.replace(/\s*/g,``):``+e}function Dg(e,t){let n=Tg.get(e);if(!n)throw Error(`Unknown list`);return`${n.id}-option-${Eg(t)}`}function Og(e,t,n){let r=Sr(e,{labelable:!0}),i=e.selectionBehavior||`toggle`,a=e.linkBehavior||(i===`replace`?`action`:`override`);i===`toggle`&&a===`action`&&(a=`override`);let{listProps:o}=id({...e,ref:n,selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,linkBehavior:a}),{focusWithinProps:s}=mo({onFocusWithin:e.onFocus,onBlurWithin:e.onBlur,onFocusWithinChange:e.onFocusChange}),c=Qn(e.id);Tg.set(t,{id:c,shouldUseVirtualFocus:e.shouldUseVirtualFocus,shouldSelectOnPressUp:e.shouldSelectOnPressUp,shouldFocusOnHover:e.shouldFocusOnHover,isVirtualized:e.isVirtualized,onAction:e.onAction,linkBehavior:a});let{labelProps:l,fieldProps:u}=zf({...e,id:c,labelElementType:`span`});return{labelProps:l,listBoxProps:gr(r,s,t.selectionManager.selectionMode===`multiple`?{"aria-multiselectable":`true`}:{},{role:`listbox`,...gr(u,o)})}}function kg(e,t,n){let{key:r}=e,i=Tg.get(t),a=e.isDisabled??t.selectionManager.isDisabled(r),o=e.isSelected??t.selectionManager.isSelected(r),s=e.shouldSelectOnPressUp??i?.shouldSelectOnPressUp,c=e.shouldFocusOnHover??i?.shouldFocusOnHover,l=e.shouldUseVirtualFocus??i?.shouldUseVirtualFocus,u=e.isVirtualized??i?.isVirtualized,d=er(),f=er(),p={role:`option`,"aria-disabled":a||void 0,"aria-selected":t.selectionManager.selectionMode===`none`?void 0:o};jr()&&Ir()||(p[`aria-label`]=e[`aria-label`],p[`aria-labelledby`]=d,p[`aria-describedby`]=f);let m=t.collection.getItem(r);if(u){let e=Number(m?.index);p[`aria-posinset`]=Number.isNaN(e)?void 0:e+1,p[`aria-setsize`]=Rd(t.collection)}let h=i?.onAction?()=>i?.onAction?.call(i,r):void 0,g=Dg(t,r),{itemProps:_,isPressed:v,isFocused:y,hasAction:b,allowsSelection:x}=$u({selectionManager:t.selectionManager,key:r,ref:n,shouldSelectOnPressUp:s,allowsDifferentPressOrigin:s&&c,isVirtualized:u,shouldUseVirtualFocus:l,isDisabled:a,onAction:h||m!=null&&m.props?.onAction?tr(m?.props?.onAction,h):void 0,linkBehavior:i?.linkBehavior,id:g}),{hoverProps:S}=bo({isDisabled:a||!c,onHoverStart(){$a()||(t.selectionManager.setFocused(!0),t.selectionManager.setFocusedKey(r))}}),C=Sr(m?.props);delete C.id;let w=qr(m?.props);return{optionProps:{...p,...gr(C,_,S,w),id:g},labelProps:{id:d},descriptionProps:{id:f},isFocused:y,isFocusVisible:y&&t.selectionManager.isFocused&&$a(),isSelected:o,isDisabled:a,isPressed:v,allowsSelection:x,hasAction:b}}function Ag(e){let{heading:t,"aria-label":n}=e,r=Qn();return{itemProps:{role:`presentation`},headingProps:t?{id:r,role:`presentation`}:{},groupProps:{role:`group`,"aria-label":n,"aria-labelledby":t?r:void 0}}}function jg(e){let t=Yt(),{ref:n,as:r,state:i,variant:a,color:o,onAction:s,children:c,onSelectionChange:l,disableAnimation:u=t?.disableAnimation??!1,itemClasses:d,className:f,topContent:p,bottomContent:m,emptyContent:h=`No items.`,hideSelectedIcon:g=!1,hideEmptyContent:_=!1,shouldHighlightOnFocus:v=!1,classNames:y,...x}=e,S=r||`ul`,C=typeof S==`string`,w=ht(n),T=ng({...e,children:c,onSelectionChange:l}),E=i||T,{listBoxProps:D}=Og({...e,onAction:s},E,w),O=(0,b.useMemo)(()=>Au(),[]),k=wt(y?.base,f);return{Component:S,state:E,variant:a,color:o,slots:O,classNames:y,topContent:p,bottomContent:m,emptyContent:h,hideEmptyContent:_,shouldHighlightOnFocus:v,hideSelectedIcon:g,disableAnimation:u,className:f,itemClasses:d,getBaseProps:(e={})=>({ref:w,"data-slot":`base`,className:O.base({class:k}),...qt(x,{enabled:C}),...e}),getListProps:(e={})=>({"data-slot":`list`,className:O.list({class:y?.list}),...D,...e}),getEmptyContentProps:(e={})=>({"data-slot":`empty-content`,children:h,className:O.emptyContent({class:y?.emptyContent}),...e})}}function Mg(e){let{isSelected:t,disableAnimation:n,...r}=e;return(0,V.jsx)(`svg`,{"aria-hidden":`true`,"data-selected":t,role:`presentation`,viewBox:`0 0 17 18`,...r,children:(0,V.jsx)(`polyline`,{fill:`none`,points:`1 9 7 14 15 4`,stroke:`currentColor`,strokeDasharray:22,strokeDashoffset:t?44:66,strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:1.5,style:n?{}:{transition:`stroke-dashoffset 200ms ease`}})})}function Ng(e){let t=Yt(),[n,r]=bc(e,ju.variantKeys),{as:i,item:a,state:o,description:s,startContent:c,endContent:l,isVirtualized:u,selectedIcon:d,className:f,classNames:p,autoFocus:m,onPress:h,onPressUp:g,onPressStart:_,onPressEnd:v,onPressChange:y,onClick:x,shouldHighlightOnFocus:S,hideSelectedIcon:C=!1,isReadOnly:w=!1,...T}=n,E=e.disableAnimation??t?.disableAnimation??!1,D=(0,b.useRef)(null),O=i||(e.href?`a`:`li`),k=typeof O==`string`,{rendered:A,key:j}=a,M=o.disabledKeys.has(j)||e.isDisabled,ee=o.selectionManager.selectionMode!==`none`,N=ih(),{pressProps:te,isPressed:ne}=ka({ref:D,isDisabled:M,onClick:x,onPress:h,onPressUp:g,onPressStart:_,onPressEnd:v,onPressChange:y}),{isHovered:re,hoverProps:P}=bo({isDisabled:M}),{isFocusVisible:F,focusProps:I}=Zo({autoFocus:m}),{isFocused:ie,isSelected:ae,optionProps:L,labelProps:oe,descriptionProps:se}=kg({key:j,isDisabled:M,"aria-label":n[`aria-label`],isVirtualized:u},o,D),ce=L,le=(0,b.useMemo)(()=>ju({...r,isDisabled:M,disableAnimation:E,hasTitleTextChild:typeof A==`string`,hasDescriptionTextChild:typeof s==`string`}),[kt(r),M,E,A,s]),ue=wt(p?.base,f);w&&(ce=Ot(ce));let de=S&&ie||(N?re||ne:re||ie&&!F),fe=(e={})=>({ref:D,...It(ce,w?{}:It(I,te),P,qt(T,{enabled:k}),e),"data-selectable":R(ee),"data-focus":R(ie),"data-hover":R(de),"data-disabled":R(M),"data-selected":R(ae),"data-pressed":R(ne),"data-focus-visible":R(F),className:le.base({class:wt(ue,e.className)})}),pe=(e={})=>({...It(oe,e),"data-label":R(!0),className:le.title({class:p?.title})}),me=(e={})=>({...It(se,e),className:le.description({class:p?.description})}),he=(e={})=>({...It(e),className:le.wrapper({class:p?.wrapper})}),ge=(0,b.useCallback)((e={})=>({"aria-hidden":R(!0),"data-disabled":R(M),className:le.selectedIcon({class:p?.selectedIcon}),...e}),[M,le,p]);return{Component:O,domRef:D,slots:le,classNames:p,isSelectable:ee,isSelected:ae,isDisabled:M,rendered:A,description:s,startContent:c,endContent:l,selectedIcon:d,hideSelectedIcon:C,disableAnimation:E,getItemProps:fe,getLabelProps:pe,getWrapperProps:he,getDescriptionProps:me,getSelectedIconProps:ge}}var Pg=e=>{let{Component:t,rendered:n,description:r,isSelectable:i,isSelected:a,isDisabled:o,selectedIcon:s,startContent:c,endContent:l,hideSelectedIcon:u,disableAnimation:d,getItemProps:f,getLabelProps:p,getWrapperProps:m,getDescriptionProps:h,getSelectedIconProps:g}=Ng(e),_=(0,b.useMemo)(()=>{let e=(0,V.jsx)(Mg,{disableAnimation:d,isSelected:a});return typeof s==`function`?s({icon:e,isSelected:a,isDisabled:o}):s||e},[s,a,o,d]);return(0,V.jsxs)(t,{...f(),children:[c,r?(0,V.jsxs)(`div`,{...m(),children:[(0,V.jsx)(`span`,{...p(),children:n}),(0,V.jsx)(`span`,{...h(),children:r})]}):(0,V.jsx)(`span`,{...p(),children:n}),i&&!u&&(0,V.jsx)(`span`,{...g(),children:_}),l]})};Pg.displayName=`HeroUI.ListboxItem`;var Fg=Pg,Ig=yc(({item:e,state:t,as:n,variant:r,color:i,disableAnimation:a,className:o,classNames:s,hideSelectedIcon:c,showDivider:l=!1,dividerProps:u={},itemClasses:d,title:f,items:p,...m},h)=>{let g=n||`li`,_=(0,b.useMemo)(()=>Mu(),[]),v=wt(s?.base,o),y=wt(s?.divider,u?.className),{itemProps:x,headingProps:S,groupProps:C}=Ag({heading:e.rendered,"aria-label":e[`aria-label`]});return(0,V.jsxs)(g,{"data-slot":`base`,...It(x,m),className:_.base({class:v}),children:[e.rendered&&(0,V.jsx)(`span`,{...S,className:_.heading({class:s?.heading}),"data-slot":`heading`,children:e.rendered}),(0,V.jsxs)(`ul`,{...C,className:_.group({class:s?.group}),"data-has-title":!!e.rendered,"data-slot":`group`,children:[[...e.childNodes].map(e=>{let{key:n,props:o}=e,s=(0,V.jsx)(Fg,{classNames:d,color:i,disableAnimation:a,hideSelectedIcon:c,item:e,state:t,variant:r,...o},n);return e.wrapper&&(s=e.wrapper(s)),s}),l&&(0,V.jsx)(Ud,{as:`li`,className:_.divider({class:y}),...u})]})]},e.key)});Ig.displayName=`HeroUI.ListboxSection`;var Lg=Ig;function Rg(e={}){let{domRef:t,isEnabled:n=!0,overflowCheck:r=`vertical`,visibility:i=`auto`,offset:a=0,onVisibilityChange:o,updateDeps:s=[]}=e,c=(0,b.useRef)(i);(0,b.useEffect)(()=>{let e=t?.current;if(!e||!n)return;let s=(t,n,r,a,s)=>{if(i===`auto`){let t=`${a}${Et(s)}Scroll`;n&&r?(e.dataset[t]=`true`,e.removeAttribute(`data-${a}-scroll`),e.removeAttribute(`data-${s}-scroll`)):(e.dataset[`${a}Scroll`]=n.toString(),e.dataset[`${s}Scroll`]=r.toString(),e.removeAttribute(`data-${a}-${s}-scroll`))}else{let e=n&&r?`both`:n?a:r?s:`none`;e!==c.current&&(o?.(e),c.current=e)}},l=()=>{let t=[{type:`vertical`,prefix:`top`,suffix:`bottom`},{type:`horizontal`,prefix:`left`,suffix:`right`}],n=e.querySelector(`ul[data-slot="list"]`),i=+(n?.getAttribute(`data-virtual-scroll-height`)??e.scrollHeight),o=+(n?.getAttribute(`data-virtual-scroll-top`)??e.scrollTop);for(let{type:n,prefix:c,suffix:l}of t)if(r===n||r===`both`){let t=n===`vertical`?o>a:e.scrollLeft>a,r=n===`vertical`?o+e.clientHeight+a<i:e.scrollLeft+e.clientWidth+a<e.scrollWidth;s(n,t,r,c,l)}},u=()=>{[`top`,`bottom`,`top-bottom`,`left`,`right`,`left-right`].forEach(t=>{e.removeAttribute(`data-${t}-scroll`)})};return l(),e.addEventListener(`scroll`,l,!0),i!==`auto`&&(u(),i===`both`?(e.dataset.topBottomScroll=String(r===`vertical`),e.dataset.leftRightScroll=String(r===`horizontal`)):(e.dataset.topBottomScroll=`false`,e.dataset.leftRightScroll=`false`,[`top`,`bottom`,`left`,`right`].forEach(t=>{e.dataset[`${t}Scroll`]=String(i===t)}))),()=>{e.removeEventListener(`scroll`,l,!0),u()}},[...s,n,i,r,o,t])}function zg(e){let[t,n]=bc(e,Tu.variantKeys),{ref:r,as:i,children:a,className:o,style:s,size:c=40,offset:l=0,visibility:u=`auto`,isEnabled:d=!0,onVisibilityChange:f,...p}=t,m=i||`div`,h=ht(r);Rg({domRef:h,offset:l,visibility:u,isEnabled:d,onVisibilityChange:f,updateDeps:[a],overflowCheck:e.orientation??`vertical`});let g=(0,b.useMemo)(()=>Tu({...n,className:o}),[kt(n),o]);return{Component:m,styles:g,domRef:h,children:a,getBaseProps:(t={})=>({ref:h,className:g,"data-orientation":e.orientation??`vertical`,style:{"--scroll-shadow-size":`${c}px`,...s,...t.style},...p,...t})}}var Bg=(e,t)=>{let n=[];for(let r of e)r.type===`section`?n.push(([...r.childNodes].length+1)*t):n.push(t);return n},Vg=e=>{if(!e||e.scrollTop===void 0||e.clientHeight===void 0||e.scrollHeight===void 0)return{isTop:!1,isBottom:!1,isMiddle:!1};let t=e.scrollTop===0,n=Math.ceil(e.scrollTop+e.clientHeight)>=e.scrollHeight;return{isTop:t,isBottom:n,isMiddle:!t&&!n}},Hg=e=>{let{Component:t,state:n,color:r,variant:i,itemClasses:a,getBaseProps:o,topContent:s,bottomContent:c,hideEmptyContent:l,hideSelectedIcon:u,shouldHighlightOnFocus:d,disableAnimation:f,getEmptyContentProps:p,getListProps:m,scrollShadowProps:h}=e,{virtualization:g}=e;if(!g||!xt(g)&&!g.maxListboxHeight&&!g.itemHeight)throw Error(`You are using a virtualized listbox. VirtualizedListbox requires 'virtualization' props with 'maxListboxHeight' and 'itemHeight' properties. This error might have originated from autocomplete components that use VirtualizedListbox. Please provide these props to use the virtualized listbox.`);let{maxListboxHeight:_,itemHeight:v}=g,y=Math.min(_,v*n.collection.size),x=(0,b.useRef)(null),S=(0,b.useMemo)(()=>Bg([...n.collection],v),[n.collection,v]),C=Wh({count:[...n.collection].length,getScrollElement:()=>x.current,estimateSize:e=>S[e]}),w=C.getVirtualItems(),T=C.getTotalSize(),{getBaseProps:E}=zg({...h}),D=e=>{let t=[...n.collection][e.index];if(!t)return null;let o={color:r,item:t,state:n,variant:i,disableAnimation:f,hideSelectedIcon:u,...t.props},s={position:`absolute`,top:0,left:0,width:`100%`,height:`${e.size}px`,transform:`translateY(${e.start}px)`};if(t.type===`section`)return(0,V.jsx)(Lg,{...o,itemClasses:a,style:{...s,...o.style}},t.key);let c=(0,V.jsx)(Fg,{...o,classNames:It(a,t.props?.classNames),shouldHighlightOnFocus:d,style:{...s,...o.style}},t.key);return t.wrapper&&(c=t.wrapper(c)),c},[O,k]=(0,b.useState)({isTop:!1,isBottom:!0,isMiddle:!1}),A=(0,V.jsxs)(t,{...m(),"data-virtual-scroll-height":T,"data-virtual-scroll-top":x?.current?.scrollTop,children:[!n.collection.size&&!l&&(0,V.jsx)(`li`,{children:(0,V.jsx)(`div`,{...p()})}),(0,V.jsx)(`div`,{...qt(E()),ref:x,style:{height:_,overflow:`auto`},onScroll:e=>{k(Vg(e.target))},children:y>0&&v>0&&(0,V.jsx)(`div`,{style:{height:`${T}px`,width:`100%`,position:`relative`},children:w.map(e=>D(e))})})]});return(0,V.jsxs)(`div`,{...o(),children:[s,A,c]})},Ug=yc(function(e,t){let{isVirtualized:n,...r}=e,i=jg({...r,ref:t}),{Component:a,state:o,color:s,variant:c,itemClasses:l,getBaseProps:u,topContent:d,bottomContent:f,hideEmptyContent:p,hideSelectedIcon:m,shouldHighlightOnFocus:h,disableAnimation:g,getEmptyContentProps:_,getListProps:v}=i;if(n)return(0,V.jsx)(Hg,{...e,...i});let y=(0,V.jsxs)(a,{...v(),children:[!o.collection.size&&!p&&(0,V.jsx)(`li`,{children:(0,V.jsx)(`div`,{..._()})}),[...o.collection].map(e=>{let t={color:s,item:e,state:o,variant:c,disableAnimation:g,hideSelectedIcon:m,...e.props};if(e.type===`section`)return(0,V.jsx)(Lg,{...t,itemClasses:l},e.key);let n=(0,V.jsx)(Fg,{...t,classNames:It(l,e.props?.classNames),shouldHighlightOnFocus:h},e.key);return e.wrapper&&(n=e.wrapper(n)),n})]});return(0,V.jsxs)(`div`,{...u(),children:[d,y,f]})}),Wg=yc(function(e,t){let{Component:n,state:r,label:i,hasHelper:a,isLoading:o,triggerRef:s,selectorIcon:c=(0,V.jsx)(pd,{}),description:l,errorMessage:u,isInvalid:d,startContent:f,endContent:p,placeholder:h,renderValue:g,shouldLabelBeOutside:_,disableAnimation:v,getBaseProps:y,getLabelProps:x,getTriggerProps:S,getValueProps:C,getListboxProps:w,getPopoverProps:T,getSpinnerProps:E,getMainWrapperProps:D,getInnerWrapperProps:O,getHiddenSelectProps:k,getHelperWrapperProps:A,getListboxWrapperProps:j,getDescriptionProps:M,getErrorMessageProps:ee,getSelectorIconProps:N,isClearable:te,getClearButtonProps:ne,getEndWrapperProps:re,getEndContentProps:P}=vg({...e,ref:t}),F=i?(0,V.jsx)(`label`,{...x(),children:i}):null,I=(0,b.cloneElement)(c,N()),ie=(0,b.useMemo)(()=>te&&r.selectedItems?.length?(0,V.jsx)(`span`,{...ne(),children:(0,V.jsx)(ud,{})}):null,[te,ne,r.selectedItems?.length]),ae=(0,b.useMemo)(()=>ie?(0,V.jsxs)(`div`,{...re(),children:[ie,p&&(0,V.jsx)(`span`,{...P(),children:p})]}):p&&(0,V.jsx)(`span`,{...P(),children:p}),[ie,p,re,P]),L=(0,b.useMemo)(()=>{let e=d&&u;return!a||!(e||l)?null:(0,V.jsx)(`div`,{...A(),children:e?(0,V.jsx)(`div`,{...ee(),children:u}):(0,V.jsx)(`div`,{...M(),children:l})})},[a,d,u,l,A,ee,M]),oe=(0,b.useMemo)(()=>{if(!r.selectedItems?.length)return h;if(g&&typeof g==`function`){let e=[...r.selectedItems].map(e=>({key:e.key,data:e.value,type:e.type,props:e.props,textValue:e.textValue,rendered:e.rendered,"aria-label":e[`aria-label`]}));return g(e)}return r.selectedItems.map(e=>e.textValue).join(`, `)},[r.selectedItems,g,h]),se=(0,b.useMemo)(()=>o?(0,V.jsx)(uf,{...E()}):I,[o,I,E]),ce=(0,b.useMemo)(()=>r.isOpen?(0,V.jsx)(um,{...T(),children:(0,V.jsx)(pg,{...j(),children:(0,V.jsx)(Ug,{...w()})})}):null,[r.isOpen,T,r,s,j,w]);return(0,V.jsxs)(`div`,{...y(),children:[(0,V.jsx)(Cg,{...k()}),_?F:null,(0,V.jsxs)(`div`,{...D(),children:[(0,V.jsxs)(n,{...S(),children:[_?null:F,(0,V.jsxs)(`div`,{...O(),children:[f,(0,V.jsx)(`span`,{...C(),children:oe}),p&&r.selectedItems&&(0,V.jsx)(lc,{elementType:`span`,children:`,`}),ae]}),se]}),L]}),v?ce:(0,V.jsx)(m,{children:ce})]})});function Gg(e){let[t,n]=bc(e,zu.variantKeys),{as:r,title:i,children:a,description:o,onClose:s,isClosable:c,ref:l,icon:u,startContent:d,endContent:f,isVisible:p,isDefaultVisible:m,onVisibleChange:h,closeButtonProps:g={size:`sm`},className:_,classNames:v,...y}=t,[x,S]=ji(p,m??!0,h),C=typeof(r||`div`)==`string`,w=ht(l),T=(0,b.useCallback)(()=>{S(!1),s?.()},[S,s]),E=wt(v?.base,_),D=(0,b.useMemo)(()=>zu({hasContent:!xt(o)||!xt(a),...n}),[o,kt(n)]),O=(0,b.useCallback)(()=>({"data-visible":R(x),"data-closeable":R(c),"data-has-title":R(!xt(i)),"data-has-description":R(!xt(o)),...It(qt(y,{enabled:C}),qt(t)),className:D.base({class:E})}),[D,E]),k=(0,b.useCallback)(()=>({className:D.mainWrapper({class:v?.mainWrapper})}),[D,v?.mainWrapper]),A=(0,b.useCallback)(()=>({className:D.description({class:v?.description})}),[D,v?.description]),j=(0,b.useCallback)(()=>({className:D.title({class:v?.title})}),[D,v?.title]),M=(0,b.useCallback)(()=>({...g,className:D.closeButton({class:v?.closeButton})}),[D,v?.closeButton]),ee=(0,b.useCallback)(()=>({className:D.alertIcon({class:v?.alertIcon})}),[D,v?.alertIcon]),N=(0,b.useCallback)(()=>({className:D.iconWrapper({class:v?.iconWrapper})}),[D,v?.iconWrapper]);return{title:i,icon:u,children:a,description:o,isClosable:c,domRef:w,endContent:f,startContent:d,getBaseProps:O,getMainWrapperProps:k,getDescriptionProps:A,getTitleProps:j,color:n.color,getCloseButtonProps:M,handleClose:T,isVisible:x,onClose:s,getAlertIconProps:ee,getIconWrapperProps:N}}var Kg={primary:sd,secondary:sd,success:ad,warning:od,danger:fd},qg=yc((e,t)=>{let{title:n,icon:r,children:i,description:a,endContent:o,startContent:s,isClosable:c,domRef:l,handleClose:u,getBaseProps:d,getMainWrapperProps:f,getDescriptionProps:p,getTitleProps:m,getCloseButtonProps:h,color:g,isVisible:_,onClose:v,getAlertIconProps:y,getIconWrapperProps:x}=Gg({...e,ref:t});if(!_)return null;let S=r&&(0,b.isValidElement)(r)?(0,b.cloneElement)(r,y()):null,C=Kg[g]||Kg.primary;return(0,V.jsxs)(`div`,{ref:l,role:`alert`,...d(),children:[s,(0,V.jsx)(`div`,{...x(),children:S||(0,V.jsx)(C,{...y()})}),(0,V.jsxs)(`div`,{...f(),children:[!xt(n)&&(0,V.jsx)(`div`,{...m(),children:n}),!xt(a)&&(0,V.jsx)(`div`,{...p(),children:a}),i]}),o,(c||v)&&(0,V.jsx)(ff,{isIconOnly:!0,"aria-label":`Close`,radius:`full`,variant:`light`,onPress:u,...h(),children:(0,V.jsx)(dd,{height:20,width:20})})]})});qg.displayName=`HeroUI.Alert`;var Jg=qg,Yg={};Yg={close:`إغلاق`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} \u{625}\u{634}\u{639}\u{627}\u{631}`,other:()=>`${t.number(e.count)} \u{625}\u{634}\u{639}\u{627}\u{631}\u{627}\u{62A}`})}.`};var Xg={};Xg={close:`Затвори`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} \u{438}\u{437}\u{432}\u{435}\u{441}\u{442}\u{438}\u{435}`,other:()=>`${t.number(e.count)} \u{438}\u{437}\u{432}\u{435}\u{441}\u{442}\u{438}\u{44F}`})}.`};var Zg={};Zg={close:`Zavřít`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} ozn\xe1men\xed`,other:()=>`${t.number(e.count)} ozn\xe1men\xed`})}.`};var Qg={};Qg={close:`Luk`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} besked`,other:()=>`${t.number(e.count)} beskeder`})}.`};var $g={};$g={close:`Schließen`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} Benachrichtigung`,other:()=>`${t.number(e.count)} Benachrichtigungen`})}.`};var e_={};e_={close:`Κλείσιμο`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} \u{3B5}\u{3B9}\u{3B4}\u{3BF}\u{3C0}\u{3BF}\u{3AF}\u{3B7}\u{3C3}\u{3B7}`,other:()=>`${t.number(e.count)} \u{3B5}\u{3B9}\u{3B4}\u{3BF}\u{3C0}\u{3BF}\u{3B9}\u{3AE}\u{3C3}\u{3B5}\u{3B9}\u{3C2}`})}.`};var t_={};t_={close:`Close`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notification`,other:()=>`${t.number(e.count)} notifications`})}.`};var n_={};n_={close:`Cerrar`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notificaci\xf3n`,other:()=>`${t.number(e.count)} notificaciones`})}.`};var r_={};r_={close:`Sule`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} teatis`,other:()=>`${t.number(e.count)} teatist`})}.`};var i_={};i_={close:`Sulje`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} ilmoitus`,other:()=>`${t.number(e.count)} ilmoitusta`})}.`};var a_={};a_={close:`Fermer`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notification`,other:()=>`${t.number(e.count)} notifications`})}.`};var o_={};o_={close:`סגור`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} \u{5D4}\u{5EA}\u{5E8}\u{5D0}\u{5D4}`,other:()=>`${t.number(e.count)} \u{5D4}\u{5EA}\u{5E8}\u{5D0}\u{5D5}\u{5EA}`})}.`};var s_={};s_={close:`Zatvori`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} obavijest`,other:()=>`${t.number(e.count)} obavijesti`})}.`};var c_={};c_={close:`Bezárás`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} \xe9rtes\xedt\xe9s`,other:()=>`${t.number(e.count)} \xe9rtes\xedt\xe9s`})}.`};var l_={};l_={close:`Chiudi`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notifica`,other:()=>`${t.number(e.count)} notifiche`})}.`};var u_={};u_={close:`閉じる`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} \u{500B}\u{306E}\u{901A}\u{77E5}`,other:()=>`${t.number(e.count)} \u{500B}\u{306E}\u{901A}\u{77E5}`})}\u{3002}`};var d_={};d_={close:`닫기`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)}\u{AC1C} \u{C54C}\u{B9BC}`,other:()=>`${t.number(e.count)}\u{AC1C} \u{C54C}\u{B9BC}`})}.`};var f_={};f_={close:`Uždaryti`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} prane\u{161}imas`,other:()=>`${t.number(e.count)} prane\u{161}imai`})}.`};var p_={};p_={close:`Aizvērt`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} pazi\u{146}ojums`,other:()=>`${t.number(e.count)} pazi\u{146}ojumi`})}.`};var m_={};m_={close:`Lukk`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} varsling`,other:()=>`${t.number(e.count)} varsler`})}.`};var h_={};h_={close:`Sluiten`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} melding`,other:()=>`${t.number(e.count)} meldingen`})}.`};var g_={};g_={close:`Zamknij`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} powiadomienie`,few:()=>`${t.number(e.count)} powiadomienia`,many:()=>`${t.number(e.count)} powiadomie\u{144}`,other:()=>`${t.number(e.count)} powiadomienia`})}.`};var __={};__={close:`Fechar`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notifica\xe7\xe3o`,other:()=>`${t.number(e.count)} notifica\xe7\xf5es`})}.`};var v_={};v_={close:`Fechar`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notifica\xe7\xe3o`,other:()=>`${t.number(e.count)} notifica\xe7\xf5es`})}.`};var y_={};y_={close:`Închideţi`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notificare`,other:()=>`${t.number(e.count)} notific\u{103}ri`})}.`};var b_={};b_={close:`Закрыть`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} \u{443}\u{432}\u{435}\u{434}\u{43E}\u{43C}\u{43B}\u{435}\u{43D}\u{438}\u{435}`,other:()=>`${t.number(e.count)} \u{443}\u{432}\u{435}\u{434}\u{43E}\u{43C}\u{43B}\u{435}\u{43D}\u{438}\u{44F}`})}.`};var x_={};x_={close:`Zatvoriť`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} ozn\xe1menie`,few:()=>`${t.number(e.count)} ozn\xe1menia`,other:()=>`${t.number(e.count)} ozn\xe1men\xed`})}.`};var S_={};S_={close:`Zapri`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} obvestilo`,two:()=>`${t.number(e.count)} obvestili`,few:()=>`${t.number(e.count)} obvestila`,other:()=>`${t.number(e.count)} obvestil`})}.`};var C_={};C_={close:`Zatvori`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} obave\u{161}tenje`,other:()=>`${t.number(e.count)} obave\u{161}tenja`})}.`};var w_={};w_={close:`Stäng`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} meddelande`,other:()=>`${t.number(e.count)} meddelanden`})}.`};var T_={};T_={close:`Kapat`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} bildirim`,other:()=>`${t.number(e.count)} bildirim`})}.`};var E_={};E_={close:`Закрити`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} \u{441}\u{43F}\u{43E}\u{432}\u{456}\u{449}\u{435}\u{43D}\u{43D}\u{44F}`,other:()=>`${t.number(e.count)} \u{441}\u{43F}\u{43E}\u{432}\u{456}\u{449}\u{435}\u{43D}\u{43D}\u{44F}`})}.`};var D_={};D_={close:`关闭`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} \u{4E2A}\u{901A}\u{77E5}`,other:()=>`${t.number(e.count)} \u{4E2A}\u{901A}\u{77E5}`})}\u{3002}`};var O_={};O_={close:`關閉`,notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} \u{500B}\u{901A}\u{77E5}`,other:()=>`${t.number(e.count)} \u{500B}\u{901A}\u{77E5}`})}\u{3002}`};var k_={};k_={"ar-AE":Yg,"bg-BG":Xg,"cs-CZ":Zg,"da-DK":Qg,"de-DE":$g,"el-GR":e_,"en-US":t_,"es-ES":n_,"et-EE":r_,"fi-FI":i_,"fr-FR":a_,"he-IL":o_,"hr-HR":s_,"hu-HU":c_,"it-IT":l_,"ja-JP":u_,"ko-KR":d_,"lt-LT":f_,"lv-LV":p_,"nb-NO":m_,"nl-NL":h_,"pl-PL":g_,"pt-BR":__,"pt-PT":v_,"ro-RO":y_,"ru-RU":b_,"sk-SK":x_,"sl-SI":S_,"sr-SP":C_,"sv-SE":w_,"tr-TR":T_,"uk-UA":E_,"zh-CN":D_,"zh-TW":O_};function A_(e){return e&&e.__esModule?e.default:e}function j_(e,t,n){let{key:r,timer:i,timeout:a}=e.toast;(0,b.useEffect)(()=>{if(!(i==null||a==null))return i.reset(a),()=>{i.pause()}},[i,a]);let o=Qn(),s=er(),c=Hn(A_(k_),`@react-aria/toast`),[l,u]=(0,b.useState)(!1);return(0,b.useEffect)(()=>{u(!0)},[]),{toastProps:{...Sr(e,{labelable:!0}),role:`alertdialog`,"aria-modal":`false`,"aria-labelledby":e[`aria-labelledby`]||o,"aria-describedby":e[`aria-describedby`]||s,tabIndex:0},contentProps:{role:`alert`,"aria-atomic":`true`,"aria-hidden":l?void 0:`true`},titleProps:{id:o},descriptionProps:{id:s},closeButtonProps:{"aria-label":c.format(`close`),onPress:()=>t.close(r)}}}var M_=r((exports=>{var t=s();function n(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var r=typeof Object.is==`function`?Object.is:n,i=t.useState,a=t.useEffect,o=t.useLayoutEffect,c=t.useDebugValue;function l(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),s=r[0].inst,l=r[1];return o(function(){s.value=n,s.getSnapshot=t,u(s)&&l({inst:s})},[e,n,t]),a(function(){return u(s)&&l({inst:s}),e(function(){u(s)&&l({inst:s})})},[e]),c(n),n}function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch{return!0}}function d(e,t){return t()}var f=typeof window>`u`||window.document===void 0||window.document.createElement===void 0?d:l;exports.useSyncExternalStore=t.useSyncExternalStore===void 0?f:t.useSyncExternalStore})),N_=r(((exports,t)=>{t.exports=M_()})),P_=t(N_(),1),F_=1,I_=Symbol.for(`react-aria-landmark-manager`);function L_(e){return document.addEventListener(`react-aria-landmark-manager-change`,e),()=>document.removeEventListener(`react-aria-landmark-manager-change`,e)}function R_(){if(typeof document>`u`)return null;let e=document[I_];return e&&e.version>=F_?e:(document[I_]=new B_,document.dispatchEvent(new CustomEvent(`react-aria-landmark-manager-change`)),document[I_])}function z_(){return(0,P_.useSyncExternalStore)(L_,R_,R_)}var B_=class{setupIfNeeded(){this.isListening||=(document.addEventListener(`keydown`,this.f6Handler,{capture:!0}),document.addEventListener(`focusin`,this.focusinHandler,{capture:!0}),document.addEventListener(`focusout`,this.focusoutHandler,{capture:!0}),!0)}teardownIfNeeded(){!this.isListening||this.landmarks.length>0||this.refCount>0||(document.removeEventListener(`keydown`,this.f6Handler,{capture:!0}),document.removeEventListener(`focusin`,this.focusinHandler,{capture:!0}),document.removeEventListener(`focusout`,this.focusoutHandler,{capture:!0}),this.isListening=!1)}focusLandmark(e,t){var n,r;(r=this.landmarks.find(t=>t.ref.current===e))==null||(n=r.focus)==null||n.call(r,t)}getLandmarksByRole(e){return new Set(this.landmarks.filter(t=>t.role===e))}getLandmarkByRole(e){return this.landmarks.find(t=>t.role===e)}addLandmark(e){if(this.setupIfNeeded(),this.landmarks.find(t=>t.ref===e.ref)||!e.ref.current)return;if(this.landmarks.filter(e=>e.role===`main`).length,this.landmarks.length===0){this.landmarks=[e],this.checkLabels(e.role);return}let t=0,n=this.landmarks.length-1;for(;t<=n;){let r=Math.floor((t+n)/2),i=e.ref.current.compareDocumentPosition(this.landmarks[r].ref.current);i&Node.DOCUMENT_POSITION_PRECEDING||i&Node.DOCUMENT_POSITION_CONTAINS?t=r+1:n=r-1}this.landmarks.splice(t,0,e),this.checkLabels(e.role)}updateLandmark(e){let t=this.landmarks.findIndex(t=>t.ref===e.ref);t>=0&&(this.landmarks[t]={...this.landmarks[t],...e},this.checkLabels(this.landmarks[t].role))}removeLandmark(e){this.landmarks=this.landmarks.filter(t=>t.ref!==e),this.teardownIfNeeded()}checkLabels(e){let t=this.getLandmarksByRole(e);t.size>1&&[...t].filter(e=>!e.label).length}closestLandmark(e){let t=new Map(this.landmarks.map(e=>[e.ref.current,e])),n=e;for(;n&&!t.has(n)&&n!==document.body&&n.parentElement;)n=n.parentElement;return t.get(n)}getNextLandmark(e,{backward:t}){let n=this.closestLandmark(e),r=t?this.landmarks.length-1:0;n&&(r=this.landmarks.indexOf(n)+(t?-1:1));let i=()=>{if(r<0){if(!e.dispatchEvent(new CustomEvent(`react-aria-landmark-navigation`,{detail:{direction:`backward`},bubbles:!0,cancelable:!0})))return!0;r=this.landmarks.length-1}else if(r>=this.landmarks.length){if(!e.dispatchEvent(new CustomEvent(`react-aria-landmark-navigation`,{detail:{direction:`forward`},bubbles:!0,cancelable:!0})))return!0;r=0}return r<0||r>=this.landmarks.length};if(i())return;let a=r;for(;this.landmarks[r].ref.current?.closest(`[aria-hidden=true]`);){if(r+=t?-1:1,i())return;if(r===a)break}return this.landmarks[r]}f6Handler(e){e.key===`F6`&&(e.altKey?this.focusMain():this.navigate(e.target,e.shiftKey))&&(e.preventDefault(),e.stopPropagation())}focusMain(){let e=this.getLandmarkByRole(`main`);return e&&e.ref.current&&document.contains(e.ref.current)?(this.focusLandmark(e.ref.current,`forward`),!0):!1}navigate(e,t){let n=this.getNextLandmark(e,{backward:t});if(!n)return!1;if(n.lastFocused){let e=n.lastFocused;if(document.body.contains(e))return e.focus(),!0}return n.ref.current&&document.contains(n.ref.current)?(this.focusLandmark(n.ref.current,t?`backward`:`forward`),!0):!1}focusinHandler(e){let t=this.closestLandmark(e.target);t&&t.ref.current!==e.target&&this.updateLandmark({ref:t.ref,lastFocused:e.target});let n=e.relatedTarget;if(n){let e=this.closestLandmark(n);e&&e.ref.current===n&&e.blur()}}focusoutHandler(e){let t=e.target,n=e.relatedTarget;if(!n||n===document){let e=this.closestLandmark(t);e&&e.ref.current===t&&e.blur()}}createLandmarkController(){let e=this;return e.refCount++,e.setupIfNeeded(),{navigate(t,n){let r=n?.from||document.activeElement;return e.navigate(r,t===`backward`)},focusNext(t){let n=t?.from||document.activeElement;return e.navigate(n,!1)},focusPrevious(t){let n=t?.from||document.activeElement;return e.navigate(n,!0)},focusMain(){return e.focusMain()},dispose(){e&&=(e.refCount--,e.teardownIfNeeded(),null)}}}registerLandmark(e){return this.landmarks.find(t=>t.ref===e.ref)?this.updateLandmark(e):this.addLandmark(e),()=>this.removeLandmark(e.ref)}constructor(){this.landmarks=[],this.isListening=!1,this.refCount=0,this.version=F_,this.f6Handler=this.f6Handler.bind(this),this.focusinHandler=this.focusinHandler.bind(this),this.focusoutHandler=this.focusoutHandler.bind(this)}};function V_(e,t){let{role:n,"aria-label":r,"aria-labelledby":i,focus:a}=e,o=z_(),s=r||i,[c,l]=(0,b.useState)(!1),u=(0,b.useCallback)(()=>{l(!0)},[l]),d=(0,b.useCallback)(()=>{l(!1)},[l]);return Gn(()=>{if(o)return o.registerLandmark({ref:t,label:s,role:n,focus:a||u,blur:d})},[o,s,t,n,a,u,d]),(0,b.useEffect)(()=>{var e;c&&((e=t.current)==null||e.focus())},[c,t]),{landmarkProps:{role:n,tabIndex:c?-1:void 0,"aria-label":r,"aria-labelledby":i}}}function H_(e){return e&&e.__esModule?e.default:e}function U_(e,t,n){let r=Hn(H_(k_),`@react-aria/toast`),{landmarkProps:i}=V_({role:`region`,"aria-label":e[`aria-label`]||r.format(`notifications`,{count:t.visibleToasts.length})},n),a=(0,b.useRef)(!1),o=(0,b.useRef)(!1),s=qn(()=>{a.current||o.current?t.pauseAll():t.resumeAll()}),{hoverProps:c}=bo({onHoverStart:()=>{a.current=!0,s()},onHoverEnd:()=>{a.current=!1,s()}}),l=(0,b.useRef)([]),u=(0,b.useRef)(t.visibleToasts),d=(0,b.useRef)(null);Gn(()=>{if(d.current===-1||t.visibleToasts.length===0||!n.current){l.current=[],u.current=t.visibleToasts;return}if(l.current=[...n.current.querySelectorAll(`[role="alertdialog"]`)],u.current.length===t.visibleToasts.length&&t.visibleToasts.every((e,t)=>e.key===u.current[t].key)){u.current=t.visibleToasts;return}let e=u.current.map((e,n)=>({...e,i:n,isRemoved:!t.visibleToasts.some(t=>e.key===t.key)})),r=e.findIndex(e=>e.i===d.current&&e.isRemoved);if(r>-1)if(eo()===`pointer`&&f.current?.isConnected)Cr(f.current);else{let t=0,n,i;for(;t<=r;)e[t].isRemoved||(i=Math.max(0,t-1)),t++;for(;t<e.length;){if(!e[t].isRemoved){n=t-1;break}t++}i===void 0&&n===void 0&&(i=0),i>=0&&i<l.current.length?Cr(l.current[i]):n>=0&&n<l.current.length&&Cr(l.current[n])}u.current=t.visibleToasts},[t.visibleToasts,n,s]);let f=(0,b.useRef)(null),{focusWithinProps:p}=mo({onFocusWithin:e=>{o.current=!0,f.current=e.relatedTarget,s()},onBlurWithin:()=>{o.current=!1,f.current=null,s()}});return(0,b.useEffect)(()=>{t.visibleToasts.length===0&&f.current?.isConnected&&(eo()===`pointer`?Cr(f.current):f.current.focus(),f.current=null)},[n,t.visibleToasts.length]),(0,b.useEffect)(()=>()=>{f.current?.isConnected&&(eo()===`pointer`?Cr(f.current):f.current.focus(),f.current=null)},[n]),{regionProps:gr(i,c,p,{tabIndex:-1,"data-react-aria-top-layer":!0,onFocus:e=>{let t=e.target.closest(`[role="alertdialog"]`);d.current=l.current.findIndex(e=>e===t)},onBlur:()=>{d.current=-1}})}}var W_=100,G_=20,K_=50;function q_(e){let[t,n]=bc(e,bu.variantKeys),{ref:r,as:i,title:a,description:o,className:s,classNames:c,toast:l,endContent:u,closeIcon:d,hideIcon:f=!1,placement:p=`bottom-right`,isRegionExpanded:m,hideCloseButton:h=!1,state:g,total:_=1,index:v=0,heights:y,promise:x,setHeights:S,toastOffset:C=0,motionProps:w,timeout:T=6e3,shouldShowTimeoutProgress:E=!1,icon:D,onClose:O,severity:k,maxVisibleToasts:A,loadingComponent:j,isClosing:M=!1,...ee}=t,{isHovered:N,hoverProps:te}=bo({isDisabled:!1}),ne=Yt(),re=e?.disableAnimation??ne?.disableAnimation??!1,P=ih(),F=p;P&&(F=p.includes(`top`)?`top-center`:`bottom-center`);let I=(0,b.useRef)(null),ie=(0,b.useRef)(null),ae=(0,b.useRef)(0),L=(0,b.useRef)(null),oe=(0,b.useRef)(0),se=(0,b.useRef)(0);(0,b.useEffect)(()=>{L.current&&(L.current.style.width=`0%`)},[]);let[ce,le]=(0,b.useState)(!!x),[ue,de]=(0,b.useState)(!1);(0,b.useEffect)(()=>{x&&x.finally(()=>{le(!1)})},[x]),(0,b.useEffect)(()=>{M&&!ue&&de(!0)},[M,ue]),(0,b.useEffect)(()=>{ue&&re&&g.close(l.key)},[ue,re,g,l.key]),(0,b.useEffect)(()=>{let e=t=>{if(!T||ce)return;if(ie.current===null&&(ie.current=t),N||m){oe.current+=t-ie.current,ie.current=null,I.current=requestAnimationFrame(e);return}let n=t-ie.current+oe.current;se.current=n,se.current>=T&&de(!0),ae.current=Math.min(n/T*100,100),L.current&&(L.current.style.width=`${E?ae.current:0}%`),ae.current<100&&(I.current=requestAnimationFrame(e))};return I.current=requestAnimationFrame(e),()=>{I.current!==null&&cancelAnimationFrame(I.current)}},[T,E,g,N,v,_,m,ce,de]);let fe=i||`div`,pe=ht(r),me=wt(s,c?.base),{toastProps:he,contentProps:ge,titleProps:_e,descriptionProps:ve}=j_(t,g,pe),[ye,be]=(0,b.useState)(!1);(0,b.useEffect)(()=>{be(!0)},[]);let[xe,Se]=(0,b.useState)(0);(0,b.useLayoutEffect)(()=>{if(!pe.current||!ye||ue)return;let e=pe.current,t=e.style.height;e.style.height=`auto`;let n=getComputedStyle(e),r=parseFloat(n.marginTop),i=parseFloat(n.marginBottom),a=e.getBoundingClientRect().height+r+i;e.style.height=t,Se(e=>e===a?e:a);let o=[...y];o.length>v?o[v]=a:o.push(a),S(o)},[ye,_,S,v,ue]);let Ce=4;for(let e=v+1;e<_;e++)Ce+=y[e]||0;let we=y[y.length-1],Te=(0,b.useMemo)(()=>bu({...n,disableAnimation:re}),[kt(n)]),Ee=F.includes(`top`)?1:-1,De={hidden:{opacity:0,y:-K_*Ee},visible:{opacity:1,y:0},exit:{opacity:0,y:-K_*Ee}},[Oe,ke]=(0,b.useState)(!1),[Ae,je]=(0,b.useState)(0),Me=(e,t)=>{let n=F.includes(`right`),r=F.includes(`left`),i=F===`top-center`,a=F===`bottom-center`;if(n&&e>=W_||r&&e<=-W_||i&&t<=-G_||a&&t>=G_)return!0},Ne=e=>{let t={top:0,bottom:0,right:0,left:0};return e===`bottom-center`?(t.bottom=1,t):e===`top-center`?(t.top=1,t):e.includes(`right`)?(t.right=1,t):e.includes(`left`)?(t.left=1,t):(t.left=1,t.right=1,t)},Pe;Oe&&F===`bottom-center`||F===`top-center`?Pe=Math.max(0,1-Ae/(G_+5)):Oe&&(Pe=Math.max(0,1-Ae/(W_+20)));let Fe=(0,b.useCallback)((e={})=>{let t={"--top-extension":`16px`,"--bottom-extension":`16px`};return{ref:pe,className:Te.base({class:wt(me,c?.base)}),"data-has-title":R(!xt(a)),"data-has-description":R(!xt(o)),"data-placement":F,"data-drag-value":Ae,"data-toast":!0,"aria-label":`toast`,"data-toast-exiting":R(ue),onTransitionEnd:re?void 0:()=>{ue&&g.close(l.key)},style:{opacity:Pe,...t},...It(e,ee,he,te)}},[Te,c,he,te,l,l.key,Pe,ue,g,l.key,re]),Ie=(0,b.useCallback)((e={})=>({className:Te.wrapper({class:c?.wrapper}),...e}),[]),Le=(0,b.useCallback)((e={})=>({"aria-label":`descriptionIcon`,className:Te.icon({class:c?.icon}),...e}),[]),Re=(0,b.useCallback)((e={})=>({className:Te.loadingComponent({class:c?.loadingComponent}),"aria-label":`loadingIcon`,color:`current`,...e}),[]),ze=(0,b.useCallback)((e={})=>({classNames:{wrapper:Te.loadingComponent({class:c?.loadingComponent})},"aria-label":`loadingIcon`,color:`current`,...e}),[]),Be=(0,b.useCallback)((e={})=>({className:Te.content({class:c?.content}),...It(e,ee,ge)}),[ge]),Ve=(0,b.useCallback)((e={})=>({className:Te.title({class:c?.title}),...It(e,ee,_e)}),[_e]),He=(0,b.useCallback)((e={})=>({className:Te.description({class:c?.description}),...It(e,ee,ve)}),[ve]),Ue=(0,b.useCallback)((e={})=>({className:Te.closeButton({class:c?.closeButton}),"aria-label":`closeButton`,"data-hidden":R(h),...It(e,{onPress:Nt(()=>{de(!0),setTimeout(()=>document.body.focus(),0)},O)})}),[de,O,g,l]),We=(0,b.useCallback)((e={})=>({className:Te.closeIcon({class:c?.closeIcon}),"aria-label":`closeIcon`,...e}),[]),Ge=(0,b.useCallback)((e={})=>{let t=m?A-1:Math.min(2,A-1),n=_-v-1<=t,r=F===`bottom-center`||F===`top-center`?`y`:`x`,i={left:0,right:0,top:0,bottom:0},a=Ne(F),o=(()=>F.includes(`top`)?{top:m||Oe?Ce+C:(_-1-v)*8+C,bottom:`auto`}:F.includes(`bottom`)?{bottom:m||Oe?Ce+C:(_-1-v)*8+C,top:`auto`}:{})();return{animate:{opacity:n?1:0,pointerEvents:n?`all`:`none`,scaleX:m||Oe?1:1-(_-1-v)*.1,height:m||Oe?xe:we,y:0,...o},drag:r,dragConstraints:i,exit:{opacity:0,transition:{duration:.3}},initial:{opacity:0,scale:1,y:-40*Ee},transition:{duration:.3,ease:`easeOut`},variants:De,dragElastic:a,onDragEnd:(e,t)=>{let{x:n,y:r}=t.offset;if(ke(!1),Me(n,r)){de(!0);return}je(0)},onDrag:(e,t)=>{let n=0;F===`top-center`?n=-t.offset.y:F===`bottom-center`?n=t.offset.y:F.includes(`right`)?n=t.offset.x:F.includes(`left`)&&(n=-t.offset.x),n>=0&&je(n)},onDragStart:()=>{ke(!0)},"data-drag":R(Oe),"data-placement":F,"data-drag-value":Ae,className:Te.motionDiv({class:c?.motionDiv}),...e,...w}},[_,v,F,m,ue,Ce,Ee,xe,we,De,c,Oe,R,ke,Me,Te,C,A]);return{Component:fe,title:a,description:o,icon:D,loadingComponent:j,domRef:pe,severity:k,closeIcon:d,classNames:c,color:n.color,hideIcon:f,placement:F,state:g,toast:l,disableAnimation:re,isProgressBarVisible:!!T,total:_,index:v,getWrapperProps:Ie,getToastProps:Fe,getTitleProps:Ve,getContentProps:Be,getDescriptionProps:He,getCloseButtonProps:Ue,getIconProps:Le,getMotionDivProps:Ge,getCloseIconProps:We,getLoadingComponentProps:Re,getSpinnerComponentProps:ze,progressBarRef:L,endContent:u,slots:Te,isRegionExpanded:m,liftHeight:Ce,frontHeight:we,initialHeight:xe,isLoading:ce}}var J_=()=>yd(()=>import(`./src-UW24ZMRV-DUh4ooGF.js`),__vite__mapDeps([3,1,2])).then(e=>e.default),Y_=e=>{let{ripples:t=[],motionProps:n,color:r=`currentColor`,style:i,onClear:a}=e;return(0,V.jsx)(V.Fragment,{children:t.map(e=>{let t=At(.01*e.size,.2,e.size>100?.75:.5);return(0,V.jsx)(p,{features:J_,children:(0,V.jsx)(m,{mode:`popLayout`,children:(0,V.jsx)(_.span,{animate:{transform:`scale(2)`,opacity:0},className:`heroui-ripple`,exit:{opacity:0},initial:{transform:`scale(0)`,opacity:.35},style:{position:`absolute`,backgroundColor:r,borderRadius:`100%`,transformOrigin:`center`,pointerEvents:`none`,overflow:`hidden`,inset:0,zIndex:0,top:e.y,left:e.x,width:`${e.size}px`,height:`${e.size}px`,...i},transition:{duration:t},onAnimationComplete:()=>{a(e.key)},...n})})},e.key)})})};Y_.displayName=`HeroUI.Ripple`;var X_=Y_;function Z_(e={}){let[t,n]=(0,b.useState)([]),r=(0,b.useCallback)(e=>{let t=e.target,r=Math.max(t.clientWidth,t.clientHeight);n(t=>[...t,{key:Dt(t.length.toString()),size:r,x:e.x-r/2,y:e.y-r/2}])},[]),i=(0,b.useCallback)(e=>{n(t=>t.filter(t=>t.key!==e))},[]);return{ripples:t,onClear:i,onPress:r,...e}}typeof window<`u`&&window.document&&window.document.createElement;var Q_=new Map;typeof FinalizationRegistry<`u`&&new FinalizationRegistry(e=>{Q_.delete(e)});function $_(e,t){if(e===t)return e;let n=Q_.get(e);if(n)return n.forEach(e=>e.current=t),t;let r=Q_.get(t);return r?(r.forEach(t=>t.current=e),e):t}function ev(...e){return(...t)=>{for(let n of e)typeof n==`function`&&n(...t)}}function tv(e){var t,n,r=``;if(typeof e==`string`||typeof e==`number`)r+=e;else if(typeof e==`object`)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=tv(e[t]))&&(r&&(r+=` `),r+=n)}else for(n in e)e[n]&&(r&&(r+=` `),r+=n);return r}function fee(){for(var e,t,n=0,r=``,i=arguments.length;n<i;n++)(e=arguments[n])&&(t=tv(e))&&(r&&(r+=` `),r+=t);return r}var pee=fee;function nv(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],i=r[e];typeof n==`function`&&typeof i==`function`&&e[0]===`o`&&e[1]===`n`&&e.charCodeAt(2)>=65&&e.charCodeAt(2)<=90?t[e]=ev(n,i):(e===`className`||e===`UNSAFE_className`)&&typeof n==`string`&&typeof i==`string`?t[e]=pee(n,i):e===`id`&&n&&i?t.id=$_(n,i):t[e]=i===void 0?n:i}}return t}var mee=new Set([`id`]),hee=new Set([`aria-label`,`aria-labelledby`,`aria-describedby`,`aria-details`]),gee=new Set([`href`,`hrefLang`,`target`,`rel`,`download`,`ping`,`referrerPolicy`]),_ee=new Set([`dir`,`lang`,`hidden`,`inert`,`translate`]),rv=new Set(`onClick.onAuxClick.onContextMenu.onDoubleClick.onMouseDown.onMouseEnter.onMouseLeave.onMouseMove.onMouseOut.onMouseOver.onMouseUp.onTouchCancel.onTouchEnd.onTouchMove.onTouchStart.onPointerDown.onPointerMove.onPointerUp.onPointerCancel.onPointerEnter.onPointerLeave.onPointerOver.onPointerOut.onGotPointerCapture.onLostPointerCapture.onScroll.onWheel.onAnimationStart.onAnimationEnd.onAnimationIteration.onTransitionCancel.onTransitionEnd.onTransitionRun.onTransitionStart`.split(`.`)),vee=/^(data-.*)$/;function yee(e,t={}){let{labelable:n,isLink:r,global:i,events:a=i,propNames:o}=t,s={};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(mee.has(t)||n&&hee.has(t)||r&&gee.has(t)||i&&_ee.has(t)||a&&rv.has(t)||t.endsWith(`Capture`)&&rv.has(t.slice(0,-7))||o?.has(t)||vee.test(t))&&(s[t]=e[t]);return s}function bee(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=(0,b.useRef)({isFocused:!1,isFocusVisible:t||$a()}),[a,o]=(0,b.useState)(!1),[s,c]=(0,b.useState)(()=>i.current.isFocused&&i.current.isFocusVisible),l=(0,b.useCallback)(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),u=(0,b.useCallback)(e=>{i.current.isFocused=e,o(e),l()},[l]);io(e=>{i.current.isFocusVisible=e,l()},[],{isTextInput:n});let{focusProps:d}=oo({isDisabled:r,onFocusChange:u}),{focusWithinProps:f}=mo({isDisabled:!r,onFocusWithinChange:u});return{isFocused:a,isFocusVisible:s,focusProps:r?f:d}}function xee(e,t){let{elementType:n=`button`,isDisabled:r,onPress:i,onPressStart:a,onPressEnd:o,onPressUp:s,onPressChange:c,preventFocusOnPress:l,allowFocusWhenDisabled:u,onClick:d,href:f,target:p,rel:m,type:h=`button`,allowTextSelectionOnPress:g}=e,_;_=n===`button`?{type:h,disabled:r}:{role:`button`,href:n===`a`&&!r?f:void 0,target:n===`a`?p:void 0,type:n===`input`?h:void 0,disabled:n===`input`?r:void 0,"aria-disabled":!r||n===`input`?void 0:r,rel:n===`a`?m:void 0};let{pressProps:v,isPressed:y}=ka({onClick:d,onPressStart:a,onPressEnd:o,onPressUp:s,onPressChange:c,onPress:i,isDisabled:r,preventFocusOnPress:l,allowTextSelectionOnPress:g,ref:t}),{focusableProps:b}=fo(e,t);u&&(b.tabIndex=r?-1:b.tabIndex);let x=nv(b,v,yee(e,{labelable:!0}));return{isPressed:y,buttonProps:nv(_,x,{"aria-haspopup":e[`aria-haspopup`],"aria-expanded":e[`aria-expanded`],"aria-controls":e[`aria-controls`],"aria-pressed":e[`aria-pressed`],"aria-current":e[`aria-current`]})}}var[See,Cee]=ft({name:`ButtonGroupContext`,strict:!1});function wee(e){let t=Cee(),n=Yt(),r=!!t,{ref:i,as:a,children:o,startContent:s,endContent:c,autoFocus:l,className:u,spinner:d,isLoading:f=!1,disableRipple:p=!1,fullWidth:m=t?.fullWidth??!1,radius:h=t?.radius,size:g=t?.size??`md`,color:_=t?.color??`default`,variant:v=t?.variant??`solid`,disableAnimation:y=t?.disableAnimation??n?.disableAnimation??!1,isDisabled:x=t?.isDisabled??!1,isIconOnly:S=t?.isIconOnly??!1,spinnerPlacement:C=`start`,onPress:w,onClick:T,...E}=e,D=a||`button`,O=typeof D==`string`,k=ht(i),A=(p||n?.disableRipple)??y,{isFocusVisible:j,isFocused:M,focusProps:ee}=bee({autoFocus:l}),N=x||f,te=(0,b.useMemo)(()=>Iu({size:g,color:_,variant:v,radius:h,fullWidth:m,isDisabled:N,isInGroup:r,disableAnimation:y,isIconOnly:S,className:u}),[g,_,v,h,m,N,r,S,y,u]),{onPress:ne,onClear:re,ripples:P}=Z_(),F=(0,b.useCallback)(e=>{A||N||y||k.current&&ne(e)},[A,N,y,k,ne]),{buttonProps:I,isPressed:ie}=xee({elementType:a,isDisabled:N,onPress:Nt(w,F),onClick:T,...E},k),{isHovered:ae,hoverProps:L}=bo({isDisabled:N}),oe=(0,b.useCallback)((e={})=>({"data-disabled":R(N),"data-focus":R(M),"data-pressed":R(ie),"data-focus-visible":R(j),"data-hover":R(ae),"data-loading":R(f),...It(I,ee,L,qt(E,{enabled:O}),qt(e)),className:te}),[f,N,M,ie,O,j,ae,I,ee,L,E,te]),se=e=>(0,b.isValidElement)(e)?(0,b.cloneElement)(e,{"aria-hidden":!0,focusable:!1}):null,ce=se(s),le=se(c),ue=(0,b.useMemo)(()=>({sm:`sm`,md:`sm`,lg:`md`})[g],[g]),de=(0,b.useCallback)(()=>({ripples:P,onClear:re}),[P,re]);return{Component:D,children:o,domRef:k,spinner:d,styles:te,startContent:ce,endContent:le,isLoading:f,spinnerPlacement:C,spinnerSize:ue,disableRipple:A,getButtonProps:oe,getRippleProps:de,isIconOnly:S}}var iv=yc((e,t)=>{let{Component:n,domRef:r,children:i,spinnerSize:a,spinner:o=(0,V.jsx)(uf,{color:`current`,size:a}),spinnerPlacement:s,startContent:c,endContent:l,isLoading:u,disableRipple:d,getButtonProps:f,getRippleProps:p,isIconOnly:m}=wee({...e,ref:t});return(0,V.jsxs)(n,{ref:r,...f(),children:[c,u&&s===`start`&&o,u&&m?null:i,u&&s===`end`&&o,l,!d&&(0,V.jsx)(X_,{...p()})]})});iv.displayName=`HeroUI.Button`;var Tee=iv,av={default:cd,primary:cd,secondary:cd,success:ad,warning:od,danger:fd},ov=yc((e,t)=>{let{severity:n,Component:r,icon:i,loadingComponent:a,domRef:o,endContent:s,color:c,hideIcon:l,closeIcon:u,disableAnimation:d,progressBarRef:f,classNames:p,slots:m,getWrapperProps:h,isProgressBarVisible:g,getToastProps:v,getContentProps:y,getTitleProps:x,getDescriptionProps:S,getCloseButtonProps:C,getIconProps:w,getMotionDivProps:T,getCloseIconProps:E,getLoadingComponentProps:D,getSpinnerComponentProps:O,isLoading:k}=q_({...e,ref:t}),A=typeof i==`function`?i(w()):(0,b.isValidElement)(i)&&(0,b.cloneElement)(i,w()),j=n?av[n]:av[c]||av.default,M=a&&(0,b.isValidElement)(a)?(0,b.cloneElement)(a,D()):null,ee=k?M||(0,V.jsx)(uf,{...O()}):null,N=typeof u==`function`?u({}):(0,b.isValidElement)(u)&&(0,b.cloneElement)(u,{}),te=(0,V.jsxs)(r,{ref:o,...v(),children:[(0,V.jsxs)(`div`,{...y(),children:[l&&!k?null:ee||A||(0,V.jsx)(j,{...w()}),(0,V.jsxs)(`div`,{...h(),children:[(0,V.jsx)(`div`,{...x(),children:e.toast.content.title}),(0,V.jsx)(`div`,{...S(),children:e.toast.content.description})]})]}),g&&(0,V.jsx)(`div`,{className:m.progressTrack({class:p?.progressTrack}),children:(0,V.jsx)(`div`,{ref:f,className:m.progressIndicator({class:p?.progressIndicator})})}),(0,V.jsx)(Tee,{isIconOnly:!0,...C(),children:N||(0,V.jsx)(dd,{...E()})}),s]});return(0,V.jsx)(V.Fragment,{children:d?te:(0,V.jsx)(_.div,{...T(),children:te})})});ov.displayName=`HeroUI.Toast`;var Eee=ov,Dee=t(N_(),1);function Oee(e){let t=(0,b.useCallback)(t=>e.subscribe(t),[e]),n=(0,b.useCallback)(()=>e.visibleToasts,[e]);return{visibleToasts:(0,Dee.useSyncExternalStore)(t,n,n),add:(t,n)=>e.add(t,n),close:t=>e.close(t),pauseAll:()=>e.pauseAll(),resumeAll:()=>e.resumeAll()}}var kee=class{runWithWrapUpdate(e,t){this.wrapUpdate?this.wrapUpdate(e,t):e()}subscribe(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}add(e,t={}){let n=`_`+Math.random().toString(36).slice(2),r={...t,content:e,key:n,timer:t.timeout?new Aee(()=>this.close(n),t.timeout):void 0};return this.queue.unshift(r),this.updateVisibleToasts(`add`),n}close(e){let t=this.queue.findIndex(t=>t.key===e);if(t>=0){var n,r;(n=(r=this.queue[t]).onClose)==null||n.call(r),this.queue.splice(t,1)}this.updateVisibleToasts(`remove`)}updateVisibleToasts(e){this.visibleToasts=this.queue.slice(0,this.maxVisibleToasts),this.runWithWrapUpdate(()=>{for(let e of this.subscriptions)e()},e)}pauseAll(){for(let e of this.visibleToasts)e.timer&&e.timer.pause()}resumeAll(){for(let e of this.visibleToasts)e.timer&&e.timer.resume()}clear(){this.queue=[],this.updateVisibleToasts(`clear`)}constructor(e){this.queue=[],this.subscriptions=new Set,this.visibleToasts=[],this.maxVisibleToasts=e?.maxVisibleToasts??1/0,this.wrapUpdate=e?.wrapUpdate}},Aee=class{reset(e){this.remaining=e,this.resume()}pause(){this.timerId!=null&&(clearTimeout(this.timerId),this.timerId=null,this.remaining-=Date.now()-this.startTime)}resume(){this.remaining<=0||(this.startTime=Date.now(),this.timerId=setTimeout(()=>{this.timerId=null,this.remaining=0,this.callback()},this.remaining))}constructor(e,t){this.startTime=null,this.remaining=t,this.callback=e}},jee=()=>yd(()=>import(`./es-o9pB67Wb.js`),__vite__mapDeps([4,1,2])).then(e=>e.domMax),sv=null,Mee=()=>(sv||=new kee({maxVisibleToasts:1/0}),sv),Nee=({placement:e=`bottom-right`,disableAnimation:t=!1,maxVisibleToasts:n=3,toastOffset:r=0,toastProps:i={},regionProps:a})=>{let o=Oee(Mee()),s=Yt(),c=t??s?.disableAnimation??!1;return(0,V.jsx)(p,{features:jee,children:o.visibleToasts.length>0&&(0,V.jsx)(uv,{disableAnimation:c,maxVisibleToasts:n,placement:e,toastOffset:r,toastProps:i,toastQueue:o,...a})})},cv=new Map,lv=e=>cv.has(e);function uv({toastQueue:e,placement:t,disableAnimation:n,maxVisibleToasts:r,toastOffset:i,toastProps:a={},className:o,classNames:s,...c}){let l=(0,b.useRef)(null),{regionProps:u}=U_(c,e,l),{hoverProps:d,isHovered:f}=bo({isDisabled:!1}),[p,h]=(0,b.useState)(!1),g=(0,b.useMemo)(()=>yu({disableAnimation:n}),[n]),_=wt(s?.base,o);(0,b.useEffect)(()=>{function e(e){l.current&&!l.current.contains(e.target)&&h(!1)}return document.addEventListener(`touchstart`,e),()=>{document.removeEventListener(`touchstart`,e)}},[]);let[v,y]=(0,b.useState)([]),x=e.visibleToasts?.length??0,S=(0,b.useCallback)(()=>{h(!0)},[]);return(0,V.jsx)(`div`,{...It(u,d),ref:l,className:g.base({class:_}),"data-placement":t,onTouchStart:S,children:(0,V.jsx)(m,{children:[...e.visibleToasts].reverse().map((o,s)=>{if(n&&x-s>r)return null;if(n||x-s<=4||f&&x-s<=r+1){let c=lv(o.key);return(0,V.jsx)(Eee,{state:e,toast:o,...It(a,o.content,{isClosing:c}),disableAnimation:n,heights:v,index:s,isRegionExpanded:f||p,maxVisibleToasts:r,placement:t,setHeights:y,toastOffset:i,total:x},o.key)}return null})})})}const dv=({children:e,easyCreate:t=!1,onFolderSelect:n,className:r=t&&`rounded-lg border-2 border-dashed border-gray-300 hover:border-gray-400 text-center drag:bg-blue-50 drag:dark:bg-blue-900/20 drag:border-blue-500`,...i})=>{let[a,o]=(0,b.useState)(!1),s=(0,b.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),o(!0),e.currentTarget.setAttribute(`data-drag-over`,`true`)},[]),c=(0,b.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),o(!1),e.currentTarget.removeAttribute(`data-drag-over`)},[]),l=(0,b.useCallback)(async e=>{e.preventDefault(),e.stopPropagation(),o(!1),e.currentTarget.removeAttribute(`data-drag-over`);let t=e.dataTransfer.items;for(let e of t)if(e.kind===`file`){let t=await e.getAsFileSystemHandle?.();if(t?.kind===`directory`){n(t);return}}},[n]);return(0,V.jsxs)(`div`,{className:`transition-colors ${r||``}`.trim(),onDragLeave:c,onDragOver:s,onDrop:l,...i,children:[t&&(0,V.jsxs)(`div`,{className:`flex flex-col items-center justify-center gap-4 h-full select-none`,children:[(0,V.jsx)(`div`,{className:`text-6xl`,children:`📁`}),(0,V.jsx)(`div`,{className:`text-lg font-medium`,children:a?`释放文件夹`:`拖拽文件夹到此处`}),(0,V.jsx)(`div`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:`支持拖拽文件夹或文件`})]}),e]})};var fv={error:(e,...t)=>{console.error(`[ERROR] ${e}`,...t)},warn:(e,...t)=>{},info:(e,...t)=>{}};const pv={name:`TraceDialog 对话编辑器`,description:`为 TraceDialog 提供的可视化对话编辑器`,links:{github:`https://github.com/Moirstral/TraceDialog`},poweredBy:[{name:`Vite`,desc:`开发构建工具`,url:`https://vitejs.dev`},{name:`React`,desc:`JavaScript 库`,url:`https://reactjs.org`},{name:`HeroUI`,desc:`美观的 React UI 库`,url:`https://www.heroui.com`},{name:`AntV G6`,desc:`简单、易用、完备的图可视化引擎`,url:`https://g6.antv.antgroup.com`},{name:`Boxicons`,desc:`开源图标库`,url:`https://boxicons.com/`},{name:`TypeScript`,desc:`JavaScript 超集`,url:`https://www.typescriptlang.org`},{name:`TailwindCSS`,desc:`CSS 框架`,url:`https://tailwindcss.com`},{name:`Moirstral`,desc:`作者`,url:`https://github.com/Moirstral`}],navItems:[{label:`Home`,href:`/`},{label:`Docs`,href:`/docs`},{label:`Pricing`,href:`/pricing`},{label:`Blog`,href:`/blog`},{label:`About`,href:`/about`}]},mv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{height:e||n,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsx)(`path`,{clipRule:`evenodd`,d:`M12.026 2c-5.509 0-9.974 4.465-9.974 9.974 0 4.406 2.857 8.145 6.821 9.465.499.09.679-.217.679-.481 0-.237-.008-.865-.011-1.696-2.775.602-3.361-1.338-3.361-1.338-.452-1.152-1.107-1.459-1.107-1.459-.905-.619.069-.605.069-.605 1.002.07 1.527 1.028 1.527 1.028.89 1.524 2.336 1.084 2.902.829.091-.645.351-1.085.635-1.334-2.214-.251-4.542-1.107-4.542-4.93 0-1.087.389-1.979 1.024-2.675-.101-.253-.446-1.268.099-2.64 0 0 .837-.269 2.742 1.021a9.582 9.582 0 0 1 2.496-.336 9.554 9.554 0 0 1 2.496.336c1.906-1.291 2.742-1.021 2.742-1.021.545 1.372.203 2.387.099 2.64.64.696 1.024 1.587 1.024 2.675 0 3.833-2.33 4.675-4.552 4.922.355.308.675.916.675 1.846 0 1.334-.012 2.41-.012 2.737 0 .267.178.577.687.479C19.146 20.115 22 16.379 22 11.974 22 6.465 17.535 2 12.026 2z`,fill:`currentColor`,fillRule:`evenodd`})}),hv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsx)(`path`,{d:`M21.53 15.93c-.16-.27-.61-.69-1.73-.49a8.46 8.46 0 01-1.88.13 8.409 8.409 0 01-5.91-2.82 8.068 8.068 0 01-1.44-8.66c.44-1.01.13-1.54-.09-1.76s-.77-.55-1.83-.11a10.318 10.318 0 00-6.32 10.21 10.475 10.475 0 007.04 8.99 10 10 0 002.89.55c.16.01.32.02.48.02a10.5 10.5 0 008.47-4.27c.67-.93.49-1.519.32-1.79z`,fill:`currentColor`})}),gv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsxs)(`g`,{fill:`currentColor`,children:[(0,V.jsx)(`path`,{d:`M19 12a7 7 0 11-7-7 7 7 0 017 7z`}),(0,V.jsx)(`path`,{d:`M12 22.96a.969.969 0 01-1-.96v-.08a1 1 0 012 0 1.038 1.038 0 01-1 1.04zm7.14-2.82a1.024 1.024 0 01-.71-.29l-.13-.13a1 1 0 011.41-1.41l.13.13a1 1 0 010 1.41.984.984 0 01-.7.29zm-14.28 0a1.024 1.024 0 01-.71-.29 1 1 0 010-1.41l.13-.13a1 1 0 011.41 1.41l-.13.13a1 1 0 01-.7.29zM22 13h-.08a1 1 0 010-2 1.038 1.038 0 011.04 1 .969.969 0 01-.96 1zM2.08 13H2a1 1 0 010-2 1.038 1.038 0 011.04 1 .969.969 0 01-.96 1zm16.93-7.01a1.024 1.024 0 01-.71-.29 1 1 0 010-1.41l.13-.13a1 1 0 011.41 1.41l-.13.13a.984.984 0 01-.7.29zm-14.02 0a1.024 1.024 0 01-.71-.29l-.13-.14a1 1 0 011.41-1.41l.13.13a1 1 0 010 1.41.97.97 0 01-.7.3zM12 3.04a.969.969 0 01-1-.96V2a1 1 0 012 0 1.038 1.038 0 01-1 1.04z`})]})}),_v=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsx)(`path`,{d:`M12.62 20.81c-.34.12-.9.12-1.24 0C8.48 19.82 2 15.69 2 8.69 2 5.6 4.49 3.1 7.56 3.1c1.82 0 3.43.88 4.44 2.24a5.53 5.53 0 0 1 4.44-2.24C19.51 3.1 22 5.6 22 8.69c0 7-6.48 11.13-9.38 12.12Z`,fill:`currentColor`,strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:1.5})}),vv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsxs)(`g`,{fill:`currentColor`,children:[(0,V.jsx)(`path`,{d:`m7.71 17.71 5.7-5.71-5.7-5.71-1.42 1.42 4.3 4.29-4.3 4.29z`}),(0,V.jsx)(`path`,{d:`m11.29 7.71 4.3 4.29-4.3 4.29 1.42 1.42 5.7-5.71-5.7-5.71z`})]})}),yv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsxs)(`g`,{fill:`currentColor`,children:[(0,V.jsx)(`path`,{d:`M12.71 16.29 8.41 12l4.3-4.29-1.42-1.42L5.59 12l5.7 5.71z`}),(0,V.jsx)(`path`,{d:`M16.29 6.29 10.59 12l5.7 5.71 1.42-1.42-4.3-4.29 4.3-4.29z`})]})}),bv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsx)(`path`,{d:`M3 13h8v8h2v-8h8v-2h-8V3h-2v8H3z`,fill:`currentColor`})}),xv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsx)(`path`,{d:`M20 4h-8.59L10 2.59C9.63 2.22 9.11 2 8.59 2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-8.79 10.29L9.8 15.7l-3.71-3.71L9.8 8.28l1.41 1.41-2.29 2.29 2.29 2.29Zm3 1.41-1.41-1.41L15.09 12 12.8 9.71l1.41-1.41 3.71 3.71-3.71 3.71Z`,fill:`currentColor`})}),Sv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsx)(`path`,{d:`M14.71 2.29A1 1 0 0 0 14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-.27-.11-.52-.29-.71zm-3.75 15L9.55 18.7l-3.21-3.21 3.21-3.21 1.41 1.41-1.79 1.79 1.79 1.79Zm3.5 1.41-1.41-1.41 1.79-1.79-1.79-1.79 1.41-1.41 3.21 3.21-3.21 3.21ZM13 8.99V3.5L18.5 9H13Z`,fill:`currentColor`})}),Cv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsx)(`path`,{d:`M12 2a5 5 0 1 0 0 10 5 5 0 1 0 0-10M4 22h16c.55 0 1-.45 1-1v-1c0-3.86-3.14-7-7-7h-4c-3.86 0-7 3.14-7 7v1c0 .55.45 1 1 1`,fill:`currentColor`})}),wv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{"aria-hidden":`true`,focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsx)(`path`,{d:`m7.76 14.83-2.83 2.83 1.41 1.41 2.83-2.83 2.12-2.12.71-.71.71.71 1.41 1.42 3.54 3.53 1.41-1.41-3.53-3.54-1.42-1.41-.71-.71 5.66-5.66-1.41-1.41L12 10.59 6.34 4.93 4.93 6.34 10.59 12l-.71.71z`,fill:`currentColor`})}),Tv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsx)(`path`,{d:`M10 10h4v4h-4zM10 16h4v4h-4zM10 4h4v4h-4z`,fill:`currentColor`})}),Ev=({size:e=24,width:t,height:n,...r})=>(0,V.jsxs)(`svg`,{focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:[(0,V.jsx)(`path`,{d:`M5 21h14c1.1 0 2-.9 2-2v-7h-2v7H5V5h7V3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2`,fill:`currentColor`}),(0,V.jsx)(`path`,{d:`M7 13v3c0 .55.45 1 1 1h3c.27 0 .52-.11.71-.29l9-9a.996.996 0 0 0 0-1.41l-3-3a.996.996 0 0 0-1.41 0l-9.01 8.99A1 1 0 0 0 7 13m10-7.59L18.59 7 17.5 8.09 15.91 6.5zm-8 8 5.5-5.5 1.59 1.59-5.5 5.5H9z`,fill:`currentColor`})]}),Dv=({size:e=24,width:t,height:n,...r})=>(0,V.jsxs)(`svg`,{focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:[(0,V.jsx)(`path`,{d:`M17 6V4c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H2v2h2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8h2V6zM9 4h6v2H9zM6 20V8h12v12z`,fill:`currentColor`}),(0,V.jsx)(`path`,{d:`M9 10h2v8H9zM13 10h2v8h-2z`,fill:`currentColor`})]}),Ov=({size:e=24,width:t,height:n,...r})=>(0,V.jsxs)(`svg`,{focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:[(0,V.jsx)(`path`,{d:`M20 2H10c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 12H10V4h10z`,fill:`currentColor`}),(0,V.jsx)(`path`,{d:`M14 20H4V10h2V8H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-2h-2z`,fill:`currentColor`})]}),kv=({size:e=24,width:t,height:n,...r})=>(0,V.jsx)(`svg`,{focusable:`false`,height:e||n,role:`presentation`,viewBox:`0 0 24 24`,width:e||t,...r,children:(0,V.jsx)(`path`,{d:`M19.07 4.93a9.9 9.9 0 0 0-3.18-2.14 10.12 10.12 0 0 0-7.79 0c-1.19.5-2.26 1.23-3.18 2.14S3.28 6.92 2.78 8.11A9.95 9.95 0 0 0 1.99 12h2c0-1.08.21-2.13.63-3.11.4-.95.98-1.81 1.72-2.54.73-.74 1.59-1.31 2.54-1.71 1.97-.83 4.26-.83 6.23 0 .95.4 1.81.98 2.54 1.72.17.17.33.34.48.52L16 9.01h6V3l-2.45 2.45c-.15-.18-.31-.36-.48-.52M19.37 15.11c-.4.95-.98 1.81-1.72 2.54-.73.74-1.59 1.31-2.54 1.71-1.97.83-4.26.83-6.23 0-.95-.4-1.81-.98-2.54-1.72-.17-.17-.33-.34-.48-.52l2.13-2.13H2v6l2.45-2.45c.15.18.31.36.48.52.92.92 1.99 1.64 3.18 2.14 1.23.52 2.54.79 3.89.79s2.66-.26 3.89-.79c1.19-.5 2.26-1.23 3.18-2.14s1.64-1.99 2.14-3.18c.52-1.23.79-2.54.79-3.89h-2c0 1.08-.21 2.13-.63 3.11Z`,fill:`currentColor`})});var Av={KEY:`heroui-theme`,LIGHT:`light`,DARK:`dark`,SYSTEM:`system`};function jv(e=Av.SYSTEM){let t=`(prefers-color-scheme: dark)`,[n,r]=(0,b.useState)(()=>localStorage.getItem(Av.KEY)||(e===Av.SYSTEM?window.matchMedia?.call(window,t).matches?Av.DARK:Av.LIGHT:e)),i=(0,b.useCallback)(e=>{let n=e===Av.SYSTEM?window.matchMedia?.call(window,t).matches?Av.DARK:Av.LIGHT:e;localStorage.setItem(Av.KEY,e),document.documentElement.classList.remove(Av.LIGHT,Av.DARK,Av.SYSTEM),document.documentElement.classList.add(n),r(e)},[n]),a=(0,b.useCallback)(t=>{e===Av.SYSTEM&&i(t.matches?Av.DARK:Av.LIGHT)},[i]);return(0,b.useEffect)(()=>i(n),[n,i]),(0,b.useEffect)(()=>{let e=window.matchMedia(t);return e.addEventListener(`change`,a),()=>e.removeEventListener(`change`,a)},[a]),{theme:n,setTheme:i}}const Mv=({className:e,classNames:t})=>{let[n,r]=(0,b.useState)(!1),{theme:i,setTheme:a}=jv(),{Component:o,slots:s,isSelected:c,getBaseProps:l,getInputProps:u,getWrapperProps:d}=Tp({isSelected:i===`light`,onChange:()=>a(i===`light`?`dark`:`light`)});return(0,b.useEffect)(()=>{r(!0)},[n]),n?(0,V.jsxs)(o,{"aria-label":c?`Switch to dark mode`:`Switch to light mode`,...l({className:hr(`px-px transition-opacity cursor-pointer`,e,t?.base)}),children:[(0,V.jsx)(lc,{children:(0,V.jsx)(`input`,{...u()})}),(0,V.jsx)(`div`,{...d(),className:s.wrapper({class:hr([`w-auto h-auto`,`bg-transparent`,`rounded-lg`,`flex items-center justify-center`,`group-data-[selected=true]:bg-transparent`,`!text-default-500`,`pt-px`,`px-0`,`mx-0`],t?.wrapper)}),children:c?(0,V.jsx)(hv,{className:`hover:animate-wiggle`,size:22}):(0,V.jsx)(gv,{className:`text-yellow-400 hover:animate-spin`,size:22})})]}):(0,V.jsx)(`div`,{className:`w-6 h-6`})},Nv=()=>(0,V.jsxs)(xh,{shouldHideOnScroll:!0,maxWidth:`full`,children:[(0,V.jsx)(Th,{className:`basis-1/5 sm:basis-full`,justify:`start`,children:(0,V.jsx)(Ch,{className:`gap-3 max-w-fit`,children:(0,V.jsx)(`p`,{className:`font-bold text-inherit`,children:pv.name})})}),(0,V.jsxs)(Th,{className:`basis-1/5 sm:basis-full`,justify:`end`,children:[(0,V.jsx)(Qf,{isExternal:!0,href:pv.links.github,title:`GitHub`,children:(0,V.jsx)(mv,{className:`text-default-500`})}),(0,V.jsx)(Mv,{}),(0,V.jsx)(Cp,{content:(0,V.jsxs)(`div`,{className:`px-1 py-2`,children:[(0,V.jsx)(`div`,{className:`text-default-600 text-lg text-center`,children:`技术支持`}),(0,V.jsx)(Ud,{className:`my-3`}),pv.poweredBy.map(e=>(0,V.jsxs)(Qf,{isExternal:!0,className:`flex items-center gap-1 text-current`,href:e.url,title:e.name,children:[(0,V.jsx)(`p`,{className:`text-primary text-right w-24 mr-2`,children:e.name}),(0,V.jsx)(`p`,{className:`text-default-500`,children:e.desc})]},e.name))]}),children:(0,V.jsx)(_v,{className:`hidden md:flex text-red-400 cursor-pointer hover:animate-heart-beat`})})]})]}),Pv={black:`#000000`,dark_blue:`#0000AA`,dark_green:`#00AA00`,dark_aqua:`#00AAAA`,dark_red:`#AA0000`,dark_purple:`#AA00AA`,gold:`#FFAA00`,gray:`#AAAAAA`,dark_gray:`#555555`,blue:`#5555FF`,green:`#55FF55`,aqua:`#55FFFF`,red:`#FF5555`,light_purple:`#FF55FF`,yellow:`#FFFF55`,white:`#FFFFFF`},Fv=e=>Pv[e]||e;var Iv=e=>{let t,n=new Set,r=(e,r)=>{let i=typeof e==`function`?e(t):e;if(!Object.is(i,t)){let e=t;t=r??(typeof i!=`object`||!i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},Lv=(e=>e?Iv(e):Iv),Rv=e=>e;function zv(e,t=Rv){let n=b.useSyncExternalStore(e.subscribe,b.useCallback(()=>t(e.getState()),[e,t]),b.useCallback(()=>t(e.getInitialState()),[e,t]));return b.useDebugValue(n),n}var Bv=e=>{let t=Lv(e),n=e=>zv(t,e);return Object.assign(n,t),n},Vv=(e=>e?Bv(e):Bv),Hv=(e,t)=>t.some(t=>e instanceof t),Pee,Uv;function Wv(){return Pee||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function Gv(){return Uv||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var Kv=new WeakMap,qv=new WeakMap,Jv=new WeakMap;function Yv(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(ty(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return Jv.set(t,e),t}function Xv(e){if(Kv.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});Kv.set(e,t)}var Zv={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return Kv.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ty(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function Qv(e){Zv=e(Zv)}function $v(e){return Gv().includes(e)?function(...t){return e.apply(ny(this),t),ty(this.request)}:function(...t){return ty(e.apply(ny(this),t))}}function ey(e){return typeof e==`function`?$v(e):(e instanceof IDBTransaction&&Xv(e),Hv(e,Wv())?new Proxy(e,Zv):e)}function ty(e){if(e instanceof IDBRequest)return Yv(e);if(qv.has(e))return qv.get(e);let t=ey(e);return t!==e&&(qv.set(e,t),Jv.set(t,e)),t}var ny=e=>Jv.get(e);function ry(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=ty(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(ty(o.result),e.oldVersion,e.newVersion,ty(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var iy=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],ay=[`put`,`add`,`delete`,`clear`],oy=new Map;function sy(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(oy.get(t))return oy.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=ay.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||iy.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return oy.set(t,a),a}Qv(e=>({...e,get:(t,n,r)=>sy(t,n)||e.get(t,n,r),has:(t,n)=>!!sy(t,n)||e.has(t,n)}));var cy=[`continue`,`continuePrimaryKey`,`advance`],ly={},uy=new WeakMap,dy=new WeakMap,fy={get(e,t){if(!cy.includes(t))return e[t];let n=ly[t];return n||=ly[t]=function(...e){uy.set(this,dy.get(this)[t](...e))},n}};async function*py(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;let n=new Proxy(t,fy);for(dy.set(n,t),Jv.set(n,ny(t));t;)yield n,t=await(uy.get(n)||t.continue()),uy.delete(n)}function my(e,t){return t===Symbol.asyncIterator&&Hv(e,[IDBIndex,IDBObjectStore,IDBCursor])||t===`iterate`&&Hv(e,[IDBIndex,IDBObjectStore])}Qv(e=>({...e,get(t,n,r){return my(t,n)?py:e.get(t,n,r)},has(t,n){return my(t,n)||e.has(t,n)}}));var hy=`history-store`,gy=`handle-store`,_y=`dialogs-store`,vy=`speakers-store`,yy=await ry(`tdeditor-db`,1,{upgrade(e){e.createObjectStore(hy),e.createObjectStore(gy),e.createObjectStore(_y),e.createObjectStore(vy)}}),by=null;const xy=Vv((e,t)=>({histories:[],loadHistories:()=>{by&&clearTimeout(by),by=setTimeout(async()=>{let t=await yy.getAll(hy),n=(await yy.getAllKeys(hy)).map((e,n)=>[e,t[n]]).sort((e,t)=>t[1]-e[1]).slice(0,6).map(([e,t])=>e);e({histories:n})},100)},addHistory:async(e,n)=>{await yy.delete(hy,e),await yy.delete(gy,e),await yy.put(hy,Date.now(),e),await yy.put(gy,n,e),t().loadHistories()},getDirHandle:e=>yy.get(gy,e)})),Sy=Vv((e,t)=>({dialogSequences:[],loadDialogSequences:async()=>{by&&clearTimeout(by),by=setTimeout(async()=>{let t=await yy.getAll(_y);e({dialogSequences:t})},100)},addDialogSequence:async e=>{await yy.put(_y,e,e.id),await t().loadDialogSequences()},getDialogSequence:e=>yy.get(_y,e),deleteDialogSequence:async e=>{await yy.delete(_y,e),await t().loadDialogSequences()}})),Cy=Vv(e=>({dialogsFolder:void 0,dialogsFolderPath:void 0,assessFolder:void 0,assessFolderPath:void 0,setDialogsFolder:(t,n)=>{e({dialogsFolder:t}),e({dialogsFolderPath:n})},setAssessFolder:(t,n)=>{e({assessFolder:t}),e({assessFolderPath:n})}}));function wy(e){return Array.isArray(e)?(0,V.jsx)(V.Fragment,{children:e.map((e,t)=>(0,V.jsx)(`span`,{children:wy(e)},t))}):(0,V.jsx)(`span`,{style:{color:Fv(e?.color??``)},children:e?.translate||e?.text||``})}var Ty=({children:e,className:t})=>(0,V.jsx)(`div`,{className:t,children:e});const Ey=({...e})=>{let t=Ie(),n=Cy(e=>e.dialogsFolder),[r,i]=(0,b.useState)([]);(0,b.useEffect)(()=>{(async()=>{if(!n)return;let e=[],t=[];for await(let[e,r]of n.entries()){let n=e.replace(/\.json$/,``),i=await Sy.getState().getDialogSequence(n);if(i&&(i.fromDB=()=>!0),r.kind===`file`&&e.endsWith(`.json`))try{t.push({id:n,handle:r,dialogSequence:i})}catch(t){fv.error(`Failed to parse dialog file:`,e,t)}}t.sort((e,t)=>e.id.localeCompare(t.id)),e.push(...t),i(e)})().catch(e=>fv.error(`Failed to load entries:`,e))},[n]);let a=async(e,t)=>{let n=await(await t.getFile()).text(),a=JSON.parse(n),o=r.map(t=>t.id===e?{...t,dialogSequence:a}:t);fv.info(`Load dialog sequence:`,a),i(o),await Sy.getState().addDialogSequence(a)};return(0,V.jsxs)(pg,{...e,children:[(0,V.jsx)(Ty,{className:`w-full max-w-[260px] max-h-4/5 py-2 text-inherit`,children:(0,V.jsx)(Ug,{emptyContent:(0,V.jsx)(`div`,{className:`text-center select-none`,children:`--- 空 ---`}),items:r,label:`Dialog Sequence List`,onAction:async e=>{let n=r.find(t=>t.id===e);n&&((!n.dialogSequence||n.dialogSequence.fromDB)&&await a(e,n.handle),t(`/${e}`))},children:e=>(0,V.jsx)(wg,{className:`group`,description:e.dialogSequence?.title||e.dialogSequence?.description||` `,endContent:(0,V.jsxs)(ym,{placement:`right`,children:[(0,V.jsx)(_m,{children:(0,V.jsx)(Tv,{className:`opacity-0 group-hover:opacity-100 transition-opacity`})}),(0,V.jsx)(hm,{children:(0,V.jsxs)(Ug,{"aria-label":`Actions`,onAction:async t=>{switch(fv.info(`Action:`,t,e.id),t){case`reload`:await a(e.id,e.handle);break;case`edit`:break;case`copy`:break;default:break}},children:[(0,V.jsx)(wg,{startContent:(0,V.jsx)(kv,{size:18}),children:`重载文件`},`reload`),(0,V.jsx)(wg,{startContent:(0,V.jsx)(Ev,{size:18}),children:`编辑对话`},`edit`),(0,V.jsx)(wg,{showDivider:!0,startContent:(0,V.jsx)(Ov,{size:18}),children:`复制为新文件`},`copy`),(0,V.jsx)(wg,{className:`text-danger`,color:`danger`,startContent:(0,V.jsx)(Dv,{size:18}),children:`删除文件`},`delete`)]})})]}),startContent:(0,V.jsx)(Sv,{size:40}),children:e.handle.name},e.id)})}),Cy(e=>e.dialogsFolder)&&(0,V.jsxs)(ff,{className:`w-full text-inherit`,size:`lg`,variant:`light`,onPress:()=>{alert(`TODO`)},children:[(0,V.jsx)(bv,{size:18}),`新建对话序列`]})]})},Dy=({children:e,onWheel:t,className:n,topScrollbar:r,...i})=>(0,V.jsx)(pg,{className:Vu(n,`overflow-y-hidden scrollbar scrollbar-thumb-rounded-full scrollbar-h-1 overscroll-contain`,`scrollbar-thumb-background hover:scrollbar-thumb-zinc-400 pt-1`,r&&`transform-[scaleY(-1)]`),orientation:`horizontal`,onWheel:e=>{t?.(e);let n=e.deltaY||e.deltaX,r=e.currentTarget;n!==0&&r&&(r.scrollLeft=(r.scrollLeft||0)+n)},...i,children:r&&(0,V.jsx)(`div`,{className:`transform-[scaleY(-1)]`,children:e})||e}),Oy=()=>{let[e,t]=(0,b.useState)([{id:`player`,name:`玩家`,value:{translate:`%i`}},{id:`moirstral`,name:`Moirstral`,value:{translate:`Moirstral`,color:`red`}}]);return{speakers:e,setSpeakers:t,addSpeaker:n=>{t([...e,n])}}},ky=({speakers:e})=>(0,V.jsxs)(`div`,{className:`inline-flex items-center h-full w-full`,children:[(0,V.jsx)(Cv,{className:`min-w-6`,size:20}),(0,V.jsx)(Ud,{className:`ml-4`,orientation:`vertical`}),(0,V.jsx)(Dy,{className:`items-center gap-3 px-3 h-full flex max-w-[calc(100%-6rem)]`,orientation:`horizontal`,size:60,children:e.map(e=>(0,V.jsx)(Sf,{className:`cursor-pointer hover:opacity-hover`,size:`md`,style:{color:Fv(e.value.color)},variant:`shadow`,children:e.name||e.value.translate},e.id))}),(0,V.jsx)(ff,{isIconOnly:!0,className:`text-default-500`,variant:`light`,onPress:()=>{alert(`add speaker`)},children:(0,V.jsx)(bv,{size:18})},`add-speaker`)]}),Ay=()=>(0,V.jsxs)(Dy,{topScrollbar:!0,className:`hidden md:flex items-baseline gap-3 top-2 left-60 w-[calc(100vw-25rem)] h-11 -mb-2 fixed z-99 whitespace-nowrap`,orientation:`horizontal`,size:150,children:[(0,V.jsx)(`div`,{className:`absolute bottom-0 border-b-1 border-default w-[calc(100vw-25rem)]`}),(0,V.jsx)(Qf,{href:`/`,children:(0,V.jsx)(Sf,{className:`h-8 text-small rounded-b-none border-1 border-b-background cursor-pointer select-none`,radius:`sm`,size:`lg`,variant:`bordered`,children:`首页`})}),Array.from({length:0},(e,t)=>(0,V.jsxs)(Sf,{className:`h-8 text-small gap-3 rounded-b-none ${t==2?`border-1 border-b-background`:`border-0 hover:border-1`}`,endContent:(0,V.jsx)(wv,{size:18}),radius:`sm`,size:`lg`,variant:`bordered`,onClose:()=>{},children:[`Tab `,t]},t))]});function jy({children:e}){let[t,n]=(0,b.useState)(!1),r=(0,b.useRef)(null);(0,b.useEffect)(()=>{let e=()=>{window.innerWidth<768?n(!0):n(!1)};return e(),window.addEventListener(`resize`,e),()=>window.removeEventListener(`resize`,e)},[]),(0,b.useEffect)(()=>{let e=e=>{window.innerWidth>=768||!t&&r.current&&(r.current.contains(e.target)||n(!0))};return document.addEventListener(`mousedown`,e),()=>{document.removeEventListener(`mousedown`,e)}},[t]);let i=()=>{n(!t)},{speakers:a}=Oy();return(0,V.jsxs)(`div`,{className:`relative flex flex-col h-screen`,children:[!(`showOpenFilePicker`in self)&&(0,V.jsx)(`aside`,{className:`fixed top-16 w-full z-999`,children:(0,V.jsx)(Jg,{className:`w-19/20 md:max-w-4xl mx-auto`,color:`warning`,description:`请使用 Chrome 或 Edge 浏览器`,title:`当前浏览器不支持 File System Access API，无法使用相关功能`,variant:`faded`})}),(0,V.jsx)(Nv,{}),(0,V.jsx)(Ay,{}),(0,V.jsxs)(`aside`,{ref:r,className:`fixed left-0 top-0 h-full w-56 bg-foreground-50 transition-transform duration-300 ease-in-out shadow-medium z-99 text-foreground-600`,style:{transform:t?`translateX(-100%)`:`translateX(0)`},children:[(0,V.jsx)(ff,{isIconOnly:!0,className:`${t?`pl-3`:`p-0 bg-foreground-50 text-inherit`} 2xl:hidden absolute top-4 -right-4`,radius:`full`,size:`sm`,onPress:i,children:t?(0,V.jsx)(vv,{className:`transition-transform duration-300 hover:translate-x-1`}):(0,V.jsx)(yv,{className:`transition-transform duration-300 hover:-translate-x-1`})}),(0,V.jsx)(`p`,{className:`font-bold text-inherit p-5`,children:pv.name}),(0,V.jsx)(Ey,{className:`max-w-full max-h-full mx-3`})]}),(0,V.jsx)(`main`,{className:`container flex-grow pb-12 pl-0 ${t?``:`md:pl-56`} max-w-full`,children:e}),(0,V.jsx)(`aside`,{className:`fixed left-0 bottom-0 w-full h-12 p-0 bg-background pl-4 ${t?``:`md:pl-60`} shadow-medium z-10`,children:(0,V.jsx)(ky,{speakers:a})})]})}function My(){let{histories:e,loadHistories:t,addHistory:n,getDirHandle:r}=xy();(0,b.useEffect)(()=>{t()},[t]);let i=e=>{if(!e)return;let t=async(r,i=``)=>{let a=!1;for await(let[e,n]of r.entries())if(n.kind===`directory`){let r=`${i}/${e}`;r.endsWith(`/data/dialog/dialogs`)?(Cy.getState().setDialogsFolder(n,r),a=!0):r.includes(`/assess/dialogs`)&&(Cy.getState().setAssessFolder(n,r),a=!0),await t(n,r)}a&&await n(e.name,e)};t(e,e.name).catch(t=>fv.error(`打开文件夹失败：`,e,t))},a=async e=>await e.queryPermission?.({mode:`readwrite`})===`granted`||await e.requestPermission?.({mode:`readwrite`})===`granted`?!0:(fv.warn(`用户未授权目录权限`),!1);return(0,V.jsx)(jy,{children:(0,V.jsx)(dv,{className:`w-full h-full drag:bg-blue-100 drag:dark:bg-blue-900/20`,id:`drop-folder`,onFolderSelect:i,children:(0,V.jsx)(`div`,{className:`w-full h-full flex flex-col items-center justify-center`,children:(0,V.jsxs)(`div`,{className:`w-6xl min-h-120 max-w-full text-default-500 px-10 py-5`,children:[(0,V.jsxs)(`div`,{className:`text-2xl font-bold mb-10`,children:[`欢迎使用 `,pv.name]}),(0,V.jsxs)(`div`,{className:`md:flex md:flex-row md:justify-between w-full`,children:[(0,V.jsxs)(`div`,{className:`md:w-1/2`,children:[(0,V.jsxs)(`div`,{className:`text-lg font-medium mb-4`,children:[(0,V.jsx)(`div`,{className:`mb-4`,children:`启动`}),(0,V.jsx)(`div`,{children:(0,V.jsxs)(ff,{color:`primary`,size:`sm`,variant:`light`,onPress:()=>{window.showDirectoryPicker?window.showDirectoryPicker().then(e=>{i(e)}).catch(e=>{fv.error(`Failed to open directory picker:`,e)}):fv.warn(`Directory picker API not supported`)},children:[(0,V.jsx)(xv,{size:18}),` 打开文件夹...`]})}),(0,V.jsxs)(`div`,{className:`text-sm m-2 pl-2`,style:{lineHeight:`2`},children:[(0,V.jsxs)(`p`,{children:[`对话文件夹：`,(0,V.jsx)(`span`,{children:(0,V.jsx)(`span`,{className:`text-primary-500`,children:Cy(e=>e.dialogsFolderPath||`未选择`)})})]}),(0,V.jsxs)(`p`,{children:[`资源文件夹：`,(0,V.jsx)(`span`,{children:(0,V.jsx)(`span`,{className:`text-primary-500`,children:Cy(e=>e.assessFolderPath||`未选择`)})})]})]})]}),(0,V.jsxs)(`div`,{className:`text-lg font-medium mb-4`,children:[(0,V.jsx)(`div`,{className:`mb-4`,children:`最近`}),e.map(e=>(0,V.jsx)(`div`,{children:(0,V.jsxs)(ff,{color:`primary`,size:`sm`,variant:`light`,onPress:()=>{r(e).then(e=>{e&&a(e).then(t=>t&&i(e??null))})},children:[(0,V.jsx)(xv,{size:18}),` `,e]})},e))]})]}),(0,V.jsxs)(`div`,{className:`md:w-1/2 hidden md:block`,children:[(0,V.jsx)(`div`,{className:`text-lg font-medium mb-4`,children:`如何使用`}),(0,V.jsxs)(`ul`,{className:`text-md list-decimal pl-5 space-y-2`,children:[(0,V.jsx)(`li`,{children:`请先选择一个对话文件夹和语言文件夹`}),(0,V.jsx)(`li`,{children:`如果使用 KubeJs 请直接选择 kubejs 文件夹`}),(0,V.jsx)(`li`,{children:`如果使用 Global Packs 请直接选择 global_packs 文件夹`}),(0,V.jsx)(`li`,{children:`可直接拖动文件夹到此处，选择后将自动识别 data 和 assess 文件夹，如不存在则加载失败`}),(0,V.jsxs)(`li`,{children:[(0,V.jsx)(`p`,{children:`正确的文件夹结构为：`}),(0,V.jsxs)(`ul`,{className:`text-sm list-disc pt-2 pl-5 space-y-2`,children:[(0,V.jsx)(`li`,{children:`data\\dialog\\dialogs`}),(0,V.jsx)(`li`,{children:`assess\\dialogs\\lang`}),(0,V.jsx)(`li`,{children:`assess\\dialogs\\textures\\backgrounds`}),(0,V.jsx)(`li`,{children:`assess\\dialogs\\textures\\dialog_background`}),(0,V.jsx)(`li`,{children:`assess\\dialogs\\textures\\portraits`}),(0,V.jsx)(`li`,{children:`assess\\dialogs\\textures\\textures\\gui\\sprites`})]})]})]})]})]})]})})})})}function Ny(e){"@babel/helpers - typeof";return Ny=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},Ny(e)}function Py(e,t){if(Ny(e)!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(Ny(r)!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}function Fy(e){var t=Py(e,`string`);return Ny(t)==`symbol`?t:t+``}function U(e,t,n){return(t=Fy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ly(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?Iy(Object(n),!0).forEach(function(t){U(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W(e,t){if(!(e instanceof t))throw TypeError(`Cannot call a class as a function`)}function Ry(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,`value`in r&&(r.writable=!0),Object.defineProperty(e,Fy(r.key),r)}}function G(e,t,n){return t&&Ry(e.prototype,t),n&&Ry(e,n),Object.defineProperty(e,`prototype`,{writable:!1}),e}function zy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function By(e){if(Array.isArray(e))return zy(e)}function Vy(e){if(typeof Symbol<`u`&&e[Symbol.iterator]!=null||e[`@@iterator`]!=null)return Array.from(e)}function Hy(e,t){if(e){if(typeof e==`string`)return zy(e,t);var n={}.toString.call(e).slice(8,-1);return n===`Object`&&e.constructor&&(n=e.constructor.name),n===`Map`||n===`Set`?Array.from(e):n===`Arguments`||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zy(e,t):void 0}}function Uy(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wy(e){return By(e)||Vy(e)||Hy(e)||Uy()}function Gy(e){return Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gy(e)}function Ky(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ky=function(){return!!e})()}function qy(e){if(e===void 0)throw ReferenceError(`this hasn't been initialised - super() hasn't been called`);return e}function Jy(e,t){if(t&&(Ny(t)==`object`||typeof t==`function`))return t;if(t!==void 0)throw TypeError(`Derived constructors may only return object or undefined`);return qy(e)}function Yy(e,t,n){return t=Gy(t),Jy(e,Ky()?Reflect.construct(t,n||[],Gy(e).constructor):t.apply(e,n))}function Xy(e,t){return Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xy(e,t)}function Zy(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Super expression must either be null or a function`);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,`prototype`,{writable:!1}),t&&Xy(e,t)}function Fee(e){if(Array.isArray(e))return e}function Qy(e,t){var n=e==null?null:typeof Symbol<`u`&&e[Symbol.iterator]||e[`@@iterator`];if(n!=null){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}function $y(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eb(e,t){return Fee(e)||Qy(e,t)||Hy(e,t)||$y()}var tb=t(r(((exports,t)=>{var n=Object.prototype.hasOwnProperty,r=`~`;function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if(typeof n!=`function`)throw TypeError(`The listener must be a function`);var s=new a(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function s(e,t){--e._eventsCount===0?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)n.call(t,i)&&e.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=Array(a);i<a;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var c=this._events[s],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(d=1,u=Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,p;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,n);break;case 4:c[d].fn.call(c[d].context,t,n,i);break;default:if(!u)for(p=1,u=Array(l-1);p<l;p++)u[p-1]=arguments[p];c[d].fn.apply(c[d].context,u)}}return!0},c.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn===t&&(!i||o.once)&&(!n||o.context===n)&&s(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&l.push(o[c]);l.length?this._events[a]=l.length===1?l[0]:l:s(this,a)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t!==void 0&&(t.exports=c)}))(),1).default,nb=typeof Float32Array<`u`?Float32Array:Array;Math.PI/180,180/Math.PI;function rb(){var e=new nb(9);return nb!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ib(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function ab(e,t,n,r,i,a,o,s,c){var l=new nb(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l[8]=c,l}var ob=n({add:()=>Zb,adjoint:()=>hb,clone:()=>cb,copy:()=>lb,create:()=>sb,decompose:()=>Fb,determinant:()=>gb,equals:()=>nx,exactEquals:()=>tx,frob:()=>Xb,fromQuat:()=>Rb,fromQuat2:()=>jb,fromRotation:()=>Eb,fromRotationTranslation:()=>Ab,fromRotationTranslationScale:()=>Ib,fromRotationTranslationScaleOrigin:()=>Lb,fromScaling:()=>Tb,fromTranslation:()=>wb,fromValues:()=>ub,fromXRotation:()=>Db,fromYRotation:()=>Ob,fromZRotation:()=>kb,frustum:()=>zb,getRotation:()=>Pb,getScaling:()=>Nb,getTranslation:()=>Mb,identity:()=>fb,invert:()=>mb,lookAt:()=>qb,mul:()=>rx,multiply:()=>_b,multiplyScalar:()=>$b,multiplyScalarAndAdd:()=>ex,ortho:()=>Gb,orthoNO:()=>Wb,orthoZO:()=>Kb,perspective:()=>Vb,perspectiveFromFieldOfView:()=>Ub,perspectiveNO:()=>Bb,perspectiveZO:()=>Hb,rotate:()=>bb,rotateX:()=>xb,rotateY:()=>Sb,rotateZ:()=>Cb,scale:()=>yb,set:()=>db,str:()=>Yb,sub:()=>ix,subtract:()=>Qb,targetTo:()=>Jb,translate:()=>vb,transpose:()=>pb});function sb(){var e=new nb(16);return nb!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function cb(e){var t=new nb(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function lb(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ub(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h){var g=new nb(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=i,g[5]=a,g[6]=o,g[7]=s,g[8]=c,g[9]=l,g[10]=u,g[11]=d,g[12]=f,g[13]=p,g[14]=m,g[15]=h,g}function db(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=c,e[8]=l,e[9]=u,e[10]=d,e[11]=f,e[12]=p,e[13]=m,e[14]=h,e[15]=g,e}function fb(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pb(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function mb(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],m=t[12],h=t[13],g=t[14],_=t[15],v=n*s-r*o,y=n*c-i*o,b=n*l-a*o,x=r*c-i*s,S=r*l-a*s,C=i*l-a*c,w=u*h-d*m,T=u*g-f*m,E=u*_-p*m,D=d*g-f*h,O=d*_-p*h,k=f*_-p*g,A=v*k-y*O+b*D+x*E-S*T+C*w;return A?(A=1/A,e[0]=(s*k-c*O+l*D)*A,e[1]=(i*O-r*k-a*D)*A,e[2]=(h*C-g*S+_*x)*A,e[3]=(f*S-d*C-p*x)*A,e[4]=(c*E-o*k-l*T)*A,e[5]=(n*k-i*E+a*T)*A,e[6]=(g*b-m*C-_*y)*A,e[7]=(u*C-f*b+p*y)*A,e[8]=(o*O-s*E+l*w)*A,e[9]=(r*E-n*O-a*w)*A,e[10]=(m*S-h*b+_*v)*A,e[11]=(d*b-u*S-p*v)*A,e[12]=(s*T-o*D-c*w)*A,e[13]=(n*D-r*T+i*w)*A,e[14]=(h*y-m*x-g*v)*A,e[15]=(u*x-d*y+f*v)*A,e):null}function hb(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],m=t[12],h=t[13],g=t[14],_=t[15],v=n*s-r*o,y=n*c-i*o,b=n*l-a*o,x=r*c-i*s,S=r*l-a*s,C=i*l-a*c,w=u*h-d*m,T=u*g-f*m,E=u*_-p*m,D=d*g-f*h,O=d*_-p*h,k=f*_-p*g;return e[0]=s*k-c*O+l*D,e[1]=i*O-r*k-a*D,e[2]=h*C-g*S+_*x,e[3]=f*S-d*C-p*x,e[4]=c*E-o*k-l*T,e[5]=n*k-i*E+a*T,e[6]=g*b-m*C-_*y,e[7]=u*C-f*b+p*y,e[8]=o*O-s*E+l*w,e[9]=r*E-n*O-a*w,e[10]=m*S-h*b+_*v,e[11]=d*b-u*S-p*v,e[12]=s*T-o*D-c*w,e[13]=n*D-r*T+i*w,e[14]=h*y-m*x-g*v,e[15]=u*x-d*y+f*v,e}function gb(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],h=e[14],g=e[15],_=t*o-n*a,v=t*s-r*a,y=n*s-r*o,b=l*m-u*p,x=l*h-d*p,S=u*h-d*m,C=t*S-n*x+r*b,w=a*S-o*x+s*b,T=l*y-u*v+d*_,E=p*y-m*v+h*_;return c*C-i*w+g*T-f*E}function _b(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=t[9],p=t[10],m=t[11],h=t[12],g=t[13],_=t[14],v=t[15],y=n[0],b=n[1],x=n[2],S=n[3];return e[0]=y*r+b*s+x*d+S*h,e[1]=y*i+b*c+x*f+S*g,e[2]=y*a+b*l+x*p+S*_,e[3]=y*o+b*u+x*m+S*v,y=n[4],b=n[5],x=n[6],S=n[7],e[4]=y*r+b*s+x*d+S*h,e[5]=y*i+b*c+x*f+S*g,e[6]=y*a+b*l+x*p+S*_,e[7]=y*o+b*u+x*m+S*v,y=n[8],b=n[9],x=n[10],S=n[11],e[8]=y*r+b*s+x*d+S*h,e[9]=y*i+b*c+x*f+S*g,e[10]=y*a+b*l+x*p+S*_,e[11]=y*o+b*u+x*m+S*v,y=n[12],b=n[13],x=n[14],S=n[15],e[12]=y*r+b*s+x*d+S*h,e[13]=y*i+b*c+x*f+S*g,e[14]=y*a+b*l+x*p+S*_,e[15]=y*o+b*u+x*m+S*v,e}function vb(e,t,n){var r=n[0],i=n[1],a=n[2],o,s,c,l,u,d,f,p,m,h,g,_;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*a+t[12],e[13]=t[1]*r+t[5]*i+t[9]*a+t[13],e[14]=t[2]*r+t[6]*i+t[10]*a+t[14],e[15]=t[3]*r+t[7]*i+t[11]*a+t[15]):(o=t[0],s=t[1],c=t[2],l=t[3],u=t[4],d=t[5],f=t[6],p=t[7],m=t[8],h=t[9],g=t[10],_=t[11],e[0]=o,e[1]=s,e[2]=c,e[3]=l,e[4]=u,e[5]=d,e[6]=f,e[7]=p,e[8]=m,e[9]=h,e[10]=g,e[11]=_,e[12]=o*r+u*i+m*a+t[12],e[13]=s*r+d*i+h*a+t[13],e[14]=c*r+f*i+g*a+t[14],e[15]=l*r+p*i+_*a+t[15]),e}function yb(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function bb(e,t,n,r){var i=r[0],a=r[1],o=r[2],s=Math.sqrt(i*i+a*a+o*o),c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w,T,E,D,O,k,A,j;return s<1e-6?null:(s=1/s,i*=s,a*=s,o*=s,c=Math.sin(n),l=Math.cos(n),u=1-l,d=t[0],f=t[1],p=t[2],m=t[3],h=t[4],g=t[5],_=t[6],v=t[7],y=t[8],b=t[9],x=t[10],S=t[11],C=i*i*u+l,w=a*i*u+o*c,T=o*i*u-a*c,E=i*a*u-o*c,D=a*a*u+l,O=o*a*u+i*c,k=i*o*u+a*c,A=a*o*u-i*c,j=o*o*u+l,e[0]=d*C+h*w+y*T,e[1]=f*C+g*w+b*T,e[2]=p*C+_*w+x*T,e[3]=m*C+v*w+S*T,e[4]=d*E+h*D+y*O,e[5]=f*E+g*D+b*O,e[6]=p*E+_*D+x*O,e[7]=m*E+v*D+S*O,e[8]=d*k+h*A+y*j,e[9]=f*k+g*A+b*j,e[10]=p*k+_*A+x*j,e[11]=m*k+v*A+S*j,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function xb(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],c=t[7],l=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*r,e[5]=o*i+u*r,e[6]=s*i+d*r,e[7]=c*i+f*r,e[8]=l*i-a*r,e[9]=u*i-o*r,e[10]=d*i-s*r,e[11]=f*i-c*r,e}function Sb(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],l=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*r,e[1]=o*i-u*r,e[2]=s*i-d*r,e[3]=c*i-f*r,e[8]=a*r+l*i,e[9]=o*r+u*i,e[10]=s*r+d*i,e[11]=c*r+f*i,e}function Cb(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],l=t[4],u=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*r,e[1]=o*i+u*r,e[2]=s*i+d*r,e[3]=c*i+f*r,e[4]=l*i-a*r,e[5]=u*i-o*r,e[6]=d*i-s*r,e[7]=f*i-c*r,e}function wb(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Tb(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Eb(e,t,n){var r=n[0],i=n[1],a=n[2],o=Math.sqrt(r*r+i*i+a*a),s,c,l;return o<1e-6?null:(o=1/o,r*=o,i*=o,a*=o,s=Math.sin(t),c=Math.cos(t),l=1-c,e[0]=r*r*l+c,e[1]=i*r*l+a*s,e[2]=a*r*l-i*s,e[3]=0,e[4]=r*i*l-a*s,e[5]=i*i*l+c,e[6]=a*i*l+r*s,e[7]=0,e[8]=r*a*l+i*s,e[9]=i*a*l-r*s,e[10]=a*a*l+c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Db(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ob(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function kb(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ab(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,c=i+i,l=a+a,u=r*s,d=r*c,f=r*l,p=i*c,m=i*l,h=a*l,g=o*s,_=o*c,v=o*l;return e[0]=1-(p+h),e[1]=d+v,e[2]=f-_,e[3]=0,e[4]=d-v,e[5]=1-(u+h),e[6]=m+g,e[7]=0,e[8]=f+_,e[9]=m-g,e[10]=1-(u+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function jb(e,t){var n=new nb(3),r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=r*r+i*i+a*a+o*o;return d>0?(n[0]=(s*o+u*r+c*a-l*i)*2/d,n[1]=(c*o+u*i+l*r-s*a)*2/d,n[2]=(l*o+u*a+s*i-c*r)*2/d):(n[0]=(s*o+u*r+c*a-l*i)*2,n[1]=(c*o+u*i+l*r-s*a)*2,n[2]=(l*o+u*a+s*i-c*r)*2),Ab(e,t,n),e}function Mb(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Nb(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],c=t[8],l=t[9],u=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(c*c+l*l+u*u),e}function Pb(e,t){var n=new nb(3);Nb(n,t);var r=1/n[0],i=1/n[1],a=1/n[2],o=t[0]*r,s=t[1]*i,c=t[2]*a,l=t[4]*r,u=t[5]*i,d=t[6]*a,f=t[8]*r,p=t[9]*i,m=t[10]*a,h=o+u+m,g=0;return h>0?(g=Math.sqrt(h+1)*2,e[3]=.25*g,e[0]=(d-p)/g,e[1]=(f-c)/g,e[2]=(s-l)/g):o>u&&o>m?(g=Math.sqrt(1+o-u-m)*2,e[3]=(d-p)/g,e[0]=.25*g,e[1]=(s+l)/g,e[2]=(f+c)/g):u>m?(g=Math.sqrt(1+u-o-m)*2,e[3]=(f-c)/g,e[0]=(s+l)/g,e[1]=.25*g,e[2]=(d+p)/g):(g=Math.sqrt(1+m-o-u)*2,e[3]=(s-l)/g,e[0]=(f+c)/g,e[1]=(d+p)/g,e[2]=.25*g),e}function Fb(e,t,n,r){t[0]=r[12],t[1]=r[13],t[2]=r[14];var i=r[0],a=r[1],o=r[2],s=r[4],c=r[5],l=r[6],u=r[8],d=r[9],f=r[10];n[0]=Math.sqrt(i*i+a*a+o*o),n[1]=Math.sqrt(s*s+c*c+l*l),n[2]=Math.sqrt(u*u+d*d+f*f);var p=1/n[0],m=1/n[1],h=1/n[2],g=i*p,_=a*m,v=o*h,y=s*p,b=c*m,x=l*h,S=u*p,C=d*m,w=f*h,T=g+b+w,E=0;return T>0?(E=Math.sqrt(T+1)*2,e[3]=.25*E,e[0]=(x-C)/E,e[1]=(S-v)/E,e[2]=(_-y)/E):g>b&&g>w?(E=Math.sqrt(1+g-b-w)*2,e[3]=(x-C)/E,e[0]=.25*E,e[1]=(_+y)/E,e[2]=(S+v)/E):b>w?(E=Math.sqrt(1+b-g-w)*2,e[3]=(S-v)/E,e[0]=(_+y)/E,e[1]=.25*E,e[2]=(x+C)/E):(E=Math.sqrt(1+w-g-b)*2,e[3]=(_-y)/E,e[0]=(S+v)/E,e[1]=(x+C)/E,e[2]=.25*E),e}function Ib(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],c=i+i,l=a+a,u=o+o,d=i*c,f=i*l,p=i*u,m=a*l,h=a*u,g=o*u,_=s*c,v=s*l,y=s*u,b=r[0],x=r[1],S=r[2];return e[0]=(1-(m+g))*b,e[1]=(f+y)*b,e[2]=(p-v)*b,e[3]=0,e[4]=(f-y)*x,e[5]=(1-(d+g))*x,e[6]=(h+_)*x,e[7]=0,e[8]=(p+v)*S,e[9]=(h-_)*S,e[10]=(1-(d+m))*S,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Lb(e,t,n,r,i){var a=t[0],o=t[1],s=t[2],c=t[3],l=a+a,u=o+o,d=s+s,f=a*l,p=a*u,m=a*d,h=o*u,g=o*d,_=s*d,v=c*l,y=c*u,b=c*d,x=r[0],S=r[1],C=r[2],w=i[0],T=i[1],E=i[2],D=(1-(h+_))*x,O=(p+b)*x,k=(m-y)*x,A=(p-b)*S,j=(1-(f+_))*S,M=(g+v)*S,ee=(m+y)*C,N=(g-v)*C,te=(1-(f+h))*C;return e[0]=D,e[1]=O,e[2]=k,e[3]=0,e[4]=A,e[5]=j,e[6]=M,e[7]=0,e[8]=ee,e[9]=N,e[10]=te,e[11]=0,e[12]=n[0]+w-(D*w+A*T+ee*E),e[13]=n[1]+T-(O*w+j*T+N*E),e[14]=n[2]+E-(k*w+M*T+te*E),e[15]=1,e}function Rb(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,c=i+i,l=n*o,u=r*o,d=r*s,f=i*o,p=i*s,m=i*c,h=a*o,g=a*s,_=a*c;return e[0]=1-d-m,e[1]=u+_,e[2]=f-g,e[3]=0,e[4]=u-_,e[5]=1-l-m,e[6]=p+h,e[7]=0,e[8]=f+g,e[9]=p-h,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zb(e,t,n,r,i,a,o){var s=1/(n-t),c=1/(i-r),l=1/(a-o);return e[0]=a*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a*2*c,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*c,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e}function Bb(e,t,n,r,i){var a=1/Math.tan(t/2);if(e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0){var o=1/(r-i);e[10]=(i+r)*o,e[14]=2*i*r*o}else e[10]=-1,e[14]=-2*r;return e}var Vb=Bb;function Hb(e,t,n,r,i){var a=1/Math.tan(t/2);if(e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0){var o=1/(r-i);e[10]=i*o,e[14]=i*r*o}else e[10]=-1,e[14]=-r;return e}function Ub(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),c=2/(o+s),l=2/(i+a);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-((o-s)*c*.5),e[9]=(i-a)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function Wb(e,t,n,r,i,a,o){var s=1/(t-n),c=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*c,e[14]=(o+a)*l,e[15]=1,e}var Gb=Wb;function Kb(e,t,n,r,i,a,o){var s=1/(t-n),c=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*c,e[14]=a*l,e[15]=1,e}function qb(e,t,n,r){var i,a,o,s,c,l,u,d,f,p,m=t[0],h=t[1],g=t[2],_=r[0],v=r[1],y=r[2],b=n[0],x=n[1],S=n[2];return Math.abs(m-b)<1e-6&&Math.abs(h-x)<1e-6&&Math.abs(g-S)<1e-6?fb(e):(u=m-b,d=h-x,f=g-S,p=1/Math.sqrt(u*u+d*d+f*f),u*=p,d*=p,f*=p,i=v*f-y*d,a=y*u-_*f,o=_*d-v*u,p=Math.sqrt(i*i+a*a+o*o),p?(p=1/p,i*=p,a*=p,o*=p):(i=0,a=0,o=0),s=d*o-f*a,c=f*i-u*o,l=u*a-d*i,p=Math.sqrt(s*s+c*c+l*l),p?(p=1/p,s*=p,c*=p,l*=p):(s=0,c=0,l=0),e[0]=i,e[1]=s,e[2]=u,e[3]=0,e[4]=a,e[5]=c,e[6]=d,e[7]=0,e[8]=o,e[9]=l,e[10]=f,e[11]=0,e[12]=-(i*m+a*h+o*g),e[13]=-(s*m+c*h+l*g),e[14]=-(u*m+d*h+f*g),e[15]=1,e)}function Jb(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=r[0],c=r[1],l=r[2],u=i-n[0],d=a-n[1],f=o-n[2],p=u*u+d*d+f*f;p>0&&(p=1/Math.sqrt(p),u*=p,d*=p,f*=p);var m=c*f-l*d,h=l*u-s*f,g=s*d-c*u;return p=m*m+h*h+g*g,p>0&&(p=1/Math.sqrt(p),m*=p,h*=p,g*=p),e[0]=m,e[1]=h,e[2]=g,e[3]=0,e[4]=d*g-f*h,e[5]=f*m-u*g,e[6]=u*h-d*m,e[7]=0,e[8]=u,e[9]=d,e[10]=f,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e}function Yb(e){return`mat4(`+e[0]+`, `+e[1]+`, `+e[2]+`, `+e[3]+`, `+e[4]+`, `+e[5]+`, `+e[6]+`, `+e[7]+`, `+e[8]+`, `+e[9]+`, `+e[10]+`, `+e[11]+`, `+e[12]+`, `+e[13]+`, `+e[14]+`, `+e[15]+`)`}function Xb(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+e[6]*e[6]+e[7]*e[7]+e[8]*e[8]+e[9]*e[9]+e[10]*e[10]+e[11]*e[11]+e[12]*e[12]+e[13]*e[13]+e[14]*e[14]+e[15]*e[15])}function Zb(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Qb(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function $b(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function ex(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function tx(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function nx(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8],d=e[9],f=e[10],p=e[11],m=e[12],h=e[13],g=e[14],_=e[15],v=t[0],y=t[1],b=t[2],x=t[3],S=t[4],C=t[5],w=t[6],T=t[7],E=t[8],D=t[9],O=t[10],k=t[11],A=t[12],j=t[13],M=t[14],ee=t[15];return Math.abs(n-v)<=1e-6*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-y)<=1e-6*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-b)<=1e-6*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-x)<=1e-6*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-S)<=1e-6*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-C)<=1e-6*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(c-w)<=1e-6*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(l-T)<=1e-6*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-E)<=1e-6*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(d-D)<=1e-6*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(f-O)<=1e-6*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(p-k)<=1e-6*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(m-A)<=1e-6*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(h-j)<=1e-6*Math.max(1,Math.abs(h),Math.abs(j))&&Math.abs(g-M)<=1e-6*Math.max(1,Math.abs(g),Math.abs(M))&&Math.abs(_-ee)<=1e-6*Math.max(1,Math.abs(_),Math.abs(ee))}var rx=_b,ix=Qb;function ax(){var e=new nb(3);return nb!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ox(e){var t=new nb(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function sx(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function cx(e,t,n){var r=new nb(3);return r[0]=e,r[1]=t,r[2]=n,r}function lx(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ux(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function dx(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function fx(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function px(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function mx(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function hx(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function gx(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function _x(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function vx(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function yx(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function bx(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],c=n[2];return e[0]=i*c-a*s,e[1]=a*o-r*c,e[2]=r*s-i*o,e}function xx(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}function Sx(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o||=1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function Cx(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function wx(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],c=t[1],l=t[2],u=i*l-a*c,d=a*s-r*l,f=r*c-i*s;return u+=u,d+=d,f+=f,e[0]=s+o*u+i*f-a*d,e[1]=c+o*d+a*u-r*f,e[2]=l+o*f+r*d-i*u,e}function Tx(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(n-a)<=1e-6*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=1e-6*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=1e-6*Math.max(1,Math.abs(i),Math.abs(s))}var Ex=fx,Dx=_x,Ox=sx;(function(){var e=ax();return function(t,n,r,i,a,o){var s,c;for(n||=3,r||=0,c=i?Math.min(i*n+r,t.length):t.length,s=r;s<c;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}})();function kx(){var e=new nb(4);return nb!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Ax(e,t,n,r){var i=new nb(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function jx(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Mx(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function Nx(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o,e}function Px(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}(function(){var e=kx();return function(t,n,r,i,a,o){var s,c;for(n||=4,r||=0,c=i?Math.min(i*n+r,t.length):t.length,s=r;s<c;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();function Fx(){var e=new nb(4);return nb!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ix(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Lx(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],c=n[1],l=n[2],u=n[3];return e[0]=r*u+o*s+i*l-a*c,e[1]=i*u+o*c+a*s-r*l,e[2]=a*u+o*l+r*c-i*s,e[3]=o*u-r*s-i*c-a*l,e}function Rx(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],c=n[0],l=n[1],u=n[2],d=n[3],f,p=i*c+a*l+o*u+s*d,m,h,g;return p<0&&(p=-p,c=-c,l=-l,u=-u,d=-d),1-p>1e-6?(f=Math.acos(p),m=Math.sin(f),h=Math.sin((1-r)*f)/m,g=Math.sin(r*f)/m):(h=1-r,g=r),e[0]=h*i+g*c,e[1]=h*a+g*l,e[2]=h*o+g*u,e[3]=h*s+g*d,e}function zx(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e}function Bx(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[a*3+a]-t[o*3+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[a*3+o]-t[o*3+a])*r,e[a]=(t[a*3+i]+t[i*3+a])*r,e[o]=(t[o*3+i]+t[i*3+o])*r}return e}function Vx(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:`zyx`,a=Math.PI/360;t*=a,r*=a,n*=a;var o=Math.sin(t),s=Math.cos(t),c=Math.sin(n),l=Math.cos(n),u=Math.sin(r),d=Math.cos(r);switch(i){case`xyz`:e[0]=o*l*d+s*c*u,e[1]=s*c*d-o*l*u,e[2]=s*l*u+o*c*d,e[3]=s*l*d-o*c*u;break;case`xzy`:e[0]=o*l*d-s*c*u,e[1]=s*c*d-o*l*u,e[2]=s*l*u+o*c*d,e[3]=s*l*d+o*c*u;break;case`yxz`:e[0]=o*l*d+s*c*u,e[1]=s*c*d-o*l*u,e[2]=s*l*u-o*c*d,e[3]=s*l*d+o*c*u;break;case`yzx`:e[0]=o*l*d+s*c*u,e[1]=s*c*d+o*l*u,e[2]=s*l*u-o*c*d,e[3]=s*l*d-o*c*u;break;case`zxy`:e[0]=o*l*d-s*c*u,e[1]=s*c*d+o*l*u,e[2]=s*l*u+o*c*d,e[3]=s*l*d-o*c*u;break;case`zyx`:e[0]=o*l*d-s*c*u,e[1]=s*c*d+o*l*u,e[2]=s*l*u-o*c*d,e[3]=s*l*d+o*c*u;break;default:throw Error(`Unknown angle order `+i)}return e}var Hx=Ax,Ux=jx,Wx=Mx,Gx=Lx,Kx=Nx;(function(){var e=ax(),t=cx(1,0,0),n=cx(0,1,0);return function(r,i,a){var o=yx(i,a);return o<-.999999?(bx(e,t,i),Ox(e)<1e-6&&bx(e,n,i),vx(e,e),Ix(r,e,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(bx(e,i,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+o,Kx(r,r))}})(),function(){var e=Fx(),t=Fx();return function(n,r,i,a,o,s){return Rx(e,r,o,s),Rx(t,i,a,s),Rx(n,e,t,2*s*(1-s)),n}}(),function(){var e=rb();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],Kx(t,Bx(t,e))}}();function qx(){var e=new nb(2);return nb!=Float32Array&&(e[0]=0,e[1]=0),e}function Jx(e,t){return e[0]=t[0],e[1]=t[1],e}function Yx(e,t,n){return e[0]=t,e[1]=n,e}function Xx(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function Zx(e,t){return e[0]*t[0]+e[1]*t[1]}function Qx(e,t){return e[0]===t[0]&&e[1]===t[1]}(function(){var e=qx();return function(t,n,r,i,a,o){var s,c;for(n||=2,r||=0,c=i?Math.min(i*n+r,t.length):t.length,s=r;s<c;s+=n)e[0]=t[s],e[1]=t[s+1],a(e,e,o),t[s]=e[0],t[s+1]=e[1];return t}})();var $x=function(e){return e!==null&&typeof e!=`function`&&isFinite(e.length)},eS=function(e,t){return $x(e)?e.indexOf(t)>-1:!1},tS=function(e,t){if(!$x(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},nS=function(e,t){return t===void 0&&(t=[]),tS(e,function(e){return!eS(t,e)})};function rS(e){return typeof e==`function`}function iS(e){return e==null}function aS(e){return Array.isArray(e)}var oS=(function(e){var t=typeof e;return e!==null&&t===`object`||t===`function`});function sS(e,t){if(e){var n;if(aS(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(oS(e)){for(var a in e)if(e.hasOwnProperty(a)&&(n=t(e[a],a),n===!1))break}}}var cS=sS,lS=function(e){return typeof e==`object`&&!!e},uS={}.toString,dS=function(e,t){return uS.call(e)===`[object `+t+`]`},fS=function(e){if(!lS(e)||!dS(e,`Object`))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},pS=function(e){if(!aS(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t};function mS(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],r=1;r<t;r++)n=Math.max(n,e[r]);return n}var hS=(function(e){if(aS(e))return e.reduce(function(e,t){return Math.min(e,t)},e[0])}),gS=function(e,t,n){if(!aS(e)&&!fS(e))return e;var r=n;return cS(e,function(e,n){r=t(r,e,n)}),r};function _S(e){return typeof e==`string`}function vS(e,t){t===void 0&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];t.has(a)||(n.push(a),t.set(a,!0))}return n}var yS=Object.prototype.hasOwnProperty;function bS(e,t){if(!t||!aS(e))return{};for(var n={},r=rS(t)?t:function(e){return e[t]},i,a=0;a<e.length;a++){var o=e[a];i=r(o),yS.call(n,i)?n[i].push(o):n[i]=[o]}return n}var xS=bS,SS=function(e,t,n){return e<t?t:e>n?n:e};function K(e){return typeof e==`number`}var CS=1e-5;function wS(e,t,n){return n===void 0&&(n=CS),e===t||Math.abs(e-t)<n}var TS=(function(e,t){if(aS(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var a=e[i],o=rS(t)?t(a):a[t];o>r&&(n=a,r=o)}return n}}),ES=(function(e,t){if(aS(e)){for(var n,r=1/0,i=0;i<e.length;i++){var a=e[i],o=rS(t)?t(a):a[t];o<r&&(n=a,r=o)}return n}}),DS=function(e,t){return(e%t+t)%t},OS=(function(e){return iS(e)?``:e.toString()}),kS=function(e){var t=OS(e);return t.charAt(0).toLowerCase()+t.substring(1)};function AS(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(e,n){return e.charAt(0)===`\\`?e.slice(1):t[n]===void 0?``:t[n]})}var jS=AS,MS=function(e){var t=OS(e);return t.charAt(0).toUpperCase()+t.substring(1)},NS={}.toString,PS=function(e){return NS.call(e).replace(/^\[object /,``).replace(/]$/,``)},FS=function(e){return dS(e,`Boolean`)};function IS(e){return e instanceof Date}function LS(e){return e===null}var RS=Object.prototype,zS=function(e){var t=e&&e.constructor,n=typeof t==`function`&&t.prototype||RS;return e===n},BS=function(e){return e===void 0};function VS(e){return e instanceof Element||e instanceof Document}function HS(e,t){for(var n in t)t.hasOwnProperty(n)&&n!==`constructor`&&t[n]!==void 0&&(e[n]=t[n])}function US(e,t,n,r){return t&&HS(e,t),n&&HS(e,n),r&&HS(e,r),e}var WS=function(e){if(typeof e!=`object`||!e)return e;var t;if(aS(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]==`object`&&e[n]!=null?t[n]=WS(e[n]):t[n]=e[n]}else for(var i in t={},e)typeof e[i]==`object`&&e[i]!=null?t[i]=WS(e[i]):t[i]=e[i];return t},GS=WS;function KS(e,t,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a)}}var qS=KS;function JS(e){var t,n,r,i=e||1;function a(e,a){++t>i&&(r=n,o(1),++t),n[e]=a}function o(e){t=0,n=Object.create(null),e||(r=Object.create(null))}return o(),{clear:o,has:function(e){return n[e]!==void 0||r[e]!==void 0},get:function(e){var t=n[e];if(t!==void 0)return t;if((t=r[e])!==void 0)return a(e,t),t},set:function(e,t){n[e]===void 0?a(e,t):n[e]=t}}}var YS=new Map;function XS(e,t,n){return n===void 0&&(n=128),function(){var r=[...arguments],i=t?t.apply(this,r):r[0];YS.has(e)||YS.set(e,JS(n));var a=YS.get(e);if(a.has(i))return a.get(i);var o=e.apply(this,r);return a.set(i,o),o}}var ZS=5;function QS(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(e==null)throw TypeError(`Cannot convert undefined or null to object`);return Object.prototype.hasOwnProperty.call(Object(e),t)}function $S(e,t,n,r){for(var i in n||=0,r||=ZS,t)if(QS(t,i)){var a=t[i];a!==null&&fS(a)?(fS(e[i])||(e[i]={}),n<r?$S(e[i],a,n+1,r):e[i]=t[i]):aS(a)?(e[i]=[],e[i]=e[i].concat(a)):a!==void 0&&(e[i]=a)}}var eC=function(e){for(var t=[...arguments].slice(1),n=0;n<t.length;n+=1)$S(e,t[n]);return e},tC=Object.prototype.hasOwnProperty;function nC(e){if(iS(e))return!0;if($x(e))return!e.length;var t=PS(e);if(t===`Map`||t===`Set`)return!e.size;if(zS(e))return!Object.keys(e).length;for(var n in e)if(tC.call(e,n))return!1;return!0}var rC=nC,iC=function(e,t){if(e===t)return!0;if(!e||!t||_S(e)||_S(t))return!1;if($x(e)||$x(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=iC(e[r],t[r]),n);r++);return n}if(lS(e)||lS(t)){var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var n=!0,r=0;r<i.length&&(n=iC(e[i[r]],t[i[r]]),n);r++);return n}return!1},aC=iC,oC=(function(e,t,n){for(var r=0,i=_S(t)?t.split(`.`):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e}),sC=(function(e,t,n){var r=e,i=_S(t)?t.split(`.`):t;return i.forEach(function(e,t){t<i.length-1?(oS(r[e])||(r[e]=K(i[t+1])?[]:{}),r=r[e]):r[e]=n}),e}),cC=Object.prototype.hasOwnProperty,lC=(function(e,t){if(e===null||!fS(e))return{};var n={};return cS(t,function(t){cC.call(e,t)&&(n[t]=e[t])}),n}),uC=(function(e,t){return gS(e,function(e,n,r){return t.includes(r)||(e[r]=n),e},{})}),dC=(function(e,t,n){var r,i,a,o,s=0;n||={};var c=function(){s=n.leading===!1?0:Date.now(),r=null,o=e.apply(i,a),r||(i=a=null)},l=function(){var l=Date.now();!s&&n.leading===!1&&(s=l);var u=t-(l-s);return i=this,a=arguments,u<=0||u>t?(r&&=(clearTimeout(r),null),s=l,o=e.apply(i,a),r||(i=a=null)):!r&&n.trailing!==!1&&(r=setTimeout(c,u)),o};return l.cancel=function(){clearTimeout(r),s=0,r=i=a=null},l}),fC={},pC=(function(e){return e||=`g`,fC[e]?fC[e]+=1:fC[e]=1,e+fC[e]}),mC=(function(){}),hC=(function(e){return e}),gC={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function _C(e,t,n){if(e[n].length>7){e[n].shift();for(var r=e[n],i=n;r.length;)t[n]=`A`,e.splice(i+=1,0,[`C`].concat(r.splice(0,6)));e.splice(n,1)}}var vC={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function yC(e){return Array.isArray(e)&&e.every(function(e){var t=e[0].toLowerCase();return vC[t]===e.length-1&&`achlmqstvz`.includes(t)})}function bC(e){return yC(e)&&e.every(function(e){var t=e[0];return t===t.toUpperCase()})}function xC(e){return bC(e)&&e.every(function(e){var t=e[0];return`ACLMQZ`.includes(t)})}function SC(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=vC[n]&&(n===`m`&&r.length>2?(e.segments.push([t].concat(r.splice(0,2))),n=`l`,t=t===`m`?`l`:`L`):e.segments.push([t].concat(r.splice(0,vC[n]))),vC[n]););}function Iee(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);if(r===48){e.param=0,e.index+=1;return}if(r===49){e.param=1,e.index+=1;return}e.err=`[path-util]: invalid Arc flag "${n[t]}", expecting 0 or 1 at index ${t}`}function Lee(e){return e>=48&&e<=57||e===43||e===45||e===46}function CC(e){return e>=48&&e<=57}function Ree(e){var t=e.max,n=e.pathValue,r=e.index,i=r,a=!1,o=!1,s=!1,c=!1,l;if(i>=t){e.err=`[path-util]: Invalid path value at index ${i}, "pathValue" is missing param`;return}if(l=n.charCodeAt(i),(l===43||l===45)&&(i+=1,l=n.charCodeAt(i)),!CC(l)&&l!==46){e.err=`[path-util]: Invalid path value at index ${i}, "${n[i]}" is not a number`;return}if(l!==46){if(a=l===48,i+=1,l=n.charCodeAt(i),a&&i<t&&l&&CC(l)){e.err=`[path-util]: Invalid path value at index ${r}, "${n[r]}" illegal number`;return}for(;i<t&&CC(n.charCodeAt(i));)i+=1,o=!0;l=n.charCodeAt(i)}if(l===46){for(c=!0,i+=1;CC(n.charCodeAt(i));)i+=1,s=!0;l=n.charCodeAt(i)}if(l===101||l===69){if(c&&!o&&!s){e.err=`[path-util]: Invalid path value at index ${i}, "${n[i]}" invalid float exponent`;return}if(i+=1,l=n.charCodeAt(i),(l===43||l===45)&&(i+=1),i<t&&CC(n.charCodeAt(i)))for(;i<t&&CC(n.charCodeAt(i));)i+=1;else{e.err=`[path-util]: Invalid path value at index ${i}, "${n[i]}" invalid integer exponent`;return}}e.index=i,e.param=+e.pathValue.slice(r,i)}function zee(e){return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function wC(e){for(var t=e.pathValue,n=e.max;e.index<n&&zee(t.charCodeAt(e.index));)e.index+=1}function Bee(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Vee(e){return(e|32)==97}function Hee(e){var t=e.max,n=e.pathValue,r=e.index,i=n.charCodeAt(r),a=vC[n[r].toLowerCase()];if(e.segmentStart=r,!Bee(i)){e.err=`[path-util]: Invalid path value "${n[r]}" is not a path command`;return}if(e.index+=1,wC(e),e.data=[],!a){SC(e);return}for(;;){for(var o=a;o>0;--o){if(Vee(i)&&(o===3||o===4)?Iee(e):Ree(e),e.err.length)return;e.data.push(e.param),wC(e),e.index<t&&n.charCodeAt(e.index)===44&&(e.index+=1,wC(e))}if(e.index>=e.max||!Lee(n.charCodeAt(e.index)))break}SC(e)}var Uee=function(){function e(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=``}return e}();function TC(e){if(yC(e))return[].concat(e);var t=new Uee(e);for(wC(t);t.index<t.max&&!t.err.length;)Hee(t);return t.err?t.err:t.segments}function EC(e){if(bC(e))return[].concat(e);var t=TC(e),n=0,r=0,i=0,a=0;return t.map(function(e){var t=e.slice(1).map(Number),o=e[0],s=o.toUpperCase();if(o===`M`)return n=t[0],r=t[1],i=n,a=r,[`M`,n,r];var c;if(o!==s)switch(s){case`A`:c=[s,t[0],t[1],t[2],t[3],t[4],t[5]+n,t[6]+r];break;case`V`:c=[s,t[0]+r];break;case`H`:c=[s,t[0]+n];break;default:var l=t.map(function(e,t){return e+(t%2?r:n)});c=[s].concat(l)}else c=[s].concat(t);var u=c.length;switch(s){case`Z`:n=i,r=a;break;case`H`:n=c[1];break;case`V`:r=c[1];break;default:n=c[u-2],r=c[u-1],s===`M`&&(i=n,a=r)}return c})}function DC(e,t){var n=e[0],r=t.x1,i=t.y1,a=t.x2,o=t.y2,s=e.slice(1).map(Number),c=e;if(`TQ`.includes(n)||(t.qx=null,t.qy=null),n===`H`)c=[`L`,e[1],i];else if(n===`V`)c=[`L`,r,e[1]];else if(n===`S`){var l=r*2-a,u=i*2-o;t.x1=l,t.y1=u,c=[`C`,l,u].concat(s)}else if(n===`T`){var d=r*2-t.qx,f=i*2-t.qy;t.qx=d,t.qy=f,c=[`Q`,d,f].concat(s)}else if(n===`Q`){var p=s[0],m=s[1];t.qx=p,t.qy=m}return c}function OC(e){if(xC(e))return[].concat(e);for(var t=EC(e),n=z({},gC),r=0;r<t.length;r+=1){t[r]=DC(t[r],n);var i=t[r],a=i.length;n.x1=+i[a-2],n.y1=+i[a-1],n.x2=+i[a-4]||n.x1,n.y2=+i[a-3]||n.y1}return t}function kC(e){return xC(e)&&e.every(function(e){var t=e[0];return`MC`.includes(t)})}function AC(e,t,n){var r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return{x:r,y:i}}function jC(e,t,n,r,i,a,o,s,c,l){var u=e,d=t,f=n,p=r,m=s,h=c,g=Math.PI*120/180,_=Math.PI/180*(+i||0),v=[],y,b,x,S,C;if(l)b=l[0],x=l[1],S=l[2],C=l[3];else{y=AC(u,d,-_),u=y.x,d=y.y,y=AC(m,h,-_),m=y.x,h=y.y;var w=(u-m)/2,T=(d-h)/2,E=w*w/(f*f)+T*T/(p*p);E>1&&(E=Math.sqrt(E),f*=E,p*=E);var D=f*f,O=p*p,k=(a===o?-1:1)*Math.sqrt(Math.abs((D*O-D*T*T-O*w*w)/(D*T*T+O*w*w)));S=k*f*T/p+(u+m)/2,C=k*-p*w/f+(d+h)/2,b=Math.asin(((d-C)/p*10**9>>0)/10**9),x=Math.asin(((h-C)/p*10**9>>0)/10**9),b=u<S?Math.PI-b:b,x=m<S?Math.PI-x:x,b<0&&(b=Math.PI*2+b),x<0&&(x=Math.PI*2+x),o&&b>x&&(b-=Math.PI*2),!o&&x>b&&(x-=Math.PI*2)}var A=x-b;if(Math.abs(A)>g){var j=x,M=m,ee=h;x=b+g*(o&&x>b?1:-1),m=S+f*Math.cos(x),h=C+p*Math.sin(x),v=jC(m,h,f,p,i,0,o,M,ee,[x,j,S,C])}A=x-b;var N=Math.cos(b),te=Math.sin(b),ne=Math.cos(x),re=Math.sin(x),P=Math.tan(A/4),F=4/3*f*P,I=4/3*p*P,ie=[u,d],ae=[u+F*te,d-I*N],L=[m+F*re,h-I*ne],oe=[m,h];if(ae[0]=2*ie[0]-ae[0],ae[1]=2*ie[1]-ae[1],l)return ae.concat(L,oe,v);v=ae.concat(L,oe,v);for(var se=[],ce=0,le=v.length;ce<le;ce+=1)se[ce]=ce%2?AC(v[ce-1],v[ce],_).y:AC(v[ce],v[ce+1],_).x;return se}function MC(e,t,n,r,i,a){var o=1/3,s=2/3;return[o*e+s*n,o*t+s*r,o*i+s*n,o*a+s*r,i,a]}function NC(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return[r+(a-r)*n,i+(o-i)*n]}var PC=function(e,t,n,r){var i=NC([e,t],[n,r],.5);return kn(kn([],i,!0),[n,r,n,r],!1)};function FC(e,t){var n=e[0],r=e.slice(1).map(Number),i=r[0],a=r[1],o,s=t.x1,c=t.y1,l=t.x,u=t.y;switch(`TQ`.includes(n)||(t.qx=null,t.qy=null),n){case`M`:return t.x=i,t.y=a,e;case`A`:return o=[s,c].concat(r),[`C`].concat(jC(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case`Q`:return t.qx=i,t.qy=a,o=[s,c].concat(r),[`C`].concat(MC(o[0],o[1],o[2],o[3],o[4],o[5]));case`L`:return[`C`].concat(PC(s,c,i,a));case`Z`:return s===l&&c===u?[`C`,s,c,l,u,l,u]:[`C`].concat(PC(s,c,l,u));default:}return e}function IC(e,t){if(t===void 0&&(t=!1),kC(e)){var n=[].concat(e);return t?[n,[]]:n}for(var r=OC(e),i=z({},gC),a=[],o=``,s=r.length,c,l,u=[],d=0;d<s;d+=1)r[d]&&(o=r[d][0]),a[d]=o,r[d]=FC(r[d],i),_C(r,a,d),s=r.length,o===`Z`&&u.push(d),c=r[d],l=c.length,i.x1=+c[l-2],i.y1=+c[l-1],i.x2=+c[l-4]||i.x1,i.y2=+c[l-3]||i.y1;return t?[r,u]:r}function LC(e){return e.map(function(e){return Array.isArray(e)?[].concat(e):e})}function RC(e){var t=e.slice(1).map(function(t,n,r){return n?r[n-1].slice(-2).concat(t.slice(1)):e[0].slice(1).concat(t.slice(1))}).map(function(e){return e.map(function(t,n){return e[e.length-n-2*(1-n%2)]})}).reverse();return[[`M`].concat(t[0].slice(0,2))].concat(t.map(function(e){return[`C`].concat(e.slice(2))}))}function zC(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}function BC(e,t,n,r,i){var a=zC([e,t],[n,r]),o={x:0,y:0};if(typeof i==`number`)if(i<=0)o={x:e,y:t};else if(i>=a)o={x:n,y:r};else{var s=NC([e,t],[n,r],i/a),c=s[0],l=s[1];o={x:c,y:l}}return{length:a,point:o,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}function VC(e,t){var n=e.x,r=e.y,i=t.x,a=t.y,o=n*i+r*a,s=Math.sqrt((n**2+r**2)*(i**2+a**2));return(n*a-r*i<0?-1:1)*Math.acos(o/s)}function HC(e,t,n,r,i,a,o,s,c,l){var u=Math.abs,d=Math.sin,f=Math.cos,p=Math.sqrt,m=Math.PI,h=u(n),g=u(r),_=(i%360+360)%360*(m/180);if(e===s&&t===c)return{x:e,y:t};if(h===0||g===0)return BC(e,t,s,c,l).point;var v=(e-s)/2,y=(t-c)/2,b={x:f(_)*v+d(_)*y,y:-d(_)*v+f(_)*y},x=b.x**2/h**2+b.y**2/g**2;x>1&&(h*=p(x),g*=p(x));var S=h**2*g**2-h**2*b.y**2-g**2*b.x**2,C=h**2*b.y**2+g**2*b.x**2,w=S/C;w=w<0?0:w;var T=(a===o?-1:1)*p(w),E={x:T*(h*b.y/g),y:T*(-(g*b.x)/h)},D={x:f(_)*E.x-d(_)*E.y+(e+s)/2,y:d(_)*E.x+f(_)*E.y+(t+c)/2},O={x:(b.x-E.x)/h,y:(b.y-E.y)/g},k=VC({x:1,y:0},O),A={x:(-b.x-E.x)/h,y:(-b.y-E.y)/g},j=VC(O,A);!o&&j>0?j-=2*m:o&&j<0&&(j+=2*m),j%=2*m;var M=k+j*l,ee=h*f(M),N=g*d(M);return{x:f(_)*ee-d(_)*N+D.x,y:d(_)*ee+f(_)*N+D.y}}function UC(e,t,n,r,i,a,o,s,c,l,u){var d,f=u.bbox,p=f===void 0?!0:f,m=u.length,h=m===void 0?!0:m,g=u.sampleSize,_=g===void 0?30:g,v=typeof l==`number`,y=e,b=t,x=0,S=[y,b,x],C=[y,b],w=0,T={x:0,y:0},E=[{x:y,y:b}];v&&l<=0&&(T={x:y,y:b});for(var D=0;D<=_;D+=1){if(w=D/_,d=HC(e,t,n,r,i,a,o,s,c,w),y=d.x,b=d.y,p&&E.push({x:y,y:b}),h&&(x+=zC(C,[y,b])),C=[y,b],v&&x>=l&&l>S[2]){var O=(x-l)/(x-S[2]);T={x:C[0]*(1-O)+S[0]*O,y:C[1]*(1-O)+S[1]*O}}S=[y,b,x]}return v&&l>=x&&(T={x:s,y:c}),{length:x,point:T,min:{x:Math.min.apply(null,E.map(function(e){return e.x})),y:Math.min.apply(null,E.map(function(e){return e.y}))},max:{x:Math.max.apply(null,E.map(function(e){return e.x})),y:Math.max.apply(null,E.map(function(e){return e.y}))}}}function WC(e,t,n,r,i,a,o,s,c){var l=1-c;return{x:l**3*e+3*l**2*c*n+3*l*c**2*i+c**3*o,y:l**3*t+3*l**2*c*r+3*l*c**2*a+c**3*s}}function GC(e,t,n,r,i,a,o,s,c,l){var u,d=l.bbox,f=d===void 0?!0:d,p=l.length,m=p===void 0?!0:p,h=l.sampleSize,g=h===void 0?10:h,_=typeof c==`number`,v=e,y=t,b=0,x=[v,y,b],S=[v,y],C=0,w={x:0,y:0},T=[{x:v,y}];_&&c<=0&&(w={x:v,y});for(var E=0;E<=g;E+=1){if(C=E/g,u=WC(e,t,n,r,i,a,o,s,C),v=u.x,y=u.y,f&&T.push({x:v,y}),m&&(b+=zC(S,[v,y])),S=[v,y],_&&b>=c&&c>x[2]){var D=(b-c)/(b-x[2]);w={x:S[0]*(1-D)+x[0]*D,y:S[1]*(1-D)+x[1]*D}}x=[v,y,b]}return _&&c>=b&&(w={x:o,y:s}),{length:b,point:w,min:{x:Math.min.apply(null,T.map(function(e){return e.x})),y:Math.min.apply(null,T.map(function(e){return e.y}))},max:{x:Math.max.apply(null,T.map(function(e){return e.x})),y:Math.max.apply(null,T.map(function(e){return e.y}))}}}function KC(e,t,n,r,i,a,o){var s=1-o;return{x:s**2*e+2*s*o*n+o**2*i,y:s**2*t+2*s*o*r+o**2*a}}function qC(e,t,n,r,i,a,o,s){var c,l=s.bbox,u=l===void 0?!0:l,d=s.length,f=d===void 0?!0:d,p=s.sampleSize,m=p===void 0?10:p,h=typeof o==`number`,g=e,_=t,v=0,y=[g,_,v],b=[g,_],x=0,S={x:0,y:0},C=[{x:g,y:_}];h&&o<=0&&(S={x:g,y:_});for(var w=0;w<=m;w+=1){if(x=w/m,c=KC(e,t,n,r,i,a,x),g=c.x,_=c.y,u&&C.push({x:g,y:_}),f&&(v+=zC(b,[g,_])),b=[g,_],h&&v>=o&&o>y[2]){var T=(v-o)/(v-y[2]);S={x:b[0]*(1-T)+y[0]*T,y:b[1]*(1-T)+y[1]*T}}y=[g,_,v]}return h&&o>=v&&(S={x:i,y:a}),{length:v,point:S,min:{x:Math.min.apply(null,C.map(function(e){return e.x})),y:Math.min.apply(null,C.map(function(e){return e.y}))},max:{x:Math.max.apply(null,C.map(function(e){return e.x})),y:Math.max.apply(null,C.map(function(e){return e.y}))}}}function JC(e,t,n){for(var r,i,a,o,s,c,l=OC(e),u=typeof t==`number`,d,f=[],p,m=0,h=0,g=0,_=0,v,y=[],b=[],x=0,S={x:0,y:0},C=S,w=S,T=S,E=0,D=0,O=l.length;D<O;D+=1)v=l[D],p=v[0],d=p===`M`,f=d?f:[m,h].concat(v.slice(1)),d?(g=v[1],_=v[2],S={x:g,y:_},C=S,x=0,u&&t<.001&&(T=S)):p===`L`?(r=BC(f[0],f[1],f[2],f[3],(t||0)-E),x=r.length,S=r.min,C=r.max,w=r.point):p===`A`?(i=UC(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],(t||0)-E,n||{}),x=i.length,S=i.min,C=i.max,w=i.point):p===`C`?(a=GC(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],(t||0)-E,n||{}),x=a.length,S=a.min,C=a.max,w=a.point):p===`Q`?(o=qC(f[0],f[1],f[2],f[3],f[4],f[5],(t||0)-E,n||{}),x=o.length,S=o.min,C=o.max,w=o.point):p===`Z`&&(f=[m,h,g,_],s=BC(f[0],f[1],f[2],f[3],(t||0)-E),x=s.length,S=s.min,C=s.max,w=s.point),u&&E<t&&E+x>=t&&(T=w),b.push(C),y.push(S),E+=x,c=p===`Z`?[g,_]:v.slice(-2),m=c[0],h=c[1];return u&&t>=E&&(T={x:m,y:h}),{length:E,point:T,min:{x:Math.min.apply(null,y.map(function(e){return e.x})),y:Math.min.apply(null,y.map(function(e){return e.y}))},max:{x:Math.max.apply(null,b.map(function(e){return e.x})),y:Math.max.apply(null,b.map(function(e){return e.y}))}}}function YC(e,t){return JC(e,void 0,z(z({},t),{bbox:!1,length:!0})).length}function XC(e){var t=e.length,n=t-1;return e.map(function(r,i){return e.map(function(r,a){var o=i+a,s;return a===0||e[o]&&e[o][0]===`M`?(s=e[o],[`M`].concat(s.slice(-2))):(o>=t&&(o-=n),e[o])})})}function ZC(e,t){var n=e.length-1,r=[],i=0,a=0,o=XC(e);return o.forEach(function(i,o){e.slice(1).forEach(function(r,i){a+=zC(e[(o+i)%n].slice(-2),t[i%n].slice(-2))}),r[o]=a,a=0}),i=r.indexOf(Math.min.apply(null,r)),o[i]}function QC(e,t,n,r,i,a,o,s){return 3*((s-t)*(n+i)-(o-e)*(r+a)+r*(e-i)-n*(t-a)+s*(i+e/3)-o*(a+t/3))/20}function $C(e){var t=0,n=0,r=0;return IC(e).map(function(e){var i;switch(e[0]){case`M`:return t=e[1],n=e[2],0;default:var a=e.slice(1),o=a[0],s=a[1],c=a[2],l=a[3],u=a[4],d=a[5];return r=QC(t,n,o,s,c,l,u,d),i=e.slice(-2),t=i[0],n=i[1],r}}).reduce(function(e,t){return e+t},0)}function ew(e){return $C(e)>=0}function tw(e,t,n){return JC(e,t,z(z({},n),{bbox:!1,length:!0})).point}var nw=50;function rw(e,t){t===void 0&&(t=.5);var n=e.slice(0,2),r=e.slice(2,4),i=e.slice(4,6),a=e.slice(6,8),o=NC(n,r,t),s=NC(r,i,t),c=NC(i,a,t),l=NC(o,s,t),u=NC(s,c,t),d=NC(l,u,t);return[[`C`].concat(o,l,d),[`C`].concat(u,c,a)]}function iw(e){return e.map(function(e,t,n){var r=t&&n[t-1].slice(-2).concat(e.slice(1)),i=t?GC(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],{bbox:!1}).length:0,a=t?i?rw(r):[e,e]:[e];return{s:e,ss:a,l:i}})}function aw(e,t,n,r){if(r===void 0&&(r=0),r>nw)return console.warn(`Maximum recursion depth reached in equalizeSegments`),[e,t];var i=iw(e),a=iw(t),o=i.length,s=a.length,c=i.filter(function(e){return e.l}).length,l=a.filter(function(e){return e.l}).length,u=i.filter(function(e){return e.l}).reduce(function(e,t){var n=t.l;return e+n},0)/c||0,d=a.filter(function(e){return e.l}).reduce(function(e,t){var n=t.l;return e+n},0)/l||0,f=n||Math.max(o,s),p=[u,d],m=[f-o,f-s],h=0,g=[i,a].map(function(e,t){return e.l===f?e.map(function(e){return e.s}):e.map(function(e,n){return h=n&&m[t]&&e.l>=p[t],m[t]-=h?1:0,h?e.ss:[e.s]}).flat()});return g[0].length===g[1].length?g:aw(g[0],g[1],f,r+1)}function ow(e){var t=document.createElement(`div`);t.innerHTML=e;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function sw(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=Gy(e))!==null;);return e}function cw(){return cw=typeof Reflect<`u`&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=sw(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},cw.apply(null,arguments)}function lw(e,t,n,r){var i=cw(Gy(1&r?e.prototype:e),t,n);return 2&r&&typeof i==`function`?function(e){return i.apply(n,e)}:i}function uw(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function dw(e,t){var n=Math.min.apply(Math,Wy(e)),r=Math.min.apply(Math,Wy(t)),i=Math.max.apply(Math,Wy(e)),a=Math.max.apply(Math,Wy(t));return{x:n,y:r,width:i-n,height:a-r}}function fw(e,t,n){return Math.atan(-t/e*Math.tan(n))}function pw(e,t,n){return Math.atan(t/(e*Math.tan(n)))}function mw(e,t,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+e}function hw(e,t,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+t}function gw(e,t,n,r,i,a,o){for(var s=fw(n,r,i),c=1/0,l=-1/0,u=[a,o],d=-Math.PI*2;d<=Math.PI*2;d+=Math.PI){var f=s+d;a<o?a<f&&f<o&&u.push(f):o<f&&f<a&&u.push(f)}for(var p=0;p<u.length;p++){var m=mw(e,t,n,r,i,u[p]);m<c&&(c=m),m>l&&(l=m)}for(var h=pw(n,r,i),g=1/0,_=-1/0,v=[a,o],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var b=h+y;a<o?a<b&&b<o&&v.push(b):o<b&&b<a&&v.push(b)}for(var x=0;x<v.length;x++){var S=hw(e,t,n,r,i,v[x]);S<g&&(g=S),S>_&&(_=S)}return{x:c,y:g,width:l-c,height:_-g}}var _w=1e-4;function vw(e,t,n,r,i,a){var o=-1,s=1/0,c=[n,r],l=20;a&&a>200&&(l=a/10);for(var u=1/l,d=u/10,f=0;f<=l;f++){var p=f*u,m=[i.apply(void 0,Wy(e.concat([p]))),i.apply(void 0,Wy(t.concat([p])))],h=uw(c[0],c[1],m[0],m[1]);h<s&&(o=p,s=h)}if(o===0)return{x:e[0],y:t[0]};if(o===1){var g=e.length;return{x:e[g-1],y:t[g-1]}}s=1/0;for(var _=0;_<32&&!(d<_w);_++){var v=o-d,y=o+d,b=[i.apply(void 0,Wy(e.concat([v]))),i.apply(void 0,Wy(t.concat([v])))],x=uw(c[0],c[1],b[0],b[1]);if(v>=0&&x<s)o=v,s=x;else{var S=[i.apply(void 0,Wy(e.concat([y]))),i.apply(void 0,Wy(t.concat([y])))],C=uw(c[0],c[1],S[0],S[1]);y<=1&&C<s?(o=y,s=C):d*=.5}}return{x:i.apply(void 0,Wy(e.concat([o]))),y:i.apply(void 0,Wy(t.concat([o])))}}function yw(e,t,n,r){return uw(e,t,n,r)}function bw(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}}function xw(e,t,n,r,i,a){var o=[n-e,r-t];if(Qx(o,[0,0]))return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t));var s=[-o[1],o[0]];Xx(s,s);var c=[i-e,a-t];return Math.abs(Zx(c,s))}function Sw(e,t,n,r,i){var a=1-i;return a*a*a*e+3*t*i*a*a+3*n*i*i*a+r*i*i*i}function Cw(e,t,n,r){var i=-3*e+9*t-9*n+3*r,a=6*e-12*t+6*n,o=3*t-3*e,s=[],c,l,u;if(wS(i,0))wS(a,0)||(c=-o/a,c>=0&&c<=1&&s.push(c));else{var d=a*a-4*i*o;wS(d,0)?s.push(-a/(2*i)):d>0&&(u=Math.sqrt(d),c=(-a+u)/(2*i),l=(-a-u)/(2*i),c>=0&&c<=1&&s.push(c),l>=0&&l<=1&&s.push(l))}return s}function ww(e,t,n,r,i,a,o,s){for(var c=[e,o],l=[t,s],u=Cw(e,n,i,o),d=Cw(t,r,a,s),f=0;f<u.length;f++)c.push(Sw(e,n,i,o,u[f]));for(var p=0;p<d.length;p++)l.push(Sw(t,r,a,s,d[p]));return dw(c,l)}function Tw(e,t,n,r,i,a,o,s,c,l,u){return vw([e,n,i,o],[t,r,a,s],c,l,Sw,u)}function Ew(e,t,n,r,i,a,o,s,c,l,u){var d=Tw(e,t,n,r,i,a,o,s,c,l,u);return uw(d.x,d.y,c,l)}function Dw(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=uw(r[0],r[1],i[0],i[1])}return t}function Ow(e){return Dw(e)}function kw(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function Aw(e,t,n){var r=e+n-2*t;if(wS(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function jw(e,t,n,r,i,a){var o=Aw(e,n,i)[0],s=Aw(t,r,a)[0],c=[e,i],l=[t,a];return o!==void 0&&c.push(kw(e,n,i,o)),s!==void 0&&l.push(kw(t,r,a,s)),dw(c,l)}function Mw(e,t,n,r,i,a,o,s){return vw([e,n,i],[t,r,a],o,s,kw)}function Nw(e,t,n,r,i,a,o,s){var c=Mw(e,t,n,r,i,a,o,s);return uw(c.x,c.y,o,s)}function Pw(e,t){this.v=e,this.k=t}function Fw(e,t,n,r){var i=Object.defineProperty;try{i({},``,{})}catch{i=0}Fw=function(e,t,n,r){function a(t,n){Fw(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a(`next`,0),a(`throw`,1),a(`return`,2))},Fw(e,t,n,r)}function Iw(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,n=typeof Symbol==`function`?Symbol:{},r=n.iterator||`@@iterator`,i=n.toStringTag||`@@toStringTag`;function a(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Fw(l,`_invoke`,function(n,r,i){var a,s,c,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,s=0,c=e,f.n=n,o}};function p(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],p=f.p,m=a[2];n>3?(i=m===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=p&&((i=n<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<m&&(i=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,f.n=m,s=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,m){if(l>1)throw TypeError(`Generator is already running`);for(d&&u===1&&p(u,m),s=u,c=m;(t=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(i=`next`),t=a[i]){if(!(t=t.call(a,c)))throw TypeError(`iterator result is not an object`);if(!t.done)return t;c=t.value,s<2&&(s=0)}else s===1&&(t=a.return)&&t.call(a),s<2&&(c=TypeError(`The iterator does not provide a '`+i+`' method`),s=1);a=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==o)break}catch(t){a=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Fw(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Fw(e,i,`GeneratorFunction`)),e.prototype=Object.create(d),e}return c.prototype=l,Fw(d,`constructor`,l),Fw(l,`constructor`,c),c.displayName=`GeneratorFunction`,Fw(l,i,`GeneratorFunction`),Fw(d),Fw(d,i,`Generator`),Fw(d,r,function(){return this}),Fw(d,`toString`,function(){return`[object Generator]`}),(Iw=function(){return{w:a,m:f}})()}function Lw(e,t){function n(r,i,a,o){try{var s=e[r](i),c=s.value;return c instanceof Pw?t.resolve(c.v).then(function(e){n(`next`,e,a,o)},function(e){n(`throw`,e,a,o)}):t.resolve(c).then(function(e){s.value=e,a(s)},function(e){return n(`throw`,e,a,o)})}catch(e){o(e)}}var r;this.next||(Fw(Lw.prototype),Fw(Lw.prototype,typeof Symbol==`function`&&Symbol.asyncIterator||`@asyncIterator`,function(){return this})),Fw(this,`_invoke`,function(e,i,a){function o(){return new t(function(t,r){n(e,a,t,r)})}return r=r?r.then(o,o):o()},!0)}function Rw(e,t,n,r,i){return new Lw(Iw().w(e,t,n,r),i||Promise)}function zw(e,t,n,r,i){var a=Rw(e,t,n,r,i);return a.next().then(function(e){return e.done?e.value:a.next()})}function Bw(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function Vw(e){if(e!=null){var t=e[typeof Symbol==`function`&&Symbol.iterator||`@@iterator`],n=0;if(t)return t.call(e);if(typeof e.next==`function`)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw TypeError(Ny(e)+` is not iterable`)}function Hw(){var e=Iw(),t=e.m(Hw),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function r(e){var t=typeof e==`function`&&e.constructor;return!!t&&(t===n||(t.displayName||t.name)===`GeneratorFunction`)}var i={throw:1,return:2,break:3,continue:3};function a(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,i[e],t)},delegateYield:function(e,i,a){return t.resultName=i,n(r.d,Vw(e),a)},finish:function(e){return n(r.f,e)}},n=function(e,n,i){r.p=t.prev,r.n=t.next;try{return e(n,i)}finally{t.next=r.n}}),t.resultName&&=(t[t.resultName]=r.v,void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(Hw=function(){return{wrap:function(t,n,r,i){return e.w(a(t),n,r,i&&i.reverse())},isGeneratorFunction:r,mark:e.m,awrap:function(e,t){return new Pw(e,t)},AsyncIterator:Lw,async:function(e,t,n,i,o){return(r(t)?Rw:zw)(a(e),t,n,i,o)},keys:Bw,values:Vw}})()}function Uw(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,i)}function Ww(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Uw(a,r,i,o,s,`next`,e)}function s(e){Uw(a,r,i,o,s,`throw`,e)}o(void 0)})}}function Gw(e,t){var n=typeof Symbol<`u`&&e[Symbol.iterator]||e[`@@iterator`];if(!n){if(Array.isArray(e)||(n=Hy(e))||t&&e&&typeof e.length==`number`){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw a}}}}function Kw(e,t){if(e==null)return{};var n,r,i=Pp(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var qw=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Jw={exports:{}};(function(e,t){(function(t,n){e.exports=n()})(qw,function(){function e(e,n,i,a,o){t(e,n,i||0,a||e.length-1,o||r)}function t(e,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,c=r-i+1,l=Math.log(s),u=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*u*(s-u)/s)*(c-s/2<0?-1:1),f=Math.max(i,Math.floor(r-c*u/s+d)),p=Math.min(a,Math.floor(r+(s-c)*u/s+d));t(e,r,f,p,o)}var m=e[r],h=i,g=a;for(n(e,i,r),o(e[a],m)>0&&n(e,i,a);h<g;){for(n(e,h,g),h++,g--;o(e[h],m)<0;)h++;for(;o(e[g],m)>0;)g--}o(e[i],m)===0?n(e,i,g):(g++,n(e,g,a)),g<=r&&(i=g+1),r<=g&&(a=g-1)}}function n(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function r(e,t){return e<t?-1:e>t?1:0}var i=function(e){e===void 0&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(e){var t=this.data,n=[];if(!g(e,t))return n;for(var r=this.toBBox,i=[];t;){for(var a=0;a<t.children.length;a++){var o=t.children[a],s=t.leaf?r(o):o;g(e,s)&&(t.leaf?n.push(o):h(e,s)?this._all(o,n):i.push(o))}t=i.pop()}return n},i.prototype.collides=function(e){var t=this.data;if(!g(e,t))return!1;for(var n=[];t;){for(var r=0;r<t.children.length;r++){var i=t.children[r],a=t.leaf?this.toBBox(i):i;if(g(e,a)){if(t.leaf||h(e,a))return!0;n.push(i)}}t=n.pop()}return!1},i.prototype.load=function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this},i.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},i.prototype.clear=function(){return this.data=_([]),this},i.prototype.remove=function(e,t){if(!e)return this;for(var n=this.data,r=this.toBBox(e),i=[],o=[],s,c,l;n||i.length;){if(n||(n=i.pop(),c=i[i.length-1],s=o.pop(),l=!0),n.leaf){var u=a(e,n.children,t);if(u!==-1)return n.children.splice(u,1),i.push(n),this._condense(i),this}!l&&!n.leaf&&h(n,r)?(i.push(n),o.push(s),s=0,c=n,n=n.children[0]):c?(s++,n=c.children[s],l=!1):n=null}return this},i.prototype.toBBox=function(e){return e},i.prototype.compareMinX=function(e,t){return e.minX-t.minX},i.prototype.compareMinY=function(e,t){return e.minY-t.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(e){return this.data=e,this},i.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},i.prototype._build=function(e,t,n,r){var i=n-t+1,a=this._maxEntries,s;if(i<=a)return s=_(e.slice(t,n+1)),o(s,this.toBBox),s;r||(r=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/a**(r-1))),s=_([]),s.leaf=!1,s.height=r;var c=Math.ceil(i/a),l=c*Math.ceil(Math.sqrt(a));v(e,t,n,l,this.compareMinX);for(var u=t;u<=n;u+=l){var d=Math.min(u+l-1,n);v(e,u,d,c,this.compareMinY);for(var f=u;f<=d;f+=c){var p=Math.min(f+c-1,d);s.children.push(this._build(e,f,p,r-1))}}return o(s,this.toBBox),s},i.prototype._chooseSubtree=function(e,t,n,r){for(;r.push(t),!(t.leaf||r.length-1===n);){for(var i=1/0,a=1/0,o=void 0,s=0;s<t.children.length;s++){var c=t.children[s],l=d(c),u=p(e,c)-l;u<a?(a=u,i=l<i?l:i,o=c):u===a&&l<i&&(i=l,o=c)}t=o||t.children[0]}return t},i.prototype._insert=function(e,t,n){var r=n?e:this.toBBox(e),i=[],a=this._chooseSubtree(r,this.data,t,i);for(a.children.push(e),c(a,r);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)},i.prototype._split=function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=_(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(e,t){this.data=_([e,t]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(e,t,n){for(var r,i=1/0,a=1/0,o=t;o<=n-t;o++){var c=s(e,0,o,this.toBBox),l=s(e,o,n,this.toBBox),u=m(c,l),f=d(c)+d(l);u<i?(i=u,r=o,a=f<a?f:a):u===i&&f<a&&(a=f,r=o)}return r||n-t},i.prototype._chooseSplitAxis=function(e,t,n){var r=e.leaf?this.compareMinX:l,i=e.leaf?this.compareMinY:u,a=this._allDistMargin(e,t,n,r),o=this._allDistMargin(e,t,n,i);a<o&&e.children.sort(r)},i.prototype._allDistMargin=function(e,t,n,r){e.children.sort(r);for(var i=this.toBBox,a=s(e,0,t,i),o=s(e,n-t,n,i),l=f(a)+f(o),u=t;u<n-t;u++){var d=e.children[u];c(a,e.leaf?i(d):d),l+=f(a)}for(var p=n-t-1;p>=t;p--){var m=e.children[p];c(o,e.leaf?i(m):m),l+=f(o)}return l},i.prototype._adjustParentBBoxes=function(e,t,n){for(var r=n;r>=0;r--)c(t[r],e)},i.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():o(e[t],this.toBBox)};function a(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function o(e,t){s(e,0,e.children.length,t,e)}function s(e,t,n,r,i){i||=_(null),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=t;a<n;a++){var o=e.children[a];c(i,e.leaf?r(o):o)}return i}function c(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function u(e,t){return e.minY-t.minY}function d(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function f(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function m(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,a-r)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function g(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function _(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,n,r,i,a){for(var o=[n,r];o.length;)if(r=o.pop(),n=o.pop(),!(r-n<=i)){var s=n+Math.ceil((r-n)/i/2)*i;e(t,s,n,r,a),o.push(n,s,s,r)}}return i})})(Jw);var Yw=Jw.exports,q=function(e){return e.GROUP=`g`,e.FRAGMENT=`fragment`,e.CIRCLE=`circle`,e.ELLIPSE=`ellipse`,e.IMAGE=`image`,e.RECT=`rect`,e.LINE=`line`,e.POLYLINE=`polyline`,e.POLYGON=`polygon`,e.TEXT=`text`,e.PATH=`path`,e.HTML=`html`,e.MESH=`mesh`,e}({}),Xw=function(e){return e[e.ZERO=0]=`ZERO`,e[e.NEGATIVE_ONE=1]=`NEGATIVE_ONE`,e}({}),Zw=function(){function e(){W(this,e),this.plugins=[]}return G(e,[{key:`addRenderingPlugin`,value:function(e){this.plugins.push(e),this.context.renderingPlugins.push(e)}},{key:`removeAllRenderingPlugins`,value:function(){var e=this;this.plugins.forEach(function(t){var n=e.context.renderingPlugins.indexOf(t);n>=0&&e.context.renderingPlugins.splice(n,1)})}}])}(),Qw=function(){function e(t){W(this,e),this.clipSpaceNearZ=Xw.NEGATIVE_ONE,this.plugins=[],this.config=Ly({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},t)}return G(e,[{key:`registerPlugin`,value:function(e){this.plugins.findIndex(function(t){return t===e})===-1&&this.plugins.push(e)}},{key:`unregisterPlugin`,value:function(e){var t=this.plugins.findIndex(function(t){return t===e});t>-1&&this.plugins.splice(t,1)}},{key:`getPlugins`,value:function(){return this.plugins}},{key:`getPlugin`,value:function(e){return this.plugins.find(function(t){return t.name===e})}},{key:`getConfig`,value:function(){return this.config}},{key:`setConfig`,value:function(e){Object.assign(this.config,e)}}])}(),$w=dx,eT=lx,tT=hx,nT=mx,rT=gx,iT=Ex,aT=function(){function e(){W(this,e),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return G(e,[{key:`update`,value:function(e,t){eT(this.center,e),eT(this.halfExtents,t),iT(this.min,this.center,this.halfExtents),$w(this.max,this.center,this.halfExtents)}},{key:`setMinMax`,value:function(e,t){$w(this.center,t,e),rT(this.center,this.center,.5),iT(this.halfExtents,t,e),rT(this.halfExtents,this.halfExtents,.5),eT(this.min,e),eT(this.max,t)}},{key:`getMin`,value:function(){return this.min}},{key:`getMax`,value:function(){return this.max}},{key:`add`,value:function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var n=this.center,r=n[0],i=n[1],a=n[2],o=this.halfExtents,s=o[0],c=o[1],l=o[2],u=r-s,d=r+s,f=i-c,p=i+c,m=a-l,h=a+l,g=t.center,_=g[0],v=g[1],y=g[2],b=t.halfExtents,x=b[0],S=b[1],C=b[2],w=_-x,T=_+x,E=v-S,D=v+S,O=y-C,k=y+C;w<u&&(u=w),T>d&&(d=T),E<f&&(f=E),D>p&&(p=D),O<m&&(m=O),k>h&&(h=k),n[0]=(u+d)*.5,n[1]=(f+p)*.5,n[2]=(m+h)*.5,o[0]=(d-u)*.5,o[1]=(p-f)*.5,o[2]=(h-m)*.5,this.min[0]=u,this.min[1]=f,this.min[2]=m,this.max[0]=d,this.max[1]=p,this.max[2]=h}}},{key:`setFromTransformedAABB`,value:function(e,t){var n=this.center,r=this.halfExtents,i=e.center,a=e.halfExtents,o=t[0],s=t[4],c=t[8],l=t[1],u=t[5],d=t[9],f=t[2],p=t[6],m=t[10],h=Math.abs(o),g=Math.abs(s),_=Math.abs(c),v=Math.abs(l),y=Math.abs(u),b=Math.abs(d),x=Math.abs(f),S=Math.abs(p),C=Math.abs(m);n[0]=t[12]+o*i[0]+s*i[1]+c*i[2],n[1]=t[13]+l*i[0]+u*i[1]+d*i[2],n[2]=t[14]+f*i[0]+p*i[1]+m*i[2],r[0]=h*a[0]+g*a[1]+_*a[2],r[1]=v*a[0]+y*a[1]+b*a[2],r[2]=x*a[0]+S*a[1]+C*a[2],iT(this.min,n,r),$w(this.max,n,r)}},{key:`intersects`,value:function(e){var t=this.getMax(),n=this.getMin(),r=e.getMax(),i=e.getMin();return n[0]<=r[0]&&t[0]>=i[0]&&n[1]<=r[1]&&t[1]>=i[1]&&n[2]<=r[2]&&t[2]>=i[2]}},{key:`intersection`,value:function(t){if(!this.intersects(t))return null;var n=new e,r=tT([0,0,0],this.getMin(),t.getMin()),i=nT([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n}},{key:`getNegativeFarPoint`,value:function(e){return e.pnVertexFlag===273?eT([0,0,0],this.min):e.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:e.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:`getPositiveFarPoint`,value:function(e){return e.pnVertexFlag===273?eT([0,0,0],this.max):e.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:e.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:`isEmpty`,value:function(e){return!e||e.halfExtents[0]===0&&e.halfExtents[1]===0&&e.halfExtents[2]===0}}])}(),oT=function(){function e(t,n){W(this,e),this.distance=t||0,this.normal=n||cx(0,1,0),this.updatePNVertexFlag()}return G(e,[{key:`updatePNVertexFlag`,value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:`distanceToPoint`,value:function(e){return yx(e,this.normal)-this.distance}},{key:`normalize`,value:function(){var e=1/Ox(this.normal);gx(this.normal,this.normal,e),this.distance*=e}},{key:`intersectsLine`,value:function(e,t,n){var r=this.distanceToPoint(e),i=this.distanceToPoint(t),a=r/(r-i),o=a>=0&&a<=1;return o&&n&&xx(n,e,t,a),o}}])}(),sT=function(e){return e[e.OUTSIDE=4294967295]=`OUTSIDE`,e[e.INSIDE=0]=`INSIDE`,e[e.INDETERMINATE=2147483647]=`INDETERMINATE`,e}({}),cT=function(){function e(t){if(W(this,e),this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new oT)}return G(e,[{key:`extractFromVPMatrix`,value:function(e){var t=eb(e,16),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],m=t[12],h=t[13],g=t[14],_=t[15];ux(this.planes[0].normal,a-n,l-o,p-u),this.planes[0].distance=_-m,ux(this.planes[1].normal,a+n,l+o,p+u),this.planes[1].distance=_+m,ux(this.planes[2].normal,a+r,l+s,p+d),this.planes[2].distance=_+h,ux(this.planes[3].normal,a-r,l-s,p-d),this.planes[3].distance=_-h,ux(this.planes[4].normal,a-i,l-c,p-f),this.planes[4].distance=_-g,ux(this.planes[5].normal,a+i,l+c,p+f),this.planes[5].distance=_+g,this.planes.forEach(function(e){e.normalize(),e.updatePNVertexFlag()})}}])}(),lT=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;W(this,e),this.x=0,this.y=0,this.x=t,this.y=n}return G(e,[{key:`clone`,value:function(){return new e(this.x,this.y)}},{key:`copyFrom`,value:function(e){this.x=e.x,this.y=e.y}}])}(),uT=function(){function e(t,n,r,i){W(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i}return G(e,[{key:`toJSON`,value:function(){}}],[{key:`fromRect`,value:function(t){return new e(t.x,t.y,t.width,t.height)}},{key:`applyTransform`,value:function(t,n){var r=Ax(t.x,t.y,0,1),i=Ax(t.x+t.width,t.y,0,1),a=Ax(t.x,t.y+t.height,0,1),o=Ax(t.x+t.width,t.y+t.height,0,1),s=kx(),c=kx(),l=kx(),u=kx();Px(s,r,n),Px(c,i,n),Px(l,a,n),Px(u,o,n);var d=Math.min(s[0],c[0],l[0],u[0]),f=Math.min(s[1],c[1],l[1],u[1]),p=Math.max(s[0],c[0],l[0],u[0]),m=Math.max(s[1],c[1],l[1],u[1]);return e.fromRect({x:d,y:f,width:p-d,height:m-f})}}])}(),dT=`Method not implemented.`,fT=`Use document.documentElement instead.`,pT=`Cannot append a destroyed element.`;function mT(e){return e===void 0?0:e>360||e<-360?e%360:e}var hT=ax();function gT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(e)&&e.length===3?r?ox(e):lx(hT,e):K(e)?r?cx(e,t,n):ux(hT,e,t,n):r?cx(e[0],e[1]||t,e[2]||n):ux(hT,e[0],e[1]||t,e[2]||n)}var _T=Math.PI/180;function vT(e){return e*_T}var yT=180/Math.PI;function bT(e){return e*yT}function xT(e){return 360*e}var ST=Math.PI/2;function CT(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n,s=r*r,c=i*i,l=a*a,u=o+s+c+l,d=n*a-r*i;return d>.499995*u?(e[0]=ST,e[1]=2*Math.atan2(r,n),e[2]=0):d<-.499995*u?(e[0]=-ST,e[1]=2*Math.atan2(r,n),e[2]=0):(e[0]=Math.asin(2*(n*i-a*r)),e[1]=Math.atan2(2*(n*a+r*i),1-2*(c+l)),e[2]=Math.atan2(2*(n*r+i*a),1-2*(s+c))),e}function wT(e,t){var n,r,i=Nb(ax(),t),a=eb(i,3),o=a[0],s=a[1],c=a[2],l=Math.asin(-t[2]/o);return l<ST?l>-ST?(n=Math.atan2(t[6]/s,t[10]/c),r=Math.atan2(t[1]/o,t[0]/o)):(r=0,n=-Math.atan2(t[4]/s,t[5]/s)):(r=0,n=Math.atan2(t[4]/s,t[5]/s)),e[0]=n,e[1]=l,e[2]=r,e}function TT(e,t){return t.length===16?wT(e,t):CT(e,t)}function ET(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e);return ab(r*a,i*o,0,-r*o,i*a,0,t,n,1)}function DT(e,t,n,r,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,c=2*a,l=n-t,u=r-i,d=c/l,f=c/u,p=(n+t)/l,m=(r+i)/u,h,g,_=o-a,v=o*a;return s?(h=-o/_,g=-v/_):(h=-(o+a)/_,g=-2*v/_),e[0]=d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=p,e[9]=m,e[10]=h,e[11]=-1,e[12]=0,e[13]=0,e[14]=g,e[15]=0,e}function OT(e){var t=e[0],n=e[1],r=e[3],i=e[4],a=Math.sqrt(t*t+n*n),o=Math.sqrt(r*r+i*i);if(t*i-n*r<0&&(t<i?a=-a:o=-o),a){var s=1/a;t*=s,n*=s}if(o){var c=1/o;r*=c,i*=c}var l=bT(Math.atan2(n,t));return[e[6],e[7],a,o,l]}var kT=sb(),AT=sb(),jT=kx(),MT=[ax(),ax(),ax()],NT=ax();function PT(e,t,n,r,i,a){if(!FT(kT,e)||(lb(AT,kT),AT[3]=0,AT[7]=0,AT[11]=0,AT[15]=1,Math.abs(gb(AT))<1e-8))return!1;var o=kT[3],s=kT[7],c=kT[11],l=kT[12],u=kT[13],d=kT[14],f=kT[15];if(o!==0||s!==0||c!==0){if(jT[0]=o,jT[1]=s,jT[2]=c,jT[3]=f,!mb(AT,AT))return!1;pb(AT,AT),Px(i,jT,AT)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=l,t[1]=u,t[2]=d,IT(MT,kT),n[0]=sx(MT[0]),vx(MT[0],MT[0]),r[0]=yx(MT[0],MT[1]),LT(MT[1],MT[1],MT[0],1,-r[0]),n[1]=sx(MT[1]),vx(MT[1],MT[1]),r[0]/=n[1],r[1]=yx(MT[0],MT[2]),LT(MT[2],MT[2],MT[0],1,-r[1]),r[2]=yx(MT[1],MT[2]),LT(MT[2],MT[2],MT[1],1,-r[2]),n[2]=sx(MT[2]),vx(MT[2],MT[2]),r[1]/=n[2],r[2]/=n[2],bx(NT,MT[1],MT[2]),yx(MT[0],NT)<0)for(var p=0;p<3;p++)n[p]*=-1,MT[p][0]*=-1,MT[p][1]*=-1,MT[p][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+MT[0][0]-MT[1][1]-MT[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-MT[0][0]+MT[1][1]-MT[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-MT[0][0]-MT[1][1]+MT[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+MT[0][0]+MT[1][1]+MT[2][2],0)),MT[2][1]>MT[1][2]&&(a[0]=-a[0]),MT[0][2]>MT[2][0]&&(a[1]=-a[1]),MT[1][0]>MT[0][1]&&(a[2]=-a[2]),!0}function FT(e,t){var n=t[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}function IT(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function LT(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var RT=function(e){return e[e.ORBITING=0]=`ORBITING`,e[e.EXPLORING=1]=`EXPLORING`,e[e.TRACKING=2]=`TRACKING`,e}({}),zT=function(e){return e[e.DEFAULT=0]=`DEFAULT`,e[e.ROTATIONAL=1]=`ROTATIONAL`,e[e.TRANSLATIONAL=2]=`TRANSLATIONAL`,e[e.CINEMATIC=3]=`CINEMATIC`,e}({}),BT=function(e){return e[e.ORTHOGRAPHIC=0]=`ORTHOGRAPHIC`,e[e.PERSPECTIVE=1]=`PERSPECTIVE`,e}({}),VT={UPDATED:`updated`},HT=2e-4,UT=function(){function e(){W(this,e),this.clipSpaceNearZ=Xw.NEGATIVE_ONE,this.eventEmitter=new tb,this.matrix=sb(),this.right=cx(1,0,0),this.up=cx(0,1,0),this.forward=cx(0,0,1),this.position=cx(0,0,1),this.focalPoint=cx(0,0,0),this.distanceVector=cx(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=sb(),this.projectionMatrixInverse=sb(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=RT.EXPLORING,this.trackingMode=zT.DEFAULT,this.projectionMode=BT.PERSPECTIVE,this.frustum=new cT,this.orthoMatrix=sb()}return G(e,[{key:`isOrtho`,value:function(){return this.projectionMode===BT.ORTHOGRAPHIC}},{key:`getProjectionMode`,value:function(){return this.projectionMode}},{key:`getPerspective`,value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:`getPerspectiveInverse`,value:function(){return this.projectionMatrixInverse}},{key:`getFrustum`,value:function(){return this.frustum}},{key:`getPosition`,value:function(){return this.position}},{key:`getFocalPoint`,value:function(){return this.focalPoint}},{key:`getDollyingStep`,value:function(){return this.dollyingStep}},{key:`getNear`,value:function(){return this.near}},{key:`getFar`,value:function(){return this.far}},{key:`getZoom`,value:function(){return this.zoom}},{key:`getOrthoMatrix`,value:function(){return this.orthoMatrix}},{key:`getView`,value:function(){return this.view}},{key:`setEnableUpdate`,value:function(e){this.enableUpdate=e}},{key:`setType`,value:function(e,t){return this.type=e,this.type===RT.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===RT.TRACKING&&t!==void 0&&this.setTrackingMode(t),this}},{key:`setProjectionMode`,value:function(e){return this.projectionMode=e,this}},{key:`setTrackingMode`,value:function(e){if(this.type!==RT.TRACKING)throw Error(`Impossible to set a tracking mode if the camera is not of tracking type`);return this.trackingMode=e,this}},{key:`setWorldRotation`,value:function(e){return this.rotateWorld=e,this._getAngles(),this}},{key:`getViewTransform`,value:function(){return mb(sb(),this.matrix)}},{key:`getWorldTransform`,value:function(){return this.matrix}},{key:`jitterProjectionMatrix`,value:function(e,t){var n=wb(sb(),[e,t,0]);this.jitteredProjectionMatrix=_b(sb(),n,this.projectionMatrix)}},{key:`clearJitterProjectionMatrix`,value:function(){this.jitteredProjectionMatrix=void 0}},{key:`setMatrix`,value:function(e){return this.matrix=e,this._update(),this}},{key:`setProjectionMatrix`,value:function(e){this.projectionMatrix=e}},{key:`setFov`,value:function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this}},{key:`setAspect`,value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this}},{key:`setNear`,value:function(e){return this.projectionMode===BT.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this}},{key:`setFar`,value:function(e){return this.projectionMode===BT.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this}},{key:`setViewOffset`,value:function(e,t,n,r,i,a){return this.aspect=e/t,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.projectionMode===BT.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:`clearViewOffset`,value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===BT.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:`setZoom`,value:function(e){return this.zoom=e,this.projectionMode===BT.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===BT.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:`setZoomByViewportPoint`,value:function(e,t){var n=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),r=n.x,i=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(e),this.rotate(0,0,a);var o=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),s=o.x,c=o.y,l=cx(s-r,c-i,0),u=yx(l,this.right)/sx(this.right),d=yx(l,this.up)/sx(this.up),f=this.getPosition(),p=eb(f,2),m=p[0],h=p[1],g=this.getFocalPoint(),_=eb(g,2),v=_[0],y=_[1];return this.setPosition(m-u,h-d),this.setFocalPoint(v-u,y-d),this}},{key:`setPerspective`,value:function(e,t,n,r){var i;this.projectionMode=BT.PERSPECTIVE,this.fov=n,this.near=e,this.far=t,this.aspect=r;var a=this.near*Math.tan(vT(.5*this.fov))/this.zoom,o=2*a,s=this.aspect*o,c=-.5*s;if((i=this.view)!=null&&i.enabled){var l=this.view.fullWidth,u=this.view.fullHeight;c+=this.view.offsetX*s/l,a-=this.view.offsetY*o/u,s*=this.view.width/l,o*=this.view.height/u}return DT(this.projectionMatrix,c,c+s,a-o,a,e,this.far,this.clipSpaceNearZ===Xw.ZERO),mb(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:`setOrthographic`,value:function(e,t,n,r,i,a){var o;this.projectionMode=BT.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=n,this.bottom=r,this.near=i,this.far=a;var s=(this.rright-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),l=(this.rright+this.left)/2,u=(this.top+this.bottom)/2,d=l-s,f=l+s,p=u+c,m=u-c;if((o=this.view)!=null&&o.enabled){var h=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=h*this.view.offsetX,f=d+h*this.view.width,p-=g*this.view.offsetY,m=p-g*this.view.height}return this.clipSpaceNearZ===Xw.NEGATIVE_ONE?Gb(this.projectionMatrix,d,f,p,m,i,a):Kb(this.projectionMatrix,d,f,p,m,i,a),mb(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:`setPosition`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],r=gT(e,t,n);return this._setPosition(r),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:`setFocalPoint`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],r=cx(0,1,0);if(this.focalPoint=gT(e,t,n),this.trackingMode===zT.CINEMATIC){var i=fx(ax(),this.focalPoint,this.position);e=i[0],t=i[1],n=i[2];var a=sx(i),o=bT(Math.asin(t/a)),s=90+bT(Math.atan2(n,e)),c=sb();Sb(c,c,vT(s)),xb(c,c,vT(o)),r=Sx(ax(),[0,1,0],c)}return mb(this.matrix,qb(sb(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:`getDistance`,value:function(){return this.distance}},{key:`getDistanceVector`,value:function(){return this.distanceVector}},{key:`setDistance`,value:function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<HT&&(this.distance=HT),this.dollyingStep=this.distance/100;var t=ax();e=this.distance;var n=this.forward,r=this.focalPoint;return t[0]=e*n[0]+r[0],t[1]=e*n[1]+r[1],t[2]=e*n[2]+r[2],this._setPosition(t),this.triggerUpdate(),this}},{key:`setMaxDistance`,value:function(e){return this.maxDistance=e,this}},{key:`setMinDistance`,value:function(e){return this.minDistance=e,this}},{key:`setAzimuth`,value:function(e){return this.azimuth=mT(e),this.computeMatrix(),this._getAxes(),this.type===RT.ORBITING||this.type===RT.EXPLORING?this._getPosition():this.type===RT.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:`getAzimuth`,value:function(){return this.azimuth}},{key:`setElevation`,value:function(e){return this.elevation=mT(e),this.computeMatrix(),this._getAxes(),this.type===RT.ORBITING||this.type===RT.EXPLORING?this._getPosition():this.type===RT.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:`getElevation`,value:function(){return this.elevation}},{key:`setRoll`,value:function(e){return this.roll=mT(e),this.computeMatrix(),this._getAxes(),this.type===RT.ORBITING||this.type===RT.EXPLORING?this._getPosition():this.type===RT.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:`getRoll`,value:function(){return this.roll}},{key:`_update`,value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:`computeMatrix`,value:function(){var e=Ix(Fx(),[0,0,1],vT(this.roll));fb(this.matrix);var t=Ix(Fx(),[1,0,0],vT((this.rotateWorld&&this.type!==RT.TRACKING||this.type===RT.TRACKING?1:-1)*this.elevation)),n=Ix(Fx(),[0,1,0],vT((this.rotateWorld&&this.type!==RT.TRACKING||this.type===RT.TRACKING?1:-1)*this.azimuth)),r=Lx(Fx(),n,t);r=Lx(Fx(),r,e);var i=Rb(sb(),r);this.type===RT.ORBITING||this.type===RT.EXPLORING?(vb(this.matrix,this.matrix,this.focalPoint),_b(this.matrix,this.matrix,i),vb(this.matrix,this.matrix,[0,0,this.distance])):this.type===RT.TRACKING&&(vb(this.matrix,this.matrix,this.position),_b(this.matrix,this.matrix,i))}},{key:`_setPosition`,value:function(e,t,n){this.position=gT(e,t,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix()}},{key:`_getAxes`,value:function(){lx(this.right,gT(Px(kx(),[1,0,0,0],this.matrix))),lx(this.up,gT(Px(kx(),[0,1,0,0],this.matrix))),lx(this.forward,gT(Px(kx(),[0,0,1,0],this.matrix))),vx(this.right,this.right),vx(this.up,this.up),vx(this.forward,this.forward)}},{key:`_getAngles`,value:function(){var e=this.distanceVector[0],t=this.distanceVector[1],n=this.distanceVector[2],r=sx(this.distanceVector);if(r===0){this.elevation=0,this.azimuth=0;return}this.type===RT.TRACKING||this.rotateWorld?(this.elevation=bT(Math.asin(t/r)),this.azimuth=bT(Math.atan2(-e,-n))):(this.elevation=-bT(Math.asin(t/r)),this.azimuth=-bT(Math.atan2(-e,-n)))}},{key:`_getPosition`,value:function(){lx(this.position,gT(Px(kx(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:`_getFocalPoint`,value:function(){Cx(this.distanceVector,[0,0,-this.distance],ib(rb(),this.matrix)),dx(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:`_getDistance`,value:function(){this.distanceVector=fx(ax(),this.focalPoint,this.position),this.distance=sx(this.distanceVector),this.dollyingStep=this.distance/100}},{key:`_getOrthoMatrix`,value:function(){if(this.projectionMode===BT.ORTHOGRAPHIC){var e=this.position,t=Ix(Fx(),[0,0,1],-this.roll*Math.PI/180);Lb(this.orthoMatrix,t,cx((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),cx(this.zoom,this.zoom,1),e)}}},{key:`triggerUpdate`,value:function(){if(this.enableUpdate){var e=this.getViewTransform(),t=_b(sb(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(t),this.eventEmitter.emit(VT.UPDATED)}}},{key:`rotate`,value:function(e,t,n){throw Error(dT)}},{key:`pan`,value:function(e,t){throw Error(dT)}},{key:`dolly`,value:function(e){throw Error(dT)}},{key:`createLandmark`,value:function(e,t){throw Error(dT)}},{key:`gotoLandmark`,value:function(e,t){throw Error(dT)}},{key:`cancelLandmarkAnimation`,value:function(){throw Error(dT)}}])}(),WT=function(e){return e[e.Standard=0]=`Standard`,e}({}),GT=function(e){return e[e.ADDED=0]=`ADDED`,e[e.REMOVED=1]=`REMOVED`,e[e.Z_INDEX_CHANGED=2]=`Z_INDEX_CHANGED`,e}({}),KT=ax(),qT=sb(),JT=Fx();function YT(e){if(e.localDirtyFlag){if(e.localSkew[0]!==0||e.localSkew[1]!==0){Lb(e.localTransform,e.localRotation,e.localPosition,cx(1,1,1),e.origin),(e.localSkew[0]!==0||e.localSkew[1]!==0)&&(fb(qT),qT[4]=Math.tan(e.localSkew[0]),qT[1]=Math.tan(e.localSkew[1]),_b(e.localTransform,e.localTransform,qT));var t=Lb(qT,Wx(JT,0,0,0,1),ux(KT,1,1,1),e.localScale,e.origin);_b(e.localTransform,e.localTransform,t)}else{var n=e.localTransform,r=e.localPosition,i=e.localRotation,a=e.localScale,o=e.origin,s=r[0]!==0||r[1]!==0||r[2]!==0,c=i[3]!==1||i[0]!==0||i[1]!==0||i[2]!==0,l=a[0]!==1||a[1]!==1||a[2]!==1,u=o[0]!==0||o[1]!==0||o[2]!==0;!c&&!l&&!u?s?wb(n,r):fb(n):Lb(n,i,r,a,o)}e.localDirtyFlag=!1}}function XT(e,t){e.dirtyFlag&&=(t?_b(e.worldTransform,t.worldTransform,e.localTransform):lb(e.worldTransform,e.localTransform),!1)}var ZT={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new uT(0,0,0,0)},J=function(e){return e.COORDINATE=`<coordinate>`,e.COLOR=`<color>`,e.PAINT=`<paint>`,e.NUMBER=`<number>`,e.ANGLE=`<angle>`,e.OPACITY_VALUE=`<opacity-value>`,e.SHADOW_BLUR=`<shadow-blur>`,e.LENGTH=`<length>`,e.PERCENTAGE=`<percentage>`,e.LENGTH_PERCENTAGE=`<length> | <percentage>`,e.LENGTH_PERCENTAGE_12=`[<length> | <percentage>]{1,2}`,e.LENGTH_PERCENTAGE_14=`[<length> | <percentage>]{1,4}`,e.LIST_OF_POINTS=`<list-of-points>`,e.PATH=`<path>`,e.FILTER=`<filter>`,e.Z_INDEX=`<z-index>`,e.OFFSET_DISTANCE=`<offset-distance>`,e.DEFINED_PATH=`<defined-path>`,e.MARKER=`<marker>`,e.TRANSFORM=`<transform>`,e.TRANSFORM_ORIGIN=`<transform-origin>`,e.TEXT=`<text>`,e.TEXT_TRANSFORM=`<text-transform>`,e}({});function QT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $T(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function eE(){}var tE=.7,nE=1/tE,rE=`\\s*([+-]?\\d+)\\s*`,iE=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*`,aE=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*`,oE=/^#([0-9a-f]{3,8})$/,sE=RegExp(`^rgb\\(${rE},${rE},${rE}\\)$`),cE=RegExp(`^rgb\\(${aE},${aE},${aE}\\)$`),lE=RegExp(`^rgba\\(${rE},${rE},${rE},${iE}\\)$`),uE=RegExp(`^rgba\\(${aE},${aE},${aE},${iE}\\)$`),dE=RegExp(`^hsl\\(${iE},${aE},${aE}\\)$`),fE=RegExp(`^hsla\\(${iE},${aE},${aE},${iE}\\)$`),pE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};QT(eE,vE,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mE,formatHex:mE,formatHex8:hE,formatHsl:gE,formatRgb:_E,toString:_E});function mE(){return this.rgb().formatHex()}function hE(){return this.rgb().formatHex8()}function gE(){return jE(this).formatHsl()}function _E(){return this.rgb().formatRgb()}function vE(e){var t,n;return e=(e+``).trim().toLowerCase(),(t=oE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?yE(t):n===3?new CE(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?bE(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?bE(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sE.exec(e))?new CE(t[1],t[2],t[3],1):(t=cE.exec(e))?new CE(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lE.exec(e))?bE(t[1],t[2],t[3],t[4]):(t=uE.exec(e))?bE(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dE.exec(e))?AE(t[1],t[2]/100,t[3]/100,1):(t=fE.exec(e))?AE(t[1],t[2]/100,t[3]/100,t[4]):pE.hasOwnProperty(e)?yE(pE[e]):e===`transparent`?new CE(NaN,NaN,NaN,0):null}function yE(e){return new CE(e>>16&255,e>>8&255,e&255,1)}function bE(e,t,n,r){return r<=0&&(e=t=n=NaN),new CE(e,t,n,r)}function xE(e){return e instanceof eE||(e=vE(e)),e?(e=e.rgb(),new CE(e.r,e.g,e.b,e.opacity)):new CE}function SE(e,t,n,r){return arguments.length===1?xE(e):new CE(e,t,n,r??1)}function CE(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}QT(CE,SE,$T(eE,{brighter(e){return e=e==null?nE:nE**+e,new CE(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tE:tE**+e,new CE(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new CE(OE(this.r),OE(this.g),OE(this.b),DE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wE,formatHex:wE,formatHex8:TE,formatRgb:EE,toString:EE}));function wE(){return`#${kE(this.r)}${kE(this.g)}${kE(this.b)}`}function TE(){return`#${kE(this.r)}${kE(this.g)}${kE(this.b)}${kE((isNaN(this.opacity)?1:this.opacity)*255)}`}function EE(){let e=DE(this.opacity);return`${e===1?`rgb(`:`rgba(`}${OE(this.r)}, ${OE(this.g)}, ${OE(this.b)}${e===1?`)`:`, ${e})`}`}function DE(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function OE(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kE(e){return e=OE(e),(e<16?`0`:``)+e.toString(16)}function AE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new NE(e,t,n,r)}function jE(e){if(e instanceof NE)return new NE(e.h,e.s,e.l,e.opacity);if(e instanceof eE||(e=vE(e)),!e)return new NE;if(e instanceof NE)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new NE(o,s,c,e.opacity)}function ME(e,t,n,r){return arguments.length===1?jE(e):new NE(e,t,n,r??1)}function NE(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}QT(NE,ME,$T(eE,{brighter(e){return e=e==null?nE:nE**+e,new NE(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tE:tE**+e,new NE(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new CE(IE(e>=240?e-240:e+120,i,r),IE(e,i,r),IE(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new NE(PE(this.h),FE(this.s),FE(this.l),DE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=DE(this.opacity);return`${e===1?`hsl(`:`hsla(`}${PE(this.h)}, ${FE(this.s)*100}%, ${FE(this.l)*100}%${e===1?`)`:`, ${e})`}`}}));function PE(e){return e=(e||0)%360,e<0?e+360:e}function FE(e){return Math.max(0,Math.min(1,e||0))}function IE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function LE(e,t){if(typeof e!=`function`||t!=null&&typeof t!=`function`)throw TypeError(`Expected a function`);var n=function(){var r=[...arguments],i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(LE.Cache||Map),LE.cacheList.push(n.cache),n}LE.Cache=Map,LE.cacheList=[],LE.clearCache=function(){LE.cacheList.forEach(function(e){return e.clear()})};var Y=function(e){return e[e.kUnknown=0]=`kUnknown`,e[e.kNumber=1]=`kNumber`,e[e.kPercentage=2]=`kPercentage`,e[e.kEms=3]=`kEms`,e[e.kPixels=4]=`kPixels`,e[e.kRems=5]=`kRems`,e[e.kDegrees=6]=`kDegrees`,e[e.kRadians=7]=`kRadians`,e[e.kGradians=8]=`kGradians`,e[e.kTurns=9]=`kTurns`,e[e.kMilliseconds=10]=`kMilliseconds`,e[e.kSeconds=11]=`kSeconds`,e[e.kInteger=12]=`kInteger`,e}({}),RE=function(e){return e[e.kUNumber=0]=`kUNumber`,e[e.kUPercent=1]=`kUPercent`,e[e.kULength=2]=`kULength`,e[e.kUAngle=3]=`kUAngle`,e[e.kUTime=4]=`kUTime`,e[e.kUOther=5]=`kUOther`,e}({}),zE=function(e){return e[e.kYes=0]=`kYes`,e[e.kNo=1]=`kNo`,e}({}),BE=function(e){return e[e.kYes=0]=`kYes`,e[e.kNo=1]=`kNo`,e}({}),VE=[{name:`em`,unit_type:Y.kEms},{name:`px`,unit_type:Y.kPixels},{name:`deg`,unit_type:Y.kDegrees},{name:`rad`,unit_type:Y.kRadians},{name:`grad`,unit_type:Y.kGradians},{name:`ms`,unit_type:Y.kMilliseconds},{name:`s`,unit_type:Y.kSeconds},{name:`rem`,unit_type:Y.kRems},{name:`turn`,unit_type:Y.kTurns}],HE=function(e){return e[e.kUnknownType=0]=`kUnknownType`,e[e.kUnparsedType=1]=`kUnparsedType`,e[e.kKeywordType=2]=`kKeywordType`,e[e.kUnitType=3]=`kUnitType`,e[e.kSumType=4]=`kSumType`,e[e.kProductType=5]=`kProductType`,e[e.kNegateType=6]=`kNegateType`,e[e.kInvertType=7]=`kInvertType`,e[e.kMinType=8]=`kMinType`,e[e.kMaxType=9]=`kMaxType`,e[e.kClampType=10]=`kClampType`,e[e.kTransformType=11]=`kTransformType`,e[e.kPositionType=12]=`kPositionType`,e[e.kURLImageType=13]=`kURLImageType`,e[e.kColorType=14]=`kColorType`,e[e.kUnsupportedColorType=15]=`kUnsupportedColorType`,e}({}),UE=function(e){return VE.find(function(t){return t.name===e}).unit_type},WE=function(e){return e?e===`number`?Y.kNumber:e===`percent`||e===`%`?Y.kPercentage:UE(e):Y.kUnknown},GE=function(e){switch(e){case Y.kNumber:case Y.kInteger:return RE.kUNumber;case Y.kPercentage:return RE.kUPercent;case Y.kPixels:return RE.kULength;case Y.kMilliseconds:case Y.kSeconds:return RE.kUTime;case Y.kDegrees:case Y.kRadians:case Y.kGradians:case Y.kTurns:return RE.kUAngle;default:return RE.kUOther}},KE=function(e){switch(e){case RE.kUNumber:return Y.kNumber;case RE.kULength:return Y.kPixels;case RE.kUPercent:return Y.kPercentage;case RE.kUTime:return Y.kSeconds;case RE.kUAngle:return Y.kDegrees;default:return Y.kUnknown}},qE=function(e){var t=1;switch(e){case Y.kPixels:case Y.kDegrees:case Y.kSeconds:break;case Y.kMilliseconds:t=.001;break;case Y.kRadians:t=180/Math.PI;break;case Y.kGradians:t=.9;break;case Y.kTurns:t=360;break}return t},JE=function(e){switch(e){case Y.kNumber:case Y.kInteger:return``;case Y.kPercentage:return`%`;case Y.kEms:return`em`;case Y.kRems:return`rem`;case Y.kPixels:return`px`;case Y.kDegrees:return`deg`;case Y.kRadians:return`rad`;case Y.kGradians:return`grad`;case Y.kMilliseconds:return`ms`;case Y.kSeconds:return`s`;case Y.kTurns:return`turn`}return``},YE=function(){function e(){W(this,e)}return G(e,[{key:`toString`,value:function(){return this.buildCSSText(zE.kNo,BE.kNo,``)}},{key:`isNumericValue`,value:function(){return this.getType()>=HE.kUnitType&&this.getType()<=HE.kClampType}}],[{key:`isAngle`,value:function(e){return e===Y.kDegrees||e===Y.kRadians||e===Y.kGradians||e===Y.kTurns}},{key:`isLength`,value:function(e){return e>=Y.kEms&&e<Y.kDegrees}},{key:`isRelativeUnit`,value:function(e){return e===Y.kPercentage||e===Y.kEms||e===Y.kRems}},{key:`isTime`,value:function(e){return e===Y.kSeconds||e===Y.kMilliseconds}}])}(),XE=function(e){function t(e){var n;return W(this,t),n=Yy(this,t),n.colorSpace=e,n}return Zy(t,e),G(t,[{key:`getType`,value:function(){return HE.kColorType}},{key:`to`,value:function(e){return this}}])}(YE),ZE=function(e){return e[e.Constant=0]=`Constant`,e[e.LinearGradient=1]=`LinearGradient`,e[e.RadialGradient=2]=`RadialGradient`,e}({}),QE=function(e){function t(e,n){var r;return W(this,t),r=Yy(this,t),r.type=e,r.value=n,r}return Zy(t,e),G(t,[{key:`clone`,value:function(){return new t(this.type,this.value)}},{key:`buildCSSText`,value:function(e,t,n){return n}},{key:`getType`,value:function(){return HE.kColorType}}])}(YE),$E=function(e){function t(e){var n;return W(this,t),n=Yy(this,t),n.value=e,n}return Zy(t,e),G(t,[{key:`clone`,value:function(){return new t(this.value)}},{key:`getType`,value:function(){return HE.kKeywordType}},{key:`buildCSSText`,value:function(e,t,n){return n+this.value}}])}(YE),eD=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:``,n=``;return n=Number.isFinite(e)?`NaN`:e>0?`infinity`:`-infinity`,n+=t},tD=function(e){return KE(GE(e))},nD=function(e){function t(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y.kNumber;return W(this,t),n=Yy(this,t),n.unit=typeof r==`string`?WE(r):r,n.value=e,n}return Zy(t,e),G(t,[{key:`clone`,value:function(){return new t(this.value,this.unit)}},{key:`equals`,value:function(e){var t=e;return this.value===t.value&&this.unit===t.unit}},{key:`getType`,value:function(){return HE.kUnitType}},{key:`convertTo`,value:function(e){if(this.unit===e)return new t(this.value,this.unit);var n=tD(this.unit);if(n!==tD(e)||n===Y.kUnknown)return null;var r=qE(this.unit)/qE(e);return new t(this.value*r,e)}},{key:`buildCSSText`,value:function(e,t,n){var r;switch(this.unit){case Y.kUnknown:break;case Y.kInteger:r=Number(this.value).toFixed(0);break;case Y.kNumber:case Y.kPercentage:case Y.kEms:case Y.kRems:case Y.kPixels:case Y.kDegrees:case Y.kRadians:case Y.kGradians:case Y.kMilliseconds:case Y.kSeconds:case Y.kTurns:var i=-999999,a=999999,o=this.value,s=JE(this.unit);if(o<i||o>a){var c=JE(this.unit);r=!Number.isFinite(o)||Number.isNaN(o)?eD(o,c):o+(c||``)}else r=`${o}${s}`}return n+=r,n}}])}(YE),rD=new nD(0,`px`);new nD(1,`px`);var iD=new nD(0,`deg`),aD=function(e){function t(e,n,r){var i,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return W(this,t),i=Yy(this,t,[`rgb`]),i.r=e,i.g=n,i.b=r,i.alpha=a,i.isNone=o,i}return Zy(t,e),G(t,[{key:`clone`,value:function(){return new t(this.r,this.g,this.b,this.alpha)}},{key:`buildCSSText`,value:function(e,t,n){return`${n}rgba(${this.r},${this.g},${this.b},${this.alpha})`}}])}(XE),oD=new $E(`unset`),sD=new $E(`initial`),cD=new $E(`inherit`),lD={"":oD,unset:oD,initial:sD,inherit:cD},uD=function(e){return lD[e]||(lD[e]=new $E(e)),lD[e]},dD=new aD(0,0,0,0,!0),fD=new aD(0,0,0,0),pD=LE(function(e,t,n,r){return new aD(e,t,n,r)},function(e,t,n,r){return`rgba(${e},${t},${n},${r})`}),mD=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y.kNumber;return new nD(e,t)};new nD(50,`%`);function hD(e){var t=e.type,n=e.value;return t===`hex`?`#${n}`:t===`literal`?n:t===`rgb`?`rgb(${n.join(`,`)})`:`rgba(${n.join(`,`)})`}var gD=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t=``;function n(e){throw Error(`${t}: ${e}`)}function r(){var e=i();return t.length>0&&n(`Invalid input not EOF`),e}function i(){return y(a)}function a(){return o(`linear-gradient`,e.linearGradient,c)||o(`repeating-linear-gradient`,e.repeatingLinearGradient,c)||o(`radial-gradient`,e.radialGradient,d)||o(`repeating-radial-gradient`,e.repeatingRadialGradient,d)||o(`conic-gradient`,e.conicGradient,d)}function o(t,r,i){return s(r,function(r){var a=i();return a&&(j(e.comma)||n(`Missing comma before color stops`)),{type:t,orientation:a,colorStops:y(b)}})}function s(t,r){var i=j(t);if(i){j(e.startCall)||n(`Missing (`);var a=r(i);return j(e.endCall)||n(`Missing )`),a}}function c(){return l()||u()}function l(){return A(`directional`,e.sideOrCorner,1)}function u(){return A(`angular`,e.angleValue,1)}function d(){var n,r=f(),i;return r&&(n=[],n.push(r),i=t,j(e.comma)&&(r=f(),r?n.push(r):t=i)),n}function f(){var e=p()||m();if(e)e.at=g();else{var t=h();if(t){e=t;var n=g();n&&(e.at=n)}else{var r=_();r&&(e={type:`default-radial`,at:r})}}return e}function p(){var e=A(`shape`,/^(circle)/i,0);return e&&(e.style=k()||h()),e}function m(){var e=A(`shape`,/^(ellipse)/i,0);return e&&(e.style=D()||h()),e}function h(){return A(`extent-keyword`,e.extentKeywords,1)}function g(){if(A(`position`,/^at/,0)){var e=_();return e||n(`Missing positioning value`),e}}function _(){var e=v();if(e.x||e.y)return{type:`position`,value:e}}function v(){return{x:D(),y:D()}}function y(t){var r=t(),i=[];if(r)for(i.push(r);j(e.comma);)r=t(),r?i.push(r):n(`One extra comma`);return i}function b(){var e=x();return e||n(`Expected color definition`),e.length=D(),e}function x(){return C()||T()||w()||S()}function S(){return A(`literal`,e.literalColor,0)}function C(){return A(`hex`,e.hexColor,1)}function w(){return s(e.rgbColor,function(){return{type:`rgb`,value:y(E)}})}function T(){return s(e.rgbaColor,function(){return{type:`rgba`,value:y(E)}})}function E(){return j(e.number)[1]}function D(){return A(`%`,e.percentageValue,1)||O()||k()}function O(){return A(`position-keyword`,e.positionKeywords,1)}function k(){return A(`px`,e.pixelValue,1)||A(`em`,e.emValue,1)}function A(e,t,n){var r=j(t);if(r)return{type:e,value:r[n]}}function j(e){var n=/^[\n\r\t\s]+/.exec(t);n&&M(n[0].length);var r=e.exec(t);return r&&M(r[0].length),r}function M(e){t=t.substring(e)}return function(e){return t=e,r()}}();function _D(e,t,n,r){var i=vT(r.value),a=0,o=0,s=a+t/2,c=o+n/2,l=Math.abs(t*Math.cos(i))+Math.abs(n*Math.sin(i)),u=e[0]+s-Math.cos(i)*l/2,d=e[1]+c-Math.sin(i)*l/2,f=e[0]+s+Math.cos(i)*l/2,p=e[1]+c+Math.sin(i)*l/2;return{x1:u,y1:d,x2:f,y2:p}}function vD(e,t,n,r,i,a){var o=r.value,s=i.value;r.unit===Y.kPercentage&&(o=r.value/100*t),i.unit===Y.kPercentage&&(s=i.value/100*n);var c=Math.max(zC([0,0],[o,s]),zC([0,n],[o,s]),zC([t,n],[o,s]),zC([t,0],[o,s]));return a&&(a instanceof nD?c=a.value:a instanceof $E&&(a.value===`closest-side`?c=Math.min(o,t-o,s,n-s):a.value===`farthest-side`?c=Math.max(o,t-o,s,n-s):a.value===`closest-corner`&&(c=Math.min(zC([0,0],[o,s]),zC([0,n],[o,s]),zC([t,n],[o,s]),zC([t,0],[o,s]))))),{x:o+e[0],y:s+e[1],r:c}}var yD=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,bD=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,xD=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,SD=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function CD(e){var t=e.length;e[t-1].length=e[t-1].length??{type:`%`,value:`100`},t>1&&(e[0].length=e[0].length??{type:`%`,value:`0`});for(var n=0,r=Number(e[0].length.value),i=1;i<t;i++){var a=e[i].length?.value;if(!iS(a)&&!iS(r)){for(var o=1;o<i-n;o++)e[n+o].length={type:`%`,value:`${r+(Number(a)-r)*o/(i-n)}`};n=i,r=Number(a)}}}var wD={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},TD=LE(function(e){var t=e.type===`angular`?Number(e.value):wD[e.value]||0;return mD(t,`deg`)}),ED=LE(function(e){var t=50,n=50,r=`%`,i=`%`;if(e?.type===`position`){var a=e.value,o=a.x,s=a.y;o?.type===`position-keyword`&&(o.value===`left`?t=0:o.value===`center`?t=50:o.value===`right`?t=100:o.value===`top`?n=0:o.value===`bottom`&&(n=100)),s?.type===`position-keyword`&&(s.value===`left`?t=0:s.value===`center`?n=50:s.value===`right`?t=100:s.value===`top`?n=0:s.value===`bottom`&&(n=100)),(o?.type===`px`||o?.type===`%`||o?.type===`em`)&&(r=o?.type,t=Number(o.value)),(s?.type===`px`||s?.type===`%`||s?.type===`em`)&&(i=s?.type,n=Number(s.value))}return{cx:mD(t,r),cy:mD(n,i)}}),DD=LE(function(e){if(e.indexOf(`linear`)>-1||e.indexOf(`radial`)>-1)return gD(e).map(function(e){var t=e.type,n=e.orientation,r=e.colorStops;CD(r);var i=r.map(function(e){return{offset:mD(Number(e.length.value),`%`),color:hD(e)}});if(t===`linear-gradient`)return new QE(ZE.LinearGradient,{angle:n?TD(n):iD,steps:i});if(t===`radial-gradient`&&(n||=[{type:`shape`,value:`circle`}],n[0].type===`shape`&&n[0].value===`circle`)){var a=ED(n[0].at),o=a.cx,s=a.cy,c;if(n[0].style){var l=n[0].style,u=l.type,d=l.value;c=u===`extent-keyword`?uD(d):mD(d,u)}return new QE(ZE.RadialGradient,{cx:o,cy:s,size:c,steps:i})}});var t=e[0];if(e[1]===`(`||e[2]===`(`){if(t===`l`){var n=yD.exec(e);if(n){var r=n[2].match(SD)?.map(function(e){return e.split(`:`)})||[];return[new QE(ZE.LinearGradient,{angle:mD(parseFloat(n[1]),`deg`),steps:r.map(function(e){var t=eb(e,2),n=t[0],r=t[1];return{offset:mD(Number(n)*100,`%`),color:r}})})]}}else if(t===`r`){var i=OD(e);if(i)if(_S(i))e=i;else return[new QE(ZE.RadialGradient,i)]}else if(t===`p`)return kD(e)}});function OD(e){var t=bD.exec(e);if(t){var n=t[4].match(SD)?.map(function(e){return e.split(`:`)})||[];return{cx:mD(50,`%`),cy:mD(50,`%`),steps:n.map(function(e){var t=eb(e,2),n=t[0],r=t[1];return{offset:mD(Number(n)*100,`%`),color:r}})}}return null}function kD(e){var t=xD.exec(e);if(t){var n=t[1],r=t[2];switch(n){case`a`:n=`repeat`;break;case`x`:n=`repeat-x`;break;case`y`:n=`repeat-y`;break;case`n`:n=`no-repeat`;break;default:n=`no-repeat`}return{image:r,repetition:n}}return null}function AD(e){return e&&!!e.image}function jD(e){return e&&!iS(e.r)&&!iS(e.g)&&!iS(e.b)}var MD=LE(function(e){if(AD(e))return Ly({repetition:`repeat`},e);if(iS(e)&&(e=``),e===`transparent`)return fD;if(e===`currentColor`)e=`black`;else if(e===`none`)return dD;var t=DD(e);if(t)return t;var n=vE(e),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),pD.apply(void 0,r)});function ND(e,t){if(!(!jD(e)||!jD(t)))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(e){var t=e.slice();if(t[3])for(var n=0;n<3;n++)t[n]=Math.round(SS(t[n],0,255));return t[3]=SS(t[3],0,1),`rgba(${t.join(`,`)})`}]}function PD(e,t){if(iS(t))return mD(0,`px`);if(t=`${t}`.trim().toLowerCase(),isFinite(Number(t))){if(`px`.search(e)>=0)return mD(Number(t),`px`);if(`deg`.search(e)>=0)return mD(Number(t),`deg`)}var n=[];t=t.replace(e,function(e){return n.push(e),`U${e}`});var r=`U(${e.source})`;return n.map(function(e){return mD(Number(t.replace(RegExp(`U${e}`,`g`),``).replace(new RegExp(r,`g`),`*0`)),e)})[0]}var FD=function(e){return PD(RegExp(`px`,`g`),e)},ID=LE(FD);LE(function(e){return PD(RegExp(`%`,`g`),e)});var LD=function(e){return K(e)||isFinite(Number(e))?mD(Number(e)||0,`px`):PD(RegExp(`px|%|em|rem`,`g`),e)},RD=LE(LD),zD=function(e){return PD(RegExp(`deg|rad|grad|turn`,`g`),e)},BD=LE(zD);function VD(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=``,o=e.value||0,s=t.value||0,c=tD(e.unit),l=e.convertTo(c),u=t.convertTo(c);return l&&u?(o=l.value,s=u.value,a=JE(e.unit)):(nD.isLength(e.unit)||nD.isLength(t.unit))&&(o=WD(e,i,n),s=WD(t,i,n),a=`px`),[o,s,function(e){return r&&(e=Math.max(e,0)),e+a}]}function HD(e){var t=0;return e.unit===Y.kDegrees?t=e.value:e.unit===Y.kRadians?t=bT(Number(e.value)):e.unit===Y.kTurns?t=xT(Number(e.value)):e.value&&(t=e.value),t}function UD(e,t){var n;return Array.isArray(e)?n=e.map(function(e){return Number(e)}):_S(e)?n=e.split(` `).map(function(e){return Number(e)}):K(e)&&(n=[e]),t===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:t===4?n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:t===`even`&&n.length%2==1?[].concat(Wy(n),Wy(n)):n}function WD(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.unit===Y.kPixels)return Number(e.value);if(e.unit===Y.kPercentage&&n){var i=n.nodeName===q.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2}return 0}var GD=function(e){return PD(/deg|rad|grad|turn|px|%/g,e)},KD=[`blur`,`brightness`,`drop-shadow`,`contrast`,`grayscale`,`sepia`,`saturate`,`hue-rotate`,`invert`];function qD(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:``;if(e=e.toLowerCase().trim(),e===`none`)return[];for(var t=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];if(i=r.index+r[0].length,KD.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(` `).map(function(e){return GD(e)||MD(e)})}),t.lastIndex===e.length)return n}return[]}function JD(e){return e.toString()}var YD=function(e){return typeof e==`number`?mD(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?mD(Number(e)):mD(0)},XD=LE(YD);LE(function(e){return _S(e)?e.split(` `).map(XD):e.map(XD)});function ZD(e,t){return[e,t,JD]}function QD(e,t){return function(n,r){return[n,r,function(n){return JD(SS(n,e,t))}]}}function $D(e,t){if(e.length===t.length)return[e,t,function(e){return e}]}function eO(e){return e.parsedStyle.d.totalLength===0&&(e.parsedStyle.d.totalLength=YC(e.parsedStyle.d.absolutePath)),e.parsedStyle.d.totalLength}function tO(e){return e.parsedStyle.points.totalLength===0&&(e.parsedStyle.points.totalLength=Ow(e.parsedStyle.points.points)),e.parsedStyle.points.totalLength}function nO(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t];if(r[0]===`M`&&n){var i=n[0],a=[r[1],r[2]],o=void 0;i===`L`||i===`M`?o=[n[1],n[2]]:(i===`C`||i===`A`||i===`Q`)&&(o=[n[n.length-2],n[n.length-1]]),o&&aO(a,o)&&(e.splice(t,1),t--)}}}function rO(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if(i===`C`||i===`A`||i===`Q`){t=!0;break}}return t}function iO(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var a=e[i],o=a[0];o===`M`?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):o===`Z`?r.length&&(t.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&n.push(r),{polygons:t,polylines:n}}function aO(e,t){return e[0]===t[0]&&e[1]===t[1]}function oO(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=e[a],s=o.currentPoint,c=o.params,l=o.prePoint,u=void 0;switch(o.command){case`Q`:u=jw(l[0],l[1],c[1],c[2],c[3],c[4]);break;case`C`:u=ww(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6]);break;case`A`:var d=o.arcParams;u=gw(d.cx,d.cy,d.rx,d.ry,d.xRotation,d.startAngle,d.endAngle);break;default:n.push(s[0]),r.push(s[1]);break}u&&(o.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),t&&(o.command===`L`||o.command===`M`)&&o.prePoint&&o.nextPoint&&i.push(o)}n=n.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0}),r=r.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0});var f=hS(n),p=hS(r),m=mS(n),h=mS(r);if(i.length===0)return{x:f,y:p,width:m-f,height:h-p};for(var g=0;g<i.length;g++){var _=i[g],v=_.currentPoint,y=void 0;v[0]===f?(y=sO(_,t),f-=y.xExtra):v[0]===m&&(y=sO(_,t),m+=y.xExtra),v[1]===p?(y=sO(_,t),p-=y.yExtra):v[1]===h&&(y=sO(_,t),h+=y.yExtra)}return{x:f,y:p,width:m-f,height:h-p}}function sO(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=(r[0]-n[0])**2+(r[1]-n[1])**2,o=(r[0]-i[0])**2+(r[1]-i[1])**2,s=(n[0]-i[0])**2+(n[1]-i[1])**2,c=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!c||Math.sin(c)===0||wS(c,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return l=l>Math.PI/2?Math.PI-l:l,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(c/2-l)*(t/2*(1/Math.sin(c/2)))-t/2||0,yExtra:Math.cos(u-c/2)*(t/2*(1/Math.sin(c/2)))-t/2||0}}function cO(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}var lO=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((e.x**2+e.y**2)*(t.x**2+t.y**2));return(e.x*t.y-e.y*t.x<0?-1:1)*Math.acos(n/r)},uO=function(e,t,n,r,i,a,o,s){t=Math.abs(t),n=Math.abs(n),r=DS(r,360);var c=vT(r);if(e.x===o.x&&e.y===o.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var l=(e.x-o.x)/2,u=(e.y-o.y)/2,d={x:Math.cos(c)*l+Math.sin(c)*u,y:-Math.sin(c)*l+Math.cos(c)*u},f=d.x**2/t**2+d.y**2/n**2;f>1&&(t*=Math.sqrt(f),n*=Math.sqrt(f));var p=t**2*n**2-t**2*d.y**2-n**2*d.x**2,m=t**2*d.y**2+n**2*d.x**2,h=p/m;h=h<0?0:h;var g=(i===a?-1:1)*Math.sqrt(h),_={x:g*(t*d.y/n),y:g*(-(n*d.x)/t)},v={x:Math.cos(c)*_.x-Math.sin(c)*_.y+(e.x+o.x)/2,y:Math.sin(c)*_.x+Math.cos(c)*_.y+(e.y+o.y)/2},y={x:(d.x-_.x)/t,y:(d.y-_.y)/n},b=lO({x:1,y:0},y),x={x:(-d.x-_.x)/t,y:(-d.y-_.y)/n},S=lO(y,x);!a&&S>0?S-=2*Math.PI:a&&S<0&&(S+=2*Math.PI),S%=2*Math.PI;var C=b+S*s,w=t*Math.cos(C),T=n*Math.sin(C);return{x:Math.cos(c)*w-Math.sin(c)*T+v.x,y:Math.sin(c)*w+Math.cos(c)*T+v.y,ellipticalArcStartAngle:b,ellipticalArcEndAngle:b+S,ellipticalArcAngle:C,ellipticalArcCenter:v,resultantRx:t,resultantRy:n}};function dO(e){for(var t=[],n=null,r=null,i=null,a=0,o=e.length,s=0;s<o;s++){var c=e[s];r=e[s+1];var l=c[0],u={command:l,prePoint:n,params:c,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case`M`:i=[c[1],c[2]],a=s;break;case`A`:u.arcParams=gO(n,c);break}if(l===`Z`)n=i,r=e[a+1];else{var d=c.length;n=[c[d-2],c[d-1]]}r&&r[0]===`Z`&&(r=e[a],t[a]&&(t[a].prePoint=n)),u.currentPoint=n,t[a]&&aO(n,t[a].currentPoint)&&(t[a].prePoint=u.prePoint),u.nextPoint=r?[r[r.length-2],r[r.length-1]]:null;var f=u.prePoint;if([`L`,`H`,`V`].includes(l))u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]];else if(l===`Q`){var p=[c[1],c[2]];u.startTangent=[f[0]-p[0],f[1]-p[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]]}else if(l===`T`){var m=t[s-1],h=cO(m.currentPoint,f);m.command===`Q`?(u.command=`Q`,u.startTangent=[f[0]-h[0],f[1]-h[1]],u.endTangent=[n[0]-h[0],n[1]-h[1]]):(u.command=`TL`,u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]])}else if(l===`C`){var g=[c[1],c[2]],_=[c[3],c[4]];u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-_[0],n[1]-_[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[g[0]-_[0],g[1]-_[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[_[0]-g[0],_[1]-g[1]])}else if(l===`S`){var v=t[s-1],y=cO(v.currentPoint,f),b=[c[1],c[2]];v.command===`C`?(u.command=`C`,u.startTangent=[f[0]-y[0],f[1]-y[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]]):(u.command=`SQ`,u.startTangent=[f[0]-b[0],f[1]-b[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]])}else if(l===`A`){var x=fO(u,0),S=x.x,C=x.y,w=fO(u,1,!1),T=w.x,E=w.y;u.startTangent=[S,C],u.endTangent=[T,E]}t.push(u)}return t}function fO(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=e.arcParams,i=r.rx,a=i===void 0?0:i,o=r.ry,s=o===void 0?0:o,c=r.xRotation,l=r.arcFlag,u=r.sweepFlag,d=uO({x:e.prePoint[0],y:e.prePoint[1]},a,s,c,!!l,!!u,{x:e.currentPoint[0],y:e.currentPoint[1]},t),f=uO({x:e.prePoint[0],y:e.prePoint[1]},a,s,c,!!l,!!u,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),p=f.x-d.x,m=f.y-d.y,h=Math.sqrt(p*p+m*m);return{x:-p/h,y:-m/h}}function pO(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function mO(e,t){return pO(e)*pO(t)?(e[0]*t[0]+e[1]*t[1])/(pO(e)*pO(t)):1}function hO(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(mO(e,t))}function gO(e,t){var n=t[1],r=t[2],i=DS(vT(t[3]),Math.PI*2),a=t[4],o=t[5],s=e[0],c=e[1],l=t[6],u=t[7],d=Math.cos(i)*(s-l)/2+Math.sin(i)*(c-u)/2,f=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(c-u)/2,p=d*d/(n*n)+f*f/(r*r);p>1&&(n*=Math.sqrt(p),r*=Math.sqrt(p));var m=n*n*(f*f)+r*r*(d*d),h=m?Math.sqrt((n*n*(r*r)-m)/m):1;a===o&&(h*=-1),isNaN(h)&&(h=0);var g=r?h*n*f/r:0,_=n?h*-r*d/n:0,v=(s+l)/2+Math.cos(i)*g-Math.sin(i)*_,y=(c+u)/2+Math.sin(i)*g+Math.cos(i)*_,b=[(d-g)/n,(f-_)/r],x=[(-1*d-g)/n,(-1*f-_)/r],S=hO([1,0],b),C=hO(b,x);return mO(b,x)<=-1&&(C=Math.PI),mO(b,x)>=1&&(C=0),o===0&&C>0&&(C-=2*Math.PI),o===1&&C<0&&(C+=2*Math.PI),{cx:v,cy:y,rx:aO(e,[l,u])?0:n,ry:aO(e,[l,u])?0:r,startAngle:S,endAngle:S+C,xRotation:i,arcFlag:a,sweepFlag:o}}var _O=function(e){if(e===``||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=OC(e)}catch{t=OC(``),console.error(`[g]: Invalid SVG Path definition: ${e}`)}nO(t);var n=rO(t),r=iO(t),i=r.polygons,a=r.polylines,o=dO(t),s=oO(o,0),c=s.x,l=s.y,u=s.width,d=s.height;return{absolutePath:t,hasArc:n,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(c)?c:0,y:Number.isFinite(l)?l:0,width:Number.isFinite(u)?u:0,height:Number.isFinite(d)?d:0}}},vO=LE(_O);function yO(e){return _S(e)?vO(e):_O(e)}function bO(e,t,n){var r=e.curve,i=t.curve;(!r||r.length===0)&&(r=IC(e.absolutePath,!1),e.curve=r),(!i||i.length===0)&&(i=IC(t.absolutePath,!1),t.curve=i);var a=[r,i];r.length!==i.length&&(a=aw(r,i));var o=ew(a[0])===ew(a[1])?LC(a[0]):RC(a[0]);return[o,ZC(a[1],o),function(e){return e}]}function xO(e,t){return{points:_S(e)?e.split(` `).map(function(e){var t=e.split(`,`),n=eb(t,2),r=n[0],i=n[1];return[Number(r),Number(i)]}):e,totalLength:0,segments:[]}}function SO(e,t){return[e.points,t.points,function(e){return e}]}var CO=null,wO=/\s*(\w+)\(([^)]*)\)/g;function TO(e){return function(t){var n=0;return e.map(function(e){return e===CO?t[n++]:e})}}function EO(e){return e}var DO={matrix:[`NNNNNN`,[CO,CO,0,0,CO,CO,0,0,0,0,1,0,CO,CO,0,1],EO],matrix3d:[`NNNNNNNNNNNNNNNN`,EO],rotate:[`A`],rotateX:[`A`],rotateY:[`A`],rotateZ:[`A`],rotate3d:[`NNNA`],perspective:[`L`],scale:[`Nn`,TO([CO,CO,new nD(1)]),EO],scaleX:[`N`,TO([CO,new nD(1),new nD(1)]),TO([CO,new nD(1)])],scaleY:[`N`,TO([new nD(1),CO,new nD(1)]),TO([new nD(1),CO])],scaleZ:[`N`,TO([new nD(1),new nD(1),CO])],scale3d:[`NNN`,EO],skew:[`Aa`,null,EO],skewX:[`A`,null,TO([CO,iD])],skewY:[`A`,null,TO([iD,CO])],translate:[`Tt`,TO([CO,CO,rD]),EO],translateX:[`T`,TO([CO,rD,rD]),TO([CO,rD])],translateY:[`T`,TO([rD,CO,rD]),TO([rD,CO])],translateZ:[`L`,TO([rD,rD,CO])],translate3d:[`TTL`,EO]};function OO(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r],a=i[0],o=i.slice(1);if(a===`translate`||a===`skew`?o.length===1&&o.push(0):a===`scale`&&o.length===1&&o.push(o[0]),!DO[a])return[];var s=o.map(function(e){return mD(e)});t.push({t:a,d:s})}return t}function kO(e){if(Array.isArray(e))return OO(e);if(e=(e||`none`).trim(),e===`none`)return[];var t=[],n,r=0;for(wO.lastIndex=0;n=wO.exec(e);){if(n.index!==r)return[];r=n.index+n[0].length;var i=n[1],a=DO[i];if(!a)return[];var o=n[2].split(`,`),s=a[0];if(s.length<o.length)return[];for(var c=[],l=0;l<s.length;l++){var u=o[l],d=s[l],f=void 0;if(f=u?{A:function(e){return e.trim()===`0`?iD:BD(e)},N:XD,T:RD,L:ID}[d.toUpperCase()](u):{a:iD,n:c[0],t:rD}[d],f===void 0)return[];c.push(f)}if(t.push({t:i,d:c}),wO.lastIndex===e.length)return t}return[]}function AO(e){if(Array.isArray(e))return OO(e);if(e=(e||`none`).trim(),e===`none`)return[];var t=[],n,r=0;for(wO.lastIndex=0;n=wO.exec(e);){if(n.index!==r)return[];r=n.index+n[0].length;var i=n[1],a=DO[i];if(!a)return[];var o=n[2].split(`,`),s=a[0];if(s.length<o.length)return[];for(var c=[],l=0;l<s.length;l++){var u=o[l],d=s[l],f=void 0;if(f=u?{A:function(e){return e.trim()===`0`?iD:zD(e)},N:YD,T:LD,L:FD}[d.toUpperCase()](u):{a:iD,n:c[0],t:rD}[d],f===void 0)return[];c.push(f)}if(t.push({t:i,d:c}),wO.lastIndex===e.length)return t}return[]}function jO(e){var t,n,r,i;switch(e.t){case`rotateX`:return i=vT(HD(e.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case`rotateY`:return i=vT(HD(e.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case`rotate`:case`rotateZ`:return i=vT(HD(e.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case`rotate3d`:t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=vT(HD(e.d[3]));var a=t*t+n*n+r*r;if(a===0)t=1,n=0,r=0;else if(a!==1){var o=Math.sqrt(a);t/=o,n/=o,r/=o}var s=Math.sin(i/2),c=s*Math.cos(i/2),l=s*s;return[1-2*(n*n+r*r)*l,2*(t*n*l+r*c),2*(t*r*l-n*c),0,2*(t*n*l-r*c),1-2*(t*t+r*r)*l,2*(n*r*l+t*c),0,2*(t*r*l+n*c),2*(n*r*l-t*c),1-2*(t*t+n*n)*l,0,0,0,0,1];case`scale`:return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case`scaleX`:return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case`scaleY`:return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case`scaleZ`:return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case`scale3d`:return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case`skew`:var u=vT(HD(e.d[0])),d=vT(HD(e.d[1]));return[1,Math.tan(d),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case`skewX`:return i=vT(HD(e.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case`skewY`:return i=vT(HD(e.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case`translate`:return t=WD(e.d[0],0,null)||0,n=WD(e.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,0,1];case`translateX`:return t=WD(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1];case`translateY`:return n=WD(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case`translateZ`:return r=WD(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case`translate3d`:return t=WD(e.d[0],0,null)||0,n=WD(e.d[1],0,null)||0,r=WD(e.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1];case`perspective`:var f=WD(e.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,f?-1/f:0,0,0,0,1];case`matrix`:return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case`matrix3d`:return e.d.map(function(e){return e.value})}}function MO(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function NO(e){return e.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(jO).reduce(MO)}function PO(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return PT(NO(e),t,n,r,i,a),[[t,n,r,a,i]]}var FO=function(){function e(e,t){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var a=0;a<4;a++)n[r][i]+=t[r][a]*e[a][i];return n}function t(e){return e[0][2]===0&&e[0][3]===0&&e[1][2]===0&&e[1][3]===0&&e[2][0]===0&&e[2][1]===0&&e[2][2]===1&&e[2][3]===0&&e[3][2]===0&&e[3][3]===1}function n(n,r,i,a,o){for(var s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],c=0;c<4;c++)s[c][3]=o[c];for(var l=0;l<3;l++)for(var u=0;u<3;u++)s[3][l]+=n[u]*s[u][l];var d=a[0],f=a[1],p=a[2],m=a[3],h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];h[0][0]=1-2*(f*f+p*p),h[0][1]=2*(d*f-p*m),h[0][2]=2*(d*p+f*m),h[1][0]=2*(d*f+p*m),h[1][1]=1-2*(d*d+p*p),h[1][2]=2*(f*p-d*m),h[2][0]=2*(d*p-f*m),h[2][1]=2*(f*p+d*m),h[2][2]=1-2*(d*d+f*f),s=e(s,h);var g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];i[2]&&(g[2][1]=i[2],s=e(s,g)),i[1]&&(g[2][1]=0,g[2][0]=i[0],s=e(s,g)),i[0]&&(g[2][0]=0,g[1][0]=i[0],s=e(s,g));for(var _=0;_<3;_++)for(var v=0;v<3;v++)s[_][v]*=r[_];return t(s)?[s[0][0],s[0][1],s[1][0],s[1][1],s[3][0],s[3][1]]:s[0].concat(s[1],s[2],s[3])}return n}();function IO(e){return e.toFixed(6).replace(`.000000`,``)}function LO(e,t){var n,r;return e.decompositionPair!==t&&(e.decompositionPair=t,n=PO(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=PO(t)),n[0]===null||r[0]===null?[[!1],[!0],function(n){return n?t[0].d:e[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(e){var t=zO(n[0][3],r[0][3],e[5]);return FO(e[0],e[1],e[2],t,e[4]).map(IO).join(`,`)}])}function RO(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function zO(e,t,n){var r=RO(e,t);r=SS(r,-1,1);var i=[];if(r===1)i=e;else for(var a=Math.acos(r),o=Math.sin(n*a)*1/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(e[s]*(Math.cos(n*a)-r*o)+t[s]*o);return i}function BO(e){return e.replace(/[XY]/,``)}function VO(e){return e.replace(/(X|Y|Z|3d)?$/,`3d`)}var HO=function(e,t){return e===`perspective`&&t===`perspective`||(e===`matrix`||e===`matrix3d`)&&(t===`matrix`||t===`matrix3d`)};function UO(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=function(){var n=e[a],r=n.t,i=n.d,o=r.substring(0,5)===`scale`?1:0;t.push({t:r,d:i.map(function(e){return typeof e==`number`?mD(o):mD(o,e.unit)})})},a=0;a<e.length;a++)i()}var o=[],s=[],c=[];if(e.length!==t.length){var l=LO(e,t);o=[l[0]],s=[l[1]],c=[[`matrix`,[l[2]]]]}else for(var u=0;u<e.length;u++){var d=e[u].t,f=t[u].t,p=e[u].d,m=t[u].d,h=DO[d],g=DO[f],_=void 0;if(HO(d,f)){var v=LO([e[u]],[t[u]]);o.push(v[0]),s.push(v[1]),c.push([`matrix`,[v[2]]]);continue}else if(d===f)_=d;else if(h[2]&&g[2]&&BO(d)===BO(f))_=BO(d),p=h[2](p),m=g[2](m);else if(h[1]&&g[1]&&VO(d)===VO(f))_=VO(d),p=h[1](p),m=g[1](m);else{var y=LO(e,t);o=[y[0]],s=[y[1]],c=[[`matrix`,[y[2]]]];break}for(var b=[],x=[],S=[],C=0;C<p.length;C++){var w=VD(p[C],m[C],n,!1,C);b[C]=w[0],x[C]=w[1],S.push(w[2])}o.push(b),s.push(x),c.push([_,S])}if(r){var T=o;o=s,s=T}return[o,s,function(e){return e.map(function(e,t){var n=e.map(function(e,n){return c[t][1][n](e)}).join(`,`);return c[t][0]===`matrix`&&n.split(`,`).length===16&&(c[t][0]=`matrix3d`),c[t][0]===`matrix3d`&&n.split(`,`).length===6&&(c[t][0]=`matrix`),`${c[t][0]}(${n})`}).join(` `)}]}var WO=LE(function(e){if(_S(e)){if(e===`text-anchor`)return[mD(0,`px`),mD(0,`px`)];var t=e.split(` `);return t.length===1&&(t[0]===`top`||t[0]===`bottom`?(t[1]=t[0],t[0]=`center`):t[1]=`center`),t.length===2?[RD(GO(t[0])),RD(GO(t[1]))]:null}return[mD(e[0]||0,`px`),mD(e[1]||0,`px`)]});function GO(e){return e===`center`?`50%`:e===`left`||e===`top`?`0%`:e===`right`||e===`bottom`?`100%`:e}var KO=[{n:`display`,k:[`none`]},{n:`opacity`,int:!0,inh:!0,d:`1`,syntax:J.OPACITY_VALUE},{n:`fillOpacity`,int:!0,inh:!0,d:`1`,syntax:J.OPACITY_VALUE},{n:`strokeOpacity`,int:!0,inh:!0,d:`1`,syntax:J.OPACITY_VALUE},{n:`fill`,int:!0,k:[`none`],d:`none`,syntax:J.PAINT},{n:`fillRule`,k:[`nonzero`,`evenodd`],d:`nonzero`},{n:`stroke`,int:!0,k:[`none`],d:`none`,syntax:J.PAINT,l:!0},{n:`shadowType`,k:[`inner`,`outer`,`both`],d:`outer`,l:!0},{n:`shadowColor`,int:!0,syntax:J.COLOR},{n:`shadowOffsetX`,int:!0,l:!0,d:`0`,syntax:J.LENGTH_PERCENTAGE},{n:`shadowOffsetY`,int:!0,l:!0,d:`0`,syntax:J.LENGTH_PERCENTAGE},{n:`shadowBlur`,int:!0,l:!0,d:`0`,syntax:J.SHADOW_BLUR},{n:`lineWidth`,int:!0,inh:!0,d:`1`,l:!0,a:[`strokeWidth`],syntax:J.LENGTH_PERCENTAGE},{n:`increasedLineWidthForHitTesting`,inh:!0,d:`0`,l:!0,syntax:J.LENGTH_PERCENTAGE},{n:`lineJoin`,inh:!0,l:!0,a:[`strokeLinejoin`],k:[`miter`,`bevel`,`round`],d:`miter`},{n:`lineCap`,inh:!0,l:!0,a:[`strokeLinecap`],k:[`butt`,`round`,`square`],d:`butt`},{n:`lineDash`,int:!0,inh:!0,k:[`none`],a:[`strokeDasharray`],syntax:J.LENGTH_PERCENTAGE_12},{n:`lineDashOffset`,int:!0,inh:!0,d:`0`,a:[`strokeDashoffset`],syntax:J.LENGTH_PERCENTAGE},{n:`offsetPath`,syntax:J.DEFINED_PATH},{n:`offsetDistance`,int:!0,syntax:J.OFFSET_DISTANCE},{n:`dx`,int:!0,l:!0,d:`0`,syntax:J.LENGTH_PERCENTAGE},{n:`dy`,int:!0,l:!0,d:`0`,syntax:J.LENGTH_PERCENTAGE},{n:`zIndex`,ind:!0,int:!0,d:`0`,k:[`auto`],syntax:J.Z_INDEX},{n:`visibility`,k:[`visible`,`hidden`],ind:!0,inh:!0,int:!0,d:`visible`},{n:`pointerEvents`,inh:!0,k:[`none`,`auto`,`stroke`,`fill`,`painted`,`visible`,`visiblestroke`,`visiblefill`,`visiblepainted`,`all`],d:`auto`},{n:`filter`,ind:!0,l:!0,k:[`none`],d:`none`,syntax:J.FILTER},{n:`clipPath`,syntax:J.DEFINED_PATH},{n:`textPath`,syntax:J.DEFINED_PATH},{n:`textPathSide`,k:[`left`,`right`],d:`left`},{n:`textPathStartOffset`,l:!0,d:`0`,syntax:J.LENGTH_PERCENTAGE},{n:`transform`,p:100,int:!0,k:[`none`],d:`none`,syntax:J.TRANSFORM},{n:`transformOrigin`,p:100,d:`0 0`,l:!0,syntax:J.TRANSFORM_ORIGIN},{n:`cx`,int:!0,l:!0,d:`0`,syntax:J.COORDINATE},{n:`cy`,int:!0,l:!0,d:`0`,syntax:J.COORDINATE},{n:`cz`,int:!0,l:!0,d:`0`,syntax:J.COORDINATE},{n:`r`,int:!0,l:!0,d:`0`,syntax:J.LENGTH_PERCENTAGE},{n:`rx`,int:!0,l:!0,d:`0`,syntax:J.LENGTH_PERCENTAGE},{n:`ry`,int:!0,l:!0,d:`0`,syntax:J.LENGTH_PERCENTAGE},{n:`x`,int:!0,l:!0,d:`0`,syntax:J.COORDINATE},{n:`y`,int:!0,l:!0,d:`0`,syntax:J.COORDINATE},{n:`z`,int:!0,l:!0,d:`0`,syntax:J.COORDINATE},{n:`width`,int:!0,l:!0,k:[`auto`,`fit-content`,`min-content`,`max-content`],d:`0`,syntax:J.LENGTH_PERCENTAGE},{n:`height`,int:!0,l:!0,k:[`auto`,`fit-content`,`min-content`,`max-content`],d:`0`,syntax:J.LENGTH_PERCENTAGE},{n:`radius`,int:!0,l:!0,d:`0`,syntax:J.LENGTH_PERCENTAGE_14},{n:`x1`,int:!0,l:!0,syntax:J.COORDINATE},{n:`y1`,int:!0,l:!0,syntax:J.COORDINATE},{n:`z1`,int:!0,l:!0,syntax:J.COORDINATE},{n:`x2`,int:!0,l:!0,syntax:J.COORDINATE},{n:`y2`,int:!0,l:!0,syntax:J.COORDINATE},{n:`z2`,int:!0,l:!0,syntax:J.COORDINATE},{n:`d`,int:!0,l:!0,d:``,syntax:J.PATH,p:50},{n:`points`,int:!0,l:!0,syntax:J.LIST_OF_POINTS,p:50},{n:`text`,l:!0,d:``,syntax:J.TEXT,p:50},{n:`textTransform`,l:!0,inh:!0,k:[`capitalize`,`uppercase`,`lowercase`,`none`],d:`none`,syntax:J.TEXT_TRANSFORM,p:51},{n:`font`,l:!0},{n:`fontSize`,int:!0,inh:!0,d:`16px`,l:!0,syntax:J.LENGTH_PERCENTAGE},{n:`fontFamily`,l:!0,inh:!0,d:`sans-serif`},{n:`fontStyle`,l:!0,inh:!0,k:[`normal`,`italic`,`oblique`],d:`normal`},{n:`fontWeight`,l:!0,inh:!0,k:[`normal`,`bold`,`bolder`,`lighter`],d:`normal`},{n:`fontVariant`,l:!0,inh:!0,k:[`normal`,`small-caps`],d:`normal`},{n:`lineHeight`,l:!0,syntax:J.LENGTH,int:!0,d:`0`},{n:`letterSpacing`,l:!0,syntax:J.LENGTH,int:!0,d:`0`},{n:`miterLimit`,l:!0,syntax:J.NUMBER,d:function(e){return e===q.PATH||e===q.POLYGON||e===q.POLYLINE?`4`:`10`}},{n:`wordWrap`,l:!0},{n:`wordWrapWidth`,l:!0},{n:`maxLines`,l:!0},{n:`textOverflow`,l:!0,d:`clip`},{n:`leading`,l:!0},{n:`textBaseline`,l:!0,inh:!0,k:[`top`,`hanging`,`middle`,`alphabetic`,`ideographic`,`bottom`],d:`alphabetic`},{n:`textAlign`,l:!0,inh:!0,k:[`start`,`center`,`middle`,`end`,`left`,`right`],d:`start`},{n:`markerStart`,syntax:J.MARKER},{n:`markerEnd`,syntax:J.MARKER},{n:`markerMid`,syntax:J.MARKER},{n:`markerStartOffset`,syntax:J.LENGTH,l:!0,int:!0,d:`0`},{n:`markerEndOffset`,syntax:J.LENGTH,l:!0,int:!0,d:`0`}],qO=new Set(KO.filter(function(e){return!!e.l}).map(function(e){return e.n})),JO={},YO=function(){function e(t){var n=this;W(this,e),this.runtime=t,KO.forEach(function(e){n.registerMetadata(e)})}return G(e,[{key:`registerMetadata`,value:function(e){[e.n].concat(Wy(e.a||[])).forEach(function(t){JO[t]=e})}},{key:`getPropertySyntax`,value:function(e){return this.runtime.CSSPropertySyntaxFactory[e]}},{key:`processProperties`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(e.attributes,t);var r=e.parsedStyle.clipPath,i=e.parsedStyle.offsetPath;XO(e,t);var a=!!n.forceUpdateGeometry;if(!a){for(var o in t)if(qO.has(o)){a=!0;break}}var s=ZO(e);s.has(`fill`)&&t.fill&&(e.parsedStyle.fill=MD(t.fill)),s.has(`stroke`)&&t.stroke&&(e.parsedStyle.stroke=MD(t.stroke)),s.has(`shadowColor`)&&t.shadowColor&&(e.parsedStyle.shadowColor=MD(t.shadowColor)),s.has(`filter`)&&t.filter&&(e.parsedStyle.filter=qD(t.filter)),s.has(`radius`)&&!iS(t.radius)&&(e.parsedStyle.radius=UD(t.radius,4)),s.has(`lineDash`)&&!iS(t.lineDash)&&(e.parsedStyle.lineDash=UD(t.lineDash,`even`)),s.has(`points`)&&t.points&&(e.parsedStyle.points=xO(t.points)),s.has(`d`)&&t.d===``&&(e.parsedStyle.d=Ly({},ZT)),s.has(`d`)&&t.d&&(e.parsedStyle.d=yO(t.d)),s.has(`textTransform`)&&t.textTransform&&this.runtime.CSSPropertySyntaxFactory[J.TEXT_TRANSFORM].calculator(null,null,{value:t.textTransform},e,null),s.has(`clipPath`)&&!BS(t.clipPath)&&this.runtime.CSSPropertySyntaxFactory[J.DEFINED_PATH].calculator(`clipPath`,r,t.clipPath,e,this.runtime),s.has(`offsetPath`)&&t.offsetPath&&this.runtime.CSSPropertySyntaxFactory[J.DEFINED_PATH].calculator(`offsetPath`,i,t.offsetPath,e,this.runtime),s.has(`transform`)&&t.transform&&(e.parsedStyle.transform=kO(t.transform)),s.has(`transformOrigin`)&&t.transformOrigin&&(e.parsedStyle.transformOrigin=WO(t.transformOrigin)),s.has(`markerStart`)&&t.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[J.MARKER].calculator(null,t.markerStart,t.markerStart,null,null)),s.has(`markerEnd`)&&t.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[J.MARKER].calculator(null,t.markerEnd,t.markerEnd,null,null)),s.has(`markerMid`)&&t.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[J.MARKER].calculator(``,t.markerMid,t.markerMid,null,null)),s.has(`zIndex`)&&!iS(t.zIndex)&&this.runtime.CSSPropertySyntaxFactory[J.Z_INDEX].postProcessor(e),s.has(`offsetDistance`)&&!iS(t.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[J.OFFSET_DISTANCE].postProcessor(e),s.has(`transform`)&&t.transform&&this.runtime.CSSPropertySyntaxFactory[J.TRANSFORM].postProcessor(e),s.has(`transformOrigin`)&&t.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[J.TRANSFORM_ORIGIN].postProcessor(e),a&&(e.geometry.dirty=!0,e.dirty(!0,!0),n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(e))}},{key:`updateGeometry`,value:function(e){var t=e.nodeName,n=this.runtime.geometryUpdaterFactory[t];if(n){var r=e.geometry;r.contentBounds||=new aT,r.renderBounds||=new aT;var i=e.parsedStyle,a=n.update(i,e),o=a.cx,s=o===void 0?0:o,c=a.cy,l=c===void 0?0:c,u=a.cz,d=u===void 0?0:u,f=a.hwidth,p=f===void 0?0:f,m=a.hheight,h=m===void 0?0:m,g=a.hdepth,_=g===void 0?0:g,v=[Math.abs(p),Math.abs(h),_],y=i.stroke,b=i.lineWidth,x=b===void 0?1:b,S=i.increasedLineWidthForHitTesting,C=S===void 0?0:S,w=i.shadowType,T=w===void 0?`outer`:w,E=i.shadowColor,D=i.filter,O=D===void 0?[]:D,k=i.transformOrigin,A=[s,l,d];r.contentBounds.update(A,v);var j=t===q.POLYLINE||t===q.POLYGON||t===q.PATH?Math.SQRT2:.5;if(y&&!y.isNone){var M=((x||0)+(C||0))*j;v[0]+=M,v[1]+=M}if(r.renderBounds.update(A,v),E&&T&&T!==`inner`){var ee=r.renderBounds,N=ee.min,te=ee.max,ne=i.shadowBlur,re=i.shadowOffsetX,P=i.shadowOffsetY,F=ne||0,I=re||0,ie=P||0,ae=N[0]-F+I,L=te[0]+F+I,oe=N[1]-F+ie,se=te[1]+F+ie;N[0]=Math.min(N[0],ae),te[0]=Math.max(te[0],L),N[1]=Math.min(N[1],oe),te[1]=Math.max(te[1],se),r.renderBounds.setMinMax(N,te)}O.forEach(function(e){var t=e.name,n=e.params;if(t===`blur`){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,dx(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]))}else if(t===`drop-shadow`){var a=n[0].value,o=n[1].value,s=n[2].value,c=r.renderBounds,l=c.min,u=c.max,d=l[0]-s+a,f=u[0]+s+a,p=l[1]-s+o,m=u[1]+s+o;l[0]=Math.min(l[0],d),u[0]=Math.max(u[0],f),l[1]=Math.min(l[1],p),u[1]=Math.max(u[1],m),r.renderBounds.setMinMax(l,u)}}),e.geometry.dirty=!1;var ce=p<0,le=h<0,ue=(ce?-1:1)*(k?WD(k[0],0,e,!0):0),de=(le?-1:1)*(k?WD(k[1],1,e,!0):0);(ue||de)&&e.setOrigin(ue,de)}}},{key:`updateSizeAttenuation`,value:function(e,t){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/t,e.nodeName===q.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/t)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===q.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR))}}])}();function XO(e,t){var n=ZO(e);for(var r in t)n.has(r)&&(e.parsedStyle[r]=t[r])}function ZO(e){return e.constructor.PARSED_STYLE_LIST}var QO=function(){function e(){W(this,e),this.mixer=ZD}return G(e,[{key:`calculator`,value:function(e,t,n,r){return HD(n)}}])}(),$O=function(){function e(){W(this,e)}return G(e,[{key:`calculator`,value:function(e,t,n,r,i){return n instanceof $E&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(e,t,n,r),e===`clipPath`&&r.forEach(function(e){e.childNodes.length===0&&i.sceneGraphService.dirtyToRoot(e)}),n}}])}(),ek=function(){function e(){W(this,e),this.parser=MD,this.mixer=ND}return G(e,[{key:`calculator`,value:function(e,t,n,r){return n instanceof $E?n.value===`none`?dD:fD:n}}])}(),tk=function(){function e(){W(this,e)}return G(e,[{key:`calculator`,value:function(e,t,n){return n instanceof $E?[]:n}}])}();function nk(e){var t=e.parsedStyle,n=t.fontSize;return iS(n)?null:n}var rk=function(){function e(){W(this,e),this.mixer=ZD}return G(e,[{key:`calculator`,value:function(e,t,n,r,i){if(K(n))return n;if(nD.isRelativeUnit(n.unit)){if(n.unit===Y.kPercentage)return 0;if(n.unit===Y.kEms){if(r.parentNode){var a=nk(r.parentNode);if(a)return a*=n.value,a}return 0}if(n.unit===Y.kRems){var o;if(r!=null&&(o=r.ownerDocument)!=null&&o.documentElement){var s=nk(r.ownerDocument.documentElement);if(s)return s*=n.value,s}return 0}}else return n.value}}])}(),ik=function(){function e(){W(this,e),this.mixer=$D}return G(e,[{key:`calculator`,value:function(e,t,n){return n.map(function(e){return e.value})}}])}(),ak=function(){function e(){W(this,e),this.mixer=$D}return G(e,[{key:`calculator`,value:function(e,t,n){return n.map(function(e){return e.value})}}])}(),ok=function(){function e(){W(this,e)}return G(e,[{key:`calculator`,value:function(e,t,n,r){n instanceof $E&&(n=null);var i=n?.cloneNode(!0);return i&&(i.style.isMarker=!0),i}}])}(),sk=function(){function e(){W(this,e),this.mixer=ZD}return G(e,[{key:`calculator`,value:function(e,t,n){return n.value}}])}(),ck=function(){function e(){W(this,e),this.mixer=QD(0,1)}return G(e,[{key:`calculator`,value:function(e,t,n){return n.value}},{key:`postProcessor`,value:function(e){var t=e.parsedStyle,n=t.offsetPath,r=t.offsetDistance;if(n){var i=n.nodeName;if(i===q.LINE||i===q.PATH||i===q.POLYLINE){var a=n.getPoint(r);a&&e.setLocalPosition(a.x,a.y)}}}}])}(),lk=function(){function e(){W(this,e),this.mixer=QD(0,1)}return G(e,[{key:`calculator`,value:function(e,t,n){return n.value}}])}(),uk=function(){function e(){W(this,e),this.parser=yO,this.mixer=bO}return G(e,[{key:`calculator`,value:function(e,t,n){return n instanceof $E&&n.value===`unset`?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new uT(0,0,0,0)}:n}}])}(),dk=G(function e(){W(this,e),this.mixer=SO}),fk=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.mixer=QD(0,1/0),e}return Zy(t,e),G(t)}(rk),pk=function(){function e(){W(this,e)}return G(e,[{key:`calculator`,value:function(e,t,n,r){return n instanceof $E?n.value===`unset`?``:n.value:`${n}`}},{key:`postProcessor`,value:function(e){e.nodeValue=`${e.parsedStyle.text}`||``}}])}(),mk=function(){function e(){W(this,e)}return G(e,[{key:`calculator`,value:function(e,t,n,r){var i=r.getAttribute(`text`);if(i){var a=i;n.value===`capitalize`?a=i.charAt(0).toUpperCase()+i.slice(1):n.value===`lowercase`?a=i.toLowerCase():n.value===`uppercase`&&(a=i.toUpperCase()),r.parsedStyle.text=a}return n.value}}])}(),hk=new WeakMap;function gk(e,t,n){if(e){var r=typeof e==`string`?document.getElementById(e):e;hk.has(r)&&hk.get(r).destroy(n),hk.set(r,t)}}var _k=typeof window<`u`&&window.document!==void 0;function vk(e){return!!e.getAttribute}function yk(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;bk(e[i],t)<0?n=i+1:r=i}return n}function bk(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(e)-a.indexOf(t)}}return n-r}function xk(e){var t=e;do{if(t.parsedStyle?.clipPath)return t;t=t.parentElement}while(t!==null);return null}var Sk=`px`;function Ck(e,t,n){_k&&e.style&&(e.style.width=t+Sk,e.style.height=n+Sk)}function wk(e,t){if(_k)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function Tk(e){var t=wk(e,`width`);return t===`auto`?e.offsetWidth:parseFloat(t)}function Ek(e){var t=wk(e,`height`);return t===`auto`?e.offsetHeight:parseFloat(t)}var Dk=1,Ok={touchstart:`pointerdown`,touchend:`pointerup`,touchendoutside:`pointerupoutside`,touchmove:`pointermove`,touchcancel:`pointercancel`},kk=typeof performance==`object`&&performance.now?performance:Date;function Ak(e){return e.nodeName===q.FRAGMENT?!0:e.getRootNode().nodeName===q.FRAGMENT}function jk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:`auto`,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,a=!!t&&!t.isNone,o=!!n&&!n.isNone;return e===`visiblepainted`||e===`painted`||e===`auto`?(r=a,i=o):e===`visiblefill`||e===`fill`?r=!0:e===`visiblestroke`||e===`stroke`?i=!0:(e===`visible`||e===`all`)&&(r=!0,i=!0),[r,i]}var Mk=1,Nk=function(){return Mk++},Pk=typeof self==`object`&&self.self===self?self:typeof global==`object`&&global.global===global?global:{},Fk=Date.now(),Ik=function(){return Pk.performance&&typeof Pk.performance.now==`function`?Pk.performance.now():Date.now()-Fk},Lk={},Rk=Date.now(),zk=function(e){if(typeof e!=`function`)throw TypeError(`${e} is not a function`);var t=Date.now(),n=t-Rk,r=n>16?0:16-n,i=Nk();return Lk[i]=e,Object.keys(Lk).length>1||setTimeout(function(){Rk=t;var e=Lk;Lk={},Object.keys(e).forEach(function(t){return e[t](Ik())})},r),i},Bk=function(e){delete Lk[e]},Vk=[``,`webkit`,`moz`,`ms`,`o`],Hk=function(e){return typeof e==`string`?e===``?Pk.requestAnimationFrame:Pk[`${e}RequestAnimationFrame`]:zk},Uk=function(e){return typeof e==`string`?e===``?Pk.cancelAnimationFrame:Pk[`${e}CancelAnimationFrame`]||Pk[`${e}CancelRequestAnimationFrame`]:Bk},Wk=function(e,t){for(var n=0;e[n]!==void 0;){if(t(e[n]))return e[n];n+=1}}(Vk,function(e){return!!Hk(e)}),Gk=Hk(Wk),Kk=Uk(Wk);Pk.requestAnimationFrame=Gk,Pk.cancelAnimationFrame=Kk;var qk=function(){function e(){W(this,e),this.callbacks=[]}return G(e,[{key:`getCallbacksNum`,value:function(){return this.callbacks.length}},{key:`tapPromise`,value:function(e,t){this.callbacks.push(t)}},{key:`promise`,value:function(){var e=[...arguments];return Promise.all(this.callbacks.map(function(t){return t.apply(void 0,e)}))}}])}(),Jk=function(){function e(){W(this,e),this.callbacks=[]}return G(e,[{key:`tapPromise`,value:function(e,t){this.callbacks.push(t)}},{key:`promise`,value:function(){var e=Ww(Hw().mark(function e(){var t,n,r,i,a=arguments;return Hw().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callbacks.length){e.next=6;break}return e.next=1,(t=this.callbacks)[0].apply(t,a);case 1:n=e.sent,r=0;case 2:if(!(r<this.callbacks.length-1)){e.next=5;break}return i=this.callbacks[r],e.next=3,i(n);case 3:n=e.sent;case 4:r++,e.next=2;break;case 5:return e.abrupt(`return`,n);case 6:return e.abrupt(`return`,null);case 7:case`end`:return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}])}(),Yk=function(){function e(){W(this,e),this.callbacks=[]}return G(e,[{key:`tap`,value:function(e,t){this.callbacks.push(t)}},{key:`call`,value:function(){var e=arguments;this.callbacks.forEach(function(t){t.apply(void 0,e)})}}])}(),Xk=function(){function e(){W(this,e),this.callbacks=[]}return G(e,[{key:`tap`,value:function(e,t){this.callbacks.push(t)}},{key:`call`,value:function(){if(this.callbacks.length){for(var e=arguments,t=this.callbacks[0].apply(void 0,e),n=0;n<this.callbacks.length-1;n++){var r=this.callbacks[n];t=r(t)}return t}return null}}])}(),Zk=[`serif`,`sans-serif`,`monospace`,`cursive`,`fantasy`,`system-ui`],Qk=/([\"\'])[^\'\"]+\1/;function $k(e){var t=e.fontSize,n=t===void 0?16:t,r=e.fontFamily,i=r===void 0?`sans-serif`:r,a=e.fontStyle,o=a===void 0?`normal`:a,s=e.fontVariant,c=s===void 0?`normal`:s,l=e.fontWeight;return{fontSize:n,fontFamily:i,fontStyle:o,fontVariant:c,fontWeight:l===void 0?`normal`:l}}var eA=LE(function(e){for(var t=$k(e),n=t.fontSize,r=t.fontFamily,i=t.fontStyle,a=t.fontVariant,o=t.fontWeight,s=K(n)&&`${n}px`||`16px`,c=r.split(`,`),l=c.length-1;l>=0;l--){var u=c[l].trim();!Qk.test(u)&&Zk.indexOf(u)<0&&(u=`"${u}"`),c[l]=u}return`${i} ${a} ${o} ${s} ${c.join(`,`)}`},function(e){var t=$k(e),n=t.fontSize,r=t.fontFamily,i=t.fontStyle,a=t.fontVariant,o=t.fontWeight;return`${i}_${a}_${o}_${n}_${r}`}),tA=1e-6,nA=function(e){return Math.max(e,tA)};function rA(e,t,n){return fb(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e}var iA=sb(),aA=sb(),oA={scale:function(e){Tb(iA,[e[0].value,e[1].value,1].map(function(e){return nA(e)}))},scaleX:function(e){Tb(iA,[e[0].value,1,1].map(function(e){return nA(e)}))},scaleY:function(e){Tb(iA,[1,e[0].value,1].map(function(e){return nA(e)}))},scaleZ:function(e){Tb(iA,[1,1,e[0].value].map(function(e){return nA(e)}))},scale3d:function(e){Tb(iA,[e[0].value,e[1].value,e[2].value].map(function(e){return nA(e)}))},translate:function(e){wb(iA,[e[0].value,e[1].value,0])},translateX:function(e){wb(iA,[e[0].value,0,0])},translateY:function(e){wb(iA,[0,e[0].value,0])},translateZ:function(e){wb(iA,[0,0,e[0].value])},translate3d:function(e){wb(iA,[e[0].value,e[1].value,e[2].value])},rotate:function(e){kb(iA,vT(HD(e[0])))},rotateX:function(e){Db(iA,vT(HD(e[0])))},rotateY:function(e){Ob(iA,vT(HD(e[0])))},rotateZ:function(e){kb(iA,vT(HD(e[0])))},rotate3d:function(e){Eb(iA,vT(HD(e[3])),[e[0].value,e[1].value,e[2].value])},skew:function(e){rA(iA,vT(e[0].value),vT(e[1].value))},skewX:function(e){rA(iA,vT(e[0].value),0)},skewY:function(e){rA(iA,0,vT(e[0].value))},matrix:function(e){db(iA,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1)},matrix3d:function(e){db.apply(ob,[iA].concat(Wy(e.map(function(e){return e.value}))))}},sA=cx(1,1,1),cA=ax(),lA={translate:function(e,t){X.sceneGraphService.setLocalScale(e,sA,!1),X.sceneGraphService.setLocalEulerAngles(e,cA,void 0,void 0,!1),X.sceneGraphService.setLocalPosition(e,[t[0].value,t[1].value,0],!1),X.sceneGraphService.dirtyLocalTransform(e,e.transformable)}};function uA(e,t){if(e.length){if(e.length===1&&lA[e[0].t]){lA[e[0].t](t,e[0].d);return}for(var n=fb(aA),r=0;r<e.length;r++){var i=e[r],a=i.t,o=i.d,s=oA[a];s&&(s(o),rx(n,n,iA))}t.setLocalTransform(n)}else t.resetLocalTransform();return t.getLocalTransform()}var dA=function(){function e(){W(this,e),this.parser=AO,this.mixer=UO}return G(e,[{key:`calculator`,value:function(e,t,n,r){return n instanceof $E?[]:n}},{key:`postProcessor`,value:function(e){uA(e.parsedStyle.transform,e)}}])}(),fA=function(){function e(){W(this,e)}return G(e,[{key:`postProcessor`,value:function(e){var t=e.parsedStyle.transformOrigin;t[0].unit===Y.kPixels&&t[1].unit===Y.kPixels?e.setOrigin(t[0].value,t[1].value):e.getGeometryBounds()}}])}(),pA=function(){function e(){W(this,e)}return G(e,[{key:`calculator`,value:function(e,t,n,r){return n.value}},{key:`postProcessor`,value:function(e){if(e.parentNode){var t=e.parentNode,n=t.renderable,r=t.sortable;n&&t.dirty(),r&&(r.dirty=!0,r.dirtyReason=GT.Z_INDEX_CHANGED)}}}])}(),mA=function(){function e(){W(this,e)}return G(e,[{key:`update`,value:function(e,t){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.r,s=o===void 0?0:o;return{cx:r,cy:a,hwidth:s,hheight:s}}}])}(),hA=function(){function e(){W(this,e)}return G(e,[{key:`update`,value:function(e,t){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.rx,s=o===void 0?0:o,c=e.ry;return{cx:r,cy:a,hwidth:s,hheight:c===void 0?0:c}}}])}(),gA=function(){function e(){W(this,e)}return G(e,[{key:`update`,value:function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=Math.min(t,r),o=Math.max(t,r),s=Math.min(n,i),c=Math.max(n,i),l=o-a,u=c-s,d=l/2,f=u/2;return{cx:a+d,cy:s+f,hwidth:d,hheight:f}}}])}(),_A=function(){function e(){W(this,e)}return G(e,[{key:`update`,value:function(e){var t=e.d.rect,n=t.x,r=t.y,i=t.width,a=t.height,o=i/2,s=a/2;return{cx:n+o,cy:r+s,hwidth:o,hheight:s}}}])}(),vA=function(){function e(){W(this,e)}return G(e,[{key:`update`,value:function(e){if(e.points&&aS(e.points.points)){var t=e.points.points,n=Math.min.apply(Math,Wy(t.map(function(e){return e[0]}))),r=Math.max.apply(Math,Wy(t.map(function(e){return e[0]}))),i=Math.min.apply(Math,Wy(t.map(function(e){return e[1]}))),a=Math.max.apply(Math,Wy(t.map(function(e){return e[1]}))),o=r-n,s=a-i,c=o/2,l=s/2;return{cx:n+c,cy:i+l,hwidth:c,hheight:l}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),yA=function(){function e(){W(this,e)}return G(e,[{key:`update`,value:function(e,t){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.src,s=e.width,c=s===void 0?0:s,l=e.height,u=l===void 0?0:l,d=c,f=u;return o&&!_S(o)&&(d||(d=o.width,e.width=d),f||(f=o.height,e.height=f)),{cx:r+d/2,cy:a+f/2,hwidth:d/2,hheight:f/2}}}])}(),bA=function(){function e(t){W(this,e),this.globalRuntime=t}return G(e,[{key:`isReadyToMeasure`,value:function(e,t){return e.text}},{key:`update`,value:function(e,t){var n,r=e.text,i=e.textAlign,a=i===void 0?`start`:i,o=e.lineWidth,s=o===void 0?1:o,c=e.textBaseline,l=c===void 0?`alphabetic`:c,u=e.dx,d=u===void 0?0:u,f=e.dy,p=f===void 0?0:f,m=e.x,h=m===void 0?0:m,g=e.y,_=g===void 0?0:g;if(!this.isReadyToMeasure(e,t))return e.metrics={font:``,width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var v=(t==null||(n=t.ownerDocument)==null||(n=n.defaultView)==null?void 0:n.getConfig())||{},y=v.offscreenCanvas,b=this.globalRuntime.textService.measureText(r,e,y);e.metrics=b;var x=b.width,S=b.height,C=x/2,w=S/2,T=h+C;a===`center`||a===`middle`?T+=s/2-C:(a===`right`||a===`end`)&&(T+=s-C*2);var E=_-w;return l===`middle`?E+=w:l===`top`||l===`hanging`?E+=w*2:l===`alphabetic`||(l===`bottom`||l===`ideographic`)&&(E+=0),d&&(T+=d),p&&(E+=p),{cx:T,cy:E,hwidth:C,hheight:w}}}])}(),xA=function(){function e(){W(this,e)}return G(e,[{key:`update`,value:function(e,t){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),SA=function(){function e(){W(this,e)}return G(e,[{key:`update`,value:function(e,t){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.width,s=o===void 0?0:o,c=e.height,l=c===void 0?0:c;return{cx:r+s/2,cy:a+l/2,hwidth:s/2,hheight:l/2}}}])}(),CA=function(){function e(t){W(this,e),this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new lT,this.page=new lT,this.canvas=new lT,this.viewport=new lT,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return G(e,[{key:`name`,get:function(){return this.type}},{key:`layerX`,get:function(){return this.layer.x}},{key:`layerY`,get:function(){return this.layer.y}},{key:`pageX`,get:function(){return this.page.x}},{key:`pageY`,get:function(){return this.page.y}},{key:`x`,get:function(){return this.canvas.x}},{key:`y`,get:function(){return this.canvas.y}},{key:`canvasX`,get:function(){return this.canvas.x}},{key:`canvasY`,get:function(){return this.canvas.y}},{key:`viewportX`,get:function(){return this.viewport.x}},{key:`viewportY`,get:function(){return this.viewport.y}},{key:`composedPath`,value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:`propagationPath`,get:function(){return this.composedPath()}},{key:`preventDefault`,value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:`stopImmediatePropagation`,value:function(){this.propagationImmediatelyStopped=!0}},{key:`stopPropagation`,value:function(){this.propagationStopped=!0}},{key:`initEvent`,value:function(){}},{key:`initUIEvent`,value:function(){}},{key:`clone`,value:function(){throw Error(dT)}}])}(),wA=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.client=new lT,e.movement=new lT,e.offset=new lT,e.global=new lT,e.screen=new lT,e}return Zy(t,e),G(t,[{key:`clientX`,get:function(){return this.client.x}},{key:`clientY`,get:function(){return this.client.y}},{key:`movementX`,get:function(){return this.movement.x}},{key:`movementY`,get:function(){return this.movement.y}},{key:`offsetX`,get:function(){return this.offset.x}},{key:`offsetY`,get:function(){return this.offset.y}},{key:`globalX`,get:function(){return this.global.x}},{key:`globalY`,get:function(){return this.global.y}},{key:`screenX`,get:function(){return this.screen.x}},{key:`screenY`,get:function(){return this.screen.y}},{key:`getModifierState`,value:function(e){return`getModifierState`in this.nativeEvent&&this.nativeEvent.getModifierState(e)}},{key:`initMouseEvent`,value:function(){throw Error(dT)}}])}(CA),TA=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.width=0,e.height=0,e.isPrimary=!1,e}return Zy(t,e),G(t,[{key:`getCoalescedEvents`,value:function(){return this.type===`pointermove`||this.type===`mousemove`||this.type===`touchmove`?[this]:[]}},{key:`getPredictedEvents`,value:function(){throw Error(`getPredictedEvents is not supported!`)}},{key:`clone`,value:function(){return this.manager.clonePointerEvent(this)}}])}(wA),EA=function(e){function t(){return W(this,t),Yy(this,t,arguments)}return Zy(t,e),G(t,[{key:`clone`,value:function(){return this.manager.cloneWheelEvent(this)}}])}(wA),DA=function(e){function t(e,n){var r;return W(this,t),r=Yy(this,t,[null]),r.type=e,r.detail=n,Object.assign(r,n),r}return Zy(t,e),G(t)}(CA),OA=function(){function e(){W(this,e),this.emitter=new tb}return G(e,[{key:`on`,value:function(e,t,n){return this.addEventListener(e,t,n),this}},{key:`addEventListener`,value:function(e,t,n){var r=!1,i=!1;if(FS(n))r=n;else if(n){var a=n.capture;r=a===void 0?!1:a;var o=n.once;i=o===void 0?!1:o}r&&(e+=`capture`),t=rS(t)?t:t.handleEvent;var s=rS(t)?void 0:t;return i?this.emitter.once(e,t,s):this.emitter.on(e,t,s),this}},{key:`off`,value:function(e,t,n){return e?this.removeEventListener(e,t,n):this.removeAllEventListeners(),this}},{key:`removeAllEventListeners`,value:function(){var e;(e=this.emitter)==null||e.removeAllListeners()}},{key:`removeEventListener`,value:function(e,t,n){if(!this.emitter)return this;(FS(n)?n:n?.capture)&&(e+=`capture`),t=rS(t)?t:t?.handleEvent;var r=rS(t)?void 0:t;return this.emitter.off(e,t,r),this}},{key:`emit`,value:function(e,t){this.dispatchEvent(new DA(e,t))}},{key:`dispatchEventToSelf`,value:function(e){e.target||=this,e.currentTarget=this,this.emitter.emit(e.type,e)}},{key:`dispatchEvent`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(arguments.length>2&&arguments[2])return this.dispatchEventToSelf(e),!0;var n=this.document?this:this.defaultView?this.defaultView:this.ownerDocument?.defaultView;if(n){if(e.manager=n.getEventService(),!e.manager)return!1;e.defaultPrevented=!1,e.path?e.path.length=0:e.page=[],t||(e.target=this),e.manager.dispatchEvent(e,e.type,t)}else this.dispatchEventToSelf(e);return!e.defaultPrevented}}])}(),kA=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI=``,e.childNodes=[],e.nodeType=0,e.nodeName=``,e.nodeValue=null,e.parentNode=null,e.destroyed=!1,e}return Zy(t,e),G(t,[{key:`textContent`,get:function(){var e=``;this.nodeName===q.TEXT&&(e+=this.style.text);var t=Gw(this.childNodes),n;try{for(t.s();!(n=t.n()).done;){var r=n.value;r.nodeName===q.TEXT?e+=r.nodeValue:e+=r.textContent}}catch(e){t.e(e)}finally{t.f()}return e},set:function(e){var t=this;this.childNodes.slice().forEach(function(e){t.removeChild(e)}),this.nodeName===q.TEXT&&(this.style.text=`${e}`)}},{key:`getRootNode`,value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(e):e.composed&&this.host?this.host.getRootNode(e):this}},{key:`hasChildNodes`,value:function(){return this.childNodes.length>0}},{key:`isDefaultNamespace`,value:function(e){throw Error(dT)}},{key:`lookupNamespaceURI`,value:function(e){throw Error(dT)}},{key:`lookupPrefix`,value:function(e){throw Error(dT)}},{key:`normalize`,value:function(){throw Error(dT)}},{key:`isEqualNode`,value:function(e){return this===e}},{key:`isSameNode`,value:function(e){return this.isEqualNode(e)}},{key:`parent`,get:function(){return this.parentNode}},{key:`parentElement`,get:function(){return null}},{key:`nextSibling`,get:function(){return null}},{key:`previousSibling`,get:function(){return null}},{key:`firstChild`,get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:`lastChild`,get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:`compareDocumentPosition`,value:function(e){if(e===this)return 0;for(var n=e,r=this,i=[n],a=[r];(o=n.parentNode)??r.parentNode;){var o;n=n.parentNode?(i.push(n.parentNode),n.parentNode):n,r=r.parentNode?(a.push(r.parentNode),r.parentNode):r}if(n!==r)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var s=i.length>a.length?i:a,c=s===i?a:i;if(s[s.length-c.length]===c[0])return s===i?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var l=s.length-c.length,u=c.length-1;u>=0;u--){var d=c[u],f=s[l+u];if(f!==d){var p=d.parentNode.childNodes;return p.indexOf(d)<p.indexOf(f)?c===i?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING:s===i?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING}}return t.DOCUMENT_POSITION_FOLLOWING}},{key:`contain`,value:function(e){return this.contains(e)}},{key:`contains`,value:function(e){for(var t=e;t&&this!==t;)t=t.parentNode;return!!t}},{key:`getAncestor`,value:function(e){for(var t=this;e>0&&t;)t=t.parentNode,e--;return t}},{key:`forEach`,value:function(e){for(var t=[this];t.length>0;){var n=t.pop();if(e(n)===!1)break;for(var r=n.childNodes.length-1;r>=0;r--)t.push(n.childNodes[r])}}}],[{key:`isNode`,value:function(e){return!!e.childNodes}}])}(OA);kA.DOCUMENT_POSITION_DISCONNECTED=1,kA.DOCUMENT_POSITION_PRECEDING=2,kA.DOCUMENT_POSITION_FOLLOWING=4,kA.DOCUMENT_POSITION_CONTAINS=8,kA.DOCUMENT_POSITION_CONTAINED_BY=16,kA.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var AA=2048,jA=function(){function e(t,n){var r=this;W(this,e),this.nativeHTMLMap=new WeakMap,this.cursor=`default`,this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=sb(),this.tmpVec3=ax(),this.onPointerDown=function(e){var t=r.createPointerEvent(e);if(r.dispatchEvent(t,`pointerdown`),t.pointerType===`touch`)r.dispatchEvent(t,`touchstart`);else if(t.pointerType===`mouse`||t.pointerType===`pen`){var n=t.button===2;r.dispatchEvent(t,n?`rightdown`:`mousedown`)}var i=r.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=t.composedPath(),r.freeEvent(t)},this.onPointerUp=function(e){var t=kk.now(),n=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,`pointerup`),n.pointerType===`touch`)r.dispatchEvent(n,`touchend`);else if(n.pointerType===`mouse`||n.pointerType===`pen`){var i=n.button===2;r.dispatchEvent(n,i?`rightup`:`mouseup`)}var a=r.trackingData(e.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[e.button]),s=o;if(o&&!n.composedPath().includes(o)){for(var c=o;c&&!n.composedPath().includes(c);){if(n.currentTarget=c,r.notifyTarget(n,`pointerupoutside`),n.pointerType===`touch`)r.notifyTarget(n,`touchendoutside`);else if(n.pointerType===`mouse`||n.pointerType===`pen`){var l=n.button===2;r.notifyTarget(n,l?`rightupoutside`:`mouseupoutside`)}kA.isNode(c)&&(c=c.parentNode)}delete a.pressTargetsByButton[e.button],s=c}if(s){var u,d=r.clonePointerEvent(n,`click`);d.target=s,d.path=[],a.clicksByButton[e.button]||(a.clicksByButton[e.button]={clickCount:0,target:d.target,timeStamp:t});var f=r.context.renderingContext.root.ownerDocument.defaultView,p=a.clicksByButton[e.button];p.target===d.target&&t-p.timeStamp<f.getConfig().dblClickSpeed?++p.clickCount:p.clickCount=1,p.target=d.target,p.timeStamp=t,d.detail=p.clickCount,(u=n.detail)!=null&&u.preventClick||(!r.context.config.useNativeClickEvent&&(d.pointerType===`mouse`||d.pointerType===`touch`)&&r.dispatchEvent(d,`click`),r.dispatchEvent(d,`pointertap`)),r.freeEvent(d)}r.freeEvent(n)},this.onPointerMove=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n=t.pointerType===`mouse`||t.pointerType===`pen`,i=r.trackingData(e.pointerId),a=r.findMountedTarget(i.overTargets);if(i.overTargets&&a!==t.target){var o=e.type===`mousemove`?`mouseout`:`pointerout`,s=r.createPointerEvent(e,o,a||void 0);if(r.dispatchEvent(s,`pointerout`),n&&r.dispatchEvent(s,`mouseout`),!t.composedPath().includes(a)){var c=r.createPointerEvent(e,`pointerleave`,a||void 0);for(c.eventPhase=c.AT_TARGET;c.target&&!t.composedPath().includes(c.target);)c.currentTarget=c.target,r.notifyTarget(c),n&&r.notifyTarget(c,`mouseleave`),kA.isNode(c.target)&&(c.target=c.target.parentNode);r.freeEvent(c)}r.freeEvent(s)}if(a!==t.target){var l=e.type===`mousemove`?`mouseover`:`pointerover`,u=r.clonePointerEvent(t,l);r.dispatchEvent(u,`pointerover`),n&&r.dispatchEvent(u,`mouseover`);for(var d=a&&kA.isNode(a)&&a.parentNode;d&&d!==(kA.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&d!==t.target;)d=d.parentNode;if(!d||d===(kA.isNode(r.rootTarget)&&r.rootTarget.parentNode)){var f=r.clonePointerEvent(t,`pointerenter`);for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==a&&f.target!==(kA.isNode(r.rootTarget)&&r.rootTarget.parentNode);)f.currentTarget=f.target,r.notifyTarget(f),n&&r.notifyTarget(f,`mouseenter`),kA.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(u)}r.dispatchEvent(t,`pointermove`),t.pointerType===`touch`&&r.dispatchEvent(t,`touchmove`),n&&(r.dispatchEvent(t,`mousemove`),r.cursor=r.getCursor(t.target)),i.overTargets=t.composedPath(),r.freeEvent(t)},this.onPointerOut=function(e){var t=r.trackingData(e.pointerId);if(t.overTargets){var n=e.pointerType===`mouse`||e.pointerType===`pen`,i=r.findMountedTarget(t.overTargets),a=r.createPointerEvent(e,`pointerout`,i||void 0);r.dispatchEvent(a),n&&r.dispatchEvent(a,`mouseout`);var o=r.createPointerEvent(e,`pointerleave`,i||void 0);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(kA.isNode(r.rootTarget)&&r.rootTarget.parentNode);)o.currentTarget=o.target,r.notifyTarget(o),n&&r.notifyTarget(o,`mouseleave`),kA.isNode(o.target)&&(o.target=o.target.parentNode);t.overTargets=null,r.freeEvent(a),r.freeEvent(o)}r.cursor=null},this.onPointerOver=function(e){var t=r.trackingData(e.pointerId),n=r.createPointerEvent(e),i=n.pointerType===`mouse`||n.pointerType===`pen`;r.dispatchEvent(n,`pointerover`),i&&r.dispatchEvent(n,`mouseover`),n.pointerType===`mouse`&&(r.cursor=r.getCursor(n.target));var a=r.clonePointerEvent(n,`pointerenter`);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(kA.isNode(r.rootTarget)&&r.rootTarget.parentNode);)a.currentTarget=a.target,r.notifyTarget(a),i&&r.notifyTarget(a,`mouseenter`),kA.isNode(a.target)&&(a.target=a.target.parentNode);t.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(a)},this.onPointerUpOutside=function(e){var t=r.trackingData(e.pointerId),n=r.findMountedTarget(t.pressTargetsByButton[e.button]),i=r.createPointerEvent(e);if(n){for(var a=n;a;)i.currentTarget=a,r.notifyTarget(i,`pointerupoutside`),i.pointerType===`touch`||(i.pointerType===`mouse`||i.pointerType===`pen`)&&r.notifyTarget(i,i.button===2?`rightupoutside`:`mouseupoutside`),kA.isNode(a)&&(a=a.parentNode);delete t.pressTargetsByButton[e.button]}r.freeEvent(i)},this.onWheel=function(e){var t=r.createWheelEvent(e);r.dispatchEvent(t),r.freeEvent(t)},this.onClick=function(e){if(r.context.config.useNativeClickEvent){var t=r.createPointerEvent(e);r.dispatchEvent(t),r.freeEvent(t)}},this.onPointerCancel=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(t),r.freeEvent(t)},this.globalRuntime=t,this.context=n}return G(e,[{key:`init`,value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping(`pointerdown`,this.onPointerDown),this.addEventMapping(`pointerup`,this.onPointerUp),this.addEventMapping(`pointermove`,this.onPointerMove),this.addEventMapping(`pointerout`,this.onPointerOut),this.addEventMapping(`pointerleave`,this.onPointerOut),this.addEventMapping(`pointercancel`,this.onPointerCancel),this.addEventMapping(`pointerover`,this.onPointerOver),this.addEventMapping(`pointerupoutside`,this.onPointerUpOutside),this.addEventMapping(`wheel`,this.onWheel),this.addEventMapping(`click`,this.onClick)}},{key:`destroy`,value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:`getScale`,value:function(){var e=this.context.contextService.getBoundingClientRect(),t=1,n=1,r=this.context.contextService.getDomElement();if(r&&e){var i=r.offsetWidth,a=r.offsetHeight;i&&a&&(t=e.width/i,n=e.height/a)}return{scaleX:t,scaleY:n,bbox:e}}},{key:`client2Viewport`,value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new lT((e.x-(i?.left||0))/n,(e.y-(i?.top||0))/r)}},{key:`viewport2Client`,value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new lT((e.x+(i?.left||0))*n,(e.y+(i?.top||0))*r)}},{key:`viewport2Canvas`,value:function(e){var t=e.x,n=e.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,a=i.width,o=i.height,s=r.getPerspectiveInverse(),c=r.getWorldTransform(),l=_b(this.tmpMatrix,c,s),u=ux(this.tmpVec3,t/a*2-1,(1-n/o)*2-1,0);return Sx(u,u,l),new lT(u[0],u[1])}},{key:`canvas2Viewport`,value:function(e){var t=this.rootTarget.defaultView.getCamera(),n=t.getPerspective(),r=t.getViewTransform(),i=_b(this.tmpMatrix,n,r),a=ux(this.tmpVec3,e.x,e.y,0);Sx(this.tmpVec3,this.tmpVec3,i);var o=this.context.config,s=o.width,c=o.height;return new lT((a[0]+1)/2*s,(1-(a[1]+1)/2)*c)}},{key:`setPickHandler`,value:function(e){this.pickHandler=e}},{key:`addEventMapping`,value:function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(function(e,t){return e.priority-t.priority})}},{key:`mapEvent`,value:function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var n=0,r=t.length;n<r;n++)t[n].fn(e);else console.warn(`[EventService]: Event mapping not defined for ${e.type}`)}}},{key:`dispatchEvent`,value:function(e,t,n){n?(e.eventPhase=e.AT_TARGET,e.currentTarget=this.rootTarget.defaultView||null,this.notifyListeners(e,t)):(e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t))}},{key:`propagate`,value:function(e,t){if(e.target){var n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){var i=n.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var a=i+1;a<n.length;a++)if(e.currentTarget=n[a],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}}},{key:`propagationPath`,value:function(e){var t=[e],n=this.rootTarget.defaultView||null;if(n&&n===e)return t.unshift(n.document),t;for(var r=0;r<AA&&e!==this.rootTarget;r++)kA.isNode(e)&&e.parentNode&&(t.push(e.parentNode),e=e.parentNode);return n&&t.push(n),t}},{key:`hitTest`,value:function(e){var t=e.viewportX,n=e.viewportY,r=this.context.config,i=r.width,a=r.height,o=r.disableHitTesting;return t<0||n<0||t>i||n>a?null:!o&&this.pickHandler(e)||this.rootTarget||null}},{key:`isNativeEventFromCanvas`,value:function(e,t){var n,r=t?.target;if((n=r)!=null&&n.shadowRoot&&(r=t.composedPath()[0]),r){if(r===e)return!0;if(e&&e.contains)return e.contains(r)}return t!=null&&t.composedPath?t.composedPath().indexOf(e)>-1:!1}},{key:`getExistedHTML`,value:function(e){if(e.nativeEvent.composedPath)for(var t=0,n=e.nativeEvent.composedPath();t<n.length;t++){var r=n[t],i=this.nativeHTMLMap.get(r);if(i)return i}return null}},{key:`pickTarget`,value:function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY})}},{key:`createPointerEvent`,value:function(e,t,n,r){var i=this.allocateEvent(TA);this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e;var a=this.getExistedHTML(i),o=this.context.contextService.getDomElement();return i.target=n??(a||this.isNativeEventFromCanvas(o,i.nativeEvent)&&this.pickTarget(i)||r),typeof t==`string`&&(i.type=t),i}},{key:`createWheelEvent`,value:function(e){var t=this.allocateEvent(EA);this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e;var n=this.getExistedHTML(t),r=this.context.contextService.getDomElement();return t.target=n||this.isNativeEventFromCanvas(r,t.nativeEvent)&&this.pickTarget(t),t}},{key:`trackingData`,value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}},{key:`cloneWheelEvent`,value:function(e){var t=this.allocateEvent(EA);return t.nativeEvent=e.nativeEvent,t.originalEvent=e.originalEvent,this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.target=e.target,t.path=e.composedPath().slice(),t.type=e.type,t}},{key:`clonePointerEvent`,value:function(e,t){var n=this.allocateEvent(TA);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}},{key:`copyPointerData`,value:function(e,t){t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist}},{key:`copyMouseData`,value:function(e,t){t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.client.copyFrom(e.client),t.movement.copyFrom(e.movement),t.canvas.copyFrom(e.canvas),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global),t.offset.copyFrom(e.offset)}},{key:`copyWheelData`,value:function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}},{key:`copyData`,value:function(e,t){t.isTrusted=e.isTrusted,t.timeStamp=kk.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.page.copyFrom(e.page),t.viewport.copyFrom(e.viewport)}},{key:`allocateEvent`,value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t}},{key:`freeEvent`,value:function(e){if(e.manager!==this)throw Error(`It is illegal to free an event not managed by this EventBoundary!`);var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}},{key:`notifyTarget`,value:function(e,t){t??=e.type;var n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}},{key:`notifyListeners`,value:function(e,t){var n=e.currentTarget.emitter,r=n._events[t];if(r)if(`fn`in r)r.once&&n.removeListener(t,r.fn,void 0,!0),r.fn.call(e.currentTarget||r.context,e);else for(var i=0;i<r.length&&!e.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(t,r[i].fn,void 0,!0),r[i].fn.call(e.currentTarget||r[i].context,e)}},{key:`findMountedTarget`,value:function(e){if(!e)return null;for(var t=e[e.length-1],n=e.length-2;n>=0;n--){var r=e[n];if(r===this.rootTarget||kA.isNode(r)&&r.parentNode===t)t=e[n];else break}return t}},{key:`getCursor`,value:function(e){for(var t=e;t;){var n=vk(t)&&t.getAttribute(`cursor`);if(n)return n;t=kA.isNode(t)&&t.parentNode}}}])}(),MA=function(){function e(){W(this,e)}return G(e,[{key:`getOrCreateCanvas`,value:function(e,t){if(this.canvas)return this.canvas;if(e||X.offscreenCanvas)this.canvas=e||X.offscreenCanvas,this.context=this.canvas.getContext(`2d`,Ly({willReadFrequently:!0},t));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext(`2d`,Ly({willReadFrequently:!0},t)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement(`canvas`),this.context=this.canvas.getContext(`2d`))}catch{this.canvas=document.createElement(`canvas`),this.context=this.canvas.getContext(`2d`,Ly({willReadFrequently:!0},t))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:`getOrCreateContext`,value:function(e,t){return this.context||this.getOrCreateCanvas(e,t),this.context}}],[{key:`createCanvas`,value:function(){try{return new window.OffscreenCanvas(0,0)}catch{}try{return document.createElement(`canvas`)}catch{}return null}}])}(),NA=function(e){return e[e.CAMERA_CHANGED=0]=`CAMERA_CHANGED`,e[e.DISPLAY_OBJECT_CHANGED=1]=`DISPLAY_OBJECT_CHANGED`,e[e.NONE=2]=`NONE`,e}({}),PA=function(){function e(t,n){W(this,e),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new Yk,initAsync:new qk,dirtycheck:new Xk,cull:new Xk,beginFrame:new Yk,beforeRender:new Yk,render:new Yk,afterRender:new Yk,endFrame:new Yk,destroy:new Yk,pick:new Jk,pickSync:new Xk,pointerDown:new Yk,pointerUp:new Yk,pointerMove:new Yk,pointerOut:new Yk,pointerOver:new Yk,pointerWheel:new Yk,pointerCancel:new Yk,click:new Yk},this.globalRuntime=t,this.context=n}return G(e,[{key:`init`,value:function(e){var t=this,n=Ly(Ly({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(e){e.apply(n,t.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){t.inited=!0,e()}).catch(function(e){})}},{key:`getStats`,value:function(){return this.stats}},{key:`disableDirtyRectangleRendering`,value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(NA.CAMERA_CHANGED)}},{key:`render`,value:function(e,t,n){var r=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=i.renderReasons.size===1&&i.renderReasons.has(NA.CAMERA_CHANGED),o=!e.disableRenderHooks||!a;o&&this.renderDisplayObject(i.root,e,i),this.hooks.beginFrame.call(t),o&&i.renderListCurrentFrame.forEach(function(e){r.hooks.beforeRender.call(e),r.hooks.render.call(e),r.hooks.afterRender.call(e)}),this.hooks.endFrame.call(t),i.renderListCurrentFrame=[],i.renderReasons.clear(),n()}}},{key:`renderDisplayObject`,value:function(e,t,n){var r=this,i=t.renderer.getConfig(),a=i.enableDirtyCheck,o=i.enableCulling;function s(e){var t=e.renderable,i=e.sortable,s=a?t.dirty||n.dirtyRectangleRenderingDisabled?e:null:e,c=null;s&&(c=o?r.hooks.cull.call(s,r.context.camera):s,c&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(c))),e.dirty(!1),i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(e,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0)}for(var c=[e];c.length>0;){var l,u=c.pop();s(u);for(var d=((l=u.sortable)==null||(l=l.sorted)==null?void 0:l.length)>0?u.sortable.sorted:u.childNodes,f=d.length-1;f>=0;f--)c.push(d[f])}}},{key:`sort`,value:function(e,t){var n;(t==null||(n=t.sorted)==null?void 0:n.length)>0&&t.dirtyReason!==GT.Z_INDEX_CHANGED?t.dirtyChildren.forEach(function(n){var r=t.sorted.indexOf(n);if(r>-1&&t.sorted.splice(r,1),e.childNodes.indexOf(n)>-1)if(t.sorted.length===0)t.sorted.push(n);else{var i=yk(t.sorted,n);t.sorted.splice(i,0,n)}}):t.sorted=e.childNodes.slice().sort(bk),t.sorted?.length>0&&e.childNodes.filter(function(e){return e.parsedStyle.zIndex}).length===0&&(t.sorted=[])}},{key:`destroy`,value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:`dirtify`,value:function(){this.context.renderingContext.renderReasons.add(NA.DISPLAY_OBJECT_CHANGED)}}])}(),FA=/\[\s*(.*)=(.*)\s*\]/,IA=function(){function e(){W(this,e)}return G(e,[{key:`selectOne`,value:function(e,t){var n=this;if(e.startsWith(`.`))return t.find(function(t){return(t?.classList||[]).indexOf(n.getIdOrClassname(e))>-1});if(e.startsWith(`#`))return t.find(function(t){return t.id===n.getIdOrClassname(e)});if(e.startsWith(`[`)){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.find(function(e){return t!==e&&(i===`name`?e.name===a:n.attributeToString(e,i)===a)}):null}return t.find(function(n){return t!==n&&n.nodeName===e})}},{key:`selectAll`,value:function(e,t){var n=this;if(e.startsWith(`.`))return t.findAll(function(r){return t!==r&&(r?.classList||[]).indexOf(n.getIdOrClassname(e))>-1});if(e.startsWith(`#`))return t.findAll(function(r){return t!==r&&r.id===n.getIdOrClassname(e)});if(e.startsWith(`[`)){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.findAll(function(e){return t!==e&&(i===`name`?e.name===a:n.attributeToString(e,i)===a)}):[]}return t.findAll(function(n){return t!==n&&n.nodeName===e})}},{key:`is`,value:function(e,t){if(e.startsWith(`.`))return t.className===this.getIdOrClassname(e);if(e.startsWith(`#`))return t.id===this.getIdOrClassname(e);if(e.startsWith(`[`)){var n=this.getAttribute(e),r=n.name,i=n.value;return r===`name`?t.name===i:this.attributeToString(t,r)===i}return t.nodeName===e}},{key:`getIdOrClassname`,value:function(e){return e.substring(1)}},{key:`getAttribute`,value:function(e){var t=e.match(FA),n=``,r=``;return t&&t.length>2&&(n=t[1].replace(/"/g,``),r=t[2].replace(/"/g,``)),{name:n,value:r}}},{key:`attributeToString`,value:function(e,t){if(!e.getAttribute)return``;var n=e.getAttribute(t);return iS(n)?``:n.toString?n.toString():``}}])}(),LA=function(e){return e.ATTR_MODIFIED=`DOMAttrModified`,e.INSERTED=`DOMNodeInserted`,e.MOUNTED=`DOMNodeInsertedIntoDocument`,e.REMOVED=`removed`,e.UNMOUNTED=`DOMNodeRemovedFromDocument`,e.REPARENT=`reparent`,e.DESTROY=`destroy`,e.BOUNDS_CHANGED=`bounds-changed`,e.CULLED=`culled`,e}({}),RA=function(e){function t(e,n,r,i,a,o,s,c){var l;return W(this,t),l=Yy(this,t,[null]),l.relatedNode=n,l.prevValue=r,l.newValue=i,l.attrName=a,l.attrChange=o,l.prevParsedValue=s,l.newParsedValue=c,l.type=e,l}return Zy(t,e),G(t)}(CA);RA.ADDITION=2,RA.MODIFICATION=1,RA.REMOVAL=3;var zA=new RA(LA.REPARENT,null,``,``,``,0,``,``),BA=qx(),VA=ax(),HA=cx(1,1,1),UA=sb(),WA=qx(),GA=ax(),KA=sb(),qA=Fx(),JA=ax(),YA=Fx(),XA=ax(),ZA=ax(),QA=ax(),$A=sb(),ej=Fx(),tj=Fx(),nj=Fx(),rj={affectChildren:!0},ij=function(){function e(t){W(this,e),this.pendingEvents=new Map,this.boundsChangedEvent=new DA(LA.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=t}return G(e,[{key:`matches`,value:function(e,t){return this.runtime.sceneGraphSelector.is(e,t)}},{key:`querySelector`,value:function(e,t){return this.runtime.sceneGraphSelector.selectOne(e,t)}},{key:`querySelectorAll`,value:function(e,t){return this.runtime.sceneGraphSelector.selectAll(e,t)}},{key:`attach`,value:function(e,t,n){var r,i=!1;e.parentNode&&(i=e.parentNode!==t,this.detach(e));var a=e.nodeName===q.FRAGMENT,o=Ak(t);e.parentNode=t;var s=a?e.childNodes:[e];K(n)?s.forEach(function(e){t.childNodes.splice(n,0,e),e.parentNode=t}):s.forEach(function(e){t.childNodes.push(e),e.parentNode=t});var c=t,l=c.sortable;if((l!=null&&(r=l.sorted)!=null&&r.length||l.dirty||e.parsedStyle.zIndex)&&(l.dirtyChildren.indexOf(e)===-1&&l.dirtyChildren.push(e),l.dirty=!0,l.dirtyReason=GT.ADDED),!o){if(a)this.dirtifyFragment(e);else{var u=e.transformable;u&&this.dirtyWorldTransform(e,u)}if(i){var d,f=((d=t.ownerDocument)==null||(d=d.defaultView)==null||(d=d.getConfig())==null||(d=d.future)==null?void 0:d.experimentalCancelEventPropagation)===!0;e.dispatchEvent(zA,f,f)}}}},{key:`detach`,value:function(e){var t,n;if(e.parentNode){var r=e.transformable,i=e.parentNode,a=i.sortable;(a!=null&&(t=a.sorted)!=null&&t.length||(n=e.style)!=null&&n.zIndex)&&(a.dirtyChildren.indexOf(e)===-1&&a.dirtyChildren.push(e),a.dirty=!0,a.dirtyReason=GT.REMOVED);var o=e.parentNode.childNodes.indexOf(e);o>-1&&e.parentNode.childNodes.splice(o,1),r&&this.dirtyWorldTransform(e,r),e.parentNode=null}}},{key:`getLocalPosition`,value:function(e){return e.transformable.localPosition}},{key:`getLocalRotation`,value:function(e){return e.transformable.localRotation}},{key:`getLocalScale`,value:function(e){return e.transformable.localScale}},{key:`getLocalSkew`,value:function(e){return e.transformable.localSkew}},{key:`getLocalTransform`,value:function(e){var t=e.transformable;return YT(t),t.localTransform}},{key:`setLocalPosition`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=e.transformable;ZA[0]=t[0],ZA[1]=t[1],ZA[2]=t[2]??0,!Tx(r.localPosition,ZA)&&(lx(r.localPosition,ZA),n&&this.dirtyLocalTransform(e,r))}},{key:`translateLocal`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t==`number`&&(t=cx(t,n,r));var i=e.transformable;Tx(t,VA)||(wx(t,t,i.localRotation),dx(i.localPosition,i.localPosition,t),this.dirtyLocalTransform(e,i))}},{key:`setLocalRotation`,value:function(e,t,n,r,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof t==`number`&&(t=Wx(qA,t,n,r,i));var o=e.transformable;Ux(o.localRotation,t),a&&this.dirtyLocalTransform(e,o)}},{key:`rotateLocal`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t==`number`&&(t=cx(t,n,r));var i=e.transformable;Vx(tj,t[0],t[1],t[2]),Gx(i.localRotation,i.localRotation,tj),this.dirtyLocalTransform(e,i)}},{key:`setLocalScale`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=e.transformable;ux(GA,t[0],t[1],t[2]??r.localScale[2]),!Tx(GA,r.localScale)&&(lx(r.localScale,GA),n&&this.dirtyLocalTransform(e,r))}},{key:`scaleLocal`,value:function(e,t){var n=e.transformable;px(n.localScale,n.localScale,ux(GA,t[0],t[1],t[2]??1)),this.dirtyLocalTransform(e,n)}},{key:`setLocalSkew`,value:function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof t==`number`&&(t=Yx(WA,t,n));var i=e.transformable;Jx(i.localSkew,t),r&&this.dirtyLocalTransform(e,i)}},{key:`setLocalEulerAngles`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof t==`number`&&(t=cx(t,n,r));var a=e.transformable;Vx(a.localRotation,t[0],t[1],t[2]),i&&this.dirtyLocalTransform(e,a)}},{key:`setLocalTransform`,value:function(e,t){var n=Mb(JA,t),r=Pb(YA,t),i=Nb(XA,t);this.setLocalScale(e,i,!1),this.setLocalPosition(e,n,!1),this.setLocalRotation(e,r,void 0,void 0,void 0,!1),this.dirtyLocalTransform(e,e.transformable)}},{key:`resetLocalTransform`,value:function(e){this.setLocalScale(e,HA,!1),this.setLocalPosition(e,VA,!1),this.setLocalEulerAngles(e,VA,void 0,void 0,!1),this.setLocalSkew(e,BA,void 0,!1),this.dirtyLocalTransform(e,e.transformable)}},{key:`getPosition`,value:function(e){var t=e.transformable;return Mb(t.position,this.getWorldTransform(e,t))}},{key:`getRotation`,value:function(e){var t=e.transformable;return Pb(t.rotation,this.getWorldTransform(e,t))}},{key:`getScale`,value:function(e){var t=e.transformable;return Nb(t.scaling,this.getWorldTransform(e,t))}},{key:`getOrigin`,value:function(e){return e.getGeometryBounds(),e.transformable.origin}},{key:`getWorldTransform`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.transformable;return!t.localDirtyFlag&&!t.dirtyFlag?t.worldTransform:(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.internalUpdateTransform(e),t.worldTransform)}},{key:`setPosition`,value:function(e,t){var n=e.transformable;if(QA[0]=t[0],QA[1]=t[1],QA[2]=t[2]??0,!Tx(this.getPosition(e),QA)){if(lx(n.position,QA),e.parentNode===null||!e.parentNode.transformable)lx(n.localPosition,QA);else{var r=e.parentNode.transformable;lb($A,r.worldTransform),mb($A,$A),Sx(n.localPosition,QA,$A)}this.dirtyLocalTransform(e,n)}}},{key:`translate`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t==`number`&&(t=ux(GA,t,n,r)),!Tx(t,VA)&&(dx(GA,this.getPosition(e),t),this.setPosition(e,GA))}},{key:`setRotation`,value:function(e,t,n,r,i){var a=e.transformable;if(typeof t==`number`&&(t=Hx(t,n,r,i)),e.parentNode===null||!e.parentNode.transformable)this.setLocalRotation(e,t);else{var o=this.getRotation(e.parentNode);Ux(qA,o),zx(qA,qA),Lx(a.localRotation,qA,t),Kx(a.localRotation,a.localRotation),this.dirtyLocalTransform(e,a)}}},{key:`rotate`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t==`number`&&(t=cx(t,n,r));var i=e.transformable;if(e.parentNode===null||!e.parentNode.transformable)this.rotateLocal(e,t);else{var a=qA;Vx(a,t[0],t[1],t[2]);var o=this.getRotation(e),s=this.getRotation(e.parentNode);Ux(nj,s),zx(nj,nj),Lx(a,nj,a),Lx(i.localRotation,a,o),Kx(i.localRotation,i.localRotation),this.dirtyLocalTransform(e,i)}}},{key:`setOrigin`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t==`number`&&(t=[t,n,r]);var i=e.transformable;if(!(t[0]===i.origin[0]&&t[1]===i.origin[1]&&t[2]===i.origin[2])){var a=i.origin;a[0]=t[0],a[1]=t[1],a[2]=t[2]||0,this.dirtyLocalTransform(e,i)}}},{key:`setEulerAngles`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t==`number`&&(t=cx(t,n,r));var i=e.transformable;if(e.parentNode===null||!e.parentNode.transformable)this.setLocalEulerAngles(e,t);else{Vx(i.localRotation,t[0],t[1],t[2]);var a=this.getRotation(e.parentNode);Ux(ej,zx(qA,a)),Gx(i.localRotation,i.localRotation,ej),this.dirtyLocalTransform(e,i)}}},{key:`getTransformedGeometryBounds`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(e,t);if(!aT.isEmpty(r)){var i=n||new aT;return i.setFromTransformedAABB(r,this.getWorldTransform(e)),i}return null}},{key:`getGeometryBounds`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e,r=n.geometry;return r.dirty&&X.styleValueRegistry.updateGeometry(e),(t?r.renderBounds:r.contentBounds||null)||new aT}},{key:`getBounds`,value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e,i=r.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var a=n?i.renderBounds:i.bounds,o=this.getTransformedGeometryBounds(e,n,a);if(e.childNodes.forEach(function(e){var r=t.getBounds(e,n);r&&(o?o.add(r):(o=a||new aT,o.update(r.center,r.halfExtents)))}),o||=new aT,n){var s=xk(e);if(s){var c=s.parsedStyle.clipPath.getBounds(n);o?c&&(o=c.intersection(o)):o.update(c.center,c.halfExtents)}}return n?(i.renderBounds=o,i.renderBoundsDirty=!1):(i.bounds=o,i.boundsDirty=!1),o}},{key:`getLocalBounds`,value:function(e){if(e.parentNode){var t=UA;e.parentNode.transformable&&(t=mb(KA,this.getWorldTransform(e.parentNode)));var n=this.getBounds(e);if(!aT.isEmpty(n)){var r=new aT;return r.setFromTransformedAABB(n,t),r}}return this.getBounds(e)}},{key:`getBoundingClientRect`,value:function(e){var t,n,r=this.getGeometryBounds(e);aT.isEmpty(r)||(n=new aT,n.setFromTransformedAABB(r,this.getWorldTransform(e)));var i=(t=e.ownerDocument)==null||(t=t.defaultView)==null?void 0:t.getContextService().getBoundingClientRect();if(n){var a=n.getMin(),o=eb(a,2),s=o[0],c=o[1],l=n.getMax(),u=eb(l,2),d=u[0],f=u[1];return new uT(s+(i?.left||0),c+(i?.top||0),d-s,f-c)}return new uT(i?.left||0,i?.top||0,0,0)}},{key:`internalUpdateTransform`,value:function(e){var t=e.parentNode?.transformable;YT(e.transformable),XT(e.transformable,t)}},{key:`internalUpdateElement`,value:function(e,t){var n,r=((n=e.ownerDocument)==null||(n=n.defaultView)==null||(n=n.getConfig())==null||(n=n.future)==null?void 0:n.experimentalAttributeUpdateOptimization)===!0,i=t[t.length-1],a=i?.transformDirty||e.transformable?.localDirtyFlag;if(e.transformable){var o;(o=e.transformable).dirtyFlag||(o.dirtyFlag=a)}if(this.internalUpdateTransform(e),a){var s;(s=e.dirty)==null||s.call(e,!0,!0)}var c=e.renderable?.boundsDirty||e.renderable?.renderBoundsDirty;if((a||c)&&i?.shapeUpdated===!1&&r)for(var l=t.length-1;l>=0;){var u,d,f=t[l];if(f.shapeUpdated)break;(u=(d=f.node).dirty)==null||u.call(d,!0,!0),f.shapeUpdated=!0,--l}return a}},{key:`syncHierarchy`,value:function(e){for(var t=[e],n=e.parentNode?[{node:e.parentNode,transformDirty:e.parentNode.transformable?.localDirtyFlag||e.parentNode.transformable?.dirtyFlag,shapeUpdated:!1}]:[];t.length>0;){for(var r=t.pop(),i=n[n.length-1];n.length>0&&r.parentNode!==i.node;)i=n.pop();var a=this.internalUpdateElement(r,n);if(r.childNodes.length>0){for(var o=r.childNodes.length-1;o>=0;o--)t.push(r.childNodes[o]);n.push({node:r,transformDirty:a,shapeUpdated:!1})}}}},{key:`dirtyLocalTransform`,value:function(e,t){Ak(e)||t.localDirtyFlag||(t.localDirtyFlag=!0,t.dirtyFlag||this.dirtyWorldTransform(e,t))}},{key:`dirtyWorldTransform`,value:function(e,t){this.dirtifyWorldInternal(e,t),this.dirtyToRoot(e,!0)}},{key:`dirtifyWorldInternal`,value:function(e,t){var n,r=this,i=((n=e.ownerDocument)==null||(n=n.defaultView)==null||(n=n.getConfig())==null||(n=n.future)==null?void 0:n.experimentalAttributeUpdateOptimization)===!0;t.dirtyFlag||(t.dirtyFlag=!0,e.dirty(!0,!0),i||e.childNodes.forEach(function(e){var t=e.transformable;r.dirtifyWorldInternal(e,t)}))}},{key:`dirtyToRoot`,value:function(e){for(var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e,i=((t=e.ownerDocument)==null||(t=t.defaultView)==null||(t=t.getConfig())==null||(t=t.future)==null?void 0:t.experimentalAttributeUpdateOptimization)===!0;r;){var a,o;if((a=(o=r).dirty)==null||a.call(o,!0,!0),i)break;r=r.parentNode}n&&e.forEach(function(e){var t;(t=e.dirty)==null||t.call(e,!0,!0)}),this.informDependentDisplayObjects(e),this.pendingEvents.set(e,n)}},{key:`dirtifyFragment`,value:function(e){var t,n,r=e.transformable;r&&(r.dirtyFlag=!0,r.localDirtyFlag=!0),(t=(n=e).dirty)==null||t.call(n,!0,!0);for(var i=e.childNodes.length,a=0;a<i;a++)this.dirtifyFragment(e.childNodes[a]);e.nodeName===q.FRAGMENT&&this.pendingEvents.set(e,!1)}},{key:`triggerPendingEvents`,value:function(){var e=this,t=new Set,n,r,i=function(r,i){if(!(!r.isConnected||t.has(r)||r.nodeName===q.FRAGMENT)){if(e.boundsChangedEvent.detail=i,e.boundsChangedEvent.target=r,r.isMutationObserved)r.dispatchEvent(e.boundsChangedEvent);else{if(n===void 0){var a;n=((a=r.ownerDocument.defaultView)==null||(a=a.getConfig())==null||(a=a.future)==null?void 0:a.experimentalCancelEventPropagation)===!0}r.ownerDocument.defaultView.dispatchEvent(e.boundsChangedEvent,!0,n)}t.add(r)}};this.pendingEvents.forEach(function(e,t){if(t.nodeName!==q.FRAGMENT){if(r===void 0){var n;r=((n=t.ownerDocument)==null||(n=n.defaultView)==null||(n=n.getConfig())==null||(n=n.future)==null?void 0:n.experimentalAttributeUpdateOptimization)===!0}rj.affectChildren=e,r?i(t,rj):e?t.forEach(function(e){i(e,rj)}):i(t,rj)}}),t.clear(),this.clearPendingEvents()}},{key:`clearPendingEvents`,value:function(){this.pendingEvents.clear()}},{key:`updateDisplayObjectDependency`,value:function(e,t,n,r){if(t&&t!==n){var i=this.displayObjectDependencyMap.get(t);if(i&&i[e]){var a=i[e].indexOf(r);i[e].splice(a,1)}}if(n){var o=this.displayObjectDependencyMap.get(n);o||=(this.displayObjectDependencyMap.set(n,{}),this.displayObjectDependencyMap.get(n)),o[e]||(o[e]=[]),o[e].push(r)}}},{key:`informDependentDisplayObjects`,value:function(e){var t,n=this,r=this.displayObjectDependencyMap.get(e);if(r){var i=(t=e.ownerDocument)==null||(t=t.defaultView)==null||(t=t.getConfig())==null||(t=t.future)==null?void 0:t.experimentalCancelEventPropagation;Object.keys(r).forEach(function(e){r[e].forEach(function(t){n.dirtyToRoot(t,!0),t.dispatchEvent(new RA(LA.ATTR_MODIFIED,t,n,n,e,RA.MODIFICATION,n,n),i,i),t.isCustomElement&&t.isConnected&&t.attributeChangedCallback&&t.attributeChangedCallback(e,n,n)})})}}}])}(),aj=function(){function e(t){if(W(this,e),t<=0)throw Error(`LRU capacity must be a positive number.`);this.capacity=t,this.cache=new Map}return G(e,[{key:`get`,value:function(e){if(this.cache.has(e)){var t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}}},{key:`put`,value:function(e,t){if(this.cache.has(e)&&this.cache.delete(e),this.cache.set(e,t),this.cache.size>this.capacity){var n=this.cache.keys().next().value;this.cache.delete(n)}}},{key:`len`,value:function(){return this.cache.size}},{key:`clear`,value:function(){this.cache.clear()}}])}(),oj={MetricsString:`|ÉqÅ`,BaselineSymbol:`M`,BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},sj=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,cj=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,lj=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,uj=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,dj=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,fj=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,pj=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,mj=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,hj=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,gj=RegExp(`${cj.source}|${uj.source}|${fj.source}|${mj.source}`),_j=RegExp(`${lj.source}|${dj.source}|${pj.source}|${hj.source}`),vj=function(){function e(t){var n=this;W(this,e),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(e,t){return n.isBreakingSpace(t)?!1:!!(e&&(_j.exec(t)||gj.exec(e)))},this.trimByKinsokuShorui=function(e){var t=Wy(e),n=t[t.length-2];if(!n)return e;var r=n[n.length-1];return t[t.length-2]=n.slice(0,-1),t[t.length-1]=r+t[t.length-1],t},this.runtime=t,this.charWidthCache=new aj(100)}return G(e,[{key:`measureFont`,value:function(e,t){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(t),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(t,{willReadFrequently:!0});i.font=e;var a=oj.MetricsString+oj.BaselineSymbol,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(oj.BaselineSymbol).width),c=oj.HeightMultiplier*s;s=s*oj.BaselineMultiplier|0,r.width=o,r.height=c,i.fillStyle=`#f00`,i.fillRect(0,0,o,c),i.font=e,i.textBaseline=`alphabetic`,i.fillStyle=`#000`,i.fillText(a,0,s);var l=i.getImageData(0,0,o||1,c||1).data,u=l.length,d=o*4,f=0,p=0,m=!1;for(f=0;f<s;++f){for(var h=0;h<d;h+=4)if(l[p+h]!==255){m=!0;break}if(!m)p+=d;else break}for(n.ascent=s-f,p=u-d,m=!1,f=c;f>s;--f){for(var g=0;g<d;g+=4)if(l[p+g]!==255){m=!0;break}if(!m)p-=d;else break}return n.descent=f-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[e]=n,n}},{key:`measureText`,value:function(e,t,n){var r=t.fontSize,i=r===void 0?16:r,a=t.wordWrap,o=a===void 0?!1:a,s=t.lineHeight,c=t.lineWidth,l=c===void 0?1:c,u=t.textBaseline,d=u===void 0?`alphabetic`:u,f=t.textAlign,p=f===void 0?`start`:f,m=t.letterSpacing,h=m===void 0?0:m,g=t.textPath;t.textPathSide,t.textPathStartOffset;var _=t.leading,v=_===void 0?0:_,y=eA(t),b=this.measureFont(y,n);b.fontSize===0&&(b.fontSize=i,b.ascent=i);var x=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);x.font=y,t.isOverflowing=!1;var S=(o?this.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),C=Array(S.length),w=0;if(g){g.getTotalLength();for(var T=0;T<S.length;T++)x.measureText(S[T]).width+(S[T].length-1)*h}else{for(var E=0;E<S.length;E++){var D=x.measureText(S[E]).width+(S[E].length-1)*h;C[E]=D,w=Math.max(w,D)}var O=w+l,k=s||b.fontSize+l,A=Math.max(k,b.fontSize+l)+(S.length-1)*(k+v);k+=v;var j=0;return d===`middle`?j=-A/2:d===`bottom`||d===`alphabetic`||d===`ideographic`?j=-A:(d===`top`||d===`hanging`)&&(j=0),{font:y,width:O,height:A,lines:S,lineWidths:C,lineHeight:k,maxLineWidth:w,fontProperties:b,lineMetrics:C.map(function(e,t){var n=0;return p===`center`||p===`middle`?n-=e/2:(p===`right`||p===`end`)&&(n-=e),new uT(n-l/2,j+t*k,e+l,k)})}}}},{key:`wordWrap`,value:function(e,t,n){var r=this,i=Array.from(e);if(i.length===0)return``;var a=this,o=t.wordWrapWidth,s=o===void 0?0:o,c=t.letterSpacing,l=c===void 0?0:c,u=t.maxLines,d=u===void 0?1/0:u,f=t.textOverflow,p=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),m=s+l,h=``;f===`ellipsis`?h=`...`:f&&f!==`clip`&&(h=f);var g=[``],_=0,v=0,y=-1,b=eA(t),x=this.charWidthCache.get(b);x||(x=new aj(500),this.charWidthCache.put(b,x));var S=function(e){return r.getFromCache(e,l,x,p)},C=S(h);function w(e,t,n,r){for(;S(e)<r&&t<i.length-1&&!a.isNewline(i[t+1]);)t+=1,e+=i[t];for(;S(e)>r&&t>=n;)--t,e=e.slice(0,-1);return{lineTxt:e,txtLastCharIndex:t}}function T(e,t){if(!(C<=0||C>m)){if(!g[e]){g[e]=h;return}g[e]=w(g[e],t,y+1,m-C).lineTxt+h}}for(var E=0;E<i.length;E++){var D=i[E],O=i[E-1],k=i[E+1],A=S(D);if(this.isNewline(D)){if(_+1>=d){E<i.length-1&&T(_,E-1),t.isOverflowing=!0;break}y=E-1,_+=1,v=0,g[_]=``;continue}if(A>m){T(_,E-1),t.isOverflowing=!0;break}if(v>0&&v+A>m){var j=w(g[_],E-1,y+1,m);if(j.txtLastCharIndex!==E-1){if(g[_]=j.lineTxt,j.txtLastCharIndex===i.length-1)break;E=j.txtLastCharIndex+1,D=i[E],O=i[E-1],k=i[E+1],A=S(D)}if(_+1>=d){T(_,E-1),t.isOverflowing=!0;break}if(y=E-1,_+=1,v=0,g[_]=``,this.isBreakingSpace(D))continue;this.canBreakInLastChar(D)||(g=this.trimToBreakable(g),v=this.sumTextWidthByCache(g[_]||``,S)),this.shouldBreakByKinsokuShorui(D,k)&&(g=this.trimByKinsokuShorui(g),v+=S(O||``))}v+=A,g[_]+=D}return g.join(`
`)}},{key:`isBreakingSpace`,value:function(e){return typeof e==`string`?oj.BreakingSpaces.indexOf(e.charCodeAt(0))>=0:!1}},{key:`isNewline`,value:function(e){return typeof e==`string`?oj.Newlines.indexOf(e.charCodeAt(0))>=0:!1}},{key:`trimToBreakable`,value:function(e){var t=Wy(e),n=t[t.length-2],r=this.findBreakableIndex(n);if(r===-1||!n)return t;var i=n.slice(r,r+1),a=this.isBreakingSpace(i),o=r+1,s=r+(a?0:1);return t[t.length-1]+=n.slice(o,n.length),t[t.length-2]=n.slice(0,s),t}},{key:`canBreakInLastChar`,value:function(e){return!(e&&sj.test(e))}},{key:`sumTextWidthByCache`,value:function(e,t){return e.split(``).reduce(function(e,n){return e+t(n)},0)}},{key:`findBreakableIndex`,value:function(e){for(var t=e.length-1;t>=0;t--)if(!sj.test(e[t]))return t;return-1}},{key:`getFromCache`,value:function(e,t,n,r){var i=n.get(e);if(typeof i!=`number`){var a=e.length*t;i=r.measureText(e).width+a,n.put(e,i)}return i}},{key:`clearCache`,value:function(){this.fontMetricsCache={},this.charWidthCache.clear()}}])}(),X={},yj=function(e){var t=new yA,n=new vA;return e={},U(U(U(U(U(U(U(U(U(U(e,q.FRAGMENT,null),q.CIRCLE,new mA),q.ELLIPSE,new hA),q.RECT,t),q.IMAGE,t),q.GROUP,new xA),q.LINE,new gA),q.TEXT,new bA(X)),q.POLYLINE,n),q.POLYGON,n),U(U(U(e,q.PATH,new _A),q.HTML,new SA),q.MESH,null)}(),bj=function(e){var t=new ek,n=new rk;return e={},U(U(U(U(U(U(U(U(U(U(e,J.PERCENTAGE,null),J.NUMBER,new sk),J.ANGLE,new QO),J.DEFINED_PATH,new $O),J.PAINT,t),J.COLOR,t),J.FILTER,new tk),J.LENGTH,n),J.LENGTH_PERCENTAGE,n),J.LENGTH_PERCENTAGE_12,new ik),U(U(U(U(U(U(U(U(U(U(e,J.LENGTH_PERCENTAGE_14,new ak),J.COORDINATE,new rk),J.OFFSET_DISTANCE,new ck),J.OPACITY_VALUE,new lk),J.PATH,new uk),J.LIST_OF_POINTS,new dk),J.SHADOW_BLUR,new fk),J.TEXT,new pk),J.TEXT_TRANSFORM,new mk),J.TRANSFORM,new dA),U(U(U(e,J.TRANSFORM_ORIGIN,new fA),J.Z_INDEX,new pA),J.MARKER,new ok)}();X.CameraContribution=UT,X.AnimationTimeline=null,X.EasingFunction=null,X.offscreenCanvasCreator=new MA,X.sceneGraphSelector=new IA,X.sceneGraphService=new ij(X),X.textService=new vj(X),X.geometryUpdaterFactory=yj,X.CSSPropertySyntaxFactory=bj,X.styleValueRegistry=new YO(X),X.layoutRegistry=null,X.globalThis=function(){return typeof globalThis<`u`?globalThis:typeof self<`u`?self:typeof window<`u`?window:typeof global<`u`?global:{}}(),X.enableStyleSyntax=!0,X.enableSizeAttenuation=!1;var xj=0,Sj=new RA(LA.INSERTED,null,``,``,``,0,``,``),Cj=new RA(LA.REMOVED,null,``,``,``,0,``,``),wj=new DA(LA.DESTROY),Tj=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.entity=xj++,e.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},e.cullable={strategy:WT.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.rBushNode={aabb:void 0},e.namespaceURI=`g`,e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.style={},e.computedStyle={},e.parsedStyle={},e.attributes={},e}return Zy(t,e),G(t,[{key:`dirty`,value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.renderable.dirty=e,t&&(this.renderable.boundsDirty=e,this.renderable.renderBoundsDirty=e)}},{key:`className`,get:function(){return this.getAttribute(`class`)||``},set:function(e){this.setAttribute(`class`,e)}},{key:`classList`,get:function(){return this.className.split(` `).filter(function(e){return e!==``})}},{key:`tagName`,get:function(){return this.nodeName}},{key:`children`,get:function(){return this.childNodes}},{key:`childElementCount`,get:function(){return this.childNodes.length}},{key:`firstElementChild`,get:function(){return this.firstChild}},{key:`lastElementChild`,get:function(){return this.lastChild}},{key:`parentElement`,get:function(){return this.parentNode}},{key:`nextSibling`,get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e+1]||null}return null}},{key:`previousSibling`,get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e-1]||null}return null}},{key:`cloneNode`,value:function(e){throw Error(dT)}},{key:`appendChild`,value:function(e,t){var n;if(e.destroyed)throw Error(pT);return X.sceneGraphService.attach(e,this,t),(n=this.ownerDocument)!=null&&n.defaultView&&(!Ak(this)&&e.nodeName===q.FRAGMENT?this.ownerDocument.defaultView.mountFragment(e):this.ownerDocument.defaultView.mountChildren(e)),this.isMutationObserved&&(Sj.relatedNode=this,e.dispatchEvent(Sj)),e}},{key:`insertBefore`,value:function(e,t){if(!t)this.appendChild(e);else{e.parentElement&&e.parentElement.removeChild(e);var n=this.childNodes.indexOf(t);n===-1?this.appendChild(e):this.appendChild(e,n)}return e}},{key:`replaceChild`,value:function(e,t){var n=this.childNodes.indexOf(t);return this.removeChild(t),this.appendChild(e,n),t}},{key:`removeChild`,value:function(e){var t,n,r=((t=this.ownerDocument)==null||(t=t.defaultView)==null||(t=t.getConfig().future)==null?void 0:t.experimentalCancelEventPropagation)===!0;return Cj.relatedNode=this,e.dispatchEvent(Cj,r,r),(n=e.ownerDocument)!=null&&n.defaultView&&e.ownerDocument.defaultView.unmountChildren(e),X.sceneGraphService.detach(e),e}},{key:`removeChildren`,value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];this.removeChild(t)}}},{key:`destroyChildren`,value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];t.childNodes.length>0&&t.destroyChildren(),t.destroy()}}},{key:`matches`,value:function(e){return X.sceneGraphService.matches(e,this)}},{key:`getElementById`,value:function(e){return X.sceneGraphService.querySelector(`#${e}`,this)}},{key:`getElementsByName`,value:function(e){return X.sceneGraphService.querySelectorAll(`[name="${e}"]`,this)}},{key:`getElementsByClassName`,value:function(e){return X.sceneGraphService.querySelectorAll(`.${e}`,this)}},{key:`getElementsByTagName`,value:function(e){return X.sceneGraphService.querySelectorAll(e,this)}},{key:`querySelector`,value:function(e){return X.sceneGraphService.querySelector(e,this)}},{key:`querySelectorAll`,value:function(e){return X.sceneGraphService.querySelectorAll(e,this)}},{key:`closest`,value:function(e){var t=this;do{if(X.sceneGraphService.matches(e,t))return t;t=t.parentElement}while(t!==null);return null}},{key:`find`,value:function(e){var t=this,n=null;return this.forEach(function(r){return r!==t&&e(r)?(n=r,!1):!0}),n}},{key:`findAll`,value:function(e){var t=this,n=[];return this.forEach(function(r){r!==t&&e(r)&&n.push(r)}),n}},{key:`after`,value:function(){var e=this;if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);[...arguments].forEach(function(n,r){return e.parentNode?.appendChild(n,t+r+1)})}}},{key:`before`,value:function(){if(this.parentNode){var e,t=this.parentNode.childNodes.indexOf(this),n=[...arguments],r=n[0],i=n.slice(1);this.parentNode.appendChild(r,t),(e=r).after.apply(e,Wy(i))}}},{key:`replaceWith`,value:function(){this.after.apply(this,arguments),this.remove()}},{key:`append`,value:function(){var e=this;[...arguments].forEach(function(t){return e.appendChild(t)})}},{key:`prepend`,value:function(){var e=this;[...arguments].forEach(function(t,n){return e.appendChild(t,n)})}},{key:`replaceChildren`,value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:`remove`,value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:`destroy`,value:function(){var e,t=((e=this.ownerDocument)==null||(e=e.defaultView)==null||(e=e.getConfig().future)==null?void 0:e.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(wj,t,t),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:`getGeometryBounds`,value:function(){return X.sceneGraphService.getGeometryBounds(this)}},{key:`getRenderBounds`,value:function(){return X.sceneGraphService.getBounds(this,!0)}},{key:`getBounds`,value:function(){return X.sceneGraphService.getBounds(this)}},{key:`getLocalBounds`,value:function(){return X.sceneGraphService.getLocalBounds(this)}},{key:`getBoundingClientRect`,value:function(){return X.sceneGraphService.getBoundingClientRect(this)}},{key:`getClientRects`,value:function(){return[this.getBoundingClientRect()]}},{key:`computedStyleMap`,value:function(){return new Map(Object.entries(this.computedStyle))}},{key:`getAttributeNames`,value:function(){return Object.keys(this.attributes)}},{key:`getAttribute`,value:function(e){if(typeof e!=`symbol`)return this.attributes[e]}},{key:`hasAttribute`,value:function(e){return this.getAttributeNames().includes(e)}},{key:`hasAttributes`,value:function(){return!!this.getAttributeNames().length}},{key:`removeAttribute`,value:function(e){this.setAttribute(e,null),delete this.attributes[e]}},{key:`setAttribute`,value:function(e,t,n,r){this.attributes[e]=t}},{key:`getAttributeNS`,value:function(e,t){throw Error(dT)}},{key:`getAttributeNode`,value:function(e){throw Error(dT)}},{key:`getAttributeNodeNS`,value:function(e,t){throw Error(dT)}},{key:`hasAttributeNS`,value:function(e,t){throw Error(dT)}},{key:`removeAttributeNS`,value:function(e,t){throw Error(dT)}},{key:`removeAttributeNode`,value:function(e){throw Error(dT)}},{key:`setAttributeNS`,value:function(e,t,n){throw Error(dT)}},{key:`setAttributeNode`,value:function(e){throw Error(dT)}},{key:`setAttributeNodeNS`,value:function(e){throw Error(dT)}},{key:`toggleAttribute`,value:function(e,t){throw Error(dT)}}])}(kA);function Ej(e){return!!(e!=null&&e.nodeName)}var Dj=X.globalThis.Proxy?X.globalThis.Proxy:function(){},Oj=new RA(LA.ATTR_MODIFIED,null,null,null,null,RA.MODIFICATION,null,null),kj=ax(),Aj=Fx(),jj=function(e){function t(e){var n;return W(this,t),n=Yy(this,t),n.isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=e,n.id=e.id||``,n.name=e.name||``,(e.className||e.class)&&(n.className=e.className||e.class),n.nodeName=e.type||q.GROUP,e.initialParsedStyle&&Object.assign(n.parsedStyle,e.initialParsedStyle),n.initAttributes(e.style),X.enableStyleSyntax&&(n.style=new Dj({setProperty:function(e,t){n.setAttribute(e,t)},getPropertyValue:function(e){return n.getAttribute(e)},removeProperty:function(e){n.removeAttribute(e)},item:function(){return``}},{get:function(e,t){return e[t]===void 0?n.getAttribute(t):e[t]},set:function(e,t,r){return n.setAttribute(t,r),!0}})),n}return Zy(t,e),G(t,[{key:`destroy`,value:function(){lw(t,`destroy`,this,3)([]),this.getAnimations().forEach(function(e){e.cancel()})}},{key:`cloneNode`,value:function(e,t){var n=Ly({},this.attributes);for(var r in n){var i=n[r];Ej(i)&&r!==`clipPath`&&r!==`offsetPath`&&r!==`textPath`&&(n[r]=i.cloneNode(e)),t&&(n[r]=t(r,i))}var a=new this.constructor(Ly(Ly({},this.config),{},{style:n}));return a.setLocalTransform(this.getLocalTransform()),e&&this.children.forEach(function(t){if(!t.style.isMarker){var n=t.cloneNode(e);a.appendChild(n)}}),a}},{key:`initAttributes`,value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X.styleValueRegistry.processProperties(this,e,{forceUpdateGeometry:!0}),this.dirty()}},{key:`setAttribute`,value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;BS(n)||(r||n!==this.attributes[e])&&(this.internalSetAttribute(e,n,{memoize:i}),lw(t,`setAttribute`,this,3)([e,n]))}},{key:`internalSetAttribute`,value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=this.attributes[e],i=this.parsedStyle[e];X.styleValueRegistry.processProperties(this,U({},e,t),n),this.dirty();var a=this.parsedStyle[e];if(this.isConnected)if(Oj.relatedNode=this,Oj.prevValue=r,Oj.newValue=t,Oj.attrName=e,Oj.prevParsedValue=i,Oj.newParsedValue=a,this.isMutationObserved)this.dispatchEvent(Oj);else{var o=this.ownerDocument.defaultView.getConfig().future?.experimentalCancelEventPropagation===!0;Oj.target=this,this.ownerDocument.defaultView.dispatchEvent(Oj,!0,o)}if(this.isCustomElement&&this.isConnected||!this.isCustomElement){var s,c;(s=(c=this).attributeChangedCallback)==null||s.call(c,e,r,t,i,a)}}},{key:`getBBox`,value:function(){var e=this.getBounds(),t=e.getMin(),n=eb(t,2),r=n[0],i=n[1],a=e.getMax(),o=eb(a,2),s=o[0],c=o[1];return new uT(r,i,s-r,c-i)}},{key:`setOrigin`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return X.sceneGraphService.setOrigin(this,gT(e,t,n,!1)),this}},{key:`getOrigin`,value:function(){return X.sceneGraphService.getOrigin(this)}},{key:`setPosition`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return X.sceneGraphService.setPosition(this,gT(e,t,n,!1)),this}},{key:`setLocalPosition`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return X.sceneGraphService.setLocalPosition(this,gT(e,t,n,!1)),this}},{key:`translate`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return X.sceneGraphService.translate(this,gT(e,t,n,!1)),this}},{key:`translateLocal`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return X.sceneGraphService.translateLocal(this,gT(e,t,n,!1)),this}},{key:`getPosition`,value:function(){return X.sceneGraphService.getPosition(this)}},{key:`getLocalPosition`,value:function(){return X.sceneGraphService.getLocalPosition(this)}},{key:`scale`,value:function(e,t,n){return this.scaleLocal(e,t,n)}},{key:`scaleLocal`,value:function(e,t,n){return typeof e==`number`&&(t||=e,n||=e,e=gT(e,t,n,!1)),X.sceneGraphService.scaleLocal(this,e),this}},{key:`setLocalScale`,value:function(e,t,n){return typeof e==`number`&&(t||=e,n||=e,e=gT(e,t,n,!1)),X.sceneGraphService.setLocalScale(this,e),this}},{key:`getLocalScale`,value:function(){return X.sceneGraphService.getLocalScale(this)}},{key:`getScale`,value:function(){return X.sceneGraphService.getScale(this)}},{key:`getEulerAngles`,value:function(){var e=TT(kj,X.sceneGraphService.getWorldTransform(this)),t=eb(e,3),n=t[2];return bT(n)}},{key:`getLocalEulerAngles`,value:function(){var e=TT(kj,X.sceneGraphService.getLocalRotation(this)),t=eb(e,3),n=t[2];return bT(n)}},{key:`setEulerAngles`,value:function(e){return X.sceneGraphService.setEulerAngles(this,0,0,e),this}},{key:`setLocalEulerAngles`,value:function(e){return X.sceneGraphService.setLocalEulerAngles(this,0,0,e),this}},{key:`rotateLocal`,value:function(e,t,n){return iS(t)&&iS(n)?X.sceneGraphService.rotateLocal(this,0,0,e):X.sceneGraphService.rotateLocal(this,e,t,n),this}},{key:`rotate`,value:function(e,t,n){return iS(t)&&iS(n)?X.sceneGraphService.rotate(this,0,0,e):X.sceneGraphService.rotate(this,e,t,n),this}},{key:`setRotation`,value:function(e,t,n,r){return X.sceneGraphService.setRotation(this,e,t,n,r),this}},{key:`setLocalRotation`,value:function(e,t,n,r){return X.sceneGraphService.setLocalRotation(this,e,t,n,r),this}},{key:`setLocalSkew`,value:function(e,t){return X.sceneGraphService.setLocalSkew(this,e,t),this}},{key:`getRotation`,value:function(){return X.sceneGraphService.getRotation(this)}},{key:`getLocalRotation`,value:function(){return X.sceneGraphService.getLocalRotation(this)}},{key:`getLocalSkew`,value:function(){return X.sceneGraphService.getLocalSkew(this)}},{key:`getLocalTransform`,value:function(){return X.sceneGraphService.getLocalTransform(this)}},{key:`getWorldTransform`,value:function(){return X.sceneGraphService.getWorldTransform(this)}},{key:`setLocalTransform`,value:function(e){return X.sceneGraphService.setLocalTransform(this,e),this}},{key:`resetLocalTransform`,value:function(){X.sceneGraphService.resetLocalTransform(this)}},{key:`getAnimations`,value:function(){return this.activeAnimations}},{key:`animate`,value:function(e,t){var n=this.ownerDocument?.timeline;return n?n.play(this,e,t):null}},{key:`isVisible`,value:function(){return this.parsedStyle?.visibility!==`hidden`}},{key:`interactive`,get:function(){return this.isInteractive()},set:function(e){this.style.pointerEvents=e?`auto`:`none`}},{key:`isInteractive`,value:function(){return this.parsedStyle?.pointerEvents!==`none`}},{key:`isCulled`,value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:`toFront`,value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,Wy(this.parentNode.children.map(function(e){return Number(e.style.zIndex)})))+1),this}},{key:`toBack`,value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,Wy(this.parentNode.children.map(function(e){return Number(e.style.zIndex)})))-1),this}},{key:`getConfig`,value:function(){return this.config}},{key:`attr`,value:function(){var e=this,t=[...arguments],n=t[0],r=t[1];return n?oS(n)?(Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])}),this):t.length===2?(this.setAttribute(n,r),this):this.attributes[n]:this.attributes}},{key:`getMatrix`,value:function(e){var t=e||this.getWorldTransform(),n=Mb(kj,t),r=eb(n,2),i=r[0],a=r[1],o=Nb(kj,t),s=eb(o,2),c=s[0],l=s[1],u=Pb(Aj,t),d=TT(kj,u),f=eb(d,3),p=f[0],m=f[2];return ET(p||m,i,a,c,l)}},{key:`getLocalMatrix`,value:function(){return this.getMatrix(this.getLocalTransform())}},{key:`setMatrix`,value:function(e){var t=OT(e),n=eb(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setEulerAngles(s).setPosition(r,i).setLocalScale(a,o)}},{key:`setLocalMatrix`,value:function(e){var t=OT(e),n=eb(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setLocalEulerAngles(s).setLocalPosition(r,i).setLocalScale(a,o)}},{key:`show`,value:function(){this.forEach(function(e){e.style.visibility=`visible`})}},{key:`hide`,value:function(){this.forEach(function(e){e.style.visibility=`hidden`})}},{key:`getCount`,value:function(){return this.childElementCount}},{key:`getParent`,value:function(){return this.parentElement}},{key:`getChildren`,value:function(){return this.children}},{key:`getFirst`,value:function(){return this.firstElementChild}},{key:`getLast`,value:function(){return this.lastElementChild}},{key:`getChildByIndex`,value:function(e){return this.children[e]||null}},{key:`add`,value:function(e,t){return this.appendChild(e,t)}},{key:`set`,value:function(e,t){this.config[e]=t}},{key:`get`,value:function(e){return this.config[e]}},{key:`moveTo`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(e,t,n),this}},{key:`move`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(e,t,n),this}},{key:`setZIndex`,value:function(e){return this.style.zIndex=e,this}}])}(Tj);jj.PARSED_STYLE_LIST=new Set(`class.className.clipPath.cursor.display.draggable.droppable.fill.fillOpacity.fillRule.filter.increasedLineWidthForHitTesting.lineCap.lineDash.lineDashOffset.lineJoin.lineWidth.miterLimit.hitArea.offsetDistance.offsetPath.offsetX.offsetY.opacity.pointerEvents.shadowColor.shadowType.shadowBlur.shadowOffsetX.shadowOffsetY.stroke.strokeOpacity.strokeWidth.strokeLinecap.strokeLineJoin.strokeDasharray.strokeDashoffset.transform.transformOrigin.textTransform.visibility.zIndex`.split(`.`));var Mj=function(e){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return W(this,t),Yy(this,t,[Ly({type:q.CIRCLE},e)])}return Zy(t,e),G(t)}(jj);Mj.PARSED_STYLE_LIST=new Set([].concat(Wy(jj.PARSED_STYLE_LIST),[`cx`,`cy`,`cz`,`r`,`isBillboard`,`isSizeAttenuation`]));var Nj=[`style`],Pj=function(e){function t(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=Kw(n,Nj);return W(this,t),e=Yy(this,t,[Ly({style:r},i)]),e.isCustomElement=!0,e}return Zy(t,e),G(t)}(jj);Pj.PARSED_STYLE_LIST=new Set([`class`,`className`,`clipPath`,`cursor`,`draggable`,`droppable`,`opacity`,`pointerEvents`,`transform`,`transformOrigin`,`zIndex`,`visibility`]);var Fj=function(e){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return W(this,t),Yy(this,t,[Ly({type:q.ELLIPSE},e)])}return Zy(t,e),G(t)}(jj);Fj.PARSED_STYLE_LIST=new Set([].concat(Wy(jj.PARSED_STYLE_LIST),[`cx`,`cy`,`cz`,`rx`,`ry`,`isBillboard`,`isSizeAttenuation`]));var Ij=function(e){function t(){return W(this,t),Yy(this,t,[{type:q.FRAGMENT}])}return Zy(t,e),G(t)}(jj);Ij.PARSED_STYLE_LIST=new Set([`class`,`className`]);var Lj=function(e){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return W(this,t),Yy(this,t,[Ly({type:q.GROUP},e)])}return Zy(t,e),G(t)}(jj);Lj.PARSED_STYLE_LIST=new Set([`class`,`className`,`clipPath`,`cursor`,`draggable`,`droppable`,`opacity`,`pointerEvents`,`transform`,`transformOrigin`,`zIndex`,`visibility`]);var Rj=[`style`],zj=function(e){function t(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=Kw(n,Rj);return W(this,t),e=Yy(this,t,[Ly({type:q.HTML,style:r},i)]),e.cullable.enable=!1,e}return Zy(t,e),G(t,[{key:`getDomElement`,value:function(){return this.parsedStyle.$el}},{key:`getClientRects`,value:function(){return[this.getBoundingClientRect()]}},{key:`getLocalBounds`,value:function(){if(this.parentNode){var e=mb(sb(),this.parentNode.getWorldTransform()),t=this.getBounds();if(!aT.isEmpty(t)){var n=new aT;return n.setFromTransformedAABB(t,e),n}}return this.getBounds()}}])}(jj);zj.PARSED_STYLE_LIST=new Set([].concat(Wy(jj.PARSED_STYLE_LIST),[`x`,`y`,`$el`,`innerHTML`,`width`,`height`]));var Bj=function(e){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return W(this,t),Yy(this,t,[Ly({type:q.IMAGE},e)])}return Zy(t,e),G(t)}(jj);Bj.PARSED_STYLE_LIST=new Set([].concat(Wy(jj.PARSED_STYLE_LIST),[`x`,`y`,`z`,`src`,`width`,`height`,`isBillboard`,`billboardRotation`,`isSizeAttenuation`,`keepAspectRatio`]));var Vj=[`style`],Hj=function(e){function t(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=Kw(n,Vj);W(this,t),e=Yy(this,t,[Ly({type:q.LINE,style:Ly({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i)]),e.markerStartAngle=0,e.markerEndAngle=0;var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd;return o&&Ej(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),s&&Ej(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e}return Zy(t,e),G(t,[{key:`attributeChangedCallback`,value:function(e,t,n,r,i){e===`x1`||e===`y1`||e===`x2`||e===`y2`||e===`markerStartOffset`||e===`markerEndOffset`?(this.transformMarker(!0),this.transformMarker(!1)):e===`markerStart`?(r&&Ej(r)&&(this.markerStartAngle=0,r.remove()),i&&Ej(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):e===`markerEnd`&&(r&&Ej(r)&&(this.markerEndAngle=0,r.remove()),i&&Ej(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)))}},{key:`transformMarker`,value:function(e){var t=this.parsedStyle,n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=t.x1,s=t.x2,c=t.y1,l=t.y2,u=e?n:r;if(!(!u||!Ej(u))){var d=0,f,p,m,h,g,_;e?(m=o,h=c,f=s-o,p=l-c,g=i||0,_=this.markerStartAngle):(m=s,h=l,f=o-s,p=c-l,g=a||0,_=this.markerEndAngle),d=Math.atan2(p,f),u.setLocalEulerAngles(d*180/Math.PI+_),u.setLocalPosition(m+Math.cos(d)*g,h+Math.sin(d)*g)}}},{key:`getPoint`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=this.parsedStyle,r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=bw(r,i,a,o,e),c=s.x,l=s.y,u=Sx(ax(),cx(c,l,0),t?this.getWorldTransform():this.getLocalTransform());return new lT(u[0],u[1])}},{key:`getPointAtLength`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(e/this.getTotalLength(),t)}},{key:`getTotalLength`,value:function(){var e=this.parsedStyle,t=e.x1,n=e.y1,r=e.x2,i=e.y2;return yw(t,n,r,i)}}])}(jj);Hj.PARSED_STYLE_LIST=new Set([].concat(Wy(jj.PARSED_STYLE_LIST),[`x1`,`y1`,`x2`,`y2`,`z1`,`z2`,`isBillboard`,`isSizeAttenuation`,`markerStart`,`markerEnd`,`markerStartOffset`,`markerEndOffset`]));var Uj=[`style`],Wj=function(e){function t(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=Kw(n,Uj);W(this,t),e=Yy(this,t,[Ly({type:q.PATH,style:r,initialParsedStyle:{miterLimit:4,d:Ly({},ZT)}},i)]),e.markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,c=a.markerMid;return o&&Ej(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),c&&Ej(c)&&e.placeMarkerMid(c),s&&Ej(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e}return Zy(t,e),G(t,[{key:`attributeChangedCallback`,value:function(e,t,n,r,i){e===`d`?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):e===`markerStartOffset`||e===`markerEndOffset`?(this.transformMarker(!0),this.transformMarker(!1)):e===`markerStart`?(r&&Ej(r)&&(this.markerStartAngle=0,r.remove()),i&&Ej(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):e===`markerEnd`?(r&&Ej(r)&&(this.markerEndAngle=0,r.remove()),i&&Ej(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):e===`markerMid`&&this.placeMarkerMid(i)}},{key:`transformMarker`,value:function(e){var t=this.parsedStyle,n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=e?n:r;if(!(!o||!Ej(o))){var s=0,c,l,u,d,f,p;if(e){var m=this.getStartTangent(),h=eb(m,2),g=h[0],_=h[1];u=_[0],d=_[1],c=g[0]-_[0],l=g[1]-_[1],f=i||0,p=this.markerStartAngle}else{var v=this.getEndTangent(),y=eb(v,2),b=y[0],x=y[1];u=x[0],d=x[1],c=b[0]-x[0],l=b[1]-x[1],f=a||0,p=this.markerEndAngle}s=Math.atan2(l,c),o.setLocalEulerAngles(s*180/Math.PI+p),o.setLocalPosition(u+Math.cos(s)*f,d+Math.sin(s)*f)}}},{key:`placeMarkerMid`,value:function(e){var t=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(e){e.remove()}),e&&Ej(e))for(var n=1;n<t.length-1;n++){var r=eb(t[n].currentPoint,2),i=r[0],a=r[1],o=n===1?e:e.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(i,a)}}},{key:`getTotalLength`,value:function(){return eO(this)}},{key:`getPointAtLength`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=this.parsedStyle.d.absolutePath,r=tw(n,e),i=r.x,a=r.y,o=Sx(ax(),cx(i,a,0),t?this.getWorldTransform():this.getLocalTransform());return new lT(o[0],o[1])}},{key:`getPoint`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(e*eO(this),t)}},{key:`getStartTangent`,value:function(){var e=this.parsedStyle.d.segments,t=[];if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t}},{key:`getEndTangent`,value:function(){var e=this.parsedStyle.d.segments,t=e.length,n=[];if(t>1){var r=e[t-2].currentPoint,i=e[t-1].currentPoint,a=e[t-1].endTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([r[0],r[1]]),n.push([i[0],i[1]]))}return n}}])}(jj);Wj.PARSED_STYLE_LIST=new Set([].concat(Wy(jj.PARSED_STYLE_LIST),[`d`,`markerStart`,`markerMid`,`markerEnd`,`markerStartOffset`,`markerEndOffset`,`isBillboard`,`isSizeAttenuation`]));var Gj=[`style`],Kj=function(e){function t(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=Kw(n,Gj);W(this,t),e=Yy(this,t,[Ly({type:q.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i)]),e.markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,c=a.markerMid;return o&&Ej(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),c&&Ej(c)&&e.placeMarkerMid(c),s&&Ej(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e}return Zy(t,e),G(t,[{key:`attributeChangedCallback`,value:function(e,t,n,r,i){e===`points`?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):e===`markerStartOffset`||e===`markerEndOffset`?(this.transformMarker(!0),this.transformMarker(!1)):e===`markerStart`?(r&&Ej(r)&&(this.markerStartAngle=0,r.remove()),i&&Ej(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):e===`markerEnd`?(r&&Ej(r)&&(this.markerEndAngle=0,r.remove()),i&&Ej(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):e===`markerMid`&&this.placeMarkerMid(i)}},{key:`transformMarker`,value:function(e){var t=this.parsedStyle,n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=t.points||{},s=o.points,c=e?n:r;if(!(!c||!Ej(c)||!s)){var l=0,u,d,f=s[0][0],p=s[0][1],m,h;if(e)u=s[1][0]-s[0][0],d=s[1][1]-s[0][1],m=i||0,h=this.markerStartAngle;else{var g=s.length;this.parsedStyle.isClosed?(u=s[g-1][0]-s[0][0],d=s[g-1][1]-s[0][1]):(f=s[g-1][0],p=s[g-1][1],u=s[g-2][0]-s[g-1][0],d=s[g-2][1]-s[g-1][1]),m=a||0,h=this.markerEndAngle}l=Math.atan2(d,u),c.setLocalEulerAngles(l*180/Math.PI+h),c.setLocalPosition(f+Math.cos(l)*m,p+Math.sin(l)*m)}}},{key:`placeMarkerMid`,value:function(e){var t=this.parsedStyle.points||{},n=t.points;if(this.markerMidList.forEach(function(e){e.remove()}),this.markerMidList=[],e&&Ej(e)&&n)for(var r=1;r<(this.parsedStyle.isClosed?n.length:n.length-1);r++){var i=n[r][0],a=n[r][1],o=r===1?e:e.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(i,a)}}}])}(jj);Kj.PARSED_STYLE_LIST=new Set([].concat(Wy(jj.PARSED_STYLE_LIST),[`points`,`markerStart`,`markerMid`,`markerEnd`,`markerStartOffset`,`markerEndOffset`,`isClosed`,`isBillboard`,`isSizeAttenuation`]));var qj=[`style`],Jj=function(e){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.style,r=Kw(e,qj);return W(this,t),Yy(this,t,[Ly({type:q.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)])}return Zy(t,e),G(t,[{key:`getTotalLength`,value:function(){return tO(this)}},{key:`getPointAtLength`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(e/this.getTotalLength(),t)}},{key:`getPoint`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var r=[],i=0,a,o,s=this.getTotalLength();n.forEach(function(e,t){n[t+1]&&(a=[0,0],a[0]=i/s,o=yw(e[0],e[1],n[t+1][0],n[t+1][1]),i+=o,a[1]=i/s,r.push(a))}),this.parsedStyle.points.segments=r}var c=0,l=0;this.parsedStyle.points.segments.forEach(function(t,n){e>=t[0]&&e<=t[1]&&(c=(e-t[0])/(t[1]-t[0]),l=n)});var u=bw(n[l][0],n[l][1],n[l+1][0],n[l+1][1],c),d=u.x,f=u.y,p=Sx(ax(),cx(d,f,0),t?this.getWorldTransform():this.getLocalTransform());return new lT(p[0],p[1])}},{key:`getStartTangent`,value:function(){var e=this.parsedStyle.points.points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t}},{key:`getEndTangent`,value:function(){var e=this.parsedStyle.points.points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n}}])}(Kj);Jj.PARSED_STYLE_LIST=new Set([].concat(Wy(Kj.PARSED_STYLE_LIST),[`points`,`markerStart`,`markerMid`,`markerEnd`,`markerStartOffset`,`markerEndOffset`,`isBillboard`]));var Yj=function(e){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return W(this,t),Yy(this,t,[Ly({type:q.RECT},e)])}return Zy(t,e),G(t)}(jj);Yj.PARSED_STYLE_LIST=new Set([].concat(Wy(jj.PARSED_STYLE_LIST),[`x`,`y`,`z`,`width`,`height`,`isBillboard`,`isSizeAttenuation`,`radius`]));var Xj=[`style`],Zj=function(e){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.style,r=Kw(e,Xj);return W(this,t),Yy(this,t,[Ly({type:q.TEXT,style:Ly({fill:`black`},n)},r)])}return Zy(t,e),G(t,[{key:`getComputedTextLength`,value:function(){return this.getGeometryBounds(),this.parsedStyle.metrics?.maxLineWidth||0}},{key:`getLineBoundingRects`,value:function(){return this.getGeometryBounds(),this.parsedStyle.metrics?.lineMetrics||[]}},{key:`isOverflowing`,value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(jj);Zj.PARSED_STYLE_LIST=new Set([].concat(Wy(jj.PARSED_STYLE_LIST),`x.y.z.isBillboard.billboardRotation.isSizeAttenuation.text.textAlign.textBaseline.fontStyle.fontSize.fontFamily.fontWeight.fontVariant.lineHeight.letterSpacing.leading.wordWrap.wordWrapWidth.maxLines.textOverflow.isOverflowing.textPath.textDecorationLine.textDecorationColor.textDecorationStyle.textPathSide.textPathStartOffset.metrics.dx.dy`.split(`.`)));var Qj=function(){function e(){W(this,e),this.registry={},this.define(q.CIRCLE,Mj),this.define(q.ELLIPSE,Fj),this.define(q.RECT,Yj),this.define(q.IMAGE,Bj),this.define(q.LINE,Hj),this.define(q.GROUP,Lj),this.define(q.PATH,Wj),this.define(q.POLYGON,Kj),this.define(q.POLYLINE,Jj),this.define(q.TEXT,Zj),this.define(q.HTML,zj)}return G(e,[{key:`define`,value:function(e,t){this.registry[e]=t}},{key:`get`,value:function(e){return this.registry[e]}}])}(),$j=function(e){function t(){var e;W(this,t),e=Yy(this,t),e.defaultView=null,e.ownerDocument=null,e.nodeName=`document`;try{e.timeline=new X.AnimationTimeline(e)}catch{}var n={};return KO.forEach(function(e){var t=e.n,r=e.inh,i=e.d;r&&i&&(n[t]=rS(i)?i(q.GROUP):i)}),e.documentElement=new Lj({id:`g-root`,style:n}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e}return Zy(t,e),G(t,[{key:`children`,get:function(){return this.childNodes}},{key:`childElementCount`,get:function(){return this.childNodes.length}},{key:`firstElementChild`,get:function(){return this.firstChild}},{key:`lastElementChild`,get:function(){return this.lastChild}},{key:`createElement`,value:function(e,t){if(e===`svg`)return this.documentElement;var n=this.defaultView.customElements.get(e);n||=(console.warn(`Unsupported tagName: `,e),e===`tspan`?Zj:Lj);var r=new n(t);return r.ownerDocument=this,r}},{key:`createElementNS`,value:function(e,t,n){return this.createElement(t,n)}},{key:`cloneNode`,value:function(e){throw Error(dT)}},{key:`destroy`,value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}}},{key:`elementsFromBBox`,value:function(e,t,n,r){var i=this.defaultView.context.rBushRoot.search({minX:e,minY:t,maxX:n,maxY:r}),a=[];return i.forEach(function(e){var t=e.displayObject,n=t.parsedStyle.pointerEvents,r=n===void 0?`auto`:n,i=[`auto`,`visiblepainted`,`visiblefill`,`visiblestroke`,`visible`].includes(r);(!i||i&&t.isVisible())&&!t.isCulled()&&t.isInteractive()&&a.push(t)}),a.sort(function(e,t){return t.sortable.renderOrder-e.sortable.renderOrder}),a}},{key:`elementFromPointSync`,value:function(e,t){var n=this.defaultView.canvas2Viewport({x:e,y:t}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return null;var c=this.defaultView.viewport2Client({x:r,y:i}),l=c.x,u=c.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:e,y:t,viewportX:r,viewportY:i,clientX:l,clientY:u},picked:[]}),f=d.picked;return f&&f[0]||this.documentElement}},{key:`elementFromPoint`,value:function(){var e=Ww(Hw().mark(function e(t,n){var r,i,a,o,s,c,l,u,d,f,p;return Hw().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.defaultView.canvas2Viewport({x:t,y:n}),i=r.x,a=r.y,o=this.defaultView.getConfig(),s=o.width,c=o.height,!(i<0||a<0||i>s||a>c)){e.next=1;break}return e.abrupt(`return`,null);case 1:return l=this.defaultView.viewport2Client({x:i,y:a}),u=l.x,d=l.y,e.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:t,y:n,viewportX:i,viewportY:a,clientX:u,clientY:d},picked:[]});case 2:return f=e.sent,p=f.picked,e.abrupt(`return`,p&&p[0]||this.documentElement);case 3:case`end`:return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:`elementsFromPointSync`,value:function(e,t){var n=this.defaultView.canvas2Viewport({x:e,y:t}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return[];var c=this.defaultView.viewport2Client({x:r,y:i}),l=c.x,u=c.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:e,y:t,viewportX:r,viewportY:i,clientX:l,clientY:u},picked:[]}),f=d.picked;return f[f.length-1]!==this.documentElement&&f.push(this.documentElement),f}},{key:`elementsFromPoint`,value:function(){var e=Ww(Hw().mark(function e(t,n){var r,i,a,o,s,c,l,u,d,f,p;return Hw().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.defaultView.canvas2Viewport({x:t,y:n}),i=r.x,a=r.y,o=this.defaultView.getConfig(),s=o.width,c=o.height,!(i<0||a<0||i>s||a>c)){e.next=1;break}return e.abrupt(`return`,[]);case 1:return l=this.defaultView.viewport2Client({x:i,y:a}),u=l.x,d=l.y,e.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:t,y:n,viewportX:i,viewportY:a,clientX:u,clientY:d},picked:[]});case 2:return f=e.sent,p=f.picked,p[p.length-1]!==this.documentElement&&p.push(this.documentElement),e.abrupt(`return`,p);case 3:case`end`:return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:`appendChild`,value:function(e,t){throw Error(fT)}},{key:`insertBefore`,value:function(e,t){throw Error(fT)}},{key:`removeChild`,value:function(e,t){throw Error(fT)}},{key:`replaceChild`,value:function(e,t,n){throw Error(fT)}},{key:`append`,value:function(){throw Error(fT)}},{key:`prepend`,value:function(){throw Error(fT)}},{key:`getElementById`,value:function(e){return this.documentElement.getElementById(e)}},{key:`getElementsByName`,value:function(e){return this.documentElement.getElementsByName(e)}},{key:`getElementsByTagName`,value:function(e){return this.documentElement.getElementsByTagName(e)}},{key:`getElementsByClassName`,value:function(e){return this.documentElement.getElementsByClassName(e)}},{key:`querySelector`,value:function(e){return this.documentElement.querySelector(e)}},{key:`querySelectorAll`,value:function(e){return this.documentElement.querySelectorAll(e)}},{key:`find`,value:function(e){return this.documentElement.find(e)}},{key:`findAll`,value:function(e){return this.documentElement.findAll(e)}}])}(kA),eM=function(){function e(t){W(this,e),this.strategies=t}return G(e,[{key:`apply`,value:function(t){var n=t.config,r=t.camera,i=t.renderingService,a=t.renderingContext,o=this.strategies;i.hooks.cull.tap(e.tag,function(e){if(e){var t=e.cullable;if(o.length===0?t.visible=a.unculledEntities.indexOf(e.entity)>-1:t.visible=o.every(function(t){return t.isVisible(r,e)}),!e.isCulled()&&e.isVisible())return e;var i=n.future?.experimentalCancelEventPropagation===!0;return e.dispatchEvent(new DA(LA.CULLED),i,i),null}return e}),i.hooks.afterRender.tap(e.tag,function(e){e.cullable.visibilityPlaneMask=-1})}}])}();eM.tag=`Culling`;var tM=function(){function e(){var t=this;W(this,e),this.autoPreventDefault=!1,this.rootPointerEvent=new TA(null),this.rootWheelEvent=new EA(null),this.onPointerMove=function(e){var n,r=(n=t.context.renderingContext.root)==null||(n=n.ownerDocument)==null?void 0:n.defaultView;if(!(r.supportsTouchEvents&&e.pointerType===`touch`)){var i=t.normalizeToPointerEvent(e,r),a=Gw(i),o;try{for(a.s();!(o=a.n()).done;){var s=o.value,c=t.bootstrapEvent(t.rootPointerEvent,s,r,e);t.context.eventService.mapEvent(c)}}catch(e){a.e(e)}finally{a.f()}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(e){var n,r=(n=t.context.renderingContext.root)==null||(n=n.ownerDocument)==null?void 0:n.defaultView,i=t.normalizeToPointerEvent(e,r),a=Gw(i),o;try{for(a.s();!(o=a.n()).done;){var s=o.value,c=t.bootstrapEvent(t.rootPointerEvent,s,r,e);t.context.eventService.mapEvent(c)}}catch(e){a.e(e)}finally{a.f()}t.setCursor(t.context.eventService.cursor)}}return G(e,[{key:`apply`,value:function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(e){return n.context.renderingService.hooks.pickSync.call({position:e,picked:[],topmost:!0}).picked[0]||null}),r.hooks.pointerWheel.tap(e.tag,function(e){var t=n.normalizeWheelEvent(e);n.context.eventService.mapEvent(t)}),r.hooks.pointerDown.tap(e.tag,function(e){if(!(i.supportsTouchEvents&&e.pointerType===`touch`)){var t=n.normalizeToPointerEvent(e,i);n.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!(`cancelable`in e))&&e.preventDefault();var r=Gw(t),a;try{for(r.s();!(a=r.n()).done;){var o=a.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s)}}catch(e){r.e(e)}finally{r.f()}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(e.tag,function(e){if(!(i.supportsTouchEvents&&e.pointerType===`touch`)){var t=n.context.contextService.getDomElement(),r=n.context.eventService.isNativeEventFromCanvas(t,e)?``:`outside`,a=n.normalizeToPointerEvent(e,i),o=Gw(a),s;try{for(o.s();!(s=o.n()).done;){var c=s.value,l=n.bootstrapEvent(n.rootPointerEvent,c,i,e);l.type+=r,n.context.eventService.mapEvent(l)}}catch(e){o.e(e)}finally{o.f()}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(e){var t=n.normalizeToPointerEvent(e,i),r=Gw(t),a;try{for(r.s();!(a=r.n()).done;){var o=a.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s)}}catch(e){r.e(e)}finally{r.f()}n.setCursor(n.context.eventService.cursor)})}},{key:`bootstrapEvent`,value:function(e,t,n,r){e.view=n,e.originalEvent=null,e.nativeEvent=r,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var i=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),a=i.x,o=i.y;e.viewport.x=a,e.viewport.y=o;var s=this.context.eventService.viewport2Canvas(e.viewport),c=s.x,l=s.y;return e.canvas.x=c,e.canvas.y=l,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=r.isTrusted,e.type===`pointerleave`&&(e.type=`pointerout`),e.type.startsWith(`mouse`)&&(e.type=e.type.replace(`mouse`,`pointer`)),e.type.startsWith(`touch`)&&(e.type=Ok[e.type]||e.type),e}},{key:`normalizeWheelEvent`,value:function(e){var t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;var n=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),r=n.x,i=n.y;t.viewport.x=r,t.viewport.y=i;var a=this.context.eventService.viewport2Canvas(t.viewport),o=a.x,s=a.y;return t.canvas.x=o,t.canvas.y=s,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.nativeEvent=e,t.type=e.type,t}},{key:`transferMouseData`,value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=kk.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null}},{key:`setCursor`,value:function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||`default`)}},{key:`normalizeToPointerEvent`,value:function(e,t){var n=[];if(t.isTouchEvent(e))for(var r=0;r<e.changedTouches.length;r++){var i=e.changedTouches[r];BS(i.button)&&(i.button=0),BS(i.buttons)&&(i.buttons=1),BS(i.isPrimary)&&(i.isPrimary=e.touches.length===1&&e.type===`touchstart`),BS(i.width)&&(i.width=i.radiusX||1),BS(i.height)&&(i.height=i.radiusY||1),BS(i.tiltX)&&(i.tiltX=0),BS(i.tiltY)&&(i.tiltY=0),BS(i.pointerType)&&(i.pointerType=`touch`),BS(i.pointerId)&&(i.pointerId=i.identifier||0),BS(i.pressure)&&(i.pressure=i.force||.5),BS(i.twist)&&(i.twist=0),BS(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=e.type,n.push(i)}else if(t.isMouseEvent(e)){var a=e;BS(a.isPrimary)&&(a.isPrimary=!0),BS(a.width)&&(a.width=1),BS(a.height)&&(a.height=1),BS(a.tiltX)&&(a.tiltX=0),BS(a.tiltY)&&(a.tiltY=0),BS(a.pointerType)&&(a.pointerType=`mouse`),BS(a.pointerId)&&(a.pointerId=Dk),BS(a.pressure)&&(a.pressure=.5),BS(a.twist)&&(a.twist=0),BS(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(e);return n}}])}();tM.tag=`Event`;var nM=[q.CIRCLE,q.ELLIPSE,q.IMAGE,q.RECT,q.LINE,q.POLYLINE,q.POLYGON,q.TEXT,q.PATH,q.HTML],rM=function(){function e(){W(this,e)}return G(e,[{key:`isVisible`,value:function(e,t){var n,r=t.cullable;if(!r.enable)return!0;var i=t.getRenderBounds();if(aT.isEmpty(i))return!1;var a=e.getFrustum(),o=(n=t.parentNode)==null||(n=n.cullable)==null?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,i,o||sT.INDETERMINATE,a.planes),r.visible=r.visibilityPlaneMask!==sT.OUTSIDE,r.visible}},{key:`computeVisibilityWithPlaneMask`,value:function(e,t,n,r){if(n===sT.OUTSIDE||n===sT.INSIDE)return n;for(var i=sT.INSIDE,a=nM.indexOf(e.nodeName)>-1,o=0,s=r.length;o<s;++o){var c=1<<o;if((n&c)!==0&&!(a&&(o===4||o===5))){var l=r[o],u=l.normal,d=l.distance;if(yx(u,t.getPositiveFarPoint(r[o]))+d<0)return sT.OUTSIDE;yx(u,t.getNegativeFarPoint(r[o]))+d<0&&(i|=c)}}return i}}])}(),iM=function(){function e(){W(this,e),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return G(e,[{key:`apply`,value:function(t){var n=this,r=t.config,i=t.renderingService,a=t.renderingContext,o=t.rBushRoot,s=a.root.ownerDocument.defaultView;this.rBush=o;var c=function(e){i.dirtify()},l=function(e){n.syncTasks.set(e.target,e.detail.affectChildren),i.dirtify()},u=function(e){var t=e.target;X.enableSizeAttenuation&&X.styleValueRegistry.updateSizeAttenuation(t,s.getCamera().getZoom())},d=function(e){var t=e.target,r=t.rBushNode;r!=null&&r.aabb&&n.rBush.remove(r.aabb),n.syncTasks.delete(t),X.sceneGraphService.dirtyToRoot(t),i.dirtify()};i.hooks.init.tap(e.tag,function(){s.addEventListener(LA.MOUNTED,u),s.addEventListener(LA.UNMOUNTED,d),s.addEventListener(LA.ATTR_MODIFIED,c),s.addEventListener(LA.BOUNDS_CHANGED,l)}),i.hooks.destroy.tap(e.tag,function(){s.removeEventListener(LA.MOUNTED,u),s.removeEventListener(LA.UNMOUNTED,d),s.removeEventListener(LA.ATTR_MODIFIED,c),s.removeEventListener(LA.BOUNDS_CHANGED,l),n.syncTasks.clear()});var f=X.globalThis.requestIdleCallback??Gk.bind(X.globalThis),p=r.future?.experimentalRICSyncRTree===!0;i.hooks.endFrame.tap(e.tag,function(){n.isFirstTimeRendering?(n.isFirstTimeRendering=!1,n.syncing=!0,f(function(){n.syncRTree(!0),n.isFirstTimeRenderingFinished=!0})):p&&X.globalThis.requestIdleCallback&&X.globalThis.cancelIdleCallback?(X.globalThis.cancelIdleCallback(n.ricSyncRTreeId),n.ricSyncRTreeId=X.globalThis.requestIdleCallback(function(){return n.syncRTree()})):n.syncRTree()})}},{key:`syncNode`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.isConnected){var n=e.rBushNode;n.aabb&&this.rBush.remove(n.aabb);var r=e.getRenderBounds();if(r){var i=e.renderable;t&&(i.dirtyRenderBounds||=new aT,i.dirtyRenderBounds.update(r.center,r.halfExtents));var a=r.getMin(),o=eb(a,2),s=o[0],c=o[1],l=r.getMax(),u=eb(l,2),d=u[0],f=u[1];n.aabb||={},n.aabb.displayObject=e,n.aabb.minX=s,n.aabb.minY=c,n.aabb.maxX=d,n.aabb.maxY=f}if(n.aabb&&!isNaN(n.aabb.maxX)&&!isNaN(n.aabb.maxX)&&!isNaN(n.aabb.minX)&&!isNaN(n.aabb.minY))return n.aabb}}},{key:`syncRTree`,value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!t&&(this.syncing||this.syncTasks.size===0))){this.syncing=!0;var n=[],r=new Set,i=function(i){if(!r.has(i)&&i.renderable){var a=e.syncNode(i,t);a&&(n.push(a),r.add(i))}};this.syncTasks.forEach(function(e,t){e&&t.forEach(i);for(var n=t;n;)i(n),n=n.parentElement}),this.rBush.load(n),n.length=0,this.syncing=!1}}}])}();iM.tag=`Prepare`;var aM=function(e){return e.READY=`ready`,e.BEFORE_RENDER=`beforerender`,e.RERENDER=`rerender`,e.AFTER_RENDER=`afterrender`,e.BEFORE_DESTROY=`beforedestroy`,e.AFTER_DESTROY=`afterdestroy`,e.RESIZE=`resize`,e.DIRTY_RECTANGLE=`dirtyrectangle`,e.RENDERER_CHANGED=`rendererchanged`,e}({}),oM=500,sM=.1,cM=1e3,lM=new DA(LA.MOUNTED),uM=new DA(LA.UNMOUNTED),dM=new DA(aM.BEFORE_RENDER),fM=new DA(aM.RERENDER),pM=new DA(aM.AFTER_RENDER),mM=function(e){function t(e){var n;W(this,t),n=Yy(this,t),n.Element=jj,n.inited=!1,n.context={};var r=e.container,i=e.canvas,a=e.renderer,o=e.width,s=e.height,c=e.background,l=e.cursor,u=e.supportsMutipleCanvasesInOneContainer,d=e.cleanUpOnDestroy,f=d===void 0?!0:d,p=e.offscreenCanvas,m=e.devicePixelRatio,h=e.requestAnimationFrame,g=e.cancelAnimationFrame,_=e.createImage,v=e.supportsTouchEvents,y=e.supportsPointerEvents,b=e.isTouchEvent,x=e.isMouseEvent,S=e.dblClickSpeed,C=o,w=s,T=m||_k&&window.devicePixelRatio||1;return T=T>=1?Math.ceil(T):1,i&&(C=o||Tk(i)||i.width/T,w=s||Ek(i)||i.height/T),n.customElements=new Qj,n.devicePixelRatio=T,n.requestAnimationFrame=h??Gk.bind(X.globalThis),n.cancelAnimationFrame=g??Kk.bind(X.globalThis),n.createImage=_??function(){return new window.Image},n.supportsTouchEvents=v??`ontouchstart`in X.globalThis,n.supportsPointerEvents=y??!!X.globalThis.PointerEvent,n.isTouchEvent=b??function(e){return n.supportsTouchEvents&&e instanceof X.globalThis.TouchEvent},n.isMouseEvent=x??function(e){return!X.globalThis.MouseEvent||e instanceof X.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(e instanceof X.globalThis.PointerEvent))},p&&(X.offscreenCanvas=p),n.document=new $j,n.document.defaultView=n,u||gk(r,n,f),n.initRenderingContext(Ly(Ly({},e),{},{width:C,height:w,background:c??`transparent`,cursor:l??`default`,cleanUpOnDestroy:f,devicePixelRatio:T,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,createImage:n.createImage,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:S??200})),n.initDefaultCamera(C,w,a.clipSpaceNearZ),n.initRenderer(a,!0),n}return Zy(t,e),G(t,[{key:`initRenderingContext`,value:function(e){this.context.config=e,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:`initDefaultCamera`,value:function(e,t,n){var r=this,i=new X.CameraContribution;i.clipSpaceNearZ=n,i.setType(RT.EXPLORING,zT.DEFAULT).setPosition(e/2,t/2,oM).setFocalPoint(e/2,t/2,0).setOrthographic(e/-2,e/2,t/2,t/-2,sM,cM),i.canvas=this,i.eventEmitter.on(VT.UPDATED,function(){r.context.renderingContext.renderReasons.add(NA.CAMERA_CHANGED),X.enableSizeAttenuation&&r.getConfig().renderer.getConfig().enableSizeAttenuation&&r.updateSizeAttenuation()}),this.context.camera=i}},{key:`updateSizeAttenuation`,value:function(){var e=this.getCamera().getZoom();this.document.documentElement.forEach(function(t){X.styleValueRegistry.updateSizeAttenuation(t,e)})}},{key:`getConfig`,value:function(){return this.context.config}},{key:`getRoot`,value:function(){return this.document.documentElement}},{key:`getCamera`,value:function(){return this.context.camera}},{key:`getContextService`,value:function(){return this.context.contextService}},{key:`getEventService`,value:function(){return this.context.eventService}},{key:`getRenderingService`,value:function(){return this.context.renderingService}},{key:`getRenderingContext`,value:function(){return this.context.renderingContext}},{key:`getStats`,value:function(){return this.getRenderingService().getStats()}},{key:`ready`,get:function(){var e=this;return this.readyPromise||(this.readyPromise=new Promise(function(t){e.resolveReadyPromise=function(){t(e)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:`destroy`,value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1?arguments[1]:void 0;LE.clearCache();var n=this.getConfig().future?.experimentalCancelEventPropagation===!0;t||this.dispatchEvent(new DA(aM.BEFORE_DESTROY),n,n),this.frameId&&this.cancelAnimationFrame(this.frameId);var r=this.getRoot();e&&(this.unmountChildren(r),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),t||this.dispatchEvent(new DA(aM.AFTER_DESTROY),n,n);var i=function(e){e.currentTarget=null,e.manager=null,e.target=null,e.relatedNode=null};i(lM),i(uM),i(dM),i(fM),i(pM),i(Oj),i(Sj),i(Cj),i(wj),X.textService.clearCache()}},{key:`changeSize`,value:function(e,t){this.resize(e,t)}},{key:`resize`,value:function(e,t){var n=this.context.config;n.width=e,n.height=t,this.getContextService().resize(e,t);var r=this.context.camera,i=r.getProjectionMode();r.setPosition(e/2,t/2,oM).setFocalPoint(e/2,t/2,0),i===BT.ORTHOGRAPHIC?r.setOrthographic(e/-2,e/2,t/2,t/-2,r.getNear(),r.getFar()):r.setAspect(e/t);var a=n.future?.experimentalCancelEventPropagation===!0;this.dispatchEvent(new DA(aM.RESIZE,{width:e,height:t}),a,a)}},{key:`appendChild`,value:function(e,t){return this.document.documentElement.appendChild(e,t)}},{key:`insertBefore`,value:function(e,t){return this.document.documentElement.insertBefore(e,t)}},{key:`removeChild`,value:function(e){return this.document.documentElement.removeChild(e)}},{key:`removeChildren`,value:function(){this.document.documentElement.removeChildren()}},{key:`destroyChildren`,value:function(){this.document.documentElement.destroyChildren()}},{key:`render`,value:function(e){var t=this;e&&(dM.detail=e,pM.detail=e);var n=this.getConfig().future?.experimentalCancelEventPropagation===!0;this.dispatchEvent(dM,n,n),this.getRenderingService().render(this.getConfig(),e,function(){t.dispatchEvent(fM,n,n)}),this.dispatchEvent(pM,n,n)}},{key:`run`,value:function(){var e=this,t=function(n,r){e.render(r),e.frameId=e.requestAnimationFrame(t)};t()}},{key:`initRenderer`,value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e)throw Error(`Renderer is required.`);this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new Yw,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new tM,new iM,new eM([new rM])),this.loadRendererContainerModule(e),this.context.contextService=new this.context.ContextService(Ly(Ly({},X),this.context)),this.context.renderingService=new PA(X,this.context),this.context.eventService=new jA(X,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(e,n,!0)):this.context.contextService.initAsync().then(function(){t.initRenderingService(e,n)}).catch(function(e){console.error(e)})}},{key:`initRenderingService`,value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){t.inited=!0;var i=t.getConfig().future?.experimentalCancelEventPropagation===!0;n?r?t.requestAnimationFrame(function(){t.dispatchEvent(new DA(aM.READY),i,i)}):t.dispatchEvent(new DA(aM.READY),i,i):t.dispatchEvent(new DA(aM.RENDERER_CHANGED),i,i),t.readyPromise&&t.resolveReadyPromise(),n||t.getRoot().forEach(function(e){var t,n;(t=(n=e).dirty)==null||t.call(n,!0,!0)}),t.mountChildren(t.getRoot()),e.getConfig().enableAutoRendering&&t.run()})}},{key:`loadRendererContainerModule`,value:function(e){var t=this;e.getPlugins().forEach(function(e){e.context=t.context,e.init(X)})}},{key:`setRenderer`,value:function(e){var t=this.getConfig();if(t.renderer!==e){var n=t.renderer;t.renderer=e,this.destroy(!1,!0),Wy(n?.getPlugins()||[]).reverse().forEach(function(e){e.destroy(X)}),this.initRenderer(e)}}},{key:`setCursor`,value:function(e){var t=this.getConfig();t.cursor=e,this.getContextService().applyCursorStyle(e)}},{key:`unmountChildren`,value:function(e){var t=this;if(e.childNodes.forEach(function(e){t.unmountChildren(e)}),this.inited){if(e.isMutationObserved)e.dispatchEvent(uM);else{var n=this.getConfig().future?.experimentalCancelEventPropagation===!0;uM.target=e,this.dispatchEvent(uM,!0,n)}e!==this.document.documentElement&&(e.ownerDocument=null),e.isConnected=!1}e.isCustomElement&&e.disconnectedCallback&&e.disconnectedCallback()}},{key:`mountChildren`,value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ak(e);if(this.inited){if(!e.isConnected&&(e.ownerDocument=this.document,e.isConnected=!0,!n))if(e.isMutationObserved)e.dispatchEvent(lM);else{var r=this.getConfig().future?.experimentalCancelEventPropagation===!0;lM.target=e,this.dispatchEvent(lM,!0,r)}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.",`appended child: `,e.nodeName);e.childNodes.forEach(function(e){t.mountChildren(e,n)}),e.isCustomElement&&e.connectedCallback&&e.connectedCallback()}},{key:`mountFragment`,value:function(e){this.mountChildren(e,!1)}},{key:`client2Viewport`,value:function(e){return this.getEventService().client2Viewport(e)}},{key:`viewport2Client`,value:function(e){return this.getEventService().viewport2Client(e)}},{key:`viewport2Canvas`,value:function(e){return this.getEventService().viewport2Canvas(e)}},{key:`canvas2Viewport`,value:function(e){return this.getEventService().canvas2Viewport(e)}},{key:`getPointByClient`,value:function(e,t){return this.client2Viewport({x:e,y:t})}},{key:`getClientByPoint`,value:function(e,t){return this.viewport2Client({x:e,y:t})}}])}(OA);X.CameraContribution=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.landmarks=[],e}return Zy(t,e),G(t,[{key:`rotate`,value:function(e,t,n){if(this.relElevation=mT(t),this.relAzimuth=mT(e),this.relRoll=mT(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===RT.EXPLORING){var r=Ix(Fx(),[1,0,0],vT((this.rotateWorld?1:-1)*this.relElevation)),i=Ix(Fx(),[0,1,0],vT((this.rotateWorld?1:-1)*this.relAzimuth)),a=Ix(Fx(),[0,0,1],vT(this.relRoll)),o=Lx(Fx(),i,r);o=Lx(Fx(),o,a);var s=Rb(sb(),o);vb(this.matrix,this.matrix,[0,0,-this.distance]),_b(this.matrix,this.matrix,s),vb(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===RT.ORBITING||this.type===RT.EXPLORING?this._getPosition():this.type===RT.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:`pan`,value:function(e,t){var n=gT(e,t,0),r=ox(this.position);return dx(r,r,gx(ax(),this.right,n[0])),dx(r,r,gx(ax(),this.up,n[1])),this._setPosition(r),this.triggerUpdate(),this}},{key:`dolly`,value:function(e){var t=this.forward,n=ox(this.position),r=e*this.dollyingStep,i=this.distance+e*this.dollyingStep;return r=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*t[0],n[1]+=r*t[1],n[2]+=r*t[2],this._setPosition(n),this.type===RT.ORBITING||this.type===RT.EXPLORING?this._getDistance():this.type===RT.TRACKING&&dx(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this}},{key:`cancelLandmarkAnimation`,value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:`createLandmark`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.position,r=n===void 0?this.position:n,i=t.focalPoint,a=i===void 0?this.focalPoint:i,o=t.roll,s=t.zoom,c=new X.CameraContribution;c.setType(this.type,void 0),c.setPosition(r[0],r[1]??this.position[1],r[2]??this.position[2]),c.setFocalPoint(a[0],a[1]??this.focalPoint[1],a[2]??this.focalPoint[2]),c.setRoll(o??this.roll),c.setZoom(s??this.zoom);var l={name:e,matrix:cb(c.getWorldTransform()),right:ox(c.right),up:ox(c.up),forward:ox(c.forward),position:ox(c.getPosition()),focalPoint:ox(c.getFocalPoint()),distanceVector:ox(c.getDistanceVector()),distance:c.getDistance(),dollyingStep:c.getDollyingStep(),azimuth:c.getAzimuth(),elevation:c.getElevation(),roll:c.getRoll(),relAzimuth:c.relAzimuth,relElevation:c.relElevation,relRoll:c.relRoll,zoom:c.getZoom()};return this.landmarks.push(l),l}},{key:`gotoLandmark`,value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=_S(e)?this.landmarks.find(function(t){return t.name===e}):e;if(r){var i=K(n)?{duration:n}:n,a=i.easing,o=a===void 0?`linear`:a,s=i.duration,c=s===void 0?100:s,l=i.easingFunction,u=l===void 0?void 0:l,d=i.onfinish,f=d===void 0?void 0:d,p=i.onframe,m=p===void 0?void 0:p,h=.01;this.cancelLandmarkAnimation();var g=r.position,_=r.focalPoint,v=r.zoom,y=r.roll,b=u||X.EasingFunction(o),x,S=function(){t.setFocalPoint(_),t.setPosition(g),t.setRoll(y),t.setZoom(v),t.computeMatrix(),t.triggerUpdate(),f?.()};if(c===0)return S();var C=function(e){x===void 0&&(x=e);var n=e-x;if(n>=c){S();return}var r=b(n/c),i=ax(),a=ax(),o=1,s=0;if(xx(i,t.focalPoint,_,r),xx(a,t.position,g,r),s=t.roll*(1-r)+y*r,o=t.zoom*(1-r)+v*r,t.setFocalPoint(i),t.setPosition(a),t.setRoll(s),t.setZoom(o),Dx(i,_)+Dx(a,g)<=h&&v===void 0&&y===void 0)return S();t.computeMatrix(),t.triggerUpdate(),n<c&&(m?.(r),t.landmarkAnimationID=t.canvas.requestAnimationFrame(C))};this.canvas.requestAnimationFrame(C)}}}])}(UT);var hM=function(e){function t(e,n,r,i){var a;return W(this,t),a=Yy(this,t,[e]),a.currentTime=r,a.timelineTime=i,a.target=n,a.type=`finish`,a.bubbles=!1,a.currentTarget=n,a.defaultPrevented=!1,a.eventPhase=a.AT_TARGET,a.timeStamp=Date.now(),a.currentTime=r,a.timelineTime=i,a}return Zy(t,e),G(t)}(CA),gM=0,_M=function(){function e(t,n){W(this,e),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=n,this.id=`${gM++}`,this._inEffect=!!this.effect.update(0),this._totalDuration=Number(this.effect?.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState=`idle`,this.updatePromises()}return G(e,[{key:`pending`,get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:`playState`,get:function(){return this._idle?`idle`:this._isFinished?`finished`:this._paused?`paused`:`running`}},{key:`ready`,get:function(){var e=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(t,n){e.resolveReadyPromise=function(){t(e)},e.rejectReadyPromise=function(){n(Error())}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:`finished`,get:function(){var e=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(t,n){e.resolveFinishedPromise=function(){t(e)},e.rejectFinishedPromise=function(){n(Error())}}),this.playState===`finished`&&this.resolveFinishedPromise()),this.finishedPromise}},{key:`currentTime`,get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(e){e=Number(e),!isNaN(e)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number(this.timeline?.currentTime)-e/this.playbackRate),this.currentTimePending=!1,this._currentTime!==e&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(e,!0),this.timeline.applyDirtiedAnimation(this)))}},{key:`startTime`,get:function(){return this._startTime},set:function(e){if(e!==null){if(this.updatePromises(),e=Number(e),isNaN(e)||this._paused||this._idle)return;this._startTime=e,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:`playbackRate`,get:function(){return this._playbackRate},set:function(e){if(e!==this._playbackRate){this.updatePromises();var t=this.currentTime;this._playbackRate=e,this.startTime=null,this.playState!==`paused`&&this.playState!==`idle`&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),t!==null&&(this.currentTime=t),this.updatePromises()}}},{key:`_isFinished`,get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:`totalDuration`,get:function(){return this._totalDuration}},{key:`_needsTick`,get:function(){return this.pending||this.playState===`running`||!this._finishedFlag}},{key:`updatePromises`,value:function(){var e;if((e=this.effect.target)!=null&&e.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var t=this.oldPlayState,n=this.pending?`pending`:this.playState;return this.readyPromise&&n!==t&&(n===`idle`?(this.rejectReadyPromise(),this.readyPromise=void 0):t===`pending`?this.resolveReadyPromise():n===`pending`&&(this.readyPromise=void 0)),this.finishedPromise&&n!==t&&(n===`idle`?(this.rejectFinishedPromise(),this.finishedPromise=void 0):n===`finished`?this.resolveFinishedPromise():t===`finished`&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise}},{key:`play`,value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:`pause`,value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&=(this.rewind(),!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:`finish`,value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:`cancel`,value:function(){var e=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var t=new hM(null,this,this.currentTime,null);setTimeout(function(){e.oncancel(t)})}}},{key:`reverse`,value:function(){this.updatePromises();var e=this.currentTime;this.playbackRate*=-1,this.play(),e!==null&&(this.currentTime=e),this.updatePromises()}},{key:`updatePlaybackRate`,value:function(e){this.playbackRate=e}},{key:`targetAnimations`,value:function(){return(this.effect?.target).getAnimations()}},{key:`markTarget`,value:function(){var e=this.targetAnimations();e.indexOf(this)===-1&&e.push(this)}},{key:`unmarkTarget`,value:function(){var e=this.targetAnimations(),t=e.indexOf(this);t!==-1&&e.splice(t,1)}},{key:`tick`,value:function(e,t){!this._idle&&!this._paused&&(this._startTime===null?t&&(this.startTime=e-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((e-this._startTime)*this.playbackRate)),t&&(this.currentTimePending=!1,this.fireEvents(e))}},{key:`rewind`,value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw Error(`Unable to rewind negative playback rate animation with infinite duration`)}},{key:`persist`,value:function(){throw Error(dT)}},{key:`addEventListener`,value:function(e,t,n){throw Error(dT)}},{key:`removeEventListener`,value:function(e,t,n){throw Error(dT)}},{key:`dispatchEvent`,value:function(e){throw Error(dT)}},{key:`commitStyles`,value:function(){throw Error(dT)}},{key:`ensureAlive`,value:function(){if(this.playbackRate<0&&this.currentTime===0){var e;this._inEffect=!!((e=this.effect)!=null&&e.update(-1))}else{var t;this._inEffect=!!((t=this.effect)!=null&&t.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:`tickCurrentTime`,value:function(e,t){e!==this._currentTime&&(this._currentTime=e,this._isFinished&&!t&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:`fireEvents`,value:function(e){var t=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var n=new hM(null,this,this.currentTime,e);setTimeout(function(){t.onfinish&&t.onfinish(n)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState===`running`){var r=new hM(null,this,this.currentTime,e);this.onframe(r)}this._finishedFlag=!1}}}])}(),vM=4,yM=.001,bM=1e-7,xM=10,SM=11,CM=1/(SM-1),wM=typeof Float32Array==`function`,TM=function(e,t){return 1-3*t+3*e},EM=function(e,t){return 3*t-6*e},DM=function(e){return 3*e},OM=function(e,t,n){return((TM(t,n)*e+EM(t,n))*e+DM(t))*e},kM=function(e,t,n){return 3*TM(t,n)*e*e+2*EM(t,n)*e+DM(t)},AM=function(e,t,n,r,i){var a,o,s=0;do o=t+(n-t)/2,a=OM(o,r,i)-e,a>0?n=o:t=o;while(Math.abs(a)>bM&&++s<xM);return o},jM=function(e,t,n,r){for(var i=0;i<vM;++i){var a=kM(t,n,r);if(a===0)return t;var o=OM(t,n,r)-e;t-=o/a}return t},MM=function(e,t,n,r){if(!(e>=0&&e<=1&&n>=0&&n<=1))throw Error(`bezier x values must be in [0, 1] range`);if(e===t&&n===r)return function(e){return e};for(var i=wM?new Float32Array(SM):Array(SM),a=0;a<SM;++a)i[a]=OM(a*CM,e,n);var o=function(t){for(var r=0,a=1,o=SM-1;a!==o&&i[a]<=t;++a)r+=CM;--a;var s=(t-i[a])/(i[a+1]-i[a]),c=r+s*CM,l=kM(c,e,n);return l>=yM?jM(t,c,e,n):l===0?c:AM(t,r,r+CM,e,n)};return function(e){return e===0||e===1?e:OM(o(e),t,r)}},NM=function(e){return e=e.replace(/([A-Z])/g,function(e){return`-${e.toLowerCase()}`}),e.charAt(0)===`-`?e.substring(1):e},PM=function(e){return e**2},FM=function(e){return e**3},IM=function(e){return e**4},LM=function(e){return e**5},RM=function(e){return e**6},zM=function(e){return 1-Math.cos(e*Math.PI/2)},BM=function(e){return 1-Math.sqrt(1-e*e)},VM=function(e){return e*e*(3*e-2)},HM=function(e){for(var t,n=4;e<((t=2**--n)-1)/11;);return 1/4**(3-n)-7.5625*((t*3-2)/22-e)**2},UM=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=eb(t,2),r=n[0],i=r===void 0?1:r,a=n[1],o=a===void 0?.5:a,s=SS(Number(i),1,10),c=SS(Number(o),.1,2);return e===0||e===1?e:-s*2**(10*(e-1))*Math.sin((e-1-c/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/c)},WM=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=eb(t,4),i=r[0],a=i===void 0?1:i,o=r[1],s=o===void 0?100:o,c=r[2],l=c===void 0?10:c,u=r[3],d=u===void 0?0:u;a=SS(a,.1,1e3),s=SS(s,.1,1e3),l=SS(l,.1,1e3),d=SS(d,.1,1e3);var f=Math.sqrt(s/a),p=l/(2*Math.sqrt(s*a)),m=p<1?f*Math.sqrt(1-p*p):0,h=1,g=p<1?(p*f+-d)/m:-d+f,_=n?n*e/1e3:e;return _=p<1?Math.exp(-_*p*f)*(h*Math.cos(m*_)+g*Math.sin(m*_)):(h+g*_)*Math.exp(-_*f),e===0||e===1?e:1-_},GM=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=eb(t,2),r=n[0],i=r===void 0?10:r;return(n[1]===`start`?Math.ceil:Math.floor)(SS(e,0,1)*i)/i},KM=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=eb(t,4),r=n[0],i=n[1],a=n[2],o=n[3];return MM(r,i,a,o)(e)},qM=MM(.42,0,1,1),JM=function(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return 1-e(1-t,n,r)}},YM=function(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return t<.5?e(t*2,n,r)/2:1-e(t*-2+2,n,r)/2}},XM=function(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return t<.5?(1-e(1-t*2,n,r))/2:(e(t*2-1,n,r)+1)/2}},ZM={steps:GM,"step-start":function(e){return GM(e,[1,`start`])},"step-end":function(e){return GM(e,[1,`end`])},linear:function(e){return e},"cubic-bezier":KM,ease:function(e){return KM(e,[.25,.1,.25,1])},in:qM,out:JM(qM),"in-out":YM(qM),"out-in":XM(qM),"in-quad":PM,"out-quad":JM(PM),"in-out-quad":YM(PM),"out-in-quad":XM(PM),"in-cubic":FM,"out-cubic":JM(FM),"in-out-cubic":YM(FM),"out-in-cubic":XM(FM),"in-quart":IM,"out-quart":JM(IM),"in-out-quart":YM(IM),"out-in-quart":XM(IM),"in-quint":LM,"out-quint":JM(LM),"in-out-quint":YM(LM),"out-in-quint":XM(LM),"in-expo":RM,"out-expo":JM(RM),"in-out-expo":YM(RM),"out-in-expo":XM(RM),"in-sine":zM,"out-sine":JM(zM),"in-out-sine":YM(zM),"out-in-sine":XM(zM),"in-circ":BM,"out-circ":JM(BM),"in-out-circ":YM(BM),"out-in-circ":XM(BM),"in-back":VM,"out-back":JM(VM),"in-out-back":YM(VM),"out-in-back":XM(VM),"in-bounce":HM,"out-bounce":JM(HM),"in-out-bounce":YM(HM),"out-in-bounce":XM(HM),"in-elastic":UM,"out-elastic":JM(UM),"in-out-elastic":YM(UM),"out-in-elastic":XM(UM),spring:WM,"spring-in":WM,"spring-out":JM(WM),"spring-in-out":YM(WM),"spring-out-in":XM(WM)},QM=function(e){return NM(e).replace(/^ease-/,``).replace(/(\(|\s).+/,``).toLowerCase().trim()},$M=function(e){return ZM[QM(e)]||ZM.linear},eN=function(e){return e},tN=1,nN=.5,rN=0;function iN(e,t){return function(n){if(n>=1)return 1;var r=1/e;return n+=t*r,n-n%r}}var aN=`\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*`,oN=RegExp(`cubic-bezier\\(${aN},${aN},${aN},${aN}\\)`),sN=/steps\(\s*(\d+)\s*\)/,cN=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function lN(e){var t=oN.exec(e);if(t)return MM.apply(void 0,Wy(t.slice(1).map(Number)));var n=sN.exec(e);if(n)return iN(Number(n[1]),rN);var r=cN.exec(e);return r?iN(Number(r[1]),{start:tN,middle:nN,end:rN}[r[2]]):$M(e)}function uN(e){return Math.abs(Wee(e)/(e.playbackRate||1))}function Wee(e){return e.duration===0||e.iterations===0?0:(e.duration===`auto`?0:Number(e.duration))*(e.iterations??1)}var dN=0,fN=1,pN=2,mN=3;function Gee(e,t,n){if(t===null)return dN;var r=n.endTime;return t<Math.min(n.delay,r)?fN:t>=Math.min(n.delay+e+n.endDelay,r)?pN:mN}function Kee(e,t,n,r,i){switch(r){case fN:return t===`backwards`||t===`both`?0:null;case mN:return n-i;case pN:return t===`forwards`||t===`both`?e:null;case dN:return null}}function qee(e,t,n,r,i){var a=i;return e===0?t!==fN&&(a+=n):a+=r/e,a}function Jee(e,t,n,r,i,a){var o=e===1/0?t%1:e%1;return o===0&&n===pN&&r!==0&&(i!==0||a===0)&&(o=1),o}function Yee(e,t,n,r){return e===pN&&t===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function Xee(e,t,n){var r=e;if(e!==`normal`&&e!==`reverse`){var i=t;e===`alternate-reverse`&&(i+=1),r=`normal`,i!==1/0&&i%2!=0&&(r=`reverse`)}return r===`normal`?n:1-n}function Zee(e,t,n){var r=Gee(e,t,n),i=Kee(e,n.fill,t,r,n.delay);if(i===null)return null;var a=n.duration===`auto`?0:n.duration,o=qee(a,r,n.iterations,i,n.iterationStart),s=Jee(o,n.iterationStart,r,n.iterations,i,a),c=Yee(r,n.iterations,s,o),l=Xee(n.direction,c,s);return n.currentIteration=c,n.progress=l,n.easingFunction(l)}function Qee(e,t,n){var r=$ee(e,t),i=ete(r,n);return function(e,t){if(t!==null)i.filter(function(e){return t>=e.applyFrom&&t<e.applyTo}).forEach(function(n){var r=t-n.startOffset,i=n.endOffset-n.startOffset,a=i===0?0:r/i;e.setAttribute(n.property,n.interpolation(a),!1,!1)});else for(var n in r)hN(n)&&e.setAttribute(n,null)}}function hN(e){return e!==`offset`&&e!==`easing`&&e!==`composite`&&e!==`computedOffset`}function $ee(e,t){for(var n={},r=0;r<e.length;r++)for(var i in e[r])if(hN(i)){var a={offset:e[r].offset,computedOffset:e[r].computedOffset,easing:e[r].easing,easingFunction:lN(e[r].easing)||t.easingFunction,value:e[r][i]};n[i]=n[i]||[],n[i].push(a)}return n}function ete(e,t){var n=[];for(var r in e)for(var i=e[r],a=0;a<i.length-1;a++){var o=a,s=a+1,c=i[o].computedOffset,l=i[s].computedOffset,u=c,d=l;a===0&&(u=-1/0,l===0&&(s=o)),a===i.length-2&&(d=1/0,c===1&&(o=s)),n.push({applyFrom:u,applyTo:d,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:r,interpolation:tte(r,i[o].value,i[s].value,t)})}return n.sort(function(e,t){return e.startOffset-t.startOffset}),n}var gN=function(e,t,n){return function(r){var i=_N(e,t,r);return K(i)?i:n(i)}};function tte(e,t,n,r){var i=JO[e];if(i&&i.syntax&&i.int){var a=X.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=a.parser,s=o?o(t,r):t,c=o?o(n,r):n,l=a.mixer(s,c,r);if(l){var u=gN.apply(void 0,Wy(l));return function(e){return e===0?t:e===1?n:u(e)}}}}return gN(!1,!0,function(e){return e?n:t})}function _N(e,t,n){if(typeof e==`number`&&typeof t==`number`)return e*(1-n)+t*n;if(typeof e==`boolean`&&typeof t==`boolean`||typeof e==`string`&&typeof t==`string`)return n<.5?e:t;if(Array.isArray(e)&&Array.isArray(t)){for(var r=e.length,i=t.length,a=Math.max(r,i),o=[],s=0;s<a;s++)o.push(_N(e[s<r?s:r-1],t[s<i?s:i-1],n));return o}throw Error(`Mismatched interpolation arguments ${e}:${t}`)}var nte=function(){function e(){W(this,e),this.delay=0,this.direction=`normal`,this.duration=`auto`,this._easing=`linear`,this.easingFunction=eN,this.endDelay=0,this.fill=`auto`,this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return G(e,[{key:`easing`,get:function(){return this._easing},set:function(e){this.easingFunction=lN(e),this._easing=e}}])}();function rte(e){var t=[];for(var n in e){if(n in[`easing`,`offset`,`composite`])continue;var r=e[n];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!t[a]){var o={};`offset`in e&&(o.offset=Number(e.offset)),`easing`in e&&(o.easing=e.easing),`composite`in e&&(o.composite=e.composite),t[a]=o}r[a]!==void 0&&r[a]!==null&&(t[a][n]=r[a])}}return t.sort(function(e,t){return(e.computedOffset||0)-(t.computedOffset||0)}),t}function vN(e,t){if(e===null)return[];Array.isArray(e)||(e=rte(e));for(var n=e.map(function(e){var n={};for(var r in t!=null&&t.composite&&(n.composite=`auto`),e){var i=e[r];if(r===`offset`){if(i!==null){if(i=Number(i),!isFinite(i))throw Error(`Keyframe offsets must be numbers.`);if(i<0||i>1)throw Error(`Keyframe offsets must be between 0 and 1.`);n.computedOffset=i}}else if(r===`composite`&&[`replace`,`add`,`accumulate`,`auto`].indexOf(i)===-1)throw Error(`${i} compositing is not supported`);n[r]=i}return n.offset===void 0&&(n.offset=null),n.easing===void 0&&(n.easing=t?.easing||`linear`),n.composite===void 0&&(n.composite=`auto`),n}),r=!0,i=-1/0,a=0;a<n.length;a++){var o=n[a].offset;if(iS(o))r=!1;else{if(o<i)throw TypeError(`Keyframes are not loosely sorted by offset. Sort or specify offsets.`);i=o}}n=n.filter(function(e){return Number(e.offset)>=0&&Number(e.offset)<=1});function s(){var e=n,t=e.length;n[t-1].computedOffset=Number(n[t-1].offset??1),t>1&&(n[0].computedOffset=Number(n[0].offset??0));for(var r=0,i=Number(n[0].computedOffset),a=1;a<t;a++){var o=n[a].computedOffset;if(!iS(o)&&!iS(i)){for(var s=1;s<a-r;s++)n[r+s].computedOffset=i+(Number(o)-i)*s/(a-r);r=a,i=Number(o)}}}return r||s(),n}var ite=`backwards|forwards|both|none`.split(`|`),ate=`reverse|alternate|alternate-reverse`.split(`|`);function ote(e,t){var n=new nte;return t&&(n.fill=`both`,n.duration=`auto`),typeof e==`number`&&!isNaN(e)?n.duration=e:e!==void 0&&Object.keys(e).forEach(function(t){if(e[t]!==void 0&&e[t]!==null&&e[t]!==`auto`){if((typeof n[t]==`number`||t===`duration`)&&(typeof e[t]!=`number`||isNaN(e[t]))||t===`fill`&&ite.indexOf(e[t])===-1||t===`direction`&&ate.indexOf(e[t])===-1)return;n[t]=e[t]}}),n}function ste(e,t){return e=cte(e??{duration:`auto`}),ote(e,t)}function cte(e){return typeof e==`number`&&(e=isNaN(e)?{duration:`auto`}:{duration:e}),e}var lte=function(){function e(t,n,r){var i=this;W(this,e),this.composite=`replace`,this.iterationComposite=`replace`,this.target=t,this.timing=ste(r,!1),this.timing.effect=this,this.timing.activeDuration=uN(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=vN(n,this.timing),this.interpolations=Qee(this.normalizedKeyframes,this.timing,this.target);var a=X.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(e,t){return t===`duration`?e.duration===`auto`?0:e.duration:t===`fill`?e.fill===`auto`?`none`:e.fill:t===`localTime`?i.animation&&i.animation.currentTime||null:t===`currentIteration`?!i.animation||i.animation.playState!==`running`?null:e.currentIteration||0:t===`progress`?!i.animation||i.animation.playState!==`running`?null:e.progress||0:e[t]},set:function(){return!0}}):this.timing}return G(e,[{key:`applyInterpolations`,value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:`update`,value:function(e){return e===null?!1:(this.timeFraction=Zee(this.timing.activeDuration,e,this.timing),this.timeFraction!==null)}},{key:`getKeyframes`,value:function(){return this.normalizedKeyframes}},{key:`setKeyframes`,value:function(e){this.normalizedKeyframes=vN(e)}},{key:`getComputedTiming`,value:function(){return this.computedTiming}},{key:`getTiming`,value:function(){return this.timing}},{key:`updateTiming`,value:function(e){var t=this;Object.keys(e||{}).forEach(function(n){t.timing[n]=e[n]})}}])}();function yN(e,t){return Number(e.id)-Number(t.id)}var ute=function(){function e(t){var n=this;W(this,e),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(e){n.currentTime=e,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(e){var t=n.rafCallbacks;n.rafCallbacks=[],e<Number(n.currentTime)&&(e=Number(n.currentTime)),n.animations.sort(yN),n.animations=n.tick(e,!0,n.animations)[0],t.forEach(function(t){t[1](e)}),n.applyPendingEffects()},this.document=t}return G(e,[{key:`getAnimations`,value:function(){return this.discardAnimations(),this.animations.slice()}},{key:`isTicking`,value:function(){return this.inTick}},{key:`play`,value:function(e,t,n){var r=new lte(e,t,n),i=new _M(r,this);return this.animations.push(i),this.restartWebAnimationsNextTick(),i.updatePromises(),i.play(),i.updatePromises(),i}},{key:`applyDirtiedAnimation`,value:function(e){var t=this;if(!this.inTick){e.markTarget();var n=e.targetAnimations();n.sort(yN),this.tick(Number(this.currentTime),!1,n.slice())[1].forEach(function(e){var n=t.animations.indexOf(e);n!==-1&&t.animations.splice(n,1)}),this.applyPendingEffects()}}},{key:`restart`,value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:`destroy`,value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:`applyPendingEffects`,value:function(){this.pendingEffects.forEach(function(e){e?.applyInterpolations()}),this.pendingEffects=[]}},{key:`updateAnimationsPromises`,value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(e){return e.updatePromises()})}},{key:`discardAnimations`,value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(e){return e.playState!==`finished`&&e.playState!==`idle`})}},{key:`restartWebAnimationsNextTick`,value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:`rAF`,value:function(e){var t=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([t,e]),t}},{key:`requestAnimationFrame`,value:function(e){var t=this;return this.rAF(function(n){t.updateAnimationsPromises(),e(n),t.updateAnimationsPromises()})}},{key:`tick`,value:function(e,t,n){var r=this,i,a;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=e,this.ticking=!1;var o=[],s=[],c=[],l=[];return n.forEach(function(n){n.tick(e,t),n._inEffect?(s.push(n.effect),n.markTarget()):(o.push(n.effect),n.unmarkTarget()),n._needsTick&&(r.ticking=!0);var i=n._inEffect||n._needsTick;n._inTimeline=i,i?c.push(n):l.push(n)}),(i=this.pendingEffects).push.apply(i,o),(a=this.pendingEffects).push.apply(a,s),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[c,l]}}])}();X.EasingFunction=lN,X.AnimationTimeline=ute;const dte={duration:500},fte={duration:1e3,easing:`cubic-bezier(0.250, 0.460, 0.450, 0.940)`,iterations:1,fill:`both`};var bN;(function(e){e.NodeAdded=`NodeAdded`,e.NodeUpdated=`NodeUpdated`,e.NodeRemoved=`NodeRemoved`,e.EdgeAdded=`EdgeAdded`,e.EdgeUpdated=`EdgeUpdated`,e.EdgeRemoved=`EdgeRemoved`,e.ComboAdded=`ComboAdded`,e.ComboUpdated=`ComboUpdated`,e.ComboRemoved=`ComboRemoved`})(bN||={});var xN;(function(e){e.DRAW=`draw`,e.COLLAPSE=`collapse`,e.EXPAND=`expand`,e.TRANSFORM=`transform`})(xN||={});var SN;(function(e){e.CLICK=`canvas:click`,e.DBLCLICK=`canvas:dblclick`,e.POINTER_OVER=`canvas:pointerover`,e.POINTER_LEAVE=`canvas:pointerleave`,e.POINTER_ENTER=`canvas:pointerenter`,e.POINTER_MOVE=`canvas:pointermove`,e.POINTER_OUT=`canvas:pointerout`,e.POINTER_DOWN=`canvas:pointerdown`,e.POINTER_UP=`canvas:pointerup`,e.CONTEXT_MENU=`canvas:contextmenu`,e.DRAG_START=`canvas:dragstart`,e.DRAG=`canvas:drag`,e.DRAG_END=`canvas:dragend`,e.DRAG_ENTER=`canvas:dragenter`,e.DRAG_OVER=`canvas:dragover`,e.DRAG_LEAVE=`canvas:dragleave`,e.DROP=`canvas:drop`,e.WHEEL=`canvas:wheel`})(SN||={});var CN;(function(e){e.CLICK=`combo:click`,e.DBLCLICK=`combo:dblclick`,e.POINTER_OVER=`combo:pointerover`,e.POINTER_LEAVE=`combo:pointerleave`,e.POINTER_ENTER=`combo:pointerenter`,e.POINTER_MOVE=`combo:pointermove`,e.POINTER_OUT=`combo:pointerout`,e.POINTER_DOWN=`combo:pointerdown`,e.POINTER_UP=`combo:pointerup`,e.CONTEXT_MENU=`combo:contextmenu`,e.DRAG_START=`combo:dragstart`,e.DRAG=`combo:drag`,e.DRAG_END=`combo:dragend`,e.DRAG_ENTER=`combo:dragenter`,e.DRAG_OVER=`combo:dragover`,e.DRAG_LEAVE=`combo:dragleave`,e.DROP=`combo:drop`})(CN||={});var Z;(function(e){e.CLICK=`click`,e.DBLCLICK=`dblclick`,e.POINTER_OVER=`pointerover`,e.POINTER_LEAVE=`pointerleave`,e.POINTER_ENTER=`pointerenter`,e.POINTER_MOVE=`pointermove`,e.POINTER_OUT=`pointerout`,e.POINTER_DOWN=`pointerdown`,e.POINTER_UP=`pointerup`,e.CONTEXT_MENU=`contextmenu`,e.DRAG_START=`dragstart`,e.DRAG=`drag`,e.DRAG_END=`dragend`,e.DRAG_ENTER=`dragenter`,e.DRAG_OVER=`dragover`,e.DRAG_LEAVE=`dragleave`,e.DROP=`drop`,e.KEY_DOWN=`keydown`,e.KEY_UP=`keyup`,e.WHEEL=`wheel`,e.PINCH=`pinch`})(Z||={});var wN;(function(e){e.KEY_DOWN=`keydown`,e.KEY_UP=`keyup`})(wN||={});var TN;(function(e){e.CLICK=`edge:click`,e.DBLCLICK=`edge:dblclick`,e.POINTER_OVER=`edge:pointerover`,e.POINTER_LEAVE=`edge:pointerleave`,e.POINTER_ENTER=`edge:pointerenter`,e.POINTER_MOVE=`edge:pointermove`,e.POINTER_OUT=`edge:pointerout`,e.POINTER_DOWN=`edge:pointerdown`,e.POINTER_UP=`edge:pointerup`,e.CONTEXT_MENU=`edge:contextmenu`,e.DRAG_ENTER=`edge:dragenter`,e.DRAG_OVER=`edge:dragover`,e.DRAG_LEAVE=`edge:dragleave`,e.DROP=`edge:drop`})(TN||={});var Q;(function(e){e.BEFORE_CANVAS_INIT=`beforecanvasinit`,e.AFTER_CANVAS_INIT=`aftercanvasinit`,e.BEFORE_SIZE_CHANGE=`beforesizechange`,e.AFTER_SIZE_CHANGE=`aftersizechange`,e.BEFORE_ELEMENT_CREATE=`beforeelementcreate`,e.AFTER_ELEMENT_CREATE=`afterelementcreate`,e.BEFORE_ELEMENT_UPDATE=`beforeelementupdate`,e.AFTER_ELEMENT_UPDATE=`afterelementupdate`,e.BEFORE_ELEMENT_DESTROY=`beforeelementdestroy`,e.AFTER_ELEMENT_DESTROY=`afterelementdestroy`,e.BEFORE_ELEMENT_TRANSLATE=`beforeelementtranslate`,e.AFTER_ELEMENT_TRANSLATE=`afterelementtranslate`,e.BEFORE_DRAW=`beforedraw`,e.AFTER_DRAW=`afterdraw`,e.BEFORE_RENDER=`beforerender`,e.AFTER_RENDER=`afterrender`,e.BEFORE_ANIMATE=`beforeanimate`,e.AFTER_ANIMATE=`afteranimate`,e.BEFORE_LAYOUT=`beforelayout`,e.AFTER_LAYOUT=`afterlayout`,e.BEFORE_STAGE_LAYOUT=`beforestagelayout`,e.AFTER_STAGE_LAYOUT=`afterstagelayout`,e.BEFORE_TRANSFORM=`beforetransform`,e.AFTER_TRANSFORM=`aftertransform`,e.BATCH_START=`batchstart`,e.BATCH_END=`batchend`,e.BEFORE_DESTROY=`beforedestroy`,e.AFTER_DESTROY=`afterdestroy`,e.BEFORE_RENDERER_CHANGE=`beforerendererchange`,e.AFTER_RENDERER_CHANGE=`afterrendererchange`})(Q||={});var EN;(function(e){e.UNDO=`undo`,e.REDO=`redo`,e.CANCEL=`cancel`,e.ADD=`add`,e.CLEAR=`clear`,e.CHANGE=`change`})(EN||={});var DN;(function(e){e.CLICK=`node:click`,e.DBLCLICK=`node:dblclick`,e.POINTER_OVER=`node:pointerover`,e.POINTER_LEAVE=`node:pointerleave`,e.POINTER_ENTER=`node:pointerenter`,e.POINTER_MOVE=`node:pointermove`,e.POINTER_OUT=`node:pointerout`,e.POINTER_DOWN=`node:pointerdown`,e.POINTER_UP=`node:pointerup`,e.CONTEXT_MENU=`node:contextmenu`,e.DRAG_START=`node:dragstart`,e.DRAG=`node:drag`,e.DRAG_END=`node:dragend`,e.DRAG_ENTER=`node:dragenter`,e.DRAG_OVER=`node:dragover`,e.DRAG_LEAVE=`node:dragleave`,e.DROP=`node:drop`})(DN||={});const ON=`combo`,kN=`tree`;var AN;(function(e){e.NODE=`node`,e.EDGE=`edge`,e.COMBO=`combo`,e.THEME=`theme`,e.PALETTE=`palette`,e.LAYOUT=`layout`,e.BEHAVIOR=`behavior`,e.PLUGIN=`plugin`,e.ANIMATION=`animation`,e.TRANSFORM=`transform`,e.SHAPE=`shape`})(AN||={});const jN={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function MN(e,t){let n=jN[e]?.[t];if(n)return n}var NN=`G6`;function PN(e){return`[${NN} v5.0.49] ${e}`}const FN={mute:!1,debug:e=>{!FN.mute&&console.debug(PN(e))},info:e=>{!FN.mute&&console.info(PN(e))},warn:e=>{!FN.mute&&console.warn(PN(e))},error:e=>{!FN.mute&&console.error(PN(e))}};function IN(e){let{theme:t}=e;return t?MN(AN.THEME,t)||(FN.warn(`The theme of ${t} is not registered.`),{}):{}}function LN(e,t){if(Array.isArray(e)&&e.length===0)return null;let n=Array.isArray(e)?e[0]:e,r=Array.isArray(e)?e.slice(1):t||[];return new Proxy(n,{get(e,t){return typeof e[t]==`function`&&![`onframe`,`onfinish`].includes(t)?(...n)=>{e[t](...n),r.forEach(e=>e[t]?.call(e,...n))}:t===`finished`?Promise.all([n.finished,...r.map(e=>e.finished)]):Reflect.get(e,t)},set(e,t,n){return[`onframe`,`onfinish`].includes(t)||r.forEach(e=>{e[t]=n}),Reflect.set(e,t,n)}})}function RN(e){let t=e.reduce((e,t)=>(Object.entries(t).forEach(([t,n])=>{e[t]===void 0?e[t]=[n]:e[t].push(n)}),e),{});Object.entries(t).forEach(([n,r])=>{(r.length!==e.length||r.some(e=>iS(e))||r.every(e=>![`sourceNode`,`targetNode`,`childrenNode`].includes(n)&&aC(e,r[0])))&&delete t[n]});let n=Object.entries(t).reduce((e,[t,n])=>(n.forEach((n,r)=>{e[r]?e[r][t]=n:e[r]={[t]:n}}),e),[]);return e.length!==0&&n.length===0&&n.push({_:0},{_:0}),n}function zN(e){switch(e){case`opacity`:return 1;case`x`:case`y`:case`z`:case`zIndex`:return 0;case`visibility`:return`visible`;case`collapsed`:return!1;case`states`:return[];default:return}}function BN(e,t){let{animation:n}=e;if(n===!1||t===!1)return!1;let r=Object.assign({},dte);return oS(n)&&Object.assign(r,n),oS(t)&&Object.assign(r,t),r}function VN(e){return typeof e==`string`?MN(AN.ANIMATION,e)||(FN.warn(`The animation of ${e} is not registered.`),[]):e}function HN(e,t,n,r){let{animation:i}=e;if(i===!1||r===!1)return[];let a=e?.[t]?.animation;if(a===!1)return[];let o=a?.[n];if(o===!1)return[];let s=IN(e)[t]?.animation,c=(e=[])=>VN(e).map(e=>Object.assign(Object.assign(Object.assign(Object.assign({},fte),oS(i)&&i),e),oS(r)&&r));if(o)return c(o);if(!s)return[];let l=s[n];return l===!1?[]:c(l)}function UN(e,t,n,r=[]){if(!r&&e===0&&t===0&&n===0)return null;if(Array.isArray(r)){let i=-1,a=[];for(let o=0;o<r.length;o++){let s=r[o];if(s[0]===`translate`){if(s[1]===e&&s[2]===t)return null;i=o,a.push([`translate`,e,t])}else if(s[0]===`translate3d`){if(s[1]===e&&s[2]===t&&s[3]===n)return null;i=o,a.push([`translate3d`,e,t,n??0])}else a.push(s)}return i===-1&&a.splice(0,0,K(n)?[`translate3d`,e,t,n??0]:[`translate`,e,t]),a.length===0?null:a}let i=r?r.replace(/translate(3d)?\([^)]*\)/g,``):``;return n===0?`translate(${e}, ${t})${i}`:`translate3d(${e}, ${t}, ${n})${i}`}var WN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const GN=(e,t,n)=>{if(!n.length)return null;let[r,i]=t,a=t=>{if(t){let n=e.getShape(t);if(!n)return null;let a=`get${MS(t)}Style`,o=(e?.[a])?.bind(e)||(e=>e),s=o?.(r)||{},c=o?.(i)||{};return{shape:n,fromStyle:s,toStyle:c}}else return{shape:e,fromStyle:r,toStyle:i}},o,s=n.map(e=>{var{fields:t,shape:n,states:r}=e,i=WN(e,[`fields`,`shape`,`states`]);let s=a(n);if(!s)return null;let{shape:c,fromStyle:l,toStyle:u}=s,d=[{},{}];if(t.forEach(e=>{Object.assign(d[0],{[e]:l[e]??zN(e)}),Object.assign(d[1],{[e]:u[e]??zN(e)})}),d.some(e=>Object.keys(e).some(e=>[`x`,`y`,`z`].includes(e)))){let{x:e=0,y:t=0,z:n,transform:r=``}=c.attributes||{};d.forEach(i=>{i.transform=UN(i.x??e,i.y??t,i.z??n,r)})}let f=c.animate(RN(d),i);return n===void 0&&(o=f),f}).filter(Boolean),c=o||s?.[0];return c?LN(c,s.filter(e=>e!==e)):null},KN=[{fields:[`opacity`]}],qN=[{fields:[`x`,`y`]}],JN=[{fields:[`x`,`y`]}],YN=JN,XN=[{fields:[`sourceNode`,`targetNode`]}],ZN=XN,QN=[{fields:[`childrenNode`,`x`,`y`]}],$N=QN;function eP(e){return`source`in e&&`target`in e}function tP(e){return e.length===2}function nP(e){return e instanceof Float32Array?!0:Array.isArray(e)&&(e.length===2||e.length===3)?e.every(e=>typeof e==`number`):!1}function rP(e,t,n){return e>=t&&e<=n}function iP(e=0){if(Array.isArray(e)){let[t=0,n=t,r=t,i=n]=e;return[t,n,r,i]}return[e,e,e,e]}function aP(e=0){let t=iP(e);return t[0]+t[2]}function oP(e){return e.max[0]-e.min[0]}function sP(e){return e.max[1]-e.min[1]}function cP(e){return[oP(e),sP(e)]}function lP(e,t){let n=nP(e)?uP(e):e.getShape(`key`).getBounds();return t?dP(n,t):n}function uP(e){let[t,n,r=0]=e,i=new aT;return i.setMinMax([t,n,r],[t,n,r]),i}function dP(e,t){let[n,r,i,a]=iP(t),[o,s,c]=e.min,[l,u,d]=e.max,f=new aT;return f.setMinMax([o-a,s-n,c],[l+r,u+i,d]),f}function fP(e){if(e.length===0)return new aT;if(e.length===1)return e[0];let t=new aT;t.setMinMax(e[0].min,e[0].max);for(let n=1;n<e.length;n++){let r=e[n];t.setMinMax([Math.min(t.min[0],r.min[0]),Math.min(t.min[1],r.min[1]),Math.min(t.min[2],r.min[2])],[Math.max(t.max[0],r.max[0]),Math.max(t.max[1],r.max[1]),Math.max(t.max[2],r.max[2])])}return t}function pP(e,t){let[n,r]=e.min,[i,a]=e.max,[o,s]=t.min,[c,l]=t.max;return n>=o&&i<=c&&r>=s&&a<=l}function mP(e,t){return rP(e[0],t.min[0],t.max[0])&&rP(e[1],t.min[1],t.max[1])}function hP(e,t,n=!1){let{min:[r,i],max:[a,o]}=t,s=(e[1]===i||e[1]===o)&&(n||rP(e[0],r,a)),c=(e[0]===r||e[0]===a)&&(n||rP(e[1],i,o));return s||c}function gP(e,t){return!mP(e,t)}function _P(e,t){let{center:n}=t;return e[0]===n[0]&&e[1]===n[1]}function vP(e,t){let[n,r]=e,[i,a]=t.min,[o,s]=t.max,c=n-i,l=o-n,u=r-a,d=s-r,f=Math.min(c,l,u,d);return f===c?`left`:f===l?`right`:f===u?`top`:f===d?`bottom`:`left`}function yP(e,t){let n=GS(e);if(mP(e,t))switch(vP(e,t)){case`left`:n[0]=t.min[0];break;case`right`:n[0]=t.max[0];break;case`top`:n[1]=t.min[1];break;case`bottom`:n[1]=t.max[1];break}else{let[r,i]=e,[a,o]=t.min,[s,c]=t.max;n[0]=rP(r,a,s)?r:r<a?a:s,n[1]=rP(i,o,c)?i:i<o?o:c}return n}function bP(e,t){let{center:n}=e,[r,i]=cP(e),a=t===`up`||t===`down`?n[0]:t===`right`?n[0]-r/6:n[0]+r/6,o=t===`left`||t===`right`?n[1]:t===`down`?n[1]-i/6:n[1]+i/6;return[a,o]}function xP(e,t){let[n,r]=cP(e);return[n,r]=t===`up`||t===`down`?[n,r]:[r,n],(r**2-(Math.sqrt((n/2)**2+r**2)-n/2)**2)/(2*r)}function SP(e){let{min:[t,n],max:[r,i]}=e,a=[t,i],o=[r,i],s=[r,n],c=[t,n];return[[a,o],[o,s],[s,c],[c,a]]}var CP=function(e,t){return e===t},wP=function(){function e(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return e.prototype.toString=function(e){return e?e(this.value):`${this.value}`},e}(),TP=function(){function e(e){e===void 0&&(e=CP),this.head=null,this.tail=null,this.compare=e}return e.prototype.prepend=function(e){var t=new wP(e,this.head);return this.head=t,this.tail||=t,this},e.prototype.append=function(e){var t=new wP(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},e.prototype.find=function(e){var t=e.value,n=t===void 0?void 0:t,r=e.callback,i=r===void 0?void 0:r;if(!this.head)return null;for(var a=this.head;a;){if(i&&i(a.value)||n!==void 0&&this.compare(a.value,n))return a;a=a.next}return null},e.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},e.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},e.prototype.fromArray=function(e){var t=this;return e.forEach(function(e){return t.append(e)}),this},e.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},e.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},e.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},e}();(function(){function e(){this.linkedList=new TP}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(e){this.linkedList.append(e)},e.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toString=function(e){return this.linkedList.toString(e)},e})();var EP=function(e,t,n){t===void 0&&(t=[]);var r=t.filter(function(t){return t.source===e||t.target===e});return n===`target`?r.filter(function(t){return t.source===e}).map(function(e){return e.target}):n===`source`?r.filter(function(t){return t.target===e}).map(function(e){return e.source}):r.map(function(t){return t.source===e?t.target:t.source})},DP=function(e,t){return t.filter(function(t){return t.source===e})},OP=function(e,t){return t.filter(function(t){return t.source===e||t.target===e})},kP=function(e){var t={},n=e.nodes,r=n===void 0?[]:n,i=e.edges,a=i===void 0?[]:i;return r.forEach(function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}}),a.forEach(function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++}),t},AP={}.toString,jP=function(e,t){return AP.call(e)===`[object `+t+`]`},MP=(function(e){return jP(e,`Function`)}),NP=(function(e){return Array.isArray?Array.isArray(e):jP(e,`Array`)}),PP=(function(e){var t=typeof e;return e!==null&&t===`object`||t===`function`});function FP(e,t){if(e){var n;if(NP(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(PP(e)){for(var a in e)if(e.hasOwnProperty(a)&&(n=t(e[a],a),n===!1))break}}}var IP=FP,LP=Array.prototype;LP.splice,LP.indexOf,Array.prototype.splice;var RP=(function(e){return jP(e,`String`)});Number.isInteger&&Number.isInteger,180/Math.PI,Math.PI/180;var zP=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return IP(e,function(n,r){MP(e)&&r===`prototype`||t.push(n)}),t};({}).toString,Object.prototype;var BP=function(e){if(typeof e!=`object`||!e)return e;var t;if(NP(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]==`object`&&e[n]!=null?t[n]=BP(e[n]):t[n]=e[n]}else for(var i in t={},e)typeof e[i]==`object`&&e[i]!=null?t[i]=BP(e[i]):t[i]=e[i];return t},VP=BP,HP=(function(e,t){if(!MP(e))throw TypeError(`Expected a function`);var n=function(){var r=[...arguments],i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return a.set(i,o),o};return n.cache=new Map,n}),UP;HP(function(e,t){t===void 0&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return UP||=document.createElement(`canvas`).getContext(`2d`),UP.font=[a,o,i,n+`px`,r].join(` `),UP.measureText(RP(e)?e:``).width},function(e,t){return t===void 0&&(t={}),On([e],zP(t)).join(``)}),function(){function e(){this.map={}}return e.prototype.has=function(e){return this.map[e]!==void 0},e.prototype.get=function(e,t){var n=this.map[e];return n===void 0?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();var WP=function(e,t,n){for(var r=1/0,i,a=0;a<t.length;a++){var o=t[a].id;!n[o]&&e[o]<=r&&(r=e[o],i=t[a])}return i},GP=function(e,t,n,r){var i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o,c=[],l={},u={},d={};a.forEach(function(e,n){var r=e.id;c.push(r),u[r]=1/0,r===t&&(u[r]=0)});for(var f=a.length,p=function(e){var t=WP(u,a,l),i=t.id;if(l[i]=!0,u[i]===1/0)return`continue`;var o=[];o=n?DP(i,s):OP(i,s),o.forEach(function(e){var n=e.target,a=e.source,o=n===i?a:n,s=r&&e[r]?e[r]:1;u[o]>u[t.id]+s?(u[o]=u[t.id]+s,d[o]=[t.id]):u[o]===u[t.id]+s&&d[o].push(t.id)})},m=0;m<f;m++)p(m);d[t]=[t];var h={};for(var g in u)u[g]!==1/0&&KP(t,g,d,h);var _={};for(var g in h)_[g]=h[g][0];return{length:u,path:_,allPath:h}};function KP(e,t,n,r){if(e===t)return[e];if(r[t])return r[t];for(var i=[],a=0,o=n[t];a<o.length;a++){var s=o[a],c=KP(e,s,n,r);if(!c)return;for(var l=0,u=c;l<u.length;l++){var d=u[l];NP(d)?i.push(kn(kn([],d,!0),[t],!1)):i.push([d,t])}}return r[t]=i,r[t]}var qP=function(e,t,n,r,i){var a=GP(e,t,r,i),o=a.length,s=a.path,c=a.allPath;return{length:o[n],path:s[n],allPath:c[n]}};(function(){function e(e){this.arr=e}return e.prototype.getArr=function(){return this.arr||[]},e.prototype.add=function(t){var n=t.arr;if(!this.arr?.length)return new e(n);if(!n?.length)return new e(this.arr);if(this.arr.length===n.length){var r=[];for(var i in this.arr)r[i]=this.arr[i]+n[i];return new e(r)}},e.prototype.subtract=function(t){var n=t.arr;if(!this.arr?.length)return new e(n);if(!n?.length)return new e(this.arr);if(this.arr.length===n.length){var r=[];for(var i in this.arr)r[i]=this.arr[i]-n[i];return new e(r)}},e.prototype.avg=function(t){var n=[];if(t!==0)for(var r in this.arr)n[r]=this.arr[r]/t;return new e(n)},e.prototype.negate=function(){var t=[];for(var n in this.arr)t[n]=-this.arr[n];return new e(t)},e.prototype.squareEuclideanDistance=function(e){var t=e.arr;if(!this.arr?.length||!t?.length)return 0;if(this.arr.length===t.length){var n=0;for(var r in this.arr)n+=(this.arr[r]-e.arr[r])**2;return n}},e.prototype.euclideanDistance=function(e){var t=e.arr;if(!this.arr?.length||!t?.length)return 0;if(this.arr.length===t.length){var n=0;for(var r in this.arr)n+=(this.arr[r]-e.arr[r])**2;return Math.sqrt(n)}else console.error(`The two vectors are unequal in length.`)},e.prototype.normalize=function(){var t=[],n=VP(this.arr);n.sort(function(e,t){return e-t});var r=n[n.length-1],i=n[0];for(var a in this.arr)t[a]=(this.arr[a]-i)/(r-i);return new e(t)},e.prototype.norm2=function(){if(!this.arr?.length)return 0;var e=0;for(var t in this.arr)e+=this.arr[t]**2;return Math.sqrt(e)},e.prototype.dot=function(e){var t=e.arr;if(!this.arr?.length||!t?.length)return 0;if(this.arr.length===t.length){var n=0;for(var r in this.arr)n+=this.arr[r]*e.arr[r];return n}else console.error(`The two vectors are unequal in length.`)},e.prototype.equal=function(e){var t=e.arr;if(this.arr?.length!==t?.length)return!1;for(var n in this.arr)if(this.arr[n]!==t[n])return!1;return!0},e})();var JP;(function(e){e.EuclideanDistance=`euclideanDistance`})(JP||={}),function(){function e(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var r=n[t];this.parent[r]=r}}return e.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},e.prototype.union=function(e,t){var n=this.find(e),r=this.find(t);n!==r&&(n<r?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},e.prototype.connected=function(e,t){return this.find(e)===this.find(t)},e}();var YP=function(e,t){return e-t};(function(){function e(e){e===void 0&&(e=YP),this.compareFn=e,this.list=[]}return e.prototype.getLeft=function(e){return 2*e+1},e.prototype.getRight=function(e){return 2*e+2},e.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},e.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},e.prototype.moveDown=function(e){var t,n=e,r=this.getLeft(e),i=this.getRight(e),a=this.list.length;r!==null&&r<a&&this.compareFn(this.list[n],this.list[r])>0?n=r:i!==null&&i<a&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},e})();var XP=function(e,t,n){typeof t!=`number`&&(t=1e-6),typeof n!=`number`&&(n=.85);for(var r=1,i=0,a=1e3,o=e.nodes,s=o===void 0?[]:o,c=e.edges,l=c===void 0?[]:c,u=s.length,d,f={},p={},m=0;m<u;++m){var h=s[m],g=h.id;f[g]=1/u,p[g]=1/u}for(var _=kP(e);a>0&&r>t;){i=0;for(var m=0;m<u;++m){var h=s[m],g=h.id;if(d=0,_[h.id].inDegree===0)f[g]=0;else{for(var v=EP(g,l,`source`),y=0;y<v.length;++y){var b=v[y],x=_[b].outDegree;x>0&&(d+=p[b]/x)}f[g]=n*d,i+=f[g]}}i=(1-i)/u,r=0;for(var m=0;m<u;++m){var h=s[m],g=h.id;d=f[g]+i,r+=Math.abs(d-p[g]),p[g]=d}--a}return p},ZP=function(){function e(e,t,n,r){e===void 0&&(e=-1),t===void 0&&(t=-1),n===void 0&&(n=-1),r===void 0&&(r=`-1`),this.id=e,this.from=t,this.to=n,this.label=r}return e}(),QP=function(){function e(e,t){e===void 0&&(e=-1),t===void 0&&(t=`-1`),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},e}(),$P=function(){function e(e,t,n){e===void 0&&(e=-1),t===void 0&&(t=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new QP(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},e.prototype.addEdge=function(e,t,n,r){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var i=new ZP(e,t,n,r);if(this.edges.push(i),this.edgeMap[e]=i,this.nodeMap[t].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var a=new ZP(e,n,t,r);this.nodeMap[n].addEdge(a),this.edgeLabelMap[r].push(a)}}},e}(),eF=function(){function e(e,t,n,r,i){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||`-1`,edgeLabel:r||`-1`,nodeLabel2:i||`-1`}}return e.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e}(),tF=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,n=e.length;if(t!==n)return!1;for(var r=0;r<t;r++)if(this.dfsEdgeList[r]!==e[r])return!1;return!0},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e.prototype.pushBack=function(e,t,n,r,i){return this.dfsEdgeList.push(new eF(e,t,n,r,i)),this.dfsEdgeList},e.prototype.toGraph=function(e,t){e===void 0&&(e=-1),t===void 0&&(t=!1);var n=new $P(e,!0,t);return this.dfsEdgeList.forEach(function(e){var t=e.fromNode,r=e.toNode,i=e.nodeEdgeNodeLabel,a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;a!==`-1`&&n.addNode(t,a),s!==`-1`&&n.addNode(r,s),a!==`-1`&&s!==a&&n.addEdge(void 0,t,r,o)}),n},e.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var n=this.dfsEdgeList[t],r=n.fromNode,i=n.toNode;r<i&&(e===void 0||i===e)&&(this.rmpath.push(t),e=r)}return this.rmpath},e.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},e}(),nF=function(){function e(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},e.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},e}();(function(){function e(e){var t=e.graphs,n=e.minSupport,r=n===void 0?2:n,i=e.minNodeNum,a=i===void 0?1:i,o=e.maxNodeNum,s=o===void 0?4:o,c=e.top,l=c===void 0?10:c,u=e.directed,d=u===void 0?!1:u,f=e.verbose,p=f===void 0?!1:f;this.graphs=t,this.dfsCode=new tF,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=l,this.directed=d,this.counter=0,this.maxNodeNum=s,this.minNodeNum=a,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(e,t){var n=this,r=[],i=e.nodeMap;return t.edges.forEach(function(e){(n.directed||t.label<=i[e.to].label)&&r.push(e)}),r},e.prototype.findBackwardEdge=function(e,t,n,r){if(!this.directed&&t===n)return null;for(var i=e.nodeMap,a=i[n.to].edges,o=a.length,s=0;s<o;s++){var c=a[s];if(!(r.hasEdge(c)||c.to!==t.from)){if(this.directed){if(i[t.from].label<i[n.to].label||i[t.from].label===i[n.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&i[t.to].label<=i[n.to].label)return c}}return null},e.prototype.findForwardPureEdges=function(e,t,n,r){for(var i=[],a=t.to,o=e.nodeMap[a].edges,s=o.length,c=0;c<s;c++){var l=o[c],u=e.nodeMap[l.to];n<=u.label&&!r.hasNode(u)&&i.push(l)}return i},e.prototype.findForwardRmpathEdges=function(e,t,n,r){for(var i=[],a=e.nodeMap,o=a[t.to].label,s=a[t.from].edges,c=s.length,l=0;l<c;l++){var u=s[l],d=a[u.to].label;t.to===u.to||n>d||r.hasNode(a[u.to])||(t.label<u.label||t.label===u.label&&o<=d)&&i.push(u)}return i},e.prototype.getSupport=function(e){var t={};return e.forEach(function(e){t[e.graphId]||(t[e.graphId]=!0)}),Object.keys(t).length},e.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(n){var r=e[n],i=r.nodeLabel1,a=r.edgeLabel,o=r.nodeLabel2;if(!t){t={nodeLabel1:i,edgeLabel:a,nodeLabel2:o};return}(i<t.nodeLabel1||i===t.nodeLabel1&&a<t.edgeLabel||i===t.nodeLabel1&&a===t.edgeLabel&&o<t.nodeLabel2)&&(t={nodeLabel1:i,edgeLabel:a,nodeLabel2:o})}),t},e.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log(`isMin checking`,t),t.dfsEdgeList.length===1)return!0;var n=this.directed,r=t.toGraph(-1,n),i=r.nodeMap,a=new tF,o={};r.nodes.forEach(function(t){e.findForwardRootEdges(r,t).forEach(function(e){var n=i[e.to],a=`${t.label}-${e.label}-${n.label}`;o[a]||(o[a]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:n.label});var s={graphId:r.id,edge:e,preNode:null};o[a].projected.push(s)})});var s=this.findMinLabel(o);if(s){a.dfsEdgeList.push(new eF(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var c=function o(s){for(var c=a.buildRmpath(),l=a.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u=a.dfsEdgeList[c[0]].toNode,d={},f=!1,p=0,m=n?-1:0,h=function(t){if(f)return`break`;s.forEach(function(n){var i=new nF(n),o=e.findBackwardEdge(r,i.edges[c[t]],i.edges[c[0]],i);o&&(d[o.label]||(d[o.label]={projected:[],edgeLabel:o.label}),d[o.label].projected.push({graphId:r.id,edge:d,preNode:n}),p=a.dfsEdgeList[c[t]].fromNode,f=!0)})},g=c.length-1;g>m&&h(g)!==`break`;g--);if(f){var _=e.findMinLabel(d);a.dfsEdgeList.push(new eF(u,p,`-1`,_.edgeLabel,`-1`));var v=a.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[v]===a.dfsEdgeList[v]?o(d[_.edgeLabel].projected):!1}var y={};f=!1;var b=0;s.forEach(function(t){var n=new nF(t),a=e.findForwardPureEdges(r,n.edges[c[0]],l,n);a.length>0&&(f=!0,b=u,a.forEach(function(e){var n=`${e.label}-${i[e.to].label}`;y[n]||(y[n]={projected:[],edgeLabel:e.label,nodeLabel2:i[e.to].label}),y[n].projected.push({graphId:r.id,edge:e,preNode:t})}))});for(var x=c.length,S=function(t){if(f)return`break`;var n=c[t];s.forEach(function(t){var o=new nF(t),s=e.findForwardRmpathEdges(r,o.edges[n],l,o);s.length>0&&(f=!0,b=a.dfsEdgeList[n].fromNode,s.forEach(function(e){var n=`${e.label}-${i[e.to].label}`;y[n]||(y[n]={projected:[],edgeLabel:e.label,nodeLabel2:i[e.to].label}),y[n].projected.push({graphId:r.id,edge:e,preNode:t})}))})},g=0;g<x&&S(g)!==`break`;g++);if(!f)return!0;var C=e.findMinLabel(y);a.dfsEdgeList.push(new eF(b,u+1,`-1`,C.edgeLabel,C.nodeLabel2));var w=a.dfsEdgeList.length-1;return t.dfsEdgeList[w]===a.dfsEdgeList[w]?o(y[`${C.edgeLabel}-${C.nodeLabel2}`].projected):!1},l=`${s.nodeLabel1}-${s.edgeLabel}-${s.nodeLabel2}`;return c(o[l].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(VP(e))}},e.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[r[0]].toNode,a=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,o={},s={};e.forEach(function(e){for(var c=t.graphs[e.graphId],l=c.nodeMap,u=new nF(e),d=r.length-1;d>=0;d--){var f=t.findBackwardEdge(c,u.edges[r[d]],u.edges[r[0]],u);if(f){var p=`${t.dfsCode.dfsEdgeList[r[d]].fromNode}-${f.label}`;s[p]||(s[p]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[r[d]].fromNode,edgeLabel:f.label}),s[p].projected.push({graphId:e.graphId,edge:f,preNode:e})}}if(!(n>=t.maxNodeNum)){t.findForwardPureEdges(c,u.edges[r[0]],a,u).forEach(function(t){var n=`${i}-${t.label}-${l[t.to].label}`;o[n]||(o[n]={projected:[],fromNodeId:i,edgeLabel:t.label,nodeLabel2:l[t.to].label}),o[n].projected.push({graphId:e.graphId,edge:t,preNode:e})});for(var m=function(n){t.findForwardRmpathEdges(c,u.edges[r[n]],a,u).forEach(function(i){var a=`${t.dfsCode.dfsEdgeList[r[n]].fromNode}-${i.label}-${l[i.to].label}`;o[a]||(o[a]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:l[i.to].label}),o[a].projected.push({graphId:e.graphId,edge:i,preNode:e})})},d=0;d<r.length;d++)m(d)}}),Object.keys(s).forEach(function(e){var n=s[e],r=n.toNodeId,a=n.edgeLabel;t.dfsCode.dfsEdgeList.push(new eF(i,r,`-1`,a,`-1`)),t.subGraphMining(s[e].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(o).forEach(function(e){var n=o[e],r=n.fromNodeId,a=n.edgeLabel,s=n.nodeLabel2;t.dfsCode.dfsEdgeList.push(new eF(r,i+1,`-1`,a,s)),t.subGraphMining(o[e].projected),t.dfsCode.dfsEdgeList.pop()})}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},a={},o={},s={};return Object.keys(e).forEach(function(n){var r=e[n],c=r.nodeMap;r.nodes.forEach(function(e,r){var l=e.label,u=`${n}-${l}`;if(!o[u]){var d=i[l]||0;d++,i[l]=d}o[u]={graphKey:n,label:l},e.edges.forEach(function(e){var r=l,i=c[e.to].label;if(!t&&r>i){var o=i;i=r,r=o}var u=e.label,d=`${n}-${r}-${u}-${i}`,f=`${r}-${u}-${i}`;if(!a[f]){var p=a[f]||0;p++,a[f]=p}s[d]={graphId:n,nodeLabel1:r,edgeLabel:u,nodeLabel2:i}})})}),Object.keys(i).forEach(function(e){if(!(i[e]<n)){var t={nodes:[],edges:[]};t.nodes.push({id:`0`,label:e}),r.push(t)}}),r},e.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var n={};Object.keys(t).forEach(function(r){var i=t[r],a=i.nodeMap;i.nodes.forEach(function(t){e.findForwardRootEdges(i,t).forEach(function(e){var i=a[e.to],o=`${t.label}-${e.label}-${i.label}`;n[o]||(n[o]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:i.label});var s={graphId:r,edge:e,preNode:null};n[o].projected.push(s)})})}),Object.keys(n).forEach(function(t){var r=n[t],i=r.projected,a=r.nodeLabel1,o=r.edgeLabel,s=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new eF(0,1,a,o,s)),e.subGraphMining(i),e.dfsCode.dfsEdgeList.pop()})}},e})(),function(){function e(e){e===void 0&&(e=10),this.linkedList=new TP,this.maxStep=e}return Object.defineProperty(e.prototype,`length`,{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},e.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},e.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},e.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},e.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},e}();function $(e){if(e.id!==void 0)return e.id;if(e.source!==void 0&&e.target!==void 0)return`${e.source}-${e.target}`;throw Error(PN(`The datum does not have available id.`))}function rF(e){return e.combo}function iF(e,t){let n={nodes:(e.nodes||[]).map($),edges:(e.edges||[]).map($),combos:(e.combos||[]).map($)};return t?Object.values(n).flat():n}const aF=(e,t,n)=>{var r;switch(n.type){case`degree`:{let i=new Map;return(r=e.nodes)==null||r.forEach(e=>{let r=t($(e),n.direction).length;i.set($(e),r)}),i}case`betweenness`:return sF(e,n.directed,n.weightPropertyName);case`closeness`:return cF(e,n.directed,n.weightPropertyName);case`eigenvector`:return uF(e,n.directed);case`pagerank`:return lF(e,n.epsilon,n.linkProb);default:return oF(e)}},oF=e=>{var t;let n=new Map;return(t=e.nodes)==null||t.forEach(e=>{n.set($(e),0)}),n},sF=(e,t,n)=>{let r=oF(e),{nodes:i=[]}=e;return i.forEach(a=>{i.forEach(i=>{if(a!==i){let{allPath:o}=qP(e,$(a),$(i),t,n),s=o.length;o.flat().forEach(e=>{e!==$(a)&&e!==$(i)&&r.set(e,r.get(e)+1/s)})}})}),r},cF=(e,t,n)=>{let r=new Map,{nodes:i=[]}=e;return i.forEach(a=>{let o=i.reduce((r,i)=>{if(a!==i){let{length:o}=qP(e,$(a),$(i),t,n);r+=o}return r},0);r.set($(a),1/o)}),r},lF=(e,t,n)=>{var r;let i=new Map,a=XP(e,t,n);return(r=e.nodes)==null||r.forEach(e=>{i.set($(e),a[$(e)])}),i},uF=(e,t)=>{let{nodes:n=[]}=e,r=dF(e,t),i=fF(r,n.length),a=new Map;return n.forEach((e,t)=>{a.set($(e),i[t])}),a},dF=(e,t)=>{let{nodes:n=[],edges:r=[]}=e,i=Array(n.length).fill(null).map(()=>Array(n.length).fill(0));return r.forEach(({source:e,target:r})=>{let a=n.findIndex(t=>$(t)===e),o=n.findIndex(e=>$(e)===r);t?i[a][o]=1:(i[a][o]=1,i[o][a]=1)}),i};var fF=(e,t,n=100,r=1e-6)=>{let i=Array(t).fill(1),a=1/0;for(let o=0;o<n&&a>r;o++){let n=Array(t).fill(0);for(let r=0;r<t;r++)for(let a=0;a<t;a++)n[r]+=e[r][a]*i[a];let r=Math.sqrt(n.reduce((e,t)=>e+t*t,0));for(let e=0;e<t;e++)n[e]/=r;a=Math.sqrt(n.reduce((e,t,n)=>e+(t-i[n])*t,0)),i=n}return i};function pF(e,t,n,r=aC){let i=new Map(e.map(e=>[n(e),e])),a=new Map(t.map(e=>[n(e),e])),o=new Set(i.keys()),s=new Set(a.keys()),c=[],l=[],u=[],d=[];return s.forEach(e=>{o.has(e)?r(i.get(e),a.get(e))?d.push(a.get(e)):l.push(a.get(e)):c.push(a.get(e))}),o.forEach(e=>{s.has(e)||u.push(i.get(e))}),{enter:c,exit:u,keep:d,update:l}}function mF(e,t,n){let r=e=>{n&&!n(e)||(e.style.visibility=t)};e.forEach(e=>{r(e)})}function hF(e,t,n){let r={},i=e=>(e in r||(r[e]=0),`${t}-${e}-${r[e]++}`);return n.map(t=>typeof t==`string`?{type:t,key:i(t)}:typeof t==`function`?t.call(e):t.key?t:Object.assign(Object.assign({},t),{key:i(t.type)}))}var gF=class{constructor(e){this.extensions=[],this.extensionMap={},this.context=e}setExtensions(e){let t=hF(this.context.graph,this.category,e),{enter:n,update:r,exit:i,keep:a}=pF(this.extensions,t,e=>e.key);this.createExtensions(n),this.updateExtensions([...r,...a]),this.destroyExtensions(i),this.extensions=t}createExtension(e){let{category:t}=this,{key:n,type:r}=e,i=MN(t,r);if(!i)return FN.warn(`The extension ${r} of ${t} is not registered.`);let a=new i(this.context,e);a.initialized=!0,this.extensionMap[n]=a}createExtensions(e){e.forEach(e=>this.createExtension(e))}updateExtension(e){let{key:t}=e,n=this.extensionMap[t];n&&n.update(e)}updateExtensions(e){e.forEach(e=>this.updateExtension(e))}destroyExtension(e){let t=this.extensionMap[e];t&&(t.initialized&&!t.destroyed&&t.destroy(),delete this.extensionMap[e])}destroyExtensions(e){e.forEach(({key:e})=>this.destroyExtension(e))}destroy(){this.destroyExtensions(this.extensions),this.context={},this.extensions=[],this.extensionMap={}}},_F=class{constructor(e,t){this.events=[],this.initialized=!1,this.destroyed=!1,this.context=e,this.options=t}update(e){this.options=Object.assign(this.options,e)}destroy(){this.context={},this.options={},this.destroyed=!0}},vF=class extends _F{},yF=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.isOverlapping=(e,t)=>t.some(t=>e.intersects(t)),this.occupiedBounds=[],this.detectLabelCollision=e=>{let t=this.context.viewport,n={show:[],hide:[]};return this.occupiedBounds=[],e.forEach(e=>{let r=e.getShape(`label`).getRenderBounds();t.isInViewport(r,!0)&&!this.isOverlapping(r,this.occupiedBounds)?(n.show.push(e),this.occupiedBounds.push(dP(r,this.options.padding))):n.hide.push(e)}),n},this.hideLabelIfExceedViewport=(e,t)=>{let{exit:n}=pF(e,t,e=>e.id);n?.forEach(this.hideLabel)},this.nodeCentralities=new Map,this.sortNodesByCentrality=(e,t)=>{let{model:n}=this.context,r=n.getData(),i=n.getRelatedEdgesData.bind(n);return e.map(e=>(this.nodeCentralities.has(e.id)||(this.nodeCentralities=aF(r,i,t)),{node:e,centrality:this.nodeCentralities.get(e.id)})).sort((e,t)=>t.centrality-e.centrality).map(e=>e.node)},this.sortLabelElementsInView=e=>{let{sort:t,sortNode:n,sortCombo:r,sortEdge:i}=this.options,{model:a}=this.context;if(rS(t))return e.sort((e,n)=>t(a.getElementDataById(e.id),a.getElementDataById(n.id)));let{node:o=[],edge:s=[],combo:c=[]}=xS(e,e=>e.type),l=rS(r)?c.sort((e,t)=>r(...a.getComboData([e.id,t.id]))):c,u=rS(n)?o.sort((e,t)=>n(...a.getNodeData([e.id,t.id]))):this.sortNodesByCentrality(o,n),d=rS(i)?s.sort((e,t)=>i(...a.getEdgeData([e.id,t.id]))):s;return[...l,...u,...d]},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=e=>{if(e.data?.stage===`zIndex`)return;if(!this.validate(e)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return}let t=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,t),this.labelElementsInView=t;let n=this.sortLabelElementsInView(this.labelElementsInView),{show:r,hide:i}=this.detectLabelCollision(n);for(let e=r.length-1;e>=0;e--)this.showLabel(r[e]);i.forEach(this.hideLabel)},this.hiddenElements=new Map,this.hideLabel=e=>{let t=e.getShape(`label`);t&&mF(t,`hidden`),this.hiddenElements.set(e.id,e)},this.showLabel=e=>{let t=e.getShape(`label`);t&&mF(t,`visible`),e.toFront(),this.hiddenElements.delete(e.id)},this.onTransform=dC(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=e=>{this.enableToggle&&this.onToggleVisibility(e)},this.onBeforeRender=()=>{this.enableToggle=!1},this.onAfterRender=e=>{this.onToggleVisibility(e),this.enableToggle=!0},this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents(),this.onToggleVisibility({})}getLabelElements(){let{elementMap:e}=this.context.element,t=[];for(let n in e){let r=e[n];r.isVisible()&&r.getShape(`label`)&&t.push(r)}return t}getLabelElementsInView(){let e=this.context.viewport;return this.getLabelElements().filter(t=>e.isInViewport(t.getShape(`key`).getRenderBounds()))}bindEvents(){let{graph:e}=this.context;e.on(Q.BEFORE_RENDER,this.onBeforeRender),e.on(Q.AFTER_RENDER,this.onAfterRender),e.on(Q.AFTER_DRAW,this.toggle),e.on(Q.AFTER_LAYOUT,this.toggle),e.on(Q.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){let{graph:e}=this.context;e.off(Q.BEFORE_RENDER,this.onBeforeRender),e.off(Q.AFTER_RENDER,this.onAfterRender),e.off(Q.AFTER_DRAW,this.toggle),e.off(Q.AFTER_LAYOUT,this.toggle),e.off(Q.AFTER_TRANSFORM,this.onTransform)}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}};yF.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:`degree`}};var bF=[0,0,0];function xF(e,t){return e.map((e,n)=>e+t[n])}function SF(e,t){return e.map((e,n)=>e-t[n])}function CF(e,t){return typeof t==`number`?e.map(e=>e*t):e.map((e,n)=>e*t[n])}function wF(e,t){return typeof t==`number`?e.map(e=>e/t):e.map((e,n)=>e/t[n])}function TF(e,t){return e.reduce((e,n,r)=>e+n*t[r],0)}function EF(e,t){let n=FF(e),r=FF(t);return[n[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]]}function DF(e,t){return e.map(e=>e*t)}function OF(e,t){return Math.sqrt(e.reduce((e,n,r)=>e+(n-t[r]||0)**2,0))}function kF(e,t){return e.reduce((e,n,r)=>e+Math.abs(n-t[r]),0)}function AF(e){let t=e.reduce((e,t)=>e+t**2,0);return e.map(e=>e/Math.sqrt(t))}function jF(e,t,n=!1){let r=e[0]*t[1]-e[1]*t[0],i=Math.acos(CF(e,t).reduce((e,t)=>e+t,0)/(OF(e,bF)*OF(t,bF)));return n&&r<0&&(i=2*Math.PI-i),i}function MF(e,t=!0){return t?[-e[1],e[0]]:[e[1],-e[0]]}function NF(e,t){return e.map(e=>e%t)}function PF(e){return[e[0],e[1]]}function FF(e){return tP(e)?[e[0],e[1],0]:e}function IF(e){let[t,n]=e;return!t&&!n?0:Math.atan2(n,t)}function LF(e,t){let[n,r]=e,[i,a]=t,o=SF(n,r),s=SF(i,a);return EF(o,s).every(e=>e===0)}function RF(e,t,n=!1){if(LF(e,t))return;let[r,i]=e,[a,o]=t,s=((r[0]-a[0])*(a[1]-o[1])-(r[1]-a[1])*(a[0]-o[0]))/((r[0]-i[0])*(a[1]-o[1])-(r[1]-i[1])*(a[0]-o[0])),c=o[0]-a[0]?(r[0]-a[0]+s*(i[0]-r[0]))/(o[0]-a[0]):(r[1]-a[1]+s*(i[1]-r[1]))/(o[1]-a[1]);if(!(!n&&(!rP(s,0,1)||!rP(c,0,1))))return[r[0]+s*(i[0]-r[0]),r[1]+s*(i[1]-r[1])]}function zF(e){if(Array.isArray(e))return rP(e[0],0,1)&&rP(e[1],0,1)?e:[.5,.5];let t=e.split(`-`),n=t.includes(`left`)?0:t.includes(`right`)?1:.5,r=t.includes(`top`)?0:t.includes(`bottom`)?1:.5;return[n,r]}function BF(e){let{x:t=0,y:n=0,z:r=0}=e.style||{};return[+t,+n,+r]}function VF(e){let{x:t,y:n,z:r}=e.style||{};return t!==void 0||n!==void 0||r!==void 0}function HF(e,t){let[n,r]=t,{min:i,max:a}=e;return[i[0]+n*(a[0]-i[0]),i[1]+r*(a[1]-i[1])]}function UF(e,t=`center`){let n=zF(t);return HF(e,n)}function WF(e){return[e.x,e.y,e.z??0]}function GF(e){return{x:e[0],y:e[1],z:e[2]??0}}function KF(e,t=0){return e.map(e=>parseFloat(e.toFixed(t)))}function qF(e,t,n,r=!1){if(aC(e,t))return e;let i=r?SF(e,t):SF(t,e),a=AF(i),o=[a[0]*n,a[1]*n];return xF(PF(e),o)}function JF(e,t){return e[1]===t[1]}function YF(e,t){return e[0]===t[0]}function XF(e,t){return JF(e,t)||YF(e,t)}function ZF(e,t,n){return LF([e,t],[t,n])}function QF(e,t){return[2*t[0]-e[0],2*t[1]-e[1]]}function $F(e,t,n,r=!0,i=!1){for(let a=0;a<n.length;a++){let o=n[a],s=n[(a+1)%n.length];r&&(o=xF(t,o),s=xF(t,s));let c=i?QF(e,t):e,l=RF([t,c],[o,s]);if(l)return{point:l,line:[o,s]}}return{point:t,line:void 0}}function eI(e,t,n,r){let i=e[0],a=e[1],o=!1;n===void 0&&(n=0),r===void 0&&(r=t.length);let s=r-n;for(let e=0,r=s-1;e<s;r=e++){let s=t[e+n][0],c=t[e+n][1],l=t[r+n][0],u=t[r+n][1];c>a!=u>a&&i<(l-s)*(a-c)/(u-c)+s&&(o=!o)}return o}function tI(e,t,n=!1){let r=UF(t,`center`),i=[UF(t,`left-top`),UF(t,`right-top`),UF(t,`right-bottom`),UF(t,`left-bottom`)];return $F(e,r,i,!1,n).point}function nI(e,t,n=!1){let r=t.center,i=n?QF(e,r):e,a=SF(i,t.center),o=Math.atan2(a[1],a[0]);if(isNaN(o))return r;let s=oP(t)/2,c=sP(t)/2,l=r[0]+s*Math.cos(o),u=r[1]+c*Math.sin(o);return[l,u]}function rI(e,t){let n=1/0,r=[e[0],t[0]];return e.forEach(e=>{t.forEach(t=>{let i=OF(e,t);i<n&&(n=i,r=[e,t])})}),r}function iI(e,t){let n=1/0,r=[[0,0],[0,0]];return t.forEach(t=>{let i=aI(e,t);i<n&&(n=i,r=t)}),r}function aI(e,t){let n=oI(e,t);return OF(e,n)}function oI(e,t){let[n,r]=t[0],[i,a]=t[1],[o,s]=e,c=i-n,l=a-r;if(c===0&&l===0)return[n,r];let u=((o-n)*c+(s-r)*l)/(c*c+l*l);u>1?u=1:u<0&&(u=0);let d=n+u*c,f=r+u*l;return[d,f]}function sI(e){let t=e.reduce((e,t)=>xF(e,t),[0,0]);return wF(t,e.length)}function cI(e,t=!0){let n=sI(e);return e.sort(([e,r],[i,a])=>{let o=Math.atan2(r-n[1],e-n[0]),s=Math.atan2(a-n[1],i-n[0]);return t?s-o:o-s})}function lI(e,t){return[e,[e[0],t[1]],t,[t[0],e[1]]]}var uI=class e{constructor(t,n,r){if(this.phase=n,this.pointerByTouch=[],this.initialDistance=null,this.emitter=t,e.instance)return e.callbacks[this.phase].push(r),e.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),e.instance=this,e.callbacks[this.phase].push(r)}bindEvents(){let{emitter:e}=this;e.on(Z.POINTER_DOWN,this.onPointerDown),e.on(Z.POINTER_MOVE,this.onPointerMove),e.on(Z.POINTER_UP,this.onPointerUp)}updatePointerPosition(e,t,n){let r=this.pointerByTouch.findIndex(t=>t.pointerId===e);r>=0&&(this.pointerByTouch[r]={x:t,y:n,pointerId:e})}onPointerDown(t){let{x:n,y:r}=t.client||{};if(!(n===void 0||r===void 0)&&(this.pointerByTouch.push({x:n,y:r,pointerId:t.pointerId}),t.pointerType===`touch`&&this.pointerByTouch.length===2)){e.isPinching=!0;let n=this.pointerByTouch[0].x-this.pointerByTouch[1].x,r=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(n*n+r*r),e.callbacks.pinchstart.forEach(e=>e(t,{scale:0}))}}onPointerMove(t){if(this.pointerByTouch.length!==2||this.initialDistance===null)return;let{x:n,y:r}=t.client||{};if(n===void 0||r===void 0)return;this.updatePointerPosition(t.pointerId,n,r);let i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y,o=Math.sqrt(i*i+a*a)/this.initialDistance;e.callbacks.pinchmove.forEach(e=>e(t,{scale:(o-1)*5}))}onPointerUp(t){var n;e.callbacks.pinchend.forEach(e=>e(t,{scale:0})),e.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],(n=e.instance)==null||n.tryDestroy()}destroy(){this.emitter.off(Z.POINTER_DOWN,this.onPointerDown),this.emitter.off(Z.POINTER_MOVE,this.onPointerMove),this.emitter.off(Z.POINTER_UP,this.onPointerUp),e.instance=null}off(t,n){let r=e.callbacks[t].indexOf(n);r>-1&&e.callbacks[t].splice(r,1),this.tryDestroy()}tryDestroy(){Object.values(e.callbacks).every(e=>e.length===0)&&this.destroy()}};uI.isPinching=!1,uI.instance=null,uI.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};var dI=e=>e.map(e=>_S(e)?e.toLocaleLowerCase():e),fI=class{constructor(e){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=e=>{e?.key&&(this.recordKey.add(e.key),this.trigger(e))},this.onKeyUp=e=>{e?.key&&this.recordKey.delete(e.key)},this.onWheel=e=>{this.triggerExtendKey(Z.WHEEL,e)},this.onDrag=e=>{this.triggerExtendKey(Z.DRAG,e)},this.handlePinch=(e,t)=>{this.triggerExtendKey(Z.PINCH,Object.assign(Object.assign({},e),t))},this.onFocus=()=>{this.recordKey.clear()},this.emitter=e,this.bindEvents()}bind(e,t){e.length!==0&&(e.includes(Z.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new uI(this.emitter,`pinchmove`,this.boundHandlePinch)),this.map.set(e,t))}unbind(e,t){this.map.forEach((n,r)=>{aC(r,e)&&(!t||t===n)&&this.map.delete(r)})}unbindAll(){this.map.clear()}match(e){let t=dI(Array.from(this.recordKey)).sort(),n=dI(e).sort();return aC(t,n)}bindEvents(){var e;let{emitter:t}=this;t.on(Z.KEY_DOWN,this.onKeyDown),t.on(Z.KEY_UP,this.onKeyUp),t.on(Z.WHEEL,this.onWheel),t.on(Z.DRAG,this.onDrag),(e=globalThis.addEventListener)==null||e.call(globalThis,`focus`,this.onFocus)}trigger(e){this.map.forEach((t,n)=>{this.match(n)&&t(e)})}triggerExtendKey(e,t){this.map.forEach((n,r)=>{r.includes(e)&&aC(Array.from(this.recordKey),r.filter(t=>t!==e))&&n(t)})}destroy(){var e,t;this.unbindAll(),this.emitter.off(Z.KEY_DOWN,this.onKeyDown),this.emitter.off(Z.KEY_UP,this.onKeyUp),this.emitter.off(Z.WHEEL,this.onWheel),this.emitter.off(Z.DRAG,this.onDrag),(e=this.pinchHandler)==null||e.off(`pinchmove`,this.boundHandlePinch),(t=globalThis.removeEventListener)==null||t.call(globalThis,`blur`,this.onFocus)}},pI=class e extends vF{constructor(t,n){super(t,eC({},e.defaultOptions,n)),this.shortcut=new fI(t.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents()}onPointerDown(e){if(!this.validate(e)||!this.isKeydown()||this.startPoint)return;let{canvas:t,graph:n}=this.context,r=Object.assign({},this.options.style);this.options.style.lineWidth&&(r.lineWidth=+this.options.style.lineWidth/n.getZoom()),this.rectShape=new Yj({id:`g6-brush-select`,style:r}),t.appendChild(this.rectShape),this.startPoint=[e.canvas.x,e.canvas.y]}onPointerMove(e){var t;if(!this.startPoint)return;let{immediately:n,mode:r}=this.options;this.endPoint=mI(e),(t=this.rectShape)==null||t.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),n&&r===`default`&&this.updateElementsStates(lI(this.startPoint,this.endPoint))}onPointerUp(e){if(this.startPoint){if(!this.endPoint){this.clearBrush();return}this.endPoint=mI(e),this.updateElementsStates(lI(this.startPoint,this.endPoint)),this.clearBrush()}}clearStates(){this.endPoint||this.clearElementsStates()}clearElementsStates(){let{graph:e}=this.context,t=Object.values(e.getData()).reduce((e,t)=>Object.assign({},e,t.reduce((e,t)=>{let n=(t.states||[])?.filter(e=>e!==this.options.state);return e[$(t)]=n,e},{})),{});e.setElementState(t,this.options.animation)}updateElementsStates(e){let{graph:t}=this.context,{enableElements:n,state:r,mode:i,onSelect:a}=this.options,o=this.selector(t,e,n),s={};switch(i){case`union`:o.forEach(e=>{s[e]=[...t.getElementState(e),r]});break;case`diff`:o.forEach(e=>{let n=t.getElementState(e);s[e]=n.includes(r)?n.filter(e=>e!==r):[...n,r]});break;case`intersect`:o.forEach(e=>{s[e]=t.getElementState(e).includes(r)?[r]:[]});break;case`default`:default:o.forEach(e=>{s[e]=[r]});break}rS(a)&&(s=a(s)),t.setElementState(s,this.options.animation)}selector(e,t,n){if(!n||n.length===0)return[];let r=[],i=e.getData();return n.forEach(n=>{i[`${n}s`].forEach(n=>{let i=$(n);e.getElementVisibility(i)!==`hidden`&&eI(e.getElementPosition(i),t)&&r.push(i)})}),n.includes(`edge`)&&i.edges?.forEach(e=>{let{source:t,target:n}=e;r.includes(t)&&r.includes(n)&&r.push($(e))}),r}clearBrush(){var e;(e=this.rectShape)==null||e.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}isKeydown(){let{trigger:e}=this.options,t=Array.isArray(e)?e:[e];return this.shortcut.match(t.filter(e=>e!==`drag`))}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}bindEvents(){let{graph:e}=this.context;e.on(Z.POINTER_DOWN,this.onPointerDown),e.on(Z.POINTER_MOVE,this.onPointerMove),e.on(Z.POINTER_UP,this.onPointerUp),e.on(SN.CLICK,this.clearStates)}unbindEvents(){let{graph:e}=this.context;e.off(Z.POINTER_DOWN,this.onPointerDown),e.off(Z.POINTER_MOVE,this.onPointerMove),e.off(Z.POINTER_UP,this.onPointerUp),e.off(SN.CLICK,this.clearStates)}update(e){this.unbindEvents(),this.options=eC(this.options,e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}};pI.defaultOptions={animation:!1,enable:!0,enableElements:[`node`,`combo`,`edge`],immediately:!1,mode:`default`,state:`selected`,trigger:[`shift`],style:{width:0,height:0,lineWidth:1,fill:`#1677FF`,stroke:`#1677FF`,fillOpacity:.1,zIndex:2,pointerEvents:`none`}};const mI=e=>[e.canvas.x,e.canvas.y],hI=.8,gI=[`node`,`edge`,`combo`];function _I(e,t,n,r,i=0){r===`TB`&&t(e,i);let a=n(e);if(a)for(let e of a)_I(e,t,n,r,i+1);r===`BT`&&t(e,i)}function vI(e,t,n){let r=[[e,0]];for(;r.length;){let[e,i]=r.shift();t(e,i);let a=n(e);if(a)for(let e of a)r.push([e,i+1])}}function yI(e,t,n,r,i=`both`){if(t===`combo`||t===`node`)return bI(e,n,r,i);let a=e.getEdgeData(n);if(!a)return[];let o=bI(e,a.source,r-1,i),s=bI(e,a.target,r-1,i);return Array.from(new Set([...o,...s,n]))}function bI(e,t,n,r=`both`){let i=new Set,a=new Set,o=new Set;return vI(t,(t,i)=>{i>n||(o.add(t),e.getRelatedEdgesData(t,r).forEach(e=>{let t=$(e);!a.has(t)&&i<n&&(o.add(t),a.add(t))}))},t=>e.getRelatedEdgesData(t,r).map(e=>e.source===t?e.target:e.source).filter(e=>i.has(e)?!1:(i.add(e),!0))),Array.from(o)}function xI(e){return e.states||[]}var SI=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},CI=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.onClickSelect=e=>SI(this,void 0,void 0,function*(){var t,n;this.validate(e)&&(yield this.updateState(e),(n=(t=this.options).onClick)==null||n.call(t,e))}),this.onClickCanvas=e=>SI(this,void 0,void 0,function*(){var t,n;this.validate(e)&&(yield this.clearState(),(n=(t=this.options).onClick)==null||n.call(t,e))}),this.shortcut=new fI(t.graph),this.bindEvents()}bindEvents(){let{graph:e}=this.context;this.unbindEvents(),gI.forEach(t=>{e.on(`${t}:${Z.CLICK}`,this.onClickSelect)}),e.on(SN.CLICK,this.onClickCanvas)}get isMultipleSelect(){let{multiple:e,trigger:t}=this.options;return e&&this.shortcut.match(t)}getNeighborIds(e){let{target:t,targetType:n}=e,{graph:r}=this.context,{degree:i}=this.options;return yI(r,n,t.id,typeof i==`function`?i(e):i).filter(e=>e!==t.id)}updateState(e){return SI(this,void 0,void 0,function*(){let{state:t,unselectedState:n,neighborState:r,animation:i}=this.options;if(!t&&!r&&!n)return;let{target:a}=e,{graph:o}=this.context,s=o.getElementData(a.id),c=xI(s).includes(t)?`unselect`:`select`,l={},u=this.isMultipleSelect,d=[a.id],f=this.getNeighborIds(e);if(u)if(Object.assign(l,this.getDataStates()),c===`select`){let e=(e,t)=>{e.forEach(e=>{let r=new Set(o.getElementState(e));r.add(t),r.delete(n),l[e]=Array.from(r)})};e(d,t),e(f,r),n&&Object.keys(l).forEach(e=>{let i=l[e];!i.includes(t)&&!i.includes(r)&&!i.includes(n)&&l[e].push(n)})}else{let e=l[a.id];l[a.id]=e.filter(e=>e!==t&&e!==r),e.includes(n)||l[a.id].push(n),f.forEach(e=>{l[e]=l[e].filter(e=>e!==r),l[e].includes(t)||l[e].push(n)})}else if(c===`select`){Object.assign(l,this.getClearStates(!!n));let e=(e,t)=>{e.forEach(e=>{l[e]||(l[e]=o.getElementState(e)),l[e].push(t)})};e(d,t),e(f,r),n&&Object.keys(l).forEach(e=>{!d.includes(e)&&!f.includes(e)&&l[e].push(n)})}else Object.assign(l,this.getClearStates());yield o.setElementState(l,i)})}getDataStates(){let{graph:e}=this.context,{nodes:t,edges:n,combos:r}=e.getData(),i={};return[...t,...n,...r].forEach(e=>{i[$(e)]=xI(e)}),i}getClearStates(e=!1){let{graph:t}=this.context,{state:n,unselectedState:r,neighborState:i}=this.options,a=new Set([n,r,i]),{nodes:o,edges:s,combos:c}=t.getData(),l={};return[...o,...s,...c].forEach(t=>{let n=xI(t),r=n.filter(e=>!a.has(e));(e||r.length!==n.length)&&(l[$(t)]=r)}),l}clearState(){return SI(this,void 0,void 0,function*(){let{graph:e}=this.context;yield e.setElementState(this.getClearStates(),this.options.animation)})}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}unbindEvents(){let{graph:e}=this.context;gI.forEach(t=>{e.off(`${t}:${Z.CLICK}`,this.onClickSelect)}),e.off(SN.CLICK,this.onClickCanvas)}destroy(){this.unbindEvents(),super.destroy()}};CI.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:[`shift`],state:`selected`,neighborState:`selected`,unselectedState:void 0,degree:0};function wI(e){return!!e.style?.collapsed}function TI(e,t){if(!e.startsWith(t))return!1;let n=e[t.length];return n>=`A`&&n<=`Z`}function EI(e,t){return`${t}${MS(e)}`}function DI(e,t,n=!0){if(!t||!TI(e,t))return e;let r=e.slice(t.length);return n?kS(r):r}function OI(e,t){let n=Object.entries(e).reduce((e,[n,r])=>(n===`className`||n===`class`||TI(n,t)&&Object.assign(e,{[DI(n,t)]:r}),e),{});if(`opacity`in e){let r=EI(`opacity`,t),i=e.opacity;if(r in e){let t=e[r];Object.assign(n,{opacity:i*t})}else Object.assign(n,{opacity:i})}return n}function kI(e,t){let n=t.length;return Object.keys(e).reduce((r,i)=>{if(i.startsWith(t)){let t=i.slice(n);r[t]=e[i]}return r},{})}function AI(e,t){let n=typeof t==`string`?[t]:t,r={};return Object.keys(e).forEach(t=>{n.find(e=>t.startsWith(e))||(r[t]=e[t])}),r}function jI(e=0){if(typeof e==`number`)return[e,e,e];let[t,n=t,r=t]=e;return[t,n,r]}var MI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function NI(e,t){let{datum:n,graph:r}=t;return typeof e==`function`?e.call(r,n):Object.fromEntries(Object.entries(e).map(([e,t])=>typeof t==`function`?[e,t.call(r,n)]:[e,t]))}function PI(e,t){let n=e?.style||{},r=t?.style||{};for(let e in n)e in r||(r[e]=n[e]);return Object.assign({},e,t,{style:r})}function FI(e){let{x:t,y:n,z:r,class:i,className:a,transform:o,transformOrigin:s,zIndex:c,visibility:l}=e;return MI(e,[`x`,`y`,`z`,`class`,`className`,`transform`,`transformOrigin`,`zIndex`,`visibility`])}function II(e,t){let n=jI(e),r={};return t.text&&!t.fontSize&&(r={fontSize:Math.min(...n)*.5}),t.src&&(!t.width||!t.height)&&(r={width:n[0]*.5,height:n[1]*.5}),r}function LI(e){if(e)return typeof e==`string`||typeof e==`function`||Array.isArray(e)?{type:`group`,field:e=>e.id,color:e,invert:!1}:e}function RI(e,t){if(!t)return{};let{type:n,color:r,field:i,invert:a}=t,o=e=>{let t=typeof r==`string`?MN(`palette`,r):r;if(typeof t==`function`){let n={};return e.forEach(([e,r])=>{n[e]=t(a?1-r:r)}),n}else if(Array.isArray(t)){let n=a?[...t].reverse():t,r={};return e.forEach(([e,i])=>{r[e]=n[i%t.length]}),r}return{}},s=(e,t)=>typeof e==`string`?t.data?.[e]:e?.(t);if(n===`group`){let t=xS(e,e=>{if(!i)return`default`;let t=s(i,e);return t?String(t):`default`}),n=o(Object.keys(t).map((e,t)=>[e,t])),r={};return Object.entries(t).forEach(([e,t])=>{t.forEach(t=>{r[$(t)]=n[e]})}),r}else if(n===`value`){let[t,n]=e.reduce(([e,t],n)=>{let r=s(i,n);if(typeof r!=`number`)throw Error(PN(`Palette field ${i} is not a number`));return[Math.min(e,r),Math.max(t,r)]},[1/0,-1/0]),r=n-t;return o(e.map(e=>[e.id,(s(i,e)-t)/r]))}}function zI(e){let t=typeof e==`string`?MN(`palette`,e):e;if(typeof t!=`function`)return t}function BI(e,t){let n=2*e;return typeof t==`string`?n=e*Number(t.replace(`%`,``))/100:typeof t==`number`&&(n=t),isNaN(n)&&(n=2*e),n}function VI(e,t,n=1,r=!1){let i=r?n:1,a=(e.max[0]-e.min[0])*i;return BI(a,t)}function HI(e,t,n=1){let r=OF(e[0],e[1])*n;return BI(r,t)}var UI=class extends Pj{constructor(e){GI(e.style),super(e),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents()}get parsedAttributes(){return this.attributes}upsert(e,t,n,r,i){var a,o,s,c,l,u,d,f;let p=this.shapeMap[e];if(n===!1){p&&((a=i?.beforeDestroy)==null||a.call(i,p),r.removeChild(p),delete this.shapeMap[e],(o=i?.afterDestroy)==null||o.call(i,p));return}let m=typeof t==`string`?MN(AN.SHAPE,t):t;if(!m)throw Error(PN(`Shape ${t} not found`));if(!p||p.destroyed||!(p instanceof m)){p&&((s=i?.beforeDestroy)==null||s.call(i,p),p?.destroy(),(c=i?.afterDestroy)==null||c.call(i,p)),(l=i?.beforeCreate)==null||l.call(i);let t=new m({className:e,style:n});return r.appendChild(t),this.shapeMap[e]=t,(u=i?.afterCreate)==null||u.call(i,t),t}return(d=i?.beforeUpdate)==null||d.call(i,p),FB(p,n),(f=i?.afterUpdate)==null||f.call(i,p),p}update(e={}){let t=Object.assign({},this.attributes,e);GI(t),PB(this,t),this.render(t,this),this.setVisibility()}bindEvents(){}getGraphicStyle(e){return FI(e)}get compositeShapes(){return[[`badges`,`badge-`],[`ports`,`port-`]]}animate(e,t){if(e.length===0)return null;let n=[];if(e[0].x!==void 0||e[0].y!==void 0||e[0].z!==void 0){let{x:t=0,y:n=0,z:r=0}=this.attributes;e.forEach(e=>{let{x:i=t,y:a=n,z:o=r}=e;Object.assign(e,{transform:o?[[`translate3d`,i,a,o]]:[[`translate`,i,a]]})})}let r=super.animate(e,t);if(r&&(WI(this,r),n.push(r)),Array.isArray(e)&&e.length>0){let r=[`transform`,`transformOrigin`,`x`,`y`,`z`,`zIndex`];if(Object.keys(e[0]).some(e=>!r.includes(e))){Object.entries(this.shapeMap).forEach(([r,i])=>{let a=`get${MS(r)}Style`,o=this[a];if(rS(o)){let r=e.map(e=>o.call(this,Object.assign(Object.assign({},this.attributes),e))),a=i.animate(RN(r),t);a&&(WI(i,a),n.push(a))}});let r=(r,i)=>{if(!rC(r)){let a=`get${MS(i)}Style`,o=this[a];if(rS(o)){let i=e.map(e=>o.call(this,Object.assign(Object.assign({},this.attributes),e)));Object.entries(i[0]).map(([e])=>{let a=i.map(t=>t[e]),o=r[e];if(o){let e=o.animate(RN(a),t);e&&(WI(o,e),n.push(e))}})}}};this.compositeShapes.forEach(([e,t])=>{let n=kI(this.shapeMap,t);r(n,e)})}}return LN(n)}getShape(e){return this.shapeMap[e]}setVisibility(){let{visibility:e}=this.attributes;mF(this,e)}destroy(){this.shapeMap={},this.animateMap={},super.destroy()}};function WI(e,t){t?.finished.then(()=>{let n=e.activeAnimations.findIndex(e=>e===t);n>-1&&e.activeAnimations.splice(n,1)})}function GI(e){if(!e)return{};if(`x`in e||`y`in e||`z`in e){let{x:t=0,y:n=0,z:r,transform:i}=e,a=UN(t,n,r,i);a&&(e.transform=a)}return e}var KI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},qI=class e extends UI{constructor(t){super(PI({style:e.defaultStyleProps},t))}isTextStyle(e){return TI(e,`label`)}isBackgroundStyle(e){return TI(e,`background`)}getTextStyle(e){let t=this.getGraphicStyle(e),{padding:n}=t,r=KI(t,[`padding`]);return AI(r,`background`)}getBackgroundStyle(e){if(e.background===!1)return!1;let t=this.getGraphicStyle(e),{wordWrap:n,wordWrapWidth:r,padding:i}=t,a=OI(t,`background`),{min:[o,s],center:[c,l],halfExtents:[u,d]}=this.shapeMap.text.getGeometryBounds(),[f,p,m,h]=iP(i),g=u*2+h+p,{width:_,height:v}=a;_&&v?Object.assign(a,{x:c-Number(_)/2,y:l-Number(v)/2}):Object.assign(a,{x:o-h,y:s-f,width:n?Math.min(g,r+h+p):g,height:d*2+f+m});let{radius:y}=a;if(typeof y==`string`&&y.endsWith(`%`)){let e=Number(y.replace(`%`,``))/100;a.radius=Math.min(+a.width,+a.height)*e}return a}render(e=this.parsedAttributes,t=this){this.upsert(`text`,Zj,this.getTextStyle(e),t),this.upsert(`background`,Yj,this.getBackgroundStyle(e),t)}getGeometryBounds(){return(this.getShape(`background`)||this.getShape(`text`)).getGeometryBounds()}};qI.defaultStyleProps={padding:0,fontSize:12,fontFamily:`system-ui, sans-serif`,wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:`...`,textBaseline:`middle`,backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};var JI=class e extends UI{constructor(t){super(PI({style:e.defaultStyleProps},t))}getBadgeStyle(e){return this.getGraphicStyle(e)}render(e=this.parsedAttributes,t=this){this.upsert(`label`,qI,this.getBadgeStyle(e),t)}getGeometryBounds(){let e=this.getShape(`label`);return(e.getShape(`background`)||e.getShape(`text`)).getGeometryBounds()}};JI.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:`50%`,backgroundOpacity:1};function YI(e,t=!0){let n=[];return e.forEach((e,t)=>{n.push([t===0?`M`:`L`,...e])}),t&&n.push([`Z`]),n}var XI={M:[`x`,`y`],m:[`dx`,`dy`],H:[`x`],h:[`dx`],V:[`y`],v:[`dy`],L:[`x`,`y`],l:[`dx`,`dy`],Z:[],z:[],C:[`x1`,`y1`,`x2`,`y2`,`x`,`y`],c:[`dx1`,`dy1`,`dx2`,`dy2`,`dx`,`dy`],S:[`x2`,`y2`,`x`,`y`],s:[`dx2`,`dy2`,`dx`,`dy`],Q:[`x1`,`y1`,`x`,`y`],q:[`dx1`,`dy1`,`dx`,`dy`],T:[`x`,`y`],t:[`dx`,`dy`],A:[`rx`,`ry`,`rotation`,`large-arc`,`sweep`,`x`,`y`],a:[`rx`,`ry`,`rotation`,`large-arc`,`sweep`,`dx`,`dy`]};function ZI(e){let t=e.replace(/[\n\r]/g,``).replace(/-/g,` -`).replace(/(\d*\.)(\d+)(?=\.)/g,`$1$2 `).trim().split(/\s*,|\s+/),n=[],r=``,i={};for(;t.length>0;){let e=t.shift();e in XI?r=e:t.unshift(e),i={type:r},XI[r].forEach(n=>{e=t.shift(),i[n]=e}),r===`M`?r=`L`:r===`m`&&(r=`l`);let[a,...o]=Object.values(i);n.push([a,...o.map(Number)])}return n}function QI(e){let t=[];return(typeof e==`string`?ZI(e):e).forEach(e=>{let n=e[0];if(n===`Z`){t.push(t[0]);return}if(n!==`A`)for(let n=1;n<e.length;n+=2)t.push([e[n],e[n+1],0]);else{let n=e.length;t.push([e[n-2],e[n-1],0])}}),t}const $I=e=>{if(e.length<2)return[[`M`,0,0],[`L`,0,0]];let t=e[0],n=e[1],r=e[e.length-1],i=e[e.length-2];e.unshift(i,r),e.push(t,n);let a=[[`M`,r[0],r[1]]];for(let t=1;t<e.length-2;t+=1){let[n,r]=e[t-1],[i,o]=e[t],[s,c]=e[t+1],[l,u]=t===e.length-2?[s,c]:e[t+2],d=i+(s-n)/6,f=o+(c-r)/6,p=s-(l-i)/6,m=c-(u-o)/6;a.push([`C`,d,f,p,m,s,c])}return a};function eL(e,t,n,r,i,a,o){let[s,c]=UF(e,t),l={textAlign:t===`left`?`right`:t===`right`?`left`:`center`,textBaseline:t===`top`?`bottom`:t===`bottom`?`top`:`middle`,transform:[[`translate`,s+n,c+r]]};if(t===`center`||!i)return l;let u=QI(a);if(!u||u.length<=3)return l;let d=u.map((e,t)=>{let n=e,r=u[(t+1)%u.length];return aC(n,r)?null:[n,r]}).filter(Boolean),f=iI([s,c],d),p=oI([s,c],f);if(p&&f&&(l.transform=[[`translate`,p[0]+n,p[1]+r]],o)){let e=Math.atan((f[0][1]-f[1][1])/(f[0][0]-f[1][0]));l.transform.push([`rotate`,e/Math.PI*180]),l.textAlign=`center`,(t===`right`||t===`left`)&&(e>0?l.textBaseline=t===`right`?`bottom`:`top`:l.textBaseline=t===`right`?`top`:`bottom`)}return l}var tL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},nL=class e extends UI{constructor(t){super(PI({style:e.defaultStyleProps},t))}getLabelStyle(e){if(!e.label||!e.d||e.d.length===0)return!1;let t=OI(this.getGraphicStyle(e),`label`),{maxWidth:n,offsetX:r,offsetY:i,autoRotate:a,placement:o,closeToPath:s}=t,c=tL(t,[`maxWidth`,`offsetX`,`offsetY`,`autoRotate`,`placement`,`closeToPath`]),l=this.shapeMap.key,u=l?.getRenderBounds();return Object.assign(eL(u,o,r,i,s,e.d,a),{wordWrapWidth:VI(u,n)},c)}getKeyStyle(e){return this.getGraphicStyle(e)}render(e,t){this.upsert(`key`,Wj,this.getKeyStyle(e),t),this.upsert(`label`,qI,this.getLabelStyle(e),t)}};nL.defaultStyleProps={label:!0,labelPlacement:`bottom`,labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};function rL(e){let t=[],n=e=>{e?.children.length&&e.children.forEach(e=>{t.push(e),n(e)})};return n(e),t}function iL(e){let t=[],n=e.parentNode;for(;n;)t.push(n),n=n.parentNode;return t}var aL=class extends Bj{constructor(e){super(e),this.onMounted=()=>{this.handleRadius()},this.onAttrModified=()=>{this.handleRadius()},sL=this,this.isMutationObserved=!0,this.addEventListener(LA.MOUNTED,this.onMounted),this.addEventListener(LA.ATTR_MODIFIED,this.onAttrModified)}handleRadius(){let{radius:e,clipPath:t,width:n=0,height:r=0}=this.attributes;if(e&&n&&r){let[i,a]=this.getBounds().min,o={x:i,y:a,radius:e,width:n,height:r};if(t)Object.assign(this.parsedStyle.clipPath.style,o);else{let e=new Yj({style:o});this.style.clipPath=e}}else t&&(this.style.clipPath=null)}},oL=new WeakMap,sL=null;const cL=e=>{if(sL&&iL(sL).includes(e)){let t=oL.get(e);t?t.includes(sL)||t.push(sL):oL.set(e,[sL])}},lL=e=>{let t=oL.get(e);t&&t.forEach(e=>e.handleRadius())};var uL=class extends UI{constructor(e){super(e)}isImage(){let{src:e}=this.attributes;return!!e}getIconStyle(e=this.attributes){let{width:t=0,height:n=0}=e,r=this.getGraphicStyle(e);return this.isImage()?Object.assign({x:-t/2,y:-n/2},r):Object.assign({textBaseline:`middle`,textAlign:`center`},r)}render(e=this.attributes,t=this){this.upsert(`icon`,this.isImage()?aL:Zj,this.getIconStyle(e),t)}},dL=class extends UI{get context(){return this.config.context}get parsedAttributes(){return this.attributes}onframe(){}animate(e,t){let n=super.animate(e,t);return n&&(n.onframe=()=>this.onframe(),n.finished.then(()=>this.onframe())),n}},fL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},pL=class e extends dL{constructor(t){super(PI({style:e.defaultStyleProps},t)),this.type=`node`}getSize(e=this.attributes){let{size:t}=e;return jI(t)}getKeyStyle(e){let t=this.getGraphicStyle(e);return Object.assign(AI(t,[`label`,`halo`,`icon`,`badge`,`port`]))}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;let t=OI(this.getGraphicStyle(e),`label`),{placement:n,maxWidth:r,offsetX:i,offsetY:a}=t,o=fL(t,[`placement`,`maxWidth`,`offsetX`,`offsetY`]),s=this.getShape(`key`).getLocalBounds();return Object.assign(DB(s,n,i,a),{wordWrapWidth:VI(s,r)},o)}getHaloStyle(e){if(e.halo===!1)return!1;let t=this.getKeyStyle(e),{fill:n}=t,r=fL(t,[`fill`]),i=OI(this.getGraphicStyle(e),`halo`);return Object.assign(Object.assign(Object.assign({},r),{stroke:n}),i)}getIconStyle(e){if(e.icon===!1||!e.iconText&&!e.iconSrc)return!1;let t=OI(this.getGraphicStyle(e),`icon`);return Object.assign(II(e.size,t),t)}getBadgesStyle(e){let t=kI(this.shapeMap,`badge-`),n={};if(Object.keys(t).forEach(e=>{n[e]=!1}),e.badge===!1||!e.badges?.length)return n;let{badges:r=[],badgePalette:i,opacity:a=1}=e,o=fL(e,[`badges`,`badgePalette`,`opacity`]),s=zI(i),c=OI(this.getGraphicStyle(o),`badge`);return r.forEach((e,t)=>{n[t]=Object.assign(Object.assign({backgroundFill:s?s[t%s?.length]:void 0,opacity:a},c),this.getBadgeStyle(e))}),n}getBadgeStyle(e){let t=this.getShape(`key`),{placement:n=`top`,offsetX:r,offsetY:i}=e,a=fL(e,[`placement`,`offsetX`,`offsetY`]),o=DB(t.getLocalBounds(),n,r,i,!0);return Object.assign(Object.assign({},o),a)}getPortsStyle(e){let t=this.getPorts(),n={};if(Object.keys(t).forEach(e=>{n[e]=!1}),e.port===!1||!e.ports?.length)return n;let r=OI(this.getGraphicStyle(e),`port`),{ports:i=[]}=e;return i.forEach((t,i)=>{let a=t.key||i,o=Object.assign(Object.assign({},r),t);if(yB(o))n[a]=!1;else{let[r,i]=this.getPortXY(e,t);n[a]=Object.assign({transform:[[`translate`,r,i]]},o)}}),n}getPortXY(e,t){let{placement:n=`left`}=t,r=this.getShape(`key`);return _B(mL(this.context,r),n)}getPorts(){return kI(this.shapeMap,`port-`)}getCenter(){return this.getShape(`key`).getBounds().center}getIntersectPoint(e,t=!1){let n=this.getShape(`key`).getBounds();return tI(e,n,t)}drawHaloShape(e,t){let n=this.getHaloStyle(e),r=this.getShape(`key`);this.upsert(`halo`,r.constructor,n,t)}drawIconShape(e,t){let n=this.getIconStyle(e);this.upsert(`icon`,uL,n,t),cL(this)}drawBadgeShapes(e,t){let n=this.getBadgesStyle(e);Object.keys(n).forEach(e=>{let r=n[e];this.upsert(`badge-${e}`,JI,r,t)})}drawPortShapes(e,t){let n=this.getPortsStyle(e);Object.keys(n).forEach(e=>{let r=n[e],i=`port-${e}`;this.upsert(i,Mj,r,t)})}drawLabelShape(e,t){let n=this.getLabelStyle(e);this.upsert(`label`,qI,n,t)}_drawKeyShape(e,t){return this.drawKeyShape(e,t)}render(e=this.parsedAttributes,t=this){this._drawKeyShape(e,t),this.getShape(`key`)&&(this.drawHaloShape(e,t),this.drawIconShape(e,t),this.drawBadgeShapes(e,t),this.drawLabelShape(e,t),this.drawPortShapes(e,t))}update(e){super.update(e),e&&(`x`in e||`y`in e||`z`in e)&&lL(this)}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}};pL.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:`none`,haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:`200%`,labelPlacement:`bottom`,labelWordWrap:!1,labelZIndex:0};function mL(e,t){if(!e)return t.getLocalBounds();let n=e.canvas.getLayer(),r=t.cloneNode();mF(r,`hidden`),n.appendChild(r);let i=r.getLocalBounds();return r.destroy(),i}var hL=class e extends pL{constructor(t){super(PI({style:e.defaultStyleProps},t))}drawKeyShape(e,t){return this.upsert(`key`,Mj,this.getKeyStyle(e),t)}getKeyStyle(e){let t=super.getKeyStyle(e);return Object.assign(Object.assign({},t),{r:Math.min(...this.getSize(e))/2})}getIconStyle(e){let t=super.getIconStyle(e),{r:n}=this.getShape(`key`).attributes,r=n*2*hI;return t?Object.assign({width:r,height:r},t):!1}getIntersectPoint(e,t=!1){let n=this.getShape(`key`).getBounds();return nI(e,n,t)}};hL.defaultStyleProps={size:32};var gL=class extends pL{constructor(e){super(e)}get parsedAttributes(){return this.attributes}drawKeyShape(e,t){return this.upsert(`key`,Kj,this.getKeyStyle(e),t)}getKeyStyle(e){let t=super.getKeyStyle(e);return Object.assign(Object.assign({},t),{points:this.getPoints(e)})}getIntersectPoint(e,t=!1){let{points:n}=this.getShape(`key`).attributes,r=[+(this.attributes?.x||0),+(this.attributes?.y||0)];return $F(e,r,n,!0,t).point}},_L=class extends gL{constructor(e){super(e)}getPoints(e){let[t,n]=this.getSize(e);return MB(t,n)}},vL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},yL=class e extends hL{constructor(t){super(PI({style:e.defaultStyleProps},t))}parseOuterR(){let{size:e}=this.parsedAttributes;return Math.min(...jI(e))/2}parseInnerR(){let{innerR:e}=this.parsedAttributes;return _S(e)?parseInt(e)/100*this.parseOuterR():e}drawDonutShape(e,t){let{donuts:n}=e;if(!n?.length)return;let r=n.map(e=>K(e)?{value:e}:e),i=OI(this.getGraphicStyle(e),`donut`),a=zI(e.donutPalette);if(!a)return;let o=r.reduce((e,t)=>e+(t.value??0),0),s=this.parseOuterR(),c=this.parseInnerR(),l=0;r.forEach((e,n)=>{let{value:u=0,color:d=a[n%a.length]}=e,f=vL(e,[`value`,`color`]),p=(o===0?1/r.length:u/o)*360;this.upsert(`round${n}`,Wj,Object.assign(Object.assign(Object.assign({},i),{d:CL(s,c,l,l+p),fill:d}),f),t),l+=p})}render(e,t=this){super.render(e,t),this.drawDonutShape(e,t)}};yL.defaultStyleProps={innerR:`50%`,donuts:[],donutPalette:`tableau`};var bL=(e,t,n,r)=>[e+Math.sin(r)*n,t-Math.cos(r)*n],xL=(e,t,n,r)=>r<=0||n<=r?[[`M`,e-n,t],[`A`,n,n,0,1,1,e+n,t],[`A`,n,n,0,1,1,e-n,t],[`Z`]]:[[`M`,e-n,t],[`A`,n,n,0,1,1,e+n,t],[`A`,n,n,0,1,1,e-n,t],[`Z`],[`M`,e+r,t],[`A`,r,r,0,1,0,e-r,t],[`A`,r,r,0,1,0,e+r,t],[`Z`]],SL=(e,t,n,r,i,a)=>{let[o,s]=[i/360*2*Math.PI,a/360*2*Math.PI],c=[bL(e,t,r,o),bL(e,t,n,o),bL(e,t,n,s),bL(e,t,r,s)],l=s-o>Math.PI?1:0;return[[`M`,c[0][0],c[0][1]],[`L`,c[1][0],c[1][1]],[`A`,n,n,0,l,1,c[2][0],c[2][1]],[`L`,c[3][0],c[3][1]],[`A`,r,r,0,l,0,c[0][0],c[0][1]],[`Z`]]},CL=(e=0,t=0,n,r)=>{let[i,a]=[0,0];return Math.abs(n-r)%360<1e-6?xL(i,a,e,t):SL(i,a,e,t,n,r)},wL=class e extends pL{constructor(t){super(PI({style:e.defaultStyleProps},t))}drawKeyShape(e,t){return this.upsert(`key`,Fj,this.getKeyStyle(e),t)}getKeyStyle(e){let t=super.getKeyStyle(e),[n,r]=this.getSize(e);return Object.assign(Object.assign({},t),{rx:n/2,ry:r/2})}getIconStyle(e){let t=super.getIconStyle(e),{rx:n,ry:r}=this.getShape(`key`).attributes,i=Math.min(+n,+r)*2*hI;return t?Object.assign({width:i,height:i},t):!1}getIntersectPoint(e,t=!1){let n=this.getShape(`key`).getBounds();return nI(e,n,t)}};wL.defaultStyleProps={size:[45,35]};var TL=class extends gL{constructor(e){super(e)}getOuterR(e){return e.outerR||Math.min(...this.getSize(e))/2}getPoints(e){return IB(this.getOuterR(e))}getIconStyle(e){let t=super.getIconStyle(e),n=this.getOuterR(e)*hI;return t?Object.assign({width:n,height:n},t):!1}};function EL(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,a=i===void 0?0:i,o=t.r;e.arc(r,a,o,0,Math.PI*2,!1)}function DL(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,a=i===void 0?0:i,o=t.rx,s=t.ry;if(e.ellipse)e.ellipse(r,a,o,s,0,0,Math.PI*2,!1);else{var c=o>s?o:s,l=o>s?1:o/s,u=o>s?s/o:1;e.save(),e.scale(l,u),e.arc(r,a,c,0,Math.PI*2)}}function OL(e,t){var n=t.x1,r=t.y1,i=t.x2,a=t.y2,o=t.markerStart,s=t.markerEnd,c=t.markerStartOffset,l=t.markerEndOffset,u=0,d=0,f=0,p=0,m=0,h,g;o&&Ej(o)&&c&&(h=i-n,g=a-r,m=Math.atan2(g,h),u=Math.cos(m)*(c||0),d=Math.sin(m)*(c||0)),s&&Ej(s)&&l&&(h=n-i,g=r-a,m=Math.atan2(g,h),f=Math.cos(m)*(l||0),p=Math.sin(m)*(l||0)),e.moveTo(n+u,r+d),e.lineTo(i+f,a+p)}function kL(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=t.d,s=o.absolutePath,c=o.segments,l=0,u=0,d=0,f=0,p=0,m,h;if(n&&Ej(n)&&i){var g=n.parentNode.getStartTangent(),_=eb(g,2),v=_[0],y=_[1];m=v[0]-y[0],h=v[1]-y[1],p=Math.atan2(h,m),l=Math.cos(p)*(i||0),u=Math.sin(p)*(i||0)}if(r&&Ej(r)&&a){var b=r.parentNode.getEndTangent(),x=eb(b,2),S=x[0],C=x[1];m=S[0]-C[0],h=S[1]-C[1],p=Math.atan2(h,m),d=Math.cos(p)*(a||0),f=Math.sin(p)*(a||0)}for(var w=0;w<s.length;w++){var T=s[w],E=T[0],D=s[w+1],O=w===0&&(l!==0||u!==0),k=(w===s.length-1||D&&(D[0]===`M`||D[0]===`Z`))&&d!==0&&f!==0,A=O?[l,u]:[0,0],j=eb(A,2),M=j[0],ee=j[1],N=k?[d,f]:[0,0],te=eb(N,2),ne=te[0],re=te[1];switch(E){case`M`:e.moveTo(T[1]+M,T[2]+ee);break;case`L`:e.lineTo(T[1]+ne,T[2]+re);break;case`Q`:e.quadraticCurveTo(T[1],T[2],T[3]+ne,T[4]+re);break;case`C`:e.bezierCurveTo(T[1],T[2],T[3],T[4],T[5]+ne,T[6]+re);break;case`A`:var P=c[w].arcParams,F=P.cx,I=P.cy,ie=P.rx,ae=P.ry,L=P.startAngle,oe=P.endAngle,se=P.xRotation,ce=P.sweepFlag;if(e.ellipse)e.ellipse(F,I,ie,ae,se,L,oe,!!(1-ce));else{var le=ie>ae?ie:ae,ue=ie>ae?1:ie/ae,de=ie>ae?ae/ie:1;e.translate(F,I),e.rotate(se),e.scale(ue,de),e.arc(0,0,le,L,oe,!!(1-ce)),e.scale(1/ue,1/de),e.rotate(-se),e.translate(-F,-I)}k&&e.lineTo(T[6]+d,T[7]+f);break;case`Z`:e.closePath();break}}}function AL(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=t.points.points,s=o.length,c=o[0][0],l=o[0][1],u=o[s-1][0],d=o[s-1][1],f=0,p=0,m=0,h=0,g=0,_,v;n&&Ej(n)&&i&&(_=o[1][0]-o[0][0],v=o[1][1]-o[0][1],g=Math.atan2(v,_),f=Math.cos(g)*(i||0),p=Math.sin(g)*(i||0)),r&&Ej(r)&&a&&(_=o[s-1][0]-o[0][0],v=o[s-1][1]-o[0][1],g=Math.atan2(v,_),m=Math.cos(g)*(a||0),h=Math.sin(g)*(a||0)),e.moveTo(c+(f||m),l+(p||h));for(var y=1;y<s-1;y++){var b=o[y];e.lineTo(b[0],b[1])}e.lineTo(u,d)}function jL(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=t.points.points,s=o.length,c=o[0][0],l=o[0][1],u=o[s-1][0],d=o[s-1][1],f=0,p=0,m=0,h=0,g=0,_,v;n&&Ej(n)&&i&&(_=o[1][0]-o[0][0],v=o[1][1]-o[0][1],g=Math.atan2(v,_),f=Math.cos(g)*(i||0),p=Math.sin(g)*(i||0)),r&&Ej(r)&&a&&(_=o[s-2][0]-o[s-1][0],v=o[s-2][1]-o[s-1][1],g=Math.atan2(v,_),m=Math.cos(g)*(a||0),h=Math.sin(g)*(a||0)),e.moveTo(c+f,l+p);for(var y=1;y<s-1;y++){var b=o[y];e.lineTo(b[0],b[1])}e.lineTo(u+m,d+h)}function ML(e,t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.radius,s=t.width,c=t.height,l=s,u=c;if(!(o&&o.some(function(e){return e!==0})))e.rect(r,a,l,u);else{var d=s>0?1:-1,f=c>0?1:-1,p=d+f===0,m=o.map(function(e){return SS(e,0,Math.min(Math.abs(l)/2,Math.abs(u)/2))}),h=eb(m,4),g=h[0],_=h[1],v=h[2],y=h[3];e.moveTo(d*g+r,a),e.lineTo(l-d*_+r,a),_!==0&&e.arc(l-d*_+r,f*_+a,_,-f*Math.PI/2,d>0?0:Math.PI,p),e.lineTo(l+r,u-f*v+a),v!==0&&e.arc(l-d*v+r,u-f*v+a,v,d>0?0:Math.PI,f>0?Math.PI/2:1.5*Math.PI,p),e.lineTo(d*y+r,u+a),y!==0&&e.arc(d*y+r,u-f*y+a,y,f>0?Math.PI/2:-Math.PI/2,d>0?Math.PI:0,p),e.lineTo(r,f*g+a),g!==0&&e.arc(d*g+r,f*g+a,g,d>0?Math.PI:0,f>0?Math.PI*1.5:Math.PI/2,p)}}var NL=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.name=`canvas-path-generator`,e}return Zy(t,e),G(t,[{key:`init`,value:function(){var e,t=(e={},U(U(U(U(U(U(U(U(U(U(e,q.CIRCLE,EL),q.ELLIPSE,DL),q.RECT,ML),q.LINE,OL),q.POLYLINE,jL),q.POLYGON,AL),q.PATH,kL),q.TEXT,void 0),q.GROUP,void 0),q.IMAGE,void 0),U(U(U(e,q.HTML,void 0),q.MESH,void 0),q.FRAGMENT,void 0));this.context.pathGeneratorFactory=t}},{key:`destroy`,value:function(){delete this.context.pathGeneratorFactory}}])}(Zw),PL=ax(),FL=ax(),IL=ax(),LL=sb(),RL=function(){function e(){var t=this;W(this,e),this.isHit=function(e,n,r,i){var a=t.context.pointInPathPickerFactory[e.nodeName];if(a){var o=mb(LL,r),s=Sx(FL,ux(IL,n[0],n[1],0),o);if(a(e,new lT(s[0],s[1]),i,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(e,n){var r=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),i=t.context.pathGeneratorFactory[e.nodeName];return i&&(r.beginPath(),i(r,e.parsedStyle),r.closePath()),r.isPointInPath(n.x,n.y)}}return G(e,[{key:`apply`,value:function(t,n){var r=this,i=t.renderingService,a=t.renderingContext;this.context=t,this.runtime=n;var o=a.root?.ownerDocument;i.hooks.pick.tapPromise(e.tag,function(){var e=Ww(Hw().mark(function e(t){return Hw().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(`return`,r.pick(o,t));case 1:case`end`:return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),i.hooks.pickSync.tap(e.tag,function(e){return r.pick(o,e)})}},{key:`pick`,value:function(e,t){var n=t.topmost,r=t.position,i=r.x,a=r.y,o=ux(PL,i,a,0),s=e.elementsFromBBox(o[0],o[1],o[0],o[1]),c=[],l=Gw(s),u;try{for(l.s();!(u=l.n()).done;){var d=u.value,f=d.getWorldTransform();if(this.isHit(d,o,f,!1)){var p=xk(d);if(p){var m=p.parsedStyle.clipPath;if(this.isHit(m,o,m.getWorldTransform(),!0)){if(n)return t.picked=[d],t;c.push(d)}}else{if(n)return t.picked=[d],t;c.push(d)}}}}catch(e){l.e(e)}finally{l.f()}return t.picked=c,t}}])}();RL.tag=`CanvasPicker`;function zL(e,t,n){var r=e.parsedStyle,i=r.cx,a=i===void 0?0:i,o=r.cy,s=o===void 0?0:o,c=r.r,l=r.fill,u=r.stroke,d=r.lineWidth,f=d===void 0?1:d,p=r.increasedLineWidthForHitTesting,m=p===void 0?0:p,h=r.pointerEvents,g=h===void 0?`auto`:h,_=(f+m)/2,v=uw(a,s,t.x,t.y),y=jk(g,l,u),b=eb(y,2),x=b[0],S=b[1];return x&&S||n?v<=c+_:x?v<=c:S?v>=c-_&&v<=c+_:!1}function BL(e,t,n,r){return e/(n*n)+t/(r*r)}function VL(e,t,n){var r=e.parsedStyle,i=r.cx,a=i===void 0?0:i,o=r.cy,s=o===void 0?0:o,c=r.rx,l=r.ry,u=r.fill,d=r.stroke,f=r.lineWidth,p=f===void 0?1:f,m=r.increasedLineWidthForHitTesting,h=m===void 0?0:m,g=r.pointerEvents,_=g===void 0?`auto`:g,v=t.x,y=t.y,b=jk(_,u,d),x=eb(b,2),S=x[0],C=x[1],w=(p+h)/2,T=(v-a)*(v-a),E=(y-s)*(y-s);return S&&C||n?BL(T,E,c+w,l+w)<=1:S?BL(T,E,c,l)<=1:C?BL(T,E,c-w,l-w)>=1&&BL(T,E,c+w,l+w)<=1:!1}function HL(e,t,n,r,i,a){return i>=e&&i<=e+n&&a>=t&&a<=t+r}function UL(e,t,n,r,i,a,o){var s=i/2;return HL(e-s,t-s,n,i,a,o)||HL(e+n-s,t-s,i,r,a,o)||HL(e+s,t+r-s,n,i,a,o)||HL(e-s,t+s,i,r,a,o)}function WL(e,t,n,r,i,a,o,s){var c=(Math.atan2(s-t,o-e)+Math.PI*2)%(Math.PI*2),l={x:e+n*Math.cos(c),y:t+n*Math.sin(c)};return uw(l.x,l.y,o,s)<=a/2}function GL(e,t,n,r,i,a,o){var s=Math.min(e,n),c=Math.max(e,n),l=Math.min(t,r),u=Math.max(t,r),d=i/2;return a>=s-d&&a<=c+d&&o>=l-d&&o<=u+d?xw(e,t,n,r,a,o)<=i/2:!1}function KL(e,t,n,r,i){var a=e.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=e[o][0],c=e[o][1],l=e[o+1][0],u=e[o+1][1];if(GL(s,c,l,u,t,n,r))return!0}if(i){var d=e[0],f=e[a-1];if(GL(d[0],d[1],f[0],f[1],t,n,r))return!0}return!1}var qL=1e-6;function JL(e){return Math.abs(e)<qL?0:e<0?-1:1}function YL(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function XL(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(YL(o,s,[t,n]))return!0;JL(o[1]-n)>0!=JL(s[1]-n)>0&&JL(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function ZL(e,t,n){for(var r=!1,i=0;i<e.length;i++){var a=e[i];if(r=XL(a,t,n),r)break}return r}function QL(e,t,n){var r=e.parsedStyle,i=r.x1,a=r.y1,o=r.x2,s=r.y2,c=r.lineWidth,l=c===void 0?1:c,u=r.increasedLineWidthForHitTesting,d=u===void 0?0:u,f=r.pointerEvents,p=f===void 0?`auto`:f,m=r.fill,h=r.stroke,g=jk(p,m,h);return!eb(g,2)[1]&&!n||!l?!1:GL(i,a,o,s,l+d,t.x,t.y)}function $L(e,t,n,r,i){for(var a=!1,o=t/2,s=0;s<e.length;s++){var c=e[s],l=c.currentPoint,u=c.params,d=c.prePoint,f=c.box;if(!(f&&!HL(f.x-o,f.y-o,f.width+t,f.height+t,n,r)))switch(c.command){case`L`:case`Z`:if(a=GL(d[0],d[1],l[0],l[1],t,n,r),a)return!0;break;case`Q`:if(a=Nw(d[0],d[1],u[1],u[2],u[3],u[4],n,r)<=t/2,a)return!0;break;case`C`:if(a=Ew(d[0],d[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i)<=t/2,a)return!0;break;case`A`:c.cubicParams||=jC(d[0],d[1],u[1],u[2],u[3],u[4],u[5],u[6],u[7],void 0);for(var p=c.cubicParams,m=d,h=0;h<p.length;h+=6){var g=Ew(m[0],m[1],p[h],p[h+1],p[h+2],p[h+3],p[h+4],p[h+5],n,r,i);if(m=[p[h+4],p[h+5]],a=g<=t/2,a)return!0}break}}return a}function eR(e,t,n,r,i,a){var o=e.parsedStyle,s=o.lineWidth,c=s===void 0?1:s,l=o.increasedLineWidthForHitTesting,u=l===void 0?0:l,d=o.stroke,f=o.fill,p=o.d,m=o.pointerEvents,h=m===void 0?`auto`:m,g=p.segments,_=p.hasArc,v=p.polylines,y=p.polygons,b=jk(h,y?.length&&f,d),x=eb(b,2),S=x[0],C=x[1],w=eO(e),T=!1;return S||n?(T=_?r(e,t):ZL(y,t.x,t.y)||ZL(v,t.x,t.y),T):((C||n)&&(T=$L(g,c+u,t.x,t.y,w)),T)}function tR(e,t,n){var r=e.parsedStyle,i=r.stroke,a=r.fill,o=r.lineWidth,s=o===void 0?1:o,c=r.increasedLineWidthForHitTesting,l=c===void 0?0:c,u=r.points,d=r.pointerEvents,f=jk(d===void 0?`auto`:d,a,i),p=eb(f,2),m=p[0],h=p[1],g=!1;return(h||n)&&(g=KL(u.points,s+l,t.x,t.y,!0)),!g&&(m||n)&&(g=XL(u.points,t.x,t.y)),g}function nR(e,t,n){var r=e.parsedStyle,i=r.lineWidth,a=i===void 0?1:i,o=r.increasedLineWidthForHitTesting,s=o===void 0?0:o,c=r.points,l=r.pointerEvents,u=l===void 0?`auto`:l,d=r.fill,f=r.stroke,p=jk(u,d,f);return!eb(p,2)[1]&&!n||!a?!1:KL(c.points,a+s,t.x,t.y,!1)}function rR(e,t,n,r,i){var a=e.parsedStyle,o=a.radius,s=a.fill,c=a.stroke,l=a.lineWidth,u=l===void 0?1:l,d=a.increasedLineWidthForHitTesting,f=d===void 0?0:d,p=a.x,m=p===void 0?0:p,h=a.y,g=h===void 0?0:h,_=a.width,v=a.height,y=a.pointerEvents,b=jk(y===void 0?`auto`:y,s,c),x=eb(b,2),S=x[0],C=x[1],w=o&&o.some(function(e){return e!==0}),T=u+f;if(w){var E=!1;return(C||n)&&(E=iR(m,g,_,v,o.map(function(e){return SS(e,0,Math.min(Math.abs(_)/2,Math.abs(v)/2))}),T,t.x,t.y)),!E&&(S||n)&&(E=r(e,t)),E}else{var D=T/2;if(S&&C||n)return HL(m-D,g-D,_+D,v+D,t.x,t.y);if(S)return HL(m,g,_,v,t.x,t.y);if(C)return UL(m,g,_,v,T,t.x,t.y)}return!1}function iR(e,t,n,r,i,a,o,s){var c=eb(i,4),l=c[0],u=c[1],d=c[2],f=c[3];return GL(e+l,t,e+n-u,t,a,o,s)||GL(e+n,t+u,e+n,t+r-d,a,o,s)||GL(e+n-d,t+r,e+f,t+r,a,o,s)||GL(e,t+r-f,e,t+l,a,o,s)||WL(e+n-u,t+u,u,1.5*Math.PI,2*Math.PI,a,o,s)||WL(e+n-d,t+r-d,d,0,.5*Math.PI,a,o,s)||WL(e+f,t+r-f,f,.5*Math.PI,Math.PI,a,o,s)||WL(e+l,t+l,l,Math.PI,1.5*Math.PI,a,o,s)}function aR(e,t,n,r,i,a){var o=e.parsedStyle,s=o.pointerEvents,c=s===void 0?`auto`:s,l=o.x,u=l===void 0?0:l,d=o.y,f=d===void 0?0:d,p=o.width,m=o.height;if(c===`non-transparent-pixel`){var h=i.config.offscreenCanvas,g=a.offscreenCanvasCreator.getOrCreateCanvas(h),_=a.offscreenCanvasCreator.getOrCreateContext(h,{willReadFrequently:!0});return g.width=p,g.height=m,i.defaultStyleRendererFactory[q.IMAGE].render(_,Ly(Ly({},e.parsedStyle),{},{x:0,y:0}),e,void 0,void 0,void 0),_.getImageData(t.x-u,t.y-f,1,1).data.every(function(e){return e!==0})}return!0}function oR(e,t,n,r){var i=e.getGeometryBounds();return t.x>=i.min[0]&&t.y>=i.min[1]&&t.x<=i.max[0]&&t.y<=i.max[1]}var sR=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.name=`canvas-picker`,e}return Zy(t,e),G(t,[{key:`init`,value:function(){var e,t=(e={},U(U(U(U(U(U(U(U(U(U(e,q.CIRCLE,zL),q.ELLIPSE,VL),q.RECT,rR),q.LINE,QL),q.POLYLINE,nR),q.POLYGON,tR),q.PATH,eR),q.TEXT,oR),q.GROUP,null),q.IMAGE,aR),U(U(e,q.HTML,null),q.MESH,null));this.context.pointInPathPickerFactory=t,this.addRenderingPlugin(new RL)}},{key:`destroy`,value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(Zw);function cR(e,t){if(!{}.hasOwnProperty.call(e,t))throw TypeError(`attempted to use private field on non-instance`);return e}var lR=0;function uR(e){return`__private_`+ lR+++`_`+e}var dR=function(){function e(){W(this,e),this.cacheStore=new Map}return G(e,[{key:`onRefAdded`,value:function(e){}},{key:`has`,value:function(e){return this.cacheStore.has(e)}},{key:`put`,value:function(e,t,n){return this.cacheStore.has(e)?!1:(this.cacheStore.set(e,{value:t,counter:new Set([n.entity])}),this.onRefAdded(n),!0)}},{key:`get`,value:function(e,t){var n=this.cacheStore.get(e);return n?(n.counter.has(t.entity)||(n.counter.add(t.entity),this.onRefAdded(t)),n.value):null}},{key:`update`,value:function(e,t,n){var r=this.cacheStore.get(e);return r?(r.value=Ly(Ly({},r.value),t),r.counter.has(n.entity)||(r.counter.add(n.entity),this.onRefAdded(n)),!0):!1}},{key:`release`,value:function(e,t){var n=this.cacheStore.get(e);return n?(n.counter.delete(t.entity),n.counter.size<=0&&this.cacheStore.delete(e),!0):!1}},{key:`releaseRef`,value:function(e){var t=this;Array.from(this.cacheStore.keys()).forEach(function(n){t.release(n,e)})}},{key:`getSize`,value:function(){return this.cacheStore.size}},{key:`clear`,value:function(){this.cacheStore.clear()}}])}(),fR=[],pR=[],mR=function(){function e(){W(this,e)}return G(e,null,[{key:`stop`,value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.api;e.rafId&&=(t.cancelAnimationFrame(e.rafId),null)}},{key:`executeTask`,value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.api;fR.length<=0&&pR.length<=0||(pR.forEach(function(e){return e()}),pR=fR.splice(0,e.TASK_NUM_PER_FRAME),e.rafId=t.requestAnimationFrame(function(){e.executeTask(t)}))}},{key:`sliceImage`,value:function(t,n,r,i){for(var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e.api,s=t.naturalWidth||t.width,c=t.naturalHeight||t.height,l=n-a,u=r-a,d=Math.ceil(s/l),f=Math.ceil(c/u),p={tileSize:[n,r],gridSize:[f,d],tiles:Array(f).fill(null).map(function(){return Array(d).fill(null)})},m=function(e){for(var a=function(a){fR.push(function(){var d=a*l,f=e*u,m=[Math.min(n,s-d),Math.min(r,c-f)],h=m[0],g=m[1],_=o.createCanvas();_.width=n,_.height=r,_.getContext(`2d`).drawImage(t,d,f,h,g,0,0,h,g),p.tiles[e][a]={x:d,y:f,tileX:a,tileY:e,data:_},i()})},f=0;f<d;f++)a(f)},h=0;h<f;h++)m(h);return e.stop(),e.executeTask(),p}}])}();mR.TASK_NUM_PER_FRAME=10;var hR=new dR;hR.onRefAdded=function(e){var t=this;e.addEventListener(LA.DESTROY,function(){t.releaseRef(e)},{once:!0})};var gR=function(){function e(t,n){W(this,e),this.gradientCache={},this.patternCache={},this.context=t,this.runtime=n}return G(e,[{key:`getImageSync`,value:function(e,t,n){var r=_S(e)?e:e.src;if(hR.has(r)){var i=hR.get(r,t);if(i.img.complete)return n?.(i),i}return this.getOrCreateImage(e,t).then(function(e){n?.(e)}).catch(function(e){console.error(e)}),null}},{key:`getOrCreateImage`,value:function(e,t){var n=this,r=_S(e)?e:e.src;if(!_S(e)&&!hR.has(r)){var i={img:e,size:[e.naturalWidth||e.width,e.naturalHeight||e.height],tileSize:_R(e)};hR.put(r,i,t)}if(hR.has(r)){var a=hR.get(r,t);return a.img.complete?Promise.resolve(a):new Promise(function(e,t){a.img.addEventListener(`load`,function(){a.size=[a.img.naturalWidth||a.img.width,a.img.naturalHeight||a.img.height],a.tileSize=_R(a.img),e(a)}),a.img.addEventListener(`error`,function(e){t(e)})})}return new Promise(function(e,i){var a=n.context.config.createImage();if(a){var o={img:a,size:[0,0],tileSize:_R(a)};hR.put(r,o,t),a.onload=function(){o.size=[a.naturalWidth||a.width,a.naturalHeight||a.height],o.tileSize=_R(o.img),e(o)},a.onerror=function(e){i(e)},a.crossOrigin=`Anonymous`,a.src=r}})}},{key:`createDownSampledImage`,value:function(){var e=Ww(Hw().mark(function e(t,n){var r,i,a,o,s,c,l,u,d,f,p,m,h,g;return Hw().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.getOrCreateImage(t,n);case 1:if(r=e.sent,r.downSamplingRate===void 0){e.next=2;break}return e.abrupt(`return`,r);case 2:if(i=this.context.config.enableLargeImageOptimization,a=typeof i==`boolean`?{}:i,o=a.maxDownSampledImageSize,s=o===void 0?2048:o,c=a.downSamplingRateThreshold,l=c===void 0?.5:c,u=this.runtime.globalThis.createImageBitmap,d=eb(r.size,2),f=d[0],p=d[1],m=r.img,h=Math.min((s+s)/(f+p),Math.max(.01,Math.min(l,.5))),g=Ly(Ly({},r),{},{downSamplingRate:h}),hR.update(r.img.src,g,n),!u){e.next=7;break}return e.prev=3,e.next=4,u(r.img,{resizeWidth:f*h,resizeHeight:p*h});case 4:m=e.sent,e.next=6;break;case 5:e.prev=5,e.catch(3),h=1;case 6:e.next=8;break;case 7:h=1;case 8:return g=Ly(Ly({},this.getImageSync(t,n)),{},{downSampled:m,downSamplingRate:h}),hR.update(r.img.src,g,n),e.abrupt(`return`,g);case 9:case`end`:return e.stop()}},e,this,[[3,5]])}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:`createImageTiles`,value:function(){var e=Ww(Hw().mark(function e(t,n,r,i){var a,o,s,c,l;return Hw().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.getOrCreateImage(t,i);case 1:return a=e.sent,o=i.ownerDocument.defaultView,s=o.requestAnimationFrame,c=o.cancelAnimationFrame,mR.api={requestAnimationFrame:s,cancelAnimationFrame:c,createCanvas:function(){return MA.createCanvas()}},l=Ly(Ly({},a),mR.sliceImage(a.img,a.tileSize[0],a.tileSize[0],r)),hR.update(a.img.src,l,i),e.abrupt(`return`,l);case 2:case`end`:return e.stop()}},e,this)}));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:`releaseImage`,value:function(e,t){hR.release(_S(e)?e:e.src,t)}},{key:`releaseImageRef`,value:function(e){hR.releaseRef(e)}},{key:`getOrCreatePatternSync`,value:function(e,t,n,r,i,a,o){var s=this.generatePatternKey(t);if(s&&this.patternCache[s])return this.patternCache[s];var c=t.image,l=t.repetition,u=t.transform,d,f=!1;_S(c)?d=this.getImageSync(c,e,o)?.img:r?(d=r,f=!0):d=c;var p=d&&n.createPattern(d,l);if(p){var m=u?uA(kO(u),new jj({})):fb(sb());f&&yb(m,m,[1/i,1/i,1]),p.setTransform({a:m[0],b:m[1],c:m[4],d:m[5],e:m[12]+a[0],f:m[13]+a[1]})}return s&&p&&(this.patternCache[s]=p),p}},{key:`getOrCreateGradient`,value:function(e,t){var n=this.generateGradientKey(e),r=e.type,i=e.steps,a=e.min,o=e.width,s=e.height,c=e.angle,l=e.cx,u=e.cy,d=e.size;if(this.gradientCache[n])return this.gradientCache[n];var f=null;if(r===ZE.LinearGradient){var p=_D(a,o,s,c),m=p.x1,h=p.y1,g=p.x2,_=p.y2;f=t.createLinearGradient(m,h,g,_)}else if(r===ZE.RadialGradient){var v=vD(a,o,s,l,u,d),y=v.x,b=v.y,x=v.r;f=t.createRadialGradient(y,b,0,y,b,x)}return f&&(i.forEach(function(e){var t=e.offset,n=e.color;if(t.unit===Y.kPercentage){var r;(r=f)==null||r.addColorStop(t.value/100,n.toString())}}),this.gradientCache[n]=f),this.gradientCache[n]}},{key:`generateGradientKey`,value:function(e){var t=e.type,n=e.min,r=e.width,i=e.height,a=e.steps,o=e.angle,s=e.cx,c=e.cy,l=e.size;return`gradient-${t}-${o?.toString()||0}-${s?.toString()||0}-${c?.toString()||0}-${l?.toString()||0}-${n[0]}-${n[1]}-${r}-${i}-${a.map(function(e){var t=e.offset,n=e.color;return`${t}${n}`}).join(`-`)}`}},{key:`generatePatternKey`,value:function(e){var t=e.image,n=e.repetition;if(_S(t))return`pattern-${t}-${n}`;if(t.nodeName===`rect`)return`pattern-${t.entity}-${n}`}}])}();gR.isSupportTile=!!MA.createCanvas();function _R(e){if(!e.complete)return[0,0];var t=e.naturalWidth||e.width,n=e.naturalHeight||e.height,r=256;return[256,512].forEach(function(e){var i=Math.ceil(n/e),a=Math.ceil(t/e);i*a<1e3&&(r=e)}),[r,r]}var vR=function(){function e(){W(this,e)}return G(e,[{key:`apply`,value:function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,a=r.root.ownerDocument.defaultView,o=function(e,t,n){var r=e.parsedStyle,i=r.width,a=r.height;i&&!a?e.setAttribute(`height`,n/t*i):!i&&a&&e.setAttribute(`width`,t/n*a)},s=function(e){var t=e.target,r=t.nodeName,a=t.attributes;if(r===q.IMAGE){var s=a.src,c=a.keepAspectRatio;i.getImageSync(s,t,function(e){var r=e.img,i=r.width,a=r.height;c&&o(t,i,a),t.renderable.dirty=!0,n.dirtify()})}},c=function(e){var t=e.target,r=e.attrName,a=e.prevValue,s=e.newValue;t.nodeName!==q.IMAGE||r!==`src`||(a!==s&&i.releaseImage(a,t),_S(s)&&i.getOrCreateImage(s,t).then(function(e){var r=e.img,i=r.width,a=r.height;t.attributes.keepAspectRatio&&o(t,i,a),t.renderable.dirty=!0,n.dirtify()}).catch(function(){}))};n.hooks.init.tap(e.tag,function(){a.addEventListener(LA.MOUNTED,s),a.addEventListener(LA.ATTR_MODIFIED,c)}),n.hooks.destroy.tap(e.tag,function(){a.removeEventListener(LA.MOUNTED,s),a.removeEventListener(LA.ATTR_MODIFIED,c)})}}])}();vR.tag=`LoadImage`;var yR=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.name=`image-loader`,e}return Zy(t,e),G(t,[{key:`init`,value:function(e){this.context.imagePool=new gR(this.context,e),this.addRenderingPlugin(new vR)}},{key:`destroy`,value:function(){this.removeAllRenderingPlugins()}}])}(Zw),bR=uR(`renderState`),xR=function(){function e(t){W(this,e),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,bR,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=sb(),this.dprMatrix=sb(),this.tmpMat4=sb(),this.vec3a=ax(),this.vec3b=ax(),this.vec3c=ax(),this.vec3d=ax(),this.canvasRendererPluginOptions=t}return G(e,[{key:`apply`,value:function(t,n){var r=this;this.context=t;var i=this.context,a=i.config,o=i.camera,s=i.renderingService,c=i.renderingContext,l=i.rBushRoot,u=i.pathGeneratorFactory,d=a.renderer.getConfig().enableRenderingOptimization;a.renderer.getConfig().enableDirtyCheck=!1,a.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=l,this.pathGeneratorFactory=u;var f=t.contextService,p=c.root.ownerDocument.defaultView,m=function(e){var t=e.target.rBushNode;t!=null&&t.aabb&&r.removedRBushNodeAABBs.push(t.aabb)},h=function(e){var t=e.target.rBushNode;t.aabb&&r.removedRBushNodeAABBs.push(t.aabb)};s.hooks.init.tap(e.tag,function(){p.addEventListener(LA.UNMOUNTED,m),p.addEventListener(LA.CULLED,h);var e=f.getDPR(),t=a.width,n=a.height,i=f.getContext();r.clearRect(i,0,0,t*e,n*e,a.background)}),s.hooks.destroy.tap(e.tag,function(){p.removeEventListener(LA.UNMOUNTED,m),p.removeEventListener(LA.CULLED,h),r.renderQueue=[],r.removedRBushNodeAABBs=[],cR(r,bR)[bR]={restoreStack:[],prevObject:null,currentContext:null}});var g=function(){var e,t=f.getContext(),n=f.getDPR(),i=a.width,o=a.height,c=r.canvasRendererPluginOptions,l=c.dirtyObjectNumThreshold,u=c.dirtyObjectRatioThreshold,d=s.getStats(),m=d.total,h=d.rendered,g=h/m;r.clearFullScreen=r.clearFullScreenLastFrame||!((e=p.context.renderingPlugins[1])!=null&&e.isFirstTimeRenderingFinished)||s.disableDirtyRectangleRendering()||h>l&&g>u,t&&(typeof t.resetTransform==`function`?t.resetTransform():t.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(t,0,0,i*n,o*n,a.background))},_=function(e,t){for(var i=[e];i.length>0;){var a,o=i.pop();o.isVisible()&&!o.isCulled()&&(d?r.renderDisplayObjectOptimized(o,t,r.context,cR(r,bR)[bR],n):r.renderDisplayObject(o,t,r.context,cR(r,bR)[bR],n));for(var s=((a=o.sortable)==null||(a=a.sorted)==null?void 0:a.length)>0?o.sortable.sorted:o.childNodes,c=s.length-1;c>=0;c--)i.push(s[c])}};s.hooks.endFrame.tap(e.tag,function(){if(g(),c.root.childNodes.length===0){r.clearFullScreenLastFrame=!0;return}d=a.renderer.getConfig().enableRenderingOptimization,cR(r,bR)[bR]={restoreStack:[],prevObject:null,currentContext:cR(r,bR)[bR].currentContext},cR(r,bR)[bR].currentContext.clear(),r.clearFullScreenLastFrame=!1;var e=f.getContext(),t=f.getDPR();if(Tb(r.dprMatrix,[t,t,1]),_b(r.vpMatrix,r.dprMatrix,o.getOrthoMatrix()),r.clearFullScreen)d?(e.save(),_(c.root,e),e.restore()):_(c.root,e),r.removedRBushNodeAABBs=[];else{var i=r.safeMergeAABB.apply(r,[r.mergeDirtyAABBs(r.renderQueue)].concat(Wy(r.removedRBushNodeAABBs.map(function(e){var t=e.minX,n=e.minY,r=e.maxX,i=e.maxY,a=new aT;return a.setMinMax([t,n,0],[r,i,0]),a}))));if(r.removedRBushNodeAABBs=[],aT.isEmpty(i)){r.renderQueue=[];return}var s=r.convertAABB2Rect(i),l=s.x,u=s.y,m=s.width,h=s.height,v=Sx(r.vec3a,[l,u,0],r.vpMatrix),y=Sx(r.vec3b,[l+m,u,0],r.vpMatrix),b=Sx(r.vec3c,[l,u+h,0],r.vpMatrix),x=Sx(r.vec3d,[l+m,u+h,0],r.vpMatrix),S=Math.min(v[0],y[0],x[0],b[0]),C=Math.min(v[1],y[1],x[1],b[1]),w=Math.max(v[0],y[0],x[0],b[0]),T=Math.max(v[1],y[1],x[1],b[1]),E=Math.floor(S),D=Math.floor(C),O=Math.ceil(w-S),k=Math.ceil(T-C);e.save(),r.clearRect(e,E,D,O,k,a.background),e.beginPath(),e.rect(E,D,O,k),e.clip(),e.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]),a.renderer.getConfig().enableDirtyRectangleRenderingDebug&&p.dispatchEvent(new DA(aM.DIRTY_RECTANGLE,{dirtyRect:{x:E,y:D,width:O,height:k}})),r.searchDirtyObjects(i).sort(function(e,t){return e.sortable.renderOrder-t.sortable.renderOrder}).forEach(function(t){t&&t.isVisible()&&!t.isCulled()&&r.renderDisplayObject(t,e,r.context,cR(r,bR)[bR],n)}),e.restore(),r.renderQueue.forEach(function(e){r.saveDirtyAABB(e)}),r.renderQueue=[]}cR(r,bR)[bR].restoreStack.forEach(function(){e.restore()}),cR(r,bR)[bR].restoreStack=[]}),s.hooks.render.tap(e.tag,function(e){r.clearFullScreen||r.renderQueue.push(e)})}},{key:`clearRect`,value:function(e,t,n,r,i,a){e.clearRect(t,n,r,i),a&&(e.fillStyle=a,e.fillRect(t,n,r,i))}},{key:`renderDisplayObjectOptimized`,value:function(e,t,n,r,i){var a=e.nodeName,o=!1,s=!1,c=this.context.styleRendererFactory[a],l=this.pathGeneratorFactory[a],u=e.parsedStyle.clipPath;if(u){o=!r.prevObject||!tx(u.getWorldTransform(),r.prevObject.getWorldTransform()),o&&(this.applyWorldTransform(t,u),r.prevObject=null);var d=this.pathGeneratorFactory[u.nodeName];d&&(t.save(),s=!0,t.beginPath(),d(t,u.parsedStyle),t.closePath(),t.clip())}if(c){o=!r.prevObject||!tx(e.getWorldTransform(),r.prevObject.getWorldTransform()),o&&this.applyWorldTransform(t,e);var f=!r.prevObject;if(!f){var p=r.prevObject.nodeName;f=a===q.TEXT?p!==q.TEXT:a===q.IMAGE?p!==q.IMAGE:p===q.TEXT||p===q.IMAGE}c.applyStyleToContext(t,e,f,r),r.prevObject=e}l&&(t.beginPath(),l(t,e.parsedStyle),a!==q.LINE&&a!==q.PATH&&a!==q.POLYLINE&&t.closePath()),c&&c.drawToContext(t,e,cR(this,bR)[bR],this,i),s&&t.restore(),e.dirty(!1)}},{key:`renderDisplayObject`,value:function(e,t,n,r,i){var a=e.nodeName,o=r.restoreStack[r.restoreStack.length-1];o&&!(e.compareDocumentPosition(o)&kA.DOCUMENT_POSITION_CONTAINS)&&(t.restore(),r.restoreStack.pop());var s=this.context.styleRendererFactory[a],c=this.pathGeneratorFactory[a],l=e.parsedStyle.clipPath;if(l){this.applyWorldTransform(t,l);var u=this.pathGeneratorFactory[l.nodeName];u&&(t.save(),r.restoreStack.push(e),t.beginPath(),u(t,l.parsedStyle),t.closePath(),t.clip())}s&&(this.applyWorldTransform(t,e),t.save(),this.applyAttributesToContext(t,e)),c&&(t.beginPath(),c(t,e.parsedStyle),a!==q.LINE&&a!==q.PATH&&a!==q.POLYLINE&&t.closePath()),s&&(s.render(t,e.parsedStyle,e,n,this,i),t.restore()),e.dirty(!1)}},{key:`applyAttributesToContext`,value:function(e,t){var n=t.parsedStyle,r=n.stroke,i=n.fill,a=n.opacity,o=n.lineDash,s=n.lineDashOffset;o&&e.setLineDash(o),iS(s)||(e.lineDashOffset=s),iS(a)||(e.globalAlpha*=a),!iS(r)&&!Array.isArray(r)&&!r.isNone&&(e.strokeStyle=t.attributes.stroke),!iS(i)&&!Array.isArray(i)&&!i.isNone&&(e.fillStyle=t.attributes.fill)}},{key:`convertAABB2Rect`,value:function(e){var t=e.getMin(),n=e.getMax(),r=Math.floor(t[0]),i=Math.floor(t[1]),a=Math.ceil(n[0]),o=Math.ceil(n[1]),s=a-r,c=o-i;return{x:r,y:i,width:s,height:c}}},{key:`mergeDirtyAABBs`,value:function(e){var t=new aT;return e.forEach(function(e){var n=e.getRenderBounds();t.add(n);var r=e.renderable.dirtyRenderBounds;r&&t.add(r)}),t}},{key:`searchDirtyObjects`,value:function(e){var t=e.getMin(),n=eb(t,2),r=n[0],i=n[1],a=e.getMax(),o=eb(a,2),s=o[0],c=o[1];return this.rBush.search({minX:r,minY:i,maxX:s,maxY:c}).map(function(e){return e.displayObject})}},{key:`saveDirtyAABB`,value:function(e){var t=e.renderable;t.dirtyRenderBounds||=new aT;var n=e.getRenderBounds();n&&t.dirtyRenderBounds.update(n.center,n.halfExtents)}},{key:`applyWorldTransform`,value:function(e,t,n){n?(lb(this.tmpMat4,t.getLocalTransform()),_b(this.tmpMat4,n,this.tmpMat4),_b(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(lb(this.tmpMat4,t.getWorldTransform()),_b(this.tmpMat4,this.vpMatrix,this.tmpMat4)),e.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:`safeMergeAABB`,value:function(){var e=new aT;return[...arguments].forEach(function(t){e.add(t)}),e}}])}();xR.tag=`CanvasRenderer`;function SR(e,t,n,r,i,a,o){var s,c;if(e.image.nodeName===`rect`){var l=e.image.parsedStyle,u=l.width,d=l.height;c=r.contextService.getDPR();var f=r.config.offscreenCanvas;s=a.offscreenCanvasCreator.getOrCreateCanvas(f),s.width=u*c,s.height=d*c;var p=a.offscreenCanvasCreator.getOrCreateContext(f),m={restoreStack:[],prevObject:null,currentContext:new Map};e.image.forEach(function(e){i.renderDisplayObject(e,p,r,m,a)}),m.restoreStack.forEach(function(){p.restore()})}return o.getOrCreatePatternSync(t,e,n,s,c,t.getGeometryBounds().min,function(){t.dirty(),r.renderingService.dirtify()})}function CR(e,t,n,r){var i;if(e.type===ZE.LinearGradient||e.type===ZE.RadialGradient){var a=t.getGeometryBounds(),o=a&&a.halfExtents[0]*2||1,s=a&&a.halfExtents[1]*2||1,c=a&&a.min||[0,0];i=r.getOrCreateGradient(Ly(Ly({type:e.type},e.value),{},{min:c,width:o,height:s}),n)}return i}var wR=[`shadowBlur`,`shadowOffsetX`,`shadowOffsetY`],TR=[`lineCap`,`lineJoin`,`miterLimit`],ER={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:`#000`,filter:`none`,globalCompositeOperation:`source-over`,strokeStyle:`#000`,strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:`butt`,lineJoin:`miter`,miterLimit:10,fillStyle:`#000`,fillOpacity:1},DR={};function OR(e,t,n,r){var i=r.has(t)?r.get(t):ER[t];return i!==n&&(t===`lineDash`?e.setLineDash(n):e[t]=n,r.set(t,n)),i}var kR=function(e){function t(){return W(this,t),Yy(this,t,arguments)}return Zy(t,e),G(t,[{key:`render`,value:function(e,t,n,r,i,a){var o=t.fill,s=t.fillRule,c=t.opacity,l=c===void 0?1:c,u=t.fillOpacity,d=u===void 0?1:u,f=t.stroke,p=t.strokeOpacity,m=p===void 0?1:p,h=t.lineWidth,g=h===void 0?1:h,_=t.lineCap,v=t.lineJoin,y=t.shadowType,b=t.shadowColor,x=t.shadowBlur,S=t.filter,C=t.miterLimit,w=o&&!o.isNone,T=f&&!f.isNone&&g>0,E=o?.alpha===0,D=!!(S&&S.length),O=!iS(b)&&x>0,k=n.nodeName,A=y===`inner`,j=T&&O&&(k===q.PATH||k===q.LINE||k===q.POLYLINE||E||A);w&&(e.globalAlpha=l*d,j||AR(n,e,O),jR(e,n,o,s,r,i,a,this.imagePool),j||this.clearShadowAndFilter(e,D,O)),T&&(e.globalAlpha=l*m,e.lineWidth=g,iS(C)||(e.miterLimit=C),iS(_)||(e.lineCap=_),iS(v)||(e.lineJoin=v),j&&(A&&(e.globalCompositeOperation=`source-atop`),AR(n,e,!0),A&&(MR(e,n,f,r,i,a,this.imagePool),e.globalCompositeOperation=ER.globalCompositeOperation,this.clearShadowAndFilter(e,D,!0))),MR(e,n,f,r,i,a,this.imagePool))}},{key:`clearShadowAndFilter`,value:function(e,t,n){if(n&&(e.shadowColor=`transparent`,e.shadowBlur=0),t){var r=e.filter;!iS(r)&&r.indexOf(`drop-shadow`)>-1&&(e.filter=r.replace(/drop-shadow\([^)]*\)/,``).trim()||`none`)}}}])}(function(){function e(t){W(this,e),this.imagePool=t}return G(e,[{key:`applyAttributesToContext`,value:function(e,t){}},{key:`render`,value:function(e,t,n,r,i,a){}},{key:`applyCommonStyleToContext`,value:function(e,t,n,r){var i=n?DR:r.prevObject.parsedStyle,a=t.parsedStyle;(n||a.opacity!==i.opacity)&&OR(e,`globalAlpha`,iS(a.opacity)?ER.globalAlpha:a.opacity,r.currentContext),(n||a.blend!==i.blend)&&OR(e,`globalCompositeOperation`,iS(a.blend)?ER.globalCompositeOperation:a.blend,r.currentContext)}},{key:`applyStrokeFillStyleToContext`,value:function(e,t,n,r){var i=n?DR:r.prevObject.parsedStyle,a=t.parsedStyle,o=a.lineWidth,s=o===void 0?ER.lineWidth:o,c=a.fill&&!a.fill.isNone;if(a.stroke&&!a.stroke.isNone&&s>0){if(n||t.attributes.stroke!==r.prevObject.attributes.stroke){var l=!iS(a.stroke)&&!Array.isArray(a.stroke)&&!a.stroke.isNone?t.attributes.stroke:ER.strokeStyle;OR(e,`strokeStyle`,l,r.currentContext)}(n||a.lineWidth!==i.lineWidth)&&OR(e,`lineWidth`,iS(a.lineWidth)?ER.lineWidth:a.lineWidth,r.currentContext),(n||a.lineDash!==i.lineDash)&&OR(e,`lineDash`,a.lineDash||ER.lineDash,r.currentContext),(n||a.lineDashOffset!==i.lineDashOffset)&&OR(e,`lineDashOffset`,iS(a.lineDashOffset)?ER.lineDashOffset:a.lineDashOffset,r.currentContext);for(var u=0;u<TR.length;u++){var d=TR[u];(n||a[d]!==i[d])&&OR(e,d,iS(a[d])?ER[d]:a[d],r.currentContext)}}if(c&&(n||t.attributes.fill!==r.prevObject.attributes.fill)){var f=!iS(a.fill)&&!Array.isArray(a.fill)&&!a.fill.isNone?t.attributes.fill:ER.fillStyle;OR(e,`fillStyle`,f,r.currentContext)}}},{key:`applyStyleToContext`,value:function(e,t,n,r){var i=t.nodeName;this.applyCommonStyleToContext(e,t,n,r),i===q.IMAGE||this.applyStrokeFillStyleToContext(e,t,n,r)}},{key:`applyShadowAndFilterStyleToContext`,value:function(e,t,n,r){var i=t.parsedStyle;if(n){OR(e,`shadowColor`,i.shadowColor.toString(),r.currentContext);for(var a=0;a<wR.length;a++){var o=wR[a];OR(e,o,i[o]||ER[o],r.currentContext)}}i.filter&&i.filter.length&&OR(e,`filter`,t.attributes.filter,r.currentContext)}},{key:`clearShadowAndFilterStyleForContext`,value:function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(t){OR(e,`shadowColor`,ER.shadowColor,r.currentContext);for(var a=0;a<wR.length;a++){var o=wR[a];OR(e,o,ER[o],r.currentContext)}}if(n)if(t&&i){var s=e.filter;!iS(s)&&s.indexOf(`drop-shadow`)>-1&&OR(e,`filter`,s.replace(/drop-shadow\([^)]*\)/,``).trim()||ER.filter,r.currentContext)}else OR(e,`filter`,ER.filter,r.currentContext)}},{key:`fillToContext`,value:function(e,t,n,r,i){var a=this,o=t.parsedStyle,s=o.fill,c=o.fillRule,l=null;if(Array.isArray(s)&&s.length>0)s.forEach(function(r){var i=OR(e,`fillStyle`,CR(r,t,e,a.imagePool),n.currentContext);l??=i,c?e.fill(c):e.fill()});else{if(AD(s)){var u=SR(s,t,e,t.ownerDocument.defaultView.context,r,i,this.imagePool);u&&(e.fillStyle=u,l=!0)}c?e.fill(c):e.fill()}l!==null&&OR(e,`fillStyle`,l,n.currentContext)}},{key:`strokeToContext`,value:function(e,t,n,r,i){var a=this,o=t.parsedStyle.stroke,s=null;if(Array.isArray(o)&&o.length>0)o.forEach(function(r){var i=OR(e,`strokeStyle`,CR(r,t,e,a.imagePool),n.currentContext);s??=i,e.stroke()});else{if(AD(o)){var c=SR(o,t,e,t.ownerDocument.defaultView.context,r,i,this.imagePool);if(c){var l=OR(e,`strokeStyle`,c,n.currentContext);s??=l}}e.stroke()}s!==null&&OR(e,`strokeStyle`,s,n.currentContext)}},{key:`drawToContext`,value:function(e,t,n,r,i){var a=t.nodeName,o=t.parsedStyle,s=o.opacity,c=s===void 0?ER.globalAlpha:s,l=o.fillOpacity,u=l===void 0?ER.fillOpacity:l,d=o.strokeOpacity,f=d===void 0?ER.strokeOpacity:d,p=o.lineWidth,m=p===void 0?ER.lineWidth:p,h=o.fill&&!o.fill.isNone,g=o.stroke&&!o.stroke.isNone&&m>0;if(!(!h&&!g)){var _=!iS(o.shadowColor)&&o.shadowBlur>0,v=o.shadowType===`inner`,y=o.fill?.alpha===0,b=!!(o.filter&&o.filter.length),x=_&&g&&(a===q.PATH||a===q.LINE||a===q.POLYLINE||y||v),S=null;if(h){x||this.applyShadowAndFilterStyleToContext(e,t,_,n);var C=c*u;S=OR(e,`globalAlpha`,C,n.currentContext),this.fillToContext(e,t,n,r,i),x||this.clearShadowAndFilterStyleForContext(e,_,b,n)}if(g){var w=!1,T=c*f,E=OR(e,`globalAlpha`,T,n.currentContext);if(S=h?S:E,x&&(this.applyShadowAndFilterStyleToContext(e,t,_,n),w=!0,v)){var D=e.globalCompositeOperation;e.globalCompositeOperation=`source-atop`,this.strokeToContext(e,t,n,r,i),e.globalCompositeOperation=D,this.clearShadowAndFilterStyleForContext(e,_,b,n,!0)}this.strokeToContext(e,t,n,r,i),w&&this.clearShadowAndFilterStyleForContext(e,_,b,n)}S!==null&&OR(e,`globalAlpha`,S,n.currentContext)}}}])}());function AR(e,t,n){var r=e.parsedStyle,i=r.filter,a=r.shadowColor,o=r.shadowBlur,s=r.shadowOffsetX,c=r.shadowOffsetY;i&&i.length&&(t.filter=e.style.filter),n&&(t.shadowColor=a.toString(),t.shadowBlur=o||0,t.shadowOffsetX=s||0,t.shadowOffsetY=c||0)}function jR(e,t,n,r,i,a,o,s){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(n)?n.forEach(function(n){e.fillStyle=CR(n,t,e,s),c||(r?e.fill(r):e.fill())}):(AD(n)&&(e.fillStyle=SR(n,t,e,i,a,o,s)),c||(r?e.fill(r):e.fill()))}function MR(e,t,n,r,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(n)?n.forEach(function(n){e.strokeStyle=CR(n,t,e,o),s||e.stroke()}):(AD(n)&&(e.strokeStyle=SR(n,t,e,r,i,a,o)),s||e.stroke())}function NR(e,t){var n=eb(e,4),r=n[0],i=n[1],a=n[2],o=n[3],s=eb(t,4),c=s[0],l=s[1],u=s[2],d=s[3],f=Math.max(r,c),p=Math.max(i,l),m=Math.min(r+a,c+u),h=Math.min(i+o,l+d);return m<=f||h<=p?null:[f,p,m-f,h-p]}function PR(e,t){var n=Sx(ax(),[e[0],e[1],0],t),r=Sx(ax(),[e[0]+e[2],e[1],0],t),i=Sx(ax(),[e[0],e[1]+e[3],0],t),a=Sx(ax(),[e[0]+e[2],e[1]+e[3],0],t);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0])-Math.min(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])-Math.min(n[1],r[1],i[1],a[1])]}var FR=function(e){function t(){return W(this,t),Yy(this,t,arguments)}return Zy(t,e),G(t,[{key:`renderDownSampled`,value:function(e,t,n,r){var i=r.src,a=r.imageCache;if(!a.downSampled){this.imagePool.createDownSampledImage(i,n).then(function(){n.ownerDocument&&(n.dirty(),n.ownerDocument.defaultView.context.renderingService.dirtify())}).catch(function(e){console.error(e)});return}e.drawImage(a.downSampled,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3]))}},{key:`renderTile`,value:function(e,t,n,r){var i=r.src,a=r.imageCache,o=r.imageRect,s=r.drawRect,c=a.size,l=e.getTransform(),u=l.a,d=l.b,f=l.c,p=l.d,m=l.e,h=l.f;if(e.resetTransform(),!(a!=null&&a.gridSize)){this.imagePool.createImageTiles(i,[],function(){n.ownerDocument&&(n.dirty(),n.ownerDocument.defaultView.context.renderingService.dirtify())},n).catch(function(e){console.error(e)});return}for(var g=[c[0]/o[2],c[1]/o[3]],_=[a.tileSize[0]/g[0],a.tileSize[1]/g[1]],v=[Math.floor((s[0]-o[0])/_[0]),Math.ceil((s[0]+s[2]-o[0])/_[0])],y=v[0],b=v[1],x=[Math.floor((s[1]-o[1])/_[1]),Math.ceil((s[1]+s[3]-o[1])/_[1])],S=x[0],C=x[1],w=S;w<=C;w++)for(var T=y;T<=b;T++){var E=a.tiles[w][T];if(E){var D=[Math.floor(o[0]+E.tileX*_[0]),Math.floor(o[1]+E.tileY*_[1]),Math.ceil(_[0]),Math.ceil(_[1])];e.drawImage(E.data,D[0],D[1],D[2],D[3])}}e.setTransform(u,d,f,p,m,h)}},{key:`render`,value:function(e,n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o,c=n.width,l=n.height,u=n.src,d=n.shadowColor,f=n.shadowBlur,p=this.imagePool.getImageSync(u,r),m=p?.img,h=c,g=l;if(m){h||=m.width,g||=m.height;var _=!iS(d)&&f>0;AR(r,e,_);try{var v=r.ownerDocument.defaultView.getContextService().getDomElement(),y=v.width,b=v.height,x=e.getTransform(),S=x.a,C=x.b,w=x.c,T=x.d,E=x.e,D=x.f,O=ub(S,w,0,0,C,T,0,0,0,0,1,0,E,D,0,1),k=PR([a,s,h,g],O),A=NR([0,0,y,b],k);if(!A)return;if(!r.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){t.renderFull(e,n,r,{image:m,drawRect:[a,s,h,g]});return}if(k[2]/p.size[0]<(p.downSamplingRate||.5)){this.renderDownSampled(e,n,r,{src:u,imageCache:p,drawRect:[a,s,h,g]});return}if(!gR.isSupportTile){t.renderFull(e,n,r,{image:m,drawRect:[a,s,h,g]});return}this.renderTile(e,n,r,{src:u,imageCache:p,imageRect:k,drawRect:A})}catch{}}}},{key:`drawToContext`,value:function(e,t,n,r,i){this.render(e,t.parsedStyle,t)}}],[{key:`renderFull`,value:function(e,t,n,r){e.drawImage(r.image,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3]))}}])}(kR),IR=function(e){function t(){return W(this,t),Yy(this,t,arguments)}return Zy(t,e),G(t,[{key:`render`,value:function(e,t,n,r,i,a){n.getBounds();var o=t.lineWidth,s=o===void 0?1:o,c=t.textAlign,l=c===void 0?`start`:c,u=t.textBaseline,d=u===void 0?`alphabetic`:u,f=t.lineJoin,p=f===void 0?`miter`:f,m=t.miterLimit,h=m===void 0?10:m,g=t.letterSpacing,_=g===void 0?0:g,v=t.stroke,y=t.fill,b=t.fillRule,x=t.fillOpacity,S=x===void 0?1:x,C=t.strokeOpacity,w=C===void 0?1:C,T=t.opacity,E=T===void 0?1:T,D=t.metrics,O=t.x,k=O===void 0?0:O,A=t.y,j=A===void 0?0:A,M=t.dx,ee=t.dy,N=t.shadowColor,te=t.shadowBlur,ne=D.font,re=D.lines,P=D.height,F=D.lineHeight,I=D.lineMetrics;e.font=ne,e.lineWidth=s,e.textAlign=l===`middle`?`center`:l;var ie=d;ie===`alphabetic`&&(ie=`bottom`),e.lineJoin=p,iS(h)||(e.miterLimit=h);var ae=j;d===`middle`?ae+=-P/2-F/2:d===`bottom`||d===`alphabetic`||d===`ideographic`?ae+=-P:(d===`top`||d===`hanging`)&&(ae+=-F);var L=k+(M||0);ae+=ee||0,re.length===1&&(ie===`bottom`?(ie=`middle`,ae-=.5*P):ie===`top`&&(ie=`middle`,ae+=.5*P)),e.textBaseline=ie;var oe=!iS(N)&&te>0;AR(n,e,oe);for(var se=0;se<re.length;se++){var ce=s/2+L;ae+=F,!iS(v)&&!v.isNone&&s&&this.drawLetterSpacing(e,n,re[se],I[se],l,ce,ae,_,y,b,S,v,w,E,!0,r,i,a),iS(y)||this.drawLetterSpacing(e,n,re[se],I[se],l,ce,ae,_,y,b,S,v,w,E,!1,r,i,a)}}},{key:`drawLetterSpacing`,value:function(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_){if(s===0){m?this.strokeText(e,t,n,a,o,d,f,h,g,_):this.fillText(e,t,n,a,o,c,l,u,p,h,g,_);return}var v=e.textAlign;e.textAlign=`left`;var y=a;i===`center`||i===`middle`?y=a-r.width/2:(i===`right`||i===`end`)&&(y=a-r.width);for(var b=Array.from(n),x=e.measureText(n).width,S=0,C=0;C<b.length;++C){var w=b[C];m?this.strokeText(e,t,w,y,o,d,f,h,g,_):this.fillText(e,t,w,y,o,c,l,u,p,h,g,_),S=e.measureText(n.substring(C+1)).width,y+=x-S+s,x=S}e.textAlign=v}},{key:`fillText`,value:function(e,t,n,r,i,a,o,s,c,l,u,d){jR(e,t,a,o,l,u,d,this.imagePool,!0);var f,p=!iS(s)&&s!==1;p&&(f=e.globalAlpha,e.globalAlpha=s*c),e.fillText(n,r,i),p&&(e.globalAlpha=f)}},{key:`strokeText`,value:function(e,t,n,r,i,a,o,s,c,l){MR(e,t,a,s,c,l,this.imagePool,!0);var u,d=!iS(o)&&o!==1;d&&(u=e.globalAlpha,e.globalAlpha=o),e.strokeText(n,r,i),d&&(e.globalAlpha=u)}},{key:`drawToContext`,value:function(e,t,n,r,i){this.render(e,t.parsedStyle,t,t.ownerDocument.defaultView.context,r,i)}}])}(kR),LR=function(e){function t(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return W(this,t),e=Yy(this,t),e.name=`canvas-renderer`,e.options=n,e}return Zy(t,e),G(t,[{key:`init`,value:function(){var e,t=Ly({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),n=this.context.imagePool,r=new kR(n),i=(e={},U(U(U(U(U(U(U(U(U(U(e,q.CIRCLE,r),q.ELLIPSE,r),q.RECT,r),q.IMAGE,new FR(n)),q.TEXT,new IR(n)),q.LINE,r),q.POLYLINE,r),q.POLYGON,r),q.PATH,r),q.GROUP,void 0),U(U(U(e,q.HTML,void 0),q.MESH,void 0),q.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=i,this.context.styleRendererFactory=i,this.addRenderingPlugin(new xR(t))}},{key:`destroy`,value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(Zw),RR=function(){function e(){W(this,e)}return G(e,[{key:`apply`,value:function(t,n){var r=this,i=t.renderingService,a=t.renderingContext,o=t.config;this.context=t;var s=a.root.ownerDocument.defaultView,c=function(e){i.hooks.pointerMove.call(e)},l=function(e){i.hooks.pointerUp.call(e)},u=function(e){i.hooks.pointerDown.call(e)},d=function(e){i.hooks.pointerOver.call(e)},f=function(e){i.hooks.pointerOut.call(e)},p=function(e){i.hooks.pointerCancel.call(e)},m=function(e){i.hooks.pointerWheel.call(e)},h=function(e){i.hooks.click.call(e)},g=function(e){n.globalThis.document.addEventListener(`pointermove`,c,!0),e.addEventListener(`pointerdown`,u,!0),e.addEventListener(`pointerleave`,f,!0),e.addEventListener(`pointerover`,d,!0),n.globalThis.addEventListener(`pointerup`,l,!0),n.globalThis.addEventListener(`pointercancel`,p,!0)},_=function(e){e.addEventListener(`touchstart`,u,!0),e.addEventListener(`touchend`,l,!0),e.addEventListener(`touchmove`,c,!0),e.addEventListener(`touchcancel`,p,!0)},v=function(e){n.globalThis.document.addEventListener(`mousemove`,c,!0),e.addEventListener(`mousedown`,u,!0),e.addEventListener(`mouseout`,f,!0),e.addEventListener(`mouseover`,d,!0),n.globalThis.addEventListener(`mouseup`,l,!0)},y=function(e){n.globalThis.document.removeEventListener(`pointermove`,c,!0),e.removeEventListener(`pointerdown`,u,!0),e.removeEventListener(`pointerleave`,f,!0),e.removeEventListener(`pointerover`,d,!0),n.globalThis.removeEventListener(`pointerup`,l,!0),n.globalThis.removeEventListener(`pointercancel`,p,!0)},b=function(e){e.removeEventListener(`touchstart`,u,!0),e.removeEventListener(`touchend`,l,!0),e.removeEventListener(`touchmove`,c,!0),e.removeEventListener(`touchcancel`,p,!0)},x=function(e){n.globalThis.document.removeEventListener(`mousemove`,c,!0),e.removeEventListener(`mousedown`,u,!0),e.removeEventListener(`mouseout`,f,!0),e.removeEventListener(`mouseover`,d,!0),n.globalThis.removeEventListener(`mouseup`,l,!0)};i.hooks.init.tap(e.tag,function(){var e=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming=`none`,e.style.msTouchAction=`none`):s.supportsPointerEvents&&(e.style.touchAction=`none`),s.supportsPointerEvents?g(e):v(e),s.supportsTouchEvents&&_(e),o.useNativeClickEvent&&e.addEventListener(`click`,h,!0),e.addEventListener(`wheel`,m,{passive:!0,capture:!0})}),i.hooks.destroy.tap(e.tag,function(){var e=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming=``,e.style.msTouchAction=``):s.supportsPointerEvents&&(e.style.touchAction=``),s.supportsPointerEvents?y(e):x(e),s.supportsTouchEvents&&b(e),o.useNativeClickEvent&&e.removeEventListener(`click`,h,!0),e.removeEventListener(`wheel`,m,!0)})}}])}();RR.tag=`DOMInteraction`;var zR=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.name=`dom-interaction`,e}return Zy(t,e),G(t,[{key:`init`,value:function(){this.addRenderingPlugin(new RR)}},{key:`destroy`,value:function(){this.removeAllRenderingPlugins()}}])}(Zw),BR=`g-canvas-camera`,VR=function(){function e(){W(this,e),this.displayObjectHTMLElementMap=new WeakMap}return G(e,[{key:`joinTransformMatrix`,value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return`matrix(${[e[0],e[1],e[4],e[5],e[12]+t[0],e[13]+t[1]].join(`,`)})`}},{key:`apply`,value:function(t,n){var r=this,i=t.camera,a=t.renderingContext,o=t.renderingService;this.context=t;var s=a.root.ownerDocument.defaultView,c=s.context.eventService.nativeHTMLMap,l=function(e,t){t.style.transform=r.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())},u=function(e){var t=e.target;if(t.nodeName===q.HTML){r.$camera||=r.createCamera(i);var n=r.getOrCreateEl(t);r.$camera.appendChild(n),Object.keys(t.attributes).forEach(function(e){r.updateAttribute(e,t)}),l(t,n),c.set(n,t)}},d=function(e){var t=e.target;if(t.nodeName===q.HTML&&r.$camera){var n=r.getOrCreateEl(t);n&&(n.remove(),c.delete(n))}},f=function(e){var t=e.target;if(t.nodeName===q.HTML){var n=e.attrName;r.updateAttribute(n,t)}},p=function(e){var t=e.target;(t.nodeName===q.FRAGMENT?t.childNodes:[t]).forEach(function(e){if(e.nodeName===q.HTML){var t=r.getOrCreateEl(e);l(e,t)}})},m=function(){if(r.$camera){var e=r.context.config,t=e.width,n=e.height;r.$camera.parentElement.style.width=`${t||0}px`,r.$camera.parentElement.style.height=`${n||0}px`}};o.hooks.init.tap(e.tag,function(){s.addEventListener(aM.RESIZE,m),s.addEventListener(LA.MOUNTED,u),s.addEventListener(LA.UNMOUNTED,d),s.addEventListener(LA.ATTR_MODIFIED,f),s.addEventListener(LA.BOUNDS_CHANGED,p)}),o.hooks.endFrame.tap(e.tag,function(){r.$camera&&a.renderReasons.has(NA.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),o.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),s.removeEventListener(aM.RESIZE,m),s.removeEventListener(LA.MOUNTED,u),s.removeEventListener(LA.UNMOUNTED,d),s.removeEventListener(LA.ATTR_MODIFIED,f),s.removeEventListener(LA.BOUNDS_CHANGED,p)})}},{key:`createCamera`,value:function(e){var t=this.context.config,n=t.document,r=t.width,i=t.height,a=this.context.contextService.getDomElement(),o=a.parentNode;if(o){var s=BR,c=o.querySelector(`#${s}`);if(!c){var l=(n||document).createElement(`div`);l.style.overflow=`hidden`,l.style.pointerEvents=`none`,l.style.position=`absolute`,l.style.left=`0px`,l.style.top=`0px`,l.style.width=`${r||0}px`,l.style.height=`${i||0}px`;var u=(n||document).createElement(`div`);c=u,u.id=s,u.style.position=`absolute`,u.style.left=`${a.offsetLeft||0}px`,u.style.top=`${a.offsetTop||0}px`,u.style.transformOrigin=`left top`,u.style.transform=this.joinTransformMatrix(e.getOrthoMatrix()),u.style.pointerEvents=`none`,u.style.width=`100%`,u.style.height=`100%`,l.appendChild(u),o.appendChild(l)}return c}return null}},{key:`getOrCreateEl`,value:function(e){var t=this.context.config.document,n=this.displayObjectHTMLElementMap.get(e);return n||(n=(t||document).createElement(`div`),e.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(e,n),e.id&&(n.id=e.id),e.name&&n.setAttribute(`name`,e.name),e.className&&(n.className=e.className),n.style.position=`absolute`,n.style[`will-change`]=`transform`,n.style.transform=this.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())),n}},{key:`updateAttribute`,value:function(e,t){var n=this.getOrCreateEl(t);switch(e){case`innerHTML`:var r=t.parsedStyle.innerHTML;_S(r)?n.innerHTML=r:(n.innerHTML=``,n.appendChild(r));break;case`x`:n.style.left=`${t.parsedStyle.x}px`;break;case`y`:n.style.top=`${t.parsedStyle.y}px`;break;case`transformOrigin`:var i=t.parsedStyle.transformOrigin;n.style[`transform-origin`]=`${i[0].buildCSSText(null,null,``)} ${i[1].buildCSSText(null,null,``)}`;break;case`width`:var a=t.parsedStyle.width;n.style.width=K(a)?`${a}px`:a.toString();break;case`height`:var o=t.parsedStyle.height;n.style.height=K(o)?`${o}px`:o.toString();break;case`zIndex`:var s=t.parsedStyle.zIndex;n.style[`z-index`]=`${s}`;break;case`visibility`:var c=t.parsedStyle.visibility;n.style.visibility=c;break;case`pointerEvents`:var l=t.parsedStyle.pointerEvents,u=l===void 0?`auto`:l;n.style.pointerEvents=u;break;case`opacity`:var d=t.parsedStyle.opacity;n.style.opacity=`${d}`;break;case`fill`:var f=t.parsedStyle.fill,p=``;jD(f)?p=f.isNone?`transparent`:t.getAttribute(`fill`):Array.isArray(f)?p=t.getAttribute(`fill`):AD(f),n.style.background=p;break;case`stroke`:var m=t.parsedStyle.stroke,h=``;jD(m)?h=m.isNone?`transparent`:t.getAttribute(`stroke`):Array.isArray(m)?h=t.getAttribute(`stroke`):AD(m),n.style[`border-color`]=h,n.style[`border-style`]=`solid`;break;case`lineWidth`:var g=t.parsedStyle.lineWidth;n.style[`border-width`]=`${g||0}px`;break;case`lineDash`:n.style[`border-style`]=`dashed`;break;case`filter`:var _=t.style.filter;n.style.filter=_;break;default:!iS(t.style[e])&&t.style[e]!==``&&(n.style[e]=t.style[e])}}}])}();VR.tag=`HTMLRendering`;var HR=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.name=`html-renderer`,e}return Zy(t,e),G(t,[{key:`init`,value:function(){this.addRenderingPlugin(new VR)}},{key:`destroy`,value:function(){this.removeAllRenderingPlugins()}}])}(Zw),UR=function(){function e(t){W(this,e),this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return G(e,[{key:`init`,value:function(){var e=this.canvasConfig,t=e.container,n=e.canvas;if(n)this.$canvas=n,t&&n.parentElement!==t&&t.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container;else if(t&&(this.$container=_S(t)?document.getElementById(t):t,this.$container)){var r=document.createElement(`canvas`);this.$container.appendChild(r),this.$container.style.position||(this.$container.style.position=`relative`),this.$canvas=r}this.context=this.$canvas.getContext(`2d`),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:`getContext`,value:function(){return this.context}},{key:`getDomElement`,value:function(){return this.$canvas}},{key:`getDPR`,value:function(){return this.dpr}},{key:`getBoundingClientRect`,value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:`destroy`,value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:`resize`,value:function(e,t){this.dpr=this.canvasConfig.devicePixelRatio,this.$canvas&&(this.$canvas.width=this.dpr*e,this.$canvas.height=this.dpr*t,Ck(this.$canvas,e,t)),this.renderingContext.renderReasons.add(NA.CAMERA_CHANGED)}},{key:`applyCursorStyle`,value:function(e){this.$container&&this.$container.style&&(this.$container.style.cursor=e)}},{key:`toDataURL`,value:function(){var e=Ww(Hw().mark(function e(){var t,n,r,i=arguments;return Hw().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&i[0]!==void 0?i[0]:{},n=t.type,r=t.encoderOptions,e.abrupt(`return`,this.context.canvas.toDataURL(n,r));case 1:case`end`:return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}])}(),WR=function(e){function t(){var e;W(this,t);var n=[...arguments];return e=Yy(this,t,[].concat(n)),e.name=`canvas-context-register`,e}return Zy(t,e),G(t,[{key:`init`,value:function(){this.context.ContextService=UR}},{key:`destroy`,value:function(){delete this.context.ContextService}}])}(Zw),GR=function(e){function t(e){var n;return W(this,t),n=Yy(this,t,[e]),n.registerPlugin(new WR),n.registerPlugin(new yR),n.registerPlugin(new NL),n.registerPlugin(new LR),n.registerPlugin(new zR),n.registerPlugin(new sR),n.registerPlugin(new HR),n}return Zy(t,e),G(t)}(Qw),KR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},qR=class e extends pL{constructor(t){super(Object.assign(Object.assign({},t),{style:Object.assign({},e.defaultStyleProps,t.style)})),this.rootPointerEvent=new TA(null),this.forwardEvents=e=>{let t=this.context.canvas,n=t.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(e,n).forEach(r=>{let i=this.bootstrapEvent(this.rootPointerEvent,r,n,e);sC(t.context.eventService,`mappingTable.pointerupoutside`,[]),t.context.eventService.mapEvent(i)})}}get eventService(){return this.context.canvas.context.eventService}get events(){return[Z.CLICK,Z.POINTER_DOWN,Z.POINTER_MOVE,Z.POINTER_UP,Z.POINTER_OVER,Z.POINTER_LEAVE]}getDomElement(){return this.getShape(`key`).getDomElement()}render(e=this.parsedAttributes,t=this){this.drawKeyShape(e,t),this.drawPortShapes(e,t)}getKeyStyle(e){let t=lC(e,[`dx`,`dy`,`innerHTML`,`pointerEvents`,`cursor`]),{dx:n=0,dy:r=0}=t,i=KR(t,[`dx`,`dy`]),[a,o]=this.getSize(e);return Object.assign(Object.assign({x:n,y:r},i),{width:a,height:o})}drawKeyShape(e,t){let n=this.getKeyStyle(e),{x:r,y:i,width:a=0,height:o=0}=n,s=this.upsert(`key-container`,Yj,{x:r,y:i,width:a,height:o,opacity:0},t);return this.upsert(`key`,zj,n,s)}connectedCallback(){if(!(this.context.canvas.getRenderer(`main`)instanceof GR))return;let e=this.getDomElement();this.events.forEach(t=>{e.addEventListener(t,this.forwardEvents)})}attributeChangedCallback(e,t,n){e===`zIndex`&&t!==n&&(this.getDomElement().style.zIndex=n)}destroy(){let e=this.getDomElement();this.events.forEach(t=>{e.removeEventListener(t,this.forwardEvents)}),super.destroy()}normalizeToPointerEvent(e,t){let n=[];if(t.isTouchEvent(e))for(let t=0;t<e.changedTouches.length;t++){let r=e.changedTouches[t];BS(r.button)&&(r.button=0),BS(r.buttons)&&(r.buttons=1),BS(r.isPrimary)&&(r.isPrimary=e.touches.length===1&&e.type===`touchstart`),BS(r.width)&&(r.width=r.radiusX||1),BS(r.height)&&(r.height=r.radiusY||1),BS(r.tiltX)&&(r.tiltX=0),BS(r.tiltY)&&(r.tiltY=0),BS(r.pointerType)&&(r.pointerType=`touch`),BS(r.pointerId)&&(r.pointerId=r.identifier||0),BS(r.pressure)&&(r.pressure=r.force||.5),BS(r.twist)&&(r.twist=0),BS(r.tangentialPressure)&&(r.tangentialPressure=0),r.isNormalized=!0,r.type=e.type,n.push(r)}else if(t.isMouseEvent(e)){let t=e;BS(t.isPrimary)&&(t.isPrimary=!0),BS(t.width)&&(t.width=1),BS(t.height)&&(t.height=1),BS(t.tiltX)&&(t.tiltX=0),BS(t.tiltY)&&(t.tiltY=0),BS(t.pointerType)&&(t.pointerType=`mouse`),BS(t.pointerId)&&(t.pointerId=1),BS(t.pressure)&&(t.pressure=.5),BS(t.twist)&&(t.twist=0),BS(t.tangentialPressure)&&(t.tangentialPressure=0),t.isNormalized=!0,n.push(t)}else n.push(e);return n}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null}bootstrapEvent(e,t,n,r){e.view=n,e.originalEvent=null,e.nativeEvent=r,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);let{x:i,y:a}=this.getViewportXY(t);e.viewport.x=i,e.viewport.y=a;let[o,s]=this.context.canvas.getCanvasByViewport([i,a]);return e.canvas.x=o,e.canvas.y=s,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=r.isTrusted,e.type===`pointerleave`&&(e.type=`pointerout`),e}getViewportXY(e){let t,n,{offsetX:r,offsetY:i,clientX:a,clientY:o}=e;if(!iS(r)&&!iS(i))t=r,n=i;else{let e=this.eventService.client2Viewport({x:a,y:o});t=e.x,n=e.y}return{x:t,y:n}}onframe(){super.onframe();let{opacity:e}=this.attributes;this.getDomElement().style.opacity=`${e}`}};qR.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:`auto`};var JR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},YR=class e extends pL{constructor(t){super(PI({style:e.defaultStyleProps},t))}getKeyStyle(e){let[t,n]=this.getSize(e),r=super.getKeyStyle(e),{fillOpacity:i,opacity:a=i}=r,o=JR(r,[`fillOpacity`,`opacity`]);return Object.assign(Object.assign({opacity:a},o),{width:t,height:n,x:-t/2,y:-n/2})}getBounds(){return this.getShape(`key`).getBounds()}getHaloStyle(e){if(e.halo===!1)return!1;let t=this.getShape(`key`).attributes,{fill:n,stroke:r}=t;JR(t,[`fill`,`stroke`]);let i=OI(this.getGraphicStyle(e),`halo`),a=Number(i.lineWidth),[o,s]=xF(this.getSize(e),[a,a]),{lineWidth:c}=i,l={fill:`transparent`,lineWidth:c/2,width:o-c/2,height:s-c/2,x:-(o-c/2)/2,y:-(s-c/2)/2};return Object.assign(Object.assign({},i),l)}getIconStyle(e){let t=super.getIconStyle(e),[n,r]=this.getSize(e);return t?Object.assign({width:n*hI,height:r*hI},t):!1}drawKeyShape(e,t){let n=this.upsert(`key`,aL,this.getKeyStyle(e),t);return cL(this),n}drawHaloShape(e,t){this.upsert(`halo`,Yj,this.getHaloStyle(e),t)}update(e){super.update(e),e&&(`x`in e||`y`in e||`z`in e)&&lL(this)}};YR.defaultStyleProps={size:32};var XR=class extends pL{constructor(e){super(e)}getKeyStyle(e){let[t,n]=this.getSize(e);return Object.assign(Object.assign({},super.getKeyStyle(e)),{width:t,height:n,x:-t/2,y:-n/2})}getIconStyle(e){let t=super.getIconStyle(e),{width:n,height:r}=this.getShape(`key`).attributes;return t?Object.assign({width:n*hI,height:r*hI},t):!1}drawKeyShape(e,t){return this.upsert(`key`,Yj,this.getKeyStyle(e),t)}},ZR=class extends gL{constructor(e){super(e)}getInnerR(e){return e.innerR||this.getOuterR(e)*3/8}getOuterR(e){return Math.min(...this.getSize(e))/2}getPoints(e){return OB(this.getOuterR(e),this.getInnerR(e))}getIconStyle(e){let t=super.getIconStyle(e),n=this.getInnerR(e)*2*hI;return t?Object.assign({width:n,height:n},t):!1}getPortXY(e,t){let{placement:n=`top`}=t,r=this.getShape(`key`).getLocalBounds(),i=kB(this.getOuterR(e),this.getInnerR(e));return _B(r,n,i,!1)}},QR=class e extends gL{constructor(t){super(PI({style:e.defaultStyleProps},t))}getPoints(e){let{direction:t}=e,[n,r]=this.getSize(e);return AB(n,r,t)}getPortXY(e,t){let{direction:n}=e,{placement:r=`top`}=t,i=this.getShape(`key`).getLocalBounds(),[a,o]=this.getSize(e),s=jB(a,o,n);return _B(i,r,s,!1)}getIconStyle(e){let{icon:t,iconText:n,iconSrc:r,direction:i}=e;if(t===!1||rC(n||r))return!1;let a=OI(this.getGraphicStyle(e),`icon`),o=this.getShape(`key`).getLocalBounds(),[s,c]=bP(o,i),l=xP(o,i)*2*hI;return Object.assign({x:s,y:c,width:l,height:l},a)}};QR.defaultStyleProps={size:40,direction:`up`};var $R=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},ez=class e extends pL{constructor(t){super(PI({style:e.defaultStyleProps},t)),this.type=`combo`,this.updateComboPosition(this.parsedAttributes)}getKeySize(e){let{collapsed:t,childrenNode:n=[]}=e;return n.length===0?this.getEmptyKeySize(e):t?this.getCollapsedKeySize(e):this.getExpandedKeySize(e)}getEmptyKeySize(e){let{padding:t,collapsedSize:n}=e,[r,i,a,o]=iP(t);return xF(jI(n),[o+i,r+a,0])}getCollapsedKeySize(e){return jI(e.collapsedSize)}getExpandedKeySize(e){let t=this.getContentBBox(e);return[oP(t),sP(t),0]}getContentBBox(e){let{childrenNode:t=[],padding:n}=e,r=t.map(e=>this.context.element.getElement(e)).filter(Boolean);if(r.length===0){let t=new aT,{x:n=0,y:r=0,size:i}=e,[a,o]=jI(i);return t.setMinMax([n-a/2,r-o/2,0],[n+a/2,r+o/2,0]),t}let i=fP(r.map(e=>e.getBounds()));return n?dP(i,n):i}drawCollapsedMarkerShape(e,t){let n=this.getCollapsedMarkerStyle(e);this.upsert(`collapsed-marker`,uL,n,t),cL(this)}getCollapsedMarkerStyle(e){if(!e.collapsed||!e.collapsedMarker)return!1;let t=OI(this.getGraphicStyle(e),`collapsedMarker`),{type:n}=t,r=$R(t,[`type`]),i=this.getShape(`key`),[a,o]=UF(i.getLocalBounds(),`center`),s=Object.assign(Object.assign({},r),{x:a,y:o});if(n){let t=this.getCollapsedMarkerText(n,e);Object.assign(s,{text:t})}return s}getCollapsedMarkerText(e,t){let{childrenData:n=[]}=t,{model:r}=this.context;return e===`descendant-count`?r.getDescendantsData(this.id).length.toString():e===`child-count`?n.length.toString():e===`node-count`?r.getDescendantsData(this.id).filter(e=>r.getElementType($(e))===`node`).length.toString():rS(e)?e(n):``}getComboPosition(e){let{x:t=0,y:n=0,collapsed:r,childrenData:i=[]}=e;if(i.length===0)return[+t,+n,0];if(r){let{model:e}=this.context,r=e.getDescendantsData(this.id).filter(t=>!e.isCombo($(t)));if(r.length>0&&r.some(VF)){let e=r.reduce((e,t)=>xF(e,BF(t)),[0,0,0]);return wF(e,r.length)}return[+t,+n,0]}return this.getContentBBox(e).center}getComboStyle(e){let[t,n]=this.getComboPosition(e);return{x:t,y:n,transform:[[`translate`,t,n]]}}updateComboPosition(e){let t=this.getComboStyle(e);Object.assign(this.style,t);let{x:n,y:r}=t;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:r}}),lL(this)}render(e,t=this){super.render(e,t),this.drawCollapsedMarkerShape(e,t)}update(e={}){super.update(e),this.updateComboPosition(this.parsedAttributes)}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}animate(e,t){let n=super.animate(this.attributes.collapsed?e:e.map(e=>{var{x:t,y:n,z:r,transform:i}=e;return $R(e,[`x`,`y`,`z`,`transform`])}),t);return n&&new Proxy(n,{set:(e,t,n)=>(t===`currentTime`&&Promise.resolve().then(()=>this.onframe()),Reflect.set(e,t,n))})}};ez.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:`center`,collapsedMarkerTextBaseline:`middle`,collapsedMarkerType:`child-count`};var tz=class extends ez{constructor(e){super(e)}drawKeyShape(e,t){return this.upsert(`key`,Mj,this.getKeyStyle(e),t)}getKeyStyle(e){let{collapsed:t}=e,n=super.getKeyStyle(e),[r]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},n),t&&OI(n,`collapsed`)),{r:r/2})}getCollapsedKeySize(e){let[t,n]=jI(e.collapsedSize),r=Math.max(t,n)/2;return[r*2,r*2,0]}getExpandedKeySize(e){let t=this.getContentBBox(e),[n,r]=cP(t),i=Math.sqrt(n**2+r**2)/2;return[i*2,i*2,0]}getIntersectPoint(e,t=!1){let n=this.getShape(`key`).getBounds();return nI(e,n,t)}},nz=class extends ez{constructor(e){super(e)}drawKeyShape(e,t){return this.upsert(`key`,Yj,this.getKeyStyle(e),t)}getKeyStyle(e){let t=super.getKeyStyle(e),[n,r]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},t),e.collapsed&&OI(t,`collapsed`)),{width:n,height:r,x:-n/2,y:-r/2})}},rz={padding:10};function iz(e,t,n,r,i,a){let{padding:o}=Object.assign(rz,a),s=lP(n,o),c=lP(r,o),l=[e,...i,t],u=null,d=[];for(let e=0,t=l.length;e<t-1;e++){let n=e+1,r=l[e],i=l[n],a=XF(r,i),f=null;if(e===0)if(n===t-1)if(s.intersects(c))f=pz(r,i,s,c);else if(!_P(r,s)&&!_P(i,c)){let e=yP(r,s),t=yP(i,c);f=lz(e,t,sz(e,t)),f.points.unshift(e),f.points.push(t)}else a||(f=fz(r,i,s,c));else mP(i,s)?f=pz(r,i,s,lP(i,o),u):a||(f=uz(r,i,s));else n===t-1?mP(r,c)?f=pz(r,i,lP(r,o),c,u):a||(f=dz(r,i,c,u)):a||(f=lz(r,i,u));f?(d.push(...f.points),u=f.direction):u=sz(r,i),n<t-1&&d.push(i)}return d.map(PF)}var az={N:`S`,S:`N`,W:`E`,E:`W`},oz={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function sz(e,t){let[n,r]=e,[i,a]=t;return n===i?r>a?`N`:`S`:r===a?n>i?`W`:`E`:null}function cz(e,t){return t===`N`||t===`S`?sP(e):oP(e)}function lz(e,t,n){let r=[e[0],t[1]],i=[t[0],e[1]],a=sz(e,r),o=sz(e,i),s=n?az[n]:null,c=a===n||a!==s&&o!==n?r:i;return{points:[c],direction:sz(c,t)}}function uz(e,t,n){if(_P(e,n)){let r=mz(e,t,n);return{points:[r],direction:sz(r,t)}}else{let r=yP(e,n),i=[`left`,`right`].includes(vP(e,n))?[t[0],r[1]]:[r[0],t[1]];return{points:[i],direction:sz(i,t)}}}function dz(e,t,n,r){let i=_P(t,n)?t:yP(t,n),a=[[i[0],e[1]],[e[0],i[1]]],o=a.filter(e=>gP(e,n)&&!hP(e,n,!0)),s=o.filter(t=>sz(t,e)!==r);if(s.length>0){let n=s.find(t=>sz(e,t)===r)||s[0];return{points:[n],direction:sz(n,t)}}else{let i=nS(a,o)[0],s=qF(t,i,cz(n,r)/2);return{points:[mz(s,e,n),s],direction:sz(s,t)}}}function fz(e,t,n,r){let i=uz(e,t,n),a=FF(i.points[0]);if(mP(a,r)){i=uz(t,e,r);let o=FF(i.points[0]);if(mP(o,n)){let s=qF(e,a,cz(n,sz(e,a))/2),c=qF(t,o,cz(r,sz(t,o))/2),l=[(s[0]+c[0])/2,(s[1]+c[1])/2],u=uz(e,l,n),d=dz(l,t,r,u.direction);i.points=[u.points[0],d.points[0]],i.direction=d.direction}}return i}function pz(e,t,n,r,i){let a=.01,o=fP([n,r]),s=OF(t,o.center)>OF(e,o.center),[c,l]=s?[t,e]:[e,t],u=sP(o)+oP(o),d;if(i){let e=[c[0]+u*Math.cos(oz[i]),c[1]+u*Math.sin(oz[i])];d=qF(yP(e,o),e,a)}else d=qF(yP(c,o),c,-a);let f=mz(d,l,o),p=[KF(d,2),KF(f,2)];if(aC(KF(d),KF(f))){let e=jF(SF(d,c),[1,0,0])+Math.PI/2;f=[l[0]+u*Math.cos(e),l[1]+u*Math.sin(e),0],f=KF(qF(yP(f,o),l,-a),2);let t=mz(d,f,o);p=[d,t,f]}return{points:s?p.reverse():p,direction:sz(s?d:f,t)}}function mz(e,t,n){let r=[e[0],t[1]];return mP(r,n)&&(r=[t[0],e[1]]),r}function hz(e,t,n,r,i){let a=typeof t==`number`?t:.5;t===`start`&&(a=0),t===`end`&&(a=.99);let o=WF(e.getPoint(a)),s=WF(e.getPoint(a+.01)),c=t===`start`?`left`:t===`end`?`right`:`center`;if(JF(o,s)||!n){let[t,n]=_z(e,a,r,i);return{transform:[[`translate`,t,n]],textAlign:c}}let l=Math.atan2(s[1]-o[1],s[0]-o[0]);s[0]<o[0]&&(c=c===`center`?c:c===`left`?`right`:`left`,r*=-1,l+=Math.PI);let[u,d]=_z(e,a,r,i,l),f=[[`translate`,u,d],[`rotate`,l/Math.PI*180]];return{textAlign:c,transform:f}}function gz(e,t,n,r,i){let a=e.badge?.getGeometryBounds().halfExtents[0]*2||0,o=e.label?.getGeometryBounds().halfExtents[0]*2||0;return hz(e.key,n,!0,(o?(o/2+a/2)*(t===`suffix`?1:-1):0)+r,i)}function _z(e,t,n,r,i){let[a,o]=WF(e.getPoint(t)),s=n,c=r;return i&&(s=n*Math.cos(i)-r*Math.sin(i),c=n*Math.sin(i)+r*Math.cos(i)),[a+s,o+c]}function vz(e,t,n,r){if(aC(e,t))return e;let i=SF(t,e),a=[e[0]+n*i[0],e[1]+n*i[1]],o=AF(MF(i,!1));return a[0]+=r*o[0],a[1]+=r*o[1],a}function yz(e){return K(e)?[e,-e]:e}function bz(e){return K(e)?[e,1-e]:e}function xz(e,t,n){return[[`M`,e[0],e[1]],[`Q`,n[0],n[1],t[0],t[1]]]}function Sz(e,t,n){return[[`M`,e[0],e[1]],[`C`,n[0][0],n[0][1],n[1][0],n[1][1],t[0],t[1]]]}function Cz(e,t=0,n=!1){let r=e.length-1,i=e[0],a=e[r],o=e.slice(1,r),s=[[`M`,i[0],i[1]]];return o.forEach((e,n)=>{let r=o[n-1]||i,c=o[n+1]||a;if(!ZF(r,e,c)&&t){let[n,i]=wz(r,e,c,t);s.push([`L`,n[0],n[1]],[`Q`,e[0],e[1],i[0],i[1]],[`L`,i[0],i[1]])}else s.push([`L`,e[0],e[1]])}),s.push([`L`,a[0],a[1]]),n&&s.push([`Z`]),s}function wz(e,t,n,r){let i=kF(e,t),a=kF(n,t),o=Math.min(r,Math.min(i,a)/2),s=[t[0]-o/i*(t[0]-e[0]),t[1]-o/i*(t[1]-e[1])],c=[t[0]-o/a*(t[0]-n[0]),t[1]-o/a*(t[1]-n[1])];return[s,c]}const Tz=e=>{let t=Math.PI/2,n=sP(e)/2,r=oP(e)/2,i=Math.atan2(n,r)/2,a=Math.atan2(r,n)/2;return{top:[-t-a,-t+a],"top-right":[-t+a,-i],"right-top":[-t+a,-i],right:[-i,i],"bottom-right":[i,t-a],"right-bottom":[i,t-a],bottom:[t-a,t+a],"bottom-left":[t+a,Math.PI-i],"left-bottom":[t+a,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-t-a],"left-top":[Math.PI+i,-t-a]}};function Ez(e,t,n,r,i){let a=lP(e),o=e.getCenter(),s=r&&bB(r),c=i&&bB(i);if(!s||!c){let r=Tz(a),i=r[t][0],l=r[t][1],[u,d]=cP(a),f=Math.max(u,d),p=xF(o,[f*Math.cos(i),f*Math.sin(i),0]),m=xF(o,[f*Math.cos(l),f*Math.sin(l),0]);s=EB(e,p),c=EB(e,m),n||([s,c]=[c,s])}return[s,c]}function Dz(e,t,n,r,i,a){let o=e.getPorts()[i||a],s=e.getPorts()[a||i],[c,l]=Ez(e,t,n,o,s),u=Oz(e,c,l,r);return o&&(c=TB(o,u[0])),s&&(l=TB(s,u.at(-1))),Sz(c,l,u)}function Oz(e,t,n,r){let i=e.getCenter();if(aC(t,n)){let e=SF(t,i),a=[r*Math.sign(e[0])||r/2,r*Math.sign(e[1])||-r/2,0];return[xF(t,a),xF(n,CF(a,[1,-1,1]))]}return[qF(i,t,OF(i,t)+r),qF(i,n,OF(i,n)+r)]}function kz(e,t,n,r,i,a,o){let s=vB(e),c=s[a||o],l=s[o||a],[u,d]=Ez(e,n,r,c,l),f=Az(e,u,d,i);return c&&(u=TB(c,f[0])),l&&(d=TB(l,f.at(-1))),Cz([u,...f,d],t)}function Az(e,t,n,r){let i=[],a=lP(e);if(aC(t,n))switch(vP(t,a)){case`left`:i.push([t[0]-r,t[1]]),i.push([t[0]-r,t[1]+r]),i.push([t[0],t[1]+r]);break;case`right`:i.push([t[0]+r,t[1]]),i.push([t[0]+r,t[1]+r]),i.push([t[0],t[1]+r]);break;case`top`:i.push([t[0],t[1]-r]),i.push([t[0]+r,t[1]-r]),i.push([t[0]+r,t[1]]);break;case`bottom`:i.push([t[0],t[1]+r]),i.push([t[0]+r,t[1]+r]),i.push([t[0]+r,t[1]]);break}else{let e=vP(t,a),o=vP(n,a);if(e===o){let a=e,o,s;switch(a){case`left`:o=Math.min(t[0],n[0])-r,i.push([o,t[1]]),i.push([o,n[1]]);break;case`right`:o=Math.max(t[0],n[0])+r,i.push([o,t[1]]),i.push([o,n[1]]);break;case`top`:s=Math.min(t[1],n[1])-r,i.push([t[0],s]),i.push([n[0],s]);break;case`bottom`:s=Math.max(t[1],n[1])+r,i.push([t[0],s]),i.push([n[0],s]);break}}else{let s=(e,t)=>({left:[t[0]-r,t[1]],right:[t[0]+r,t[1]],top:[t[0],t[1]-r],bottom:[t[0],t[1]+r]})[e],c=s(e,t),l=s(o,n),u=mz(c,l,a);i.push(c,u,l)}}return i}function jz(e,t){let n=new Set,r=new Set,i=new Set;return e.forEach(a=>{t(a).forEach(t=>{n.add(t),e.includes(t.source)&&e.includes(t.target)?r.add(t):i.add(t)})}),{edges:Array.from(n),internal:Array.from(r),external:Array.from(i)}}function Mz(e,t){let n=[],r=e;for(;r;){n.push(r);let e=t($(r));if(e)r=e;else break}if(n.some(e=>e.style?.collapsed)){let e=n.reverse().findIndex(wI);return n[e]||n.at(-1)}return e}function Nz(e,t){return t||(e<4?10:e===4?12:e*2.5)}var Pz=n({circle:()=>Fz,diamond:()=>Lz,rect:()=>zz,simple:()=>Vz,triangle:()=>Iz,triangleRect:()=>Bz,vee:()=>Rz});const Fz=(e,t)=>{let n=Math.max(e,t)/2;return[[`M`,-e/2,0],[`A`,n,n,0,1,0,2*n-e/2,0],[`A`,n,n,0,1,0,-e/2,0],[`Z`]]},Iz=(e,t)=>[[`M`,-e/2,0],[`L`,e/2,-t/2],[`L`,e/2,t/2],[`Z`]],Lz=(e,t)=>[[`M`,-e/2,0],[`L`,0,-t/2],[`L`,e/2,0],[`L`,0,t/2],[`Z`]],Rz=(e,t)=>[[`M`,-e/2,0],[`L`,e/2,-t/2],[`L`,4*e/5-e/2,0],[`L`,e/2,t/2],[`Z`]],zz=(e,t)=>[[`M`,-e/2,-t/2],[`L`,e/2,-t/2],[`L`,e/2,t/2],[`L`,-e/2,t/2],[`Z`]],Bz=(e,t)=>{let n=e/2,r=e/7,i=e-r;return[[`M`,-n,0],[`L`,0,-t/2],[`L`,0,t/2],[`Z`],[`M`,i-n,-t/2],[`L`,i+r-n,-t/2],[`L`,i+r-n,t/2],[`L`,i-n,t/2],[`Z`]]},Vz=(e,t)=>[[`M`,e/2,-t/2],[`L`,-e/2,0],[`L`,e/2,0],[`L`,-e/2,0],[`L`,e/2,t/2]];var Hz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Uz=class e extends dL{constructor(t){super(PI({style:e.defaultStyleProps},t)),this.type=`edge`}get sourceNode(){let{sourceNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}get targetNode(){let{targetNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}getKeyStyle(e){let t=this.getGraphicStyle(e),{loop:n}=t,r=Hz(t,[`loop`]),{sourceNode:i,targetNode:a}=this,o={d:n&&hB(i,a)?this.getLoopPath(e):this.getKeyPath(e)};return Wj.PARSED_STYLE_LIST.forEach(e=>{e in r&&(o[e]=r[e])}),o}getLoopPath(e){let{sourcePort:t,targetPort:n}=e,r=this.sourceNode,i=lP(r),a=Math.max(oP(i),sP(i)),{placement:o,clockwise:s,dist:c=a}=OI(this.getGraphicStyle(e),`loop`);return Dz(r,o,s,c,t,n)}getEndpoints(e,t=!0,n=[]){let{sourcePort:r,targetPort:i}=e,{sourceNode:a,targetNode:o}=this,[s,c]=xB(a,o,r,i);if(!t){let e=s?bB(s):a.getCenter(),t=c?bB(c):o.getCenter();return[e,t]}let l=typeof n==`function`?n():n,u=wB(s||a,l[0]||c||o),d=wB(c||o,l[l.length-1]||s||a);return[u,d]}getHaloStyle(e){if(e.halo===!1)return!1;let t=this.getKeyStyle(e),n=OI(this.getGraphicStyle(e),`halo`);return Object.assign(Object.assign({},t),n)}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;let t=OI(this.getGraphicStyle(e),`label`),{placement:n,offsetX:r,offsetY:i,autoRotate:a,maxWidth:o}=t,s=Hz(t,[`placement`,`offsetX`,`offsetY`,`autoRotate`,`maxWidth`]),c=hz(this.shapeMap.key,n,a,r,i),l=this.shapeMap.key.getLocalBounds(),u=HI([l.min,l.max],o);return Object.assign({wordWrapWidth:u},c,s)}getBadgeStyle(e){if(e.badge===!1||!e.badgeText)return!1;let t=OI(e,`badge`),{offsetX:n,offsetY:r,placement:i}=t,a=Hz(t,[`offsetX`,`offsetY`,`placement`]);return Object.assign(a,gz(this.shapeMap,i,e.labelPlacement,n,r))}drawArrow(e,t){var n;let r=t===`start`,i=e[t===`start`?`startArrow`:`endArrow`],a=this.shapeMap.key;if(i){let t=this.getArrowStyle(e,r),[n,i,o]=r?[`markerStart`,`markerStartOffset`,`startArrowOffset`]:[`markerEnd`,`markerEndOffset`,`endArrowOffset`],s=a.parsedStyle[n];if(s)s.attr(t);else{let e=new(t.src?Bj:Wj)({style:t});a.style[n]=e}a.style[i]=e[o]||t.width/2+ +t.lineWidth}else{let e=r?`markerStart`:`markerEnd`;(n=a.style[e])==null||n.destroy(),a.style[e]=null}}getArrowStyle(e,t){let n=this.getShape(`key`).attributes,r=t?`startArrow`:`endArrow`,i=OI(this.getGraphicStyle(e),r),{size:a,type:o}=i,s=Hz(i,[`size`,`type`]),[c,l]=jI(Nz(n.lineWidth,a)),u=(rS(o)?o:Pz[o]||Iz)(c,l);return Object.assign(lC(n,[`stroke`,`strokeOpacity`,`fillOpacity`]),{width:c,height:l},Object.assign({},u&&{d:u,fill:o===`simple`?``:n.stroke}),s)}drawLabelShape(e,t){let n=this.getLabelStyle(e);this.upsert(`label`,qI,n,t)}drawHaloShape(e,t){let n=this.getHaloStyle(e);this.upsert(`halo`,Wj,n,t)}drawBadgeShape(e,t){let n=this.getBadgeStyle(e);this.upsert(`badge`,JI,n,t)}drawSourceArrow(e){this.drawArrow(e,`start`)}drawTargetArrow(e){this.drawArrow(e,`end`)}drawKeyShape(e,t){let n=this.getKeyStyle(e);return this.upsert(`key`,Wj,n,t)}render(e=this.parsedAttributes,t=this){this.drawKeyShape(e,t),this.getShape(`key`)&&(this.drawSourceArrow(e),this.drawTargetArrow(e),this.drawLabelShape(e,t),this.drawHaloShape(e,t),this.drawBadgeShape(e,t))}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}animate(e,t){let n=super.animate(e,t);return n&&new Proxy(n,{set:(e,t,n)=>(t===`currentTime`&&Promise.resolve().then(()=>this.onframe()),Reflect.set(e,t,n))})}};Uz.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:`suffix`,isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:`80%`,labelOffsetX:4,labelOffsetY:0,labelPlacement:`center`,labelTextBaseline:`middle`,labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:`none`,haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:`round`,startArrowLineWidth:1,startArrowTransformOrigin:`center`,startArrowType:`vee`,endArrow:!1,endArrowLineDash:0,endArrowLineJoin:`round`,endArrowLineWidth:1,endArrowTransformOrigin:`center`,endArrowType:`vee`,loopPlacement:`top`,loopClockwise:!0};var Wz=class e extends Uz{constructor(t){super(PI({style:e.defaultStyleProps},t))}getKeyPath(e){let[t,n]=this.getEndpoints(e),{controlPoints:r,curvePosition:i,curveOffset:a}=e,o=this.getControlPoints(t,n,bz(i),yz(a),r);return Sz(t,n,o)}getControlPoints(e,t,n,r,i){return i?.length===2?i:[vz(e,t,n[0],r[0]),vz(e,t,n[1],r[1])]}};Wz.defaultStyleProps={curvePosition:.5,curveOffset:20};var Gz=class e extends Wz{constructor(t){super(PI({style:e.defaultStyleProps},t))}getControlPoints(e,t,n,r){let i=t[0]-e[0];return[[e[0]+i*n[0]+r[0],e[1]],[t[0]-i*n[1]+r[1],t[1]]]}};Gz.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};var Kz=class e extends Wz{constructor(t){super(PI({style:e.defaultStyleProps},t))}get ref(){return this.context.model.getRootsData()[0]}getEndpoints(e){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(e);let t=BF(this.ref),n=this.sourceNode.getIntersectPoint(t,!0),r=this.targetNode.getIntersectPoint(t);return[n,r]}toRadialCoordinate(e){let t=BF(this.ref),n=OF(e,t),r=IF(SF(e,t));return[n,r]}getControlPoints(e,t,n,r){let[i,a]=this.toRadialCoordinate(e),[o]=this.toRadialCoordinate(t),s=o-i;return[[e[0]+(s*n[0]+r[0])*Math.cos(a),e[1]+(s*n[0]+r[0])*Math.sin(a)],[t[0]-(s*n[1]-r[0])*Math.cos(a),t[1]-(s*n[1]-r[0])*Math.sin(a)]]}};Kz.defaultStyleProps={curvePosition:.5,curveOffset:20};var qz=class e extends Wz{constructor(t){super(PI({style:e.defaultStyleProps},t))}getControlPoints(e,t,n,r){let i=t[1]-e[1];return[[e[0],e[1]+i*n[0]+r[0]],[t[0],t[1]-i*n[1]+r[1]]]}};qz.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};var Jz=class e extends Uz{constructor(t){super(PI({style:e.defaultStyleProps},t))}getKeyPath(e){let[t,n]=this.getEndpoints(e);return[[`M`,t[0],t[1]],[`L`,n[0],n[1]]]}};Jz.defaultStyleProps={};var Yz={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:[`top`,`right`,`bottom`,`left`],endDirections:[`top`,`right`,`bottom`,`left`],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:kF},Xz=e=>`${Math.round(e[0])}|||${Math.round(e[1])}`;function Zz(e,t){let n=e=>Math.round(e/t);return K(e)?n(e):e.map(n)}function Qz(e,t){let n=Math.abs(e-t);return n>Math.PI?2*Math.PI-n:n}function $z(e,t){let n=t[0]-e[0],r=t[1]-e[1];return!n&&!r?0:Math.atan2(r,n)}function eB(e,t,n,r){let i=$z(e,t),a=n[Xz(e)],o=$z(a||r,e);return Qz(o,i)}var tB=(e,t)=>{let{offset:n,gridSize:r}=t,i={};return e.forEach(e=>{if(!e||e.destroyed||!e.isVisible())return;let t=dP(e.getRenderBounds(),n);for(let e=Zz(t.min[0],r);e<=Zz(t.max[0],r);e+=1)for(let n=Zz(t.min[1],r);n<=Zz(t.max[1],r);n+=1)i[`${e}|||${n}`]=!0}),i};function nB(e,t,n){return Math.min(...t.map(t=>n(e,t)))}function rB(e,t,n){let r=e[0],i=n(e[0],t);for(let a=0;a<e.length;a++){let o=e[a],s=n(o,t);s<i&&(r=o,i=s)}return r}var iB=(e,t,n,r)=>{if(!t)return[e];let{directionMap:i,offset:a}=r,o=dP(t.getRenderBounds(),a),s=Object.keys(i).reduce((t,r)=>{if(n.includes(r)){let n=i[r],[a,s]=cP(o),c=[e[0]+n.stepX*a,e[1]+n.stepY*s],l=SP(o);for(let n=0;n<l.length;n++){let r=RF([e,c],l[n]);r&&hP(r,o)&&t.push(r)}}return t},[]);return mP(e,o)||s.push(e),s.map(e=>Zz(e,r.gridSize))},aB=(e,t,n,r,i,a,o)=>{let s=[],c=[a[0]===r[0]?r[0]:e[0]*o,a[1]===r[1]?r[1]:e[1]*o];s.unshift(c);let l=e,u=t[Xz(l)];for(;u;){let e=u,r=l;eB(e,r,t,n)&&(c=[e[0]===r[0]?c[0]:e[0]*o,e[1]===r[1]?c[1]:e[1]*o],s.unshift(c)),u=t[Xz(e)],l=e}let d=i.map(e=>[e[0]*o,e[1]*o]),f=rB(d,c,kF);return s.unshift(f),s};function oB(e,t,n,r){let i=PF(e.getCenter()),a=PF(t.getCenter()),o=Object.assign(Yz,r),{gridSize:s}=o,c=o.enableObstacleAvoidance?n:[e,t],l=tB(c,o),u=Zz(i,s),d=Zz(a,s),f=iB(i,e,o.startDirections,o),p=iB(a,t,o.endDirections,o);f.forEach(e=>delete l[Xz(e)]),p.forEach(e=>delete l[Xz(e)]);let m={},h={},g={},_={},v={},y=new sB;for(let e=0;e<f.length;e++){let t=f[e],n=Xz(t);m[n]=t,_[n]=0,v[n]=nB(t,p,o.distFunc),y.add({id:n,value:v[n]})}let b=p.map(e=>Xz(e)),x=o.maximumLoops,S,C=1/0;for(let[e,t]of Object.entries(m))v[e]<=C&&(C=v[e],S=t);for(;Object.keys(m).length>0&&x>0;){let e=y.minId(!1);if(e)S=m[e];else break;let t=Xz(S);if(b.includes(t))return aB(S,g,u,a,f,d,s);delete m[t],y.remove(t),h[t]=!0;for(let e of Object.values(o.directionMap)){let n=xF(S,[e.stepX,e.stepY]),r=Xz(n);if(h[r])continue;let i=eB(S,n,g,u);if(i>o.maxAllowedDirectionChange||l[r])continue;m[r]||(m[r]=n);let a=o.penalties[i],c=o.distFunc(S,n)+(isNaN(a)?s:a),d=_[t]+c,f=_[r];if(f&&d>=f)continue;g[r]=S,_[r]=d,v[r]=d+nB(n,p,o.distFunc),y.add({id:r,value:v[r]})}--x}return[]}var sB=class{constructor(){this.arr=[],this.map={},this.arr=[],this.map={}}_innerAdd(e,t){let n=0,r=t-1;for(;r-n>1;){let t=Math.floor((n+r)/2);if(this.arr[t].value>e.value)r=t;else if(this.arr[t].value<e.value)n=t;else{this.arr.splice(t,0,e),this.map[e.id]=!0;return}}this.arr.splice(r,0,e),this.map[e.id]=!0}add(e){delete this.map[e.id];let t=this.arr.length;if(!t||this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)}remove(e){this.map[e]&&delete this.map[e]}_clearAndGetMinId(){let e;for(let t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e}_findFirstId(){for(;this.arr.length;){let e=this.arr.shift();if(this.map[e.id])return e.id}}minId(e){return e?this._clearAndGetMinId():this._findFirstId()}},cB=class e extends Uz{constructor(t){super(PI({style:e.defaultStyleProps},t))}getControlPoints(e){let{router:t}=e,{sourceNode:n,targetNode:r}=this,[i,a]=this.getEndpoints(e,!1),o=[];if(!t)o=e.controlPoints;else if(t.type===`shortest-path`){let s=this.context.element.getNodes();o=oB(n,r,s,t),o.length||(o=iz(i,a,n,r,e.controlPoints,{padding:t.offset}))}else t.type===`orth`&&(o=iz(i,a,n,r,e.controlPoints,t));return o}getPoints(e){let t=this.getControlPoints(e),[n,r]=this.getEndpoints(e,!0,t);return[n,...t,r]}getKeyPath(e){let t=this.getPoints(e);return Cz(t,e.radius)}getLoopPath(e){let{sourcePort:t,targetPort:n,radius:r}=e,i=this.sourceNode,a=lP(i),o=Math.max(oP(a),sP(a))/4,{placement:s,clockwise:c,dist:l=o}=OI(this.getGraphicStyle(e),`loop`);return kz(i,r,s,c,l,t,n)}};cB.defaultStyleProps={radius:0,controlPoints:[],router:!1};var lB=class e extends Uz{constructor(t){super(PI({style:e.defaultStyleProps},t))}getKeyPath(e){let{curvePosition:t,curveOffset:n}=e,[r,i]=this.getEndpoints(e),a=e.controlPoint||vz(r,i,t,n);return xz(r,i,a)}};lB.defaultStyleProps={curvePosition:.5,curveOffset:30};var uB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function dB(e){return e instanceof pL&&e.type===`node`}function fB(e){return e instanceof Uz}function pB(e){return e instanceof ez}function mB(e){return dB(e)||fB(e)||pB(e)}function hB(e,t){return!e||!t?!1:e===t}var gB={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function _B(e,t,n=gB,r=!0){let i=[.5,.5],a=_S(t)?oC(n,t.toLocaleLowerCase(),i):t;if(!r&&_S(t))return a;let[o,s]=a||i;return[e.min[0]+oP(e)*o,e.min[1]+sP(e)*s]}function vB(e){if(!e)return{};let t=e.getPorts();return(e.attributes.ports||[]).forEach((n,r)=>{var i;let{key:a,placement:o}=n;yB(n)&&(t[i=a||r]||(t[i]=UF(e.getShape(`key`).getBounds(),o)))}),t}function yB(e){let{r:t}=e;return!t||Number(t)===0}function bB(e){return nP(e)?e:e.getPosition()}function xB(e,t,n,r){let i=SB(e,t,n,r),a=SB(t,e,r,n);return[i,a]}function SB(e,t,n,r){let i=vB(e);if(n)return i[n];let a=Object.values(i);if(a.length===0)return;let o=a.map(e=>bB(e)),s=CB(t,r),[c]=rI(o,s);return a.find(e=>bB(e)===c)}function CB(e,t){let n=vB(e);if(t)return[bB(n[t])];let r=Object.values(n);return r.length>0?r.map(e=>bB(e)):[e.getCenter()]}function wB(e,t){return pB(e)||dB(e)?EB(e,t):TB(e,t)}function TB(e,t){if(!e||!t)return[0,0,0];if(nP(e))return e;if(e.attributes.linkToCenter)return e.getPosition();let n=nP(t)?t:dB(t)?t.getCenter():t.getPosition();return nI(n,e.getBounds())}function EB(e,t){if(!e||!t)return[0,0,0];let n=nP(t)?t:dB(t)?t.getCenter():t.getPosition();return e.getIntersectPoint(n)||e.getCenter()}function DB(e,t=`bottom`,n=0,r=0,i=!1){let a=t.split(`-`),[o,s]=UF(e,t),[c,l]=i?[`bottom`,`top`]:[`top`,`bottom`],u=a.includes(`top`)?l:a.includes(`bottom`)?c:`middle`,d=a.includes(`left`)?`right`:a.includes(`right`)?`left`:`center`;return{transform:[[`translate`,o+n,s+r]],textBaseline:u,textAlign:d}}function OB(e,t){return[[0,-e],[t*Math.cos(3*Math.PI/10),-t*Math.sin(3*Math.PI/10)],[e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],[t*Math.cos(Math.PI/10),t*Math.sin(Math.PI/10)],[e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],[0,t],[-e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],[-t*Math.cos(Math.PI/10),t*Math.sin(Math.PI/10)],[-e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],[-t*Math.cos(3*Math.PI/10),-t*Math.sin(3*Math.PI/10)]]}function kB(e,t){let n={};return n.top=[0,-e],n.left=[-e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],n[`left-bottom`]=[-e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],n.bottom=[0,t],n[`right-bottom`]=[e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],n.right=n.default=[e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],n}function AB(e,t,n){let r=t/2,i=e/2,a={up:[[-i,r],[i,r],[0,-r]],left:[[-i,0],[i,r],[i,-r]],right:[[-i,r],[-i,-r],[i,0]],down:[[-i,-r],[i,-r],[0,r]]};return a[n]||a.up}function jB(e,t,n){let r=t/2,i=e/2,a={};return n===`down`?(a.bottom=a.default=[0,r],a.right=[i,-r],a.left=[-i,-r]):n===`left`?(a.top=[i,-r],a.bottom=[i,r],a.left=a.default=[-i,0]):n===`right`?(a.top=[-i,-r],a.bottom=[-i,r],a.right=a.default=[i,0]):(a.left=[-i,r],a.top=a.default=[0,-r],a.right=[i,r]),a}function MB(e,t){return[[0,-t/2],[e/2,0],[0,t/2],[-e/2,0]]}function NB(e){return oC(e,[`style`,`visibility`])!==`hidden`}function PB(e,t){let{zIndex:n,transform:r,transformOrigin:i,visibility:a,cursor:o,clipPath:s,component:c}=t,l=uB(t,[`zIndex`,`transform`,`transformOrigin`,`visibility`,`cursor`,`clipPath`,`component`]);Object.assign(e.attributes,l),r&&e.setAttribute(`transform`,r),K(n)&&e.setAttribute(`zIndex`,n),i&&e.setAttribute(`transformOrigin`,i),a&&e.setAttribute(`visibility`,a),o&&e.setAttribute(`cursor`,o),s&&e.setAttribute(`clipPath`,s),c&&e.setAttribute(`component`,c)}function FB(e,t){`update`in e?e.update(t):e.attr(t)}function IB(e){return[[0,e],[e*Math.sqrt(3)/2,e/2],[e*Math.sqrt(3)/2,-e/2],[0,-e],[-e*Math.sqrt(3)/2,-e/2],[-e*Math.sqrt(3)/2,e/2]]}function LB(e){sC(e,`__to_be_destroyed__`,!0)}function RB(e){return oC(e,`__to_be_destroyed__`,!1)}var zB=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},BB=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.onCollapseExpand=e=>zB(this,void 0,void 0,function*(){if(!this.validate(e))return;let{target:t}=e;if(!mB(t))return;let n=t.id,{model:r,graph:i}=this.context,a=r.getElementDataById(n);if(!a)return!1;let{onCollapse:o,onExpand:s,animation:c,align:l}=this.options;wI(a)?(yield i.expandElement(n,{animation:c,align:l}),s?.(n)):(yield i.collapseElement(n,{animation:c,align:l}),o?.(n))}),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){let{graph:e}=this.context,{trigger:t}=this.options;e.on(`node:${t}`,this.onCollapseExpand),e.on(`combo:${t}`,this.onCollapseExpand)}unbindEvents(){let{graph:e}=this.context,{trigger:t}=this.options;e.off(`node:${t}`,this.onCollapseExpand),e.off(`combo:${t}`,this.onCollapseExpand)}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}};BB.defaultOptions={enable:!0,animation:!0,trigger:Z.DBLCLICK,align:!0};var VB=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},HB=`g6-create-edge-assist-edge-id`,UB=`g6-create-edge-assist-node-id`,WB=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.drop=e=>VB(this,void 0,void 0,function*(){let{targetType:t}=e;[`combo`,`node`].includes(t)&&this.source?yield this.handleCreateEdge(e):yield this.cancelEdge()}),this.handleCreateEdge=e=>VB(this,void 0,void 0,function*(){if(!this.validate(e))return;let{graph:t,canvas:n,batch:r,element:i}=this.context,{style:a}=this.options;if(this.source){this.createEdge(e),yield this.cancelEdge();return}r.startBatch(),n.setCursor(`crosshair`),this.source=this.getSelectedNodeIDs([e.target.id])[0];let o=t.getElementData(this.source);t.addNodeData([{id:UB,style:{visibility:`hidden`,ports:[{key:`port-1`,placement:[.5,.5]}],x:o.style?.x,y:o.style?.y}}]),t.addEdgeData([{id:HB,source:this.source,target:UB,style:Object.assign({pointerEvents:`none`},a)}]),yield i.draw({animation:!1})?.finished}),this.updateAssistEdge=e=>VB(this,void 0,void 0,function*(){if(!this.source)return;let{model:t,element:n}=this.context;t.translateNodeTo(UB,[e.canvas.x,e.canvas.y]),yield n.draw({animation:!1,silence:!0})?.finished}),this.createEdge=e=>{let{graph:t}=this.context,{style:n,onFinish:r,onCreate:i}=this.options;if(e.target?.id===void 0||this.source===void 0)return;let a=this.getSelectedNodeIDs([e.target.id])?.[0],o=`${this.source}-${a}-${pC()}`,s=i({id:o,source:this.source,target:a,style:n});s&&(t.addEdgeData([s]),r(s))},this.cancelEdge=()=>VB(this,void 0,void 0,function*(){if(!this.source)return;let{graph:e,element:t,batch:n}=this.context;e.removeNodeData([UB]),this.source=void 0,yield t.draw({animation:!1})?.finished,n.endBatch()}),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){let{graph:e}=this.context,{trigger:t}=this.options;this.unbindEvents(),t===`click`?(e.on(DN.CLICK,this.handleCreateEdge),e.on(CN.CLICK,this.handleCreateEdge),e.on(SN.CLICK,this.cancelEdge),e.on(TN.CLICK,this.cancelEdge)):(e.on(DN.DRAG_START,this.handleCreateEdge),e.on(CN.DRAG_START,this.handleCreateEdge),e.on(Z.POINTER_UP,this.drop)),e.on(Z.POINTER_MOVE,this.updateAssistEdge)}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState(`node`,this.options.state).map(e=>e.id).concat(e)))}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}unbindEvents(){let{graph:e}=this.context;e.off(DN.CLICK,this.handleCreateEdge),e.off(CN.CLICK,this.handleCreateEdge),e.off(SN.CLICK,this.cancelEdge),e.off(TN.CLICK,this.cancelEdge),e.off(DN.DRAG_START,this.handleCreateEdge),e.off(CN.DRAG_START,this.handleCreateEdge),e.off(Z.POINTER_UP,this.drop),e.off(Z.POINTER_MOVE,this.updateAssistEdge)}destroy(){this.unbindEvents(),super.destroy()}};WB.defaultOptions={animation:!0,enable:!0,style:{},trigger:`drag`,onCreate:e=>e,onFinish:()=>{}};var GB=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},KB=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.isDragging=!1,this.onDragStart=e=>{this.validate(e)&&(this.isDragging=!0,this.context.canvas.setCursor(`grabbing`))},this.onDrag=e=>{if(!this.isDragging||uI.isPinching)return;let t=e.movement?.x??e.dx,n=e.movement?.y??e.dy;(t|n)!==0&&this.translate([t,n],!1)},this.onDragEnd=()=>{var e,t;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),(t=(e=this.options).onFinish)==null||t.call(e)},this.invokeOnFinish=qS(()=>{var e,t;(t=(e=this.options).onFinish)==null||t.call(e)},300),this.shortcut=new fI(t.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||`default`}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){let{trigger:e}=this.options;if(oS(e)){let{up:t=[],down:n=[],left:r=[],right:i=[]}=e;this.shortcut.bind(t,e=>this.onTranslate([0,1],e)),this.shortcut.bind(n,e=>this.onTranslate([0,-1],e)),this.shortcut.bind(r,e=>this.onTranslate([1,0],e)),this.shortcut.bind(i,e=>this.onTranslate([-1,0],e))}else{let{graph:e}=this.context;e.on(Z.DRAG_START,this.onDragStart),e.on(Z.DRAG,this.onDrag),e.on(Z.DRAG_END,this.onDragEnd)}}onTranslate(e,t){return GB(this,void 0,void 0,function*(){if(!this.validate(t))return;let{sensitivity:n}=this.options,r=n*-1;yield this.translate(CF(e,r),this.options.animation),this.invokeOnFinish()})}translate(e,t){return GB(this,void 0,void 0,function*(){e=this.clampByDirection(e),e=this.clampByRange(e),e=this.clampByRotation(e),yield this.context.graph.translateBy(e,t)})}clampByRotation([e,t]){let n=this.context.graph.getRotation();if(n%360==0)return[e,t];let r=n*Math.PI/180,i=Math.cos(r),a=Math.sin(r);return[e*i-t*a,e*a+t*i]}clampByDirection([e,t]){let{direction:n}=this.options;return n===`x`?t=0:n===`y`&&(e=0),[e,t]}clampByRange([e,t]){let{viewport:n,canvas:r}=this.context,[i,a]=r.getSize(),[o,s,c,l]=iP(this.options.range),u=[a*o,i*s,a*c,i*l],d=dP(uP(n.getCanvasCenter()),u),f=SF(n.getViewportCenter(),[e,t,0]);if(!mP(f,d)){let{min:[n,r],max:[i,a]}=d;(f[0]<n&&e>0||f[0]>i&&e<0)&&(e=0),(f[1]<r&&t>0||f[1]>a&&t<0)&&(t=0)}return[e,t]}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return typeof t==`function`?t(e):!!t}unbindEvents(){this.shortcut.unbindAll();let{graph:e}=this.context;e.off(Z.DRAG_START,this.onDragStart),e.off(Z.DRAG,this.onDrag),e.off(Z.DRAG_END,this.onDragEnd)}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy()}};KB.defaultOptions={enable:e=>`targetType`in e?e.targetType===`canvas`:!0,sensitivity:10,direction:`both`,range:1/0};var qB=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},JB=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.enable=!1,this.enableElements=[`node`,`combo`],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=e=>qB(this,void 0,void 0,function*(){if(this.options.dropEffect!==`link`)return;let{model:t,element:n}=this.context,r=e.target.id;this.target.forEach(e=>{let n=t.getParentData(e,ON);n&&$(n)===r&&t.refreshComboData(r),t.setParent(e,r,ON)}),yield n?.draw({animation:!0})?.finished}),this.setCursor=e=>{if(this.isDragging)return;let{type:t}=e,{canvas:n}=this.context,{cursor:r}=this.options;t===Z.POINTER_ENTER?n.setCursor(r?.grab||`grab`):n.setCursor(r?.default||`default`)},this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){let{graph:e,canvas:t}=this.context,n=t.getLayer().getContextService().$canvas;n&&(n.addEventListener(`blur`,this.onDragEnd),n.addEventListener(`contextmenu`,this.onDragEnd)),this.enableElements.forEach(t=>{e.on(`${t}:${Z.DRAG_START}`,this.onDragStart),e.on(`${t}:${Z.DRAG}`,this.onDrag),e.on(`${t}:${Z.DRAG_END}`,this.onDragEnd),e.on(`${t}:${Z.POINTER_ENTER}`,this.setCursor),e.on(`${t}:${Z.POINTER_LEAVE}`,this.setCursor)}),[`link`].includes(this.options.dropEffect)&&(e.on(CN.DROP,this.onDrop),e.on(SN.DROP,this.onDrop))}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState(`node`,this.options.state).map(e=>e.id).concat(e)))}getDelta(e){let t=this.context.graph.getZoom();return wF([e.dx,e.dy],t)}onDragStart(e){if(this.enable=this.validate(e),!this.enable)return;let{batch:t,canvas:n,graph:r}=this.context;n.setCursor(this.options.cursor?.grabbing||`grabbing`),this.isDragging=!0,t.startBatch();let i=e.target.id;r.getElementState(i).includes(this.options.state)?this.target=this.getSelectedNodeIDs([i]):this.target=[i],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}onDrag(e){if(!this.enable)return;let t=this.getDelta(e);this.options.shadow?this.moveShadow(t):this.moveElement(this.target,t)}onDragEnd(){var e,t;if(!this.enable)return;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility=`hidden`;let{x:e=0,y:t=0}=this.shadow.attributes,[n,r]=SF([+e,+t],this.shadowOrigin);this.moveElement(this.target,[n,r])}this.showEdges(),(t=(e=this.options).onFinish)==null||t.call(e,this.target);let{batch:n,canvas:r}=this.context;n.endBatch(),r.setCursor(this.options.cursor?.grab||`grab`),this.isDragging=!1,this.target=[]}validate(e){if(this.destroyed||RB(e.target)||this.context.graph.isCollapsingExpanding)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}moveElement(e,t){return qB(this,void 0,void 0,function*(){let{graph:n,model:r}=this.context,{dropEffect:i}=this.options;i===`move`&&e.forEach(e=>r.refreshComboData(e)),n.translateElementBy(Object.fromEntries(e.map(e=>[e,t])),!1)})}moveShadow(e){if(!this.shadow)return;let{x:t=0,y:n=0}=this.shadow.attributes,[r,i]=e;this.shadow.attr({x:+t+r,y:+n+i})}createShadow(e){let t=OI(this.options,`shadow`),n=fP(e.map(e=>this.context.element.getElement(e).getBounds())),[r,i]=n.min;this.shadowOrigin=[r,i];let[a,o]=cP(n),s={width:a,height:o,x:r,y:i};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},t),s),{visibility:`visible`})):(this.shadow=new Yj({style:Object.assign(Object.assign(Object.assign({$layer:`transient`},t),s),{pointerEvents:`none`})}),this.context.canvas.appendChild(this.shadow))}showEdges(){this.options.shadow||this.hiddenEdges.length===0||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}hideEdge(){let{hideEdge:e,shadow:t}=this.options;if(e===`none`||t)return;let{graph:n}=this.context;e===`all`?this.hiddenEdges=n.getEdgeData().map($):this.hiddenEdges=Array.from(new Set(this.target.map(t=>n.getRelatedEdgesData(t,e).map($)).flat())),n.hideElement(this.hiddenEdges)}unbindEvents(){let{graph:e,canvas:t}=this.context,n=t.getLayer().getContextService().$canvas;n&&(n.removeEventListener(`blur`,this.onDragEnd),n.removeEventListener(`contextmenu`,this.onDragEnd)),this.enableElements.forEach(t=>{e.off(`${t}:${Z.DRAG_START}`,this.onDragStart),e.off(`${t}:${Z.DRAG}`,this.onDrag),e.off(`${t}:${Z.DRAG_END}`,this.onDragEnd),e.off(`${t}:${Z.POINTER_ENTER}`,this.setCursor),e.off(`${t}:${Z.POINTER_LEAVE}`,this.setCursor)}),e.off(`combo:${Z.DROP}`,this.onDrop),e.off(`canvas:${Z.DROP}`,this.onDrop)}destroy(){var e;this.unbindEvents(),(e=this.shadow)==null||e.destroy(),super.destroy()}};JB.defaultOptions={animation:!0,enable:e=>[`node`,`combo`].includes(e.targetType),dropEffect:`move`,state:`selected`,hideEdge:`none`,shadow:!1,shadowZIndex:100,shadowFill:`#F3F9FF`,shadowFillOpacity:.5,shadowStroke:`#1890FF`,shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:`default`,grab:`grab`,grabbing:`grabbing`}};var YB=`*`,XB=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],a=this._events[YB]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],s=o.callback;o.once&&(r.splice(a,1),r.length===0&&delete t._events[e],i--,a--),s.apply(t,n)}};o(i),o(a)},e.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);n.length===0&&delete this._events[e]}return this},e.prototype.getEvents=function(){return this._events},e}();function ZB(e,t,n,r){for(;e.length;){let i=e.shift();if(n(i))return!0;t.add(i.id),r(i.id).forEach(n=>{t.has(n.id)||(t.add(n.id),e.push(n))})}return!1}function QB(e,t,n,r){if(n(e))return!0;t.add(e.id);for(let i of r(e.id))if(!t.has(i.id)&&QB(i,t,n,r))return!0;return!1}var $B=()=>!0,eV=class{graph;nodeFilter;edgeFilter;cacheEnabled;inEdgesMap=new Map;outEdgesMap=new Map;bothEdgesMap=new Map;allNodesMap=new Map;allEdgesMap=new Map;constructor(e){this.graph=e.graph;let t=e.nodeFilter||$B,n=e.edgeFilter||$B;this.nodeFilter=t,this.edgeFilter=e=>{let{source:r,target:i}=this.graph.getEdgeDetail(e.id);return!t(r)||!t(i)?!1:n(e,r,i)},e.cache===`auto`?(this.cacheEnabled=!0,this.startAutoCache()):e.cache===`manual`?this.cacheEnabled=!0:this.cacheEnabled=!1}clearCache=()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()};refreshCache=()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(e=>e.id))};updateCache=e=>{let t=new Set;e.forEach(e=>{let n=this.bothEdgesMap.get(e);if(n&&n.forEach(e=>t.add(e.id)),!this.hasNode(e))this.inEdgesMap.delete(e),this.outEdgesMap.delete(e),this.bothEdgesMap.delete(e),this.allNodesMap.delete(e);else{let n=this.graph.getRelatedEdges(e,`in`).filter(this.edgeFilter),r=this.graph.getRelatedEdges(e,`out`).filter(this.edgeFilter),i=Array.from(new Set([...n,...r]));i.forEach(e=>t.add(e.id)),this.inEdgesMap.set(e,n),this.outEdgesMap.set(e,r),this.bothEdgesMap.set(e,i),this.allNodesMap.set(e,this.graph.getNode(e))}}),t.forEach(e=>{this.hasEdge(e)?this.allEdgesMap.set(e,this.graph.getEdge(e)):this.allEdgesMap.delete(e)})};startAutoCache(){this.refreshCache(),this.graph.on(`changed`,this.handleGraphChanged)}stopAutoCache(){this.graph.off(`changed`,this.handleGraphChanged)}handleGraphChanged=e=>{let t=new Set;e.changes.forEach(n=>{switch(n.type){case`NodeAdded`:t.add(n.value.id);break;case`NodeDataUpdated`:t.add(n.id);break;case`EdgeAdded`:t.add(n.value.source),t.add(n.value.target);break;case`EdgeUpdated`:(n.propertyName===`source`||n.propertyName===`target`)&&(t.add(n.oldValue),t.add(n.newValue));break;case`EdgeDataUpdated`:if(e.graph.hasEdge(n.id)){let r=e.graph.getEdge(n.id);t.add(r.source),t.add(r.target)}break;case`EdgeRemoved`:t.add(n.value.source),t.add(n.value.target);break;case`NodeRemoved`:t.add(n.value.id);break;default:break}}),this.updateCache(t)};checkNodeExistence(e){this.getNode(e)}hasNode(e){if(!this.graph.hasNode(e))return!1;let t=this.graph.getNode(e);return this.nodeFilter(t)}areNeighbors(e,t){return this.checkNodeExistence(e),this.getNeighbors(t).some(t=>t.id===e)}getNode(e){let t=this.graph.getNode(e);if(!this.nodeFilter(t))throw Error(`Node not found for id: `+e);return t}getRelatedEdges(e,t){return this.checkNodeExistence(e),this.cacheEnabled?t===`in`?this.inEdgesMap.get(e):t===`out`?this.outEdgesMap.get(e):this.bothEdgesMap.get(e):this.graph.getRelatedEdges(e,t).filter(this.edgeFilter)}getDegree(e,t){return this.getRelatedEdges(e,t).length}getSuccessors(e){let t=this.getRelatedEdges(e,`out`).map(e=>this.getNode(e.target));return Array.from(new Set(t))}getPredecessors(e){let t=this.getRelatedEdges(e,`in`).map(e=>this.getNode(e.source));return Array.from(new Set(t))}getNeighbors(e){let t=this.getPredecessors(e),n=this.getSuccessors(e);return Array.from(new Set([...t,...n]))}hasEdge(e){if(!this.graph.hasEdge(e))return!1;let t=this.graph.getEdge(e);return this.edgeFilter(t)}getEdge(e){let t=this.graph.getEdge(e);if(!this.edgeFilter(t))throw Error(`Edge not found for id: `+e);return t}getEdgeDetail(e){let t=this.getEdge(e);return{edge:t,source:this.getNode(t.source),target:this.getNode(t.target)}}hasTreeStructure(e){return this.graph.hasTreeStructure(e)}getRoots(e){return this.graph.getRoots(e).filter(this.nodeFilter)}getChildren(e,t){return this.checkNodeExistence(e),this.graph.getChildren(e,t).filter(this.nodeFilter)}getParent(e,t){this.checkNodeExistence(e);let n=this.graph.getParent(e,t);return!n||!this.nodeFilter(n)?null:n}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(e,t,n=`out`){let r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];ZB([this.getNode(e)],new Set,t,r)}dfs(e,t,n=`out`){let r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];QB(this.getNode(e),new Set,t,r)}},tV=class e extends XB{nodeMap=new Map;edgeMap=new Map;inEdgesMap=new Map;outEdgesMap=new Map;bothEdgesMap=new Map;treeIndices=new Map;changes=[];batchCount=0;onChanged=()=>{};constructor(e){super(),e&&(e.nodes&&this.addNodes(e.nodes),e.edges&&this.addEdges(e.edges),e.tree&&this.addTree(e.tree),e.onChanged&&(this.onChanged=e.onChanged))}batch=e=>{this.batchCount+=1,e(),--this.batchCount,this.batchCount||this.commit()};commit(){let e=this.changes;this.changes=[];let t={graph:this,changes:e};this.emit(`changed`,t),this.onChanged(t)}reduceChanges(e){let t=[];return e.forEach(e=>{switch(e.type){case`NodeRemoved`:{let n=!1;t=t.filter(t=>{if(t.type===`NodeAdded`){let r=t.value.id===e.value.id;return r&&(n=!0),!r}else if(t.type===`NodeDataUpdated`)return t.id!==e.value.id;else if(t.type===`TreeStructureChanged`)return t.nodeId!==e.value.id;return!0}),n||t.push(e);break}case`EdgeRemoved`:{let n=!1;t=t.filter(t=>{if(t.type===`EdgeAdded`){let r=t.value.id===e.value.id;return r&&(n=!0),!r}else if(t.type===`EdgeDataUpdated`||t.type===`EdgeUpdated`)return t.id!==e.value.id;return!0}),n||t.push(e);break}case`NodeDataUpdated`:case`EdgeDataUpdated`:case`EdgeUpdated`:{let n=t.findIndex(t=>t.type===e.type&&t.id===e.id&&(e.propertyName===void 0||t.propertyName===e.propertyName)),r=t[n];r?e.propertyName===void 0?(t.splice(n,1),t.push(e)):r.newValue=e.newValue:t.push(e);break}case`TreeStructureDetached`:t=t.filter(t=>t.type===`TreeStructureAttached`||t.type===`TreeStructureChanged`?t.treeKey!==e.treeKey:!0),t.push(e);break;case`TreeStructureChanged`:{let n=t.find(t=>t.type===`TreeStructureChanged`&&t.treeKey===e.treeKey&&t.nodeId===e.nodeId);n?n.newParentId=e.newParentId:t.push(e);break}default:t.push(e);break}}),t}checkNodeExistence(e){this.getNode(e)}hasNode(e){return this.nodeMap.has(e)}areNeighbors(e,t){return this.getNeighbors(t).some(t=>t.id===e)}getNode(e){let t=this.nodeMap.get(e);if(!t)throw Error(`Node not found for id: `+e);return t}getRelatedEdges(e,t){if(this.checkNodeExistence(e),t===`in`){let t=this.inEdgesMap.get(e);return Array.from(t)}else if(t===`out`){let t=this.outEdgesMap.get(e);return Array.from(t)}else{let t=this.bothEdgesMap.get(e);return Array.from(t)}}getDegree(e,t){return this.getRelatedEdges(e,t).length}getSuccessors(e){let t=this.getRelatedEdges(e,`out`).map(e=>this.getNode(e.target));return Array.from(new Set(t))}getPredecessors(e){let t=this.getRelatedEdges(e,`in`).map(e=>this.getNode(e.source));return Array.from(new Set(t))}getNeighbors(e){let t=this.getPredecessors(e),n=this.getSuccessors(e);return Array.from(new Set([...t,...n]))}doAddNode(e){if(this.hasNode(e.id))throw Error(`Node already exists: `+e.id);this.nodeMap.set(e.id,e),this.inEdgesMap.set(e.id,new Set),this.outEdgesMap.set(e.id,new Set),this.bothEdgesMap.set(e.id,new Set),this.treeIndices.forEach(t=>{t.childrenMap.set(e.id,new Set)}),this.changes.push({type:`NodeAdded`,value:e})}addNodes(e){this.batch(()=>{for(let t of e)this.doAddNode(t)})}addNode(e){this.addNodes([e])}doRemoveNode(e){let t=this.getNode(e);this.bothEdgesMap.get(e)?.forEach(e=>this.doRemoveEdge(e.id)),this.nodeMap.delete(e),this.treeIndices.forEach(n=>{n.childrenMap.get(e)?.forEach(e=>{n.parentMap.delete(e.id)});let r=n.parentMap.get(e);r&&n.childrenMap.get(r.id)?.delete(t),n.parentMap.delete(e),n.childrenMap.delete(e)}),this.bothEdgesMap.delete(e),this.inEdgesMap.delete(e),this.outEdgesMap.delete(e),this.changes.push({type:`NodeRemoved`,value:t})}removeNodes(e){this.batch(()=>{e.forEach(e=>this.doRemoveNode(e))})}removeNode(e){this.removeNodes([e])}updateNodeDataProperty(e,t,n){let r=this.getNode(e);this.batch(()=>{let i=r.data[t],a=n;r.data[t]=a,this.changes.push({type:`NodeDataUpdated`,id:e,propertyName:t,oldValue:i,newValue:a})})}mergeNodeData(e,t){this.batch(()=>{Object.entries(t).forEach(([t,n])=>{this.updateNodeDataProperty(e,t,n)})})}updateNodeData(...e){let t=e[0],n=this.getNode(t);if(typeof e[1]==`string`){this.updateNodeDataProperty(t,e[1],e[2]);return}let r;if(typeof e[1]==`function`){let t=e[1];r=t(n.data)}else typeof e[1]==`object`&&(r=e[1]);this.batch(()=>{let e=n.data,i=r;n.data=r,this.changes.push({type:`NodeDataUpdated`,id:t,oldValue:e,newValue:i})})}checkEdgeExistence(e){if(!this.hasEdge(e))throw Error(`Edge not found for id: `+e)}hasEdge(e){return this.edgeMap.has(e)}getEdge(e){return this.checkEdgeExistence(e),this.edgeMap.get(e)}getEdgeDetail(e){let t=this.getEdge(e);return{edge:t,source:this.getNode(t.source),target:this.getNode(t.target)}}doAddEdge(e){if(this.hasEdge(e.id))throw Error(`Edge already exists: `+e.id);this.checkNodeExistence(e.source),this.checkNodeExistence(e.target),this.edgeMap.set(e.id,e);let t=this.inEdgesMap.get(e.target),n=this.outEdgesMap.get(e.source),r=this.bothEdgesMap.get(e.source),i=this.bothEdgesMap.get(e.target);t.add(e),n.add(e),r.add(e),i.add(e),this.changes.push({type:`EdgeAdded`,value:e})}addEdges(e){this.batch(()=>{for(let t of e)this.doAddEdge(t)})}addEdge(e){this.addEdges([e])}doRemoveEdge(e){let t=this.getEdge(e),n=this.outEdgesMap.get(t.source),r=this.inEdgesMap.get(t.target),i=this.bothEdgesMap.get(t.source),a=this.bothEdgesMap.get(t.target);n.delete(t),r.delete(t),i.delete(t),a.delete(t),this.edgeMap.delete(e),this.changes.push({type:`EdgeRemoved`,value:t})}removeEdges(e){this.batch(()=>{e.forEach(e=>this.doRemoveEdge(e))})}removeEdge(e){this.removeEdges([e])}updateEdgeSource(e,t){let n=this.getEdge(e);this.checkNodeExistence(t);let r=n.source,i=t;this.outEdgesMap.get(r).delete(n),this.bothEdgesMap.get(r).delete(n),this.outEdgesMap.get(i).add(n),this.bothEdgesMap.get(i).add(n),n.source=t,this.batch(()=>{this.changes.push({type:`EdgeUpdated`,id:e,propertyName:`source`,oldValue:r,newValue:i})})}updateEdgeTarget(e,t){let n=this.getEdge(e);this.checkNodeExistence(t);let r=n.target,i=t;this.inEdgesMap.get(r).delete(n),this.bothEdgesMap.get(r).delete(n),this.inEdgesMap.get(i).add(n),this.bothEdgesMap.get(i).add(n),n.target=t,this.batch(()=>{this.changes.push({type:`EdgeUpdated`,id:e,propertyName:`target`,oldValue:r,newValue:i})})}updateEdgeDataProperty(e,t,n){let r=this.getEdge(e);this.batch(()=>{let i=r.data[t],a=n;r.data[t]=a,this.changes.push({type:`EdgeDataUpdated`,id:e,propertyName:t,oldValue:i,newValue:a})})}updateEdgeData(...e){let t=e[0],n=this.getEdge(t);if(typeof e[1]==`string`){this.updateEdgeDataProperty(t,e[1],e[2]);return}let r;if(typeof e[1]==`function`){let t=e[1];r=t(n.data)}else typeof e[1]==`object`&&(r=e[1]);this.batch(()=>{let e=n.data,i=r;n.data=r,this.changes.push({type:`EdgeDataUpdated`,id:t,oldValue:e,newValue:i})})}mergeEdgeData(e,t){this.batch(()=>{Object.entries(t).forEach(([t,n])=>{this.updateEdgeDataProperty(e,t,n)})})}checkTreeExistence(e){if(!this.hasTreeStructure(e))throw Error(`Tree structure not found for treeKey: `+e)}hasTreeStructure(e){return this.treeIndices.has(e)}attachTreeStructure(e){this.treeIndices.has(e)||(this.treeIndices.set(e,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:`TreeStructureAttached`,treeKey:e})}))}detachTreeStructure(e){this.checkTreeExistence(e),this.treeIndices.delete(e),this.batch(()=>{this.changes.push({type:`TreeStructureDetached`,treeKey:e})})}addTree(e,t){this.batch(()=>{this.attachTreeStructure(t);let n=[],r=Array.isArray(e)?e:[e];for(;r.length;){let e=r.shift();n.push(e),e.children&&r.push(...e.children)}this.addNodes(n),n.forEach(e=>{e.children?.forEach(n=>{this.setParent(n.id,e.id,t)})})})}getRoots(e){return this.checkTreeExistence(e),this.getAllNodes().filter(t=>!this.getParent(t.id,e))}getChildren(e,t){this.checkNodeExistence(e),this.checkTreeExistence(t);let n=this.treeIndices.get(t).childrenMap.get(e);return Array.from(n||[])}getParent(e,t){return this.checkNodeExistence(e),this.checkTreeExistence(t),this.treeIndices.get(t).parentMap.get(e)||null}getAncestors(e,t){let n=[],r=this.getNode(e),i;for(;i=this.getParent(r.id,t);)n.push(i),r=i;return n}setParent(e,t,n){this.checkTreeExistence(n);let r=this.treeIndices.get(n);if(!r)return;let i=this.getNode(e),a=r.parentMap.get(e);if(a?.id===t)return;if(t==null){a&&r.childrenMap.get(a.id)?.delete(i),r.parentMap.delete(e);return}let o=this.getNode(t);r.parentMap.set(e,o),a&&r.childrenMap.get(a.id)?.delete(i);let s=r.childrenMap.get(o.id);s||(s=new Set,r.childrenMap.set(o.id,s)),s.add(i),this.batch(()=>{this.changes.push({type:`TreeStructureChanged`,treeKey:n,nodeId:e,oldParentId:a?.id,newParentId:o.id})})}dfsTree(e,t,n){return QB(this.getNode(e),new Set,t,e=>this.getChildren(e,n))}bfsTree(e,t,n){return ZB([this.getNode(e)],new Set,t,e=>this.getChildren(e,n))}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(e,t,n=`out`){let r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return ZB([this.getNode(e)],new Set,t,r)}dfs(e,t,n=`out`){let r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return QB(this.getNode(e),new Set,t,r)}clone(){let t=this.getAllNodes().map(e=>({...e,data:{...e.data}})),n=this.getAllEdges().map(e=>({...e,data:{...e.data}})),r=new e({nodes:t,edges:n});return this.treeIndices.forEach(({parentMap:e,childrenMap:t},n)=>{let i=new Map;e.forEach((e,t)=>{i.set(t,r.getNode(e.id))});let a=new Map;t.forEach((e,t)=>{a.set(t,new Set(Array.from(e).map(e=>r.getNode(e.id))))}),r.treeIndices.set(n,{parentMap:i,childrenMap:a})}),r}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(e){return new eV({graph:this,...e})}},nV=class{constructor(e,t){this.context=e,this.options=t||{}}},rV=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},iV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function aV(e){let{type:t}=e;return[`compact-box`,`mindmap`,`dendrogram`,`indented`].includes(t)}function oV(e){return!Array.isArray(e)&&e?.preLayout}function sV(e){let{nodes:t,edges:n}=e,r={nodes:[],edges:[],combos:[]};return t.forEach(e=>{let t=e.data._isCombo?r.combos:r.nodes,{x:n,y:i,z:a=0}=e.data;t?.push({id:e.id,style:{x:n,y:i,z:a}})}),n.forEach(e=>{let{id:t,source:n,target:i,data:{points:a=[],controlPoints:o=a.slice(1,a.length-1)}}=e;r.edges.push({id:t,source:n,target:i,style:Object.assign({},o?.length?{controlPoints:o.map(WF)}:{})})}),r}function cV(e,t){class n extends nV{constructor(t,n){if(super(t,n),this.instance=new e({}),this.id=this.instance.id,`stop`in this.instance&&`tick`in this.instance){let e=this.instance;this.stop=e.stop.bind(e),this.tick=t=>{let n=e.tick(t);return sV(n)}}}execute(e,t){return rV(this,void 0,void 0,function*(){return sV(yield this.instance.execute(this.graphData2LayoutModel(e),this.transformOptions(eC({},this.options,t))))})}transformOptions(e){if(!(`onTick`in e))return e;let t=e.onTick;return e.onTick=e=>t(sV(e)),e}graphData2LayoutModel(e){let{nodes:n=[],edges:r=[],combos:i=[]}=e,a=n.map(e=>{let t=$(e),{data:n,style:r,combo:i}=e,a=iV(e,[`data`,`style`,`combo`]),o={id:t,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{data:n}),i?{parentId:i}:{}),{style:r}),a)};return r?.x&&Object.assign(o.data,{x:r.x}),r?.y&&Object.assign(o.data,{y:r.y}),r?.z&&Object.assign(o.data,{z:r.z}),o}),o=new Map(a.map(e=>[e.id,e])),s=r.filter(e=>{let{source:t,target:n}=e;return o.has(t)&&o.has(n)}).map(e=>{let{source:t,target:n,data:r,style:i}=e;return{id:$(e),source:t,target:n,data:Object.assign({},r),style:Object.assign({},i)}}),c=i.map(e=>({id:$(e),data:Object.assign({_isCombo:!0},e.data),style:Object.assign({},e.style)})),l=new tV({nodes:[...a,...c],edges:s});return t.model.model.hasTreeStructure(`combo`)&&(l.attachTreeStructure(ON),a.forEach(e=>{let n=t.model.model.getParent(e.id,ON);n&&l.hasNode(n.id)&&l.setParent(e.id,n.id,ON)})),l}}return n}function lV(e,t,...n){if(t in e)return e[t](...n);if(`instance`in e){let r=e.instance;if(t in r)return r[t](...n)}return null}function uV(e,t){if(t in e)return e[t];if(`instance`in e){let n=e.instance;if(t in n)return n[t]}return null}var dV=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},fV=class extends JB{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(e=>[`d3-force`,`d3-force-3d`].includes(e?.id))}validate(e){return this.context.layout?this.forceLayoutInstance?super.validate(e):(FN.warn(`DragElementForce only works with d3-force or d3-force-3d layout`),!1):!1}moveElement(e,t){return dV(this,void 0,void 0,function*(){let n=this.forceLayoutInstance;this.context.graph.getNodeData(e).forEach((r,i)=>{let{x:a=0,y:o=0}=r.style||{};n&&lV(n,`setFixedPosition`,e[i],[...xF([+a,+o],t)])})})}onDragStart(e){if(this.enable=this.validate(e),!this.enable)return;this.target=this.getSelectedNodeIDs([e.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);let t=this.forceLayoutInstance;t&&uV(t,`simulation`).alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(e=>{let{x:n=0,y:r=0}=e.style||{};t&&lV(t,`setFixedPosition`,$(e),[+n,+r])})}onDrag(e){if(!this.enable)return;let t=this.getDelta(e);this.moveElement(this.target,t)}onDragEnd(){let e=this.forceLayoutInstance;e&&uV(e,`simulation`).alphaTarget(0),!this.options.fixed&&this.context.graph.getNodeData(this.target).forEach(t=>{e&&lV(e,`setFixedPosition`,$(t),[null,null,null])})}},pV=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},mV=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.isZoomEvent=e=>!!(e.data&&`scale`in e.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=e=>pV(this,void 0,void 0,function*(){if(!this.validate(e))return;let{graph:t}=this.context,{state:n,nodeFilter:r,edgeFilter:i,comboFilter:a}=this.options,o=(n?t.getElementDataByState(`node`,n):t.getNodeData()).filter(r),s=(n?t.getElementDataByState(`edge`,n):t.getEdgeData()).filter(i),c=(n?t.getElementDataByState(`combo`,n):t.getComboData()).filter(a),l=this.isZoomEvent(e)?this.zoom=Math.max(.01,Math.min(e.data.scale,10)):this.zoom,u=[...o,...c];u.length>0&&u.forEach(e=>this.fixNodeLike(e,l)),this.updateRelatedEdges(),s.length>0&&s.forEach(e=>this.fixEdge(e,l))}),this.cachedStyles=new Map,this.getOriginalFieldValue=(e,t,n)=>{let r=this.cachedStyles.get(e)||[],i=r.find(e=>e.shape===t)?.style||{};return n in i||(i[n]=t.attributes[n],this.cachedStyles.set(e,[...r.filter(e=>e.shape!==t),{shape:t,style:i}])),i[n]},this.scaleEntireElement=(e,t,n)=>{t.setLocalScale(1/n);let r=this.cachedStyles.get(e)||[];r.push({shape:t}),this.cachedStyles.set(e,r)},this.scaleSpecificShapes=(e,t,n)=>{let r=rL(e);(Array.isArray(n)?n:[n]).forEach(n=>{let{shape:i,fields:a}=n,o=typeof i==`function`?i(r):e.getShape(i);if(o){if(!a){this.scaleEntireElement(e.id,o,t);return}a.forEach(n=>{let r=this.getOriginalFieldValue(e.id,o,n);K(r)&&(o.style[n]=r/t)})}})},this.skipIfExceedViewport=e=>{let{viewport:t}=this.context;return!t?.isInViewport(e.getRenderBounds(),!1,30)},this.fixNodeLike=(e,t)=>{let n=$(e),{element:r,model:i}=this.context,a=r.getElement(n);if(!a||this.skipIfExceedViewport(a))return;i.getRelatedEdgesData(n).forEach(e=>this.relatedEdgeToUpdate.add($(e)));let o=this.options[a.type];if(!o){this.scaleEntireElement(n,a,t);return}this.scaleSpecificShapes(a,t,o)},this.fixEdge=(e,t)=>{let n=$(e),r=this.context.element.getElement(n);if(!r||this.skipIfExceedViewport(r))return;let i=this.options.edge;if(!i){r.style.transformOrigin=`center`,this.scaleEntireElement(n,r,t);return}this.scaleSpecificShapes(r,t,i)},this.updateRelatedEdges=()=>{let{element:e}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(t=>{e.getElement(t)?.update({})}),this.relatedEdgeToUpdate.clear()},this.resetTransform=e=>pV(this,void 0,void 0,function*(){e.data?.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}))}),this.bindEvents()}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(e=>{e.forEach(({shape:e,style:t})=>{if(rC(t))e.setLocalScale(1);else{if(this.options.state)return;Object.entries(t).forEach(([t,n])=>e.style[t]=n)}})});let{graph:e,element:t}=this.context,n=Object.keys(Object.fromEntries(this.cachedStyles)).filter(t=>t&&e.getElementType(t)===`node`);if(n.length>0){let r=new Set;n.forEach(t=>{e.getRelatedEdgesData(t).forEach(e=>r.add($(e)))}),r.forEach(e=>{(t?.getElement(e))?.update({})})}}}bindEvents(){let{graph:e}=this.context;e.on(Q.AFTER_DRAW,this.resetTransform),e.on(Q.AFTER_TRANSFORM,this.fixElementSize)}unbindEvents(){let{graph:e}=this.context;e.off(Q.AFTER_DRAW,this.resetTransform),e.off(Q.AFTER_TRANSFORM,this.fixElementSize)}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}};mV.defaultOptions={enable:e=>e.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:`key`,fields:[`lineWidth`]},{shape:`halo`,fields:[`lineWidth`]},{shape:`label`}],reset:!1};var hV=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},gV=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.focus=e=>hV(this,void 0,void 0,function*(){if(!this.validate(e))return;let{graph:t}=this.context;yield t.focusElement(e.target.id,this.options.animation)}),this.bindEvents()}bindEvents(){let{graph:e}=this.context;this.unbindEvents(),gI.forEach(t=>{e.on(`${t}:${Z.CLICK}`,this.focus)})}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}unbindEvents(){let{graph:e}=this.context;gI.forEach(t=>{e.off(`${t}:${Z.CLICK}`,this.focus)})}destroy(){this.unbindEvents(),super.destroy()}};gV.defaultOptions={animation:{easing:`ease-in`,duration:500},enable:!0};var _V=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.isFrozen=!1,this.toggleFrozen=e=>{this.isFrozen=e.type===`dragstart`},this.hoverElement=e=>{if(!this.validate(e))return;let t=e.type===Z.POINTER_ENTER;this.updateElementsState(e,t);let{onHover:n,onHoverEnd:r}=this.options;t?n?.(e):r?.(e)},this.updateElementsState=(e,t)=>{if(!this.options.state&&!this.options.inactiveState)return;let{graph:n}=this.context,{state:r,animation:i,inactiveState:a}=this.options,o=this.getActiveIds(e),s={};if(r&&Object.assign(s,this.getElementsState(o,r,t)),a){let e=iF(n.getData(),!0).filter(e=>!o.includes(e));Object.assign(s,this.getElementsState(e,a,t))}n.setElementState(s,i)},this.getElementsState=(e,t,n)=>{let{graph:r}=this.context,i={};return e.forEach(e=>{let a=r.getElementState(e);n?i[e]=a.includes(t)?a:[...a,t]:i[e]=a.filter(e=>e!==t)}),i},this.bindEvents()}bindEvents(){let{graph:e}=this.context;this.unbindEvents(),gI.forEach(t=>{e.on(`${t}:${Z.POINTER_ENTER}`,this.hoverElement),e.on(`${t}:${Z.POINTER_LEAVE}`,this.hoverElement)});let t=this.context.canvas.document;t.addEventListener(`${Z.DRAG_START}`,this.toggleFrozen),t.addEventListener(`${Z.DRAG_END}`,this.toggleFrozen)}getActiveIds(e){let{graph:t}=this.context,{degree:n,direction:r}=this.options,i=e.target.id;return n?yI(t,e.targetType,i,typeof n==`function`?n(e):n,r):[i]}validate(e){if(this.destroyed||this.isFrozen||RB(e.target)||this.context.graph.isCollapsingExpanding)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}unbindEvents(){let{graph:e}=this.context;gI.forEach(t=>{e.off(`${t}:${Z.POINTER_ENTER}`,this.hoverElement),e.off(`${t}:${Z.POINTER_LEAVE}`,this.hoverElement)});let t=this.context.canvas.document;t.removeEventListener(`${Z.DRAG_START}`,this.toggleFrozen),t.removeEventListener(`${Z.DRAG_END}`,this.toggleFrozen)}destroy(){this.unbindEvents(),super.destroy()}};_V.defaultOptions={animation:!1,enable:!0,degree:0,direction:`both`,state:`active`,inactiveState:void 0};var vV=class extends pI{onPointerDown(e){if(!super.validate(e)||!super.isKeydown()||this.points)return;let{canvas:t}=this.context;this.pathShape=new Wj({id:`g6-lasso-select`,style:this.options.style}),t.appendChild(this.pathShape),this.points=[mI(e)]}onPointerMove(e){var t;if(!this.points)return;let{immediately:n,mode:r}=this.options;this.points.push(mI(e)),(t=this.pathShape)==null||t.setAttribute(`d`,YI(this.points)),n&&r===`default`&&this.points.length>2&&super.updateElementsStates(this.points)}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return}super.updateElementsStates(this.points),this.clearLasso()}}clearLasso(){var e;(e=this.pathShape)==null||e.remove(),this.pathShape=void 0,this.points=void 0}},yV=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(e,t,n)=>{e.filter(Boolean).forEach(e=>{t===`hidden`&&!e.isVisible()?this.hiddenShapes.push(e):t===`visible`&&this.hiddenShapes.includes(e)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(e),1):mF(e,t,n)})},this.filterShapes=(e,t)=>{if(rS(t))return n=>!t(e,n);let n=t?.[e];return e=>e.className?!n?.includes(e.className):!0},this.hideShapes=e=>{if(!this.validate(e)||!this.isVisible)return;let{element:t}=this.context,{shapes:n={}}=this.options;this.setElementsVisibility(t.getNodes(),`hidden`,this.filterShapes(`node`,n)),this.setElementsVisibility(t.getEdges(),`hidden`,this.filterShapes(`edge`,n)),this.setElementsVisibility(t.getCombos(),`hidden`,this.filterShapes(`combo`,n)),this.isVisible=!1},this.showShapes=qS(e=>{if(!this.validate(e)||this.isVisible)return;let{element:t}=this.context;this.setElementsVisibility(t.getNodes(),`visible`),this.setElementsVisibility(t.getEdges(),`visible`),this.setElementsVisibility(t.getCombos(),`visible`),this.isVisible=!0},this.options.debounce),this.bindEvents()}bindEvents(){let{graph:e}=this.context;e.on(Q.BEFORE_TRANSFORM,this.hideShapes),e.on(Q.AFTER_TRANSFORM,this.showShapes)}unbindEvents(){let{graph:e}=this.context;e.off(Q.BEFORE_TRANSFORM,this.hideShapes),e.off(Q.AFTER_TRANSFORM,this.showShapes)}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}};yV.defaultOptions={enable:!0,debounce:200,shapes:e=>e===`node`};var bV=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},xV=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.onWheel=e=>bV(this,void 0,void 0,function*(){this.options.preventDefault&&e.preventDefault();let t=e.deltaX,n=e.deltaY;yield this.scroll([-t,-n],e)}),this.shortcut=new fI(t.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){var e,t;let{trigger:n}=this.options;if(this.shortcut.unbindAll(),oS(n)){(e=this.graphDom)==null||e.removeEventListener(Z.WHEEL,this.onWheel);let{up:t=[],down:r=[],left:i=[],right:a=[]}=n;this.shortcut.bind(t,e=>this.scroll([0,-10],e)),this.shortcut.bind(r,e=>this.scroll([0,10],e)),this.shortcut.bind(i,e=>this.scroll([-10,0],e)),this.shortcut.bind(a,e=>this.scroll([10,0],e))}else (t=this.graphDom)==null||t.addEventListener(Z.WHEEL,this.onWheel,{passive:!1})}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}formatDisplacement(e){let{sensitivity:t}=this.options;return e=CF(e,t),e=this.clampByDirection(e),e=this.clampByRange(e),e}clampByDirection([e,t]){let{direction:n}=this.options;return n===`x`?t=0:n===`y`&&(e=0),[e,t]}clampByRange([e,t]){let{viewport:n,canvas:r}=this.context,[i,a]=r.getSize(),[o,s,c,l]=iP(this.options.range),u=[a*o,i*s,a*c,i*l],d=dP(uP(n.getCanvasCenter()),u),f=SF(n.getViewportCenter(),[e,t,0]);if(!mP(f,d)){let{min:[n,r],max:[i,a]}=d;(f[0]<n&&e>0||f[0]>i&&e<0)&&(e=0),(f[1]<r&&t>0||f[1]>a&&t<0)&&(t=0)}return[e,t]}scroll(e,t){return bV(this,void 0,void 0,function*(){if(!this.validate(t))return;let{onFinish:n}=this.options,r=this.context.graph,i=this.formatDisplacement(e);yield r.translateBy(i,!1),n?.()})}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}destroy(){var e;this.shortcut.destroy(),(e=this.graphDom)==null||e.removeEventListener(Z.WHEEL,this.onWheel),super.destroy()}};xV.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var SV=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},CV=class e extends vF{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.zoom=(e,t,n)=>SV(this,void 0,void 0,function*(){if(!this.validate(t))return;let{graph:r}=this.context,i=this.options.origin;!i&&`viewport`in t&&(i=WF(t.viewport));let{sensitivity:a,onFinish:o}=this.options,s=1+SS(e,-50,50)*a/100,c=r.getZoom();yield r.zoomTo(c*s,n,i),o?.()}),this.onReset=()=>SV(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation)}),this.preventDefault=e=>{this.options.preventDefault&&e.preventDefault()},this.shortcut=new fI(t.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){let{trigger:e}=this.options;if(this.shortcut.unbindAll(),Array.isArray(e)&&(e.includes(Z.PINCH)?this.shortcut.bind([Z.PINCH],e=>{this.zoom(e.scale,e,!1)}):(this.context.canvas.getContainer()?.addEventListener(Z.WHEEL,this.preventDefault),this.shortcut.bind([...e,Z.WHEEL],e=>{let{deltaX:t,deltaY:n}=e;this.zoom(-(n??t),e,!1)}))),typeof e==`object`){let{zoomIn:t=[],zoomOut:n=[],reset:r=[]}=e;this.shortcut.bind(t,e=>this.zoom(10,e,this.options.animation)),this.shortcut.bind(n,e=>this.zoom(-10,e,this.options.animation)),this.shortcut.bind(r,this.onReset)}}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return rS(t)?t(e):!!t}destroy(){var e;this.shortcut.destroy(),(e=this.context.canvas.getContainer())==null||e.removeEventListener(Z.WHEEL,this.preventDefault),super.destroy()}};CV.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};var wV=r(((exports,t)=>{(function(n,r){typeof exports==`object`&&typeof t==`object`?t.exports=r():typeof define==`function`&&define.amd?define([],r):typeof exports==`object`?exports.Hierarchy=r():n.Hierarchy=r()})(typeof self<`u`?self:exports,function(){return(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,`a`,t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=``,n(n.s=5)})([(function(e,t){function n(e,t,n,r){return r===void 0&&(r=`height`),n===`center`?(e[r]+t[r])/2:e.height}e.exports={assign:Object.assign,getHeight:n}}),(function(e,t,n){var r=n(3);e.exports=function(){function e(e,t){t===void 0&&(t={});var n=this;n.options=t,n.rootNode=r(e,t)}var t=e.prototype;return t.execute=function(){throw Error(`please override this method`)},e}()}),(function(e,t,n){var r=n(4),i=[`LR`,`RL`,`TB`,`BT`,`H`,`V`],a=[`LR`,`RL`,`H`],o=function(e){return a.indexOf(e)>-1},s=i[0];e.exports=function(e,t,n){var a=t.direction||s;if(t.isHorizontal=o(a),a&&i.indexOf(a)===-1)throw TypeError(`Invalid direction: `+a);if(a===i[0])n(e,t);else if(a===i[1])n(e,t),e.right2left();else if(a===i[2])n(e,t);else if(a===i[3])n(e,t),e.bottom2top();else if(a===i[4]||a===i[5]){var l=r(e,t),u=l.left,d=l.right;n(u,t),n(d,t),t.isHorizontal?u.right2left():u.bottom2top(),d.translate(u.x-d.x,u.y-d.y),e.x=u.x,e.y=d.y;var f=e.getBoundingBox();t.isHorizontal?f.top<0&&e.translate(0,-f.top):f.left<0&&e.translate(-f.left,0)}var p=t.fixedRoot;return p===void 0&&(p=!0),p&&e.translate(-(e.x+e.width/2+e.hgap),-(e.y+e.height/2+e.vgap)),c(e,t),e};function c(e,t){if(t.radial){var n=t.isHorizontal?[`x`,`y`]:[`y`,`x`],r=n[0],i=n[1],a={x:1/0,y:1/0},o={x:-1/0,y:-1/0},s=0;e.DFTraverse(function(e){s++;var t=e.x,n=e.y;a.x=Math.min(a.x,t),a.y=Math.min(a.y,n),o.x=Math.max(o.x,t),o.y=Math.max(o.y,n)});var c=o[i]-a[i];if(c===0)return;var l=Math.PI*2/s;e.DFTraverse(function(t){var n=(t[i]-a[i])/c*(Math.PI*2-l)+l,o=t[r]-e[r];t.x=Math.cos(n)*o,t.y=Math.sin(n)*o})}}}),(function(e,t,n){var r=n(0),i=18,a=i*2,o=i,s={getId:function(e){return e.id||e.name},getPreH:function(e){return e.preH||0},getPreV:function(e){return e.preV||0},getHGap:function(e){return e.hgap||o},getVGap:function(e){return e.vgap||o},getChildren:function(e){return e.children},getHeight:function(e){return e.height||a},getWidth:function(e){var t=e.label||` `;return e.width||t.split(``).length*i}};function c(e,t){var n=this;if(n.vgap=n.hgap=0,e instanceof c)return e;n.data=e;var r=t.getHGap(e),i=t.getVGap(e);return n.preH=t.getPreH(e),n.preV=t.getPreV(e),n.width=t.getWidth(e),n.height=t.getHeight(e),n.width+=n.preH,n.height+=n.preV,n.id=t.getId(e),n.x=n.y=0,n.depth=0,n.children||=[],n.addGap(r,i),n}r.assign(c.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(e,t){var n=this;n.hgap+=e,n.vgap+=t,n.width+=2*e,n.height+=2*t},eachNode:function(e){for(var t=[this],n;n=t.shift();)e(n),t=n.children.concat(t)},DFTraverse:function(e){this.eachNode(e)},BFTraverse:function(e){for(var t=[this],n;n=t.shift();)e(n),t=t.concat(n.children)},getBoundingBox:function(){var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.width=Math.max(e.width,t.x+t.width),e.height=Math.max(e.height,t.y+t.height)}),e},translate:function(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.eachNode(function(n){n.x+=e,n.y+=t,n.x+=n.preH,n.y+=n.preV})},right2left:function(){var e=this,t=e.getBoundingBox();e.eachNode(function(e){e.x=e.x-(e.x-t.left)*2-e.width}),e.translate(t.width,0)},bottom2top:function(){var e=this,t=e.getBoundingBox();e.eachNode(function(e){e.y=e.y-(e.y-t.top)*2-e.height}),e.translate(0,t.height)}});function l(e,t,n){t===void 0&&(t={}),t=r.assign({},s,t);var i=new c(e,t),a=[i],o;if(!n&&!e.collapsed){for(;o=a.shift();)if(!o.data.collapsed){var l=t.getChildren(o.data),u=l?l.length:0;if(o.children=Array(u),l&&u)for(var d=0;d<u;d++){var f=new c(l[d],t);o.children[d]=f,a.push(f),f.parent=o,f.depth=o.depth+1}}}return i}e.exports=l}),(function(e,t,n){var r=n(3);e.exports=function(e,t){for(var n=r(e.data,t,!0),i=r(e.data,t,!0),a=e.children.length,o=Math.round(a/2),s=t.getSide||function(e,t){return t<o?`right`:`left`},c=0;c<a;c++){var l=e.children[c];s(l,c)===`right`?i.children.push(l):n.children.push(l)}return n.eachNode(function(e){e.isRoot()||(e.side=`left`)}),i.eachNode(function(e){e.isRoot()||(e.side=`right`)}),{left:n,right:i}}}),(function(e,t,n){e.exports={compactBox:n(6),dendrogram:n(8),indented:n(10),mindmap:n(12)}}),(function(e,t,n){function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}var a=n(1),o=n(7),s=n(2),c=n(0),l=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.execute=function(){var e=this;return s(e.rootNode,e.options,o)},t}(a),u={};function d(e,t){return t=c.assign({},u,t),new l(e,t).execute()}e.exports=d}),(function(e,t){function n(e,t,n,r){r===void 0&&(r=[]);var i=this;i.w=e||0,i.h=t||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}n.fromNode=function(e,t){if(!e)return null;var r=[];return e.children.forEach(function(e){r.push(n.fromNode(e,t))}),t?new n(e.height,e.width,e.x,r):new n(e.width,e.height,e.y,r)};function r(e,t,n){n?e.y+=t:e.x+=t,e.children.forEach(function(e){r(e,t,n)})}function i(e,t){var n=t?e.y:e.x;return e.children.forEach(function(e){n=Math.min(i(e,t),n)}),n}function a(e,t){var n=i(e,t);r(e,-n,t)}function o(e,t,n){n?t.y=e.x:t.x=e.x,e.c.forEach(function(e,r){o(e,t.children[r],n)})}function s(e,t,n){n===void 0&&(n=0),t?(e.x=n,n+=e.width):(e.y=n,n+=e.height),e.children.forEach(function(e){s(e,t,n)})}e.exports=function(e,t){t===void 0&&(t={});var r=t.isHorizontal;function i(e){if(e.cs===0){c(e);return}i(e.c[0]);for(var t=b(p(e.c[0].el),0,null),n=1;n<e.cs;++n){i(e.c[n]);var r=p(e.c[n].er);l(e,n,t),t=b(r,n,t)}g(e),c(e)}function c(e){e.cs===0?(e.el=e,e.er=e,e.msel=e.mser=0):(e.el=e.c[0].el,e.msel=e.c[0].msel,e.er=e.c[e.cs-1].er,e.mser=e.c[e.cs-1].mser)}function l(e,t,n){for(var r=e.c[t-1],i=r.mod,a=e.c[t],o=a.mod;r!==null&&a!==null;){p(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(o+a.prelim);s>0&&(o+=s,u(e,t,n.index,s));var c=p(r),l=p(a);c<=l&&(r=f(r),r!==null&&(i+=r.mod)),c>=l&&(a=d(a),a!==null&&(o+=a.mod))}!r&&a?m(e,t,a,o):r&&!a&&h(e,t,r,i)}function u(e,t,n,r){e.c[t].mod+=r,e.c[t].msel+=r,e.c[t].mser+=r,v(e,t,n,r)}function d(e){return e.cs===0?e.tl:e.c[0]}function f(e){return e.cs===0?e.tr:e.c[e.cs-1]}function p(e){return e.y+e.h}function m(e,t,n,r){var i=e.c[0].el;i.tl=n;var a=r-n.mod-e.c[0].msel;i.mod+=a,i.prelim-=a,e.c[0].el=e.c[t].el,e.c[0].msel=e.c[t].msel}function h(e,t,n,r){var i=e.c[t].er;i.tr=n;var a=r-n.mod-e.c[t].mser;i.mod+=a,i.prelim-=a,e.c[t].er=e.c[t-1].er,e.c[t].mser=e.c[t-1].mser}function g(e){e.prelim=(e.c[0].prelim+e.c[0].mod+e.c[e.cs-1].mod+e.c[e.cs-1].prelim+e.c[e.cs-1].w)/2-e.w/2}function _(e,t){t+=e.mod,e.x=e.prelim+t,y(e);for(var n=0;n<e.cs;n++)_(e.c[n],t)}function v(e,t,n,r){if(n!==t-1){var i=t-n;e.c[n+1].shift+=r/i,e.c[t].shift-=r/i,e.c[t].change-=r-r/i}}function y(e){for(var t=0,n=0,r=0;r<e.cs;r++)t+=e.c[r].shift,n+=t+e.c[r].change,e.c[r].mod+=n}function b(e,t,n){for(;n!==null&&e>=n.low;)n=n.nxt;return{low:e,index:t,nxt:n}}s(e,r);var x=n.fromNode(e,r);return i(x),_(x,0),o(x,e,r),a(e,r),e}}),(function(e,t,n){function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}var a=n(1),o=n(9),s=n(2),c=n(0),l=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.execute=function(){var e=this;return e.rootNode.width=0,s(e.rootNode,e.options,o)},t}(a),u={};function d(e,t){return t=c.assign({},u,t),new l(e,t).execute()}e.exports=d}),(function(e,t,n){var r=n(0);function i(e,t){e===void 0&&(e=0),t===void 0&&(t=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=t}var a={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function o(e,t,n){n?(t.x=e.x,t.y=e.y):(t.x=e.y,t.y=e.x),e.children.forEach(function(e,r){o(e,t.children[r],n)})}e.exports=function(e,t){t===void 0&&(t={}),t=r.assign({},a,t);var n=0;function s(e){if(!e)return null;e.width=0,e.depth&&e.depth>n&&(n=e.depth);var t=e.children,r=t.length,a=new i(e.height,[]);return t.forEach(function(e,t){var n=s(e);a.children.push(n),t===0&&(a.leftChild=n),t===r-1&&(a.rightChild=n)}),a.originNode=e,a.isLeaf=e.isLeaf(),a}function c(e){if(e.isLeaf||e.children.length===0)e.drawingDepth=n;else{var t=e.children.map(function(e){return c(e)});e.drawingDepth=Math.min.apply(null,t)-1}return e.drawingDepth}var l;function u(e){e.x=e.drawingDepth*t.rankSep,e.isLeaf?(e.y=0,l&&(e.y=l.y+l.height+t.nodeSep,e.originNode.parent!==l.originNode.parent&&(e.y+=t.subTreeSep)),l=e):(e.children.forEach(function(e){u(e)}),e.y=(e.leftChild.y+e.rightChild.y)/2)}var d=s(e);return c(d),u(d),o(d,e,t.isHorizontal),e}}),(function(e,t,n){function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}var a=n(1),o=n(11),s=n(4),c=n(0),l=[`LR`,`RL`,`H`],u=l[0],d=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.execute=function(){var e=this,t=e.options,n=e.rootNode;t.isHorizontal=!0;var r=t.indent,i=r===void 0?20:r,a=t.dropCap,c=a===void 0?!0:a,d=t.direction,f=d===void 0?u:d,p=t.align;if(f&&l.indexOf(f)===-1)throw TypeError(`Invalid direction: `+f);if(f===l[0])o(n,i,c,p);else if(f===l[1])o(n,i,c,p),n.right2left();else if(f===l[2]){var m=s(n,t),h=m.left,g=m.right;o(h,i,c,p),h.right2left(),o(g,i,c,p);var _=h.getBoundingBox();g.translate(_.width,0),n.x=g.x-n.width/2}return n},t}(a),f={};function p(e,t){return t=c.assign({},f,t),new d(e,t).execute()}e.exports=p}),(function(e,t,n){var r=n(0);function i(e,t,n,i,a){var o=(typeof n==`function`?n(e):n)*e.depth;if(!i)try{if(e.id===e.parent.children[0].id){e.x+=o,e.y=t?t.y:0;return}}catch{}if(e.x+=o,t){if(e.y=t.y+r.getHeight(t,e,a),t.parent&&e.parent.id!==t.parent.id){var s=t.parent,c=s.y+r.getHeight(s,e,a);e.y=c>e.y?c:e.y}}else e.y=0}e.exports=function(e,t,n,r){var a=null;e.eachNode(function(e){i(e,a,t,n,r),a=e})}}),(function(e,t,n){function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}var a=n(1),o=n(13),s=n(2),c=n(0),l=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.execute=function(){var e=this;return s(e.rootNode,e.options,o)},t}(a),u={};function d(e,t){return t=c.assign({},u,t),new l(e,t).execute()}e.exports=d}),(function(e,t,n){var r=n(0);function i(e,t){var n=0;return e.children.length?e.children.forEach(function(e){n+=i(e,t)}):n=e.height,e._subTreeSep=t.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,n)+2*e._subTreeSep,e.totalHeight}function a(e){var t=e.children,n=t.length;if(n){t.forEach(function(e){a(e)});var r=t[0],i=t[n-1],o=i.y-r.y+i.height,s=0;if(t.forEach(function(e){s+=e.totalHeight}),o>e.height)e.y=r.y+o/2-e.height/2;else if(t.length!==1||e.height>s){var c=e.y+(e.height-o)/2-r.y;t.forEach(function(e){e.translate(0,c)})}else e.y=(r.y+r.height/2+i.y+i.height/2)/2-e.height/2}}var o={getSubTreeSep:function(){return 0}};e.exports=function(e,t){t===void 0&&(t={}),t=r.assign({},o,t),e.parent={x:0,width:0,height:0,y:0},e.BFTraverse(function(e){e.x=e.parent.x+e.parent.width}),e.parent=null,i(e,t),e.startY=0,e.y=e.totalHeight/2-e.height/2,e.eachNode(function(e){var t=e.children,n=t.length;if(n){var r=t[0];if(r.startY=e.startY+e._subTreeSep,n===1)r.y=e.y+e.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var a=t[i];a.startY=t[i-1].startY+t[i-1].totalHeight,a.y=a.startY+a.totalHeight/2-a.height/2}}}}),a(e)}})])})})),TV=(e,t)=>{if(e!==`next`&&e!==`prev`)return t},EV=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev},DV=class{constructor(){let e={};e.prev=e,e.next=e.prev,this.shortcut=e}dequeue(){let e=this.shortcut,t=e.prev;if(t&&t!==e)return EV(t),t}enqueue(e){let t=this.shortcut;e.prev&&e.next&&EV(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t}toString(){let e=[],t=this.shortcut,n=t.prev;for(;n!==t;)e.push(JSON.stringify(n,TV)),n=n?.prev;return`[${e.join(`, `)}]`}},OV=class extends DV{},kV=()=>1;const AV=(e,t)=>{if(e.getAllNodes().length<=1)return[];let n=NV(e,t||kV);return jV(n.graph,n.buckets,n.zeroIdx).map(t=>e.getRelatedEdges(t.v,`out`).filter(({target:e})=>e===t.w))?.flat()};var jV=(e,t,n)=>{let r=[],i=t[t.length-1],a=t[0],o;for(;e.getAllNodes().length;){for(;o=a.dequeue();)MV(e,t,n,o);for(;o=i.dequeue();)MV(e,t,n,o);if(e.getAllNodes().length){for(let i=t.length-2;i>0;--i)if(o=t[i].dequeue(),o){r=r.concat(MV(e,t,n,o,!0));break}}}return r},MV=(e,t,n,r,i)=>{var a,o;let s=[];return e.hasNode(r.v)&&((a=e.getRelatedEdges(r.v,`in`))==null||a.forEach(r=>{let a=r.data.weight,o=e.getNode(r.source);i&&s.push({v:r.source,w:r.target,in:0,out:0}),o.data.out===void 0&&(o.data.out=0),o.data.out-=a,PV(t,n,Object.assign({v:o.id},o.data))}),(o=e.getRelatedEdges(r.v,`out`))==null||o.forEach(r=>{let i=r.data.weight,a=r.target,o=e.getNode(a);o.data.in===void 0&&(o.data.in=0),o.data.in-=i,PV(t,n,Object.assign({v:o.id},o.data))}),e.removeNode(r.v)),i?s:void 0},NV=(e,t)=>{let n=new tV,r=0,i=0;e.getAllNodes().forEach(e=>{n.addNode({id:e.id,data:{v:e.id,in:0,out:0}})}),e.getAllEdges().forEach(e=>{let a=n.getRelatedEdges(e.source,`out`).find(t=>t.target===e.target),o=t?.(e)||1;a?n.updateEdgeData(a?.id,Object.assign(Object.assign({},a.data),{weight:a.data.weight+o})):n.addEdge({id:e.id,source:e.source,target:e.target,data:{weight:o}}),i=Math.max(i,n.getNode(e.source).data.out+=o),r=Math.max(r,n.getNode(e.target).data.in+=o)});let a=[],o=i+r+3;for(let e=0;e<o;e++)a.push(new OV);let s=r+1;return n.getAllNodes().forEach(e=>{PV(a,s,Object.assign({v:e.id},n.getNode(e.id).data))}),{buckets:a,zeroIdx:s,graph:n}},PV=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},FV=(e,t)=>{(t===`greedy`?AV(e,(e=>e=>e.data.weight||1)(e)):IV(e))?.forEach(t=>{let n=t.data;e.removeEdge(t.id),n.forwardName=t.data.name,n.reversed=!0,e.addEdge({id:t.id,source:t.target,target:t.source,data:Object.assign({},n)})})},IV=e=>{let t=[],n={},r={},i=a=>{r[a]||(r[a]=!0,n[a]=!0,e.getRelatedEdges(a,`out`).forEach(e=>{n[e.target]?t.push(e):i(e.target)}),delete n[a])};return e.getAllNodes().forEach(e=>i(e.id)),t},LV=e=>{e.getAllEdges().forEach(t=>{let n=t.data;if(n.reversed){e.removeEdge(t.id);let r=n.forwardName;delete n.reversed,delete n.forwardName,e.addEdge({id:t.id,source:t.target,target:t.source,data:Object.assign(Object.assign({},n),{forwardName:r})})}})},RV=(e,t)=>Number(e)-Number(t);const zV=(e,t,n,r)=>{let i;do i=`${r}${Math.random()}`;while(e.hasNode(i));return n.dummy=t,e.addNode({id:i,data:n}),i},BV=e=>{let t=new tV;return e.getAllNodes().forEach(e=>{t.addNode(Object.assign({},e))}),e.getAllEdges().forEach(e=>{let n=t.getRelatedEdges(e.source,`out`).find(t=>t.target===e.target);n?t.updateEdgeData(n?.id,Object.assign(Object.assign({},n.data),{weight:n.data.weight+e.data.weight||0,minlen:Math.max(n.data.minlen,e.data.minlen||1)})):t.addEdge({id:e.id,source:e.source,target:e.target,data:{weight:e.data.weight||0,minlen:e.data.minlen||1}})}),t},VV=e=>{let t=new tV;return e.getAllNodes().forEach(n=>{e.getChildren(n.id).length||t.addNode(Object.assign({},n))}),e.getAllEdges().forEach(e=>{t.addEdge(e)}),t},HV=(e,t)=>e?.reduce((e,n,r)=>(e[n]=t[r],e),{}),UV=(e,t)=>{let n=Number(e.x),r=Number(e.y),i=Number(t.x)-n,a=Number(t.y)-r,o=Number(e.width)/2,s=Number(e.height)/2;if(!i&&!a)return{x:0,y:0};let c,l;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),c=s*i/a,l=s):(i<0&&(o=-o),c=o,l=o*a/i),{x:n+c,y:r+l}},WV=e=>{let t=[],n=JV(e)+1;for(let e=0;e<n;e++)t.push([]);e.getAllNodes().forEach(e=>{let n=e.data.rank;n!==void 0&&t[n]&&t[n].push(e.id)});for(let r=0;r<n;r++)t[r]=t[r].sort((t,n)=>RV(e.getNode(t).data.order,e.getNode(n).data.order));return t},GV=e=>{let t=e.getAllNodes().filter(e=>e.data.rank!==void 0).map(e=>e.data.rank),n=Math.min(...t);e.getAllNodes().forEach(e=>{e.data.hasOwnProperty(`rank`)&&n!==1/0&&(e.data.rank-=n)})},KV=(e,t=0)=>{let n=e.getAllNodes(),r=n.filter(e=>e.data.rank!==void 0).map(e=>e.data.rank),i=Math.min(...r),a=[];n.forEach(e=>{let t=(e.data.rank||0)-i;a[t]||(a[t]=[]),a[t].push(e.id)});let o=0;for(let n=0;n<a.length;n++){let r=a[n];r===void 0?n%t!==0&&--o:o&&r?.forEach(t=>{let n=e.getNode(t);n&&(n.data.rank=n.data.rank||0,n.data.rank+=o)})}},qV=(e,t,n,r)=>{let i={width:0,height:0};return K(n)&&K(r)&&(i.rank=n,i.order=r),zV(e,`border`,i,t)},JV=e=>{let t;return e.getAllNodes().forEach(e=>{let n=e.data.rank;n!==void 0&&(t===void 0||n>t)&&(t=n)}),t||=0,t},YV=(e,t)=>{let n={lhs:[],rhs:[]};return e?.forEach(e=>{t(e)?n.lhs.push(e):n.rhs.push(e)}),n},XV=(e,t)=>e.reduce((e,n)=>{let r=t(e),i=t(n);return r>i?n:e});var ZV=(e,t,n,r,i,a)=>{r.includes(t.id)||(r.push(t.id),n||a.push(t.id),i(t.id).forEach(t=>ZV(e,t,n,r,i,a)),n&&a.push(t.id))};const QV=(e,t,n,r)=>{let i=Array.isArray(t)?t:[t],a=t=>r?e.getSuccessors(t):e.getNeighbors(t),o=[],s=[];return i.forEach(t=>{if(e.hasNode(t.id))ZV(e,t,n===`post`,s,a,o);else throw Error(`Graph does not have node: ${t}`)}),o},$V=e=>{let t=n=>{let r=e.getChildren(n),i=e.getNode(n);if(r?.length&&r.forEach(e=>t(e.id)),i.data.hasOwnProperty(`minRank`)){i.data.borderLeft=[],i.data.borderRight=[];for(let t=i.data.minRank,r=i.data.maxRank+1;t<r;t+=1)eH(e,`borderLeft`,`_bl`,n,i,t),eH(e,`borderRight`,`_br`,n,i,t)}};e.getRoots().forEach(e=>t(e.id))};var eH=(e,t,n,r,i,a)=>{let o={rank:a,borderType:t,width:0,height:0},s=i.data[t][a-1],c=zV(e,`border`,o,n);i.data[t][a]=c,e.setParent(c,r),s&&e.addEdge({id:`e${Math.random()}`,source:s,target:c,data:{weight:1}})},tH=(e,t)=>{let n=t.toLowerCase();(n===`lr`||n===`rl`)&&rH(e)},nH=(e,t)=>{let n=t.toLowerCase();(n===`bt`||n===`rl`)&&aH(e),(n===`lr`||n===`rl`)&&(sH(e),rH(e))},rH=e=>{e.getAllNodes().forEach(e=>{iH(e)}),e.getAllEdges().forEach(e=>{iH(e)})},iH=e=>{let t=e.data.width;e.data.width=e.data.height,e.data.height=t},aH=e=>{e.getAllNodes().forEach(e=>{oH(e.data)}),e.getAllEdges().forEach(e=>{var t;(t=e.data.points)==null||t.forEach(e=>oH(e)),e.data.hasOwnProperty(`y`)&&oH(e.data)})},oH=e=>{e?.y&&(e.y=-e.y)},sH=e=>{e.getAllNodes().forEach(e=>{cH(e.data)}),e.getAllEdges().forEach(e=>{var t;(t=e.data.points)==null||t.forEach(e=>cH(e)),e.data.hasOwnProperty(`x`)&&cH(e.data)})},cH=e=>{let t=e.x;e.x=e.y,e.y=t},lH=e=>{let t=zV(e,`root`,{},`_root`),n=dH(e),r=Math.max(...Object.values(n));Math.abs(r)===1/0&&(r=1);let i=r-1,a=2*i+1;e.getAllEdges().forEach(e=>{e.data.minlen*=a});let o=fH(e)+1;return e.getRoots().forEach(r=>{uH(e,t,a,o,i,n,r.id)}),{nestingRoot:t,nodeRankFactor:a}},uH=(e,t,n,r,i,a,o)=>{let s=e.getChildren(o);if(!s?.length){o!==t&&e.addEdge({id:`e${Math.random()}`,source:t,target:o,data:{weight:0,minlen:n}});return}let c=qV(e,`_bt`),l=qV(e,`_bb`),u=e.getNode(o);e.setParent(c,o),u.data.borderTop=c,e.setParent(l,o),u.data.borderBottom=l,s?.forEach(s=>{uH(e,t,n,r,i,a,s.id);let u=s.data.borderTop?s.data.borderTop:s.id,d=s.data.borderBottom?s.data.borderBottom:s.id,f=s.data.borderTop?r:2*r,p=u===d?i-a[o]+1:1;e.addEdge({id:`e${Math.random()}`,source:c,target:u,data:{minlen:p,weight:f,nestingEdge:!0}}),e.addEdge({id:`e${Math.random()}`,source:d,target:l,data:{minlen:p,weight:f,nestingEdge:!0}})}),e.getParent(o)||e.addEdge({id:`e${Math.random()}`,source:t,target:c,data:{weight:0,minlen:i+a[o]}})},dH=e=>{let t={},n=(r,i)=>{e.getChildren(r)?.forEach(e=>n(e.id,i+1)),t[r]=i};return e.getRoots().forEach(e=>n(e.id,1)),t},fH=e=>{let t=0;return e.getAllEdges().forEach(e=>{t+=e.data.weight}),t},pH=(e,t)=>{t&&e.removeNode(t),e.getAllEdges().forEach(t=>{t.data.nestingEdge&&e.removeEdge(t.id)})},mH=`edge`,hH=`edge-label`,gH=(e,t)=>{e.getAllEdges().forEach(n=>_H(e,n,t))},_H=(e,t,n)=>{let r=t.source,i=e.getNode(r).data.rank,a=t.target,o=e.getNode(a).data.rank,s=t.data.labelRank;if(o===i+1)return;e.removeEdge(t.id);let c,l,u;for(u=0,++i;i<o;++u,++i)t.data.points=[],l={originalEdge:t,width:0,height:0,rank:i},c=zV(e,mH,l,`_d`),i===s&&(l.width=t.data.width,l.height=t.data.height,l.dummy=hH,l.labelpos=t.data.labelpos),e.addEdge({id:`e${Math.random()}`,source:r,target:c,data:{weight:t.data.weight}}),u===0&&n.push(c),r=c;e.addEdge({id:`e${Math.random()}`,source:r,target:a,data:{weight:t.data.weight}})},vH=(e,t)=>{t.forEach(t=>{let n=e.getNode(t),{data:r}=n,i=r.originalEdge,a;i&&e.addEdge(i);let o=t;for(;n.data.dummy;)a=e.getSuccessors(o)[0],e.removeNode(o),i.data.points.push({x:n.data.x,y:n.data.y}),n.data.dummy===hH&&(i.data.x=n.data.x,i.data.y=n.data.y,i.data.width=n.data.width,i.data.height=n.data.height),o=a.id,n=e.getNode(o)})};const yH=(e,t,n)=>{let r={},i;n?.forEach(n=>{let a=e.getParent(n),o,s;for(;a;){if(o=e.getParent(a.id),o?(s=r[o.id],r[o.id]=a.id):(s=i,i=a.id),s&&s!==a.id){t.hasNode(s)||t.addNode({id:s,data:{}}),t.hasNode(a.id)||t.addNode({id:a.id,data:{}}),t.hasEdge(`e${s}-${a.id}`)||t.addEdge({id:`e${s}-${a.id}`,source:s,target:a.id,data:{}});return}a=o}})},bH=(e,t,n)=>{let r=xH(e),i=new tV({tree:[{id:r,children:[],data:{}}]});return e.getAllNodes().forEach(a=>{let o=e.getParent(a.id);(a.data.rank===t||a.data.minRank<=t&&t<=a.data.maxRank)&&(i.hasNode(a.id)||i.addNode(Object.assign({},a)),o?.id&&!i.hasNode(o?.id)&&i.addNode(Object.assign({},o)),i.setParent(a.id,o?.id||r),e.getRelatedEdges(a.id,n).forEach(t=>{let n=t.source===a.id?t.target:t.source;i.hasNode(n)||i.addNode(Object.assign({},e.getNode(n)));let r=i.getRelatedEdges(n,`out`).find(({target:e})=>e===a.id),o=r===void 0?0:r.data.weight;r?i.updateEdgeData(r.id,Object.assign(Object.assign({},r.data),{weight:t.data.weight+o})):i.addEdge({id:t.id,source:n,target:a.id,data:{weight:t.data.weight+o}})}),a.data.hasOwnProperty(`minRank`)&&i.updateNodeData(a.id,Object.assign(Object.assign({},a.data),{borderLeft:a.data.borderLeft[t],borderRight:a.data.borderRight[t]})))}),i};var xH=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},SH=(e,t,n)=>{let r=HV(n,n.map((e,t)=>t)),i=t.map(t=>e.getRelatedEdges(t,`out`).map(e=>({pos:r[e.target]||0,weight:e.data.weight}))?.sort((e,t)=>e.pos-t.pos)).flat().filter(e=>e!==void 0),a=1;for(;a<n.length;)a<<=1;let o=2*a-1;--a;let s=Array(o).fill(0,0,o),c=0;return i?.forEach(e=>{if(e){let t=e.pos+a;s[t]+=e.weight;let n=0;for(;t>0;)t%2&&(n+=s[t+1]),t=t-1>>1,s[t]+=e.weight;c+=e.weight*n}}),c};const CH=(e,t)=>{let n=0;for(let r=1;r<t?.length;r+=1)n+=SH(e,t[r-1],t[r]);return n},wH=e=>{let t={},n=e.getAllNodes(),r=n.map(e=>e.data.rank??-1/0),i=Math.max(...r),a=[];for(let e=0;e<i+1;e++)a.push([]);let o=n.sort((t,n)=>e.getNode(t.id).data.rank-e.getNode(n.id).data.rank);return o.filter(t=>e.getNode(t.id).data.fixorder!==void 0).sort((t,n)=>e.getNode(t.id).data.fixorder-e.getNode(n.id).data.fixorder)?.forEach(n=>{isNaN(e.getNode(n.id).data.rank)||a[e.getNode(n.id).data.rank].push(n.id),t[n.id]=!0}),o?.forEach(n=>e.dfsTree(n.id,e=>{if(t.hasOwnProperty(e.id))return!0;t[e.id]=!0,isNaN(e.data.rank)||a[e.data.rank].push(e.id)})),a},TH=(e,t)=>t.map(t=>{let n=e.getRelatedEdges(t,`in`);if(!n?.length)return{v:t};let r={sum:0,weight:0};return n?.forEach(t=>{let n=e.getNode(t.source);r.sum+=t.data.weight*n.data.order,r.weight+=t.data.weight}),{v:t,barycenter:r.sum/r.weight,weight:r.weight}});var EH=(e,t)=>{var n,r;let i={};e?.forEach((e,t)=>{i[e.v]={i:t,indegree:0,in:[],out:[],vs:[e.v]};let n=i[e.v];e.barycenter!==void 0&&(n.barycenter=e.barycenter,n.weight=e.weight)}),(n=t.getAllEdges())==null||n.forEach(e=>{let t=i[e.source],n=i[e.target];t!==void 0&&n!==void 0&&(n.indegree++,t.out.push(i[e.target]))});let a=(r=Object.values(i)).filter?.call(r,e=>!e.indegree);return DH(a)},DH=e=>{var t,n;let r=[],i=e=>t=>{t.merged||(t.barycenter===void 0||e.barycenter===void 0||t.barycenter>=e.barycenter)&&OH(e,t)},a=t=>n=>{n.in.push(t),--n.indegree===0&&e.push(n)};for(;e?.length;){let o=e.pop();r.push(o),(t=o.in.reverse())==null||t.forEach(e=>i(o)(e)),(n=o.out)==null||n.forEach(e=>a(o)(e))}let o=r.filter(e=>!e.merged),s=[`vs`,`i`,`barycenter`,`weight`];return o.map(e=>{let t={};return s?.forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t})},OH=(e,t)=>{let n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs?.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},kH=EH;const AH=(e,t,n,r)=>{let i=YV(e,e=>{let t=e.hasOwnProperty(`fixorder`)&&!isNaN(e.fixorder);return r?!t&&e.hasOwnProperty(`barycenter`):t||e.hasOwnProperty(`barycenter`)}),a=i.lhs,o=i.rhs.sort((e,t)=>-e.i- -t.i),s=[],c=0,l=0,u=0;a?.sort(MH(!!t,!!n)),u=jH(s,o,u),a?.forEach(e=>{u+=e.vs?.length,s.push(e.vs),c+=e.barycenter*e.weight,l+=e.weight,u=jH(s,o,u)});let d={vs:s.flat()};return l&&(d.barycenter=c/l,d.weight=l),d};var jH=(e,t,n)=>{let r=n,i;for(;t.length&&(i=t[t.length-1]).i<=r;)t.pop(),e?.push(i.vs),r++;return r},MH=(e,t)=>(n,r)=>{if(n.fixorder!==void 0&&r.fixorder!==void 0)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(t&&n.order!==void 0&&r.order!==void 0){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return e?r.i-n.i:n.i-r.i};const NH=(e,t,n,r,i,a)=>{var o;let s=e.getChildren(t).map(e=>e.id),c=e.getNode(t),l=c?c.data.borderLeft:void 0,u=c?c.data.borderRight:void 0,d={};l&&(s=s?.filter(e=>e!==l&&e!==u));let f=TH(e,s||[]);f?.forEach(t=>{if(e.getChildren(t.v)?.length){let i=NH(e,t.v,n,r,a);d[t.v]=i,i.hasOwnProperty(`barycenter`)&&FH(t,i)}});let p=kH(f,n);PH(p,d),(o=p.filter(e=>e.vs.length>0))==null||o.forEach(t=>{let n=e.getNode(t.vs[0]);n&&(t.fixorder=n.data.fixorder,t.order=n.data.order)});let m=AH(p,r,i,a);if(l&&(m.vs=[l,m.vs,u].flat(),e.getPredecessors(l)?.length)){let t=e.getNode(e.getPredecessors(l)?.[0].id||``),n=e.getNode(e.getPredecessors(u)?.[0].id||``);m.hasOwnProperty(`barycenter`)||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+t.data.order+n.data.order)/(m.weight+2),m.weight+=2}return m};var PH=(e,t)=>{e?.forEach(e=>{e.vs=(e.vs?.map(e=>t[e]?t[e].vs:e)).flat()})},FH=(e,t)=>{e.barycenter===void 0?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)};const IH=(e,t)=>{let n=JV(e),r=[],i=[];for(let e=1;e<n+1;e++)r.push(e);for(let e=n-1;e>-1;e--)i.push(e);let a=LH(e,r,`in`),o=LH(e,i,`out`),s=wH(e);zH(e,s);let c=1/0,l;for(let n=0,r=0;r<4;++n,++r){RH(n%2?a:o,n%4>=2,!1,t),s=WV(e);let i=CH(e,s);i<c&&(r=0,l=GS(s),c=i)}s=wH(e),zH(e,s);for(let n=0,r=0;r<4;++n,++r){RH(n%2?a:o,n%4>=2,!0,t),s=WV(e);let i=CH(e,s);i<c&&(r=0,l=GS(s),c=i)}zH(e,l)};var LH=(e,t,n)=>t.map(t=>bH(e,t,n)),RH=(e,t,n,r)=>{let i=new tV;e?.forEach(e=>{let a=e.getRoots()[0].id,o=NH(e,a,i,t,n,r);for(let t=0;t<o.vs?.length;t++){let n=e.getNode(o.vs[t]);n&&(n.data.order=t)}yH(e,i,o.vs)})},zH=(e,t)=>{t?.forEach(t=>{t?.forEach((t,n)=>{e.getNode(t).data.order=n})})};const BH=(e,t)=>{let n=e.getAllNodes().filter(t=>!e.getChildren(t.id)?.length).map(e=>e.data.rank),r=Math.max(...n),i=[];for(let e=0;e<r+1;e++)i[e]=[];t?.forEach(t=>{let n=e.getNode(t);!n||n.data.dummy||isNaN(n.data.rank)||(n.data.fixorder=i[n.data.rank].length,i[n.data.rank].push(t))})};var VH=e=>{let t={},n=0,r=i=>{let a=n;e.getChildren(i).forEach(e=>r(e.id)),t[i]={low:a,lim:n++}};return e.getRoots().forEach(e=>r(e.id)),t},HH=(e,t,n,r)=>{let i=[],a=[],o=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),c,l;c=n;do c=e.getParent(c)?.id,i.push(c);while(c&&(t[c].low>o||s>t[c].lim));for(l=c,c=r;c&&c!==l;)a.push(c),c=e.getParent(c)?.id;return{lca:l,path:i.concat(a.reverse())}};const UH=(e,t)=>{let n=VH(e);t.forEach(t=>{let r=t,i=e.getNode(r),a=i.data.originalEdge;if(!a)return;let o=HH(e,n,a.source,a.target),s=o.path,c=o.lca,l=0,u=s[l],d=!0;for(;r!==a.target;){if(i=e.getNode(r),d){for(;u!==c&&e.getNode(u)?.data.maxRank<i.data.rank;)l++,u=s[l];u===c&&(d=!1)}if(!d){for(;l<s.length-1&&e.getNode(s[l+1])?.data.minRank<=i.data.rank;)l++;u=s[l]}e.hasNode(u)&&e.setParent(r,u),r=e.getSuccessors(r)[0].id}})},WH=(e,t)=>{let n={};return t?.length&&t.reduce((t,r)=>{let i=0,a=0,o=t.length,s=r?.[r?.length-1];return r?.forEach((t,c)=>{var l;let u=KH(e,t),d=u?e.getNode(u.id).data.order:o;(u||t===s)&&((l=r.slice(a,c+1))==null||l.forEach(t=>{var r;(r=e.getPredecessors(t))==null||r.forEach(r=>{let a=e.getNode(r.id),o=a.data.order;(o<i||d<o)&&!(a.data.dummy&&e.getNode(t)?.data.dummy)&&qH(n,r.id,t)})}),a=c+1,i=d)}),r}),n},GH=(e,t)=>{let n={};function r(t,r,i,a,o){var s;let c;for(let l=r;l<i;l++)c=t[l],e.getNode(c)?.data.dummy&&((s=e.getPredecessors(c))==null||s.forEach(t=>{let r=e.getNode(t.id);r.data.dummy&&(r.data.order<a||r.data.order>o)&&qH(n,t.id,c)}))}function i(e){return JSON.stringify(e.slice(1))}function a(e,t){let n=i(e);t.get(n)||(r(...e),t.set(n,!0))}return t?.length&&t.reduce((t,n)=>{let r=-1,i,o=0,s=new Map;return n?.forEach((c,l)=>{if(e.getNode(c)?.data.dummy===`border`){let t=e.getPredecessors(c)||[];t.length&&(i=e.getNode(t[0].id).data.order,a([n,o,l,r,i],s),o=l,r=i)}a([n,o,n.length,i,t.length],s)}),n}),n},KH=(e,t)=>{if(e.getNode(t)?.data.dummy)return e.getPredecessors(t)?.find(t=>e.getNode(t.id).data.dummy)},qH=(e,t,n)=>{let r=t,i=n;if(r>i){let e=r;r=i,i=e}let a=e[r];a||(e[r]=a={}),a[i]=!0},JH=(e,t,n)=>{let r=t,i=n;if(r>i){let e=t;r=i,i=e}return!!e[r]},YH=(e,t,n,r)=>{let i={},a={},o={};return t?.forEach(e=>{e?.forEach((e,t)=>{i[e]=e,a[e]=e,o[e]=t})}),t?.forEach(e=>{let t=-1;e?.forEach(e=>{let s=r(e).map(e=>e.id);if(s.length){s=s.sort((e,t)=>o[e]-o[t]);let r=(s.length-1)/2;for(let c=Math.floor(r),l=Math.ceil(r);c<=l;++c){let r=s[c];a[e]===e&&t<o[r]&&!JH(n,e,r)&&(a[r]=e,a[e]=i[e]=i[r],t=o[r])}}})}),{root:i,align:a}},XH=(e,t,n,r,i,a,o)=>{var s;let c={},l=ZH(e,t,n,i,a,o),u=o?`borderLeft`:`borderRight`,d=(e,t)=>{let n=l.getAllNodes(),r=n.pop(),i={};for(;r;)i[r.id]?e(r.id):(i[r.id]=!0,n.push(r),n=n.concat(t(r.id))),r=n.pop()};return d(e=>{c[e]=(l.getRelatedEdges(e,`in`)||[]).reduce((e,t)=>Math.max(e,(c[t.source]||0)+t.data.weight),0)},l.getPredecessors.bind(l)),d(t=>{let n=(l.getRelatedEdges(t,`out`)||[]).reduce((e,t)=>Math.min(e,(c[t.target]||0)-t.data.weight),1/0),r=e.getNode(t);n!==1/0&&r.data.borderType!==u&&(c[t]=Math.max(c[t],n))},l.getSuccessors.bind(l)),(s=Object.values(r))==null||s.forEach(e=>{c[e]=c[n[e]]}),c},ZH=(e,t,n,r,i,a)=>{let o=new tV,s=tU(r,i,a);return t?.forEach(t=>{let r;t?.forEach(t=>{let i=n[t];if(o.hasNode(i)||o.addNode({id:i,data:{}}),r){let a=n[r],c=o.getRelatedEdges(a,`out`).find(e=>e.target===i);c?o.updateEdgeData(c.id,Object.assign(Object.assign({},c.data),{weight:Math.max(s(e,t,r),c.data.weight||0)})):o.addEdge({id:`e${Math.random()}`,source:a,target:i,data:{weight:Math.max(s(e,t,r),0)}})}r=t})}),o},QH=(e,t)=>XV(Object.values(t),t=>{var n;let r=-1/0,i=1/0;return(n=Object.keys(t))==null||n.forEach(n=>{let a=t[n],o=nU(e,n)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)}),r-i});function $H(e,t){let n=Object.values(t),r=Math.min(...n),i=Math.max(...n);[`u`,`d`].forEach(n=>{[`l`,`r`].forEach(a=>{let o=n+a,s=e[o],c;if(s===t)return;let l=Object.values(s);c=a===`l`?r-Math.min(...l):i-Math.max(...l),c&&(e[o]={},Object.keys(s).forEach(t=>{e[o][t]=s[t]+c}))})})}const eU=(e,t)=>{let n={};return Object.keys(e.ul).forEach(r=>{if(t)n[r]=e[t.toLowerCase()][r];else{let t=Object.values(e).map(e=>e[r]);n[r]=(t[0]+t[1])/2}}),n},tU=(e,t,n)=>(r,i,a)=>{let o=r.getNode(i),s=r.getNode(a),c=0,l=0;if(c+=o.data.width/2,o.data.hasOwnProperty(`labelpos`))switch((o.data.labelpos||``).toLowerCase()){case`l`:l=-o.data.width/2;break;case`r`:l=o.data.width/2;break}if(l&&(c+=n?l:-l),l=0,c+=(o.data.dummy?t:e)/2,c+=(s.data.dummy?t:e)/2,c+=s.data.width/2,s.data.labelpos)switch((s.data.labelpos||``).toLowerCase()){case`l`:l=s.data.width/2;break;case`r`:l=-s.data.width/2;break}return l&&(c+=n?l:-l),l=0,c},nU=(e,t)=>e.getNode(t).data.width||0;var rU=(e,t)=>{let{ranksep:n=0}=t||{},r=WV(e),i=0;r?.forEach(t=>{let r=t.map(t=>e.getNode(t).data.height),a=Math.max(...r,0);t?.forEach(t=>{e.getNode(t).data.y=i+a/2}),i+=a+n})},iU=(e,t)=>{let{align:n,nodesep:r=0,edgesep:i=0}=t||{},a=WV(e),o=Object.assign(WH(e,a),GH(e,a)),s={},c=[];[`u`,`d`].forEach(t=>{c=t===`u`?a:Object.values(a).reverse(),[`l`,`r`].forEach(n=>{n===`r`&&(c=c.map(e=>Object.values(e).reverse()));let a=(t===`u`?e.getPredecessors:e.getSuccessors).bind(e),l=YH(e,c,o,a),u=XH(e,c,l.root,l.align,r,i,n===`r`);n===`r`&&Object.keys(u).forEach(e=>u[e]=-u[e]),s[t+n]=u})});let l=QH(e,s);return l&&$H(s,l),eU(s,n)};const aU=(e,t)=>{var n;let r=VV(e);rU(r,t);let i=iU(r,t);(n=Object.keys(i))==null||n.forEach(e=>{r.getNode(e).data.x=i[e]})};var oU=e=>{let t={},n=r=>{var i;let a=e.getNode(r);if(!a)return 0;if(t[r])return a.data.rank;t[r]=!0;let o;return(i=e.getRelatedEdges(r,`out`))==null||i.forEach(e=>{let t=n(e.target),r=e.data.minlen,i=t-r;i&&(o===void 0||i<o)&&(o=i)}),o||=0,a.data.rank=o,o};e.getAllNodes().filter(t=>e.getRelatedEdges(t.id,`in`).length===0).forEach(e=>n(e.id))},sU=e=>{let t={},n,r=i=>{var a;let o=e.getNode(i);if(!o)return 0;if(t[i])return o.data.rank;t[i]=!0;let s;return(a=e.getRelatedEdges(i,`out`))==null||a.forEach(e=>{let t=r(e.target),n=e.data.minlen,i=t-n;i&&(s===void 0||i<s)&&(s=i)}),s||=0,(n===void 0||s<n)&&(n=s),o.data.rank=s,s};e.getAllNodes().filter(t=>e.getRelatedEdges(t.id,`in`).length===0).forEach(e=>{e&&r(e.id)}),n===void 0&&(n=0);let i={},a=(t,n)=>{var r;let o=e.getNode(t),s=isNaN(o.data.layer)?n:o.data.layer;(o.data.rank===void 0||o.data.rank<s)&&(o.data.rank=s),!i[t]&&(i[t]=!0,(r=e.getRelatedEdges(t,`out`))==null||r.forEach(e=>{a(e.target,s+e.data.minlen)}))};e.getAllNodes().forEach(e=>{let t=e.data;t&&(isNaN(t.layer)?t.rank-=n:a(e.id,t.layer))})},cU=(e,t)=>e.getNode(t.target).data.rank-e.getNode(t.source).data.rank-t.data.minlen,lU=e=>{let t=new tV({tree:[]}),n=e.getAllNodes()[0],r=e.getAllNodes().length;t.addNode(n);let i,a;for(;uU(t,e)<r;)i=pU(t,e),a=t.hasNode(i.source)?cU(e,i):-cU(e,i),mU(t,e,a);return t},uU=(e,t)=>{let n=r=>{t.getRelatedEdges(r,`both`).forEach(i=>{let a=i.source,o=r===a?i.target:a;!e.hasNode(o)&&!cU(t,i)&&(e.addNode({id:o,data:{}}),e.addEdge({id:i.id,source:r,target:o,data:{}}),n(o))})};return e.getAllNodes().forEach(e=>n(e.id)),e.getAllNodes().length},dU=e=>{let t=new tV({tree:[]}),n=e.getAllNodes()[0],r=e.getAllNodes().length;t.addNode(n);let i,a;for(;fU(t,e)<r;)i=pU(t,e),a=t.hasNode(i.source)?cU(e,i):-cU(e,i),mU(t,e,a);return t},fU=(e,t)=>{let n=r=>{var i;(i=t.getRelatedEdges(r,`both`))==null||i.forEach(i=>{let a=i.source,o=r===a?i.target:a;!e.hasNode(o)&&(t.getNode(o).data.layer!==void 0||!cU(t,i))&&(e.addNode({id:o,data:{}}),e.addEdge({id:i.id,source:r,target:o,data:{}}),n(o))})};return e.getAllNodes().forEach(e=>n(e.id)),e.getAllNodes().length},pU=(e,t)=>XV(t.getAllEdges(),n=>e.hasNode(n.source)===e.hasNode(n.target)?1/0:cU(t,n)),mU=(e,t,n)=>{e.getAllNodes().forEach(e=>{let r=t.getNode(e.id);r.data.rank||(r.data.rank=0),r.data.rank+=n})};const hU=e=>{let t=BV(e);oU(t);let n=lU(t);yU(n),gU(n,t);let r,i;for(;r=xU(n);)i=SU(n,t,r),CU(n,t,r,i)},gU=(e,t)=>{let n=QV(e,e.getAllNodes(),`post`,!1);n=n.slice(0,n?.length-1),n.forEach(n=>{_U(e,t,n)})};var _U=(e,t,n)=>{let r=e.getNode(n).data.parent,i=e.getRelatedEdges(n,`both`).find(e=>e.target===r||e.source===r);i.data.cutvalue=vU(e,t,n)};const vU=(e,t,n)=>{let r=e.getNode(n).data.parent,i=!0,a=t.getRelatedEdges(n,`out`).find(e=>e.target===r),o=0;return a||=(i=!1,t.getRelatedEdges(r,`out`).find(e=>e.target===n)),o=a.data.weight,t.getRelatedEdges(n,`both`).forEach(t=>{let a=t.source===n,s=a?t.target:t.source;if(s!==r){let r=a===i,c=t.data.weight;if(o+=r?c:-c,TU(e,n,s)){let t=e.getRelatedEdges(n,`both`).find(e=>e.source===s||e.target===s).data.cutvalue;o+=r?-t:t}}}),o},yU=(e,t=e.getAllNodes()[0].id)=>{bU(e,{},1,t)};var bU=(e,t,n,r,i)=>{var a;let o=n,s=n,c=e.getNode(r);return t[r]=!0,(a=e.getNeighbors(r))==null||a.forEach(n=>{t[n.id]||(s=bU(e,t,s,n.id,r))}),c.data.low=o,c.data.lim=s++,i?c.data.parent=i:delete c.data.parent,s};const xU=e=>e.getAllEdges().find(e=>e.data.cutvalue<0),SU=(e,t,n)=>{let r=n.source,i=n.target;t.getRelatedEdges(r,`out`).find(e=>e.target===i)||(r=n.target,i=n.source);let a=e.getNode(r),o=e.getNode(i),s=a,c=!1;a.data.lim>o.data.lim&&(s=o,c=!0);let l=t.getAllEdges().filter(t=>c===EU(e.getNode(t.source),s)&&c!==EU(e.getNode(t.target),s));return XV(l,e=>cU(t,e))},CU=(e,t,n,r)=>{let i=e.getRelatedEdges(n.source,`both`).find(e=>e.source===n.target||e.target===n.target);i&&e.removeEdge(i.id),e.addEdge({id:`e${Math.random()}`,source:r.source,target:r.target,data:{}}),yU(e),gU(e,t),wU(e,t)};var wU=(e,t)=>{let n=e.getAllNodes().find(e=>!e.data.parent),r=QV(e,n,`pre`,!1);r=r.slice(1),r.forEach(n=>{let r=e.getNode(n).data.parent,i=t.getRelatedEdges(n,`out`).find(e=>e.target===r),a=!1;!i&&t.hasNode(r)&&(i=t.getRelatedEdges(r,`out`).find(e=>e.target===n),a=!0),t.getNode(n).data.rank=(t.hasNode(r)&&t.getNode(r).data.rank||0)+(a?i?.data.minlen:-i?.data.minlen)})},TU=(e,t,n)=>e.getRelatedEdges(t,`both`).find(e=>e.source===n||e.target===n),EU=(e,t)=>t.data.low<=e.data.lim&&e.data.lim<=t.data.lim;const DU=(e,t)=>{switch(t){case`network-simplex`:AU(e);break;case`tight-tree`:kU(e);break;case`longest-path`:OU(e);break;default:kU(e)}};var OU=oU,kU=e=>{sU(e),dU(e)},AU=e=>{hU(e)};const jU=(e,t)=>{let{edgeLabelSpace:n,keepNodeOrder:r,prevGraph:i,rankdir:a,ranksep:o}=t;!r&&i&&NU(e,i);let s=BU(e);n&&(t.ranksep=VU(s,{rankdir:a,ranksep:o}));let c;try{c=MU(s,t)}catch(e){if(e.message===`Not possible to find intersection inside of the rectangle`){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,e);return}throw e}return PU(e,s),c};var MU=(e,t)=>{let{acyclicer:n,ranker:r,rankdir:i=`tb`,nodeOrder:a,keepNodeOrder:o,align:s,nodesep:c=50,edgesep:l=20,ranksep:u=50}=t;XU(e),FV(e,n);let{nestingRoot:d,nodeRankFactor:f}=lH(e);DU(VV(e),r),HU(e),KV(e,f),pH(e,d),GV(e),UU(e),WU(e);let p=[];gH(e,p),UH(e,p),$V(e),o&&BH(e,a),IH(e,o),ZU(e),tH(e,i),aU(e,{align:s,nodesep:c,edgesep:l,ranksep:u}),QU(e),YU(e),vH(e,p),qU(e),nH(e,i);let{width:m,height:h}=GU(e);return KU(e),JU(e),LV(e),{width:m,height:h}},NU=(e,t)=>{e.getAllNodes().forEach(n=>{let r=e.getNode(n.id);if(t.hasNode(n.id)){let e=t.getNode(n.id);r.data.fixorder=e.data._order,delete e.data._order}else delete r.data.fixorder})},PU=(e,t)=>{e.getAllNodes().forEach(n=>{let r=e.getNode(n.id);if(r){let e=t.getNode(n.id);r.data.x=e.data.x,r.data.y=e.data.y,r.data._order=e.data.order,r.data._rank=e.data.rank,t.getChildren(n.id)?.length&&(r.data.width=e.data.width,r.data.height=e.data.height)}}),e.getAllEdges().forEach(n=>{let r=e.getEdge(n.id),i=t.getEdge(n.id);r.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty(`x`)&&(r.data.x=i.data.x,r.data.y=i.data.y)})},FU=[`width`,`height`,`layer`,`fixorder`],IU={width:0,height:0},LU=[`minlen`,`weight`,`width`,`height`,`labeloffset`],RU={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:`r`},zU=[`labelpos`],BU=e=>{let t=new tV({tree:[]});return e.getAllNodes().forEach(n=>{let r=eW(e.getNode(n.id).data),i=Object.assign(Object.assign({},IU),r),a=$U(i,FU);t.hasNode(n.id)||t.addNode({id:n.id,data:Object.assign({},a)});let o=e.hasTreeStructure(`combo`)?e.getParent(n.id,`combo`):e.getParent(n.id);iS(o)||(t.hasNode(o.id)||t.addNode(Object.assign({},o)),t.setParent(n.id,o.id))}),e.getAllEdges().forEach(n=>{let r=eW(e.getEdge(n.id).data),i={};zU?.forEach(e=>{r[e]!==void 0&&(i[e]=r[e])}),t.addEdge({id:n.id,source:n.source,target:n.target,data:Object.assign({},RU,$U(r,LU),i)})}),t},VU=(e,t)=>{let{ranksep:n=0,rankdir:r}=t;return e.getAllNodes().forEach(e=>{isNaN(e.data.layer)||e.data.layer||(e.data.layer=0)}),e.getAllEdges().forEach(e=>{e.data.minlen*=2,e.data.labelpos?.toLowerCase()!==`c`&&(r===`TB`||r===`BT`?e.data.width+=e.data.labeloffset:e.data.height+=e.data.labeloffset)}),n/2},HU=e=>{e.getAllEdges().forEach(t=>{if(t.data.width&&t.data.height){let n=e.getNode(t.source),r=e.getNode(t.target),i={e:t,rank:(r.data.rank-n.data.rank)/2+n.data.rank};zV(e,`edge-proxy`,i,`_ep`)}})},UU=e=>{let t=0;return e.getAllNodes().forEach(n=>{n.data.borderTop&&(n.data.minRank=e.getNode(n.data.borderTop)?.data.rank,n.data.maxRank=e.getNode(n.data.borderBottom)?.data.rank,t=Math.max(t,n.data.maxRank||-1/0))}),t},WU=e=>{e.getAllNodes().forEach(t=>{t.data.dummy===`edge-proxy`&&(e.getEdge(t.data.e.id).data.labelRank=t.data.rank,e.removeNode(t.id))})},GU=(e,t)=>{let n,r=0,i,a=0,{marginx:o=0,marginy:s=0}=t||{},c=e=>{if(!e.data)return;let t=e.data.x,o=e.data.y,s=e.data.width,c=e.data.height;!isNaN(t)&&!isNaN(s)&&(n===void 0&&(n=t-s/2),n=Math.min(n,t-s/2),r=Math.max(r,t+s/2)),!isNaN(o)&&!isNaN(c)&&(i===void 0&&(i=o-c/2),i=Math.min(i,o-c/2),a=Math.max(a,o+c/2))};return e.getAllNodes().forEach(e=>{c(e)}),e.getAllEdges().forEach(e=>{e?.data.hasOwnProperty(`x`)&&c(e)}),n-=o,i-=s,e.getAllNodes().forEach(e=>{e.data.x-=n,e.data.y-=i}),e.getAllEdges().forEach(e=>{var t;(t=e.data.points)==null||t.forEach(e=>{e.x-=n,e.y-=i}),e.data.hasOwnProperty(`x`)&&(e.data.x-=n),e.data.hasOwnProperty(`y`)&&(e.data.y-=i)}),{width:r-n+o,height:a-i+s}},KU=e=>{e.getAllEdges().forEach(t=>{let n=e.getNode(t.source),r=e.getNode(t.target),i,a;t.data.points?(i=t.data.points[0],a=t.data.points[t.data.points.length-1]):(t.data.points=[],i={x:r.data.x,y:r.data.y},a={x:n.data.x,y:n.data.y}),t.data.points.unshift(UV(n.data,i)),t.data.points.push(UV(r.data,a))})},qU=e=>{e.getAllEdges().forEach(e=>{if(e.data.hasOwnProperty(`x`))switch((e.data.labelpos===`l`||e.data.labelpos===`r`)&&(e.data.width-=e.data.labeloffset),e.data.labelpos){case`l`:e.data.x-=e.data.width/2+e.data.labeloffset;break;case`r`:e.data.x+=e.data.width/2+e.data.labeloffset;break}})},JU=e=>{e.getAllEdges().forEach(e=>{var t;e.data.reversed&&((t=e.data.points)==null||t.reverse())})},YU=e=>{e.getAllNodes().forEach(t=>{if(e.getChildren(t.id)?.length){let n=e.getNode(t.id),r=e.getNode(n.data.borderTop),i=e.getNode(n.data.borderBottom),a=e.getNode(n.data.borderLeft[n.data.borderLeft?.length-1]),o=e.getNode(n.data.borderRight[n.data.borderRight?.length-1]);n.data.width=Math.abs(o?.data.x-a?.data.x)||10,n.data.height=Math.abs(i?.data.y-r?.data.y)||10,n.data.x=(a?.data.x||0)+n.data.width/2,n.data.y=(r?.data.y||0)+n.data.height/2}}),e.getAllNodes().forEach(t=>{t.data.dummy===`border`&&e.removeNode(t.id)})},XU=e=>{e.getAllEdges().forEach(t=>{if(t.source===t.target){let n=e.getNode(t.source);n.data.selfEdges||(n.data.selfEdges=[]),n.data.selfEdges.push(t),e.removeEdge(t.id)}})},ZU=e=>{WV(e)?.forEach(t=>{let n=0;t?.forEach((t,r)=>{var i;let a=e.getNode(t);a.data.order=r+n,(i=a.data.selfEdges)==null||i.forEach(t=>{zV(e,`selfedge`,{width:t.data.width,height:t.data.height,rank:a.data.rank,order:r+ ++n,e:t},`_se`)}),delete a.data.selfEdges})})},QU=e=>{e.getAllNodes().forEach(t=>{let n=e.getNode(t.id);if(n.data.dummy===`selfedge`){let r=e.getNode(n.data.e.source),i=r.data.x+r.data.width/2,a=r.data.y,o=n.data.x-i,s=r.data.height/2;e.hasEdge(n.data.e.id)?e.updateEdgeData(n.data.e.id,n.data.e.data):e.addEdge({id:n.data.e.id,source:n.data.e.source,target:n.data.e.target,data:n.data.e.data}),e.removeNode(t.id),n.data.e.data.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{y:a,x:i+o},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.data.e.data.x=n.data.x,n.data.e.data.y=n.data.y}})},$U=(e,t)=>{let n={};return t?.forEach(t=>{e[t]!==void 0&&(n[t]=+e[t])}),n},eW=(e={})=>{let t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t};const tW=Array.isArray,nW=e=>{let t=[],n=e.length;for(let r=0;r<n;r+=1){t[r]=[];for(let i=0;i<n;i+=1)r===i?t[r][i]=0:e[r][i]===0||!e[r][i]?t[r][i]=1/0:t[r][i]=e[r][i]}for(let e=0;e<n;e+=1)for(let r=0;r<n;r+=1)for(let i=0;i<n;i+=1)t[r][i]>t[r][e]+t[e][i]&&(t[r][i]=t[r][e]+t[e][i]);return t},rW=(e,t)=>{let{nodes:n,edges:r}=e,i=[],a={};if(!n)throw Error(`invalid nodes data!`);return n&&n.forEach((e,t)=>{a[e.id]=t,i.push([])}),r?.forEach(e=>{let{source:n,target:r}=e,o=a[n],s=a[r];o===void 0||s===void 0||(i[o][s]=1,t||(i[s][o]=1))}),i},iW=(e,t)=>{let n=[];return e.forEach(e=>{let r=[];e.forEach(e=>{r.push(e*t)}),n.push(r)}),n},aW=e=>{let t=1/0,n=1/0,r=-1/0,i=-1/0;return e.forEach(e=>{let a=e.data.size;tW(a)?a.length===1&&(a=[a[0],a[0]]):K(a)?a=[a,a]:(a===void 0||isNaN(a))&&(a=[30,30]);let o=[a[0]/2,a[1]/2],s=e.data.x-o[0],c=e.data.x+o[0],l=e.data.y-o[1],u=e.data.y+o[1];t>s&&(t=s),n>l&&(n=l),r<c&&(r=c),i<u&&(i=u)}),{minX:t,minY:n,maxX:r,maxY:i}},oW=(e,t)=>Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)),sW=(e,t,n,r=`TB`,i,a={})=>{if(!t?.length)return;let{stopBranchFn:o,stopAllFn:s}=a;for(let c=0;c<t.length;c++){let l=t[c];if(e.hasNode(l.id)&&!o?.(l)){if(s?.(l))return;r===`TB`&&n(l),sW(e,e.getChildren(l.id,i),n,r,i,a),r!==`TB`&&n(l)}}},cW=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){let t=[];return e.forEach(e=>{t.push(e)}),t.map(e=>cW(e))}if(typeof e==`object`){let t={};return Object.keys(e).forEach(n=>{t[n]=cW(e[n])}),t}return e},lW=(e,t)=>{let n=cW(e);return n.data=n.data||{},t&&(K(n.data.x)||(n.data.x=Math.random()*t[0]),K(n.data.y)||(n.data.y=Math.random()*t[1])),n};function uW(e){if(!e)return[0,0,0];if(K(e))return[e,e,e];if(e.length===0)return[0,0,0];let[t,n=t,r=t]=e;return[t,n,r]}function dW(e,t){let n;return n=rS(t)?t:K(t)?()=>t:()=>e,n}function fW(e,t,n=!0){return!t&&t!==0?t=>{let{size:r}=t.data||{};return r?Array.isArray(r)?n?Math.max(...r)||e:r:oS(r)&&r.width&&r.height?n?Math.max(r.width,r.height)||e:[r.width,r.height]:r:e}:rS(t)?t:K(t)?()=>t:Array.isArray(t)?()=>n?Math.max(...t)||e:t:oS(t)&&t.width&&t.height?()=>n?Math.max(t.width,t.height)||e:[t.width,t.height]:()=>e}const pW=(e,t,n=10)=>{let r,i=typeof t==`function`?t:()=>t||0;return r=e?Array.isArray(e)?t=>e:rS(e)?e:t=>e:e=>{if(e.data?.bboxSize)return e.data?.bboxSize;if(e.data?.size){let t=e.data.size;return Array.isArray(t)?t:oS(t)?[t.width,t.height]:t}return n},e=>{let t=r(e),n=i(e);return Math.max(...uW(t))+n}};var mW={rankdir:`TB`,nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:`tight-tree`,controlPoints:!1,radial:!1,focusNode:null},hW=class{constructor(e={}){this.options=e,this.id=`antv-dagre`,this.options=Object.assign(Object.assign({},mW),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,t)})}genericDagreLayout(e,t,n){return En(this,void 0,void 0,function*(){let{nodeSize:r,align:i,rankdir:a=`TB`,ranksep:o,nodesep:s,ranksepFunc:c,nodesepFunc:l,edgeLabelSpace:u,ranker:d,nodeOrder:f,begin:p,controlPoints:m,radial:h,sortByCombo:g,preset:_}=Object.assign(Object.assign({},this.options),n),v=new tV({tree:[]}),y=dW(o||50,c),b=dW(s||50,l),x=b,S=y;(a===`LR`||a===`RL`)&&(x=y,S=b);let C=fW(10,r,!1),w=t.getAllNodes(),T=t.getAllEdges();w.forEach(e=>{let t=uW(C(e)),n=S(e),r=x(e),i=t[0]+2*r,a=t[1]+2*n,o=e.data.layer;K(o)?v.addNode({id:e.id,data:{width:i,height:a,layer:o}}):v.addNode({id:e.id,data:{width:i,height:a}})}),g&&(v.attachTreeStructure(`combo`),w.forEach(e=>{let{parentId:t}=e.data;t!==void 0&&v.hasNode(t)&&v.setParent(e.id,t,`combo`)})),T.forEach(e=>{v.addEdge({id:e.id,source:e.source,target:e.target,data:{weight:e.data.weight||1}})});let E;_?.length&&(E=new tV({nodes:_})),jU(v,{prevGraph:E,edgeLabelSpace:u,keepNodeOrder:!!f,nodeOrder:f||[],acyclicer:`greedy`,ranker:d,rankdir:a,nodesep:s,align:i});let D=[0,0];if(p){let e=1/0,t=1/0;v.getAllNodes().forEach(n=>{e>n.data.x&&(e=n.data.x),t>n.data.y&&(t=n.data.y)}),v.getAllEdges().forEach(n=>{var r;(r=n.data.points)==null||r.forEach(n=>{e>n.x&&(e=n.x),t>n.y&&(t=n.y)})}),D[0]=p[0]-e,D[1]=p[1]-t}let O=a===`LR`||a===`RL`;if(!h){let e=new Set,t=a===`BT`||a===`RL`?(e,t)=>t-e:(e,t)=>e-t;v.getAllNodes().forEach(t=>{t.data.x=t.data.x+D[0],t.data.y=t.data.y+D[1],e.add(O?t.data.x:t.data.y)});let n=Array.from(e).sort(t),r=O?(e,t)=>e.x!==t.x:(e,t)=>e.y!==t.y,i=O?(e,t,n)=>{let r=Math.max(t.y,n.y),i=Math.min(t.y,n.y);return e.filter(e=>e.y<=r&&e.y>=i)}:(e,t,n)=>{let r=Math.max(t.x,n.x),i=Math.min(t.x,n.x);return e.filter(e=>e.x<=r&&e.x>=i)};v.getAllEdges().forEach((e,t)=>{u&&m&&e.data.type!==`loop`&&(e.data.controlPoints=gW(e.data.points?.map(({x:e,y:t})=>({x:e+D[0],y:t+D[1]})),v.getNode(e.source),v.getNode(e.target),n,O,r,i))})}let k=[];k=v.getAllNodes().map(e=>lW(e));let A=v.getAllEdges();return e&&(k.forEach(e=>{t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})}),A.forEach(e=>{t.mergeEdgeData(e.id,{controlPoints:e.data.controlPoints})})),{nodes:k,edges:A}})}},gW=(e,t,n,r,i,a,o)=>{let s=e?.slice(1,e.length-1)||[];if(t&&n){let{x:e,y:c}=t.data,{x:l,y:u}=n.data;if(i&&(e=t.data.y,c=t.data.x,l=n.data.y,u=n.data.x),u!==c&&e!==l){let d=r.indexOf(c),f=r[d+1];if(f){let e=s[0],t=i?{x:(c+f)/2,y:e?.y||l}:{x:e?.x||l,y:(c+f)/2};(!e||a(e,t))&&s.unshift(t)}let p=r.indexOf(u),m=Math.abs(p-d);if(m===1)s=o(s,t.data,n.data),s.length||s.push(i?{x:(c+u)/2,y:e}:{x:e,y:(c+u)/2});else if(m>1){let t=r[p-1];if(t){let n=s[s.length-1],r=i?{x:(u+t)/2,y:n?.y||l}:{x:n?.x||e,y:(u+t)/2};(!n||a(n,r))&&s.push(r)}}}}return s};const _W=(e,t,n)=>{let r=e.getAllNodes(),i=e.getAllEdges();if(!r?.length)return{nodes:[],edges:i};if(r.length===1)return t&&e.mergeNodeData(r[0].id,{x:n[0],y:n[1]}),{nodes:[Object.assign(Object.assign({},r[0]),{data:Object.assign(Object.assign({},r[0].data),{x:n[0],y:n[1]})})],edges:i}};var vW={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1},yW=class{constructor(e={}){this.options=e,this.id=`circular`,this.options=Object.assign(Object.assign({},vW),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,e,t)})}genericCircularLayout(e,t,n){return En(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.options),n),{width:i,height:a,center:o,divisions:s,startAngle:c=0,endAngle:l=2*Math.PI,angleRatio:u,ordering:d,clockwise:f,nodeSpacing:p,nodeSize:m}=r,h=t.getAllNodes(),g=t.getAllEdges(),[_,v,y]=SW(i,a,o),b=h?.length;if(!b||b===1)return _W(t,e,y);let x=(l-c)/b,{radius:S,startRadius:C,endRadius:w}=r;if(p){let e=dW(10,p),t=fW(10,m),n=-1/0;h.forEach(e=>{let r=t(e);n<r&&(n=r)});let r=0;h.forEach((t,i)=>{i===0?r+=n||10:r+=(e(t)||0)+(n||10)}),S=r/(2*Math.PI)}else !S&&!C&&!w?S=Math.min(v,_)/2:!C&&w?C=w:C&&!w&&(w=C);let T=x*u,E=[];E=d===`topology`?bW(t,h):d===`topology-directed`?bW(t,h,!0):d===`degree`?xW(t,h):h.map(e=>lW(e));let D=Math.ceil(b/s);for(let e=0;e<b;++e){let t=S;!t&&C!==null&&w!==null&&(t=C+e*(w-C)/(b-1)),t||=10+e*100/(b-1);let n=c+e%D*T+2*Math.PI/s*Math.floor(e/D);f||(n=l-e%D*T-2*Math.PI/s*Math.floor(e/D)),E[e].data.x=y[0]+Math.cos(n)*t,E[e].data.y=y[1]+Math.sin(n)*t}return e&&E.forEach(e=>{t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})}),{nodes:E,edges:g}})}},bW=(e,t,n=!1)=>{let r=[lW(t[0])],i={},a=t.length;i[t[0].id]=!0;let o=0;return t.forEach((s,c)=>{if(c!==0)if((c===a-1||e.getDegree(s.id,`both`)!==e.getDegree(t[c+1].id,`both`)||e.areNeighbors(r[o].id,s.id))&&!i[s.id])r.push(lW(s)),i[s.id]=!0,o++;else{let c=n?e.getSuccessors(r[o].id):e.getNeighbors(r[o].id),l=!1;for(let t=0;t<c.length;t++){let n=c[t];if(e.getDegree(n.id)===e.getDegree(s.id)&&!i[n.id]){r.push(lW(n)),i[n.id]=!0,l=!0;break}}let u=0;for(;!l&&(i[t[u].id]||(r.push(lW(t[u])),i[t[u].id]=!0,l=!0),u++,u!==a););}}),r};function xW(e,t){let n=[];return t.forEach((e,t)=>{n.push(lW(e))}),n.sort((t,n)=>e.getDegree(t.id,`both`)-e.getDegree(n.id,`both`)),n}var SW=(e,t,n)=>{let r=e,i=t,a=n;return!r&&typeof window<`u`&&(r=window.innerWidth),!i&&typeof window<`u`&&(i=window.innerHeight),a||=[r/2,i/2],[r,i,a]},CW={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:`degree`},wW=class{constructor(e={}){this.options=e,this.id=`concentric`,this.options=Object.assign(Object.assign({},CW),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,e,t)})}genericConcentricLayout(e,t,n){return En(this,void 0,void 0,function*(){let{center:r,width:i,height:a,sortBy:o,maxLevelDiff:s,sweep:c,clockwise:l,equidistant:u,preventOverlap:d,startAngle:f=3/2*Math.PI,nodeSize:p,nodeSpacing:m}=Object.assign(Object.assign({},this.options),n),h=t.getAllNodes(),g=t.getAllEdges(),_=!i&&typeof window<`u`?window.innerWidth:i,v=!a&&typeof window<`u`?window.innerHeight:a,y=r||[_/2,v/2];if(!h?.length||h.length===1)return _W(t,e,y);let b=[],x,S=0;tW(p)?x=Math.max(p[0],p[1]):rS(p)?(x=-1/0,h.forEach(e=>{let t=Math.max(...uW(p(e)));t>x&&(x=t)})):x=p,tW(m)?S=Math.max(m[0],m[1]):K(m)&&(S=m),h.forEach(e=>{let t=lW(e);b.push(t);let n=x,{data:r}=t;tW(r.size)?n=Math.max(r.size[0],r.size[1]):K(r.size)?n=r.size:oS(r.size)&&(n=Math.max(r.size.width,r.size.height)),x=Math.max(x,n),rS(m)&&(S=Math.max(m(e),S))});let C={};b.forEach((e,t)=>{C[e.id]=t});let w=o;(!_S(w)||b[0].data[w]===void 0)&&(w=`degree`),w===`degree`?b.sort((e,n)=>t.getDegree(n.id,`both`)-t.getDegree(e.id,`both`)):b.sort((e,t)=>t.data[w]-e.data[w]);let T=b[0],E=(s||(w===`degree`?t.getDegree(T.id,`both`):T.data[w]))/4,D=[{nodes:[]}],O=D[0];b.forEach(e=>{if(O.nodes.length>0){let n=w===`degree`?Math.abs(t.getDegree(O.nodes[0].id,`both`)-t.getDegree(e.id,`both`)):Math.abs(O.nodes[0].data[w]-e.data[w]);E&&n>=E&&(O={nodes:[]},D.push(O))}O.nodes.push(e)});let k=x+S;if(!d){let e=D.length>0&&D[0].nodes.length>1,t=(Math.min(_,v)/2-k)/(D.length+(e?1:0));k=Math.min(k,t)}let A=0;if(D.forEach(e=>{if(e.dTheta=(c===void 0?2*Math.PI-2*Math.PI/e.nodes.length:c)/Math.max(1,e.nodes.length-1),e.nodes.length>1&&d){let t=Math.cos(e.dTheta)-Math.cos(0),n=Math.sin(e.dTheta)-Math.sin(0),r=Math.sqrt(k*k/(t*t+n*n));A=Math.max(r,A)}e.r=A,A+=k}),u){let e=0,t=0;for(let n=0;n<D.length;n++){let r=(D[n].r||0)-t;e=Math.max(e,r)}t=0,D.forEach((n,r)=>{r===0&&(t=n.r||0),n.r=t,t+=e})}return D.forEach(e=>{let t=e.dTheta||0,n=e.r||0;e.nodes.forEach((e,r)=>{let i=f+(l?1:-1)*t*r;e.data.x=y[0]+n*Math.cos(i),e.data.y=y[1]+n*Math.sin(i)})}),e&&b.forEach(e=>t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})),{nodes:b,edges:g}})}};function TW(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return EW(this.cover(t,n),t,n,e)}function EW(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a=e._root,o={data:r},s=e._x0,c=e._y0,l=e._x1,u=e._y1,d,f,p,m,h,g,_,v;if(!a)return e._root=o,e;for(;a.length;)if((h=t>=(d=(s+l)/2))?s=d:l=d,(g=n>=(f=(c+u)/2))?c=f:u=f,i=a,!(a=a[_=g<<1|h]))return i[_]=o,e;if(p=+e._x.call(null,a.data),m=+e._y.call(null,a.data),t===p&&n===m)return o.next=a,i?i[_]=o:e._root=o,e;do i=i?i[_]=[,,,,]:e._root=[,,,,],(h=t>=(d=(s+l)/2))?s=d:l=d,(g=n>=(f=(c+u)/2))?c=f:u=f;while((_=g<<1|h)==(v=(m>=f)<<1|p>=d));return i[v]=a,i[_]=o,e}function DW(e){var t,n,r=e.length,i,a,o=Array(r),s=Array(r),c=1/0,l=1/0,u=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=i,s[n]=a,i<c&&(c=i),i>u&&(u=i),a<l&&(l=a),a>d&&(d=a));if(c>u||l>d)return this;for(this.cover(c,l).cover(u,d),n=0;n<r;++n)EW(this,o[n],s[n],e[n]);return this}function OW(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var o=i-n||1,s=this._root,c,l;n>e||e>=i||r>t||t>=a;)switch(l=(t<r)<<1|e<n,c=[,,,,],c[l]=s,s=c,o*=2,l){case 0:i=n+o,a=r+o;break;case 1:n=i-o,a=r+o;break;case 2:i=n+o,r=a-o;break;case 3:n=i-o,r=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function kW(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function AW(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function jW(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function MW(e,t,n){var r,i=this._x0,a=this._y0,o,s,c,l,u=this._x1,d=this._y1,f=[],p=this._root,m,h;for(p&&f.push(new jW(p,i,a,u,d)),n==null?n=1/0:(i=e-n,a=t-n,u=e+n,d=t+n,n*=n);m=f.pop();)if(!(!(p=m.node)||(o=m.x0)>u||(s=m.y0)>d||(c=m.x1)<i||(l=m.y1)<a))if(p.length){var g=(o+c)/2,_=(s+l)/2;f.push(new jW(p[3],g,_,c,l),new jW(p[2],o,_,g,l),new jW(p[1],g,s,c,_),new jW(p[0],o,s,g,_)),(h=(t>=_)<<1|e>=g)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-h],f[f.length-1-h]=m)}else{var v=e-+this._x.call(null,p.data),y=t-+this._y.call(null,p.data),b=v*v+y*y;if(b<n){var x=Math.sqrt(n=b);i=e-x,a=t-x,u=e+x,d=t+x,r=p.data}}return r}function NW(e){if(isNaN(u=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,a,o=this._x0,s=this._y0,c=this._x1,l=this._y1,u,d,f,p,m,h,g,_;if(!n)return this;if(n.length)for(;;){if((m=u>=(f=(o+c)/2))?o=f:c=f,(h=d>=(p=(s+l)/2))?s=p:l=p,t=n,!(n=n[g=h<<1|m]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,_=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[g]=a:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=a,this)}function PW(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function FW(){return this._root}function IW(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function LW(e){var t=[],n,r=this._root,i,a,o,s,c;for(r&&t.push(new jW(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,a=n.x0,o=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(a+s)/2,u=(o+c)/2;(i=r[3])&&t.push(new jW(i,l,u,s,c)),(i=r[2])&&t.push(new jW(i,a,u,l,c)),(i=r[1])&&t.push(new jW(i,l,o,s,u)),(i=r[0])&&t.push(new jW(i,a,o,l,u))}return this}function RW(e){var t=[],n=[],r;for(this._root&&t.push(new jW(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(o+c)/2,d=(s+l)/2;(a=i[0])&&t.push(new jW(a,o,s,u,d)),(a=i[1])&&t.push(new jW(a,u,s,c,d)),(a=i[2])&&t.push(new jW(a,o,d,u,l)),(a=i[3])&&t.push(new jW(a,u,d,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function zW(e){return e[0]}function BW(e){return arguments.length?(this._x=e,this):this._x}function VW(e){return e[1]}function HW(e){return arguments.length?(this._y=e,this):this._y}function UW(e,t,n){var r=new WW(t??zW,n??VW,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function WW(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function GW(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var KW=UW.prototype=WW.prototype;KW.copy=function(){var e=new WW(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=GW(t),e;for(n=[{source:t,target:e._root=[,,,,]}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=[,,,,]}):t.target[i]=GW(r));return e},KW.add=TW,KW.addAll=DW,KW.cover=OW,KW.data=kW,KW.extent=AW,KW.find=MW,KW.remove=NW,KW.removeAll=PW,KW.root=FW,KW.size=IW,KW.visit=LW,KW.visitAfter=RW,KW.x=BW,KW.y=HW;function qW(e){let t=+this._x.call(null,e),n=+this._y.call(null,e),r=+this._z.call(null,e);return JW(this.cover(t,n,r),t,n,r,e)}function JW(e,t,n,r,i){if(isNaN(t)||isNaN(n)||isNaN(r))return e;var a,o=e._root,s={data:i},c=e._x0,l=e._y0,u=e._z0,d=e._x1,f=e._y1,p=e._z1,m,h,g,_,v,y,b,x,S,C,w;if(!o)return e._root=s,e;for(;o.length;)if((b=t>=(m=(c+d)/2))?c=m:d=m,(x=n>=(h=(l+f)/2))?l=h:f=h,(S=r>=(g=(u+p)/2))?u=g:p=g,a=o,!(o=o[C=S<<2|x<<1|b]))return a[C]=s,e;if(_=+e._x.call(null,o.data),v=+e._y.call(null,o.data),y=+e._z.call(null,o.data),t===_&&n===v&&r===y)return s.next=o,a?a[C]=s:e._root=s,e;do a=a?a[C]=Array(8):e._root=Array(8),(b=t>=(m=(c+d)/2))?c=m:d=m,(x=n>=(h=(l+f)/2))?l=h:f=h,(S=r>=(g=(u+p)/2))?u=g:p=g;while((C=S<<2|x<<1|b)==(w=(y>=g)<<2|(v>=h)<<1|_>=m));return a[w]=o,a[C]=s,e}function YW(e){Array.isArray(e)||(e=Array.from(e));let t=e.length,n=new Float64Array(t),r=new Float64Array(t),i=new Float64Array(t),a=1/0,o=1/0,s=1/0,c=-1/0,l=-1/0,u=-1/0;for(let d=0,f,p,m,h;d<t;++d)isNaN(p=+this._x.call(null,f=e[d]))||isNaN(m=+this._y.call(null,f))||isNaN(h=+this._z.call(null,f))||(n[d]=p,r[d]=m,i[d]=h,p<a&&(a=p),p>c&&(c=p),m<o&&(o=m),m>l&&(l=m),h<s&&(s=h),h>u&&(u=h));if(a>c||o>l||s>u)return this;this.cover(a,o,s).cover(c,l,u);for(let a=0;a<t;++a)JW(this,n[a],r[a],i[a],e[a]);return this}function XW(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,a=this._z0,o=this._x1,s=this._y1,c=this._z1;if(isNaN(r))o=(r=Math.floor(e))+1,s=(i=Math.floor(t))+1,c=(a=Math.floor(n))+1;else{for(var l=o-r||1,u=this._root,d,f;r>e||e>=o||i>t||t>=s||a>n||n>=c;)switch(f=(n<a)<<2|(t<i)<<1|e<r,d=Array(8),d[f]=u,u=d,l*=2,f){case 0:o=r+l,s=i+l,c=a+l;break;case 1:r=o-l,s=i+l,c=a+l;break;case 2:o=r+l,i=s-l,c=a+l;break;case 3:r=o-l,i=s-l,c=a+l;break;case 4:o=r+l,s=i+l,a=c-l;break;case 5:r=o-l,s=i+l,a=c-l;break;case 6:o=r+l,i=s-l,a=c-l;break;case 7:r=o-l,i=s-l,a=c-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=c,this}function ZW(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function QW(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function $W(e,t,n,r,i,a,o){this.node=e,this.x0=t,this.y0=n,this.z0=r,this.x1=i,this.y1=a,this.z1=o}function eG(e,t,n,r){var i,a=this._x0,o=this._y0,s=this._z0,c,l,u,d,f,p,m=this._x1,h=this._y1,g=this._z1,_=[],v=this._root,y,b;for(v&&_.push(new $W(v,a,o,s,m,h,g)),r==null?r=1/0:(a=e-r,o=t-r,s=n-r,m=e+r,h=t+r,g=n+r,r*=r);y=_.pop();)if(!(!(v=y.node)||(c=y.x0)>m||(l=y.y0)>h||(u=y.z0)>g||(d=y.x1)<a||(f=y.y1)<o||(p=y.z1)<s))if(v.length){var x=(c+d)/2,S=(l+f)/2,C=(u+p)/2;_.push(new $W(v[7],x,S,C,d,f,p),new $W(v[6],c,S,C,x,f,p),new $W(v[5],x,l,C,d,S,p),new $W(v[4],c,l,C,x,S,p),new $W(v[3],x,S,u,d,f,C),new $W(v[2],c,S,u,x,f,C),new $W(v[1],x,l,u,d,S,C),new $W(v[0],c,l,u,x,S,C)),(b=(n>=C)<<2|(t>=S)<<1|e>=x)&&(y=_[_.length-1],_[_.length-1]=_[_.length-1-b],_[_.length-1-b]=y)}else{var w=e-+this._x.call(null,v.data),T=t-+this._y.call(null,v.data),E=n-+this._z.call(null,v.data),D=w*w+T*T+E*E;if(D<r){var O=Math.sqrt(r=D);a=e-O,o=t-O,s=n-O,m=e+O,h=t+O,g=n+O,i=v.data}}return i}var tG=(e,t,n,r,i,a)=>Math.sqrt((e-r)**2+(t-i)**2+(n-a)**2);function nG(e,t,n,r){let i=[],a=e-r,o=t-r,s=n-r,c=e+r,l=t+r,u=n+r;return this.visit((d,f,p,m,h,g,_)=>{if(!d.length)do{let a=d.data;tG(e,t,n,this._x(a),this._y(a),this._z(a))<=r&&i.push(a)}while(d=d.next);return f>c||p>l||m>u||h<a||g<o||_<s}),i}function rG(e){if(isNaN(f=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e))||isNaN(m=+this._z.call(null,e)))return this;var t,n=this._root,r,i,a,o=this._x0,s=this._y0,c=this._z0,l=this._x1,u=this._y1,d=this._z1,f,p,m,h,g,_,v,y,b,x,S;if(!n)return this;if(n.length)for(;;){if((v=f>=(h=(o+l)/2))?o=h:l=h,(y=p>=(g=(s+u)/2))?s=g:u=g,(b=m>=(_=(c+d)/2))?c=_:d=_,t=n,!(n=n[x=b<<2|y<<1|v]))return this;if(!n.length)break;(t[x+1&7]||t[x+2&7]||t[x+3&7]||t[x+4&7]||t[x+5&7]||t[x+6&7]||t[x+7&7])&&(r=t,S=x)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[x]=a:delete t[x],(n=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&n===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[S]=n:this._root=n),this):(this._root=a,this)}function iG(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function aG(){return this._root}function oG(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function sG(e){var t=[],n,r=this._root,i,a,o,s,c,l,u;for(r&&t.push(new $W(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=t.pop();)if(!e(r=n.node,a=n.x0,o=n.y0,s=n.z0,c=n.x1,l=n.y1,u=n.z1)&&r.length){var d=(a+c)/2,f=(o+l)/2,p=(s+u)/2;(i=r[7])&&t.push(new $W(i,d,f,p,c,l,u)),(i=r[6])&&t.push(new $W(i,a,f,p,d,l,u)),(i=r[5])&&t.push(new $W(i,d,o,p,c,f,u)),(i=r[4])&&t.push(new $W(i,a,o,p,d,f,u)),(i=r[3])&&t.push(new $W(i,d,f,s,c,l,p)),(i=r[2])&&t.push(new $W(i,a,f,s,d,l,p)),(i=r[1])&&t.push(new $W(i,d,o,s,c,f,p)),(i=r[0])&&t.push(new $W(i,a,o,s,d,f,p))}return this}function cG(e){var t=[],n=[],r;for(this._root&&t.push(new $W(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=t.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,c=r.z0,l=r.x1,u=r.y1,d=r.z1,f=(o+l)/2,p=(s+u)/2,m=(c+d)/2;(a=i[0])&&t.push(new $W(a,o,s,c,f,p,m)),(a=i[1])&&t.push(new $W(a,f,s,c,l,p,m)),(a=i[2])&&t.push(new $W(a,o,p,c,f,u,m)),(a=i[3])&&t.push(new $W(a,f,p,c,l,u,m)),(a=i[4])&&t.push(new $W(a,o,s,m,f,p,d)),(a=i[5])&&t.push(new $W(a,f,s,m,l,p,d)),(a=i[6])&&t.push(new $W(a,o,p,m,f,u,d)),(a=i[7])&&t.push(new $W(a,f,p,m,l,u,d))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function lG(e){return e[0]}function uG(e){return arguments.length?(this._x=e,this):this._x}function dG(e){return e[1]}function fG(e){return arguments.length?(this._y=e,this):this._y}function pG(e){return e[2]}function mG(e){return arguments.length?(this._z=e,this):this._z}function hG(e,t,n,r){var i=new gG(t??lG,n??dG,r??pG,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function gG(e,t,n,r,i,a,o,s,c){this._x=e,this._y=t,this._z=n,this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=c,this._root=void 0}function _G(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var vG=hG.prototype=gG.prototype;vG.copy=function(){var e=new gG(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=_G(t),e;for(n=[{source:t,target:e._root=Array(8)}];t=n.pop();)for(var i=0;i<8;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=Array(8)}):t.target[i]=_G(r));return e},vG.add=qW,vG.addAll=YW,vG.cover=XW,vG.data=ZW,vG.extent=QW,vG.find=eG,vG.findAllWithinRadius=nG,vG.remove=rG,vG.removeAll=iG,vG.root=aG,vG.size=oG,vG.visit=sG,vG.visitAfter=cG,vG.x=uG,vG.y=fG,vG.z=mG;var yG=.81,bG=.1;function xG(e,t,n,r,i=2){let a=t/n,o=e.getAllNodes(),s=o.map((e,t)=>{let{nodeStrength:n,x:r,y:i,z:o,size:s}=e.data;return{x:r,y:i,z:o,size:s,index:t,id:e.id,vx:0,vy:0,vz:0,weight:a*n}}),c=(i===2?UW(s,e=>e.x,e=>e.y):hG(s,e=>e.x,e=>e.y,e=>e.z)).visitAfter(SG),l=new Map;return s.forEach(e=>{l.set(e.id,e),wG(e,c,i)}),s.map((e,t)=>{let{id:n,data:i}=o[t],{mass:a=1}=i;r[n]={x:e.vx/a,y:e.vy/a,z:e.vz/a}}),r}function SG(e){let t=0,n=0,r=0,i=0,a=0,o=e.length;if(o){for(let s=0;s<o;s++){let o=e[s];o&&o.weight&&(t+=o.weight,n+=o.x*o.weight,r+=o.y*o.weight,i+=o.z*o.weight,a+=o.size*o.weight)}e.x=n/t,e.y=r/t,e.z=i/t,e.size=a/t,e.weight=t}else{let t=e;e.x=t.data.x,e.y=t.data.y,e.z=t.data.z,e.size=t.data.size,e.weight=t.data.weight}}var CG=(e,t,n,r,i,a,o)=>{if(e.data?.id===a.id)return;let s=[n,r,i][o-1],c=a.x-e.x||bG,l=a.y-e.y||bG,u=a.z-e.z||bG,d=[c,l,u],f=s-t,p=0;for(let e=0;e<o;e++)p+=d[e]*d[e];let m=Math.sqrt(p)*p;if(f*f*yG<p){let t=e.weight/m;return a.vx+=c*t,a.vy+=l*t,a.vz+=u*t,!0}if(e.length)return!1;if(e.data!==a){let t=e.data.weight/m;a.vx+=c*t,a.vy+=l*t,a.vz+=u*t}};function wG(e,t,n){t.visit((t,r,i,a,o)=>CG(t,r,i,a,o,e,n))}var TG={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:`mean`},EG=class{constructor(e={}){this.options=e,this.id=`force`,this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},TG),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericForceLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,e,t)})}stop(){this.timeInterval&&typeof window<`u`&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let t=0;(this.judgingDistance>this.lastOptions.minMovement||t<1)&&t<e;t++)this.runOneStep(this.lastCalcGraph,this.lastGraph,t,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);let t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(e=>this.lastGraph.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:this.options.dimensions===3?e.data.z:void 0})),t}genericForceLayout(e,t,n){return En(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.options),n),i=t.getAllNodes(),a=t.getAllEdges(),o=this.formatOptions(r,t),{dimensions:s,width:c,height:l,nodeSize:u,getMass:d,nodeStrength:f,edgeStrength:p,linkDistance:m}=o,h=i.map((e,t)=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{x:K(e.data.x)?e.data.x:Math.random()*c,y:K(e.data.y)?e.data.y:Math.random()*l,z:K(e.data.z)?e.data.z:Math.random()*Math.sqrt(c*l),size:u(e)||30,mass:d(e),nodeStrength:f(e)})})),g=a.map(e=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{edgeStrength:p(e),linkDistance:m(e,t.getNode(e.source),t.getNode(e.target))})}));if(!i?.length)return this.lastResult={nodes:[],edges:a},{nodes:[],edges:a};let _={};i.forEach((e,t)=>{_[e.id]={x:0,y:0,z:0}});let v=new tV({nodes:h,edges:g});this.formatCentripetal(o,v);let{maxIteration:y,minMovement:b,onTick:x}=o;if(this.lastLayoutNodes=h,this.lastLayoutEdges=g,this.lastAssign=e,this.lastGraph=t,this.lastCalcGraph=v,this.lastOptions=o,this.lastVelMap=_,typeof window>`u`)return;let S=0;return new Promise(n=>{this.timeInterval=window.setInterval(()=>{(!i||!this.running)&&n({nodes:jG(t,h),edges:a}),this.runOneStep(v,t,S,_,o),this.updatePosition(t,v,_,o),e&&h.forEach(e=>t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:s===3?e.data.z:void 0})),x?.({nodes:jG(t,h),edges:a}),S++,(S>=y||this.judgingDistance<b)&&(window.clearInterval(this.timeInterval),n({nodes:jG(t,h),edges:a}))},0),this.running=!0})})}formatOptions(e,t){let n=Object.assign({},e),{width:r,height:i,getMass:a}=e;return n.width=!r&&typeof window<`u`?window.innerWidth:r,n.height=!i&&typeof window<`u`?window.innerHeight:i,e.center||(n.center=[n.width/2,n.height/2]),a||(n.getMass=e=>{let n=1;K(e?.data.mass)&&(n=e?.data.mass);let r=t.getDegree(e.id,`both`);return!r||r<5?n:r*5*n}),n.nodeSize=pW(e.nodeSize,e.nodeSpacing),n.linkDistance=e.linkDistance?dW(1,e.linkDistance):e=>1+n.nodeSize(t.getNode(e.source))+n.nodeSize(t.getNode(e.target)),n.nodeStrength=dW(1,e.nodeStrength),n.edgeStrength=dW(1,e.edgeStrength),n}formatCentripetal(e,t){let{dimensions:n,centripetalOptions:r,center:i,clusterNodeStrength:a,leafCluster:o,clustering:s,nodeClusterBy:c}=e,l=t.getAllNodes(),u=r||{leaf:2,single:2,others:1,center:e=>({x:i[0],y:i[1],z:n===3?i[2]:void 0})};typeof a!=`function`&&(e.clusterNodeStrength=e=>a);let d,f;if(o&&c&&(d=DG(t,c),f=Array.from(new Set(l?.map(e=>e.data[c])))||[],e.centripetalOptions=Object.assign(u,{single:100,leaf:t=>{let{siblingLeaves:n,sameTypeLeaves:r}=d[t.id]||{};return r?.length===n?.length||f?.length===1?1:e.clusterNodeStrength(t)},others:1,center:e=>{let n=t.getDegree(e.id,`both`);if(!n)return{x:100,y:100,z:0};let r;if(n===1){let{sameTypeLeaves:t=[]}=d[e.id]||{};t.length===1?r=void 0:t.length>1&&(r=AG(t))}else r=void 0;return{x:r?.x,y:r?.y,z:r?.z}}})),s&&c){d||=DG(t,c),f||=Array.from(new Set(l.map(e=>e.data[c]))),f=f.filter(e=>e!==void 0);let n={};f.forEach(e=>{let r=l.filter(t=>t.data[c]===e).map(e=>t.getNode(e.id));n[e]=AG(r)}),e.centripetalOptions=Object.assign(u,{single:t=>e.clusterNodeStrength(t),leaf:t=>e.clusterNodeStrength(t),others:t=>e.clusterNodeStrength(t),center:e=>{let t=n[e.data[c]];return{x:t?.x,y:t?.y,z:t?.z}}})}let{leaf:p,single:m,others:h}=e.centripetalOptions||{};p&&typeof p!=`function`&&(e.centripetalOptions.leaf=()=>p),m&&typeof m!=`function`&&(e.centripetalOptions.single=()=>m),h&&typeof h!=`function`&&(e.centripetalOptions.others=()=>h)}runOneStep(e,t,n,r,i){let a={},o=e.getAllNodes(),s=e.getAllEdges();if(!o?.length)return;let{monitor:c}=i;if(this.calRepulsive(e,a,i),s&&this.calAttractive(e,a,i),this.calGravity(e,t,a,i),this.updateVelocity(e,a,r,i),c){let e=this.calTotalEnergy(a,o);c({energy:e,nodes:t.getAllNodes(),edges:t.getAllEdges(),iterations:n})}}calTotalEnergy(e,t){if(!t?.length)return 0;let n=0;return t.forEach((t,r)=>{let i=e[t.id].x,a=e[t.id].y,o=this.options.dimensions===3?e[t.id].z:0,s=i*i+a*a+o*o,{mass:c=1}=t.data;n+=c*s*.5}),n}calRepulsive(e,t,n){let{dimensions:r,factor:i,coulombDisScale:a}=n;xG(e,i,a*a,t,r)}calAttractive(e,t,n){let{dimensions:r,nodeSize:i}=n;e.getAllEdges().forEach((n,a)=>{let{source:o,target:s}=n,c=e.getNode(o),l=e.getNode(s);if(!c||!l)return;let u=l.data.x-c.data.x,d=l.data.y-c.data.y,f=r===3?l.data.z-c.data.z:0;!u&&!d&&(u=Math.random()*.01,d=Math.random()*.01,r===3&&!f&&(f=Math.random()*.01));let p=Math.sqrt(u*u+d*d+f*f);if(p<i(c)+i(l))return;let m=u/p,h=d/p,g=f/p,{linkDistance:_=200,edgeStrength:v=200}=n.data||{},y=(_-p)*v,b=c.data.mass||1,x=l.data.mass||1,S=1/b,C=1/x,w=m*y,T=h*y,E=g*y;t[o].x-=w*S,t[o].y-=T*S,t[o].z-=E*S,t[s].x+=w*C,t[s].y+=T*C,t[s].z+=E*C})}calGravity(e,t,n,r){let{getCenter:i}=r,a=e.getAllNodes(),o=t.getAllNodes(),s=t.getAllEdges(),{width:c,height:l,center:u,gravity:d,centripetalOptions:f}=r;a&&a.forEach(r=>{let{id:a,data:p}=r,{mass:m,x:h,y:g,z:_}=p,v=t.getNode(a),y=0,b=0,x=0,S=d,C=e.getDegree(a,`in`),w=e.getDegree(a,`out`),T=e.getDegree(a,`both`),E=i?.(v,T);if(E){let[e,t,n]=E;y=h-e,b=g-t,S=n}else y=h-u[0],b=g-u[1],x=_-u[2];if(S&&(n[a].x-=S*y/m,n[a].y-=S*b/m,n[a].z-=S*x/m),f){let{leaf:e,single:t,others:r,center:i}=f,{x:u,y:d,z:p,centerStrength:y}=i?.(v,o,s,c,l)||{x:0,y:0,z:0,centerStrength:0};if(!K(u)||!K(d))return;let b=(h-u)/m,x=(g-d)/m,S=(_-p)/m;if(y&&(n[a].x-=y*b,n[a].y-=y*x,n[a].z-=y*S),T===0){let e=t(v);if(!e)return;n[a].x-=e*b,n[a].y-=e*x,n[a].z-=e*S;return}if(C===0||w===0){let t=e(v,o,s);if(!t)return;n[a].x-=t*b,n[a].y-=t*x,n[a].z-=t*S;return}let E=r(v);if(!E)return;n[a].x-=E*b,n[a].y-=E*x,n[a].z-=E*S}})}updateVelocity(e,t,n,r){let{damping:i,maxSpeed:a,interval:o,dimensions:s}=r,c=e.getAllNodes();c?.length&&c.forEach(e=>{let{id:r}=e,c=(n[r].x+t[r].x*o)*i||.01,l=(n[r].y+t[r].y*o)*i||.01,u=s===3?(n[r].z+t[r].z*o)*i||.01:0,d=Math.sqrt(c*c+l*l+u*u);if(d>a){let e=a/d;c=e*c,l=e*l,u=e*u}n[r]={x:c,y:l,z:u}})}updatePosition(e,t,n,r){let{distanceThresholdMode:i,interval:a,dimensions:o}=r,s=t.getAllNodes();if(!s?.length){this.judgingDistance=0;return}let c=0;i===`max`?this.judgingDistance=-1/0:i===`min`&&(this.judgingDistance=1/0),s.forEach(r=>{let{id:s}=r,l=e.getNode(s);if(K(l.data.fx)&&K(l.data.fy)){t.mergeNodeData(s,{x:l.data.fx,y:l.data.fy,z:o===3?l.data.fz:void 0});return}let u=n[s].x*a,d=n[s].y*a,f=o===3?n[s].z*a:0;t.mergeNodeData(s,{x:r.data.x+u,y:r.data.y+d,z:r.data.z+f});let p=Math.sqrt(u*u+d*d+f*f);switch(i){case`max`:this.judgingDistance<p&&(this.judgingDistance=p);break;case`min`:this.judgingDistance>p&&(this.judgingDistance=p);break;default:c+=p;break}}),(!i||i===`mean`)&&(this.judgingDistance=c/s.length)}},DG=(e,t)=>{let n=e.getAllNodes();if(!n?.length)return{};let r={};return n.forEach((n,i)=>{e.getDegree(n.id,`both`)===1&&(r[n.id]=OG(e,`leaf`,n,t))}),r},OG=(e,t,n,r)=>{let i=e.getDegree(n.id,`in`),a=e.getDegree(n.id,`out`),o=n,s=[];i===0?(o=e.getSuccessors(n.id)[0],s=e.getNeighbors(o.id)):a===0&&(o=e.getPredecessors(n.id)[0],s=e.getNeighbors(o.id)),s=s.filter(t=>e.getDegree(t.id,`in`)===0||e.getDegree(t.id,`out`)===0);let c=kG(e,t,r,n,s);return{coreNode:o,siblingLeaves:s,sameTypeLeaves:c}},kG=(e,t,n,r,i)=>{let a=r.data[n]||``,o=i?.filter(e=>e.data[n]===a)||[];return t===`leaf`&&(o=o.filter(t=>e.getDegree(t.id,`in`)===0||e.getDegree(t.id,`out`)===0)),o},AG=e=>{let t={x:0,y:0};e.forEach(e=>{let{x:n,y:r}=e.data;t.x+=n||0,t.y+=r||0});let n=e.length||1;return{x:t.x/n,y:t.y/n}},jG=(e,t)=>t.map(t=>{let{id:n,data:r}=t,i=e.getNode(n);return Object.assign(Object.assign({},i),{data:Object.assign(Object.assign({},i.data),{x:r.x,y:r.y,z:r.z})})}),MG=n({isAnyArray:()=>NG});function NG(e){let t=PG.call(e);return t.endsWith(`Array]`)&&!t.includes(`Big`)}var PG,FG=a((()=>{PG=Object.prototype.toString}));function IG(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!NG(e))throw TypeError(`input must be an array`);if(e.length===0)throw TypeError(`input must not be empty`);var n=t.fromIndex,r=n===void 0?0:n,i=t.toIndex,a=i===void 0?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw Error(`fromIndex must be a positive integer smaller than length`);if(a<=r||a>e.length||!Number.isInteger(a))throw Error(`toIndex must be an integer greater than fromIndex and at most equal to length`);for(var o=e[r],s=r+1;s<a;s++)e[s]>o&&(o=e[s]);return o}var LG=a((()=>{FG()}));function RG(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!NG(e))throw TypeError(`input must be an array`);if(e.length===0)throw TypeError(`input must not be empty`);var n=t.fromIndex,r=n===void 0?0:n,i=t.toIndex,a=i===void 0?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw Error(`fromIndex must be a positive integer smaller than length`);if(a<=r||a>e.length||!Number.isInteger(a))throw Error(`toIndex must be an integer greater than fromIndex and at most equal to length`);for(var o=e[r],s=r+1;s<a;s++)e[s]<o&&(o=e[s]);return o}var zG=a((()=>{FG()})),BG=n({default:()=>VG});function VG(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(NG(e)){if(e.length===0)throw TypeError(`input must not be empty`)}else throw TypeError(`input must be an array`);var n;if(t.output!==void 0){if(!NG(t.output))throw TypeError(`output option must be an array if specified`);n=t.output}else n=Array(e.length);var r=RG(e),i=IG(e);if(r===i)throw RangeError(`minimum and maximum input values are equal. Cannot rescale a constant array`);var a=t.min,o=a===void 0?t.autoMinMax?r:0:a,s=t.max,c=s===void 0?t.autoMinMax?i:1:s;if(o>=c)throw RangeError(`min option must be smaller than max option`);for(var l=(c-o)/(i-r),u=0;u<e.length;u++)n[u]=(e[u]-r)*l+o;return n}var HG=a((()=>{FG(),LG(),zG()})),UG=t(r((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});var t=(FG(),i(MG)),n=(HG(),i(BG)),r=` `.repeat(2),a=` `.repeat(4);function o(){return s(this)}function s(e,t={}){let{maxRows:n=15,maxColumns:i=10,maxNumSize:o=8,padMinus:s=`auto`}=t;return`${e.constructor.name} {
${r}[
${a}${c(e,n,i,o,s)}
${r}]
${r}rows: ${e.rows}
${r}columns: ${e.columns}
}`}function c(e,t,n,r,i){let{rows:o,columns:s}=e,c=Math.min(o,t),u=Math.min(s,n),d=[];if(i===`auto`){i=!1;loop:for(let t=0;t<c;t++)for(let n=0;n<u;n++)if(e.get(t,n)<0){i=!0;break loop}}for(let t=0;t<c;t++){let n=[];for(let a=0;a<u;a++)n.push(l(e.get(t,a),r,i));d.push(`${n.join(` `)}`)}return u!==s&&(d[d.length-1]+=` ... ${s-n} more columns`),c!==o&&d.push(`... ${o-t} more rows`),d.join(`\n${a}`)}function l(e,t,n){return(e>=0&&n?` ${u(e,t-1)}`:u(e,t)).padEnd(t)}function u(e,t){let n=e.toString();if(n.length<=t)return n;let r=e.toFixed(t);if(r.length>t&&(r=e.toFixed(Math.max(0,t-(r.length-t)))),r.length<=t&&!r.startsWith(`0.000`)&&!r.startsWith(`-0.000`))return r;let i=e.toExponential(t);return i.length>t&&(i=e.toExponential(Math.max(0,t-(i.length-t)))),i.slice(0)}function d(e,t){e.prototype.add=function(e){return typeof e==`number`?this.addS(e):this.addM(e)},e.prototype.addS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e);return this},e.prototype.addM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e.get(t,n));return this},e.add=function(e,n){return new t(e).add(n)},e.prototype.sub=function(e){return typeof e==`number`?this.subS(e):this.subM(e)},e.prototype.subS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e);return this},e.prototype.subM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e.get(t,n));return this},e.sub=function(e,n){return new t(e).sub(n)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(e){return typeof e==`number`?this.mulS(e):this.mulM(e)},e.prototype.mulS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this},e.prototype.mulM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e.get(t,n));return this},e.mul=function(e,n){return new t(e).mul(n)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(e){return typeof e==`number`?this.divS(e):this.divM(e)},e.prototype.divS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e);return this},e.prototype.divM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e.get(t,n));return this},e.div=function(e,n){return new t(e).div(n)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(e){return typeof e==`number`?this.modS(e):this.modM(e)},e.prototype.modS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e);return this},e.prototype.modM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e.get(t,n));return this},e.mod=function(e,n){return new t(e).mod(n)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(e){return typeof e==`number`?this.andS(e):this.andM(e)},e.prototype.andS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e);return this},e.prototype.andM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e.get(t,n));return this},e.and=function(e,n){return new t(e).and(n)},e.prototype.or=function(e){return typeof e==`number`?this.orS(e):this.orM(e)},e.prototype.orS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e);return this},e.prototype.orM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e.get(t,n));return this},e.or=function(e,n){return new t(e).or(n)},e.prototype.xor=function(e){return typeof e==`number`?this.xorS(e):this.xorM(e)},e.prototype.xorS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e);return this},e.prototype.xorM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e.get(t,n));return this},e.xor=function(e,n){return new t(e).xor(n)},e.prototype.leftShift=function(e){return typeof e==`number`?this.leftShiftS(e):this.leftShiftM(e)},e.prototype.leftShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e);return this},e.prototype.leftShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e.get(t,n));return this},e.leftShift=function(e,n){return new t(e).leftShift(n)},e.prototype.signPropagatingRightShift=function(e){return typeof e==`number`?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},e.prototype.signPropagatingRightShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e);return this},e.prototype.signPropagatingRightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e.get(t,n));return this},e.signPropagatingRightShift=function(e,n){return new t(e).signPropagatingRightShift(n)},e.prototype.rightShift=function(e){return typeof e==`number`?this.rightShiftS(e):this.rightShiftM(e)},e.prototype.rightShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e);return this},e.prototype.rightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e.get(t,n));return this},e.rightShift=function(e,n){return new t(e).rightShift(n)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},e.not=function(e){return new t(e).not()},e.prototype.abs=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},e.abs=function(e){return new t(e).abs()},e.prototype.acos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},e.acos=function(e){return new t(e).acos()},e.prototype.acosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},e.acosh=function(e){return new t(e).acosh()},e.prototype.asin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},e.asin=function(e){return new t(e).asin()},e.prototype.asinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},e.asinh=function(e){return new t(e).asinh()},e.prototype.atan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},e.atan=function(e){return new t(e).atan()},e.prototype.atanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},e.atanh=function(e){return new t(e).atanh()},e.prototype.cbrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},e.cbrt=function(e){return new t(e).cbrt()},e.prototype.ceil=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},e.ceil=function(e){return new t(e).ceil()},e.prototype.clz32=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},e.clz32=function(e){return new t(e).clz32()},e.prototype.cos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},e.cos=function(e){return new t(e).cos()},e.prototype.cosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},e.cosh=function(e){return new t(e).cosh()},e.prototype.exp=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},e.exp=function(e){return new t(e).exp()},e.prototype.expm1=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},e.expm1=function(e){return new t(e).expm1()},e.prototype.floor=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},e.floor=function(e){return new t(e).floor()},e.prototype.fround=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},e.fround=function(e){return new t(e).fround()},e.prototype.log=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},e.log=function(e){return new t(e).log()},e.prototype.log1p=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},e.log1p=function(e){return new t(e).log1p()},e.prototype.log10=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},e.log10=function(e){return new t(e).log10()},e.prototype.log2=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},e.log2=function(e){return new t(e).log2()},e.prototype.round=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},e.round=function(e){return new t(e).round()},e.prototype.sign=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},e.sign=function(e){return new t(e).sign()},e.prototype.sin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},e.sin=function(e){return new t(e).sin()},e.prototype.sinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},e.sinh=function(e){return new t(e).sinh()},e.prototype.sqrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},e.sqrt=function(e){return new t(e).sqrt()},e.prototype.tan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},e.tan=function(e){return new t(e).tan()},e.prototype.tanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},e.tanh=function(e){return new t(e).tanh()},e.prototype.trunc=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},e.trunc=function(e){return new t(e).trunc()},e.pow=function(e,n){return new t(e).pow(n)},e.prototype.pow=function(e){return typeof e==`number`?this.powS(e):this.powM(e)},e.prototype.powS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)**e);return this},e.prototype.powM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)**e.get(t,n));return this}}function f(e,t,n){let r=n?e.rows:e.rows-1;if(t<0||t>r)throw RangeError(`Row index out of range`)}function p(e,t,n){let r=n?e.columns:e.columns-1;if(t<0||t>r)throw RangeError(`Column index out of range`)}function m(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw RangeError(`vector size must be the same as the number of columns`);return t}function h(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw RangeError(`vector size must be the same as the number of rows`);return t}function g(e,n){if(!t.isAnyArray(n))throw TypeError(`row indices must be an array`);for(let t=0;t<n.length;t++)if(n[t]<0||n[t]>=e.rows)throw RangeError(`row indices are out of range`)}function _(e,n){if(!t.isAnyArray(n))throw TypeError(`column indices must be an array`);for(let t=0;t<n.length;t++)if(n[t]<0||n[t]>=e.columns)throw RangeError(`column indices are out of range`)}function v(e,t,n,r,i){if(arguments.length!==5)throw RangeError(`expected 4 arguments`);if(b(`startRow`,t),b(`endRow`,n),b(`startColumn`,r),b(`endColumn`,i),t>n||r>i||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||i<0||i>=e.columns)throw RangeError(`Submatrix indices are out of range`)}function y(e,t=0){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function b(e,t){if(typeof t!=`number`)throw TypeError(`${e} must be a number`)}function x(e){if(e.isEmpty())throw Error(`Empty matrix has no elements to index`)}function S(e){let t=y(e.rows);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}function C(e){let t=y(e.columns);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}function w(e){let t=0;for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)t+=e.get(n,r);return t}function T(e){let t=y(e.rows,1);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}function E(e){let t=y(e.columns,1);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}function D(e){let t=1;for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)t*=e.get(n,r);return t}function O(e,t,n){let r=e.rows,i=e.columns,a=[];for(let o=0;o<r;o++){let r=0,s=0,c=0;for(let t=0;t<i;t++)c=e.get(o,t)-n[o],r+=c,s+=c*c;t?a.push((s-r*r/i)/(i-1)):a.push((s-r*r/i)/i)}return a}function k(e,t,n){let r=e.rows,i=e.columns,a=[];for(let o=0;o<i;o++){let i=0,s=0,c=0;for(let t=0;t<r;t++)c=e.get(t,o)-n[o],i+=c,s+=c*c;t?a.push((s-i*i/r)/(r-1)):a.push((s-i*i/r)/r)}return a}function A(e,t,n){let r=e.rows,i=e.columns,a=r*i,o=0,s=0,c=0;for(let t=0;t<r;t++)for(let r=0;r<i;r++)c=e.get(t,r)-n,o+=c,s+=c*c;return t?(s-o*o/a)/(a-1):(s-o*o/a)/a}function j(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}function M(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}function ee(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}function N(e){let t=[];for(let n=0;n<e.rows;n++){let r=0;for(let t=0;t<e.columns;t++)r+=e.get(n,t)**2/(e.columns-1);t.push(Math.sqrt(r))}return t}function te(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}function ne(e){let t=[];for(let n=0;n<e.columns;n++){let r=0;for(let t=0;t<e.rows;t++)r+=e.get(t,n)**2/(e.rows-1);t.push(Math.sqrt(r))}return t}function re(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}function P(e){let t=e.size-1,n=0;for(let r=0;r<e.columns;r++)for(let i=0;i<e.rows;i++)n+=e.get(i,r)**2/t;return Math.sqrt(n)}function F(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}var I=class e{static from1DArray(e,t,n){if(e*t!==n.length)throw RangeError(`data length does not match given dimensions`);let r=new L(e,t);for(let i=0;i<e;i++)for(let e=0;e<t;e++)r.set(i,e,n[i*t+e]);return r}static rowVector(e){let t=new L(1,e.length);for(let n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){let t=new L(e.length,1);for(let n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static zeros(e,t){return new L(e,t)}static ones(e,t){return new L(e,t).fill(1)}static rand(e,t,n={}){if(typeof n!=`object`)throw TypeError(`options must be an object`);let{random:r=Math.random}=n,i=new L(e,t);for(let n=0;n<e;n++)for(let e=0;e<t;e++)i.set(n,e,r());return i}static randInt(e,t,n={}){if(typeof n!=`object`)throw TypeError(`options must be an object`);let{min:r=0,max:i=1e3,random:a=Math.random}=n;if(!Number.isInteger(r))throw TypeError(`min must be an integer`);if(!Number.isInteger(i))throw TypeError(`max must be an integer`);if(r>=i)throw RangeError(`min must be smaller than max`);let o=i-r,s=new L(e,t);for(let n=0;n<e;n++)for(let e=0;e<t;e++){let t=r+Math.round(a()*o);s.set(n,e,t)}return s}static eye(e,t,n){t===void 0&&(t=e),n===void 0&&(n=1);let r=Math.min(e,t),i=this.zeros(e,t);for(let e=0;e<r;e++)i.set(e,e,n);return i}static diag(e,t,n){let r=e.length;t===void 0&&(t=r),n===void 0&&(n=t);let i=Math.min(r,t,n),a=this.zeros(t,n);for(let t=0;t<i;t++)a.set(t,t,e[t]);return a}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,r=e.columns,i=new L(n,r);for(let a=0;a<n;a++)for(let n=0;n<r;n++)i.set(a,n,Math.min(e.get(a,n),t.get(a,n)));return i}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,r=e.columns,i=new this(n,r);for(let a=0;a<n;a++)for(let n=0;n<r;n++)i.set(a,n,Math.max(e.get(a,n),t.get(a,n)));return i}static checkMatrix(t){return e.isMatrix(t)?t:new L(t)}static isMatrix(e){return e!=null&&e.klass===`Matrix`}get size(){return this.rows*this.columns}apply(e){if(typeof e!=`function`)throw TypeError(`callback must be a function`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.call(this,t,n);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let e=0;e<this.rows;e++)if(this.get(e,e)!==0)return!1;return!0}isEchelonForm(){let e=0,t=0,n=-1,r=!0,i=!1;for(;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&i===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(i=!0,n=t):(r=!1,i=!0);e++}return r}isReducedEchelonForm(){let e=0,t=0,n=-1,r=!0,i=!1;for(;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&i===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(i=!0,n=t):(r=!1,i=!0);for(let n=t+1;n<this.rows;n++)this.get(e,n)!==0&&(r=!1);e++}return r}echelonForm(){let e=this.clone(),t=0,n=0;for(;t<e.rows&&n<e.columns;){let r=t;for(let i=t;i<e.rows;i++)e.get(i,n)>e.get(r,n)&&(r=i);if(e.get(r,n)===0)n++;else{e.swapRows(t,r);let i=e.get(t,n);for(let r=n;r<e.columns;r++)e.set(t,r,e.get(t,r)/i);for(let r=t+1;r<e.rows;r++){let i=e.get(r,n)/e.get(t,n);e.set(r,n,0);for(let a=n+1;a<e.columns;a++)e.set(r,a,e.get(r,a)-e.get(t,a)*i)}t++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,n=e.rows,r=n-1;for(;r>=0;)if(e.maxRow(r)===0)r--;else{let i=0,a=!1;for(;i<n&&a===!1;)e.get(r,i)===1?a=!0:i++;for(let n=0;n<r;n++){let a=e.get(n,i);for(let o=i;o<t;o++){let t=e.get(n,o)-a*e.get(r,o);e.set(n,o,t)}}r--}return e}set(){throw Error(`set method is unimplemented`)}get(){throw Error(`get method is unimplemented`)}repeat(e={}){if(typeof e!=`object`)throw TypeError(`options must be an object`);let{rows:t=1,columns:n=1}=e;if(!Number.isInteger(t)||t<=0)throw TypeError(`rows must be a positive integer`);if(!Number.isInteger(n)||n<=0)throw TypeError(`columns must be a positive integer`);let r=new L(this.rows*t,this.columns*n);for(let e=0;e<t;e++)for(let t=0;t<n;t++)r.setSubMatrix(this,this.rows*e,this.columns*t);return r}fill(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,e);return this}neg(){return this.mulS(-1)}getRow(e){f(this,e);let t=[];for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}getRowVector(e){return L.rowVector(this.getRow(e))}setRow(e,t){f(this,e),t=m(this,t);for(let n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){f(this,e),f(this,t);for(let n=0;n<this.columns;n++){let r=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,r)}return this}getColumn(e){p(this,e);let t=[];for(let n=0;n<this.rows;n++)t.push(this.get(n,e));return t}getColumnVector(e){return L.columnVector(this.getColumn(e))}setColumn(e,t){p(this,e),t=h(this,t);for(let n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){p(this,e),p(this,t);for(let n=0;n<this.rows;n++){let r=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,r)}return this}addRowVector(e){e=m(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}subRowVector(e){e=m(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}mulRowVector(e){e=m(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}divRowVector(e){e=m(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}addColumnVector(e){e=h(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}subColumnVector(e){e=h(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}mulColumnVector(e){e=h(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}divColumnVector(e){e=h(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}mulRow(e,t){f(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){p(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(e){if(this.isEmpty())return NaN;switch(e){case`row`:{let e=Array(this.rows).fill(-1/0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e[t]&&(e[t]=this.get(t,n));return e}case`column`:{let e=Array(this.columns).fill(-1/0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e[n]&&(e[n]=this.get(t,n));return e}case void 0:{let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}default:throw Error(`invalid option: ${e}`)}}maxIndex(){x(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}min(e){if(this.isEmpty())return NaN;switch(e){case`row`:{let e=Array(this.rows).fill(1/0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e[t]&&(e[t]=this.get(t,n));return e}case`column`:{let e=Array(this.columns).fill(1/0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e[n]&&(e[n]=this.get(t,n));return e}case void 0:{let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}default:throw Error(`invalid option: ${e}`)}}minIndex(){x(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}maxRow(e){if(f(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){f(this,e),x(this);let t=this.get(e,0),n=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),n[1]=r);return n}minRow(e){if(f(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){f(this,e),x(this);let t=this.get(e,0),n=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),n[1]=r);return n}maxColumn(e){if(p(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){p(this,e),x(this);let t=this.get(0,e),n=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),n[0]=r);return n}minColumn(e){if(p(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){p(this,e),x(this);let t=this.get(0,e),n=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),n[0]=r);return n}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let n=0;n<e;n++)t.push(this.get(n,n));return t}norm(e=`frobenius`){switch(e){case`max`:return this.max();case`frobenius`:return Math.sqrt(this.dot(this));default:throw RangeError(`unknown norm type: ${e}`)}}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}dot(t){e.isMatrix(t)&&(t=t.to1DArray());let n=this.to1DArray();if(n.length!==t.length)throw RangeError(`vectors do not have the same size`);let r=0;for(let e=0;e<n.length;e++)r+=n[e]*t[e];return r}mmul(e){e=L.checkMatrix(e);let t=this.rows,n=this.columns,r=e.columns,i=new L(t,r),a=new Float64Array(n);for(let o=0;o<r;o++){for(let t=0;t<n;t++)a[t]=e.get(t,o);for(let e=0;e<t;e++){let t=0;for(let r=0;r<n;r++)t+=this.get(e,r)*a[r];i.set(e,o,t)}}return i}mpow(e){if(!this.isSquare())throw RangeError(`Matrix must be square`);if(!Number.isInteger(e)||e<0)throw RangeError(`Exponent must be a non-negative integer`);let t=L.eye(this.rows),n=this;for(let r=e;r>=1;r/=2)r&1&&(t=t.mmul(n)),n=n.mmul(n);return t}strassen2x2(e){e=L.checkMatrix(e);let t=new L(2,2),n=this.get(0,0),r=e.get(0,0),i=this.get(0,1),a=e.get(0,1),o=this.get(1,0),s=e.get(1,0),c=this.get(1,1),l=e.get(1,1),u=(n+c)*(r+l),d=(o+c)*r,f=n*(a-l),p=c*(s-r),m=(n+i)*l,h=(o-n)*(r+a),g=(i-c)*(s+l),_=u+p-m+g,v=f+m,y=d+p,b=u-d+f+h;return t.set(0,0,_),t.set(0,1,v),t.set(1,0,y),t.set(1,1,b),t}strassen3x3(e){e=L.checkMatrix(e);let t=new L(3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),a=this.get(1,0),o=this.get(1,1),s=this.get(1,2),c=this.get(2,0),l=this.get(2,1),u=this.get(2,2),d=e.get(0,0),f=e.get(0,1),p=e.get(0,2),m=e.get(1,0),h=e.get(1,1),g=e.get(1,2),_=e.get(2,0),v=e.get(2,1),y=e.get(2,2),b=(n+r+i-a-o-l-u)*h,x=(n-a)*(-f+h),S=o*(-d+f+m-h-g-_+y),C=(-n+a+o)*(d-f+h),w=(a+o)*(-d+f),T=n*d,E=(-n+c+l)*(d-p+g),D=(-n+c)*(p-g),O=(c+l)*(-d+p),k=(n+r+i-o-s-c-l)*g,A=l*(-d+p+m-h-g-_+v),j=(-i+l+u)*(h+_-v),M=(i-u)*(h-v),ee=i*_,N=(l+u)*(-_+v),te=(-i+o+s)*(g+_-y),ne=(i-s)*(g-y),re=(o+s)*(-_+y),P=r*m,F=s*v,I=a*p,ie=c*f,ae=u*y,oe=T+ee+P,se=b+C+w+T+j+ee+N,ce=T+E+O+k+ee+te+re,le=x+S+C+T+ee+te+ne,ue=x+C+w+T+F,de=ee+te+ne+re+I,fe=T+E+D+A+j+M+ee,pe=j+M+ee+N+ie,me=T+E+D+O+ae;return t.set(0,0,oe),t.set(0,1,se),t.set(0,2,ce),t.set(1,0,le),t.set(1,1,ue),t.set(1,2,de),t.set(2,0,fe),t.set(2,1,pe),t.set(2,2,me),t}mmulStrassen(t){t=L.checkMatrix(t);let n=this.clone(),r=n.rows,i=n.columns,a=t.rows,o=t.columns;i!==a&&console.warn(`Multiplying ${r} x ${i} and ${a} x ${o} matrix: dimensions do not match.`);function s(t,n,r){let i=t.rows,a=t.columns;if(i===n&&a===r)return t;{let i=e.zeros(n,r);return i=i.setSubMatrix(t,0,0),i}}let c=Math.max(r,a),l=Math.max(i,o);n=s(n,c,l),t=s(t,c,l);function u(t,n,r,i){if(r<=512||i<=512)return t.mmul(n);r%2==1&&i%2==1?(t=s(t,r+1,i+1),n=s(n,r+1,i+1)):r%2==1?(t=s(t,r+1,i),n=s(n,r+1,i)):i%2==1&&(t=s(t,r,i+1),n=s(n,r,i+1));let a=parseInt(t.rows/2,10),o=parseInt(t.columns/2,10),c=t.subMatrix(0,a-1,0,o-1),l=n.subMatrix(0,a-1,0,o-1),d=t.subMatrix(0,a-1,o,t.columns-1),f=n.subMatrix(0,a-1,o,n.columns-1),p=t.subMatrix(a,t.rows-1,0,o-1),m=n.subMatrix(a,n.rows-1,0,o-1),h=t.subMatrix(a,t.rows-1,o,t.columns-1),g=n.subMatrix(a,n.rows-1,o,n.columns-1),_=u(e.add(c,h),e.add(l,g),a,o),v=u(e.add(p,h),l,a,o),y=u(c,e.sub(f,g),a,o),b=u(h,e.sub(m,l),a,o),x=u(e.add(c,d),g,a,o),S=u(e.sub(p,c),e.add(l,f),a,o),C=u(e.sub(d,h),e.add(m,g),a,o),w=e.add(_,b);w.sub(x),w.add(C);let T=e.add(y,x),E=e.add(v,b),D=e.sub(_,v);D.add(y),D.add(S);let O=e.zeros(2*w.rows,2*w.columns);return O=O.setSubMatrix(w,0,0),O=O.setSubMatrix(T,w.rows,0),O=O.setSubMatrix(E,0,w.columns),O=O.setSubMatrix(D,w.rows,w.columns),O.subMatrix(0,r-1,0,i-1)}return u(n,t,c,l)}scaleRows(e={}){if(typeof e!=`object`)throw TypeError(`options must be an object`);let{min:t=0,max:r=1}=e;if(!Number.isFinite(t))throw TypeError(`min must be a number`);if(!Number.isFinite(r))throw TypeError(`max must be a number`);if(t>=r)throw RangeError(`min must be smaller than max`);let i=new L(this.rows,this.columns);for(let e=0;e<this.rows;e++){let a=this.getRow(e);a.length>0&&n(a,{min:t,max:r,output:a}),i.setRow(e,a)}return i}scaleColumns(e={}){if(typeof e!=`object`)throw TypeError(`options must be an object`);let{min:t=0,max:r=1}=e;if(!Number.isFinite(t))throw TypeError(`min must be a number`);if(!Number.isFinite(r))throw TypeError(`max must be a number`);if(t>=r)throw RangeError(`min must be smaller than max`);let i=new L(this.rows,this.columns);for(let e=0;e<this.columns;e++){let a=this.getColumn(e);a.length&&n(a,{min:t,max:r,output:a}),i.setColumn(e,a)}return i}flipRows(){let e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let n=0;n<e;n++){let e=this.get(t,n),r=this.get(t,this.columns-1-n);this.set(t,n,r),this.set(t,this.columns-1-n,e)}return this}flipColumns(){let e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let n=0;n<e;n++){let e=this.get(n,t),r=this.get(this.rows-1-n,t);this.set(n,t,r),this.set(this.rows-1-n,t,e)}return this}kroneckerProduct(e){e=L.checkMatrix(e);let t=this.rows,n=this.columns,r=e.rows,i=e.columns,a=new L(t*r,n*i);for(let o=0;o<t;o++)for(let t=0;t<n;t++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)a.set(r*o+n,i*t+s,this.get(o,t)*e.get(n,s));return a}kroneckerSum(e){if(e=L.checkMatrix(e),!this.isSquare()||!e.isSquare())throw Error(`Kronecker Sum needs two Square Matrices`);let t=this.rows,n=e.rows,r=this.kroneckerProduct(L.eye(n,n)),i=L.eye(t,t).kroneckerProduct(e);return r.add(i)}transpose(){let e=new L(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}sortRows(e=ie){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=ie){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,r){v(this,e,t,n,r);let i=new L(t-e+1,r-n+1);for(let a=e;a<=t;a++)for(let t=n;t<=r;t++)i.set(a-e,t-n,this.get(a,t));return i}subMatrixRow(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw RangeError(`Argument out of range`);let r=new L(e.length,n-t+1);for(let i=0;i<e.length;i++)for(let a=t;a<=n;a++){if(e[i]<0||e[i]>=this.rows)throw RangeError(`Row index out of range: ${e[i]}`);r.set(i,a-t,this.get(e[i],a))}return r}subMatrixColumn(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw RangeError(`Argument out of range`);let r=new L(n-t+1,e.length);for(let i=0;i<e.length;i++)for(let a=t;a<=n;a++){if(e[i]<0||e[i]>=this.columns)throw RangeError(`Column index out of range: ${e[i]}`);r.set(a-t,i,this.get(a,e[i]))}return r}setSubMatrix(e,t,n){if(e=L.checkMatrix(e),e.isEmpty())return this;let r=t+e.rows-1,i=n+e.columns-1;v(this,t,r,n,i);for(let r=0;r<e.rows;r++)for(let i=0;i<e.columns;i++)this.set(t+r,n+i,e.get(r,i));return this}selection(e,t){g(this,e),_(this,t);let n=new L(e.length,t.length);for(let r=0;r<e.length;r++){let i=e[r];for(let e=0;e<t.length;e++){let a=t[e];n.set(r,e,this.get(i,a))}}return n}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let n=0;n<e;n++)t+=this.get(n,n);return t}clone(){return this.constructor.copy(this,new L(this.rows,this.columns))}static copy(e,t){for(let[n,r,i]of e.entries())t.set(n,r,i);return t}sum(e){switch(e){case`row`:return S(this);case`column`:return C(this);case void 0:return w(this);default:throw Error(`invalid option: ${e}`)}}product(e){switch(e){case`row`:return T(this);case`column`:return E(this);case void 0:return D(this);default:throw Error(`invalid option: ${e}`)}}mean(e){let t=this.sum(e);switch(e){case`row`:for(let e=0;e<this.rows;e++)t[e]/=this.columns;return t;case`column`:for(let e=0;e<this.columns;e++)t[e]/=this.rows;return t;case void 0:return t/this.size;default:throw Error(`invalid option: ${e}`)}}variance(e,n={}){if(typeof e==`object`&&(n=e,e=void 0),typeof n!=`object`)throw TypeError(`options must be an object`);let{unbiased:r=!0,mean:i=this.mean(e)}=n;if(typeof r!=`boolean`)throw TypeError(`unbiased must be a boolean`);switch(e){case`row`:if(!t.isAnyArray(i))throw TypeError(`mean must be an array`);return O(this,r,i);case`column`:if(!t.isAnyArray(i))throw TypeError(`mean must be an array`);return k(this,r,i);case void 0:if(typeof i!=`number`)throw TypeError(`mean must be a number`);return A(this,r,i);default:throw Error(`invalid option: ${e}`)}}standardDeviation(e,t){typeof e==`object`&&(t=e,e=void 0);let n=this.variance(e,t);if(e===void 0)return Math.sqrt(n);for(let e=0;e<n.length;e++)n[e]=Math.sqrt(n[e]);return n}center(e,n={}){if(typeof e==`object`&&(n=e,e=void 0),typeof n!=`object`)throw TypeError(`options must be an object`);let{center:r=this.mean(e)}=n;switch(e){case`row`:if(!t.isAnyArray(r))throw TypeError(`center must be an array`);return j(this,r),this;case`column`:if(!t.isAnyArray(r))throw TypeError(`center must be an array`);return M(this,r),this;case void 0:if(typeof r!=`number`)throw TypeError(`center must be a number`);return ee(this,r),this;default:throw Error(`invalid option: ${e}`)}}scale(e,n={}){if(typeof e==`object`&&(n=e,e=void 0),typeof n!=`object`)throw TypeError(`options must be an object`);let r=n.scale;switch(e){case`row`:if(r===void 0)r=N(this);else if(!t.isAnyArray(r))throw TypeError(`scale must be an array`);return te(this,r),this;case`column`:if(r===void 0)r=ne(this);else if(!t.isAnyArray(r))throw TypeError(`scale must be an array`);return re(this,r),this;case void 0:if(r===void 0)r=P(this);else if(typeof r!=`number`)throw TypeError(`scale must be a number`);return F(this,r),this;default:throw Error(`invalid option: ${e}`)}}toString(e){return s(this,e)}[Symbol.iterator](){return this.entries()}*entries(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield[e,t,this.get(e,t)]}*values(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield this.get(e,t)}};I.prototype.klass=`Matrix`,typeof Symbol<`u`&&(I.prototype[Symbol.for(`nodejs.util.inspect.custom`)]=o);function ie(e,t){return e-t}function ae(e){return e.every(e=>typeof e==`number`)}I.random=I.rand,I.randomInt=I.randInt,I.diagonal=I.diag,I.prototype.diagonal=I.prototype.diag,I.identity=I.eye,I.prototype.negate=I.prototype.neg,I.prototype.tensorProduct=I.prototype.kroneckerProduct;var L=class e extends I{data;#initData(e,t){if(this.data=[],Number.isInteger(t)&&t>=0)for(let n=0;n<e;n++)this.data.push(new Float64Array(t));else throw TypeError(`nColumns must be a positive integer`);this.rows=e,this.columns=t}constructor(n,r){if(super(),e.isMatrix(n))this.#initData(n.rows,n.columns),e.copy(n,this);else if(Number.isInteger(n)&&n>=0)this.#initData(n,r);else if(t.isAnyArray(n)){let e=n;if(n=e.length,r=n?e[0].length:0,typeof r!=`number`)throw TypeError(`Data must be a 2D array with at least one element`);this.data=[];for(let t=0;t<n;t++){if(e[t].length!==r)throw RangeError(`Inconsistent array dimensions`);if(!ae(e[t]))throw TypeError(`Input data contains non-numeric values`);this.data.push(Float64Array.from(e[t]))}this.rows=n,this.columns=r}else throw TypeError(`First argument must be a positive number or an array`)}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}removeRow(e){return f(this,e),this.data.splice(e,1),--this.rows,this}addRow(e,t){return t===void 0&&(t=e,e=this.rows),f(this,e,!0),t=Float64Array.from(m(this,t)),this.data.splice(e,0,t),this.rows+=1,this}removeColumn(e){p(this,e);for(let t=0;t<this.rows;t++){let n=new Float64Array(this.columns-1);for(let r=0;r<e;r++)n[r]=this.data[t][r];for(let r=e+1;r<this.columns;r++)n[r-1]=this.data[t][r];this.data[t]=n}return--this.columns,this}addColumn(e,t){t===void 0&&(t=e,e=this.columns),p(this,e,!0),t=h(this,t);for(let n=0;n<this.rows;n++){let r=new Float64Array(this.columns+1),i=0;for(;i<e;i++)r[i]=this.data[n][i];for(r[i++]=t[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}};d(I,L);var oe=class e extends I{#matrix;get size(){return this.#matrix.size}get rows(){return this.#matrix.rows}get columns(){return this.#matrix.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(e){return L.isMatrix(e)&&e.klassType===`SymmetricMatrix`}static zeros(e){return new this(e)}static ones(e){return new this(e).fill(1)}constructor(e){if(super(),L.isMatrix(e)){if(!e.isSymmetric())throw TypeError(`not symmetric data`);this.#matrix=L.copy(e,new L(e.rows,e.rows))}else if(Number.isInteger(e)&&e>=0)this.#matrix=new L(e,e);else if(this.#matrix=new L(e),!this.isSymmetric())throw TypeError(`not symmetric data`)}clone(){let t=new e(this.diagonalSize);for(let[e,n,r]of this.upperRightEntries())t.set(e,n,r);return t}toMatrix(){return new L(this)}get(e,t){return this.#matrix.get(e,t)}set(e,t,n){return this.#matrix.set(e,t,n),this.#matrix.set(t,e,n),this}removeCross(e){return this.#matrix.removeRow(e),this.#matrix.removeColumn(e),this}addCross(e,t){t===void 0&&(t=e,e=this.diagonalSize);let n=t.slice();return n.splice(e,1),this.#matrix.addRow(e,n),this.#matrix.addColumn(e,t),this}applyMask(e){if(e.length!==this.diagonalSize)throw RangeError(`Mask size do not match with matrix size`);let t=[];for(let[n,r]of e.entries()){if(r)continue;t.push(n)}t.reverse();for(let e of t)this.removeCross(e);return this}toCompact(){let{diagonalSize:e}=this,t=Array(e*(e+1)/2);for(let n=0,r=0,i=0;i<t.length;i++)t[i]=this.get(r,n),++n>=e&&(n=++r);return t}static fromCompact(t){let n=t.length,r=(Math.sqrt(8*n+1)-1)/2;if(!Number.isInteger(r))throw TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);let i=new e(r);for(let e=0,a=0,o=0;o<n;o++)i.set(e,a,t[o]),++e>=r&&(e=++a);return i}*upperRightEntries(){for(let e=0,t=0;e<this.diagonalSize;){let n=this.get(e,t);yield[e,t,n],++t>=this.diagonalSize&&(t=++e)}}*upperRightValues(){for(let e=0,t=0;e<this.diagonalSize;)yield this.get(e,t),++t>=this.diagonalSize&&(t=++e)}};oe.prototype.klassType=`SymmetricMatrix`;var se=class e extends oe{static isDistanceMatrix(e){return oe.isSymmetricMatrix(e)&&e.klassSubType===`DistanceMatrix`}constructor(e){if(super(e),!this.isDistance())throw TypeError(`Provided arguments do no produce a distance matrix`)}set(e,t,n){return e===t&&(n=0),super.set(e,t,n)}addCross(e,t){return t===void 0&&(t=e,e=this.diagonalSize),t=t.slice(),t[e]=0,super.addCross(e,t)}toSymmetricMatrix(){return new oe(this)}clone(){let t=new e(this.diagonalSize);for(let[e,n,r]of this.upperRightEntries()){if(e===n)continue;t.set(e,n,r)}return t}toCompact(){let{diagonalSize:e}=this,t=(e-1)*e/2,n=Array(t);for(let t=1,r=0,i=0;i<n.length;i++)n[i]=this.get(r,t),++t>=e&&(t=++r+1);return n}static fromCompact(e){let t=e.length;if(t===0)return new this(0);let n=(Math.sqrt(8*t+1)+1)/2;if(!Number.isInteger(n))throw TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(e)}`);let r=new this(n);for(let i=1,a=0,o=0;o<t;o++)r.set(i,a,e[o]),++i>=n&&(i=++a+1);return r}};se.prototype.klassSubType=`DistanceMatrix`;var ce=class extends I{constructor(e,t,n){super(),this.matrix=e,this.rows=t,this.columns=n}},le=class extends ce{constructor(e,t){p(e,t),super(e,e.rows,1),this.column=t}set(e,t,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}},ue=class extends ce{constructor(e,t){_(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}},de=class extends ce{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}},fe=class extends ce{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}},pe=class extends ce{constructor(e,t){f(e,t),super(e,1,e.columns),this.row=t}set(e,t,n){return this.matrix.set(this.row,t,n),this}get(e,t){return this.matrix.get(this.row,t)}},me=class extends ce{constructor(e,t){g(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}},he=class extends ce{constructor(e,t,n){g(e,t),_(e,n),super(e,t.length,n.length),this.rowIndices=t,this.columnIndices=n}set(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}},ge=class extends ce{constructor(e,t,n,r,i){v(e,t,n,r,i),super(e,n-t+1,i-r+1),this.startRow=t,this.startColumn=r}set(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}},_e=class extends ce{constructor(e){super(e,e.columns,e.rows)}set(e,t,n){return this.matrix.set(t,e,n),this}get(e,t){return this.matrix.get(t,e)}},ve=class extends I{constructor(e,t={}){let{rows:n=1}=t;if(e.length%n!==0)throw Error(`the data length is not divisible by the number of rows`);super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,t,n){let r=this._calculateIndex(e,t);return this.data[r]=n,this}get(e,t){let n=this._calculateIndex(e,t);return this.data[n]}_calculateIndex(e,t){return e*this.columns+t}},ye=class extends I{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}};function be(e,n){if(t.isAnyArray(e))return e[0]&&t.isAnyArray(e[0])?new ye(e):new ve(e,n);throw Error(`the argument is not an array`)}var xe=class{constructor(e){e=ye.checkMatrix(e);let t=e.clone(),n=t.rows,r=t.columns,i=new Float64Array(n),a=1,o,s,c,l,u,d,f,p,m;for(o=0;o<n;o++)i[o]=o;for(p=new Float64Array(n),s=0;s<r;s++){for(o=0;o<n;o++)p[o]=t.get(o,s);for(o=0;o<n;o++){for(m=Math.min(o,s),u=0,c=0;c<m;c++)u+=t.get(o,c)*p[c];p[o]-=u,t.set(o,s,p[o])}for(l=s,o=s+1;o<n;o++)Math.abs(p[o])>Math.abs(p[l])&&(l=o);if(l!==s){for(c=0;c<r;c++)d=t.get(l,c),t.set(l,c,t.get(s,c)),t.set(s,c,d);f=i[l],i[l]=i[s],i[s]=f,a=-a}if(s<n&&t.get(s,s)!==0)for(o=s+1;o<n;o++)t.set(o,s,t.get(o,s)/t.get(s,s))}this.LU=t,this.pivotVector=i,this.pivotSign=a}isSingular(){let e=this.LU,t=e.columns;for(let n=0;n<t;n++)if(e.get(n,n)===0)return!0;return!1}solve(e){e=L.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw Error(`Invalid matrix dimensions`);if(this.isSingular())throw Error(`LU matrix is singular`);let n=e.columns,r=e.subMatrixRow(this.pivotVector,0,n-1),i=t.columns,a,o,s;for(s=0;s<i;s++)for(a=s+1;a<i;a++)for(o=0;o<n;o++)r.set(a,o,r.get(a,o)-r.get(s,o)*t.get(a,s));for(s=i-1;s>=0;s--){for(o=0;o<n;o++)r.set(s,o,r.get(s,o)/t.get(s,s));for(a=0;a<s;a++)for(o=0;o<n;o++)r.set(a,o,r.get(a,o)-r.get(s,o)*t.get(a,s))}return r}get determinant(){let e=this.LU;if(!e.isSquare())throw Error(`Matrix must be square`);let t=this.pivotSign,n=e.columns;for(let r=0;r<n;r++)t*=e.get(r,r);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,r=new L(t,n);for(let i=0;i<t;i++)for(let t=0;t<n;t++)i>t?r.set(i,t,e.get(i,t)):i===t?r.set(i,t,1):r.set(i,t,0);return r}get upperTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,r=new L(t,n);for(let i=0;i<t;i++)for(let t=0;t<n;t++)i<=t?r.set(i,t,e.get(i,t)):r.set(i,t,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}};function Se(e,t){let n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):t===0?0:(n=e/t,Math.abs(t)*Math.sqrt(1+n*n))}var Ce=class{constructor(e){e=ye.checkMatrix(e);let t=e.clone(),n=e.rows,r=e.columns,i=new Float64Array(r),a,o,s,c;for(s=0;s<r;s++){let e=0;for(a=s;a<n;a++)e=Se(e,t.get(a,s));if(e!==0){for(t.get(s,s)<0&&(e=-e),a=s;a<n;a++)t.set(a,s,t.get(a,s)/e);for(t.set(s,s,t.get(s,s)+1),o=s+1;o<r;o++){for(c=0,a=s;a<n;a++)c+=t.get(a,s)*t.get(a,o);for(c=-c/t.get(s,s),a=s;a<n;a++)t.set(a,o,t.get(a,o)+c*t.get(a,s))}}i[s]=-e}this.QR=t,this.Rdiag=i}solve(e){e=L.checkMatrix(e);let t=this.QR,n=t.rows;if(e.rows!==n)throw Error(`Matrix row dimensions must agree`);if(!this.isFullRank())throw Error(`Matrix is rank deficient`);let r=e.columns,i=e.clone(),a=t.columns,o,s,c,l;for(c=0;c<a;c++)for(s=0;s<r;s++){for(l=0,o=c;o<n;o++)l+=t.get(o,c)*i.get(o,s);for(l=-l/t.get(c,c),o=c;o<n;o++)i.set(o,s,i.get(o,s)+l*t.get(o,c))}for(c=a-1;c>=0;c--){for(s=0;s<r;s++)i.set(c,s,i.get(c,s)/this.Rdiag[c]);for(o=0;o<c;o++)for(s=0;s<r;s++)i.set(o,s,i.get(o,s)-i.get(c,s)*t.get(o,c))}return i.subMatrix(0,a-1,0,r-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(this.Rdiag[t]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,t=e.columns,n=new L(t,t),r,i;for(r=0;r<t;r++)for(i=0;i<t;i++)r<i?n.set(r,i,e.get(r,i)):r===i?n.set(r,i,this.Rdiag[r]):n.set(r,i,0);return n}get orthogonalMatrix(){let e=this.QR,t=e.rows,n=e.columns,r=new L(t,n),i,a,o,s;for(o=n-1;o>=0;o--){for(i=0;i<t;i++)r.set(i,o,0);for(r.set(o,o,1),a=o;a<n;a++)if(e.get(o,o)!==0){for(s=0,i=o;i<t;i++)s+=e.get(i,o)*r.get(i,a);for(s=-s/e.get(o,o),i=o;i<t;i++)r.set(i,a,r.get(i,a)+s*e.get(i,o))}}return r}},we=class{constructor(e,t={}){if(e=ye.checkMatrix(e),e.isEmpty())throw Error(`Matrix must be non-empty`);let n=e.rows,r=e.columns,{computeLeftSingularVectors:i=!0,computeRightSingularVectors:a=!0,autoTranspose:o=!1}=t,s=!!i,c=!!a,l=!1,u;if(n<r)if(!o)u=e.clone(),console.warn(`Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose`);else{u=e.transpose(),n=u.rows,r=u.columns,l=!0;let t=s;s=c,c=t}else u=e.clone();let d=Math.min(n,r),f=Math.min(n+1,r),p=new Float64Array(f),m=new L(n,d),h=new L(r,r),g=new Float64Array(r),_=new Float64Array(n),v=new Float64Array(f);for(let e=0;e<f;e++)v[e]=e;let y=Math.min(n-1,r),b=Math.max(0,Math.min(r-2,n)),x=Math.max(y,b);for(let e=0;e<x;e++){if(e<y){p[e]=0;for(let t=e;t<n;t++)p[e]=Se(p[e],u.get(t,e));if(p[e]!==0){u.get(e,e)<0&&(p[e]=-p[e]);for(let t=e;t<n;t++)u.set(t,e,u.get(t,e)/p[e]);u.set(e,e,u.get(e,e)+1)}p[e]=-p[e]}for(let t=e+1;t<r;t++){if(e<y&&p[e]!==0){let r=0;for(let i=e;i<n;i++)r+=u.get(i,e)*u.get(i,t);r=-r/u.get(e,e);for(let i=e;i<n;i++)u.set(i,t,u.get(i,t)+r*u.get(i,e))}g[t]=u.get(e,t)}if(s&&e<y)for(let t=e;t<n;t++)m.set(t,e,u.get(t,e));if(e<b){g[e]=0;for(let t=e+1;t<r;t++)g[e]=Se(g[e],g[t]);if(g[e]!==0){g[e+1]<0&&(g[e]=0-g[e]);for(let t=e+1;t<r;t++)g[t]/=g[e];g[e+1]+=1}if(g[e]=-g[e],e+1<n&&g[e]!==0){for(let t=e+1;t<n;t++)_[t]=0;for(let t=e+1;t<n;t++)for(let n=e+1;n<r;n++)_[t]+=g[n]*u.get(t,n);for(let t=e+1;t<r;t++){let r=-g[t]/g[e+1];for(let i=e+1;i<n;i++)u.set(i,t,u.get(i,t)+r*_[i])}}if(c)for(let t=e+1;t<r;t++)h.set(t,e,g[t])}}let S=Math.min(r,n+1);if(y<r&&(p[y]=u.get(y,y)),n<S&&(p[S-1]=0),b+1<S&&(g[b]=u.get(b,S-1)),g[S-1]=0,s){for(let e=y;e<d;e++){for(let t=0;t<n;t++)m.set(t,e,0);m.set(e,e,1)}for(let e=y-1;e>=0;e--)if(p[e]!==0){for(let t=e+1;t<d;t++){let r=0;for(let i=e;i<n;i++)r+=m.get(i,e)*m.get(i,t);r=-r/m.get(e,e);for(let i=e;i<n;i++)m.set(i,t,m.get(i,t)+r*m.get(i,e))}for(let t=e;t<n;t++)m.set(t,e,-m.get(t,e));m.set(e,e,1+m.get(e,e));for(let t=0;t<e-1;t++)m.set(t,e,0)}else{for(let t=0;t<n;t++)m.set(t,e,0);m.set(e,e,1)}}if(c)for(let e=r-1;e>=0;e--){if(e<b&&g[e]!==0)for(let t=e+1;t<r;t++){let n=0;for(let i=e+1;i<r;i++)n+=h.get(i,e)*h.get(i,t);n=-n/h.get(e+1,e);for(let i=e+1;i<r;i++)h.set(i,t,h.get(i,t)+n*h.get(i,e))}for(let t=0;t<r;t++)h.set(t,e,0);h.set(e,e,1)}let C=S-1,w=2**-52;for(;S>0;){let e,t;for(e=S-2;e>=-1&&e!==-1;e--){let t=Number.MIN_VALUE+w*Math.abs(p[e]+Math.abs(p[e+1]));if(Math.abs(g[e])<=t||Number.isNaN(g[e])){g[e]=0;break}}if(e===S-2)t=4;else{let n;for(n=S-1;n>=e&&n!==e;n--){let t=(n===S?0:Math.abs(g[n]))+(n===e+1?0:Math.abs(g[n-1]));if(Math.abs(p[n])<=w*t){p[n]=0;break}}n===e?t=3:n===S-1?t=1:(t=2,e=n)}switch(e++,t){case 1:{let t=g[S-2];g[S-2]=0;for(let n=S-2;n>=e;n--){let i=Se(p[n],t),a=p[n]/i,o=t/i;if(p[n]=i,n!==e&&(t=-o*g[n-1],g[n-1]=a*g[n-1]),c)for(let e=0;e<r;e++)i=a*h.get(e,n)+o*h.get(e,S-1),h.set(e,S-1,-o*h.get(e,n)+a*h.get(e,S-1)),h.set(e,n,i)}break}case 2:{let t=g[e-1];g[e-1]=0;for(let r=e;r<S;r++){let i=Se(p[r],t),a=p[r]/i,o=t/i;if(p[r]=i,t=-o*g[r],g[r]=a*g[r],s)for(let t=0;t<n;t++)i=a*m.get(t,r)+o*m.get(t,e-1),m.set(t,e-1,-o*m.get(t,r)+a*m.get(t,e-1)),m.set(t,r,i)}break}case 3:{let t=Math.max(Math.abs(p[S-1]),Math.abs(p[S-2]),Math.abs(g[S-2]),Math.abs(p[e]),Math.abs(g[e])),i=p[S-1]/t,a=p[S-2]/t,o=g[S-2]/t,l=p[e]/t,u=g[e]/t,d=((a+i)*(a-i)+o*o)/2,f=i*o*(i*o),_=0;(d!==0||f!==0)&&(_=d<0?0-Math.sqrt(d*d+f):Math.sqrt(d*d+f),_=f/(d+_));let v=(l+i)*(l-i)+_,y=l*u;for(let t=e;t<S-1;t++){let i=Se(v,y);i===0&&(i=Number.MIN_VALUE);let a=v/i,o=y/i;if(t!==e&&(g[t-1]=i),v=a*p[t]+o*g[t],g[t]=a*g[t]-o*p[t],y=o*p[t+1],p[t+1]=a*p[t+1],c)for(let e=0;e<r;e++)i=a*h.get(e,t)+o*h.get(e,t+1),h.set(e,t+1,-o*h.get(e,t)+a*h.get(e,t+1)),h.set(e,t,i);if(i=Se(v,y),i===0&&(i=Number.MIN_VALUE),a=v/i,o=y/i,p[t]=i,v=a*g[t]+o*p[t+1],p[t+1]=-o*g[t]+a*p[t+1],y=o*g[t+1],g[t+1]=a*g[t+1],s&&t<n-1)for(let e=0;e<n;e++)i=a*m.get(e,t)+o*m.get(e,t+1),m.set(e,t+1,-o*m.get(e,t)+a*m.get(e,t+1)),m.set(e,t,i)}g[S-2]=v;break}case 4:if(p[e]<=0&&(p[e]=p[e]<0?-p[e]:0,c))for(let t=0;t<=C;t++)h.set(t,e,-h.get(t,e));for(;e<C&&!(p[e]>=p[e+1]);){let t=p[e];if(p[e]=p[e+1],p[e+1]=t,c&&e<r-1)for(let n=0;n<r;n++)t=h.get(n,e+1),h.set(n,e+1,h.get(n,e)),h.set(n,e,t);if(s&&e<n-1)for(let r=0;r<n;r++)t=m.get(r,e+1),m.set(r,e+1,m.get(r,e)),m.set(r,e,t);e++}S--;break}}if(l){let e=h;h=m,m=e}this.m=n,this.n=r,this.s=p,this.U=m,this.V=h}solve(e){let t=e,n=this.threshold,r=this.s.length,i=L.zeros(r,r);for(let e=0;e<r;e++)Math.abs(this.s[e])<=n?i.set(e,e,0):i.set(e,e,1/this.s[e]);let a=this.U,o=this.rightSingularVectors,s=o.mmul(i),c=o.rows,l=a.rows,u=L.zeros(c,l);for(let e=0;e<c;e++)for(let t=0;t<l;t++){let n=0;for(let i=0;i<r;i++)n+=s.get(e,i)*a.get(t,i);u.set(e,t,n)}return u.mmul(t)}solveForDiagonal(e){return this.solve(L.diag(e))}inverse(){let e=this.V,t=this.threshold,n=e.rows,r=e.columns,i=new L(n,this.s.length);for(let a=0;a<n;a++)for(let n=0;n<r;n++)Math.abs(this.s[n])>t&&i.set(a,n,e.get(a,n)/this.s[n]);let a=this.U,o=a.rows,s=a.columns,c=new L(n,o);for(let e=0;e<n;e++)for(let t=0;t<o;t++){let n=0;for(let r=0;r<s;r++)n+=i.get(e,r)*a.get(t,r);c.set(e,t,n)}return c}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*2**-52,t=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return 2**-52/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return L.diag(this.s)}};function Te(e,t=!1){return e=ye.checkMatrix(e),t?new we(e).inverse():Ee(e,L.eye(e.rows))}function Ee(e,t,n=!1){return e=ye.checkMatrix(e),t=ye.checkMatrix(t),n?new we(e).solve(t):e.isSquare()?new xe(e).solve(t):new Ce(e).solve(t)}function De(e){if(e=L.checkMatrix(e),e.isSquare()){if(e.columns===0)return 1;let t,n,r,i;if(e.columns===2)return t=e.get(0,0),n=e.get(0,1),r=e.get(1,0),i=e.get(1,1),t*i-n*r;if(e.columns===3){let i,a,o;return i=new he(e,[1,2],[1,2]),a=new he(e,[1,2],[0,2]),o=new he(e,[1,2],[0,1]),t=e.get(0,0),n=e.get(0,1),r=e.get(0,2),t*De(i)-n*De(a)+r*De(o)}else return new xe(e).determinant}else throw Error(`determinant can only be calculated for a square matrix`)}function Oe(e,t){let n=[];for(let r=0;r<e;r++)r!==t&&n.push(r);return n}function ke(e,t,n,r=1e-9,i=1e-9){if(e>i)return Array(t.rows+1).fill(0);{let e=t.addRow(n,[0]);for(let t=0;t<e.rows;t++)Math.abs(e.get(t,0))<r&&e.set(t,0,0);return e.to1DArray()}}function Ae(e,t={}){let{thresholdValue:n=1e-9,thresholdError:r=1e-9}=t;e=L.checkMatrix(e);let i=e.rows,a=new L(i,i);for(let t=0;t<i;t++){let o=L.columnVector(e.getRow(t)),s=e.subMatrixRow(Oe(i,t)).transpose(),c=new we(s).solve(o),l=L.sub(o,s.mmul(c)).abs().max();a.setRow(t,ke(l,c,t,n,r))}return a}function je(e,t=2**-52){if(e=L.checkMatrix(e),e.isEmpty())return e.transpose();let n=new we(e,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,a=n.diagonal;for(let e=0;e<a.length;e++)Math.abs(a[e])>t?a[e]=1/a[e]:a[e]=0;return i.mmul(L.diag(a).mmul(r.transpose()))}function Me(e,n=e,r={}){e=new L(e);let i=!1;if(typeof n==`object`&&!L.isMatrix(n)&&!t.isAnyArray(n)?(r=n,n=e,i=!0):n=new L(n),e.rows!==n.rows)throw TypeError(`Both matrices must have the same number of rows`);let{center:a=!0}=r;a&&(e=e.center(`column`),i||(n=n.center(`column`)));let o=e.transpose().mmul(n);for(let t=0;t<o.rows;t++)for(let n=0;n<o.columns;n++)o.set(t,n,o.get(t,n)*(1/(e.rows-1)));return o}function Ne(e,n=e,r={}){e=new L(e);let i=!1;if(typeof n==`object`&&!L.isMatrix(n)&&!t.isAnyArray(n)?(r=n,n=e,i=!0):n=new L(n),e.rows!==n.rows)throw TypeError(`Both matrices must have the same number of rows`);let{center:a=!0,scale:o=!0}=r;a&&(e.center(`column`),i||n.center(`column`)),o&&(e.scale(`column`),i||n.scale(`column`));let s=e.standardDeviation(`column`,{unbiased:!0}),c=i?s:n.standardDeviation(`column`,{unbiased:!0}),l=e.transpose().mmul(n);for(let t=0;t<l.rows;t++)for(let n=0;n<l.columns;n++)l.set(t,n,l.get(t,n)*(1/(s[t]*c[n]))*(1/(e.rows-1)));return l}var Pe=class{constructor(e,t={}){let{assumeSymmetric:n=!1}=t;if(e=ye.checkMatrix(e),!e.isSquare())throw Error(`Matrix is not a square matrix`);if(e.isEmpty())throw Error(`Matrix must be non-empty`);let r=e.columns,i=new L(r,r),a=new Float64Array(r),o=new Float64Array(r),s=e,c,l,u=!1;if(u=n?!0:e.isSymmetric(),u){for(c=0;c<r;c++)for(l=0;l<r;l++)i.set(c,l,s.get(c,l));Fe(r,o,a,i),Ie(r,o,a,i)}else{let e=new L(r,r),t=new Float64Array(r);for(l=0;l<r;l++)for(c=0;c<r;c++)e.set(c,l,s.get(c,l));Le(r,e,t,i),Re(r,o,a,i,e)}this.n=r,this.e=o,this.d=a,this.V=i}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,t=this.e,n=this.d,r=new L(e,e),i,a;for(i=0;i<e;i++){for(a=0;a<e;a++)r.set(i,a,0);r.set(i,i,n[i]),t[i]>0?r.set(i,i+1,t[i]):t[i]<0&&r.set(i,i-1,t[i])}return r}};function Fe(e,t,n,r){let i,a,o,s,c,l,u,d;for(c=0;c<e;c++)n[c]=r.get(e-1,c);for(s=e-1;s>0;s--){for(d=0,o=0,l=0;l<s;l++)d+=Math.abs(n[l]);if(d===0)for(t[s]=n[s-1],c=0;c<s;c++)n[c]=r.get(s-1,c),r.set(s,c,0),r.set(c,s,0);else{for(l=0;l<s;l++)n[l]/=d,o+=n[l]*n[l];for(i=n[s-1],a=Math.sqrt(o),i>0&&(a=-a),t[s]=d*a,o-=i*a,n[s-1]=i-a,c=0;c<s;c++)t[c]=0;for(c=0;c<s;c++){for(i=n[c],r.set(c,s,i),a=t[c]+r.get(c,c)*i,l=c+1;l<=s-1;l++)a+=r.get(l,c)*n[l],t[l]+=r.get(l,c)*i;t[c]=a}for(i=0,c=0;c<s;c++)t[c]/=o,i+=t[c]*n[c];for(u=i/(o+o),c=0;c<s;c++)t[c]-=u*n[c];for(c=0;c<s;c++){for(i=n[c],a=t[c],l=c;l<=s-1;l++)r.set(l,c,r.get(l,c)-(i*t[l]+a*n[l]));n[c]=r.get(s-1,c),r.set(s,c,0)}}n[s]=o}for(s=0;s<e-1;s++){if(r.set(e-1,s,r.get(s,s)),r.set(s,s,1),o=n[s+1],o!==0){for(l=0;l<=s;l++)n[l]=r.get(l,s+1)/o;for(c=0;c<=s;c++){for(a=0,l=0;l<=s;l++)a+=r.get(l,s+1)*r.get(l,c);for(l=0;l<=s;l++)r.set(l,c,r.get(l,c)-a*n[l])}}for(l=0;l<=s;l++)r.set(l,s+1,0)}for(c=0;c<e;c++)n[c]=r.get(e-1,c),r.set(e-1,c,0);r.set(e-1,e-1,1),t[0]=0}function Ie(e,t,n,r){let i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y;for(o=1;o<e;o++)t[o-1]=t[o];t[e-1]=0;let b=0,x=0,S=2**-52;for(l=0;l<e;l++){for(x=Math.max(x,Math.abs(n[l])+Math.abs(t[l])),u=l;u<e&&!(Math.abs(t[u])<=S*x);)u++;if(u>l)do{for(i=n[l],d=(n[l+1]-i)/(2*t[l]),f=Se(d,1),d<0&&(f=-f),n[l]=t[l]/(d+f),n[l+1]=t[l]*(d+f),p=n[l+1],a=i-n[l],o=l+2;o<e;o++)n[o]-=a;for(b+=a,d=n[u],m=1,h=m,g=m,_=t[l+1],v=0,y=0,o=u-1;o>=l;o--)for(g=h,h=m,y=v,i=m*t[o],a=m*d,f=Se(d,t[o]),t[o+1]=v*f,v=t[o]/f,m=d/f,d=m*n[o]-v*i,n[o+1]=a+v*(m*i+v*n[o]),c=0;c<e;c++)a=r.get(c,o+1),r.set(c,o+1,v*r.get(c,o)+m*a),r.set(c,o,m*r.get(c,o)-v*a);d=-v*y*g*_*t[l]/p,t[l]=v*d,n[l]=m*d}while(Math.abs(t[l])>S*x);n[l]=n[l]+b,t[l]=0}for(o=0;o<e-1;o++){for(c=o,d=n[o],s=o+1;s<e;s++)n[s]<d&&(c=s,d=n[s]);if(c!==o)for(n[c]=n[o],n[o]=d,s=0;s<e;s++)d=r.get(s,o),r.set(s,o,r.get(s,c)),r.set(s,c,d)}}function Le(e,t,n,r){let i=e-1,a,o,s,c,l,u,d;for(u=1;u<=i-1;u++){for(d=0,c=u;c<=i;c++)d+=Math.abs(t.get(c,u-1));if(d!==0){for(s=0,c=i;c>=u;c--)n[c]=t.get(c,u-1)/d,s+=n[c]*n[c];for(o=Math.sqrt(s),n[u]>0&&(o=-o),s-=n[u]*o,n[u]=n[u]-o,l=u;l<e;l++){for(a=0,c=i;c>=u;c--)a+=n[c]*t.get(c,l);for(a/=s,c=u;c<=i;c++)t.set(c,l,t.get(c,l)-a*n[c])}for(c=0;c<=i;c++){for(a=0,l=i;l>=u;l--)a+=n[l]*t.get(c,l);for(a/=s,l=u;l<=i;l++)t.set(c,l,t.get(c,l)-a*n[l])}n[u]=d*n[u],t.set(u,u-1,d*o)}}for(c=0;c<e;c++)for(l=0;l<e;l++)r.set(c,l,c===l?1:0);for(u=i-1;u>=1;u--)if(t.get(u,u-1)!==0){for(c=u+1;c<=i;c++)n[c]=t.get(c,u-1);for(l=u;l<=i;l++){for(o=0,c=u;c<=i;c++)o+=n[c]*r.get(c,l);for(o=o/n[u]/t.get(u,u-1),c=u;c<=i;c++)r.set(c,l,r.get(c,l)+o*n[c])}}}function Re(e,t,n,r,i){let a=e-1,o=e-1,s=2**-52,c=0,l=0,u=0,d=0,f=0,p=0,m=0,h=0,g,_,v,y,b,x,S,C,w,T,E,D,O,k,A;for(g=0;g<e;g++)for((g<0||g>o)&&(n[g]=i.get(g,g),t[g]=0),_=Math.max(g-1,0);_<e;_++)l+=Math.abs(i.get(g,_));for(;a>=0;){for(y=a;y>0&&(p=Math.abs(i.get(y-1,y-1))+Math.abs(i.get(y,y)),p===0&&(p=l),!(Math.abs(i.get(y,y-1))<s*p));)y--;if(y===a)i.set(a,a,i.get(a,a)+c),n[a]=i.get(a,a),t[a]=0,a--,h=0;else if(y===a-1){if(S=i.get(a,a-1)*i.get(a-1,a),u=(i.get(a-1,a-1)-i.get(a,a))/2,d=u*u+S,m=Math.sqrt(Math.abs(d)),i.set(a,a,i.get(a,a)+c),i.set(a-1,a-1,i.get(a-1,a-1)+c),C=i.get(a,a),d>=0){for(m=u>=0?u+m:u-m,n[a-1]=C+m,n[a]=n[a-1],m!==0&&(n[a]=C-S/m),t[a-1]=0,t[a]=0,C=i.get(a,a-1),p=Math.abs(C)+Math.abs(m),u=C/p,d=m/p,f=Math.sqrt(u*u+d*d),u/=f,d/=f,_=a-1;_<e;_++)m=i.get(a-1,_),i.set(a-1,_,d*m+u*i.get(a,_)),i.set(a,_,d*i.get(a,_)-u*m);for(g=0;g<=a;g++)m=i.get(g,a-1),i.set(g,a-1,d*m+u*i.get(g,a)),i.set(g,a,d*i.get(g,a)-u*m);for(g=0;g<=o;g++)m=r.get(g,a-1),r.set(g,a-1,d*m+u*r.get(g,a)),r.set(g,a,d*r.get(g,a)-u*m)}else n[a-1]=C+u,n[a]=C+u,t[a-1]=m,t[a]=-m;a-=2,h=0}else{if(C=i.get(a,a),w=0,S=0,y<a&&(w=i.get(a-1,a-1),S=i.get(a,a-1)*i.get(a-1,a)),h===10){for(c+=C,g=0;g<=a;g++)i.set(g,g,i.get(g,g)-C);p=Math.abs(i.get(a,a-1))+Math.abs(i.get(a-1,a-2)),C=w=.75*p,S=-.4375*p*p}if(h===30&&(p=(w-C)/2,p=p*p+S,p>0)){for(p=Math.sqrt(p),w<C&&(p=-p),p=C-S/((w-C)/2+p),g=0;g<=a;g++)i.set(g,g,i.get(g,g)-p);c+=p,C=w=S=.964}for(h+=1,b=a-2;b>=y&&(m=i.get(b,b),f=C-m,p=w-m,u=(f*p-S)/i.get(b+1,b)+i.get(b,b+1),d=i.get(b+1,b+1)-m-f-p,f=i.get(b+2,b+1),p=Math.abs(u)+Math.abs(d)+Math.abs(f),u/=p,d/=p,f/=p,!(b===y||Math.abs(i.get(b,b-1))*(Math.abs(d)+Math.abs(f))<s*(Math.abs(u)*(Math.abs(i.get(b-1,b-1))+Math.abs(m)+Math.abs(i.get(b+1,b+1))))));)b--;for(g=b+2;g<=a;g++)i.set(g,g-2,0),g>b+2&&i.set(g,g-3,0);for(v=b;v<=a-1&&(k=v!==a-1,v!==b&&(u=i.get(v,v-1),d=i.get(v+1,v-1),f=k?i.get(v+2,v-1):0,C=Math.abs(u)+Math.abs(d)+Math.abs(f),C!==0&&(u/=C,d/=C,f/=C)),C!==0);v++)if(p=Math.sqrt(u*u+d*d+f*f),u<0&&(p=-p),p!==0){for(v===b?y!==b&&i.set(v,v-1,-i.get(v,v-1)):i.set(v,v-1,-p*C),u+=p,C=u/p,w=d/p,m=f/p,d/=u,f/=u,_=v;_<e;_++)u=i.get(v,_)+d*i.get(v+1,_),k&&(u+=f*i.get(v+2,_),i.set(v+2,_,i.get(v+2,_)-u*m)),i.set(v,_,i.get(v,_)-u*C),i.set(v+1,_,i.get(v+1,_)-u*w);for(g=0;g<=Math.min(a,v+3);g++)u=C*i.get(g,v)+w*i.get(g,v+1),k&&(u+=m*i.get(g,v+2),i.set(g,v+2,i.get(g,v+2)-u*f)),i.set(g,v,i.get(g,v)-u),i.set(g,v+1,i.get(g,v+1)-u*d);for(g=0;g<=o;g++)u=C*r.get(g,v)+w*r.get(g,v+1),k&&(u+=m*r.get(g,v+2),r.set(g,v+2,r.get(g,v+2)-u*f)),r.set(g,v,r.get(g,v)-u),r.set(g,v+1,r.get(g,v+1)-u*d)}}}if(l!==0){for(a=e-1;a>=0;a--)if(u=n[a],d=t[a],d===0)for(y=a,i.set(a,a,1),g=a-1;g>=0;g--){for(S=i.get(g,g)-u,f=0,_=y;_<=a;_++)f+=i.get(g,_)*i.get(_,a);if(t[g]<0)m=S,p=f;else if(y=g,t[g]===0?i.set(g,a,S===0?-f/(s*l):-f/S):(C=i.get(g,g+1),w=i.get(g+1,g),d=(n[g]-u)*(n[g]-u)+t[g]*t[g],x=(C*p-m*f)/d,i.set(g,a,x),i.set(g+1,a,Math.abs(C)>Math.abs(m)?(-f-S*x)/C:(-p-w*x)/m)),x=Math.abs(i.get(g,a)),s*x*x>1)for(_=g;_<=a;_++)i.set(_,a,i.get(_,a)/x)}else if(d<0)for(y=a-1,Math.abs(i.get(a,a-1))>Math.abs(i.get(a-1,a))?(i.set(a-1,a-1,d/i.get(a,a-1)),i.set(a-1,a,-(i.get(a,a)-u)/i.get(a,a-1))):(A=ze(0,-i.get(a-1,a),i.get(a-1,a-1)-u,d),i.set(a-1,a-1,A[0]),i.set(a-1,a,A[1])),i.set(a,a-1,0),i.set(a,a,1),g=a-2;g>=0;g--){for(T=0,E=0,_=y;_<=a;_++)T+=i.get(g,_)*i.get(_,a-1),E+=i.get(g,_)*i.get(_,a);if(S=i.get(g,g)-u,t[g]<0)m=S,f=T,p=E;else if(y=g,t[g]===0?(A=ze(-T,-E,S,d),i.set(g,a-1,A[0]),i.set(g,a,A[1])):(C=i.get(g,g+1),w=i.get(g+1,g),D=(n[g]-u)*(n[g]-u)+t[g]*t[g]-d*d,O=(n[g]-u)*2*d,D===0&&O===0&&(D=s*l*(Math.abs(S)+Math.abs(d)+Math.abs(C)+Math.abs(w)+Math.abs(m))),A=ze(C*f-m*T+d*E,C*p-m*E-d*T,D,O),i.set(g,a-1,A[0]),i.set(g,a,A[1]),Math.abs(C)>Math.abs(m)+Math.abs(d)?(i.set(g+1,a-1,(-T-S*i.get(g,a-1)+d*i.get(g,a))/C),i.set(g+1,a,(-E-S*i.get(g,a)-d*i.get(g,a-1))/C)):(A=ze(-f-w*i.get(g,a-1),-p-w*i.get(g,a),m,d),i.set(g+1,a-1,A[0]),i.set(g+1,a,A[1]))),x=Math.max(Math.abs(i.get(g,a-1)),Math.abs(i.get(g,a))),s*x*x>1)for(_=g;_<=a;_++)i.set(_,a-1,i.get(_,a-1)/x),i.set(_,a,i.get(_,a)/x)}for(g=0;g<e;g++)if(g<0||g>o)for(_=g;_<e;_++)r.set(g,_,i.get(g,_));for(_=e-1;_>=0;_--)for(g=0;g<=o;g++){for(m=0,v=0;v<=Math.min(_,o);v++)m+=r.get(g,v)*i.get(v,_);r.set(g,_,m)}}}function ze(e,t,n,r){let i,a;return Math.abs(n)>Math.abs(r)?(i=r/n,a=n+i*r,[(e+i*t)/a,(t-i*e)/a]):(i=n/r,a=r+i*n,[(i*e+t)/a,(i*t-e)/a])}var Be=class{constructor(e){if(e=ye.checkMatrix(e),!e.isSymmetric())throw Error(`Matrix is not symmetric`);let t=e,n=t.rows,r=new L(n,n),i=!0,a,o,s;for(o=0;o<n;o++){let e=0;for(s=0;s<o;s++){let n=0;for(a=0;a<s;a++)n+=r.get(s,a)*r.get(o,a);n=(t.get(o,s)-n)/r.get(s,s),r.set(o,s,n),e+=n*n}for(e=t.get(o,o)-e,i&&=e>0,r.set(o,o,Math.sqrt(Math.max(e,0))),s=o+1;s<n;s++)r.set(o,s,0)}this.L=r,this.positiveDefinite=i}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=ye.checkMatrix(e);let t=this.L,n=t.rows;if(e.rows!==n)throw Error(`Matrix dimensions do not match`);if(this.isPositiveDefinite()===!1)throw Error(`Matrix is not positive definite`);let r=e.columns,i=e.clone(),a,o,s;for(s=0;s<n;s++)for(o=0;o<r;o++){for(a=0;a<s;a++)i.set(s,o,i.get(s,o)-i.get(a,o)*t.get(s,a));i.set(s,o,i.get(s,o)/t.get(s,s))}for(s=n-1;s>=0;s--)for(o=0;o<r;o++){for(a=s+1;a<n;a++)i.set(s,o,i.get(s,o)-i.get(a,o)*t.get(a,s));i.set(s,o,i.get(s,o)/t.get(s,s))}return i}get lowerTriangularMatrix(){return this.L}},Ve=class{constructor(e,n={}){e=ye.checkMatrix(e);let{Y:r}=n,{scaleScores:i=!1,maxIterations:a=1e3,terminationCriteria:o=1e-10}=n,s;if(r){if(r=t.isAnyArray(r)&&typeof r[0]==`number`?L.columnVector(r):ye.checkMatrix(r),r.rows!==e.rows)throw Error(`Y should have the same number of rows as X`);s=r.getColumnVector(0)}else s=e.getColumnVector(0);let c=1,l,u,d,f;for(let t=0;t<a&&c>o;t++)d=e.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),d=d.div(d.norm()),l=e.mmul(d).div(d.transpose().mmul(d).get(0,0)),t>0&&(c=l.clone().sub(f).pow(2).sum()),f=l.clone(),r?(u=r.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),u=u.div(u.norm()),s=r.mmul(u).div(u.transpose().mmul(u).get(0,0))):s=l;if(r){let t=e.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0));t=t.div(t.norm());let n=e.clone().sub(l.clone().mmul(t.transpose())),i=s.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),a=r.clone().sub(l.clone().mulS(i.get(0,0)).mmul(u.transpose()));this.t=l,this.p=t.transpose(),this.w=d.transpose(),this.q=u,this.u=s,this.s=l.transpose().mmul(l),this.xResidual=n,this.yResidual=a,this.betas=i}else this.w=d.transpose(),this.s=l.transpose().mmul(l).sqrt(),i?this.t=l.clone().div(this.s.get(0,0)):this.t=l,this.xResidual=e.sub(l.mmul(d.transpose()))}};exports.AbstractMatrix=I,exports.CHO=Be,exports.CholeskyDecomposition=Be,exports.DistanceMatrix=se,exports.EVD=Pe,exports.EigenvalueDecomposition=Pe,exports.LU=xe,exports.LuDecomposition=xe,exports.Matrix=L,exports.MatrixColumnSelectionView=ue,exports.MatrixColumnView=le,exports.MatrixFlipColumnView=de,exports.MatrixFlipRowView=fe,exports.MatrixRowSelectionView=me,exports.MatrixRowView=pe,exports.MatrixSelectionView=he,exports.MatrixSubView=ge,exports.MatrixTransposeView=_e,exports.NIPALS=Ve,exports.Nipals=Ve,exports.QR=Ce,exports.QrDecomposition=Ce,exports.SVD=we,exports.SingularValueDecomposition=we,exports.SymmetricMatrix=oe,exports.WrapperMatrix1D=ve,exports.WrapperMatrix2D=ye,exports.correlation=Ne,exports.covariance=Me,exports.default=L,exports.determinant=De,exports.inverse=Te,exports.linearDependencies=Ae,exports.pseudoInverse=je,exports.solve=Ee,exports.wrap=be}))(),1);UG.AbstractMatrix,UG.CHO,UG.CholeskyDecomposition,UG.DistanceMatrix,UG.EVD,UG.EigenvalueDecomposition,UG.LU,UG.LuDecomposition;const WG=UG.Matrix;UG.MatrixColumnSelectionView,UG.MatrixColumnView,UG.MatrixFlipColumnView,UG.MatrixFlipRowView,UG.MatrixRowSelectionView,UG.MatrixRowView,UG.MatrixSelectionView,UG.MatrixSubView,UG.MatrixTransposeView,UG.NIPALS,UG.Nipals,UG.QR,UG.QrDecomposition,UG.SVD;const GG=UG.SingularValueDecomposition;UG.SymmetricMatrix,UG.WrapperMatrix1D,UG.WrapperMatrix2D,UG.correlation,UG.covariance,UG.default.Matrix?UG.default.Matrix:UG.Matrix,UG.determinant,UG.inverse,UG.linearDependencies,UG.pseudoInverse,UG.solve,UG.wrap;var KG={center:[0,0],linkDistance:50},qG=class{constructor(e={}){this.options=e,this.id=`mds`,this.options=Object.assign(Object.assign({},KG),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,e,t)})}genericMDSLayout(e,t,n){return En(this,void 0,void 0,function*(){let{center:r=[0,0],linkDistance:i=50}=Object.assign(Object.assign({},this.options),n),a=t.getAllNodes(),o=t.getAllEdges();if(!a?.length||a.length===1)return _W(t,e,r);let s=rW({nodes:a,edges:o},!1),c=nW(s);JG(c);let l=iW(c,i),u=YG(l),d=[];return u.forEach((e,t)=>{let n=lW(a[t]);n.data.x=e[0]+r[0],n.data.y=e[1]+r[1],d.push(n)}),e&&d.forEach(e=>t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})),{nodes:d,edges:o}})}},JG=e=>{let t=-999999;e.forEach(e=>{e.forEach(e=>{e!==1/0&&t<e&&(t=e)})}),e.forEach((n,r)=>{n.forEach((n,i)=>{n===1/0&&(e[r][i]=t)})})},YG=e=>{let t=WG.mul(WG.pow(e,2),-.5),n=t.mean(`row`),r=t.mean(`column`),i=t.mean();t.add(i).subRowVector(n).subColumnVector(r);let a=new GG(t),o=WG.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map(e=>WG.mul([e],[o]).toJSON()[0].splice(0,2))};function XG(e){return!!e.tick&&!!e.stop}var ZG={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},QG={center:[0,0],comboPadding:10,treeKey:`combo`},$G=class{constructor(e={}){this.options=e,this.id=`comboCombined`,this.options=Object.assign(Object.assign({},QG),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,e,t)})}genericComboCombinedLayout(e,t,n){return En(this,void 0,void 0,function*(){let r=this.initVals(Object.assign(Object.assign({},this.options),n)),{center:i,treeKey:a,outerLayout:o}=r,s=t.getAllNodes().filter(e=>!e.data._isCombo),c=t.getAllNodes().filter(e=>e.data._isCombo),l=t.getAllEdges(),u=s?.length;if(!u||u===1)return _W(t,e,i);let d=[],f=new Map;s.forEach(e=>{f.set(e.id,e)});let p=new Map;c.forEach(e=>{p.set(e.id,e)});let m=new Map,h=this.getInnerGraphs(t,a,f,p,l,r,m);yield Promise.all(h);let g=new Map,_=[],v=new Map,y=!0;t.getRoots(a).forEach(e=>{let n=m.get(e.id),r=p.get(e.id)||f.get(e.id),i={id:e.id,data:Object.assign(Object.assign({},e.data),{x:n.data.x||r.data.x,y:n.data.y||r.data.y,fx:n.data.fx||r.data.fx,fy:n.data.fy||r.data.fy,mass:n.data.mass||r.data.mass,size:n.data.size})};_.push(i),g.set(e.id,!0),!isNaN(i.data.x)&&i.data.x!==0&&!isNaN(i.data.y)&&i.data.y!==0?y=!1:(i.data.x=Math.random()*100,i.data.y=Math.random()*100),sW(t,[e],t=>{t.id!==e.id&&v.set(t.id,e.id)},`TB`,a)});let b=[];l.forEach(e=>{let t=v.get(e.source)||e.source,n=v.get(e.target)||e.target;t!==n&&g.has(t)&&g.has(n)&&b.push({id:e.id,source:t,target:n,data:{}})});let x;if(_?.length){if(_.length===1)_[0].data.x=i[0],_[0].data.y=i[1];else{let e=new tV({nodes:_,edges:b}),t=o||new EG;y&&ZG[t.id]&&(yield(_.length<100?new qG:new wW).assign(e));let n=Object.assign({center:i,kg:5,preventOverlap:!0,animate:!1},t.id===`force`?{gravity:1,factor:4,linkDistance:(e,t,n)=>{let r=Math.max(...t.data.size)||32,i=Math.max(...n.data.size)||32;return r/2+i/2+200}}:{});x=yield eK(t,e,n)}m.forEach(e=>{var t;let n=x.nodes.find(t=>t.id===e.id);if(n){let{x:t,y:r}=n.data;e.data.visited=!0,e.data.x=t,e.data.y=r,d.push({id:e.id,data:{x:t,y:r}})}let{x:r,y:i}=e.data;(t=e.data.nodes)==null||t.forEach(e=>{d.push({id:e.id,data:{x:e.data.x+r,y:e.data.y+i}})})}),m.forEach(({data:e})=>{let{x:t,y:n,visited:r,nodes:i}=e;i?.forEach(e=>{if(!r){let r=d.find(t=>t.id===e.id);r.data.x+=t||0,r.data.y+=n||0}})})}return e&&d.forEach(e=>{t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})}),{nodes:d,edges:l}})}initVals(e){let t=Object.assign({},e),{nodeSize:n,spacing:r,comboPadding:i}=e,a,o;if(o=K(r)?()=>r:rS(r)?r:()=>0,t.spacing=o,!n)a=e=>{let t=o(e);return e.size?tW(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+t)/2:oS(e.size)?((e.size.width>e.size.height?e.size.width:e.size.height)+t)/2:(e.size+t)/2:32+t/2};else if(rS(n))a=e=>{let t=n(e),r=o(e);return tW(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+r)/2:((t||32)+r)/2};else if(tW(n)){let e=(n[0]>n[1]?n[0]:n[1])/2;a=t=>e+o(t)/2}else{let e=n/2;a=t=>e+o(t)/2}t.nodeSize=a;let s;return s=K(i)?()=>i:tW(i)?()=>Math.max.apply(null,i):rS(i)?i:()=>0,t.comboPadding=s,t}getInnerGraphs(e,t,n,r,i,a,o){let{nodeSize:s,comboPadding:c,spacing:l,innerLayout:u}=a,d=u||new wW({}),f={center:[0,0],preventOverlap:!0,nodeSpacing:l},p=[],m=e=>{let t=c?.(e)||10;return tW(t)&&(t=Math.max(...t)),{size:t?[t*2,t*2]:[30,30],padding:t}};return e.getRoots(t).forEach(a=>{o.set(a.id,{id:a.id,data:{nodes:[],size:m(a).size}});let c=Promise.resolve();sW(e,[a],a=>{if(!a.data._isCombo)return;let{size:l,padding:u}=m(a);if(!e.getChildren(a.id,t)?.length)o.set(a.id,{id:a.id,data:Object.assign(Object.assign({},a.data),{size:l})});else{let l=o.get(a.id);o.set(a.id,{id:a.id,data:Object.assign({nodes:[]},l?.data)});let p=new Map,m=e.getChildren(a.id,t).map(e=>{if(e.data._isCombo)return o.has(e.id)||o.set(e.id,{id:e.id,data:Object.assign({},e.data)}),p.set(e.id,!0),o.get(e.id);let t=n.get(e.id)||r.get(e.id);return p.set(e.id,!0),{id:e.id,data:Object.assign(Object.assign({},t.data),e.data)}}),h={nodes:m,edges:i.filter(e=>p.has(e.source)&&p.has(e.target))},g=1/0;m.forEach(e=>{let{size:t}=e.data;t||=o.get(e.id)?.data.size||s?.(e)||[30,30],K(t)&&(t=[t,t]);let[n,r]=t;g>n&&(g=n),g>r&&(g=r),e.data.size=t}),c=c.then(()=>En(this,void 0,void 0,function*(){let e=new tV(h);yield eK(d,e,f,!0);let{minX:t,minY:n,maxX:r,maxY:i}=aW(m),s={x:(r+t)/2,y:(i+n)/2};h.nodes.forEach(e=>{e.data.x-=s.x,e.data.y-=s.y});let c=[Math.max(r-t,g)+u*2,Math.max(i-n,g)+u*2];o.get(a.id).data.size=c,o.get(a.id).data.nodes=m}))}return!0},`BT`,t),p.push(c)}),p}};function eK(e,t,n,r){return En(this,void 0,void 0,function*(){return XG(e)?(e.execute(t,n),e.stop(),e.tick(n.iterations??300)):r?yield e.assign(t,n):yield e.execute(t,n)})}function tK(e,t){var n,r=1;e??=0,t??=0;function i(){var i,a=n.length,o,s=0,c=0;for(i=0;i<a;++i)o=n[i],s+=o.x,c+=o.y;for(s=(s/a-e)*r,c=(c/a-t)*r,i=0;i<a;++i)o=n[i],o.x-=s,o.y-=c}return i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i}function nK(e){return function(){return e}}function rK(e){return(e()-.5)*1e-6}function iK(e){return e.x+e.vx}function aK(e){return e.y+e.vy}function oK(e){var t,n,r,i=1,a=1;typeof e!=`function`&&(e=nK(e==null?1:+e));function o(){for(var e,o=t.length,c,l,u,d,f,p,m=0;m<a;++m)for(c=UW(t,iK,aK).visitAfter(s),e=0;e<o;++e)l=t[e],f=n[l.index],p=f*f,u=l.x+l.vx,d=l.y+l.vy,c.visit(h);function h(e,t,n,a,o){var s=e.data,c=e.r,m=f+c;if(s){if(s.index>l.index){var h=u-s.x-s.vx,g=d-s.y-s.vy,_=h*h+g*g;_<m*m&&(h===0&&(h=rK(r),_+=h*h),g===0&&(g=rK(r),_+=g*g),_=(m-(_=Math.sqrt(_)))/_*i,l.vx+=(h*=_)*(m=(c*=c)/(p+c)),l.vy+=(g*=_)*m,s.vx-=h*(m=1-m),s.vy-=g*m)}return}return t>u+m||a<u-m||n>d+m||o<d-m}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function c(){if(t){var r,i=t.length,a;for(n=Array(i),r=0;r<i;++r)a=t[r],n[a.index]=+e(a,r,t)}}return o.initialize=function(e,n){t=e,r=n,c()},o.iterations=function(e){return arguments.length?(a=+e,o):a},o.strength=function(e){return arguments.length?(i=+e,o):i},o.radius=function(t){return arguments.length?(e=typeof t==`function`?t:nK(+t),c(),o):e},o}function sK(e){return e.index}function cK(e,t){var n=e.get(t);if(!n)throw Error(`node not found: `+t);return n}function lK(e){var t=sK,n=d,r,i=nK(30),a,o,s,c,l,u=1;e??=[];function d(e){return 1/Math.min(s[e.source.index],s[e.target.index])}function f(t){for(var n=0,i=e.length;n<u;++n)for(var o=0,s,d,f,p,m,h,g;o<i;++o)s=e[o],d=s.source,f=s.target,p=f.x+f.vx-d.x-d.vx||rK(l),m=f.y+f.vy-d.y-d.vy||rK(l),h=Math.sqrt(p*p+m*m),h=(h-a[o])/h*t*r[o],p*=h,m*=h,f.vx-=p*(g=c[o]),f.vy-=m*g,d.vx+=p*(g=1-g),d.vy+=m*g}function p(){if(o){var n,i=o.length,l=e.length,u=new Map(o.map((e,n)=>[t(e,n,o),e])),d;for(n=0,s=Array(i);n<l;++n)d=e[n],d.index=n,typeof d.source!=`object`&&(d.source=cK(u,d.source)),typeof d.target!=`object`&&(d.target=cK(u,d.target)),s[d.source.index]=(s[d.source.index]||0)+1,s[d.target.index]=(s[d.target.index]||0)+1;for(n=0,c=Array(l);n<l;++n)d=e[n],c[n]=s[d.source.index]/(s[d.source.index]+s[d.target.index]);r=Array(l),m(),a=Array(l),h()}}function m(){if(o)for(var t=0,i=e.length;t<i;++t)r[t]=+n(e[t],t,e)}function h(){if(o)for(var t=0,n=e.length;t<n;++t)a[t]=+i(e[t],t,e)}return f.initialize=function(e,t){o=e,l=t,p()},f.links=function(t){return arguments.length?(e=t,p(),f):e},f.id=function(e){return arguments.length?(t=e,f):t},f.iterations=function(e){return arguments.length?(u=+e,f):u},f.strength=function(e){return arguments.length?(n=typeof e==`function`?e:nK(+e),m(),f):n},f.distance=function(e){return arguments.length?(i=typeof e==`function`?e:nK(+e),h(),f):i},f}var uK={value:()=>{}};function dK(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+``)||r in n||/[\s.]/.test(r))throw Error(`illegal type: `+r);n[r]=[]}return new fK(n)}function fK(e){this._=e}function pK(e,t){return e.trim().split(/^|\s+/).map(function(e){var n=``,r=e.indexOf(`.`);if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw Error(`unknown type: `+e);return{type:e,name:n}})}fK.prototype=dK.prototype={constructor:fK,on:function(e,t){var n=this._,r=pK(e+``,n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=mK(n[i],e.name)))return i;return}if(t!=null&&typeof t!=`function`)throw Error(`invalid callback: `+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=hK(n[i],e.name,t);else if(t==null)for(i in n)n[i]=hK(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fK(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function mK(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function hK(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=uK,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var gK=dK,_K=0,vK=0,yK=0,bK=1e3,xK,SK,CK=0,wK=0,TK=0,EK=typeof performance==`object`&&performance.now?performance:Date,DK=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function OK(){return wK||=(DK(kK),EK.now()+TK)}function kK(){wK=0}function AK(){this._call=this._time=this._next=null}AK.prototype=jK.prototype={constructor:AK,restart:function(e,t,n){if(typeof e!=`function`)throw TypeError(`callback is not a function`);n=(n==null?OK():+n)+(t==null?0:+t),!this._next&&SK!==this&&(SK?SK._next=this:xK=this,SK=this),this._call=e,this._time=n,IK()},stop:function(){this._call&&(this._call=null,this._time=1/0,IK())}};function jK(e,t,n){var r=new AK;return r.restart(e,t,n),r}function MK(){OK(),++_K;for(var e=xK,t;e;)(t=wK-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_K}function NK(){wK=(CK=EK.now())+TK,_K=vK=0;try{MK()}finally{_K=0,FK(),wK=0}}function PK(){var e=EK.now(),t=e-CK;t>bK&&(TK-=t,CK=e)}function FK(){for(var e,t=xK,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:xK=n);SK=e,IK(r)}function IK(e){_K||(vK&&=clearTimeout(vK),e-wK>24?(e<1/0&&(vK=setTimeout(NK,e-EK.now()-TK)),yK&&=clearInterval(yK)):(yK||=(CK=EK.now(),setInterval(PK,bK)),_K=1,DK(NK)))}var LK=1664525,RK=1013904223,zK=4294967296;function BK(){let e=1;return()=>(e=(LK*e+RK)%zK)/zK}function VK(e){return e.x}function HK(e){return e.y}var UK=10,WK=Math.PI*(3-Math.sqrt(5));function GK(e){var t,n=1,r=.001,i=1-r**(1/300),a=0,o=.6,s=new Map,c=jK(d),l=gK(`tick`,`end`),u=BK();e??=[];function d(){f(),l.call(`tick`,t),n<r&&(c.stop(),l.call(`end`,t))}function f(r){var c,l=e.length,u;r===void 0&&(r=1);for(var d=0;d<r;++d)for(n+=(a-n)*i,s.forEach(function(e){e(n)}),c=0;c<l;++c)u=e[c],u.fx==null?u.x+=u.vx*=o:(u.x=u.fx,u.vx=0),u.fy==null?u.y+=u.vy*=o:(u.y=u.fy,u.vy=0);return t}function p(){for(var t=0,n=e.length,r;t<n;++t){if(r=e[t],r.index=t,r.fx!=null&&(r.x=r.fx),r.fy!=null&&(r.y=r.fy),isNaN(r.x)||isNaN(r.y)){var i=UK*Math.sqrt(.5+t),a=t*WK;r.x=i*Math.cos(a),r.y=i*Math.sin(a)}(isNaN(r.vx)||isNaN(r.vy))&&(r.vx=r.vy=0)}}function m(t){return t.initialize&&t.initialize(e,u),t}return p(),t={tick:f,restart:function(){return c.restart(d),t},stop:function(){return c.stop(),t},nodes:function(n){return arguments.length?(e=n,p(),s.forEach(m),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(a=+e,t):a},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},randomSource:function(e){return arguments.length?(u=e,s.forEach(m),t):u},force:function(e,n){return arguments.length>1?(n==null?s.delete(e):s.set(e,m(n)),t):s.get(e)},find:function(t,n,r){var i=0,a=e.length,o,s,c,l,u;for(r==null?r=1/0:r*=r,i=0;i<a;++i)l=e[i],o=t-l.x,s=n-l.y,c=o*o+s*s,c<r&&(u=l,r=c);return u},on:function(e,n){return arguments.length>1?(l.on(e,n),t):l.on(e)}}}function KK(){var e,t,n,r,i=nK(-30),a,o=1,s=1/0,c=.81;function l(n){var i,a=e.length,o=UW(e,VK,HK).visitAfter(d);for(r=n,i=0;i<a;++i)t=e[i],o.visit(f)}function u(){if(e){var t,n=e.length,r;for(a=Array(n),t=0;t<n;++t)r=e[t],a[r.index]=+i(r,t,e)}}function d(e){var t=0,n,r,i=0,o,s,c;if(e.length){for(o=s=c=0;c<4;++c)(n=e[c])&&(r=Math.abs(n.value))&&(t+=n.value,i+=r,o+=r*n.x,s+=r*n.y);e.x=o/i,e.y=s/i}else{n=e,n.x=n.data.x,n.y=n.data.y;do t+=a[n.data.index];while(n=n.next)}e.value=t}function f(e,i,l,u){if(!e.value)return!0;var d=e.x-t.x,f=e.y-t.y,p=u-i,m=d*d+f*f;if(p*p/c<m)return m<s&&(d===0&&(d=rK(n),m+=d*d),f===0&&(f=rK(n),m+=f*f),m<o&&(m=Math.sqrt(o*m)),t.vx+=d*e.value*r/m,t.vy+=f*e.value*r/m),!0;if(!(e.length||m>=s)){(e.data!==t||e.next)&&(d===0&&(d=rK(n),m+=d*d),f===0&&(f=rK(n),m+=f*f),m<o&&(m=Math.sqrt(o*m)));do e.data!==t&&(p=a[e.data.index]*r/m,t.vx+=d*p,t.vy+=f*p);while(e=e.next)}}return l.initialize=function(t,r){e=t,n=r,u()},l.strength=function(e){return arguments.length?(i=typeof e==`function`?e:nK(+e),u(),l):i},l.distanceMin=function(e){return arguments.length?(o=e*e,l):Math.sqrt(o)},l.distanceMax=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l.theta=function(e){return arguments.length?(c=e*e,l):Math.sqrt(c)},l}function qK(e,t,n){var r,i=nK(.1),a,o;typeof e!=`function`&&(e=nK(+e)),t??=0,n??=0;function s(e){for(var i=0,s=r.length;i<s;++i){var c=r[i],l=c.x-t||1e-6,u=c.y-n||1e-6,d=Math.sqrt(l*l+u*u),f=(o[i]-d)*a[i]*e/d;c.vx+=l*f,c.vy+=u*f}}function c(){if(r){var t,n=r.length;for(a=Array(n),o=Array(n),t=0;t<n;++t)o[t]=+e(r[t],t,r),a[t]=isNaN(o[t])?0:+i(r[t],t,r)}}return s.initialize=function(e){r=e,c()},s.strength=function(e){return arguments.length?(i=typeof e==`function`?e:nK(+e),c(),s):i},s.radius=function(t){return arguments.length?(e=typeof t==`function`?t:nK(+t),c(),s):e},s.x=function(e){return arguments.length?(t=+e,s):t},s.y=function(e){return arguments.length?(n=+e,s):n},s}function JK(e){var t=nK(.1),n,r,i;typeof e!=`function`&&(e=nK(e==null?0:+e));function a(e){for(var t=0,a=n.length,o;t<a;++t)o=n[t],o.vx+=(i[t]-o.x)*r[t]*e}function o(){if(n){var a,o=n.length;for(r=Array(o),i=Array(o),a=0;a<o;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return a.initialize=function(e){n=e,o()},a.strength=function(e){return arguments.length?(t=typeof e==`function`?e:nK(+e),o(),a):t},a.x=function(t){return arguments.length?(e=typeof t==`function`?t:nK(+t),o(),a):e},a}function YK(e){var t=nK(.1),n,r,i;typeof e!=`function`&&(e=nK(e==null?0:+e));function a(e){for(var t=0,a=n.length,o;t<a;++t)o=n[t],o.vy+=(i[t]-o.y)*r[t]*e}function o(){if(n){var a,o=n.length;for(r=Array(o),i=Array(o),a=0;a<o;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return a.initialize=function(e){n=e,o()},a.strength=function(e){return arguments.length?(t=typeof e==`function`?e:nK(+e),o(),a):t},a.y=function(t){return arguments.length?(e=typeof t==`function`?t:nK(+t),o(),a):e},a}var XK=class{constructor(e){this.id=`d3-force`,this.config={inputNodeAttrs:[`x`,`y`,`vx`,`vy`,`fx`,`fy`],outputNodeAttrs:[`x`,`y`,`vx`,`vy`],simulationAttrs:[`alpha`,`alphaMin`,`alphaDecay`,`alphaTarget`,`velocityDecay`,`randomSource`]},this.forceMap={link:lK,manyBody:KK,center:tK,collide:oK,radial:qK,x:JK,y:YK},this.options={link:{id:e=>e.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},eC(this.options,e),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericLayout(!0,e,t)})}stop(){this.simulation.stop()}tick(e){return this.simulation.tick(e),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(e,t){let n=this.context.nodes.find(t=>t.id===e);n&&t.forEach((e,t)=>{if(typeof e==`number`||e===null){let r=[`fx`,`fy`,`fz`][t];n[r]=e}})}getOptions(e){let t=eC({},this.options,e);return t.collide&&t.collide?.radius===void 0&&(t.collide=t.collide||{},t.collide.radius=t.nodeSize??10),t.iterations===void 0&&(t.link&&t.link.iterations===void 0&&(t.iterations=t.link.iterations),t.collide&&t.collide.iterations===void 0&&(t.iterations=t.collide.iterations)),this.context.options=t,t}genericLayout(e,t,n){var r;return En(this,void 0,void 0,function*(){let i=this.getOptions(n),a=t.getAllNodes().map(({id:e,data:t})=>Object.assign(Object.assign({id:e},t),lC(t.data,this.config.inputNodeAttrs))),o=t.getAllEdges().map(e=>Object.assign({},e));Object.assign(this.context,{assign:e,nodes:a,edges:o,graph:t});let s=new Promise(e=>{this.resolver=e}),c=this.setSimulation(i);return c.nodes(a),(r=c.force(`link`))==null||r.links(o),s})}getResult(){let{assign:e,nodes:t,edges:n,graph:r}=this.context,i=t.map(e=>({id:e.id,data:Object.assign(Object.assign({},e.data),lC(e,this.config.outputNodeAttrs))})),a=n.map(({id:e,source:t,target:n,data:r})=>({id:e,source:typeof t==`object`?t.id:t,target:typeof n==`object`?n.id:n,data:r}));return e&&i.forEach(e=>r.mergeNodeData(e.id,e.data)),{nodes:i,edges:a}}initSimulation(){return GK()}setSimulation(e){let t=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||=t.on(`tick`,()=>e.onTick?.call(e,this.getResult())).on(`end`,()=>this.resolver?.call(this,this.getResult())),ZK(t,this.config.simulationAttrs.map(t=>[t,e[t]])),Object.entries(this.forceMap).forEach(([n,r])=>{let i=n;if(e[n]){let n=t.force(i);n||(n=r(),t.force(i,n)),ZK(n,Object.entries(e[i]))}else t.force(i,null)}),t}},ZK=(e,t)=>t.reduce((t,[n,r])=>!t[n]||r===void 0?t:t[n].call(e,r),e),QK=r(((exports,t)=>{function n(){this.__data__=[],this.size=0}t.exports=n})),$K=r(((exports,t)=>{function n(e,t){return e===t||e!==e&&t!==t}t.exports=n})),eq=r(((exports,t)=>{var n=$K();function r(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}t.exports=r})),tq=r(((exports,t)=>{var n=eq(),r=Array.prototype.splice;function i(e){var t=this.__data__,i=n(t,e);if(i<0)return!1;var a=t.length-1;return i==a?t.pop():r.call(t,i,1),--this.size,!0}t.exports=i})),nq=r(((exports,t)=>{var n=eq();function r(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}t.exports=r})),rq=r(((exports,t)=>{var n=eq();function r(e){return n(this.__data__,e)>-1}t.exports=r})),iq=r(((exports,t)=>{var n=eq();function r(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}t.exports=r})),aq=r(((exports,t)=>{var n=QK(),r=tq(),i=nq(),a=rq(),o=iq();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s})),oq=r(((exports,t)=>{var n=aq();function r(){this.__data__=new n,this.size=0}t.exports=r})),sq=r(((exports,t)=>{function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}t.exports=n})),cq=r(((exports,t)=>{function n(e){return this.__data__.get(e)}t.exports=n})),lq=r(((exports,t)=>{function n(e){return this.__data__.has(e)}t.exports=n})),uq=r(((exports,t)=>{t.exports=typeof global==`object`&&global&&global.Object===Object&&global})),dq=r(((exports,t)=>{var n=uq(),r=typeof self==`object`&&self&&self.Object===Object&&self;t.exports=n||r||Function(`return this`)()})),fq=r(((exports,t)=>{t.exports=dq().Symbol})),pq=r(((exports,t)=>{var n=fq(),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,o=n?n.toStringTag:void 0;function s(e){var t=i.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch{}var s=a.call(e);return r&&(t?e[o]=n:delete e[o]),s}t.exports=s})),mq=r(((exports,t)=>{var n=Object.prototype.toString;function r(e){return n.call(e)}t.exports=r})),hq=r(((exports,t)=>{var n=fq(),r=pq(),i=mq(),a=`[object Null]`,o=`[object Undefined]`,s=n?n.toStringTag:void 0;function c(e){return e==null?e===void 0?o:a:s&&s in Object(e)?r(e):i(e)}t.exports=c})),gq=r(((exports,t)=>{function n(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}t.exports=n})),_q=r(((exports,t)=>{var n=hq(),r=gq(),i=`[object AsyncFunction]`,a=`[object Function]`,o=`[object GeneratorFunction]`,s=`[object Proxy]`;function c(e){if(!r(e))return!1;var t=n(e);return t==a||t==o||t==i||t==s}t.exports=c})),vq=r(((exports,t)=>{t.exports=dq()[`__core-js_shared__`]})),yq=r(((exports,t)=>{var n=vq(),r=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}();function i(e){return!!r&&r in e}t.exports=i})),bq=r(((exports,t)=>{var n=Function.prototype.toString;function r(e){if(e!=null){try{return n.call(e)}catch{}try{return e+``}catch{}}return``}t.exports=r})),xq=r(((exports,t)=>{var n=_q(),r=yq(),i=gq(),a=bq(),o=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,f=RegExp(`^`+u.call(d).replace(o,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function p(e){return!i(e)||r(e)?!1:(n(e)?f:s).test(a(e))}t.exports=p})),Sq=r(((exports,t)=>{function n(e,t){return e?.[t]}t.exports=n})),Cq=r(((exports,t)=>{var n=xq(),r=Sq();function i(e,t){var i=r(e,t);return n(i)?i:void 0}t.exports=i})),wq=r(((exports,t)=>{var n=Cq(),r=dq();t.exports=n(r,`Map`)})),Tq=r(((exports,t)=>{t.exports=Cq()(Object,`create`)})),Eq=r(((exports,t)=>{var n=Tq();function r(){this.__data__=n?n(null):{},this.size=0}t.exports=r})),Dq=r(((exports,t)=>{function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n})),Oq=r(((exports,t)=>{var n=Tq(),r=`__lodash_hash_undefined__`,i=Object.prototype.hasOwnProperty;function a(e){var t=this.__data__;if(n){var a=t[e];return a===r?void 0:a}return i.call(t,e)?t[e]:void 0}t.exports=a})),kq=r(((exports,t)=>{var n=Tq(),r=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;return n?t[e]!==void 0:r.call(t,e)}t.exports=i})),Aq=r(((exports,t)=>{var n=Tq(),r=`__lodash_hash_undefined__`;function i(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n&&t===void 0?r:t,this}t.exports=i})),jq=r(((exports,t)=>{var n=Eq(),r=Dq(),i=Oq(),a=kq(),o=Aq();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s})),Mq=r(((exports,t)=>{var n=jq(),r=aq(),i=wq();function a(){this.size=0,this.__data__={hash:new n,map:new(i||r),string:new n}}t.exports=a})),Nq=r(((exports,t)=>{function n(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}t.exports=n})),Pq=r(((exports,t)=>{var n=Nq();function r(e,t){var r=e.__data__;return n(t)?r[typeof t==`string`?`string`:`hash`]:r.map}t.exports=r})),Fq=r(((exports,t)=>{var n=Pq();function r(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}t.exports=r})),Iq=r(((exports,t)=>{var n=Pq();function r(e){return n(this,e).get(e)}t.exports=r})),Lq=r(((exports,t)=>{var n=Pq();function r(e){return n(this,e).has(e)}t.exports=r})),Rq=r(((exports,t)=>{var n=Pq();function r(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}t.exports=r})),zq=r(((exports,t)=>{var n=Mq(),r=Fq(),i=Iq(),a=Lq(),o=Rq();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s})),Bq=r(((exports,t)=>{var n=aq(),r=wq(),i=zq(),a=200;function o(e,t){var o=this.__data__;if(o instanceof n){var s=o.__data__;if(!r||s.length<a-1)return s.push([e,t]),this.size=++o.size,this;o=this.__data__=new i(s)}return o.set(e,t),this.size=o.size,this}t.exports=o})),Vq=r(((exports,t)=>{var n=aq(),r=oq(),i=sq(),a=cq(),o=lq(),s=Bq();function c(e){this.size=(this.__data__=new n(e)).size}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=o,c.prototype.set=s,t.exports=c})),Hq=r(((exports,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}t.exports=n})),Uq=r(((exports,t)=>{var n=Cq();t.exports=function(){try{var e=n(Object,`defineProperty`);return e({},``,{}),e}catch{}}()})),Wq=r(((exports,t)=>{var n=Uq();function r(e,t,r){t==`__proto__`&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}t.exports=r})),Gq=r(((exports,t)=>{var n=Wq(),r=$K(),i=Object.prototype.hasOwnProperty;function a(e,t,a){var o=e[t];(!(i.call(e,t)&&r(o,a))||a===void 0&&!(t in e))&&n(e,t,a)}t.exports=a})),Kq=r(((exports,t)=>{var n=Gq(),r=Wq();function i(e,t,i,a){var o=!i;i||={};for(var s=-1,c=t.length;++s<c;){var l=t[s],u=a?a(i[l],e[l],l,i,e):void 0;u===void 0&&(u=e[l]),o?r(i,l,u):n(i,l,u)}return i}t.exports=i})),qq=r(((exports,t)=>{function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}t.exports=n})),Jq=r(((exports,t)=>{function n(e){return typeof e==`object`&&!!e}t.exports=n})),Yq=r(((exports,t)=>{var n=hq(),r=Jq(),i=`[object Arguments]`;function a(e){return r(e)&&n(e)==i}t.exports=a})),Xq=r(((exports,t)=>{var n=Yq(),r=Jq(),i=Object.prototype,a=i.hasOwnProperty,o=i.propertyIsEnumerable;t.exports=n(function(){return arguments}())?n:function(e){return r(e)&&a.call(e,`callee`)&&!o.call(e,`callee`)}})),Zq=r(((exports,t)=>{t.exports=Array.isArray})),Qq=r(((exports,t)=>{function n(){return!1}t.exports=n})),$q=r(((exports,t)=>{var n=dq(),r=Qq(),i=typeof exports==`object`&&exports&&!exports.nodeType&&exports,a=i&&typeof t==`object`&&t&&!t.nodeType&&t,o=a&&a.exports===i?n.Buffer:void 0;t.exports=(o?o.isBuffer:void 0)||r})),eJ=r(((exports,t)=>{var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function i(e,t){var i=typeof e;return t??=n,!!t&&(i==`number`||i!=`symbol`&&r.test(e))&&e>-1&&e%1==0&&e<t}t.exports=i})),tJ=r(((exports,t)=>{var n=9007199254740991;function r(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=n}t.exports=r})),nJ=r(((exports,t)=>{var n=hq(),r=tJ(),i=Jq(),a=`[object Arguments]`,o=`[object Array]`,s=`[object Boolean]`,c=`[object Date]`,l=`[object Error]`,u=`[object Function]`,d=`[object Map]`,f=`[object Number]`,p=`[object Object]`,m=`[object RegExp]`,h=`[object Set]`,g=`[object String]`,_=`[object WeakMap]`,v=`[object ArrayBuffer]`,y=`[object DataView]`,b=`[object Float32Array]`,x=`[object Float64Array]`,S=`[object Int8Array]`,C=`[object Int16Array]`,w=`[object Int32Array]`,T=`[object Uint8Array]`,E=`[object Uint8ClampedArray]`,D=`[object Uint16Array]`,O=`[object Uint32Array]`,k={};k[b]=k[x]=k[S]=k[C]=k[w]=k[T]=k[E]=k[D]=k[O]=!0,k[a]=k[o]=k[v]=k[s]=k[y]=k[c]=k[l]=k[u]=k[d]=k[f]=k[p]=k[m]=k[h]=k[g]=k[_]=!1;function A(e){return i(e)&&r(e.length)&&!!k[n(e)]}t.exports=A})),rJ=r(((exports,t)=>{function n(e){return function(t){return e(t)}}t.exports=n})),iJ=r(((exports,t)=>{var n=uq(),r=typeof exports==`object`&&exports&&!exports.nodeType&&exports,i=r&&typeof t==`object`&&t&&!t.nodeType&&t,a=i&&i.exports===r&&n.process;t.exports=function(){try{return i&&i.require&&i.require(`util`).types||a&&a.binding&&a.binding(`util`)}catch{}}()})),aJ=r(((exports,t)=>{var n=nJ(),r=rJ(),i=iJ(),a=i&&i.isTypedArray;t.exports=a?r(a):n})),oJ=r(((exports,t)=>{var n=qq(),r=Xq(),i=Zq(),a=$q(),o=eJ(),s=aJ(),c=Object.prototype.hasOwnProperty;function l(e,t){var l=i(e),u=!l&&r(e),d=!l&&!u&&a(e),f=!l&&!u&&!d&&s(e),p=l||u||d||f,m=p?n(e.length,String):[],h=m.length;for(var g in e)(t||c.call(e,g))&&!(p&&(g==`length`||d&&(g==`offset`||g==`parent`)||f&&(g==`buffer`||g==`byteLength`||g==`byteOffset`)||o(g,h)))&&m.push(g);return m}t.exports=l})),sJ=r(((exports,t)=>{var n=Object.prototype;function r(e){var t=e&&e.constructor,r=typeof t==`function`&&t.prototype||n;return e===r}t.exports=r})),cJ=r(((exports,t)=>{function n(e,t){return function(n){return e(t(n))}}t.exports=n})),lJ=r(((exports,t)=>{t.exports=cJ()(Object.keys,Object)})),uJ=r(((exports,t)=>{var n=sJ(),r=lJ(),i=Object.prototype.hasOwnProperty;function a(e){if(!n(e))return r(e);var t=[];for(var a in Object(e))i.call(e,a)&&a!=`constructor`&&t.push(a);return t}t.exports=a})),dJ=r(((exports,t)=>{var n=_q(),r=tJ();function i(e){return e!=null&&r(e.length)&&!n(e)}t.exports=i})),fJ=r(((exports,t)=>{var n=oJ(),r=uJ(),i=dJ();function a(e){return i(e)?n(e):r(e)}t.exports=a})),pJ=r(((exports,t)=>{var n=Kq(),r=fJ();function i(e,t){return e&&n(t,r(t),e)}t.exports=i})),mJ=r(((exports,t)=>{function n(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}t.exports=n})),hJ=r(((exports,t)=>{var n=gq(),r=sJ(),i=mJ(),a=Object.prototype.hasOwnProperty;function o(e){if(!n(e))return i(e);var t=r(e),o=[];for(var s in e)s==`constructor`&&(t||!a.call(e,s))||o.push(s);return o}t.exports=o})),gJ=r(((exports,t)=>{var n=oJ(),r=hJ(),i=dJ();function a(e){return i(e)?n(e,!0):r(e)}t.exports=a})),_J=r(((exports,t)=>{var n=Kq(),r=gJ();function i(e,t){return e&&n(t,r(t),e)}t.exports=i})),vJ=r(((exports,t)=>{var n=dq(),r=typeof exports==`object`&&exports&&!exports.nodeType&&exports,i=r&&typeof t==`object`&&t&&!t.nodeType&&t,a=i&&i.exports===r?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function s(e,t){if(t)return e.slice();var n=e.length,r=o?o(n):new e.constructor(n);return e.copy(r),r}t.exports=s})),yJ=r(((exports,t)=>{function n(e,t){var n=-1,r=e.length;for(t||=Array(r);++n<r;)t[n]=e[n];return t}t.exports=n})),bJ=r(((exports,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}t.exports=n})),xJ=r(((exports,t)=>{function n(){return[]}t.exports=n})),SJ=r(((exports,t)=>{var n=bJ(),r=xJ(),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;t.exports=a?function(e){return e==null?[]:(e=Object(e),n(a(e),function(t){return i.call(e,t)}))}:r})),CJ=r(((exports,t)=>{var n=Kq(),r=SJ();function i(e,t){return n(e,r(e),t)}t.exports=i})),wJ=r(((exports,t)=>{function n(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}t.exports=n})),TJ=r(((exports,t)=>{t.exports=cJ()(Object.getPrototypeOf,Object)})),EJ=r(((exports,t)=>{var n=wJ(),r=TJ(),i=SJ(),a=xJ();t.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,i(e)),e=r(e);return t}:a})),DJ=r(((exports,t)=>{var n=Kq(),r=EJ();function i(e,t){return n(e,r(e),t)}t.exports=i})),OJ=r(((exports,t)=>{var n=wJ(),r=Zq();function i(e,t,i){var a=t(e);return r(e)?a:n(a,i(e))}t.exports=i})),kJ=r(((exports,t)=>{var n=OJ(),r=SJ(),i=fJ();function a(e){return n(e,i,r)}t.exports=a})),AJ=r(((exports,t)=>{var n=OJ(),r=EJ(),i=gJ();function a(e){return n(e,i,r)}t.exports=a})),jJ=r(((exports,t)=>{var n=Cq(),r=dq();t.exports=n(r,`DataView`)})),MJ=r(((exports,t)=>{var n=Cq(),r=dq();t.exports=n(r,`Promise`)})),NJ=r(((exports,t)=>{var n=Cq(),r=dq();t.exports=n(r,`Set`)})),PJ=r(((exports,t)=>{var n=Cq(),r=dq();t.exports=n(r,`WeakMap`)})),FJ=r(((exports,t)=>{var n=jJ(),r=wq(),i=MJ(),a=NJ(),o=PJ(),s=hq(),c=bq(),l=`[object Map]`,u=`[object Object]`,d=`[object Promise]`,f=`[object Set]`,p=`[object WeakMap]`,m=`[object DataView]`,h=c(n),g=c(r),_=c(i),v=c(a),y=c(o),b=s;(n&&b(new n(new ArrayBuffer(1)))!=m||r&&b(new r)!=l||i&&b(i.resolve())!=d||a&&b(new a)!=f||o&&b(new o)!=p)&&(b=function(e){var t=s(e),n=t==u?e.constructor:void 0,r=n?c(n):``;if(r)switch(r){case h:return m;case g:return l;case _:return d;case v:return f;case y:return p}return t}),t.exports=b})),IJ=r(((exports,t)=>{var n=Object.prototype.hasOwnProperty;function r(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]==`string`&&n.call(e,`index`)&&(r.index=e.index,r.input=e.input),r}t.exports=r})),LJ=r(((exports,t)=>{t.exports=dq().Uint8Array})),RJ=r(((exports,t)=>{var n=LJ();function r(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}t.exports=r})),zJ=r(((exports,t)=>{var n=RJ();function r(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}t.exports=r})),BJ=r(((exports,t)=>{var n=/\w*$/;function r(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}t.exports=r})),VJ=r(((exports,t)=>{var n=fq(),r=n?n.prototype:void 0,i=r?r.valueOf:void 0;function a(e){return i?Object(i.call(e)):{}}t.exports=a})),HJ=r(((exports,t)=>{var n=RJ();function r(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}t.exports=r})),UJ=r(((exports,t)=>{var n=RJ(),r=zJ(),i=BJ(),a=VJ(),o=HJ(),s=`[object Boolean]`,c=`[object Date]`,l=`[object Map]`,u=`[object Number]`,d=`[object RegExp]`,f=`[object Set]`,p=`[object String]`,m=`[object Symbol]`,h=`[object ArrayBuffer]`,g=`[object DataView]`,_=`[object Float32Array]`,v=`[object Float64Array]`,y=`[object Int8Array]`,b=`[object Int16Array]`,x=`[object Int32Array]`,S=`[object Uint8Array]`,C=`[object Uint8ClampedArray]`,w=`[object Uint16Array]`,T=`[object Uint32Array]`;function E(e,t,E){var D=e.constructor;switch(t){case h:return n(e);case s:case c:return new D(+e);case g:return r(e,E);case _:case v:case y:case b:case x:case S:case C:case w:case T:return o(e,E);case l:return new D;case u:case p:return new D(e);case d:return i(e);case f:return new D;case m:return a(e)}}t.exports=E})),WJ=r(((exports,t)=>{var n=gq(),r=Object.create;t.exports=function(){function e(){}return function(t){if(!n(t))return{};if(r)return r(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}()})),GJ=r(((exports,t)=>{var n=WJ(),r=TJ(),i=sJ();function a(e){return typeof e.constructor==`function`&&!i(e)?n(r(e)):{}}t.exports=a})),KJ=r(((exports,t)=>{var n=FJ(),r=Jq(),i=`[object Map]`;function a(e){return r(e)&&n(e)==i}t.exports=a})),qJ=r(((exports,t)=>{var n=KJ(),r=rJ(),i=iJ(),a=i&&i.isMap;t.exports=a?r(a):n})),JJ=r(((exports,t)=>{var n=FJ(),r=Jq(),i=`[object Set]`;function a(e){return r(e)&&n(e)==i}t.exports=a})),YJ=r(((exports,t)=>{var n=JJ(),r=rJ(),i=iJ(),a=i&&i.isSet;t.exports=a?r(a):n})),XJ=r(((exports,t)=>{var n=Vq(),r=Hq(),i=Gq(),a=pJ(),o=_J(),s=vJ(),c=yJ(),l=CJ(),u=DJ(),d=kJ(),f=AJ(),p=FJ(),m=IJ(),h=UJ(),g=GJ(),_=Zq(),v=$q(),y=qJ(),b=gq(),x=YJ(),S=fJ(),C=gJ(),w=1,T=2,E=4,D=`[object Arguments]`,O=`[object Array]`,k=`[object Boolean]`,A=`[object Date]`,j=`[object Error]`,M=`[object Function]`,ee=`[object GeneratorFunction]`,N=`[object Map]`,te=`[object Number]`,ne=`[object Object]`,re=`[object RegExp]`,P=`[object Set]`,F=`[object String]`,I=`[object Symbol]`,ie=`[object WeakMap]`,ae=`[object ArrayBuffer]`,L=`[object DataView]`,oe=`[object Float32Array]`,se=`[object Float64Array]`,ce=`[object Int8Array]`,le=`[object Int16Array]`,ue=`[object Int32Array]`,de=`[object Uint8Array]`,fe=`[object Uint8ClampedArray]`,pe=`[object Uint16Array]`,me=`[object Uint32Array]`,he={};he[D]=he[O]=he[ae]=he[L]=he[k]=he[A]=he[oe]=he[se]=he[ce]=he[le]=he[ue]=he[N]=he[te]=he[ne]=he[re]=he[P]=he[F]=he[I]=he[de]=he[fe]=he[pe]=he[me]=!0,he[j]=he[M]=he[ie]=!1;function ge(e,t,O,k,A,j){var N,te=t&w,re=t&T,P=t&E;if(O&&(N=A?O(e,k,A,j):O(e)),N!==void 0)return N;if(!b(e))return e;var F=_(e);if(F){if(N=m(e),!te)return c(e,N)}else{var I=p(e),ie=I==M||I==ee;if(v(e))return s(e,te);if(I==ne||I==D||ie&&!A){if(N=re||ie?{}:g(e),!te)return re?u(e,o(N,e)):l(e,a(N,e))}else{if(!he[I])return A?e:{};N=h(e,I,te)}}j||=new n;var ae=j.get(e);if(ae)return ae;j.set(e,N),x(e)?e.forEach(function(n){N.add(ge(n,t,O,n,e,j))}):y(e)&&e.forEach(function(n,r){N.set(r,ge(n,t,O,r,e,j))});var L=F?void 0:(P?re?f:d:re?C:S)(e);return r(L||e,function(n,r){L&&(r=n,n=e[r]),i(N,r,ge(n,t,O,r,e,j))}),N}t.exports=ge})),ZJ=r(((exports,t)=>{var n=XJ(),r=4;function i(e){return n(e,r)}t.exports=i})),QJ=r(((exports,t)=>{function n(e){return function(){return e}}t.exports=n})),$J=r(((exports,t)=>{function n(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(n(a[c],c,a)===!1)break}return t}}t.exports=n})),eY=r(((exports,t)=>{t.exports=$J()()})),tY=r(((exports,t)=>{var n=eY(),r=fJ();function i(e,t){return e&&n(e,t,r)}t.exports=i})),nY=r(((exports,t)=>{var n=dJ();function r(e,t){return function(r,i){if(r==null)return r;if(!n(r))return e(r,i);for(var a=r.length,o=t?a:-1,s=Object(r);(t?o--:++o<a)&&i(s[o],o,s)!==!1;);return r}}t.exports=r})),rY=r(((exports,t)=>{var n=tY();t.exports=nY()(n)})),iY=r(((exports,t)=>{function n(e){return e}t.exports=n})),aY=r(((exports,t)=>{var n=iY();function r(e){return typeof e==`function`?e:n}t.exports=r})),oY=r(((exports,t)=>{var n=Hq(),r=rY(),i=aY(),a=Zq();function o(e,t){return(a(e)?n:r)(e,i(t))}t.exports=o})),sY=r(((exports,t)=>{t.exports=oY()})),cY=r(((exports,t)=>{var n=rY();function r(e,t){var r=[];return n(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}t.exports=r})),lY=r(((exports,t)=>{var n=`__lodash_hash_undefined__`;function r(e){return this.__data__.set(e,n),this}t.exports=r})),uY=r(((exports,t)=>{function n(e){return this.__data__.has(e)}t.exports=n})),dY=r(((exports,t)=>{var n=zq(),r=lY(),i=uY();function a(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=r,a.prototype.has=i,t.exports=a})),fY=r(((exports,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}t.exports=n})),pY=r(((exports,t)=>{function n(e,t){return e.has(t)}t.exports=n})),mY=r(((exports,t)=>{var n=dY(),r=fY(),i=pY(),a=1,o=2;function s(e,t,s,c,l,u){var d=s&a,f=e.length,p=t.length;if(f!=p&&!(d&&p>f))return!1;var m=u.get(e),h=u.get(t);if(m&&h)return m==t&&h==e;var g=-1,_=!0,v=s&o?new n:void 0;for(u.set(e,t),u.set(t,e);++g<f;){var y=e[g],b=t[g];if(c)var x=d?c(b,y,g,t,e,u):c(y,b,g,e,t,u);if(x!==void 0){if(x)continue;_=!1;break}if(v){if(!r(t,function(e,t){if(!i(v,t)&&(y===e||l(y,e,s,c,u)))return v.push(t)})){_=!1;break}}else if(!(y===b||l(y,b,s,c,u))){_=!1;break}}return u.delete(e),u.delete(t),_}t.exports=s})),hY=r(((exports,t)=>{function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}t.exports=n})),gY=r(((exports,t)=>{function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}t.exports=n})),_Y=r(((exports,t)=>{var n=fq(),r=LJ(),i=$K(),a=mY(),o=hY(),s=gY(),c=1,l=2,u=`[object Boolean]`,d=`[object Date]`,f=`[object Error]`,p=`[object Map]`,m=`[object Number]`,h=`[object RegExp]`,g=`[object Set]`,_=`[object String]`,v=`[object Symbol]`,y=`[object ArrayBuffer]`,b=`[object DataView]`,x=n?n.prototype:void 0,S=x?x.valueOf:void 0;function C(e,t,n,x,C,w,T){switch(n){case b:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case y:return!(e.byteLength!=t.byteLength||!w(new r(e),new r(t)));case u:case d:case m:return i(+e,+t);case f:return e.name==t.name&&e.message==t.message;case h:case _:return e==t+``;case p:var E=o;case g:var D=x&c;if(E||=s,e.size!=t.size&&!D)return!1;var O=T.get(e);if(O)return O==t;x|=l,T.set(e,t);var k=a(E(e),E(t),x,C,w,T);return T.delete(e),k;case v:if(S)return S.call(e)==S.call(t)}return!1}t.exports=C})),vY=r(((exports,t)=>{var n=kJ(),r=1,i=Object.prototype.hasOwnProperty;function a(e,t,a,o,s,c){var l=a&r,u=n(e),d=u.length,f=n(t),p=f.length;if(d!=p&&!l)return!1;for(var m=d;m--;){var h=u[m];if(!(l?h in t:i.call(t,h)))return!1}var g=c.get(e),_=c.get(t);if(g&&_)return g==t&&_==e;var v=!0;c.set(e,t),c.set(t,e);for(var y=l;++m<d;){h=u[m];var b=e[h],x=t[h];if(o)var S=l?o(x,b,h,t,e,c):o(b,x,h,e,t,c);if(!(S===void 0?b===x||s(b,x,a,o,c):S)){v=!1;break}y||=h==`constructor`}if(v&&!y){var C=e.constructor,w=t.constructor;C!=w&&`constructor`in e&&`constructor`in t&&!(typeof C==`function`&&C instanceof C&&typeof w==`function`&&w instanceof w)&&(v=!1)}return c.delete(e),c.delete(t),v}t.exports=a})),yY=r(((exports,t)=>{var n=Vq(),r=mY(),i=_Y(),a=vY(),o=FJ(),s=Zq(),c=$q(),l=aJ(),u=1,d=`[object Arguments]`,f=`[object Array]`,p=`[object Object]`,m=Object.prototype.hasOwnProperty;function h(e,t,h,g,_,v){var y=s(e),b=s(t),x=y?f:o(e),S=b?f:o(t);x=x==d?p:x,S=S==d?p:S;var C=x==p,w=S==p,T=x==S;if(T&&c(e)){if(!c(t))return!1;y=!0,C=!1}if(T&&!C)return v||=new n,y||l(e)?r(e,t,h,g,_,v):i(e,t,x,h,g,_,v);if(!(h&u)){var E=C&&m.call(e,`__wrapped__`),D=w&&m.call(t,`__wrapped__`);if(E||D){var O=E?e.value():e,k=D?t.value():t;return v||=new n,_(O,k,h,g,v)}}return T?(v||=new n,a(e,t,h,g,_,v)):!1}t.exports=h})),bY=r(((exports,t)=>{var n=yY(),r=Jq();function i(e,t,a,o,s){return e===t?!0:e==null||t==null||!r(e)&&!r(t)?e!==e&&t!==t:n(e,t,a,o,i,s)}t.exports=i})),xY=r(((exports,t)=>{var n=Vq(),r=bY(),i=1,a=2;function o(e,t,o,s){var c=o.length,l=c,u=!s;if(e==null)return!l;for(e=Object(e);c--;){var d=o[c];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++c<l;){d=o[c];var f=d[0],p=e[f],m=d[1];if(u&&d[2]){if(p===void 0&&!(f in e))return!1}else{var h=new n;if(s)var g=s(p,m,f,e,t,h);if(!(g===void 0?r(m,p,i|a,s,h):g))return!1}}return!0}t.exports=o})),SY=r(((exports,t)=>{var n=gq();function r(e){return e===e&&!n(e)}t.exports=r})),CY=r(((exports,t)=>{var n=SY(),r=fJ();function i(e){for(var t=r(e),i=t.length;i--;){var a=t[i],o=e[a];t[i]=[a,o,n(o)]}return t}t.exports=i})),wY=r(((exports,t)=>{function n(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}t.exports=n})),TY=r(((exports,t)=>{var n=xY(),r=CY(),i=wY();function a(e){var t=r(e);return t.length==1&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}t.exports=a})),EY=r(((exports,t)=>{var n=hq(),r=Jq(),i=`[object Symbol]`;function a(e){return typeof e==`symbol`||r(e)&&n(e)==i}t.exports=a})),DY=r(((exports,t)=>{var n=Zq(),r=EY(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function o(e,t){if(n(e))return!1;var o=typeof e;return o==`number`||o==`symbol`||o==`boolean`||e==null||r(e)?!0:a.test(e)||!i.test(e)||t!=null&&e in Object(t)}t.exports=o})),OY=r(((exports,t)=>{var n=zq(),r=`Expected a function`;function i(e,t){if(typeof e!=`function`||t!=null&&typeof t!=`function`)throw TypeError(r);var a=function(){var n=arguments,r=t?t.apply(this,n):n[0],i=a.cache;if(i.has(r))return i.get(r);var o=e.apply(this,n);return a.cache=i.set(r,o)||i,o};return a.cache=new(i.Cache||n),a}i.Cache=n,t.exports=i})),kY=r(((exports,t)=>{var n=OY(),r=500;function i(e){var t=n(e,function(e){return i.size===r&&i.clear(),e}),i=t.cache;return t}t.exports=i})),AY=r(((exports,t)=>{var n=kY(),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g;t.exports=n(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(``),e.replace(r,function(e,n,r,a){t.push(r?a.replace(i,`$1`):n||e)}),t})})),jY=r(((exports,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}t.exports=n})),MY=r(((exports,t)=>{var n=fq(),r=jY(),i=Zq(),a=EY(),o=1/0,s=n?n.prototype:void 0,c=s?s.toString:void 0;function l(e){if(typeof e==`string`)return e;if(i(e))return r(e,l)+``;if(a(e))return c?c.call(e):``;var t=e+``;return t==`0`&&1/e==-o?`-0`:t}t.exports=l})),NY=r(((exports,t)=>{var n=MY();function r(e){return e==null?``:n(e)}t.exports=r})),PY=r(((exports,t)=>{var n=Zq(),r=DY(),i=AY(),a=NY();function o(e,t){return n(e)?e:r(e,t)?[e]:i(a(e))}t.exports=o})),FY=r(((exports,t)=>{var n=EY(),r=1/0;function i(e){if(typeof e==`string`||n(e))return e;var t=e+``;return t==`0`&&1/e==-r?`-0`:t}t.exports=i})),IY=r(((exports,t)=>{var n=PY(),r=FY();function i(e,t){t=n(t,e);for(var i=0,a=t.length;e!=null&&i<a;)e=e[r(t[i++])];return i&&i==a?e:void 0}t.exports=i})),LY=r(((exports,t)=>{var n=IY();function r(e,t,r){var i=e==null?void 0:n(e,t);return i===void 0?r:i}t.exports=r})),RY=r(((exports,t)=>{function n(e,t){return e!=null&&t in Object(e)}t.exports=n})),zY=r(((exports,t)=>{var n=PY(),r=Xq(),i=Zq(),a=eJ(),o=tJ(),s=FY();function c(e,t,c){t=n(t,e);for(var l=-1,u=t.length,d=!1;++l<u;){var f=s(t[l]);if(!(d=e!=null&&c(e,f)))break;e=e[f]}return d||++l!=u?d:(u=e==null?0:e.length,!!u&&o(u)&&a(f,u)&&(i(e)||r(e)))}t.exports=c})),BY=r(((exports,t)=>{var n=RY(),r=zY();function i(e,t){return e!=null&&r(e,t,n)}t.exports=i})),VY=r(((exports,t)=>{var n=bY(),r=LY(),i=BY(),a=DY(),o=SY(),s=wY(),c=FY(),l=1,u=2;function d(e,t){return a(e)&&o(t)?s(c(e),t):function(a){var o=r(a,e);return o===void 0&&o===t?i(a,e):n(t,o,l|u)}}t.exports=d})),HY=r(((exports,t)=>{function n(e){return function(t){return t?.[e]}}t.exports=n})),UY=r(((exports,t)=>{var n=IY();function r(e){return function(t){return n(t,e)}}t.exports=r})),WY=r(((exports,t)=>{var n=HY(),r=UY(),i=DY(),a=FY();function o(e){return i(e)?n(a(e)):r(e)}t.exports=o})),GY=r(((exports,t)=>{var n=TY(),r=VY(),i=iY(),a=Zq(),o=WY();function s(e){return typeof e==`function`?e:e==null?i:typeof e==`object`?a(e)?r(e[0],e[1]):n(e):o(e)}t.exports=s})),KY=r(((exports,t)=>{var n=bJ(),r=cY(),i=GY(),a=Zq();function o(e,t){return(a(e)?n:r)(e,i(t,3))}t.exports=o})),qY=r(((exports,t)=>{var n=Object.prototype.hasOwnProperty;function r(e,t){return e!=null&&n.call(e,t)}t.exports=r})),JY=r(((exports,t)=>{var n=qY(),r=zY();function i(e,t){return e!=null&&r(e,t,n)}t.exports=i})),YY=r(((exports,t)=>{var n=uJ(),r=FJ(),i=Xq(),a=Zq(),o=dJ(),s=$q(),c=sJ(),l=aJ(),u=`[object Map]`,d=`[object Set]`,f=Object.prototype.hasOwnProperty;function p(e){if(e==null)return!0;if(o(e)&&(a(e)||typeof e==`string`||typeof e.splice==`function`||s(e)||l(e)||i(e)))return!e.length;var t=r(e);if(t==u||t==d)return!e.size;if(c(e))return!n(e).length;for(var p in e)if(f.call(e,p))return!1;return!0}t.exports=p})),XY=r(((exports,t)=>{function n(e){return e===void 0}t.exports=n})),ZY=r(((exports,t)=>{var n=rY(),r=dJ();function i(e,t){var i=-1,a=r(e)?Array(e.length):[];return n(e,function(e,n,r){a[++i]=t(e,n,r)}),a}t.exports=i})),QY=r(((exports,t)=>{var n=jY(),r=GY(),i=ZY(),a=Zq();function o(e,t){return(a(e)?n:i)(e,r(t,3))}t.exports=o})),$Y=r(((exports,t)=>{function n(e,t,n,r){var i=-1,a=e==null?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}t.exports=n})),eX=r(((exports,t)=>{function n(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}t.exports=n})),tX=r(((exports,t)=>{var n=$Y(),r=rY(),i=GY(),a=eX(),o=Zq();function s(e,t,s){var c=o(e)?n:a,l=arguments.length<3;return c(e,i(t,4),s,l,r)}t.exports=s})),nX=r(((exports,t)=>{var n=hq(),r=Zq(),i=Jq(),a=`[object String]`;function o(e){return typeof e==`string`||!r(e)&&i(e)&&n(e)==a}t.exports=o})),rX=r(((exports,t)=>{t.exports=HY()(`length`)})),iX=r(((exports,t)=>{var n=`\\ud800-\\udfff`,r=`\\u0300-\\u036f`,i=`\\ufe20-\\ufe2f`,a=`\\u20d0-\\u20ff`,o=r+i+a,s=RegExp(`[\\u200d`+n+o+`\\ufe0e\\ufe0f]`);function c(e){return s.test(e)}t.exports=c})),aX=r(((exports,t)=>{var n=`\\ud800-\\udfff`,r=`\\u0300-\\u036f`,i=`\\ufe20-\\ufe2f`,a=`\\u20d0-\\u20ff`,o=r+i+a,s=`\\ufe0e\\ufe0f`,c=`[`+n+`]`,l=`[`+o+`]`,u=`\\ud83c[\\udffb-\\udfff]`,d=`(?:`+l+`|`+u+`)`,f=`[^`+n+`]`,p=`(?:\\ud83c[\\udde6-\\uddff]){2}`,m=`[\\ud800-\\udbff][\\udc00-\\udfff]`,h=`\\u200d`,g=d+`?`,_=`[`+s+`]?`,v=`(?:`+h+`(?:`+[f,p,m].join(`|`)+`)`+_+g+`)*`,y=_+g+v,b=`(?:`+[f+l+`?`,l,p,m,c].join(`|`)+`)`,x=RegExp(u+`(?=`+u+`)|`+b+y,`g`);function S(e){for(var t=x.lastIndex=0;x.test(e);)++t;return t}t.exports=S})),oX=r(((exports,t)=>{var n=rX(),r=iX(),i=aX();function a(e){return r(e)?i(e):n(e)}t.exports=a})),sX=r(((exports,t)=>{var n=uJ(),r=FJ(),i=dJ(),a=nX(),o=oX(),s=`[object Map]`,c=`[object Set]`;function l(e){if(e==null)return 0;if(i(e))return a(e)?o(e):e.length;var t=r(e);return t==s||t==c?e.size:n(e).length}t.exports=l})),cX=r(((exports,t)=>{var n=Hq(),r=WJ(),i=tY(),a=GY(),o=TJ(),s=Zq(),c=$q(),l=_q(),u=gq(),d=aJ();function f(e,t,f){var p=s(e),m=p||c(e)||d(e);if(t=a(t,4),f==null){var h=e&&e.constructor;f=m?p?new h:[]:u(e)&&l(h)?r(o(e)):{}}return(m?n:i)(e,function(e,n,r){return t(f,e,n,r)}),f}t.exports=f})),lX=r(((exports,t)=>{var n=fq(),r=Xq(),i=Zq(),a=n?n.isConcatSpreadable:void 0;function o(e){return i(e)||r(e)||!!(a&&e&&e[a])}t.exports=o})),uX=r(((exports,t)=>{var n=wJ(),r=lX();function i(e,t,a,o,s){var c=-1,l=e.length;for(a||=r,s||=[];++c<l;){var u=e[c];t>0&&a(u)?t>1?i(u,t-1,a,o,s):n(s,u):o||(s[s.length]=u)}return s}t.exports=i})),dX=r(((exports,t)=>{function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}t.exports=n})),fX=r(((exports,t)=>{var n=dX(),r=Math.max;function i(e,t,i){return t=r(t===void 0?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=r(a.length-t,0),c=Array(s);++o<s;)c[o]=a[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=a[o];return l[t]=i(c),n(e,this,l)}}t.exports=i})),pX=r(((exports,t)=>{var n=QJ(),r=Uq(),i=iY();t.exports=r?function(e,t){return r(e,`toString`,{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i})),mX=r(((exports,t)=>{var n=800,r=16,i=Date.now;function a(e){var t=0,a=0;return function(){var o=i(),s=r-(o-a);if(a=o,s>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}t.exports=a})),hX=r(((exports,t)=>{var n=pX();t.exports=mX()(n)})),gX=r(((exports,t)=>{var n=iY(),r=fX(),i=hX();function a(e,t){return i(r(e,t,n),e+``)}t.exports=a})),_X=r(((exports,t)=>{function n(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}t.exports=n})),vX=r(((exports,t)=>{function n(e){return e!==e}t.exports=n})),yX=r(((exports,t)=>{function n(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}t.exports=n})),bX=r(((exports,t)=>{var n=_X(),r=vX(),i=yX();function a(e,t,a){return t===t?i(e,t,a):n(e,r,a)}t.exports=a})),xX=r(((exports,t)=>{var n=bX();function r(e,t){return!!(e!=null&&e.length)&&n(e,t,0)>-1}t.exports=r})),SX=r(((exports,t)=>{function n(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}t.exports=n})),CX=r(((exports,t)=>{function n(){}t.exports=n})),wX=r(((exports,t)=>{var n=NJ(),r=CX(),i=gY();t.exports=n&&1/i(new n([,-0]))[1]==1/0?function(e){return new n(e)}:r})),TX=r(((exports,t)=>{var n=dY(),r=xX(),i=SX(),a=pY(),o=wX(),s=gY(),c=200;function l(e,t,l){var u=-1,d=r,f=e.length,p=!0,m=[],h=m;if(l)p=!1,d=i;else if(f>=c){var g=t?null:o(e);if(g)return s(g);p=!1,d=a,h=new n}else h=t?[]:m;outer:for(;++u<f;){var _=e[u],v=t?t(_):_;if(_=l||_!==0?_:0,p&&v===v){for(var y=h.length;y--;)if(h[y]===v)continue outer;t&&h.push(v),m.push(_)}else d(h,v,l)||(h!==m&&h.push(v),m.push(_))}return m}t.exports=l})),EX=r(((exports,t)=>{var n=dJ(),r=Jq();function i(e){return r(e)&&n(e)}t.exports=i})),DX=r(((exports,t)=>{var n=uX(),r=gX(),i=TX(),a=EX();t.exports=r(function(e){return i(n(e,1,a,!0))})})),OX=r(((exports,t)=>{var n=jY();function r(e,t){return n(t,function(t){return e[t]})}t.exports=r})),kX=r(((exports,t)=>{var n=OX(),r=fJ();function i(e){return e==null?[]:n(e,r(e))}t.exports=i})),AX=r(((exports,n)=>{var r;if(typeof e==`function`)try{r={clone:ZJ(),constant:QJ(),each:sY(),filter:KY(),has:JY(),isArray:Zq(),isEmpty:YY(),isFunction:_q(),isUndefined:XY(),keys:fJ(),map:QY(),reduce:tX(),size:sX(),transform:cX(),union:DX(),values:kX()}}catch{}r||=window._,n.exports=r})),jX=r(((exports,t)=>{var n=AX();t.exports=o;var r=`\0`,i=`\0`,a=``;function o(e){this._isDirected=n.has(e,`directed`)?e.directed:!0,this._isMultigraph=n.has(e,`multigraph`)?e.multigraph:!1,this._isCompound=n.has(e,`compound`)?e.compound:!1,this._label=void 0,this._defaultNodeLabelFn=n.constant(void 0),this._defaultEdgeLabelFn=n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[i]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(e){return this._label=e,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(e){return n.isFunction(e)||(e=n.constant(e)),this._defaultNodeLabelFn=e,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return n.keys(this._nodes)},o.prototype.sources=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._in[t])})},o.prototype.sinks=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._out[t])})},o.prototype.setNodes=function(e,t){var r=arguments,i=this;return n.each(e,function(e){r.length>1?i.setNode(e,t):i.setNode(e)}),this},o.prototype.setNode=function(e,t){return n.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=i,this._children[e]={},this._children[i][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},o.prototype.node=function(e){return this._nodes[e]},o.prototype.hasNode=function(e){return n.has(this._nodes,e)},o.prototype.removeNode=function(e){var t=this;if(n.has(this._nodes,e)){var r=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],n.each(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),n.each(n.keys(this._in[e]),r),delete this._in[e],delete this._preds[e],n.each(n.keys(this._out[e]),r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},o.prototype.setParent=function(e,t){if(!this._isCompound)throw Error(`Cannot set parent in a non-compound graph`);if(n.isUndefined(t))t=i;else{t+=``;for(var r=t;!n.isUndefined(r);r=this.parent(r))if(r===e)throw Error(`Setting `+t+` as parent of `+e+` would create a cycle`);this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},o.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},o.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==i)return t}},o.prototype.children=function(e){if(n.isUndefined(e)&&(e=i),this._isCompound){var t=this._children[e];if(t)return n.keys(t)}else if(e===i)return this.nodes();else if(this.hasNode(e))return[]},o.prototype.predecessors=function(e){var t=this._preds[e];if(t)return n.keys(t)},o.prototype.successors=function(e){var t=this._sucs[e];if(t)return n.keys(t)},o.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return n.union(t,this.successors(e))},o.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},o.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;n.each(this._nodes,function(n,r){e(r)&&t.setNode(r,n)}),n.each(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))});var i={};function a(e){var n=r.parent(e);return n===void 0||t.hasNode(n)?(i[e]=n,n):n in i?i[n]:a(n)}return this._isCompound&&n.each(t.nodes(),function(e){t.setParent(e,a(e))}),t},o.prototype.setDefaultEdgeLabel=function(e){return n.isFunction(e)||(e=n.constant(e)),this._defaultEdgeLabelFn=e,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return n.values(this._edgeObjs)},o.prototype.setPath=function(e,t){var r=this,i=arguments;return n.reduce(e,function(e,n){return i.length>1?r.setEdge(e,n,t):r.setEdge(e,n),n}),this},o.prototype.setEdge=function(){var e,t,r,i,a=!1,o=arguments[0];typeof o==`object`&&o&&`v`in o?(e=o.v,t=o.w,r=o.name,arguments.length===2&&(i=arguments[1],a=!0)):(e=o,t=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),e=``+e,t=``+t,n.isUndefined(r)||(r=``+r);var c=l(this._isDirected,e,t,r);if(n.has(this._edgeLabels,c))return a&&(this._edgeLabels[c]=i),this;if(!n.isUndefined(r)&&!this._isMultigraph)throw Error(`Cannot set a named edge when isMultigraph = false`);this.setNode(e),this.setNode(t),this._edgeLabels[c]=a?i:this._defaultEdgeLabelFn(e,t,r);var d=u(this._isDirected,e,t,r);return e=d.v,t=d.w,Object.freeze(d),this._edgeObjs[c]=d,s(this._preds[t],e),s(this._sucs[e],t),this._in[t][c]=d,this._out[e][c]=d,this._edgeCount++,this},o.prototype.edge=function(e,t,n){var r=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,e,t,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(e,t,r){var i=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,e,t,r);return n.has(this._edgeLabels,i)},o.prototype.removeEdge=function(e,t,n){var r=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],c(this._preds[t],e),c(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},o.prototype.inEdges=function(e,t){var r=this._in[e];if(r){var i=n.values(r);return t?n.filter(i,function(e){return e.v===t}):i}},o.prototype.outEdges=function(e,t){var r=this._out[e];if(r){var i=n.values(r);return t?n.filter(i,function(e){return e.w===t}):i}},o.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};function s(e,t){e[t]?e[t]++:e[t]=1}function c(e,t){--e[t]||delete e[t]}function l(e,t,i,o){var s=``+t,c=``+i;if(!e&&s>c){var l=s;s=c,c=l}return s+a+c+a+(n.isUndefined(o)?r:o)}function u(e,t,n,r){var i=``+t,a=``+n;if(!e&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return r&&(s.name=r),s}function d(e,t){return l(e,t.v,t.w,t.name)}})),MX=r(((exports,t)=>{t.exports=`2.1.8`})),NX=r(((exports,t)=>{t.exports={Graph:jX(),version:MX()}})),PX=r(((exports,t)=>{var n=AX(),r=jX();t.exports={write:i,read:s};function i(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:a(e),edges:o(e)};return n.isUndefined(e.graph())||(t.value=n.clone(e.graph())),t}function a(e){return n.map(e.nodes(),function(t){var r=e.node(t),i=e.parent(t),a={v:t};return n.isUndefined(r)||(a.value=r),n.isUndefined(i)||(a.parent=i),a})}function o(e){return n.map(e.edges(),function(t){var r=e.edge(t),i={v:t.v,w:t.w};return n.isUndefined(t.name)||(i.name=t.name),n.isUndefined(r)||(i.value=r),i})}function s(e){var t=new r(e.options).setGraph(e.value);return n.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),n.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}})),FX=r(((exports,t)=>{var n=AX();t.exports=r;function r(e){var t={},r=[],i;function a(r){n.has(t,r)||(t[r]=!0,i.push(r),n.each(e.successors(r),a),n.each(e.predecessors(r),a))}return n.each(e.nodes(),function(e){i=[],a(e),i.length&&r.push(i)}),r}})),IX=r(((exports,t)=>{var n=AX();t.exports=r;function r(){this._arr=[],this._keyIndices={}}r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(e){return e.key})},r.prototype.has=function(e){return n.has(this._keyIndices,e)},r.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},r.prototype.min=function(){if(this.size()===0)throw Error(`Queue underflow`);return this._arr[0].key},r.prototype.add=function(e,t){var r=this._keyIndices;if(e=String(e),!n.has(r,e)){var i=this._arr,a=i.length;return r[e]=a,i.push({key:e,priority:t}),this._decrease(a),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},r.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw Error(`New priority is greater than current priority. Key: `+e+` Old: `+this._arr[n].priority+` New: `+t);this._arr[n].priority=t,this._decrease(n)},r.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},r.prototype._decrease=function(e){for(var t=this._arr,n=t[e].priority,r;e!==0&&(r=e>>1,!(t[r].priority<n));)this._swap(e,r),e=r},r.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],a=n[t];n[e]=a,n[t]=i,r[a.key]=e,r[i.key]=t}})),LX=r(((exports,t)=>{var n=AX(),r=IX();t.exports=a;var i=n.constant(1);function a(e,t,n,r){return o(e,String(t),n||i,r||function(t){return e.outEdges(t)})}function o(e,t,n,i){var a={},o=new r,s,c,l=function(e){var t=e.v===s?e.w:e.v,r=a[t],i=n(e),l=c.distance+i;if(i<0)throw Error(`dijkstra does not allow negative edge weights. Bad edge: `+e+` Weight: `+i);l<r.distance&&(r.distance=l,r.predecessor=s,o.decrease(t,l))};for(e.nodes().forEach(function(e){var n=e===t?0:1/0;a[e]={distance:n},o.add(e,n)});o.size()>0&&(s=o.removeMin(),c=a[s],c.distance!==1/0);)i(s).forEach(l);return a}})),RX=r(((exports,t)=>{var n=LX(),r=AX();t.exports=i;function i(e,t,i){return r.transform(e.nodes(),function(r,a){r[a]=n(e,a,t,i)},{})}})),zX=r(((exports,t)=>{var n=AX();t.exports=r;function r(e){var t=0,r=[],i={},a=[];function o(s){var c=i[s]={onStack:!0,lowlink:t,index:t++};if(r.push(s),e.successors(s).forEach(function(e){n.has(i,e)?i[e].onStack&&(c.lowlink=Math.min(c.lowlink,i[e].index)):(o(e),c.lowlink=Math.min(c.lowlink,i[e].lowlink))}),c.lowlink===c.index){var l=[],u;do u=r.pop(),i[u].onStack=!1,l.push(u);while(s!==u);a.push(l)}}return e.nodes().forEach(function(e){n.has(i,e)||o(e)}),a}})),BX=r(((exports,t)=>{var n=AX(),r=zX();t.exports=i;function i(e){return n.filter(r(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}})),VX=r(((exports,t)=>{var n=AX();t.exports=i;var r=n.constant(1);function i(e,t,n){return a(e,t||r,n||function(t){return e.outEdges(t)})}function a(e,t,n){var r={},i=e.nodes();return i.forEach(function(e){r[e]={},r[e][e]={distance:0},i.forEach(function(t){e!==t&&(r[e][t]={distance:1/0})}),n(e).forEach(function(n){var i=n.v===e?n.w:n.v,a=t(n);r[e][i]={distance:a,predecessor:e}})}),i.forEach(function(e){var t=r[e];i.forEach(function(n){var a=r[n];i.forEach(function(n){var r=a[e],i=t[n],o=a[n],s=r.distance+i.distance;s<o.distance&&(o.distance=s,o.predecessor=i.predecessor)})})}),r}})),HX=r(((exports,t)=>{var n=AX();t.exports=r,r.CycleException=i;function r(e){var t={},r={},a=[];function o(s){if(n.has(r,s))throw new i;n.has(t,s)||(r[s]=!0,t[s]=!0,n.each(e.predecessors(s),o),delete r[s],a.push(s))}if(n.each(e.sinks(),o),n.size(t)!==e.nodeCount())throw new i;return a}function i(){}i.prototype=Error()})),UX=r(((exports,t)=>{var n=HX();t.exports=r;function r(e){try{n(e)}catch(e){if(e instanceof n.CycleException)return!1;throw e}return!0}})),WX=r(((exports,t)=>{var n=AX();t.exports=r;function r(e,t,r){n.isArray(t)||(t=[t]);var a=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],s={};return n.each(t,function(t){if(!e.hasNode(t))throw Error(`Graph does not have node: `+t);i(e,t,r===`post`,s,a,o)}),o}function i(e,t,r,a,o,s){n.has(a,t)||(a[t]=!0,r||s.push(t),n.each(o(t),function(t){i(e,t,r,a,o,s)}),r&&s.push(t))}})),GX=r(((exports,t)=>{var n=WX();t.exports=r;function r(e,t){return n(e,t,`post`)}})),KX=r(((exports,t)=>{var n=WX();t.exports=r;function r(e,t){return n(e,t,`pre`)}})),qX=r(((exports,t)=>{var n=AX(),r=jX(),i=IX();t.exports=a;function a(e,t){var a=new r,o={},s=new i,c;function l(e){var n=e.v===c?e.w:e.v,r=s.priority(n);if(r!==void 0){var i=t(e);i<r&&(o[n]=c,s.decrease(n,i))}}if(e.nodeCount()===0)return a;n.each(e.nodes(),function(e){s.add(e,1/0),a.setNode(e)}),s.decrease(e.nodes()[0],0);for(var u=!1;s.size()>0;){if(c=s.removeMin(),n.has(o,c))a.setEdge(c,o[c]);else if(u)throw Error(`Input graph is not connected: `+e);else u=!0;e.nodeEdges(c).forEach(l)}return a}})),JX=r(((exports,t)=>{t.exports={components:FX(),dijkstra:LX(),dijkstraAll:RX(),findCycles:BX(),floydWarshall:VX(),isAcyclic:UX(),postorder:GX(),preorder:KX(),prim:qX(),tarjan:zX(),topsort:HX()}})),YX=r(((exports,t)=>{var n=NX();t.exports={Graph:n.Graph,json:PX(),alg:JX(),version:n.version}})),XX=r(((exports,n)=>{var r;if(typeof e==`function`)try{r=YX()}catch{}r||=window.graphlib,n.exports=r})),ZX=r(((exports,t)=>{var n=XJ(),r=1,i=4;function a(e){return n(e,r|i)}t.exports=a})),QX=r(((exports,t)=>{var n=$K(),r=dJ(),i=eJ(),a=gq();function o(e,t,o){if(!a(o))return!1;var s=typeof t;return(s==`number`?r(o)&&i(t,o.length):s==`string`&&t in o)?n(o[t],e):!1}t.exports=o})),$X=r(((exports,t)=>{var n=gX(),r=$K(),i=QX(),a=gJ(),o=Object.prototype,s=o.hasOwnProperty;t.exports=n(function(e,t){e=Object(e);var n=-1,c=t.length,l=c>2?t[2]:void 0;for(l&&i(t[0],t[1],l)&&(c=1);++n<c;)for(var u=t[n],d=a(u),f=-1,p=d.length;++f<p;){var m=d[f],h=e[m];(h===void 0||r(h,o[m])&&!s.call(e,m))&&(e[m]=u[m])}return e})})),eZ=r(((exports,t)=>{var n=GY(),r=dJ(),i=fJ();function a(e){return function(t,a,o){var s=Object(t);if(!r(t)){var c=n(a,3);t=i(t),a=function(e){return c(s[e],e,s)}}var l=e(t,a,o);return l>-1?s[c?t[l]:l]:void 0}}t.exports=a})),tZ=r(((exports,t)=>{var n=/\s/;function r(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}t.exports=r})),nZ=r(((exports,t)=>{var n=tZ(),r=/^\s+/;function i(e){return e&&e.slice(0,n(e)+1).replace(r,``)}t.exports=i})),rZ=r(((exports,t)=>{var n=nZ(),r=gq(),i=EY(),a=NaN,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;function u(e){if(typeof e==`number`)return e;if(i(e))return a;if(r(e)){var t=typeof e.valueOf==`function`?e.valueOf():e;e=r(t)?t+``:t}if(typeof e!=`string`)return e===0?e:+e;e=n(e);var u=s.test(e);return u||c.test(e)?l(e.slice(2),u?2:8):o.test(e)?a:+e}t.exports=u})),iZ=r(((exports,t)=>{var n=rZ(),r=1/0,i=17976931348623157e292;function a(e){return e?(e=n(e),e===r||e===-r?(e<0?-1:1)*i:e===e?e:0):e===0?e:0}t.exports=a})),aZ=r(((exports,t)=>{var n=iZ();function r(e){var t=n(e),r=t%1;return t===t?r?t-r:t:0}t.exports=r})),oZ=r(((exports,t)=>{var n=_X(),r=GY(),i=aZ(),a=Math.max;function o(e,t,o){var s=e==null?0:e.length;if(!s)return-1;var c=o==null?0:i(o);return c<0&&(c=a(s+c,0)),n(e,r(t,3),c)}t.exports=o})),sZ=r(((exports,t)=>{var n=eZ(),r=oZ();t.exports=n(r)})),cZ=r(((exports,t)=>{var n=uX();function r(e){return e!=null&&e.length?n(e,1):[]}t.exports=r})),lZ=r(((exports,t)=>{var n=eY(),r=aY(),i=gJ();function a(e,t){return e==null?e:n(e,r(t),i)}t.exports=a})),uZ=r(((exports,t)=>{function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}t.exports=n})),dZ=r(((exports,t)=>{var n=Wq(),r=tY(),i=GY();function a(e,t){var a={};return t=i(t,3),r(e,function(e,r,i){n(a,r,t(e,r,i))}),a}t.exports=a})),fZ=r(((exports,t)=>{var n=EY();function r(e,t,r){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=t(o);if(s!=null&&(c===void 0?s===s&&!n(s):r(s,c)))var c=s,l=o}return l}t.exports=r})),pZ=r(((exports,t)=>{function n(e,t){return e>t}t.exports=n})),mZ=r(((exports,t)=>{var n=fZ(),r=pZ(),i=iY();function a(e){return e&&e.length?n(e,i,r):void 0}t.exports=a})),hZ=r(((exports,t)=>{var n=Wq(),r=$K();function i(e,t,i){(i!==void 0&&!r(e[t],i)||i===void 0&&!(t in e))&&n(e,t,i)}t.exports=i})),gZ=r(((exports,t)=>{var n=hq(),r=TJ(),i=Jq(),a=`[object Object]`,o=Function.prototype,s=Object.prototype,c=o.toString,l=s.hasOwnProperty,u=c.call(Object);function d(e){if(!i(e)||n(e)!=a)return!1;var t=r(e);if(t===null)return!0;var o=l.call(t,`constructor`)&&t.constructor;return typeof o==`function`&&o instanceof o&&c.call(o)==u}t.exports=d})),_Z=r(((exports,t)=>{function n(e,t){if(!(t===`constructor`&&typeof e[t]==`function`)&&t!=`__proto__`)return e[t]}t.exports=n})),vZ=r(((exports,t)=>{var n=Kq(),r=gJ();function i(e){return n(e,r(e))}t.exports=i})),yZ=r(((exports,t)=>{var n=hZ(),r=vJ(),i=HJ(),a=yJ(),o=GJ(),s=Xq(),c=Zq(),l=EX(),u=$q(),d=_q(),f=gq(),p=gZ(),m=aJ(),h=_Z(),g=vZ();function _(e,t,_,v,y,b,x){var S=h(e,_),C=h(t,_),w=x.get(C);if(w){n(e,_,w);return}var T=b?b(S,C,_+``,e,t,x):void 0,E=T===void 0;if(E){var D=c(C),O=!D&&u(C),k=!D&&!O&&m(C);T=C,D||O||k?c(S)?T=S:l(S)?T=a(S):O?(E=!1,T=r(C,!0)):k?(E=!1,T=i(C,!0)):T=[]:p(C)||s(C)?(T=S,s(S)?T=g(S):(!f(S)||d(S))&&(T=o(C))):E=!1}E&&(x.set(C,T),y(T,C,v,b,x),x.delete(C)),n(e,_,T)}t.exports=_})),bZ=r(((exports,t)=>{var n=Vq(),r=hZ(),i=eY(),a=yZ(),o=gq(),s=gJ(),c=_Z();function l(e,t,u,d,f){e!==t&&i(t,function(i,s){if(f||=new n,o(i))a(e,t,s,u,l,d,f);else{var p=d?d(c(e,s),i,s+``,e,t,f):void 0;p===void 0&&(p=i),r(e,s,p)}},s)}t.exports=l})),xZ=r(((exports,t)=>{var n=gX(),r=QX();function i(e){return n(function(t,n){var i=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=e.length>3&&typeof o==`function`?(a--,o):void 0,s&&r(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),t=Object(t);++i<a;){var c=n[i];c&&e(t,c,i,o)}return t})}t.exports=i})),pte=r(((exports,t)=>{var n=bZ();t.exports=xZ()(function(e,t,r){n(e,t,r)})})),SZ=r(((exports,t)=>{function n(e,t){return e<t}t.exports=n})),CZ=r(((exports,t)=>{var n=fZ(),r=SZ(),i=iY();function a(e){return e&&e.length?n(e,i,r):void 0}t.exports=a})),wZ=r(((exports,t)=>{var n=fZ(),r=GY(),i=SZ();function a(e,t){return e&&e.length?n(e,r(t,2),i):void 0}t.exports=a})),TZ=r(((exports,t)=>{var n=dq();t.exports=function(){return n.Date.now()}})),EZ=r(((exports,t)=>{var n=Gq(),r=PY(),i=eJ(),a=gq(),o=FY();function s(e,t,s,c){if(!a(e))return e;t=r(t,e);for(var l=-1,u=t.length,d=u-1,f=e;f!=null&&++l<u;){var p=o(t[l]),m=s;if(p===`__proto__`||p===`constructor`||p===`prototype`)return e;if(l!=d){var h=f[p];m=c?c(h,p,f):void 0,m===void 0&&(m=a(h)?h:i(t[l+1])?[]:{})}n(f,p,m),f=f[p]}return e}t.exports=s})),DZ=r(((exports,t)=>{var n=IY(),r=EZ(),i=PY();function a(e,t,a){for(var o=-1,s=t.length,c={};++o<s;){var l=t[o],u=n(e,l);a(u,l)&&r(c,i(l,e),u)}return c}t.exports=a})),OZ=r(((exports,t)=>{var n=DZ(),r=BY();function i(e,t){return n(e,t,function(t,n){return r(e,n)})}t.exports=i})),kZ=r(((exports,t)=>{var n=cZ(),r=fX(),i=hX();function a(e){return i(r(e,void 0,n),e+``)}t.exports=a})),AZ=r(((exports,t)=>{var n=OZ();t.exports=kZ()(function(e,t){return e==null?{}:n(e,t)})})),jZ=r(((exports,t)=>{var n=Math.ceil,r=Math.max;function i(e,t,i,a){for(var o=-1,s=r(n((t-e)/(i||1)),0),c=Array(s);s--;)c[a?s:++o]=e,e+=i;return c}t.exports=i})),MZ=r(((exports,t)=>{var n=jZ(),r=QX(),i=iZ();function a(e){return function(t,a,o){return o&&typeof o!=`number`&&r(t,a,o)&&(a=o=void 0),t=i(t),a===void 0?(a=t,t=0):a=i(a),o=o===void 0?t<a?1:-1:i(o),n(t,a,o,e)}}t.exports=a})),NZ=r(((exports,t)=>{t.exports=MZ()()})),PZ=r(((exports,t)=>{function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}t.exports=n})),FZ=r(((exports,t)=>{var n=EY();function r(e,t){if(e!==t){var r=e!==void 0,i=e===null,a=e===e,o=n(e),s=t!==void 0,c=t===null,l=t===t,u=n(t);if(!c&&!u&&!o&&e>t||o&&s&&l&&!c&&!u||i&&s&&l||!r&&l||!a)return 1;if(!i&&!o&&!u&&e<t||u&&r&&a&&!i&&!o||c&&r&&a||!s&&a||!l)return-1}return 0}t.exports=r})),IZ=r(((exports,t)=>{var n=FZ();function r(e,t,r){for(var i=-1,a=e.criteria,o=t.criteria,s=a.length,c=r.length;++i<s;){var l=n(a[i],o[i]);if(l){if(i>=c)return l;var u=r[i];return l*(u==`desc`?-1:1)}}return e.index-t.index}t.exports=r})),LZ=r(((exports,t)=>{var n=jY(),r=IY(),i=GY(),a=ZY(),o=PZ(),s=rJ(),c=IZ(),l=iY(),u=Zq();function d(e,t,d){t=t.length?n(t,function(e){return u(e)?function(t){return r(t,e.length===1?e[0]:e)}:e}):[l];var f=-1;t=n(t,s(i));var p=a(e,function(e,r,i){return{criteria:n(t,function(t){return t(e)}),index:++f,value:e}});return o(p,function(e,t){return c(e,t,d)})}t.exports=d})),RZ=r(((exports,t)=>{var n=uX(),r=LZ(),i=gX(),a=QX();t.exports=i(function(e,t){if(e==null)return[];var i=t.length;return i>1&&a(e,t[0],t[1])?t=[]:i>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),r(e,n(t,1),[])})})),zZ=r(((exports,t)=>{var n=NY(),r=0;function i(e){var t=++r;return n(e)+t}t.exports=i})),BZ=r(((exports,t)=>{function n(e,t,n){for(var r=-1,i=e.length,a=t.length,o={};++r<i;){var s=r<a?t[r]:void 0;n(o,e[r],s)}return o}t.exports=n})),VZ=r(((exports,t)=>{var n=Gq(),r=BZ();function i(e,t){return r(e||[],t||[],n)}t.exports=i})),HZ=r(((exports,n)=>{var r;if(typeof e==`function`)try{r={cloneDeep:ZX(),constant:QJ(),defaults:$X(),each:sY(),filter:KY(),find:sZ(),flatten:cZ(),forEach:oY(),forIn:lZ(),has:JY(),isUndefined:XY(),last:uZ(),map:QY(),mapValues:dZ(),max:mZ(),merge:pte(),min:CZ(),minBy:wZ(),now:TZ(),pick:AZ(),range:NZ(),reduce:tX(),sortBy:RZ(),uniqueId:zZ(),values:kX(),zipObject:VZ()}}catch{}r||=window._,n.exports=r})),UZ=r(((exports,t)=>{t.exports=n;function n(){var e={};e._next=e._prev=e,this._sentinel=e}n.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return r(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,i)),n=n._prev;return`[`+e.join(`, `)+`]`};function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function i(e,t){if(e!==`_next`&&e!==`_prev`)return t}})),WZ=r(((exports,t)=>{var n=HZ(),r=XX().Graph,i=UZ();t.exports=o;var a=n.constant(1);function o(e,t){if(e.nodeCount()<=1)return[];var r=l(e,t||a),i=s(r.graph,r.buckets,r.zeroIdx);return n.flatten(n.map(i,function(t){return e.outEdges(t.v,t.w)}),!0)}function s(e,t,n){for(var r=[],i=t[t.length-1],a=t[0],o;e.nodeCount();){for(;o=a.dequeue();)c(e,t,n,o);for(;o=i.dequeue();)c(e,t,n,o);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(o=t[s].dequeue(),o){r=r.concat(c(e,t,n,o,!0));break}}}return r}function c(e,t,r,i,a){var o=a?[]:void 0;return n.forEach(e.inEdges(i.v),function(n){var i=e.edge(n),s=e.node(n.v);a&&o.push({v:n.v,w:n.w}),s.out-=i,u(t,r,s)}),n.forEach(e.outEdges(i.v),function(n){var i=e.edge(n),a=n.w,o=e.node(a);o.in-=i,u(t,r,o)}),e.removeNode(i.v),o}function l(e,t){var a=new r,o=0,s=0;n.forEach(e.nodes(),function(e){a.setNode(e,{v:e,in:0,out:0})}),n.forEach(e.edges(),function(e){var n=a.edge(e.v,e.w)||0,r=t(e),i=n+r;a.setEdge(e.v,e.w,i),s=Math.max(s,a.node(e.v).out+=r),o=Math.max(o,a.node(e.w).in+=r)});var c=n.range(s+o+3).map(function(){return new i}),l=o+1;return n.forEach(a.nodes(),function(e){u(c,l,a.node(e))}),{graph:a,buckets:c,zeroIdx:l}}function u(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}})),GZ=r(((exports,t)=>{var n=HZ(),r=WZ();t.exports={run:i,undo:o};function i(e){var t=e.graph().acyclicer===`greedy`?r(e,i(e)):a(e);n.forEach(t,function(t){var r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,n.uniqueId(`rev`))});function i(e){return function(t){return e.edge(t).weight}}}function a(e){var t=[],r={},i={};function a(o){n.has(i,o)||(i[o]=!0,r[o]=!0,n.forEach(e.outEdges(o),function(e){n.has(r,e.w)?t.push(e):a(e.w)}),delete r[o])}return n.forEach(e.nodes(),a),t}function o(e){n.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}})),KZ=r(((exports,t)=>{var n=HZ(),r=XX().Graph;t.exports={addDummyNode:i,simplify:a,asNonCompoundGraph:o,successorWeights:s,predecessorWeights:c,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:f,addBorderNode:p,maxRank:m,partition:h,time:g,notime:_};function i(e,t,r,i){var a;do a=n.uniqueId(i);while(e.hasNode(a));return r.dummy=t,e.setNode(a,r),a}function a(e){var t=new r().setGraph(e.graph());return n.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),n.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function o(e){var t=new r({multigraph:e.isMultigraph()}).setGraph(e.graph());return n.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),n.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function s(e){var t=n.map(e.nodes(),function(t){var r={};return n.forEach(e.outEdges(t),function(t){r[t.w]=(r[t.w]||0)+e.edge(t).weight}),r});return n.zipObject(e.nodes(),t)}function c(e){var t=n.map(e.nodes(),function(t){var r={};return n.forEach(e.inEdges(t),function(t){r[t.v]=(r[t.v]||0)+e.edge(t).weight}),r});return n.zipObject(e.nodes(),t)}function l(e,t){var n=e.x,r=e.y,i=t.x-n,a=t.y-r,o=e.width/2,s=e.height/2;if(!i&&!a)throw Error(`Not possible to find intersection inside of the rectangle`);var c,l;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),c=s*i/a,l=s):(i<0&&(o=-o),c=o,l=o*a/i),{x:n+c,y:r+l}}function u(e){var t=n.map(n.range(m(e)+1),function(){return[]});return n.forEach(e.nodes(),function(r){var i=e.node(r),a=i.rank;n.isUndefined(a)||(t[a][i.order]=r)}),t}function d(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank}));n.forEach(e.nodes(),function(r){var i=e.node(r);n.has(i,`rank`)&&(i.rank-=t)})}function f(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank})),r=[];n.forEach(e.nodes(),function(n){var i=e.node(n).rank-t;r[i]||(r[i]=[]),r[i].push(n)});var i=0,a=e.graph().nodeRankFactor;n.forEach(r,function(t,r){n.isUndefined(t)&&r%a!==0?--i:i&&n.forEach(t,function(t){e.node(t).rank+=i})})}function p(e,t,n,r){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),i(e,`border`,a,t)}function m(e){return n.max(n.map(e.nodes(),function(t){var r=e.node(t).rank;if(!n.isUndefined(r))return r}))}function h(e,t){var r={lhs:[],rhs:[]};return n.forEach(e,function(e){t(e)?r.lhs.push(e):r.rhs.push(e)}),r}function g(e,t){var r=n.now();try{return t()}finally{console.log(e+` time: `+(n.now()-r)+`ms`)}}function _(e,t){return t()}})),qZ=r(((exports,t)=>{var n=HZ(),r=KZ();t.exports={run:i,undo:o};function i(e){e.graph().dummyChains=[],n.forEach(e.edges(),function(t){a(e,t)})}function a(e,t){var n=t.v,i=e.node(n).rank,a=t.w,o=e.node(a).rank,s=t.name,c=e.edge(t),l=c.labelRank;if(o!==i+1){e.removeEdge(t);var u,d,f;for(f=0,++i;i<o;++f,++i)c.points=[],d={width:0,height:0,edgeLabel:c,edgeObj:t,rank:i},u=r.addDummyNode(e,`edge`,d,`_d`),i===l&&(d.width=c.width,d.height=c.height,d.dummy=`edge-label`,d.labelpos=c.labelpos),e.setEdge(n,u,{weight:c.weight},s),f===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,a,{weight:c.weight},s)}}function o(e){n.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy===`edge-label`&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}})),JZ=r(((exports,t)=>{var n=HZ();t.exports={longestPath:r,slack:i};function r(e){var t={};function r(i){var a=e.node(i);if(n.has(t,i))return a.rank;t[i]=!0;var o=n.min(n.map(e.outEdges(i),function(t){return r(t.w)-e.edge(t).minlen}));return(o===1/0||o==null)&&(o=0),a.rank=o}n.forEach(e.sources(),r)}function i(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}})),YZ=r(((exports,t)=>{var n=HZ(),r=XX().Graph,i=JZ().slack;t.exports=a;function a(e){var t=new r({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});for(var l,u;o(t,e)<a;)l=s(t,e),u=t.hasNode(l.v)?i(e,l):-i(e,l),c(t,e,u);return t}function o(e,t){function r(a){n.forEach(t.nodeEdges(a),function(n){var o=n.v,s=a===o?n.w:o;!e.hasNode(s)&&!i(t,n)&&(e.setNode(s,{}),e.setEdge(a,s,{}),r(s))})}return n.forEach(e.nodes(),r),e.nodeCount()}function s(e,t){return n.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return i(t,n)})}function c(e,t,r){n.forEach(e.nodes(),function(e){t.node(e).rank+=r})}})),XZ=r(((exports,t)=>{var n=HZ(),r=YZ(),i=JZ().slack,a=JZ().longestPath,o=XX().alg.preorder,s=XX().alg.postorder,c=KZ().simplify;t.exports=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=f,l.leaveEdge=h,l.enterEdge=g,l.exchangeEdges=_;function l(e){e=c(e),a(e);var t=r(e);p(t),u(t,e);for(var n,i;n=h(t);)i=g(t,e,n),_(t,e,n,i)}function u(e,t){var r=s(e,e.nodes());r=r.slice(0,r.length-1),n.forEach(r,function(n){d(e,t,n)})}function d(e,t,n){var r=e.node(n).parent;e.edge(n,r).cutvalue=f(e,t,n)}function f(e,t,r){var i=e.node(r).parent,a=!0,o=t.edge(r,i),s=0;return o||=(a=!1,t.edge(i,r)),s=o.weight,n.forEach(t.nodeEdges(r),function(n){var o=n.v===r,c=o?n.w:n.v;if(c!==i){var l=o===a,u=t.edge(n).weight;if(s+=l?u:-u,y(e,r,c)){var d=e.edge(r,c).cutvalue;s+=l?-d:d}}}),s}function p(e,t){arguments.length<2&&(t=e.nodes()[0]),m(e,{},1,t)}function m(e,t,r,i,a){var o=r,s=e.node(i);return t[i]=!0,n.forEach(e.neighbors(i),function(a){n.has(t,a)||(r=m(e,t,r,a,i))}),s.low=o,s.lim=r++,a?s.parent=a:delete s.parent,r}function h(e){return n.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function g(e,t,r){var a=r.v,o=r.w;t.hasEdge(a,o)||(a=r.w,o=r.v);var s=e.node(a),c=e.node(o),l=s,u=!1;s.lim>c.lim&&(l=c,u=!0);var d=n.filter(t.edges(),function(t){return u===b(e,e.node(t.v),l)&&u!==b(e,e.node(t.w),l)});return n.minBy(d,function(e){return i(t,e)})}function _(e,t,n,r){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(r.v,r.w,{}),p(e),u(e,t),v(e,t)}function v(e,t){var r=n.find(e.nodes(),function(e){return!t.node(e).parent}),i=o(e,r);i=i.slice(1),n.forEach(i,function(n){var r=e.node(n).parent,i=t.edge(n,r),a=!1;i||(i=t.edge(r,n),a=!0),t.node(n).rank=t.node(r).rank+(a?i.minlen:-i.minlen)})}function y(e,t,n){return e.hasEdge(t,n)}function b(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}})),ZZ=r(((exports,t)=>{var n=JZ().longestPath,r=YZ(),i=XZ();t.exports=a;function a(e){switch(e.graph().ranker){case`network-simplex`:c(e);break;case`tight-tree`:s(e);break;case`longest-path`:o(e);break;default:c(e)}}var o=n;function s(e){n(e),r(e)}function c(e){i(e)}})),QZ=r(((exports,t)=>{var n=HZ();t.exports=r;function r(e){var t=a(e);n.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),a=r.edgeObj,o=i(e,t,a.v,a.w),s=o.path,c=o.lca,l=0,u=s[l],d=!0;n!==a.w;){if(r=e.node(n),d){for(;(u=s[l])!==c&&e.node(u).maxRank<r.rank;)l++;u===c&&(d=!1)}if(!d){for(;l<s.length-1&&e.node(u=s[l+1]).minRank<=r.rank;)l++;u=s[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function i(e,t,n,r){var i=[],a=[],o=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),c=n,l;do c=e.parent(c),i.push(c);while(c&&(t[c].low>o||s>t[c].lim));for(l=c,c=r;(c=e.parent(c))!==l;)a.push(c);return{path:i.concat(a.reverse()),lca:l}}function a(e){var t={},r=0;function i(a){var o=r;n.forEach(e.children(a),i),t[a]={low:o,lim:r++}}return n.forEach(e.children(),i),t}})),$Z=r(((exports,t)=>{var n=HZ(),r=KZ();t.exports={run:i,cleanup:c};function i(e){var t=r.addDummyNode(e,`root`,{},`_root`),i=o(e),c=n.max(n.values(i))-1,l=2*c+1;e.graph().nestingRoot=t,n.forEach(e.edges(),function(t){e.edge(t).minlen*=l});var u=s(e)+1;n.forEach(e.children(),function(n){a(e,t,l,u,c,i,n)}),e.graph().nodeRankFactor=l}function a(e,t,i,o,s,c,l){var u=e.children(l);if(!u.length){l!==t&&e.setEdge(t,l,{weight:0,minlen:i});return}var d=r.addBorderNode(e,`_bt`),f=r.addBorderNode(e,`_bb`),p=e.node(l);e.setParent(d,l),p.borderTop=d,e.setParent(f,l),p.borderBottom=f,n.forEach(u,function(n){a(e,t,i,o,s,c,n);var r=e.node(n),u=r.borderTop?r.borderTop:n,p=r.borderBottom?r.borderBottom:n,m=r.borderTop?o:2*o,h=u===p?s-c[l]+1:1;e.setEdge(d,u,{weight:m,minlen:h,nestingEdge:!0}),e.setEdge(p,f,{weight:m,minlen:h,nestingEdge:!0})}),e.parent(l)||e.setEdge(t,d,{weight:0,minlen:s+c[l]})}function o(e){var t={};function r(i,a){var o=e.children(i);o&&o.length&&n.forEach(o,function(e){r(e,a+1)}),t[i]=a}return n.forEach(e.children(),function(e){r(e,1)}),t}function s(e){return n.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function c(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,n.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}})),eQ=r(((exports,t)=>{var n=HZ(),r=KZ();t.exports=i;function i(e){function t(r){var i=e.children(r),o=e.node(r);if(i.length&&n.forEach(i,t),n.has(o,`minRank`)){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,c=o.maxRank+1;s<c;++s)a(e,`borderLeft`,`_bl`,r,o,s),a(e,`borderRight`,`_br`,r,o,s)}}n.forEach(e.children(),t)}function a(e,t,n,i,a,o){var s={width:0,height:0,rank:o,borderType:t},c=a[t][o-1],l=r.addDummyNode(e,`border`,s,n);a[t][o]=l,e.setParent(l,i),c&&e.setEdge(c,l,{weight:1})}})),tQ=r(((exports,t)=>{var n=HZ();t.exports={adjust:r,undo:i};function r(e){var t=e.graph().rankdir.toLowerCase();(t===`lr`||t===`rl`)&&a(e)}function i(e){var t=e.graph().rankdir.toLowerCase();(t===`bt`||t===`rl`)&&s(e),(t===`lr`||t===`rl`)&&(l(e),a(e))}function a(e){n.forEach(e.nodes(),function(t){o(e.node(t))}),n.forEach(e.edges(),function(t){o(e.edge(t))})}function o(e){var t=e.width;e.width=e.height,e.height=t}function s(e){n.forEach(e.nodes(),function(t){c(e.node(t))}),n.forEach(e.edges(),function(t){var r=e.edge(t);n.forEach(r.points,c),n.has(r,`y`)&&c(r)})}function c(e){e.y=-e.y}function l(e){n.forEach(e.nodes(),function(t){u(e.node(t))}),n.forEach(e.edges(),function(t){var r=e.edge(t);n.forEach(r.points,u),n.has(r,`x`)&&u(r)})}function u(e){var t=e.x;e.x=e.y,e.y=t}})),nQ=r(((exports,t)=>{var n=HZ();t.exports=r;function r(e){var t={},r=n.filter(e.nodes(),function(t){return!e.children(t).length}),i=n.max(n.map(r,function(t){return e.node(t).rank})),a=n.map(n.range(i+1),function(){return[]});function o(r){if(!n.has(t,r)){t[r]=!0;var i=e.node(r);a[i.rank].push(r),n.forEach(e.successors(r),o)}}var s=n.sortBy(r,function(t){return e.node(t).rank});return n.forEach(s,o),a}})),rQ=r(((exports,t)=>{var n=HZ();t.exports=r;function r(e,t){for(var n=0,r=1;r<t.length;++r)n+=i(e,t[r-1],t[r]);return n}function i(e,t,r){for(var i=n.zipObject(r,n.map(r,function(e,t){return t})),a=n.flatten(n.map(t,function(t){return n.sortBy(n.map(e.outEdges(t),function(t){return{pos:i[t.w],weight:e.edge(t).weight}}),`pos`)}),!0),o=1;o<r.length;)o<<=1;var s=2*o-1;--o;var c=n.map(Array(s),function(){return 0}),l=0;return n.forEach(a.forEach(function(e){var t=e.pos+o;c[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=c[t+1]),t=t-1>>1,c[t]+=e.weight;l+=e.weight*n})),l}})),iQ=r(((exports,t)=>{var n=HZ();t.exports=r;function r(e,t){return n.map(t,function(t){var r=e.inEdges(t);if(r.length){var i=n.reduce(r,function(t,n){var r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:t}})}})),aQ=r(((exports,t)=>{var n=HZ();t.exports=r;function r(e,t){var r={};n.forEach(e,function(e,t){var i=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};n.isUndefined(e.barycenter)||(i.barycenter=e.barycenter,i.weight=e.weight)}),n.forEach(t.edges(),function(e){var t=r[e.v],i=r[e.w];!n.isUndefined(t)&&!n.isUndefined(i)&&(i.indegree++,t.out.push(r[e.w]))});var a=n.filter(r,function(e){return!e.indegree});return i(a)}function i(e){var t=[];function r(e){return function(t){t.merged||(n.isUndefined(t.barycenter)||n.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&a(e,t)}}function i(t){return function(n){n.in.push(t),--n.indegree===0&&e.push(n)}}for(;e.length;){var o=e.pop();t.push(o),n.forEach(o.in.reverse(),r(o)),n.forEach(o.out,i(o))}return n.map(n.filter(t,function(e){return!e.merged}),function(e){return n.pick(e,[`vs`,`i`,`barycenter`,`weight`])})}function a(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}})),oQ=r(((exports,t)=>{var n=HZ(),r=KZ();t.exports=i;function i(e,t){var i=r.partition(e,function(e){return n.has(e,`barycenter`)}),s=i.lhs,c=n.sortBy(i.rhs,function(e){return-e.i}),l=[],u=0,d=0,f=0;s.sort(o(!!t)),f=a(l,c,f),n.forEach(s,function(e){f+=e.vs.length,l.push(e.vs),u+=e.barycenter*e.weight,d+=e.weight,f=a(l,c,f)});var p={vs:n.flatten(l,!0)};return d&&(p.barycenter=u/d,p.weight=d),p}function a(e,t,r){for(var i;t.length&&(i=n.last(t)).i<=r;)t.pop(),e.push(i.vs),r++;return r}function o(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}})),sQ=r(((exports,t)=>{var n=HZ(),r=iQ(),i=aQ(),a=oQ();t.exports=o;function o(e,t,l,u){var d=e.children(t),f=e.node(t),p=f?f.borderLeft:void 0,m=f?f.borderRight:void 0,h={};p&&(d=n.filter(d,function(e){return e!==p&&e!==m}));var g=r(e,d);n.forEach(g,function(t){if(e.children(t.v).length){var r=o(e,t.v,l,u);h[t.v]=r,n.has(r,`barycenter`)&&c(t,r)}});var _=i(g,l);s(_,h);var v=a(_,u);if(p&&(v.vs=n.flatten([p,v.vs,m],!0),e.predecessors(p).length)){var y=e.node(e.predecessors(p)[0]),b=e.node(e.predecessors(m)[0]);n.has(v,`barycenter`)||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+y.order+b.order)/(v.weight+2),v.weight+=2}return v}function s(e,t){n.forEach(e,function(e){e.vs=n.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}function c(e,t){n.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}})),cQ=r(((exports,t)=>{var n=HZ(),r=XX().Graph;t.exports=i;function i(e,t,i){var o=a(e),s=new r({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(t){return e.node(t)});return n.forEach(e.nodes(),function(r){var a=e.node(r),c=e.parent(r);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(s.setNode(r),s.setParent(r,c||o),n.forEach(e[i](r),function(t){var i=t.v===r?t.w:t.v,a=s.edge(i,r),o=n.isUndefined(a)?0:a.weight;s.setEdge(i,r,{weight:e.edge(t).weight+o})}),n.has(a,`minRank`)&&s.setNode(r,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),s}function a(e){for(var t;e.hasNode(t=n.uniqueId(`_root`)););return t}})),lQ=r(((exports,t)=>{var n=HZ();t.exports=r;function r(e,t,r){var i={},a;n.forEach(r,function(n){for(var r=e.parent(n),o,s;r;){if(o=e.parent(r),o?(s=i[o],i[o]=r):(s=a,a=r),s&&s!==r){t.setEdge(s,r);return}r=o}})}})),uQ=r(((exports,t)=>{var n=HZ(),r=nQ(),i=rQ(),a=sQ(),o=cQ(),s=lQ(),c=XX().Graph,l=KZ();t.exports=u;function u(e){var t=l.maxRank(e),a=d(e,n.range(1,t+1),`inEdges`),o=d(e,n.range(t-1,-1,-1),`outEdges`),s=r(e);p(e,s);for(var c=1/0,u,m=0,h=0;h<4;++m,++h){f(m%2?a:o,m%4>=2),s=l.buildLayerMatrix(e);var g=i(e,s);g<c&&(h=0,u=n.cloneDeep(s),c=g)}p(e,u)}function d(e,t,r){return n.map(t,function(t){return o(e,t,r)})}function f(e,t){var r=new c;n.forEach(e,function(e){var i=e.graph().root,o=a(e,i,r,t);n.forEach(o.vs,function(t,n){e.node(t).order=n}),s(e,r,o.vs)})}function p(e,t){n.forEach(t,function(t){n.forEach(t,function(t,n){e.node(t).order=n})})}})),dQ=r(((exports,t)=>{var n=HZ(),r=XX().Graph,i=KZ();t.exports={positionX:g,findType1Conflicts:a,findType2Conflicts:o,addConflict:c,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:m,findSmallestWidthAlignment:p,balance:h};function a(e,t){var r={};function i(t,i){var a=0,o=0,l=t.length,u=n.last(i);return n.forEach(i,function(t,d){var f=s(e,t),p=f?e.node(f).order:l;(f||t===u)&&(n.forEach(i.slice(o,d+1),function(t){n.forEach(e.predecessors(t),function(n){var i=e.node(n),o=i.order;(o<a||p<o)&&!(i.dummy&&e.node(t).dummy)&&c(r,n,t)})}),o=d+1,a=p)}),i}return n.reduce(t,i),r}function o(e,t){var r={};function i(t,i,a,o,s){var l;n.forEach(n.range(i,a),function(i){l=t[i],e.node(l).dummy&&n.forEach(e.predecessors(l),function(t){var n=e.node(t);n.dummy&&(n.order<o||n.order>s)&&c(r,t,l)})})}function a(t,r){var a=-1,o,s=0;return n.forEach(r,function(n,c){if(e.node(n).dummy===`border`){var l=e.predecessors(n);l.length&&(o=e.node(l[0]).order,i(r,s,c,a,o),s=c,a=o)}i(r,s,r.length,o,t.length)}),r}return n.reduce(t,a),r}function s(e,t){if(e.node(t).dummy)return n.find(e.predecessors(t),function(t){return e.node(t).dummy})}function c(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function l(e,t,r){if(t>r){var i=t;t=r,r=i}return n.has(e[t],r)}function u(e,t,r,i){var a={},o={},s={};return n.forEach(t,function(e){n.forEach(e,function(e,t){a[e]=e,o[e]=e,s[e]=t})}),n.forEach(t,function(e){var t=-1;n.forEach(e,function(e){var c=i(e);if(c.length){c=n.sortBy(c,function(e){return s[e]});for(var u=(c.length-1)/2,d=Math.floor(u),f=Math.ceil(u);d<=f;++d){var p=c[d];o[e]===e&&t<s[p]&&!l(r,e,p)&&(o[p]=e,o[e]=a[e]=a[p],t=s[p])}}})}),{root:a,align:o}}function d(e,t,r,i,a){var o={},s=f(e,t,r,a),c=a?`borderLeft`:`borderRight`;function l(e,t){for(var n=s.nodes(),r=n.pop(),i={};r;)i[r]?e(r):(i[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}function u(e){o[e]=s.inEdges(e).reduce(function(e,t){return Math.max(e,o[t.v]+s.edge(t))},0)}function d(t){var n=s.outEdges(t).reduce(function(e,t){return Math.min(e,o[t.w]-s.edge(t))},1/0),r=e.node(t);n!==1/0&&r.borderType!==c&&(o[t]=Math.max(o[t],n))}return l(u,s.predecessors.bind(s)),l(d,s.successors.bind(s)),n.forEach(i,function(e){o[e]=o[r[e]]}),o}function f(e,t,i,a){var o=new r,s=e.graph(),c=_(s.nodesep,s.edgesep,a);return n.forEach(t,function(t){var r;n.forEach(t,function(t){var n=i[t];if(o.setNode(n),r){var a=i[r],s=o.edge(a,n);o.setEdge(a,n,Math.max(c(e,t,r),s||0))}r=t})}),o}function p(e,t){return n.minBy(n.values(t),function(t){var r=-1/0,i=1/0;return n.forIn(t,function(t,n){var a=v(e,n)/2;r=Math.max(t+a,r),i=Math.min(t-a,i)}),r-i})}function m(e,t){var r=n.values(t),i=n.min(r),a=n.max(r);n.forEach([`u`,`d`],function(r){n.forEach([`l`,`r`],function(o){var s=r+o,c=e[s],l;if(c!==t){var u=n.values(c);l=o===`l`?i-n.min(u):a-n.max(u),l&&(e[s]=n.mapValues(c,function(e){return e+l}))}})})}function h(e,t){return n.mapValues(e.ul,function(r,i){if(t)return e[t.toLowerCase()][i];var a=n.sortBy(n.map(e,i));return(a[1]+a[2])/2})}function g(e){var t=i.buildLayerMatrix(e),r=n.merge(a(e,t),o(e,t)),s={},c;n.forEach([`u`,`d`],function(i){c=i===`u`?t:n.values(t).reverse(),n.forEach([`l`,`r`],function(t){t===`r`&&(c=n.map(c,function(e){return n.values(e).reverse()}));var a=(i===`u`?e.predecessors:e.successors).bind(e),o=u(e,c,r,a),l=d(e,c,o.root,o.align,t===`r`);t===`r`&&(l=n.mapValues(l,function(e){return-e})),s[i+t]=l})});var l=p(e,s);return m(s,l),h(s,e.graph().align)}function _(e,t,r){return function(i,a,o){var s=i.node(a),c=i.node(o),l=0,u;if(l+=s.width/2,n.has(s,`labelpos`))switch(s.labelpos.toLowerCase()){case`l`:u=-s.width/2;break;case`r`:u=s.width/2;break}if(u&&(l+=r?u:-u),u=0,l+=(s.dummy?t:e)/2,l+=(c.dummy?t:e)/2,l+=c.width/2,n.has(c,`labelpos`))switch(c.labelpos.toLowerCase()){case`l`:u=c.width/2;break;case`r`:u=-c.width/2;break}return u&&(l+=r?u:-u),u=0,l}}function v(e,t){return e.node(t).width}})),fQ=r(((exports,t)=>{var n=HZ(),r=KZ(),i=dQ().positionX;t.exports=a;function a(e){e=r.asNonCompoundGraph(e),o(e),n.forEach(i(e),function(t,n){e.node(n).x=t})}function o(e){var t=r.buildLayerMatrix(e),i=e.graph().ranksep,a=0;n.forEach(t,function(t){var r=n.max(n.map(t,function(t){return e.node(t).height}));n.forEach(t,function(t){e.node(t).y=a+r/2}),a+=r+i})}})),pQ=r(((exports,t)=>{var n=HZ(),r=GZ(),i=qZ(),a=ZZ(),o=KZ().normalizeRanks,s=QZ(),c=KZ().removeEmptyRanks,l=$Z(),u=eQ(),d=tQ(),f=uQ(),p=fQ(),m=KZ(),h=XX().Graph;t.exports=g;function g(e,t){var n=t&&t.debugTiming?m.time:m.notime;n(`layout`,function(){var t=n(`  buildLayoutGraph`,function(){return D(e)});n(`  runLayout`,function(){_(t,n)}),n(`  updateInputGraph`,function(){v(e,t)})})}function _(e,t){t(`    makeSpaceForEdgeLabels`,function(){O(e)}),t(`    removeSelfEdges`,function(){re(e)}),t(`    acyclic`,function(){r.run(e)}),t(`    nestingGraph.run`,function(){l.run(e)}),t(`    rank`,function(){a(m.asNonCompoundGraph(e))}),t(`    injectEdgeLabelProxies`,function(){k(e)}),t(`    removeEmptyRanks`,function(){c(e)}),t(`    nestingGraph.cleanup`,function(){l.cleanup(e)}),t(`    normalizeRanks`,function(){o(e)}),t(`    assignRankMinMax`,function(){A(e)}),t(`    removeEdgeLabelProxies`,function(){j(e)}),t(`    normalize.run`,function(){i.run(e)}),t(`    parentDummyChains`,function(){s(e)}),t(`    addBorderSegments`,function(){u(e)}),t(`    order`,function(){f(e)}),t(`    insertSelfEdges`,function(){P(e)}),t(`    adjustCoordinateSystem`,function(){d.adjust(e)}),t(`    position`,function(){p(e)}),t(`    positionSelfEdges`,function(){F(e)}),t(`    removeBorderNodes`,function(){ne(e)}),t(`    normalize.undo`,function(){i.undo(e)}),t(`    fixupEdgeLabelCoords`,function(){N(e)}),t(`    undoCoordinateSystem`,function(){d.undo(e)}),t(`    translateGraph`,function(){M(e)}),t(`    assignNodeIntersects`,function(){ee(e)}),t(`    reversePoints`,function(){te(e)}),t(`    acyclic.undo`,function(){r.undo(e)})}function v(e,t){n.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),n.forEach(e.edges(),function(r){var i=e.edge(r),a=t.edge(r);i.points=a.points,n.has(a,`x`)&&(i.x=a.x,i.y=a.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var y=[`nodesep`,`edgesep`,`ranksep`,`marginx`,`marginy`],b={ranksep:50,edgesep:20,nodesep:50,rankdir:`tb`},x=[`acyclicer`,`ranker`,`rankdir`,`align`],S=[`width`,`height`],C={width:0,height:0},w=[`minlen`,`weight`,`width`,`height`,`labeloffset`],T={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:`r`},E=[`labelpos`];function D(e){var t=new h({multigraph:!0,compound:!0}),r=ie(e.graph());return t.setGraph(n.merge({},b,I(r,y),n.pick(r,x))),n.forEach(e.nodes(),function(r){var i=ie(e.node(r));t.setNode(r,n.defaults(I(i,S),C)),t.setParent(r,e.parent(r))}),n.forEach(e.edges(),function(r){var i=ie(e.edge(r));t.setEdge(r,n.merge({},T,I(i,w),n.pick(i,E)))}),t}function O(e){var t=e.graph();t.ranksep/=2,n.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!==`c`&&(t.rankdir===`TB`||t.rankdir===`BT`?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function k(e){n.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};m.addDummyNode(e,`edge-proxy`,i,`_ep`)}})}function A(e){var t=0;n.forEach(e.nodes(),function(r){var i=e.node(r);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=n.max(t,i.maxRank))}),e.graph().maxRank=t}function j(e){n.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy===`edge-proxy`&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function M(e){var t=1/0,r=0,i=1/0,a=0,o=e.graph(),s=o.marginx||0,c=o.marginy||0;function l(e){var n=e.x,o=e.y,s=e.width,c=e.height;t=Math.min(t,n-s/2),r=Math.max(r,n+s/2),i=Math.min(i,o-c/2),a=Math.max(a,o+c/2)}n.forEach(e.nodes(),function(t){l(e.node(t))}),n.forEach(e.edges(),function(t){var r=e.edge(t);n.has(r,`x`)&&l(r)}),t-=s,i-=c,n.forEach(e.nodes(),function(n){var r=e.node(n);r.x-=t,r.y-=i}),n.forEach(e.edges(),function(r){var a=e.edge(r);n.forEach(a.points,function(e){e.x-=t,e.y-=i}),n.has(a,`x`)&&(a.x-=t),n.has(a,`y`)&&(a.y-=i)}),o.width=r-t+s,o.height=a-i+c}function ee(e){n.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),a,o;n.points?(a=n.points[0],o=n.points[n.points.length-1]):(n.points=[],a=i,o=r),n.points.unshift(m.intersectRect(r,a)),n.points.push(m.intersectRect(i,o))})}function N(e){n.forEach(e.edges(),function(t){var r=e.edge(t);if(n.has(r,`x`))switch((r.labelpos===`l`||r.labelpos===`r`)&&(r.width-=r.labeloffset),r.labelpos){case`l`:r.x-=r.width/2+r.labeloffset;break;case`r`:r.x+=r.width/2+r.labeloffset;break}})}function te(e){n.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function ne(e){n.forEach(e.nodes(),function(t){if(e.children(t).length){var r=e.node(t),i=e.node(r.borderTop),a=e.node(r.borderBottom),o=e.node(n.last(r.borderLeft)),s=e.node(n.last(r.borderRight));r.width=Math.abs(s.x-o.x),r.height=Math.abs(a.y-i.y),r.x=o.x+r.width/2,r.y=i.y+r.height/2}}),n.forEach(e.nodes(),function(t){e.node(t).dummy===`border`&&e.removeNode(t)})}function re(e){n.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||=[],n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function P(e){var t=m.buildLayerMatrix(e);n.forEach(t,function(t){var r=0;n.forEach(t,function(t,i){var a=e.node(t);a.order=i+r,n.forEach(a.selfEdges,function(t){m.addDummyNode(e,`selfedge`,{width:t.label.width,height:t.label.height,rank:a.rank,order:i+ ++r,e:t.e,label:t.label},`_se`)}),delete a.selfEdges})})}function F(e){n.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy===`selfedge`){var r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,o=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function I(e,t){return n.mapValues(n.pick(e,t),Number)}function ie(e){var t={};return n.forEach(e,function(e,n){t[n.toLowerCase()]=e}),t}})),mQ=r(((exports,t)=>{var n=HZ(),r=KZ(),i=XX().Graph;t.exports={debugOrdering:a};function a(e){var t=r.buildLayerMatrix(e),a=new i({compound:!0,multigraph:!0}).setGraph({});return n.forEach(e.nodes(),function(t){a.setNode(t,{label:t}),a.setParent(t,`layer`+e.node(t).rank)}),n.forEach(e.edges(),function(e){a.setEdge(e.v,e.w,{},e.name)}),n.forEach(t,function(e,t){var r=`layer`+t;a.setNode(r,{rank:`same`}),n.reduce(e,function(e,t){return a.setEdge(e,t,{style:`invis`}),t})}),a}})),hQ=r(((exports,t)=>{t.exports=`0.8.5`})),gQ=t(r(((exports,t)=>{t.exports={graphlib:XX(),layout:pQ(),debug:mQ(),util:{time:KZ().time,notime:KZ().notime},version:hQ()}}))()),_Q=class e{constructor(t){this.id=`dagre`,this.options={},Object.assign(this.options,e.defaultOptions,t)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,Object.assign(Object.assign({},this.options),t))})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,Object.assign(Object.assign({},this.options),t))})}genericDagreLayout(e,t,n){return En(this,void 0,void 0,function*(){let{nodeSize:r}=n,i=new gQ.graphlib.Graph;i.setGraph(n),i.setDefaultEdgeLabel(()=>({}));let a=t.getAllNodes(),o=t.getAllEdges();[...a,...o].some(({id:e})=>K(e))&&console.error(`Dagre layout only support string id, it will convert number to string.`),t.getAllNodes().forEach(e=>{let{id:t}=e,n=Object.assign({},e.data);if(r!==void 0){let[t,i]=uW(rS(r)?r(e):r);Object.assign(n,{width:t,height:i})}i.setNode(t.toString(),n)}),t.getAllEdges().forEach(({id:e,source:t,target:n})=>{i.setEdge(t.toString(),n.toString(),{id:e})}),gQ.default.layout(i);let s={nodes:[],edges:[]};return i.nodes().forEach(n=>{let r=i.node(n);s.nodes.push({id:n,data:r}),e&&t.mergeNodeData(n,r)}),i.edges().forEach(n=>{let r=i.edge(n),{id:a}=r,o=Tn(r,[`id`]),{v:c,w:l}=n;s.edges.push({id:a,source:c,target:l,data:o}),e&&t.mergeEdgeData(a,o)}),s})}};_Q.defaultOptions={};var vQ=class e{constructor(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}distanceTo(e){let t=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(t,n)}setPos(e,t){this.rx=e,this.ry=t}resetForce(){this.fx=0,this.fy=0}addForce(e){let t=e.rx-this.rx,n=e.ry-this.ry,r=Math.hypot(t,n);r=r<1e-4?1e-4:r;let i=this.g*(this.degree+1)*(e.degree+1)/r;this.fx+=i*t/r,this.fy+=i*n/r}in(e){return e.contains(this.rx,this.ry)}add(t){let n=this.mass+t.mass,r=(this.rx*this.mass+t.rx*t.mass)/n,i=(this.ry*this.mass+t.ry*t.mass)/n,a=this.degree+t.degree;return new e({rx:r,ry:i,mass:n,degree:a})}},yQ=class e{constructor(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}getLength(){return this.length}contains(e,t){let n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n}NW(){let t=this.xmid-this.length/4,n=this.ymid+this.length/4,r=this.length/2;return new e({xmid:t,ymid:n,length:r})}NE(){let t=this.xmid+this.length/4,n=this.ymid+this.length/4,r=this.length/2;return new e({xmid:t,ymid:n,length:r})}SW(){let t=this.xmid-this.length/4,n=this.ymid-this.length/4,r=this.length/2;return new e({xmid:t,ymid:n,length:r})}SE(){let t=this.xmid+this.length/4,n=this.ymid-this.length/4,r=this.length/2;return new e({xmid:t,ymid:n,length:r})}},bQ=class e{constructor(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}insert(t){if(this.body==null){this.body=t;return}this._isExternal()?(this.quad&&(this.NW=new e(this.quad.NW()),this.NE=new e(this.quad.NE()),this.SW=new e(this.quad.SW()),this.SE=new e(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t))}_putBody(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{let t=this.quad?this.quad.getLength():0,n=this.body.distanceTo(e);t/n<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}}},xQ={center:[0,0],width:300,height:300,kr:5,kg:1,mode:`normal`,preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1},SQ=class{constructor(e={}){this.options=e,this.id=`forceAtlas2`,this.options=Object.assign(Object.assign({},xQ),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,e,t)})}genericForceAtlas2Layout(e,t,n){return En(this,void 0,void 0,function*(){let r=t.getAllEdges(),i=t.getAllNodes(),a=this.formatOptions(n,i.length),{width:o,height:s,prune:c,maxIteration:l,nodeSize:u,center:d}=a;if(!i?.length||i.length===1)return _W(t,e,d);let f=i.map(e=>lW(e,[o,s])),p=r.filter(e=>{let{source:t,target:n}=e;return t!==n}),m=new tV({nodes:f,edges:p}),h=this.getSizes(m,u);if(this.run(m,t,l,h,e,a),c){for(let e=0;e<p.length;e+=1){let{source:t,target:n}=p[e],r=m.getDegree(t),i=m.getDegree(t);if(r<=1){let e=m.getNode(n);m.mergeNodeData(t,{x:e.data.x,y:e.data.y})}else if(i<=1){let e=m.getNode(t);m.mergeNodeData(n,{x:e.data.x,y:e.data.y})}}let n=Object.assign(Object.assign({},a),{prune:!1,barnesHut:!1});this.run(m,t,100,h,e,n)}return{nodes:f,edges:r}})}getSizes(e,t){let n=e.getAllNodes(),r={};for(let e=0;e<n.length;e+=1){let i=n[e];r[i.id]=pW(t,void 0)(i)}return r}formatOptions(e={},t){let n=Object.assign(Object.assign({},this.options),e),{center:r,width:i,height:a,barnesHut:o,prune:s,maxIteration:c,kr:l,kg:u}=n;return n.width=!i&&typeof window<`u`?window.innerWidth:i,n.height=!a&&typeof window<`u`?window.innerHeight:a,n.center=r||[n.width/2,n.height/2],o===void 0&&t>250&&(n.barnesHut=!0),s===void 0&&t>100&&(n.prune=!0),c===0&&!s?(n.maxIteration=250,t<=200&&t>100?n.maxIteration=1e3:t>200&&(n.maxIteration=1200)):c===0&&s&&(n.maxIteration=100,t<=200&&t>100?n.maxIteration=500:t>200&&(n.maxIteration=950)),l||(n.kr=50,t>100&&t<=500?n.kr=20:t>500&&(n.kr=1)),u||(n.kg=20,t>100&&t<=500?n.kg=10:t>500&&(n.kg=1)),n}run(e,t,n,r,i,a){let{kr:o,barnesHut:s,onTick:c}=a,l=e.getAllNodes(),u=0,d=n,f={},p={},m={};for(let t=0;t<l.length;t+=1){let{data:n,id:r}=l[t];if(f[r]=[0,0],s){let i={id:t,rx:n.x,ry:n.y,mass:1,g:o,degree:e.getDegree(r)};m[r]=new vQ(i)}}for(;d>0;)u=this.oneStep(e,{iter:d,preventOverlapIters:50,krPrime:100,sg:u,forces:f,preForces:p,bodies:m,sizes:r},a),d--,c?.({nodes:l,edges:t.getAllEdges()});return e}oneStep(e,t,n){let{iter:r,preventOverlapIters:i,krPrime:a,sg:o,preForces:s,bodies:c,sizes:l}=t,{forces:u}=t,{preventOverlap:d,barnesHut:f}=n,p=e.getAllNodes();for(let e=0;e<p.length;e+=1){let{id:t}=p[e];s[t]=[...u[t]],u[t]=[0,0]}return u=this.getAttrForces(e,r,i,l,u,n),u=f&&(d&&r>i||!d)?this.getOptRepGraForces(e,u,c,n):this.getRepGraForces(e,r,i,u,a,l,n),this.updatePos(e,u,s,o,n)}getAttrForces(e,t,n,r,i,a){let{preventOverlap:o,dissuadeHubs:s,mode:c,prune:l}=a,u=e.getAllEdges();for(let a=0;a<u.length;a+=1){let{source:d,target:f}=u[a],p=e.getNode(d),m=e.getNode(f),h=e.getDegree(d),g=e.getDegree(f);if(l&&(h<=1||g<=1))continue;let _=[m.data.x-p.data.x,m.data.y-p.data.y],v=Math.hypot(_[0],_[1]);v=v<1e-4?1e-4:v,_[0]/=v,_[1]/=v,o&&t<n&&(v=v-r[d]-r[f]);let y=v,b=y;c===`linlog`&&(y=Math.log(1+v),b=y),s&&(y=v/h,b=v/g),o&&t<n&&v<=0?(y=0,b=0):o&&t<n&&v>0&&(y=v,b=v),i[d][0]+=y*_[0],i[f][0]-=b*_[0],i[d][1]+=y*_[1],i[f][1]-=b*_[1]}return i}getOptRepGraForces(e,t,n,r){let{kg:i,center:a,prune:o}=r,s=e.getAllNodes(),c=s.length,l=9e10,u=-9e10,d=9e10,f=-9e10;for(let t=0;t<c;t+=1){let{id:r,data:i}=s[t];o&&e.getDegree(r)<=1||(n[r].setPos(i.x,i.y),i.x>=u&&(u=i.x),i.x<=l&&(l=i.x),i.y>=f&&(f=i.y),i.y<=d&&(d=i.y))}let p=Math.max(u-l,f-d),m={xmid:(u+l)/2,ymid:(f+d)/2,length:p,massCenter:a,mass:c},h=new yQ(m),g=new bQ(h);for(let t=0;t<c;t+=1){let{id:r}=s[t];o&&e.getDegree(r)<=1||n[r].in(h)&&g.insert(n[r])}for(let r=0;r<c;r+=1){let{id:c,data:l}=s[r],u=e.getDegree(c);if(o&&u<=1)continue;n[c].resetForce(),g.updateForce(n[c]),t[c][0]-=n[c].fx,t[c][1]-=n[c].fy;let d=[l.x-a[0],l.y-a[1]],f=Math.hypot(d[0],d[1]);f=f<1e-4?1e-4:f,d[0]/=f,d[1]/=f;let p=i*(u+1);t[c][0]-=p*d[0],t[c][1]-=p*d[1]}return t}getRepGraForces(e,t,n,r,i,a,o){let{preventOverlap:s,kr:c,kg:l,center:u,prune:d}=o,f=e.getAllNodes(),p=f.length;for(let o=0;o<p;o+=1){let m=f[o],h=e.getDegree(m.id);for(let l=o+1;l<p;l+=1){let o=f[l],u=e.getDegree(o.id);if(d&&(h<=1||u<=1))continue;let p=[o.data.x-m.data.x,o.data.y-m.data.y],g=Math.hypot(p[0],p[1]);g=g<1e-4?1e-4:g,p[0]/=g,p[1]/=g,s&&t<n&&(g=g-a[m.id]-a[o.id]);let _=c*(h+1)*(u+1)/g;s&&t<n&&g<0?_=i*(h+1)*(u+1):s&&t<n&&g===0?_=0:s&&t<n&&g>0&&(_=c*(h+1)*(u+1)/g),r[m.id][0]-=_*p[0],r[o.id][0]+=_*p[0],r[m.id][1]-=_*p[1],r[o.id][1]+=_*p[1]}let g=[m.data.x-u[0],m.data.y-u[1]],_=Math.hypot(g[0],g[1]);g[0]/=_,g[1]/=_;let v=l*(h+1);r[m.id][0]-=v*g[0],r[m.id][1]-=v*g[1]}return r}updatePos(e,t,n,r,i){let{ks:a,tao:o,prune:s,ksmax:c}=i,l=e.getAllNodes(),u=l.length,d=[],f=[],p=0,m=0,h=r;for(let r=0;r<u;r+=1){let{id:i}=l[r],a=e.getDegree(i);if(s&&a<=1)continue;let o=[t[i][0]-n[i][0],t[i][1]-n[i][1]],c=Math.hypot(o[0],o[1]),u=[t[i][0]+n[i][0],t[i][1]+n[i][1]],h=Math.hypot(u[0],u[1]);d[r]=c,f[r]=h/2,p+=(a+1)*d[r],m+=(a+1)*f[r]}let g=h;h=o*m/p,g!==0&&(h=h>1.5*g?1.5*g:h);for(let n=0;n<u;n+=1){let{id:r,data:i}=l[n],o=e.getDegree(r);if(s&&o<=1||K(i.fx)&&K(i.fy))continue;let u=a*h/(1+h*Math.sqrt(d[n])),f=Math.hypot(t[r][0],t[r][1]);f=f<1e-4?1e-4:f;let p=c/f;u=u>p?p:u;let m=u*t[r][0],g=u*t[r][1];e.mergeNodeData(r,{x:i.x+m,y:i.y+g})}return h}},CQ={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:`cluster`},wQ=800,TQ=class{constructor(e={}){this.options=e,this.id=`fruchterman`,this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},CQ),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,e,t)})}stop(){this.timeInterval&&typeof window<`u`&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let t=0;t<e;t++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);let t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(e=>this.lastGraph.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:this.options.dimensions===3?e.data.z:void 0})),t}genericFruchtermanLayout(e,t,n){return En(this,void 0,void 0,function*(){if(this.running)return;let r=this.formatOptions(n),{dimensions:i,width:a,height:o,center:s,clustering:c,nodeClusterBy:l,maxIteration:u,onTick:d}=r,f=t.getAllNodes(),p=t.getAllEdges();if(!f?.length){let e={nodes:[],edges:p};return this.lastResult=e,e}if(f.length===1){e&&t.mergeNodeData(f[0].id,{x:s[0],y:s[1],z:i===3?s[2]:void 0});let n={nodes:[Object.assign(Object.assign({},f[0]),{data:Object.assign(Object.assign({},f[0].data),{x:s[0],y:s[1],z:i===3?s[2]:void 0})})],edges:p};return this.lastResult=n,n}let m=f.map(e=>lW(e,[a,o])),h=new tV({nodes:m,edges:p}),g={};if(c&&m.forEach(e=>{let t=e.data[l];g[t]||(g[t]={name:t,cx:0,cy:0,count:0})}),this.lastLayoutNodes=m,this.lastLayoutEdges=p,this.lastAssign=e,this.lastGraph=h,this.lastOptions=r,this.lastClusterMap=g,typeof window>`u`)return;let _=0;return new Promise(n=>{this.timeInterval=window.setInterval(()=>{if(!this.running){n({nodes:m,edges:p});return}this.runOneStep(h,g,r),e&&m.forEach(({id:e,data:n})=>t.mergeNodeData(e,{x:n.x,y:n.y,z:i===3?n.z:void 0})),d?.({nodes:m,edges:p}),_++,_>=u&&(window.clearInterval(this.timeInterval),n({nodes:m,edges:p}))},0),this.running=!0})})}formatOptions(e={}){let t=Object.assign(Object.assign({},this.options),e),{clustering:n,nodeClusterBy:r}=t,{center:i,width:a,height:o}=t;return t.width=!a&&typeof window<`u`?window.innerWidth:a,t.height=!o&&typeof window<`u`?window.innerHeight:o,t.center=i||[t.width/2,t.height/2],t.clustering=n&&!!r,t}runOneStep(e,t,n){let{dimensions:r,height:i,width:a,gravity:o,center:s,speed:c,clustering:l,nodeClusterBy:u,clusterGravity:d}=n,f=i*a,p=Math.sqrt(f)/10,m=e.getAllNodes(),h=f/(m.length+1),g=Math.sqrt(h),_={};if(this.applyCalculate(e,_,g,h),l){for(let e in t)t[e].cx=0,t[e].cy=0,t[e].count=0;for(let e in m.forEach(e=>{let{data:n}=e,r=t[n[u]];K(n.x)&&(r.cx+=n.x),K(n.y)&&(r.cy+=n.y),r.count++}),t)t[e].cx/=t[e].count,t[e].cy/=t[e].count;let e=d||o;m.forEach((n,r)=>{let{id:i,data:a}=n;if(!K(a.x)||!K(a.y))return;let o=t[a[u]],s=Math.sqrt((a.x-o.cx)*(a.x-o.cx)+(a.y-o.cy)*(a.y-o.cy)),c=g*e;_[i].x-=c*(a.x-o.cx)/s,_[i].y-=c*(a.y-o.cy)/s})}m.forEach((e,t)=>{let{id:n,data:i}=e;if(!K(i.x)||!K(i.y))return;let a=.01*g*o;_[n].x-=a*(i.x-s[0]),_[n].y-=a*(i.y-s[1]),r===3&&(_[n].z-=a*(i.z-s[2]))}),m.forEach((t,n)=>{let{id:i,data:a}=t;if(K(a.fx)&&K(a.fy)){a.x=a.fx,a.y=a.fy,r===3&&(a.z=a.fz);return}if(!K(a.x)||!K(a.y))return;let o=Math.sqrt(_[i].x*_[i].x+_[i].y*_[i].y+(r===3?_[i].z*_[i].z:0));if(o>0){let t=Math.min(p*(c/wQ),o);e.mergeNodeData(i,{x:a.x+_[i].x/o*t,y:a.y+_[i].y/o*t,z:r===3?a.z+_[i].z/o*t:void 0})}})}applyCalculate(e,t,n,r){this.calRepulsive(e,t,r),this.calAttractive(e,t,n)}calRepulsive(e,t,n){let r=e.getAllNodes();r.forEach(({data:e,id:i},a)=>{t[i]={x:0,y:0,z:0},r.forEach(({data:r,id:o},s)=>{if(a<=s||!K(e.x)||!K(r.x)||!K(e.y)||!K(r.y))return;let c=e.x-r.x,l=e.y-r.y,u=this.options.dimensions===3?e.z-r.z:0,d=c*c+l*l+u*u;d===0&&(d=1,c=.01,l=.01,u=.01);let f=n/d,p=c*f,m=l*f,h=u*f;t[i].x+=p,t[i].y+=m,t[o].x-=p,t[o].y-=m,this.options.dimensions===3&&(t[i].z+=h,t[o].z-=h)})})}calAttractive(e,t,n){e.getAllEdges().forEach(r=>{let{source:i,target:a}=r;if(!i||!a||i===a)return;let{data:o}=e.getNode(i),{data:s}=e.getNode(a);if(!K(s.x)||!K(o.x)||!K(s.y)||!K(o.y))return;let c=s.x-o.x,l=s.y-o.y,u=this.options.dimensions===3?s.z-o.z:0,d=Math.sqrt(c*c+l*l+u*u)/n,f=c*d,p=l*d,m=u*d;t[i].x+=f,t[i].y+=p,t[a].x-=f,t[a].y-=p,this.options.dimensions===3&&(t[i].z+=m,t[a].z-=m)})}},EQ={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:`degree`,nodeSize:30,width:300,height:300},DQ=class{constructor(e={}){this.options=e,this.id=`grid`,this.options=Object.assign(Object.assign({},EQ),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericGridLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,e,t)})}genericGridLayout(e,t,n){return En(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.options),n),{begin:i=[0,0],condense:a,preventOverlapPadding:o,preventOverlap:s,rows:c,cols:l,nodeSpacing:u,nodeSize:d,width:f,height:p,position:m}=r,{sortBy:h}=r,g=t.getAllNodes(),_=t.getAllEdges(),v=g?.length;if(!v||v===1)return _W(t,e,i);let y=g.map(e=>lW(e));h!==`id`&&(!_S(h)||y[0].data[h]===void 0)&&(h=`degree`),h===`degree`?y.sort((e,n)=>t.getDegree(n.id,`both`)-t.getDegree(e.id,`both`)):h===`id`?y.sort((e,t)=>K(t.id)&&K(e.id)?t.id-e.id:`${e.id}`.localeCompare(`${t.id}`)):y.sort((e,t)=>t.data[h]-e.data[h]);let b=!f&&typeof window<`u`?window.innerWidth:f,x=!p&&typeof window<`u`?window.innerHeight:p,S=v,C={rows:c,cols:l};if(c!=null&&l!=null)C.rows=c,C.cols=l;else if(c!=null&&l==null)C.rows=c,C.cols=Math.ceil(S/C.rows);else if(c==null&&l!=null)C.cols=l,C.rows=Math.ceil(S/C.cols);else{let e=Math.sqrt(S*x/b);C.rows=Math.round(e),C.cols=Math.round(b/x*e)}if(C.rows=Math.max(C.rows,1),C.cols=Math.max(C.cols,1),C.cols*C.rows>S){let e=OQ(C),t=kQ(C);(e-1)*t>=S?OQ(C,e-1):(t-1)*e>=S&&kQ(C,t-1)}else for(;C.cols*C.rows<S;){let e=OQ(C),t=kQ(C);(t+1)*e>=S?kQ(C,t+1):OQ(C,e+1)}let w=a?0:b/C.cols,T=a?0:x/C.rows;if(s||u){let e=dW(10,u),n=fW(30,d,!1);y.forEach(r=>{(!r.data.x||!r.data.y)&&(r.data.x=0,r.data.y=0);let i=t.getNode(r.id),[a,s]=uW(n(i)||30),c=e===void 0?o:e(r),l=a+c,u=s+c;w=Math.max(w,l),T=Math.max(T,u)})}let E={},D={row:0,col:0},O={};for(let e=0;e<y.length;e++){let n=y[e],r;if(m&&(r=m(t.getNode(n.id))),r&&(r.row!==void 0||r.col!==void 0)){let e={row:r.row,col:r.col};if(e.col===void 0)for(e.col=0;AQ(E,e);)e.col++;else if(e.row===void 0)for(e.row=0;AQ(E,e);)e.row++;O[n.id]=e,jQ(E,e)}NQ(n,i,w,T,O,C,D,E)}let k={nodes:y,edges:_};return e&&y.forEach(e=>{t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})}),k})}},OQ=(e,t)=>{let n,r=e.rows||5,i=e.cols||5;return t==null?n=Math.min(r,i):Math.min(r,i)===e.rows?e.rows=t:e.cols=t,n},kQ=(e,t)=>{let n,r=e.rows||5,i=e.cols||5;return t==null?n=Math.max(r,i):Math.max(r,i)===e.rows?e.rows=t:e.cols=t,n},AQ=(e,t)=>e[`c-${t.row}-${t.col}`]||!1,jQ=(e,t)=>e[`c-${t.row}-${t.col}`]=!0,MQ=(e,t)=>{let n=e.cols||5;t.col++,t.col>=n&&(t.col=0,t.row++)},NQ=(e,t,n,r,i,a,o,s)=>{let c,l,u=i[e.id];if(u)c=u.col*n+n/2+t[0],l=u.row*r+r/2+t[1];else{for(;AQ(s,o);)MQ(a,o);c=o.col*n+n/2+t[0],l=o.row*r+r/2+t[1],jQ(s,o),MQ(a,o)}e.data.x=c,e.data.y=l};const PQ=(e,t,n)=>{try{let n=WG.mul(WG.pow(t,2),-.5),r=n.mean(`row`),i=n.mean(`column`),a=n.mean();n.add(a).subRowVector(r).subColumnVector(i);let o=new GG(n),s=WG.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map(t=>WG.mul([t],[s]).toJSON()[0].splice(0,e))}catch{let e=[];for(let r=0;r<t.length;r++){let t=Math.random()*n,r=Math.random()*n;e.push([t,r])}return e}};var FQ=800,IQ={iterations:10,height:10,width:10,speed:100,gravity:10,k:5};const LQ=(e,t)=>{let{positions:n,iterations:r,width:i,k:a,speed:o=100,strictRadial:s,focusIdx:c,radii:l=[],nodeSizeFunc:u}=Object.assign(Object.assign({},IQ),t),d=e.getAllNodes(),f=[],p=i/10;for(let e=0;e<r;e++)n.forEach((e,t)=>{f[t]={x:0,y:0}}),RQ(d,n,f,a,l,u),zQ(n,f,o,s,c,p,i,l);return n};var RQ=(e,t,n,r,i,a)=>{t.forEach((o,s)=>{n[s]={x:0,y:0},t.forEach((t,c)=>{if(s===c||i[s]!==i[c])return;let l=o.x-t.x,u=o.y-t.y,d=Math.sqrt(l*l+u*u);if(d===0){d=1;let e=s>c?1:-1;l=.01*e,u=.01*e}if(d<a(e[s])/2+a(e[c])/2){let e=r*r/d;n[s].x+=l/d*e,n[s].y+=u/d*e}})})},zQ=(e,t,n,r,i,a,o,s)=>{let c=a||o/10;return r&&t.forEach((t,n)=>{let r=e[n].x-e[i].x,a=e[n].y-e[i].y,o=Math.sqrt(r*r+a*a),s=a/o,c=-r/o,l=Math.sqrt(t.x*t.x+t.y*t.y),u=Math.acos((s*t.x+c*t.y)/l);u>Math.PI/2&&(u-=Math.PI/2,s*=-1,c*=-1);let d=Math.cos(u)*l;t.x=s*d,t.y=c*d}),e.forEach((a,o)=>{if(o===i)return;let l=Math.sqrt(t[o].x*t[o].x+t[o].y*t[o].y);if(l>0&&o!==i){let u=Math.min(c*(n/FQ),l);if(a.x+=t[o].x/l*u,a.y+=t[o].y/l*u,r){let t=a.x-e[i].x,n=a.y-e[i].y,r=Math.sqrt(t*t+n*n);t=t/r*s[o],n=n/r*s[o],a.x=e[i].x+t,a.y=e[i].y+n}}}),e},BQ={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10},VQ=class{constructor(e={}){this.options=e,this.id=`radial`,this.options=Object.assign(Object.assign({},BQ),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,e,t)})}genericRadialLayout(e,t,n){return En(this,void 0,void 0,function*(){let{width:r,height:i,center:a,focusNode:o,unitRadius:s,nodeSize:c,nodeSpacing:l,strictRadial:u,preventOverlap:d,maxPreventOverlapIteration:f,sortBy:p,linkDistance:m=50,sortStrength:h=10,maxIteration:g=1e3}=Object.assign(Object.assign({},this.options),n),_=t.getAllNodes(),v=t.getAllEdges(),y=!r&&typeof window<`u`?window.innerWidth:r,b=!i&&typeof window<`u`?window.innerHeight:i,x=a||[y/2,b/2];if(!_?.length||_.length===1)return _W(t,e,x);let S=_[0];if(_S(o)){for(let e=0;e<_.length;e++)if(_[e].id===o){S=_[e];break}}else S=o||_[0];let C=WQ(_,S.id),w=rW({nodes:_,edges:v},!1),T=nW(w),E=KQ(T,C);GQ(T,C,E+1);let D=T[C],O=y-x[0]>x[0]?x[0]:y-x[0],k=b-x[1]>x[1]?x[1]:b-x[1];O===0&&(O=y/2),k===0&&(k=b/2);let A=Math.min(O,k),j=Math.max(...D),M=[],ee=s||A/j;D.forEach((e,t)=>{M[t]=e*ee});let N=HQ(_,T,m,M,ee,p,h),te=UQ(N),ne=PQ(m,N,m),re=ne.map(([e,t])=>({x:(isNaN(e)?Math.random()*m:e)-ne[C][0],y:(isNaN(t)?Math.random()*m:t)-ne[C][1]}));this.run(g,re,te,N,M,C);let P;if(d){P=pW(c,l);let e={nodes:_,nodeSizeFunc:P,positions:re,radii:M,height:b,width:y,strictRadial:!!u,focusIdx:C,iterations:f||200,k:re.length/4.5};re=LQ(t,e)}let F=[];return re.forEach((e,t)=>{let n=lW(_[t]);n.data.x=e.x+x[0],n.data.y=e.y+x[1],F.push(n)}),e&&F.forEach(e=>t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})),{nodes:F,edges:v}})}run(e,t,n,r,i,a){for(let o=0;o<=e;o++){let s=o/e;this.oneIteration(s,t,i,r,n,a)}}oneIteration(e,t,n,r,i,a){let o=1-e;t.forEach((s,c)=>{let l=oW(s,{x:0,y:0}),u=l===0?0:1/l;if(c===a)return;let d=0,f=0,p=0;t.forEach((e,t)=>{if(c===t)return;let n=oW(s,e),a=n===0?0:1/n,o=r[t][c];p+=i[c][t],d+=i[c][t]*(e.x+o*(s.x-e.x)*a),f+=i[c][t]*(e.y+o*(s.y-e.y)*a)});let m=n[c]===0?0:1/n[c];p*=o,p+=e*m*m,d*=o,d+=e*m*s.x*u,s.x=d/p,f*=o,f+=e*m*s.y*u,s.y=f/p})}},HQ=(e,t,n,r,i,a,o)=>{if(!e)return[];let s=[];if(t){let c={};t.forEach((t,l)=>{let u=[];t.forEach((t,s)=>{if(l===s)u.push(0);else if(r[l]===r[s])if(a===`data`)u.push(t*(Math.abs(l-s)*o)/(r[l]/i));else if(a){let n,d;if(c[e[l].id])n=c[e[l].id];else{let t=(a===`id`?e[l].id:e[l].data?.[a])||0;n=_S(t)?t.charCodeAt(0):t,c[e[l].id]=n}if(c[e[s].id])d=c[e[s].id];else{let t=(a===`id`?e[s].id:e[s].data?.[a])||0;d=_S(t)?t.charCodeAt(0):t,c[e[s].id]=d}u.push(t*(Math.abs(n-d)*o)/(r[l]/i))}else u.push(t*n/(r[l]/i));else{let e=(n+i)/2;u.push(t*e)}}),s.push(u)})}return s},UQ=e=>{let t=e.length,n=e[0].length,r=[];for(let i=0;i<t;i++){let t=[];for(let r=0;r<n;r++)e[i][r]===0?t.push(0):t.push(1/(e[i][r]*e[i][r]));r.push(t)}return r},WQ=(e,t)=>{let n=-1;return e.forEach((e,r)=>{e.id===t&&(n=r)}),Math.max(n,0)},GQ=(e,t,n)=>{let r=e.length;for(let i=0;i<r;i++)if(e[t][i]===1/0){e[t][i]=n,e[i][t]=n;for(let a=0;a<r;a++)e[i][a]!==1/0&&e[t][a]===1/0&&(e[t][a]=n+e[i][a],e[a][t]=n+e[i][a])}for(let n=0;n<r;n++)if(n!==t){for(let i=0;i<r;i++)if(e[n][i]===1/0){let r=Math.abs(e[t][n]-e[t][i]);r=r===0?1:r,e[n][i]=r}}},KQ=(e,t)=>{let n=0;for(let r=0;r<e[t].length;r++)e[t][r]!==1/0&&(n=e[t][r]>n?e[t][r]:n);return n},qQ={center:[0,0],width:300,height:300},JQ=class{constructor(e={}){this.options=e,this.id=`random`,this.options=Object.assign(Object.assign({},qQ),e)}execute(e,t){return En(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,e,t)})}assign(e,t){return En(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,e,t)})}genericRandomLayout(e,t,n){return En(this,void 0,void 0,function*(){let{center:r,width:i,height:a}=Object.assign(Object.assign({},this.options),n),o=t.getAllNodes(),s=.9,c=!i&&typeof window<`u`?window.innerWidth:i,l=!a&&typeof window<`u`?window.innerHeight:a,u=r||[c/2,l/2],d=[];return o&&o.forEach(e=>{d.push({id:e.id,data:{x:(Math.random()-.5)*s*c+u[0],y:(Math.random()-.5)*s*l+u[1]}})}),e&&d.forEach(e=>t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})),{nodes:d,edges:t.getAllEdges()}})}},YQ=Symbol(`Comlink.proxy`),XQ=Symbol(`Comlink.endpoint`),ZQ=Symbol(`Comlink.releaseProxy`),QQ=Symbol(`Comlink.finalizer`),$Q=Symbol(`Comlink.thrown`),e$=e=>typeof e==`object`&&!!e||typeof e==`function`,t$=new Map([[`proxy`,{canHandle:e=>e$(e)&&e[YQ],serialize(e){let{port1:t,port2:n}=new MessageChannel;return r$(e,t),[n,[n]]},deserialize(e){return e.start(),o$(e)}}],[`throw`,{canHandle:e=>e$(e)&&$Q in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(Error(e.value.message),e.value):e.value}}]]);function n$(e,t){for(let n of e)if(t===n||n===`*`||n instanceof RegExp&&n.test(t))return!0;return!1}function r$(e,t=globalThis,n=[`*`]){t.addEventListener(`message`,function r(i){if(!i||!i.data)return;if(!n$(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}let{id:a,type:o,path:s}=Object.assign({path:[]},i.data),c=(i.data.argumentList||[]).map(b$),l;try{let t=s.slice(0,-1).reduce((e,t)=>e[t],e),n=s.reduce((e,t)=>e[t],e);switch(o){case`GET`:l=n;break;case`SET`:t[s.slice(-1)[0]]=b$(i.data.value),l=!0;break;case`APPLY`:l=n.apply(t,c);break;case`CONSTRUCT`:{let e=new n(...c);l=v$(e)}break;case`ENDPOINT`:{let{port1:t,port2:n}=new MessageChannel;r$(e,n),l=_$(t,[t])}break;case`RELEASE`:l=void 0;break;default:return}}catch(e){l={value:e,[$Q]:0}}Promise.resolve(l).catch(e=>({value:e,[$Q]:0})).then(n=>{let[i,s]=y$(n);t.postMessage(Object.assign(Object.assign({},i),{id:a}),s),o===`RELEASE`&&(t.removeEventListener(`message`,r),a$(t),QQ in e&&typeof e[QQ]==`function`&&e[QQ]())}).catch(e=>{let[n,r]=y$({value:TypeError(`Unserializable return value`),[$Q]:0});t.postMessage(Object.assign(Object.assign({},n),{id:a}),r)})}),t.start&&t.start()}function i$(e){return e.constructor.name===`MessagePort`}function a$(e){i$(e)&&e.close()}function o$(e,t){let n=new Map;return e.addEventListener(`message`,function(e){let{data:t}=e;if(!t||!t.id)return;let r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}}),p$(e,n,[],t)}function s$(e){if(e)throw Error(`Proxy has been released and is not useable`)}function c$(e){return x$(e,new Map,{type:`RELEASE`}).then(()=>{a$(e)})}var l$=new WeakMap,u$=`FinalizationRegistry`in globalThis&&new FinalizationRegistry(e=>{let t=(l$.get(e)||0)-1;l$.set(e,t),t===0&&c$(e)});function d$(e,t){let n=(l$.get(t)||0)+1;l$.set(t,n),u$&&u$.register(e,t,e)}function f$(e){u$&&u$.unregister(e)}function p$(e,t,n=[],r=function(){}){let i=!1,a=new Proxy(r,{get(r,o){if(s$(i),o===ZQ)return()=>{f$(a),c$(e),t.clear(),i=!0};if(o===`then`){if(n.length===0)return{then:()=>a};let r=x$(e,t,{type:`GET`,path:n.map(e=>e.toString())}).then(b$);return r.then.bind(r)}return p$(e,t,[...n,o])},set(r,a,o){s$(i);let[s,c]=y$(o);return x$(e,t,{type:`SET`,path:[...n,a].map(e=>e.toString()),value:s},c).then(b$)},apply(r,a,o){s$(i);let s=n[n.length-1];if(s===XQ)return x$(e,t,{type:`ENDPOINT`}).then(b$);if(s===`bind`)return p$(e,t,n.slice(0,-1));let[c,l]=h$(o);return x$(e,t,{type:`APPLY`,path:n.map(e=>e.toString()),argumentList:c},l).then(b$)},construct(r,a){s$(i);let[o,s]=h$(a);return x$(e,t,{type:`CONSTRUCT`,path:n.map(e=>e.toString()),argumentList:o},s).then(b$)}});return d$(a,e),a}function m$(e){return Array.prototype.concat.apply([],e)}function h$(e){let t=e.map(y$);return[t.map(e=>e[0]),m$(t.map(e=>e[1]))]}var g$=new WeakMap;function _$(e,t){return g$.set(e,t),e}function v$(e){return Object.assign(e,{[YQ]:!0})}function y$(e){for(let[t,n]of t$)if(n.canHandle(e)){let[r,i]=n.serialize(e);return[{type:`HANDLER`,name:t,value:r},i]}return[{type:`RAW`,value:e},g$.get(e)||[]]}function b$(e){switch(e.type){case`HANDLER`:return t$.get(e.name).deserialize(e.value);case`RAW`:return e.value}}function x$(e,t,n,r){return new Promise(i=>{let a=S$();t.set(a,i),e.start&&e.start(),e.postMessage(Object.assign({id:a},n),r)})}function S$(){return[,,,,].fill(0).map(()=>Math.floor(Math.random()*(2**53-1)).toString(16)).join(`-`)}var C$=class extends XB{constructor(e,t,n){super(),this.graph=e,this.layout=t,this.options=n,this.spawnWorker()}spawnWorker(){this.proxy=o$(new Worker(new URL(`/dialog-editor/assets/worker-el3X_6lQ.js`,``+import.meta.url),{type:`module`})),this.running&&(this.running=!1,this.execute())}execute(){return En(this,void 0,void 0,function*(){if(this.running)return this;this.running=!0;let e=this.layout.options,{onTick:t}=e,n=Tn(e,[`onTick`]),r={};Object.keys(n).forEach(e=>{rS(n[e])||(r[e]=n[e])});let i={layout:{id:this.layout.id,options:r,iterations:this.options?.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},a=new Float32Array([0]),[o]=yield this.proxy.calculateLayout(i,[a]);return o})}stop(){return this.running=!1,this.proxy.stopLayout(),this}kill(){this.proxy[ZQ]()}isRunning(){return this.running}},w$=t(wV()),T$=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},E$=class e extends nV{constructor(){super(...arguments),this.id=`fishbone`}getRoot(){let e=this.context.model.getRootsData();if(!(rC(e)||e.length>2))return e[0]}formatSize(e){let t=typeof e==`function`?e:()=>e;return e=>jI(t(e))}doLayout(e,t){let{hGap:n,getRibSep:r,vGap:i,nodeSize:a,height:o}=t,{model:s}=this.context,c=this.formatSize(a),l=c(e)[0]+r(e),u=(e,t=0)=>{var r;return t+=n*((e.children||[]).length+1),(r=e.children)==null||r.forEach(e=>{var n;(n=s.getNodeLikeDatum(e).children)==null||n.forEach(e=>{let n=s.getNodeLikeDatum(e);t=u(n,t)})}),t},d=e=>{if(e.depth===1)return l;let t=s.getParentData(e.id,`tree`);if(k$(e)){let r=s.getParentData(t.id,`tree`),a=m(e)-m(r);return d(t)+a*n/i}else{let n=(t.children||[]).indexOf(e.id),r=s.getNodeData((t.children||[]).slice(n));return f(t)-r.reduce((e,t)=>e+u(t),0)-c(t)[0]/2}},f=XS(e=>{if(O$(e))return c(e)[0]/2;let t=s.getParentData(e.id,`tree`);if(k$(e))return d(e)+u(e)+c(e)[0]/2;{let r=m(e)-m(t),a=n/i;return d(e)+r*a}},e=>e.id),p=e=>m(s.getParentData(e,`tree`)),m=XS(e=>{if(O$(e))return o/2;if(k$(e)){let t=s.getParentData(e.id,`tree`),n=t.children.indexOf(e.id);if(n===0)return p(t.id)+i;let r=s.getNodeLikeDatum(t.children[n-1]);if(rC(r.children))return m(r)+i;let a=s.getDescendantsData(r.id);return Math.max(...a.map(e=>k$(e)?p(e.id):m(e)))+i}else{if(rC(e.children))return p(e.id)+i;let t=s.getNodeLikeDatum(e.children.slice(-1)[0]);if(rC(t.children))return m(t)+i;let n=s.getDescendantsData(e.id).slice(-1)[0];return(k$(n)?p(n.id):m(n))+i}},e=>e.id),h=0,g={nodes:[],edges:[]},_=e=>{var t;(t=e.children)==null||t.forEach(e=>_(s.getNodeLikeDatum(e)));let n=m(e),i=f(e);if(g.nodes.push({id:e.id,x:i,y:n}),O$(e))return;let a=s.getRelatedEdgesData(e.id,`in`)[0],o=[d(e),k$(e)?n:p(e.id)];g.edges.push({id:$(a),controlPoints:[o],relatedNodeId:e.id}),h=Math.max(h,i+r(e)),e.depth===1&&(l=h)};return _(e),g}placeAlterative(e,t){let n=(t.children||[]).filter((e,t)=>t%2!=0);if(n.length===0)return e;let{model:r}=this.context,i=e.nodes.find(e=>e.id===t.id).y,a=e=>{let t=r.getAncestorsData(e,`tree`);if(rC(t))return!1;let i=t.length===1?e:t[t.length-2].id;return n.includes(i)};e.nodes.forEach(e=>{a(e.id)&&(e.y=2*i-e.y)}),e.edges.forEach(e=>{a(e.relatedNodeId)&&(e.controlPoints=e.controlPoints.map(e=>[e[0],2*i-e[1]]))})}rightToLeft(e,t){return e.nodes.forEach(e=>e.x=t.width-e.x),e.edges.forEach(e=>{e.controlPoints=e.controlPoints.map(e=>[t.width-e[0],e[1]])}),e}execute(t,n){return T$(this,void 0,void 0,function*(){let r=Object.assign(Object.assign(Object.assign({},e.defaultOptions),this.options),n),{direction:i,nodeSize:a}=r,o=this.getRoot();if(!o)return t;let s=this.formatSize(a);r.vGap||=Math.max(...(t.nodes||[]).map(e=>s(e)[1])),r.hGap||=Math.max(...(t.nodes||[]).map(e=>s(e)[0]));let c=this.doLayout(o,r);this.placeAlterative(c,o),i===`RL`&&(c=this.rightToLeft(c,r));let{model:l}=this.context,u=[],d=[];return c.nodes.forEach(e=>{let{id:t,x:n,y:r}=e,i=l.getNodeLikeDatum(t);u.push(D$(i,{x:n,y:r}))}),c.edges.forEach(e=>{let{id:t,controlPoints:n}=e,r=l.getEdgeDatum(t);d.push(D$(r,{controlPoints:n}))}),{nodes:u,edges:d}})}};E$.defaultOptions={direction:`RL`,getRibSep:()=>60};var D$=(e,t)=>Object.assign(Object.assign({},e),{style:Object.assign(Object.assign({},e.style||{}),t)}),O$=e=>e.depth===0,k$=e=>(e.depth||=0)%2==0,A$=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},j$=class e extends nV{constructor(){super(...arguments),this.id=`snake`}formatSize(e,t){let n=typeof t==`function`?t:(()=>t);return e.reduce((e,t)=>{let[r,i]=jI(n(t))||[0,0];return[Math.max(e[0],r),Math.max(e[1],i)]},[0,0])}validate(e){let{nodes:t=[],edges:n=[]}=e,r={},i={},a={};t.forEach(e=>{r[e.id]=0,i[e.id]=0,a[e.id]=[]}),n.forEach(e=>{r[e.target]++,i[e.source]++,a[e.source].push(e.target)});let o=new Set,s=e=>{o.has(e)||(o.add(e),a[e].forEach(s))};if(s(t[0].id),o.size!==t.length)return!1;let c=t.filter(e=>r[e.id]===0),l=t.filter(e=>i[e.id]===0);return!(c.length!==1||l.length!==1||t.filter(e=>r[e.id]===1&&i[e.id]===1).length!==t.length-2)}execute(t,n){return A$(this,void 0,void 0,function*(){if(!this.validate(t))return t;let{nodeSize:r,padding:i,sortBy:a,cols:o,colGap:s,rowGap:c,clockwise:l,width:u,height:d}=Object.assign({},e.defaultOptions,this.options,n),[f,p,m,h]=iP(i),g=this.formatSize(t.nodes||[],r),_=Math.ceil((t.nodes||[]).length/o),v=s||(u-h-p-o*g[0])/(o-1),y=c||(d-f-m-_*g[1])/(_-1);return(y===1/0||y<0)&&(y=0),(v===1/0||v<0)&&(v=0),{nodes:((a?t.nodes?.sort(a):M$(t))||[]).map((e,t)=>{let n=Math.floor(t/o),r=t%o,i=l?n%2==0?r:o-1-r:n%2==0?o-1-r:r,a=h+i*(g[0]+v)+g[0]/2,s=f+n*(g[1]+y)+g[1]/2;return{id:e.id,style:{x:a,y:s}}})}})}};j$.defaultOptions={padding:0,cols:5,clockwise:!0};function M$(e){let{nodes:t=[],edges:n=[]}=e,r={},i={};t.forEach(e=>{r[e.id]=0,i[e.id]=[]}),n.forEach(e=>{r[e.target]++,i[e.source].push(e.target)});let a=[],o=[];for(t.forEach(e=>{r[e.id]===0&&a.push(e.id)});a.length>0;){let e=a.shift(),n=t.find(t=>t.id===e);o.push(n),i[e].forEach(e=>{r[e]--,r[e]===0&&a.push(e)})}return o}const N$=[`rgb(158, 1, 66)`,`rgb(213, 62, 79)`,`rgb(244, 109, 67)`,`rgb(253, 174, 97)`,`rgb(254, 224, 139)`,`rgb(255, 255, 191)`,`rgb(230, 245, 152)`,`rgb(171, 221, 164)`,`rgb(102, 194, 165)`,`rgb(50, 136, 189)`,`rgb(94, 79, 162)`],P$=[`rgb(78, 121, 167)`,`rgb(242, 142, 44)`,`rgb(225, 87, 89)`,`rgb(118, 183, 178)`,`rgb(89, 161, 79)`,`rgb(237, 201, 73)`,`rgb(175, 122, 161)`,`rgb(255, 157, 167)`,`rgb(156, 117, 95)`,`rgb(186, 176, 171)`],F$=[`rgb(255, 245, 235)`,`rgb(254, 230, 206)`,`rgb(253, 208, 162)`,`rgb(253, 174, 107)`,`rgb(253, 141, 60)`,`rgb(241, 105, 19)`,`rgb(217, 72, 1)`,`rgb(166, 54, 3)`,`rgb(127, 39, 4)`],I$=[`rgb(247, 252, 245)`,`rgb(229, 245, 224)`,`rgb(199, 233, 192)`,`rgb(161, 217, 155)`,`rgb(116, 196, 118)`,`rgb(65, 171, 93)`,`rgb(35, 139, 69)`,`rgb(0, 109, 44)`,`rgb(0, 68, 27)`],L$=[`rgb(247, 251, 255)`,`rgb(222, 235, 247)`,`rgb(198, 219, 239)`,`rgb(158, 202, 225)`,`rgb(107, 174, 214)`,`rgb(66, 146, 198)`,`rgb(33, 113, 181)`,`rgb(8, 81, 156)`,`rgb(8, 48, 107)`];var R$=class extends _F{};function z$(e,t=!0,n){let r=document.createElement(`div`);return r.setAttribute(`class`,`g6-${e}`),Object.assign(r.style,{position:`absolute`,display:`block`}),t&&Object.assign(r.style,{position:`unset`,gridArea:`1 / 1 / 2 / 2`,inset:`0px`,height:`100%`,width:`100%`,overflow:`hidden`,pointerEvents:`none`}),n&&Object.assign(r.style,n),r}function B$(e,t=`div`,n={},r=``,i=document.body){let a=document.getElementById(e);a&&a.remove();let o=document.createElement(t);return o.innerHTML=r,o.id=e,Object.assign(o.style,n),i.appendChild(o),o}var V$=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},H$=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.$element=z$(`background`),this.context.canvas.getContainer().prepend(this.$element),this.update(n)}update(e){let t=Object.create(null,{update:{get:()=>super.update}});return V$(this,void 0,void 0,function*(){t.update.call(this,e),Object.assign(this.$element.style,uC(this.options,[`key`,`type`]))})}destroy(){super.destroy(),this.$element.remove()}};H$.defaultOptions={transition:`background 0.5s`,backgroundSize:`cover`,zIndex:`-1`};function U$(e,t,n,r,i,a){let o=e,s=t,c=n-o,l=r-s,u=i-o,d=a-s,f=u*c+d*l,p=0;f<=0?p=0:(u=c-u,d=l-d,f=u*c+d*l,p=f<=0?0:f*f/(c*c+l*l));let m=u*u+d*d-p;return m<0?0:m}function W$(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)}function G$(e,t,n,r,i){return W$(e,t,n,r)<i*i}function K$(e){if(!Number.isFinite(e))return e=>e;if(e===0)return Math.round;let t=10**e;return e=>Math.round(e*t)/t}function q$(e){let t=Math.min(e.x1,e.x2),n=Math.max(e.x1,e.x2),r=Math.min(e.y1,e.y2),i=Math.max(e.y1,e.y2);return{x:t,y:r,x2:n,y2:i,width:n-t,height:i-r}}var J$=class e{constructor(e,t,n,r){this.x1=e,this.y1=t,this.x2=n,this.y2=r}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}draw(e){e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(t){return new e(t.x1,t.y1,t.x2,t.y2)}cuts(e,t){if(this.y1===this.y2||t<this.y1&&t<=this.y2||t>this.y1&&t>=this.y2||e>this.x1&&e>=this.x2)return!1;if(e<this.x1&&e<=this.x2)return!0;let n=this.x1+(t-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return e<=n}distSquare(e,t){return U$(this.x1,this.y1,this.x2,this.y2,e,t)}ptClose(e,t,n){if(this.x1<this.x2){if(e<this.x1-n||e>this.x2+n)return!1}else if(e<this.x2-n||e>this.x1+n)return!1;if(this.y1<this.y2){if(t<this.y1-n||t>this.y2+n)return!1}else if(t<this.y2-n||t>this.y1+n)return!1;return!0}},Y$;(function(e){e[e.POINT=1]=`POINT`,e[e.PARALLEL=2]=`PARALLEL`,e[e.COINCIDENT=3]=`COINCIDENT`,e[e.NONE=4]=`NONE`})(Y$||={});var X$=class{constructor(e,t=0,n=0){this.state=e,this.x=t,this.y=n}};function Z$(e,t){let n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),r=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),i=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(i){let t=n/i,a=r/i;return 0<=t&&t<=1&&0<=a&&a<=1?new X$(Y$.POINT,e.x1+t*(e.x2-e.x1),e.y1+t*(e.y2-e.y1)):new X$(Y$.NONE)}return new X$(n===0||r===0?Y$.COINCIDENT:Y$.PARALLEL)}function Q$(e,t){let n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),r=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),i=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(i){let e=n/i,t=r/i;if(0<=e&&e<=1&&0<=t&&t<=1)return e}return 1/0}function $$(e,t){function n(e,n,r,i){let a=Q$(t,new J$(e,n,r,i));return a=Math.abs(a-.5),a>=0&&a<=1?1:0}let r=n(e.x,e.y,e.x2,e.y);return r+=n(e.x,e.y,e.x,e.y2),r>1||(r+=n(e.x,e.y2,e.x2,e.y2),r>1)?!0:(r+=n(e.x2,e.y,e.x2,e.y2),r>0)}var e1;(function(e){e[e.LEFT=0]=`LEFT`,e[e.TOP=1]=`TOP`,e[e.RIGHT=2]=`RIGHT`,e[e.BOTTOM=3]=`BOTTOM`})(e1||={});function t1(e,t,n){let r=new Set;return e.width<=0?(r.add(e1.LEFT),r.add(e1.RIGHT)):t<e.x?r.add(e1.LEFT):t>e.x+e.width&&r.add(e1.RIGHT),e.height<=0?(r.add(e1.TOP),r.add(e1.BOTTOM)):n<e.y?r.add(e1.TOP):n>e.y+e.height&&r.add(e1.BOTTOM),r}function n1(e,t){let n=t.x1,r=t.y1,i=t.x2,a=t.y2,o=Array.from(t1(e,i,a));if(o.length===0)return!0;let s=t1(e,n,r);for(;s.size!==0;){for(let e of o)if(s.has(e))return!1;if(s.has(e1.RIGHT)||s.has(e1.LEFT)){let t=e.x;s.has(e1.RIGHT)&&(t+=e.width),r+=(t-n)*(a-r)/(i-n),n=t}else{let t=e.y;s.has(e1.BOTTOM)&&(t+=e.height),n+=(t-r)*(i-n)/(a-r),r=t}s=t1(e,n,r)}return!0}function r1(e,t){let n=1/0,r=0;function i(e,i,a,o){let s=Q$(t,new J$(e,i,a,o));s=Math.abs(s-.5),s>=0&&s<=1&&(r++,s<n&&(n=s))}return i(e.x,e.y,e.x2,e.y),i(e.x,e.y,e.x,e.y2),r>1||(i(e.x,e.y2,e.x2,e.y2),r>1)?n:(i(e.x2,e.y,e.x2,e.y2),r===0?-1:n)}function i1(e,t){let n=0,r=Z$(e,new J$(t.x,t.y,t.x2,t.y));n+=r.state===Y$.POINT?1:0;let i=Z$(e,new J$(t.x,t.y,t.x,t.y2));n+=i.state===Y$.POINT?1:0;let a=Z$(e,new J$(t.x,t.y2,t.x2,t.y2));n+=a.state===Y$.POINT?1:0;let o=Z$(e,new J$(t.x2,t.y,t.x2,t.y2));return n+=o.state===Y$.POINT?1:0,{top:r,left:i,bottom:a,right:o,count:n}}var a1=class e{constructor(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(t){return new e(t.x,t.y,t.width,t.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}clone(){return new e(this.x,this.y,this.width,this.height)}add(e){let t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x2,e.x+e.width),i=Math.max(this.y2,e.y+e.height);this.x=t,this.y=n,this.width=r-t,this.height=i-n}addPoint(e){let t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x2,e.x),i=Math.max(this.y2,e.y);this.x=t,this.y=n,this.width=r-t,this.height=i-n}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(e){e.rect(this.x,this.y,this.width,this.height)}containsPt(e,t){return e>=this.x&&e<=this.x2&&t>=this.y&&t<=this.y2}get area(){return this.width*this.height}intersects(e){return this.area<=0||e.width<=0||e.height<=0?!1:e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x2&&e.y<this.y2}distSquare(e,t){if(this.containsPt(e,t))return 0;let n=t1(this,e,t);return n.has(e1.TOP)?n.has(e1.LEFT)?W$(e,t,this.x,this.y):n.has(e1.RIGHT)?W$(e,t,this.x2,this.y):(this.y-t)*(this.y-t):n.has(e1.BOTTOM)?n.has(e1.LEFT)?W$(e,t,this.x,this.y2):n.has(e1.RIGHT)?W$(e,t,this.x2,this.y2):(t-this.y2)*(t-this.y2):n.has(e1.LEFT)?(this.x-e)*(this.x-e):n.has(e1.RIGHT)?(e-this.x2)*(e-this.x2):0}};function o1(e){if(e.length===0)return null;let t=e[0],n=new a1(t.x,t.y,0,0);for(let t of e)n.addPoint(t);return n}var s1=class e{constructor(e,t,n){this.cx=e,this.cy=t,this.radius=n}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return this.radius*2}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return this.radius*2}static from(t){return new e(t.cx,t.cy,t.radius)}containsPt(e,t){return W$(this.cx,this.cy,e,t)<this.radius*this.radius}distSquare(e,t){let n=W$(this.cx,this.cy,e,t);if(n<this.radius*this.radius)return 0;let r=Math.sqrt(n)-this.radius;return r*r}draw(e){e.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,Math.PI*2)}},c1=class e{constructor(e,t=0,n=0,r=0,i=0,a=10,o=10,s=new Float32Array(Math.max(0,a*o)).fill(0)){this.pixelGroup=e,this.i=t,this.j=n,this.pixelX=r,this.pixelY=i,this.width=a,this.height=o,this.area=s}createSub(t,n){return new e(this.pixelGroup,t.x,t.y,n.x,n.y,t.width,t.height)}static fromPixelRegion(t,n){return new e(n,0,0,t.x,t.y,Math.ceil(t.width/n),Math.ceil(t.height/n))}copy(t,n){return new e(this.pixelGroup,this.scaleX(n.x),this.scaleY(n.y),n.x,n.y,t.width,t.height,t.area)}boundX(e){return e<this.i?this.i:e>=this.width?this.width-1:e}boundY(e){return e<this.j?this.j:e>=this.height?this.height-1:e}scaleX(e){return this.boundX(Math.floor((e-this.pixelX)/this.pixelGroup))}scaleY(e){return this.boundY(Math.floor((e-this.pixelY)/this.pixelGroup))}scale(e){let t=this.scaleX(e.x),n=this.scaleY(e.y),r=this.boundX(Math.ceil((e.x+e.width-this.pixelX)/this.pixelGroup)),i=this.boundY(Math.ceil((e.y+e.height-this.pixelY)/this.pixelGroup)),a=r-t,o=i-n;return new a1(t,n,a,o)}invertScaleX(e){return Math.round(e*this.pixelGroup+this.pixelX)}invertScaleY(e){return Math.round(e*this.pixelGroup+this.pixelY)}addPadding(e,t){let n=Math.ceil(t/this.pixelGroup),r=this.boundX(e.x-n),i=this.boundY(e.y-n),a=this.boundX(e.x2+n),o=this.boundY(e.y2+n),s=a-r,c=o-i;return new a1(r,i,s,c)}get(e,t){return e<0||t<0||e>=this.width||t>=this.height?NaN:this.area[e+t*this.width]}inc(e,t,n){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]+=n)}set(e,t,n){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]=n)}incArea(e,t){if(e.width<=0||e.height<=0||t===0)return;let n=this.width,r=e.width,i=Math.max(0,e.i),a=Math.max(0,e.j),o=Math.min(e.i+e.width,n),s=Math.min(e.j+e.height,this.height);if(!(s<=0||o<=0||i>=n||s>=this.height))for(let c=a;c<s;c++){let a=(c-e.j)*r,s=c*n;for(let n=i;n<o;n++){let r=e.area[n-e.i+a];r!==0&&(this.area[n+s]+=t*r)}}}fill(e){this.area.fill(e)}fillArea(e,t){let n=e.x+e.y*this.width;for(let r=0;r<e.height;r++){let i=n+r*this.width;this.area.fill(t,i,i+e.width)}}fillHorizontalLine(e,t,n,r){let i=e+t*this.width;this.area.fill(r,i,i+n)}fillVerticalLine(e,t,n,r){let i=e+t*this.width;for(let e=0;e<n;e++)this.area[i+e*this.width]=r}clear(){this.area.fill(0)}toString(){let e=``;for(let t=0;t<this.height;t++){let n=t*this.width;for(let t=0;t<this.width;t++){let r=this.area[n+t];e+=r.toFixed(1).padStart(6),e+=` `}e+=`
`}return e}draw(e,t=!0){if(this.width<=0||this.height<=0)return;e.save(),t&&e.translate(this.pixelX,this.pixelY);let n=this.area.reduce((e,t)=>Math.min(e,t),1/0),r=this.area.reduce((e,t)=>Math.max(e,t),-1/0),i=e=>(e-n)/(r-n);e.scale(this.pixelGroup,this.pixelGroup);for(let t=0;t<this.width;t++)for(let n=0;n<this.height;n++){let r=this.area[t+n*this.width];e.fillStyle=`rgba(0, 0, 0, ${i(r)})`,e.fillRect(t,n,1,1)}e.restore()}drawThreshold(e,t,n=!0){if(!(this.width<=0||this.height<=0)){e.save(),n&&e.translate(this.pixelX,this.pixelY),e.scale(this.pixelGroup,this.pixelGroup);for(let n=0;n<this.width;n++)for(let r=0;r<this.height;r++)e.fillStyle=this.area[n+r*this.width]>t?`black`:`white`,e.fillRect(n,r,1,1);e.restore()}}};function l1(e,t){let n=e=>({x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t});return Array.isArray(e)?e.map(n):n(e)}function u1(e,t,n){return d1(Object.assign(q$(e),{distSquare:(t,n)=>U$(e.x1,e.y1,e.x2,e.y2,t,n)}),t,n)}function d1(e,t,n){let r=l1(e,n),i=t.scale(r),a=t.createSub(i,r);return f1(a,t,n,(t,n)=>e.distSquare(t,n)),a}function f1(e,t,n,r){let i=n*n;for(let a=0;a<e.height;a++)for(let o=0;o<e.width;o++){let s=t.invertScaleX(e.i+o),c=t.invertScaleY(e.j+a),l=r(s,c);if(l===0){e.set(o,a,i);continue}if(l<i){let t=n-Math.sqrt(l);e.set(o,a,t*t)}}return e}function p1(e,t,n){let r=t.scale(e),i=t.addPadding(r,n),a=t.createSub(i,{x:e.x-n,y:e.y-n}),o=r.x-i.x,s=r.y-i.y,c=i.x2-r.x2,l=i.y2-r.y2,u=i.width-o-c,d=i.height-s-l,f=n*n;a.fillArea({x:o,y:s,width:u+1,height:d+1},f);let p=[0],m=Math.max(s,o,c,l);{let i=t.invertScaleX(r.x+r.width/2);for(let a=1;a<m;a++){let o=t.invertScaleY(r.y-a),s=e.distSquare(i,o);if(s<f){let e=n-Math.sqrt(s);p.push(e*e)}else break}}let h=[],g=Math.max(o,c),_=Math.max(s,c);for(let i=1;i<g;i++){let a=t.invertScaleX(r.x-i),o=[];for(let i=1;i<_;i++){let s=t.invertScaleY(r.y-i),c=e.distSquare(a,s);if(c<f){let e=n-Math.sqrt(c);o.push(e*e)}else o.push(0)}h.push(o)}for(let e=1;e<Math.min(s,p.length);e++){let t=p[e];a.fillHorizontalLine(o,s-e,u+1,t)}for(let e=1;e<Math.min(l,p.length);e++){let t=p[e];a.fillHorizontalLine(o,s+d+e,u+1,t)}for(let e=1;e<Math.min(o,p.length);e++){let t=p[e];a.fillVerticalLine(o-e,s,d+1,t)}for(let e=1;e<Math.min(l,p.length);e++){let t=p[e];a.fillVerticalLine(o+u+e,s,d+1,t)}for(let e=1;e<o;e++){let t=h[e-1],n=o-e;for(let e=1;e<s;e++)a.set(n,s-e,t[e-1]);for(let e=1;e<l;e++)a.set(n,s+d+e,t[e-1])}for(let e=1;e<c;e++){let t=h[e-1],n=o+u+e;for(let e=1;e<s;e++)a.set(n,s-e,t[e-1]);for(let e=1;e<l;e++)a.set(n,s+d+e,t[e-1])}return a}function m1(e,t){return{x:e,y:t}}function h1(e,t,n,r){if(e.length===0)return[];let i=b1(e);return i.map((e,a)=>{let o=i.slice(0,a);return g1(t,e,o,n,r)}).flat()}function g1(e,t,n,r,i){let a=m1(t.cx,t.cy),o=y1(a,n,e);if(o==null)return[];let s=new J$(a.x,a.y,o.cx,o.cy),c=_1(s,e,r,i);return v1(c,e)}function _1(e,t,n,r){let i=[],a=[];a.push(e);let o=!0;for(let e=0;e<n&&o;e++)for(o=!1;!o&&a.length>0;){let e=a.pop(),n=C1(t,e),s=n?i1(e,n):null;if(!n||!s||s.count!==2){o||i.push(e);continue}let c=r,l=T1(n,c,s,!0),u=S1(l,a)||S1(l,i),d=x1(l,t);for(;!u&&d&&c>=1;)c/=1.5,l=T1(n,c,s,!0),u=S1(l,a)||S1(l,i),d=x1(l,t);if(l&&!u&&!d&&(a.push(new J$(e.x1,e.y1,l.x,l.y)),a.push(new J$(l.x,l.y,e.x2,e.y2)),o=!0),o)continue;c=r,l=T1(n,c,s,!1);let f=S1(l,a)||S1(l,i);for(d=x1(l,t);!f&&d&&c>=1;)c/=1.5,l=T1(n,c,s,!1),f=S1(l,a)||S1(l,i),d=x1(l,t);l&&!f&&(a.push(new J$(e.x1,e.y1,l.x,l.y)),a.push(new J$(l.x,l.y,e.x2,e.y2)),o=!0),o||i.push(e)}for(;a.length>0;)i.push(a.pop());return i}function v1(e,t){let n=[];for(;e.length>0;){let r=e.pop();if(e.length===0){n.push(r);break}let i=e.pop(),a=new J$(r.x1,r.y1,i.x2,i.y2);C1(t,a)?(n.push(r),e.push(i)):e.push(a)}return n}function y1(e,t,n){let r=1/0;return t.reduce((t,i)=>{let a=W$(e.x,e.y,i.cx,i.cy);if(a>r)return t;let o=new J$(e.x,e.y,i.cx,i.cy),s=w1(n,o);return a*(s+1)*(s+1)<r&&(t=i,r=a*(s+1)*(s+1)),t},null)}function b1(e){if(e.length<2)return e;let t=0,n=0;return e.forEach(e=>{t+=e.cx,n+=e.cy}),t/=e.length,n/=e.length,e.map(e=>{let r=t-e.cx,i=n-e.cy,a=r*r+i*i;return[e,a]}).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function x1(e,t){return t.some(t=>t.containsPt(e.x,e.y))}function S1(e,t){return t.some(t=>!!(G$(t.x1,t.y1,e.x,e.y,.001)||G$(t.x2,t.y2,e.x,e.y,.001)))}function C1(e,t){let n=1/0,r=null;for(let i of e){if(!n1(i,t))continue;let e=r1(i,t);e>=0&&e<n&&(r=i,n=e)}return r}function w1(e,t){return e.reduce((e,n)=>n1(n,t)&&$$(n,t)?e+1:e,0)}function T1(e,t,n,r){let i=n.top,a=n.left,o=n.bottom,s=n.right;if(r){if(a.state===Y$.POINT){if(i.state===Y$.POINT)return m1(e.x-t,e.y-t);if(o.state===Y$.POINT)return m1(e.x-t,e.y2+t);let n=e.width*e.height;return e.width*((a.y-e.y+(s.y-e.y))*.5)<n*.5?a.y>s.y?m1(e.x-t,e.y-t):m1(e.x2+t,e.y-t):a.y<s.y?m1(e.x-t,e.y2+t):m1(e.x2+t,e.y2+t)}if(s.state===Y$.POINT){if(i.state===Y$.POINT)return m1(e.x2+t,e.y-t);if(o.state===Y$.POINT)return m1(e.x2+t,e.y2+t)}let n=e.height*e.width;return e.height*((i.x-e.x+(s.x-e.x))*.5)<n*.5?i.x>o.x?m1(e.x-t,e.y-t):m1(e.x-t,e.y2+t):i.x<o.x?m1(e.x2+t,e.y-t):m1(e.x2+t,e.y2+t)}if(a.state===Y$.POINT){if(i.state===Y$.POINT)return m1(e.x2+t,e.y2+t);if(o.state===Y$.POINT)return m1(e.x2+t,e.y-t);let n=e.height*e.width;return e.width*((a.y-e.y+(s.y-e.y))*.5)<n*.5?a.y>s.y?m1(e.x2+t,e.y2+t):m1(e.x-t,e.y2+t):a.y<s.y?m1(e.x2+t,e.y-t):m1(e.x-t,e.y-t)}if(s.state===Y$.POINT){if(i.state===Y$.POINT)return m1(e.x-t,e.y2+t);if(o.state===Y$.POINT)return m1(e.x-t,e.y-t)}let c=e.height*e.width;return e.height*((i.x-e.x+(s.x-e.x))*.5)<c*.5?i.x>o.x?m1(e.x2+t,e.y2+t):m1(e.x2+t,e.y-t):i.x<o.x?m1(e.x-t,e.y2+t):m1(e.x-t,e.y-t)}function E1(e,t,n,r){if(!(e.closed?n<e.length:n<e.length-1))return!1;let i=e.get(t),a=e.get(n+1);for(let o=t+1;o<=n;o++){let t=e.get(o);if(U$(i.x,i.y,a.x,a.y,t.x,t.y)>r)return!1}return!0}function D1(e=0){return t=>{if(e<0||t.length<3)return t;let n=[],r=0,i=e*e;for(;r<t.length;){let e=r+1;for(;E1(t,r,e,i);)e++;n.push(t.get(r)),r=e}return new j1(n)}}function O1(e,t){switch(e){case-2:return(((-t+3)*t-3)*t+1)/6;case-1:return((3*t-6)*t*t+4)/6;case 0:return(((-3*t+3)*t+3)*t+1)/6;case 1:return t*t*t/6;default:throw Error(`unknown error`)}}function k1(e=6){function t(e,t,n){let r=0,i=0;for(let a=-2;a<=1;a++){let o=e.get(t+a),s=O1(a,n);r+=s*o.x,i+=s*o.y}return{x:r,y:i}}return n=>{if(n.length<3)return n;let r=[],i=n.closed,a=n.length+3-1+(i?0:2);r.push(t(n,2-(i?0:2),0));for(let o=2-(i?0:2);o<a;o++)for(let i=1;i<=e;i++)r.push(t(n,o,i/e));return new j1(r)}}function A1(e=8){return t=>{let n=e,r=t.length;if(n>1)for(r=Math.floor(t.length/n);r<3&&n>1;)--n,r=Math.floor(t.length/n);let i=[];for(let e=0,a=0;a<r;a++,e+=n)i.push(t.get(e));return new j1(i)}}var j1=class{constructor(e=[],t=!0){this.points=e,this.closed=t}get(e){let t=e,n=this.points.length;return e<0?this.closed?this.get(e+n):this.points[0]:e>=n?this.closed?this.get(e-n):this.points[n-1]:this.points[t]}get length(){return this.points.length}toString(e=1/0){let t=this.points;if(t.length===0)return``;let n=typeof e==`function`?e:K$(e),r=`M`;for(let e of t)r+=`${n(e.x)},${n(e.y)} L`;return r=r.slice(0,-1),this.closed&&(r+=` Z`),r}draw(e){let t=this.points;if(t.length!==0){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let n of t)e.lineTo(n.x,n.y);this.closed&&e.closePath()}}sample(e){return A1(e)(this)}simplify(e){return D1(e)(this)}bSplines(e){return k1(e)(this)}apply(e){return e(this)}containsElements(e){let t=o1(this.points);return t?e.every(e=>t.containsPt(e.cx,e.cy)&&this.withinArea(e.cx,e.cy)):!1}withinArea(e,t){if(this.length===0)return!1;let n=0,r=this.points[0],i=new J$(r.x,r.y,r.x,r.y);for(let r=1;r<this.points.length;r++){let a=this.points[r];i.x1=i.x2,i.y1=i.y2,i.x2=a.x,i.y2=a.y,i.cuts(e,t)&&n++}return i.x1=i.x2,i.y1=i.y2,i.x2=r.x,i.y2=r.y,i.cuts(e,t)&&n++,n%2==1}},M1=class{constructor(e=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=e}add(e){this.set.add(`${e.x}x${e.y}`),this.arr[this.count++]=e}contains(e){return this.set.has(`${e.x}x${e.y}`)}isFirst(e){if(this.count===0)return!1;let t=this.arr[0];return t!=null&&t.x===e.x&&t.y===e.y}path(){return new j1(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(e){return this.arr[e]}get length(){return this.count}},N1=0,P1=1,F1=2,I1=3;function L1(e,t){let n=(Math.floor(e.width)+Math.floor(e.height))*2,r=new M1(n);function i(n,r,i,a){let o=e.get(n,r);return Number.isNaN(o)?NaN:o>t?i+a:i}function a(e,t){let n=N1;return n=i(e,t,n,1),n=i(e+1,t,n,2),n=i(e,t+1,n,4),n=i(e+1,t+1,n,8),Number.isNaN(n)?-1:n}let o=P1;function s(t,n){let i=t,s=n,c=e.invertScaleX(i),l=e.invertScaleY(s);for(let t=0;t<e.width*e.height;t++){let t={x:c,y:l};if(r.contains(t)){if(r.isFirst(t))return!0}else r.add(t);let n=a(i,s);switch(n){case-1:return!0;case 0:case 3:case 2:case 7:o=F1;break;case 12:case 14:case 4:o=I1;break;case 6:o=o===N1?I1:F1;break;case 1:case 13:case 5:o=N1;break;case 9:o=o===F1?N1:P1;break;case 10:case 8:case 11:o=P1;break;default:return console.warn(`Marching squares invalid state: `+n),!0}switch(o){case N1:s--,l-=e.pixelGroup;break;case P1:s++,l+=e.pixelGroup;break;case I1:i--,c-=e.pixelGroup;break;case F1:i++,c+=e.pixelGroup;break;default:return console.warn(`Marching squares invalid state: `+n),!0}}return!0}for(let n=0;n<e.width;n++)for(let i=0;i<e.height;i++){if(e.get(n,i)<=t)continue;let o=a(n,i);if(!(o<0||o===15)&&s(n,i))return r.path()}return null}var R1={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function z1(e){return e!=null&&typeof e.radius==`number`}function B1(e,t){if(z1(e)!==z1(t))return!1;if(z1(e)){let n=t;return e.cx===n.cx&&e.cy===n.cy&&e.radius===n.radius}let n=t;return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}var V1;(function(e){e[e.MEMBERS=0]=`MEMBERS`,e[e.NON_MEMBERS=1]=`NON_MEMBERS`,e[e.EDGES=2]=`EDGES`})(V1||={});var H1=class{constructor(e={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new a1(0,0,0,0),this.potentialArea=new c1(1,0,0,0,0,0,0),this.o=Object.assign({},R1,e)}pushMember(...e){if(e.length!==0){this.dirty.add(V1.MEMBERS);for(let t of e)this.members.push({raw:t,obj:z1(t)?s1.from(t):a1.from(t),area:null})}}removeMember(e){let t=this.members.findIndex(t=>B1(t.raw,e));return t<0?!1:(this.members.splice(t,1),this.dirty.add(V1.MEMBERS),!0)}removeNonMember(e){let t=this.nonMembers.findIndex(t=>B1(t.raw,e));return t<0?!1:(this.nonMembers.splice(t,1),this.dirty.add(V1.NON_MEMBERS),!0)}removeEdge(e){let t=this.edges.findIndex(t=>t.obj.equals(e));return t<0?!1:(this.edges.splice(t,1),this.dirty.add(V1.NON_MEMBERS),!0)}pushNonMember(...e){if(e.length!==0){this.dirty.add(V1.NON_MEMBERS);for(let t of e)this.nonMembers.push({raw:t,obj:z1(t)?s1.from(t):a1.from(t),area:null})}}pushEdge(...e){if(e.length!==0){this.dirty.add(V1.EDGES);for(let t of e)this.edges.push({raw:t,obj:J$.from(t),area:null})}}update(){let e=this.dirty.has(V1.MEMBERS),t=this.dirty.has(V1.NON_MEMBERS),n=this.dirty.has(V1.EDGES);this.dirty.clear();let r=this.members.map(e=>e.obj);if(this.o.virtualEdges&&(e||t)){let e=this.nonMembers.map(e=>e.obj),t=h1(r,e,this.o.maxRoutingIterations,this.o.morphBuffer),i=new Map(this.virtualEdges.map(e=>[e.obj.toString(),e.area]));this.virtualEdges=t.map(e=>({raw:e,obj:e,area:i.get(e.toString())??null})),n=!0}let i=!1;if(e||n){let e=this.virtualEdges.concat(this.edges).map(e=>e.obj),t=W1(r,e),n=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,a=a1.from(l1(t,n));a.equals(this.activeRegion)||(i=!0,this.activeRegion=a)}if(i){let e=Math.ceil(this.activeRegion.width/this.o.pixelGroup),t=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=c1.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(e=>e.area=null),this.nonMembers.forEach(e=>e.area=null),this.edges.forEach(e=>e.area=null),this.virtualEdges.forEach(e=>e.area=null)):(e!==this.potentialArea.width||t!==this.potentialArea.height)&&(this.potentialArea=c1.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}let a=new Map,o=e=>{if(e.area){let t=`${e.obj.width}x${e.obj.height}x${e.obj instanceof a1?`R`:`C`}`;a.set(t,e.area)}},s=e=>{if(e.area)return;let t=`${e.obj.width}x${e.obj.height}x${e.obj instanceof a1?`R`:`C`}`;if(a.has(t)){let n=a.get(t);e.area=this.potentialArea.copy(n,{x:e.obj.x-this.o.nodeR1,y:e.obj.y-this.o.nodeR1});return}let n=e.obj instanceof a1?p1(e.obj,this.potentialArea,this.o.nodeR1):d1(e.obj,this.potentialArea,this.o.nodeR1);e.area=n,a.set(t,n)};this.members.forEach(o),this.nonMembers.forEach(o),this.members.forEach(s),this.nonMembers.forEach(e=>{this.activeRegion.intersects(e.obj)?s(e):e.area=null}),this.edges.forEach(e=>{e.area||=u1(e.obj,this.potentialArea,this.o.edgeR1)}),this.virtualEdges.forEach(e=>{e.area||=u1(e.obj,this.potentialArea,this.o.edgeR1)})}drawMembers(e){for(let t of this.members)t.obj.draw(e)}drawNonMembers(e){for(let t of this.nonMembers)t.obj.draw(e)}drawEdges(e){for(let t of this.edges)t.obj.draw(e)}drawPotentialArea(e,t=!0){this.potentialArea.draw(e,t)}compute(){if(this.members.length===0)return new j1([]);this.dirty.size>0&&this.update();let{o:e,potentialArea:t}=this,n=this.members.map(e=>e.area),r=this.virtualEdges.concat(this.edges).map(e=>e.area),i=this.nonMembers.filter(e=>e.area!=null).map(e=>e.area),a=this.members.map(e=>e.obj);return U1(t,n,r,i,e=>e.containsElements(a),e)}};function U1(e,t,n,r,i,a={}){let o=Object.assign({},R1,a),s=o.threshold,c=o.memberInfluenceFactor,l=o.edgeInfluenceFactor,u=o.nonMemberInfluenceFactor,d=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),f=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1);for(let a=0;a<o.maxMarchingIterations;a++){if(e.clear(),c!==0){let n=c/d;for(let r of t)e.incArea(r,n)}if(l!==0){let t=l/f;for(let r of n)e.incArea(r,t)}if(u!==0){let t=u/d;for(let n of r)e.incArea(n,t)}let p=L1(e,s);if(p&&i(p))return p;if(s*=.95,a<=o.maxMarchingIterations*.5)c*=1.2,l*=1.2;else if(u!==0&&r.length>0)u*=.8;else break}return new j1([])}function W1(e,t){if(e.length===0)return new a1(0,0,0,0);let n=a1.from(e[0]);for(let t of e)n.add(t);for(let e of t)n.add(q$(e));return n}var G1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},K1=class e extends R${constructor(t,n){super(t,eC({},e.defaultOptions,n)),this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{let{style:e,bubbleSetOptions:t}=this.parseOptions();aC(this.bubbleSetOptions,t)||this.init(),this.bubbleSetOptions=Object.assign({},t);let n=Object.assign(Object.assign({},e),{d:this.getPath()});this.shape?this.shape.update(n):(this.shape=new nL({style:n}),this.context.canvas.appendChild(this.shape))},this.updateBubbleSetsPath=e=>{if(!this.shape)return;let t=$(e.data);[...this.options.members,...this.options.avoidMembers].includes(t)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(t)}))},this.getPath=e=>{let{graph:t}=this.context,n=this.options.members,r=[...this.members.keys()],i=this.options.avoidMembers,a=[...this.avoidMembers.keys()];if(!e&&aC(n,r)&&aC(i,a))return this.path;let{enter:o=[],exit:s=[]}=pF(r,n,e=>e),{enter:c=[],exit:l=[]}=pF(a,i,e=>e);e&&(s.push(e),o.push(e));let u=(e,n,r)=>{e.forEach(e=>{let i=r?this.members:this.avoidMembers,a=r?`pushMember`:`pushNonMember`,o=r?`removeMember`:`removeNonMember`;if(n){let n;t.getElementType(e)===`edge`?([n]=J1(t,e),this.bubbleSets.pushEdge(n)):([n]=q1(t,e),this.bubbleSets[a](n)),i.set(e,n)}else{let n=i.get(e);n&&(t.getElementType(e)===`edge`?this.bubbleSets.removeEdge(n):this.bubbleSets[o](n),i.delete(e))}})};u(s,!1,!0),u(o,!0,!0),u(l,!1,!1),u(c,!0,!1);let d=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=$I(d.points.map(WF)),this.path},this.bindEvents(),this.bubbleSets=new H1(this.options)}bindEvents(){this.context.graph.on(Q.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(Q.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}init(){this.bubbleSets=new H1(this.options),this.members=new Map,this.avoidMembers=new Map}parseOptions(){let e=this.options,{type:t,key:n,members:r,avoidMembers:i}=e,a=G1(e,[`type`,`key`,`members`,`avoidMembers`]),o=Object.keys(a).reduce((e,t)=>(t in R1?e.bubbleSetOptions[t]=a[t]:e.style[t]=a[t],e),{style:{},bubbleSetOptions:{}});return Object.assign({type:t,key:n,members:r,avoidMembers:i},o)}addMember(e){let t=Array.isArray(e)?e:[e];t.some(e=>this.options.avoidMembers.includes(e))&&(this.options.avoidMembers=this.options.avoidMembers.filter(e=>!t.includes(e))),this.options.members=[...new Set([...this.options.members,...t])],this.drawBubbleSets()}removeMember(e){let t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(e=>!t.includes(e)),this.drawBubbleSets()}updateMember(e){this.options.members=rS(e)?e(this.options.members):e,this.drawBubbleSets()}getMember(){return this.options.members}addAvoidMember(e){let t=Array.isArray(e)?e:[e];t.some(e=>this.options.members.includes(e))&&(this.options.members=this.options.members.filter(e=>!t.includes(e))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...t])],this.drawBubbleSets()}removeAvoidMember(e){let t=Array.isArray(e)?e:[e];this.options.avoidMembers.some(e=>t.includes(e))&&(this.options.avoidMembers=this.options.avoidMembers.filter(e=>!t.includes(e)),this.drawBubbleSets())}updateAvoidMember(e){this.options.avoidMembers=Array.isArray(e)?e:[e],this.drawBubbleSets()}getAvoidMember(){return this.options.avoidMembers}destroy(){this.context.graph.off(Q.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(Q.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),super.destroy()}};K1.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:`lightblue`,fillOpacity:.2,stroke:`blue`,strokeOpacity:.2},R1);var q1=(e,t)=>(Array.isArray(t)?t:[t]).map(t=>{let n=e.getElementRenderBounds(t);return new a1(n.min[0],n.min[1],oP(n),sP(n))}),J1=(e,t)=>(Array.isArray(t)?t:[t]).map(t=>{let n=e.getEdgeData(t),r=e.getElementPosition(n.source),i=e.getElementPosition(n.target);return J$.from({x1:r[0],y1:r[1],x2:i[0],y2:i[1]})});function Y1(e){return`
    <ul class="g6-contextmenu-ul">
      ${e.map(e=>`<li  class="g6-contextmenu-li" value="${e.value}">${e.name}</li>`).join(``)}
    </ul>
  `}var X1=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},Z1=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.targetElement=null,this.onTriggerEvent=e=>{var t;(t=e.preventDefault)==null||t.call(e),this.show(e)},this.onMenuItemClick=e=>{let{onClick:t,trigger:n}=this.options;if(e.target instanceof HTMLElement&&e.target.className.includes(`g6-contextmenu-li`)){let n=e.target.getAttribute(`value`);t?.(n,e.target,this.targetElement),this.hide()}n!==`click`&&this.hide()},this.initElement(),this.update(n)}initElement(){this.$element=z$(`contextmenu`,!1,{zIndex:`99`});let{className:e}=this.options;e&&this.$element.classList.add(e),this.context.canvas.getContainer().appendChild(this.$element),B$(`g6-contextmenu-css`,`style`,{},`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`,document.head)}show(e){return X1(this,void 0,void 0,function*(){let{enable:t,offset:n}=this.options;if(typeof t==`function`&&!t(e)||!t){this.hide();return}let r=yield this.getDOMContent(e);r instanceof HTMLElement?(this.$element.innerHTML=``,this.$element.appendChild(r)):this.$element.innerHTML=r;let i=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${e.client.x-i.left+n[0]}px`,this.$element.style.top=`${e.client.y-i.top+n[1]}px`,this.$element.style.display=`block`,this.targetElement=e.target})}hide(){this.$element.style.display=`none`,this.targetElement=null}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove()}getDOMContent(e){return X1(this,void 0,void 0,function*(){let{getContent:t,getItems:n}=this.options;return n?Y1(yield n(e)):yield t(e)})}bindEvents(){let{graph:e}=this.context,{trigger:t}=this.options;e.on(`canvas:${t}`,this.onTriggerEvent),e.on(`node:${t}`,this.onTriggerEvent),e.on(`edge:${t}`,this.onTriggerEvent),e.on(`combo:${t}`,this.onTriggerEvent),document.addEventListener(`click`,this.onMenuItemClick)}unbindEvents(){let{graph:e}=this.context,{trigger:t}=this.options;e.off(`canvas:${t}`,this.onTriggerEvent),e.off(`node:${t}`,this.onTriggerEvent),e.off(`edge:${t}`,this.onTriggerEvent),e.off(`combo:${t}`,this.onTriggerEvent),document.removeEventListener(`click`,this.onMenuItemClick)}};Z1.defaultOptions={trigger:`contextmenu`,offset:[4,4],loadingContent:`<div class="g6-contextmenu-loading">Loading...</div>`,getContent:()=>`It is a empty context menu.`,enable:()=>!0};var Q1=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{let{model:e,element:t}=this.context,n=e.getEdgeData();this.divideEdges(this.options.divisions);let{cycles:r,iterRate:i,divRate:a}=this.options,{lambda:o,divisions:s,iterations:c}=this.options;for(let e=0;e<r;e++){for(let e=0;e<c;e++){let e={};n.forEach(t=>{var n;if(t.source===t.target)return;let r=$(t);e[r]=this.getEdgeForces(t,s,o);for(let t=0;t<s+1;t++)(n=this.edgePoints)[r]||(n[r]=[]),this.edgePoints[r][t]=xF(this.edgePoints[r][t],e[r][t])})}o/=2,s*=a,c*=i,this.divideEdges(s)}n.forEach(e=>{let n=$(e);t.getElement(n)?.update({d:Cz(this.edgePoints[n])})})},this.bindEvents()}get nodeMap(){let e=this.context.model.getNodeData();return Object.fromEntries(e.map(e=>[$(e),PF(BF(e))]))}divideEdges(e){this.context.model.getEdgeData().forEach(t=>{var n;let r=$(t);(n=this.edgePoints)[r]||(n[r]=[]);let i=this.nodeMap[t.source],a=this.nodeMap[t.target];if(e===1)this.edgePoints[r].push(i),this.edgePoints[r].push(wF(xF(i,a),2)),this.edgePoints[r].push(a);else{let t=(this.edgePoints[r].length===0?OF(i,a):a0(this.edgePoints[r]))/(e+1),n=t,o=[i];for(let e=1;e<this.edgePoints[r].length;e++){let i=this.edgePoints[r][e-1],a=this.edgePoints[r][e],s=OF(a,i);for(;s>n;){let e=n/s,r=xF(i,CF(SF(a,i),e));o.push(r),s-=n,n=t}n-=s}o.push(a),this.edgePoints[r]=o}})}getVectorPosition(e){let t=this.nodeMap[e.source],n=this.nodeMap[e.target],[r,i]=SF(n,t),a=OF(t,n);return{source:t,target:n,vx:r,vy:i,length:a}}measureEdgeCompatibility(e,t){let n=this.getVectorPosition(e),r=this.getVectorPosition(t),i=$1(n,r),a=e0(n,r),o=t0(n,r),s=i0(n,r);return i*a*o*s}getEdgeBundles(){let e={},t=this.options.bundleThreshold,n=this.context.model.getEdgeData();return n.forEach((r,i)=>{n.forEach((n,a)=>{var o,s;a<=i||this.measureEdgeCompatibility(r,n)>=t&&(e[o=$(r)]||(e[o]=[]),e[$(r)].push(n),e[s=$(n)]||(e[s]=[]),e[$(n)].push(r))})}),e}getSpringForce(e,t){let{pre:n,cur:r,next:i}=e;return CF(SF(xF(n,i),CF(r,2)),t)}getElectrostaticForce(e,t){rC(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());let n=this.edgeBundles[$(t)],r=[0,0];return n?.forEach(n=>{let i=this.edgePoints[$(n)][e],a=this.edgePoints[$(t)][e],o=SF(i,a),s=OF(i,a);r=xF(r,CF(o,1/s))}),r}getEdgeForces(e,t,n){let r=this.nodeMap[e.source],i=this.nodeMap[e.target],a=this.options.K/(OF(r,i)*(t+1)),o=[[0,0]],s=$(e);for(let r=1;r<t;r++){let t=this.getSpringForce({pre:this.edgePoints[s][r-1],cur:this.edgePoints[s][r],next:this.edgePoints[s][r+1]||[0,0]},a),i=this.getElectrostaticForce(r,e);o.push(CF(xF(t,i),n))}return o.push([0,0]),o}bindEvents(){let{graph:e}=this.context;e.on(Q.AFTER_RENDER,this.onBundle)}unbindEvents(){let{graph:e}=this.context;e.off(Q.AFTER_RENDER,this.onBundle)}destroy(){this.unbindEvents(),super.destroy()}};Q1.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};var $1=(e,t)=>Math.abs(TF([e.vx,e.vy],[t.vx,t.vy])/(e.length*t.length)),e0=(e,t)=>{let n=(e.length+t.length)/2;return 2/(n/Math.min(e.length,t.length)+Math.max(e.length,t.length)/n)},t0=(e,t)=>{let n=(e.length+t.length)/2,r=wF(xF(e.source,e.target),2),i=wF(xF(t.source,t.target),2);return n/(n+OF(r,i))},n0=(e,t)=>{if(t.source[0]===t.target[0])return[t.source[0],e[1]];if(t.source[1]===t.target[1])return[e[0],t.source[1]];let n=(t.source[1]-t.target[1])/(t.source[0]-t.target[0]),r=(n*n*t.source[0]+n*(e[1]-t.source[1])+e[0])/(n*n+1),i=n*(r-t.source[0])+t.source[1];return[r,i]},r0=(e,t)=>{let n=n0(t.source,e),r=n0(t.target,e),i=wF(xF(n,r),2),a=wF(xF(e.source,e.target),2);return OF(n,r)===0?0:Math.max(0,1-2*OF(a,i)/OF(n,r))},i0=(e,t)=>Math.min(r0(e,t),r0(t,e)),a0=e=>{let t=0;for(let n=1;n<e.length;n++)t+=OF(e[n],e[n-1]);return t},o0={fill:`#fff`,fillOpacity:1,lineWidth:1,stroke:`#000`,strokeOpacity:.8,zIndex:-1/0},s0=.05,c0=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=e=>{if(this.options.trigger===`drag`&&this.isLensOn)return;let t=WF(e.canvas);this.renderLens(t),this.renderFocusElements()},this.renderLens=e=>{let t=Object.assign({},o0,this.options.style);this.isLensOn||(this.lens=new hL({style:t}),this.canvas.appendChild(this.lens)),Object.assign(t,GF(e),{size:this.r*2}),this.lens.update(t)},this.getFilterData=()=>{let{filter:e}=this.options,{model:t}=this.context,n=t.getData();if(!e)return n;let{nodes:r,edges:i,combos:a}=n;return{nodes:r.filter(t=>e($(t),`node`)),edges:i.filter(t=>e($(t),`edge`)),combos:a.filter(t=>e($(t),`combo`))}},this.getFocusElements=e=>{let{nodes:t,edges:n}=this.getFilterData(),r=t.filter(t=>OF(BF(t),e)<this.r),i=r.map(e=>$(e)),a=n.filter(e=>{let{source:t,target:n}=e,r=i.includes(t),a=i.includes(n);switch(this.options.nodeType){case`both`:return r&&a;case`either`:return r!==a;case`source`:return r&&!a;case`target`:return!r&&a;default:return!1}});return{nodes:r,edges:a}},this.renderFocusElements=()=>{let{element:e,graph:t}=this.context;if(!this.isLensOn)return;let n=this.lens.getCenter(),{nodes:r,edges:i}=this.getFocusElements(n),a=new Set,o=n=>{let r=$(n);a.add(r);let i=e.getElement(r);if(!i)return;let o=this.shapes.get(r)||i.cloneNode();o.setPosition(i.getPosition()),o.id=i.id,this.shapes.has(r)?Object.entries(i.attributes).forEach(([e,t])=>{o.style[e]!==t&&(o.style[e]=t)}):(this.canvas.appendChild(o),this.shapes.set(r,o));let s=t.getElementType(r),c=this.getElementStyle(s,n);o.update(c)};r.forEach(o),i.forEach(o),this.shapes.forEach((e,t)=>{a.has(t)||(e.destroy(),this.shapes.delete(t))})},this.scaleRByWheel=e=>{this.options.preventDefault&&e.preventDefault();let{clientX:t,clientY:n,deltaX:r,deltaY:i}=e,{graph:a,canvas:o}=this.context,s=a.getCanvasByClient([t,n]),c=this.lens?.getCenter();if(!this.isLensOn||OF(s,c)>this.r)return;let{maxR:l,minR:u}=this.options,d=r+i>0?1/(1-s0):1-s0,f=Math.min(...o.getSize())/2;this.r=Math.max(u||0,Math.min(l||f,this.r*d)),this.renderLens(c),this.renderFocusElements()},this.isLensDragging=!1,this.onDragStart=e=>{let t=WF(e.canvas),n=this.lens?.getCenter();!this.isLensOn||OF(t,n)>this.r||(this.isLensDragging=!0)},this.onDrag=e=>{if(!this.isLensDragging)return;let t=WF(e.canvas);this.renderLens(t),this.renderFocusElements()},this.onDragEnd=()=>{this.isLensDragging=!1},this.bindEvents()}get canvas(){return this.context.canvas.getLayer(`transient`)}get isLensOn(){return this.lens&&!this.lens.destroyed}getElementStyle(e,t){let n=e===`node`?this.options.nodeStyle:this.options.edgeStyle;return typeof n==`function`?n(t):n}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;let{graph:t}=this.context,{trigger:n,scaleRBy:r}=this.options,i=t.getCanvas().getLayer();[`click`,`drag`].includes(n)&&i.addEventListener(Z.CLICK,this.onEdgeFilter),n===`pointermove`?i.addEventListener(Z.POINTER_MOVE,this.onEdgeFilter):n===`drag`&&(i.addEventListener(Z.DRAG_START,this.onDragStart),i.addEventListener(Z.DRAG,this.onDrag),i.addEventListener(Z.DRAG_END,this.onDragEnd)),r===`wheel`&&((e=this.graphDom)==null||e.addEventListener(Z.WHEEL,this.scaleRByWheel,{passive:!1}))}unbindEvents(){var e;let{graph:t}=this.context,{trigger:n,scaleRBy:r}=this.options,i=t.getCanvas().getLayer();[`click`,`drag`].includes(n)&&i.removeEventListener(Z.CLICK,this.onEdgeFilter),n===`pointermove`?i.removeEventListener(Z.POINTER_MOVE,this.onEdgeFilter):n===`drag`&&(i.removeEventListener(Z.DRAG_START,this.onDragStart),i.removeEventListener(Z.DRAG,this.onDrag),i.removeEventListener(Z.DRAG_END,this.onDragEnd)),r===`wheel`&&((e=this.graphDom)==null||e.removeEventListener(Z.WHEEL,this.scaleRByWheel))}update(e){this.unbindEvents(),super.update(e),this.r=e.r??this.r,this.bindEvents()}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((e,t)=>{e.destroy(),this.shapes.delete(t)}),super.destroy()}};c0.defaultOptions={trigger:`pointermove`,r:60,nodeType:`both`,filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:`wheel`,preventDefault:!0};var l0={fill:`#ccc`,fillOpacity:.1,lineWidth:2,stroke:`#000`,strokeOpacity:.8,labelFontSize:12},u0=.05,d0=.1,f0=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=e=>{if(this.options.trigger===`drag`&&this.isLensOn)return;let t=WF(e.canvas);this.onMagnify(t)},this.onMagnify=e=>{e.some(isNaN)||(this.renderLens(e),this.renderFocusElements())},this.renderLens=e=>{let t=Object.assign({},l0,this.options.style);this.isLensOn||(this.lens=new hL({style:t}),this.canvas.appendChild(this.lens)),Object.assign(t,GF(e),{size:this.r*2,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(t)},this.getDPercent=()=>{let{minD:e,maxD:t}=this.options;return`${Math.round((this.d-e)/(t-e)*100)}%`},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;let{graph:e}=this.context,t=this.lens.getCenter(),n=(this.d+1)*this.r,r=new Map,i=new Map;e.getNodeData().forEach(a=>{let o=BF(a),s=OF(o,t);if(s>this.r)return;let c=n*s/(this.d*s+this.r),[l,u]=o,[d,f]=t,p=(l-d)/s,m=(u-f)/s,h=[d+c*p,f+c*m],g=$(a),_=this.getNodeStyle(a),v=lC(e.getElementRenderStyle(g),Object.keys(_));r.set(g,Object.assign(Object.assign({},GF(h)),_)),i.set(g,Object.assign(Object.assign({},GF(o)),v))}),this.updateStyle(r,i)},this.getNodeStyle=e=>{let{nodeStyle:t}=this.options;return typeof t==`function`?t(e):t},this.updateStyle=(e,t)=>{let{graph:n,element:r}=this.context,{enter:i,exit:a,keep:o}=pF(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(e.keys()),e=>e),s=new Set,c=(e,t)=>{r.getElement(e)?.update(t),n.getRelatedEdgesData(e).forEach(e=>{s.add($(e))})};[...i,...o].forEach(t=>{c(t,e.get(t))}),a.forEach(e=>{c(e,this.prevOriginStyleMap.get(e)),this.prevOriginStyleMap.delete(e)}),s.forEach(e=>{r.getElement(e)?.update({})}),this.prevMagnifiedStyleMap=e,t.forEach((e,t)=>{this.prevOriginStyleMap.has(t)||this.prevOriginStyleMap.set(t,e)})},this.isWheelValid=e=>{if(this.options.preventDefault&&e.preventDefault(),!this.isLensOn)return!1;let{clientX:t,clientY:n}=e,r=this.context.graph.getCanvasByClient([t,n]),i=this.lens.getCenter();return!(OF(r,i)>this.r)},this.scaleR=e=>{let{maxR:t,minR:n}=this.options,r=e?1/(1-u0):1-u0,i=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(n||0,Math.min(t||i,this.r*r))},this.scaleD=e=>{let{maxD:t,minD:n}=this.options,r=e?this.d+d0:this.d-d0;this.d=Math.max(n,Math.min(t,r))},this.scaleRByWheel=e=>{if(!this.isWheelValid(e))return;let{deltaX:t,deltaY:n}=e;this.scaleR(t+n>0);let r=this.lens.getCenter();this.onMagnify(r)},this.scaleDByWheel=e=>{if(!this.isWheelValid(e))return;let{deltaX:t,deltaY:n}=e;this.scaleD(t+n>0);let r=this.lens.getCenter();this.onMagnify(r)},this.isDragValid=e=>{if(this.options.preventDefault&&e.preventDefault(),!this.isLensOn)return!1;let t=WF(e.canvas),n=this.lens.getCenter();return!(OF(t,n)>this.r)},this.isLensDragging=!1,this.onDragStart=e=>{this.isDragValid(e)&&(this.isLensDragging=!0)},this.onDrag=e=>{if(!this.isLensDragging)return;let t=WF(e.canvas);this.onMagnify(t)},this.onDragEnd=()=>{this.isLensDragging=!1},this.scaleRByDrag=e=>{if(!this.isLensDragging)return;let{dx:t,dy:n}=e;this.scaleR(t-n>0);let r=this.lens.getCenter();this.onMagnify(r)},this.scaleDByDrag=e=>{if(!this.isLensDragging)return;let{dx:t,dy:n}=e;this.scaleD(t-n>0);let r=this.lens.getCenter();this.onMagnify(r)},this.bindEvents()}get canvas(){return this.context.canvas.getLayer(`transient`)}get isLensOn(){return this.lens&&!this.lens.destroyed}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;let{graph:t}=this.context,{trigger:n,scaleRBy:r,scaleDBy:i}=this.options,a=t.getCanvas().getLayer();if([`click`,`drag`].includes(n)&&a.addEventListener(Z.CLICK,this.onCreateFisheye),n===`pointermove`&&a.addEventListener(Z.POINTER_MOVE,this.onCreateFisheye),n===`drag`||r===`drag`||i===`drag`){a.addEventListener(Z.DRAG_START,this.onDragStart),a.addEventListener(Z.DRAG_END,this.onDragEnd);let e=n===`drag`?this.onDrag:r===`drag`?this.scaleRByDrag:this.scaleDByDrag;a.addEventListener(Z.DRAG,e)}if(r===`wheel`||i===`wheel`){let t=r===`wheel`?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)==null||e.addEventListener(Z.WHEEL,t,{passive:!1})}}unbindEvents(){var e;let{graph:t}=this.context,{trigger:n,scaleRBy:r,scaleDBy:i}=this.options,a=t.getCanvas().getLayer();if([`click`,`drag`].includes(n)&&a.removeEventListener(Z.CLICK,this.onCreateFisheye),n===`pointermove`&&a.removeEventListener(Z.POINTER_MOVE,this.onCreateFisheye),n===`drag`||r===`drag`||i===`drag`){a.removeEventListener(Z.DRAG_START,this.onDragStart),a.removeEventListener(Z.DRAG_END,this.onDragEnd);let e=n===`drag`?this.onDrag:r===`drag`?this.scaleRByDrag:this.scaleDByDrag;a.removeEventListener(Z.DRAG,e)}if(r===`wheel`||i===`wheel`){let t=r===`wheel`?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)==null||e.removeEventListener(Z.WHEEL,t)}}update(e){this.unbindEvents(),super.update(e),this.r=e.r??this.r,this.d=e.d??this.d,this.bindEvents()}destroy(){var e;this.unbindEvents(),this.isLensOn&&((e=this.lens)==null||e.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy()}};f0.defaultOptions={trigger:`pointermove`,r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};var p0=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var e,t,n,r;let i=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(i),i?(t=(e=this.options).onEnter)==null||t.call(e):(r=(n=this.options).onExit)==null||r.call(n)},this.shortcut=new fI(t.graph),this.bindEvents(),this.style=document.createElement(`style`),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();let{request:e=[],exit:t=[]}=this.options.trigger;this.shortcut.bind(e,this.request),this.shortcut.bind(t,this.exit),[`webkitfullscreenchange`,`mozfullscreenchange`,`fullscreenchange`,`MSFullscreenChange`].forEach(e=>{document.addEventListener(e,this.onFullscreenChange,!1)})}unbindEvents(){this.shortcut.unbindAll(),[`webkitfullscreenchange`,`mozfullscreenchange`,`fullscreenchange`,`MSFullscreenChange`].forEach(e=>{document.removeEventListener(e,this.onFullscreenChange,!1)})}setGraphSize(e=!0){let t,n;e?(t=globalThis.screen?.width||0,n=globalThis.screen?.height||0,this.graphSize=this.context.graph.getSize()):[t,n]=this.graphSize,this.context.graph.setSize(t,n),this.context.graph.render()}request(){document.fullscreenElement||!m0()||this.$el.requestFullscreen().catch(e=>{FN.warn(`Error attempting to enable full-screen: ${e.message} (${e.name})`)})}exit(){document.fullscreenElement&&document.exitFullscreen()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.exit(),this.style.remove(),super.destroy()}};p0.defaultOptions={trigger:{},autoFit:!0};function m0(){return document.fullscreenEnabled||Reflect.get(document,`webkitFullscreenEnabled`)||Reflect.get(document,`mozFullscreenEnabled`)||Reflect.get(document,`msFullscreenEnabled`)}var h0=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.$element=z$(`grid-line`,!0),this.offset=[0,0],this.currentScale=1,this.followZoom=e=>{let{data:{scale:t,origin:n}}=e;if(!t)return;let r=this.currentScale;this.currentScale=t;let i=t/r,a=CF(n||this.context.graph.getCanvasCenter(),1-i),o=this.baseSize*t,s=CF(this.offset,i),c=NF(s,o),l=xF(c,a);this.$element.style.backgroundSize=`${o}px ${o}px`,this.$element.style.backgroundPosition=`${l[0]}px ${l[1]}px`,this.offset=NF(l,o)},this.followTranslate=e=>{if(!this.options.follow)return;let{data:{translate:t}}=e;t&&this.updateOffset(t)},this.onTransform=e=>{let t=this.parseFollow(this.options.follow);t.zoom&&this.followZoom(e),t.translate&&this.followTranslate(e)},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents()}update(e){super.update(e),e.size!==void 0&&(this.baseSize=e.size),this.updateStyle()}bindEvents(){let{graph:e}=this.context;e.on(Q.AFTER_TRANSFORM,this.onTransform)}updateStyle(){let{stroke:e,lineWidth:t,border:n,borderLineWidth:r,borderStroke:i,borderStyle:a}=this.options,o=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:n?`${r}px ${a} ${i}`:`none`,backgroundImage:`linear-gradient(${e} ${t}px, transparent ${t}px), linear-gradient(90deg, ${e} ${t}px, transparent ${t}px)`,backgroundSize:`${o}px ${o}px`,backgroundRepeat:`repeat`})}updateOffset(e){let t=this.baseSize*this.currentScale;this.offset=NF(xF(this.offset,e),t),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`}parseFollow(e){return FS(e)?{translate:e,zoom:e}:{translate:e?.translate??!1,zoom:e?.zoom??!1}}destroy(){this.context.graph.off(Q.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy()}};h0.defaultOptions={border:!0,borderLineWidth:1,borderStroke:`#eee`,borderStyle:`solid`,lineWidth:1,size:20,stroke:`#eee`};function g0(e){let t={Added:new Map,Updated:new Map,Removed:new Map};return e.forEach(e=>{let{type:n,value:r}=e,i=$(r);if(n===`NodeAdded`||n===`EdgeAdded`||n===`ComboAdded`)t.Added.set(i,e);else if(n===`NodeUpdated`||n===`EdgeUpdated`||n===`ComboUpdated`)if(t.Added.has(i))t.Added.set(i,{type:n.replace(`Updated`,`Added`),value:r});else if(t.Updated.has(i)){let{original:e}=t.Updated.get(i);t.Updated.set(i,{type:n,value:r,original:e})}else t.Removed.has(i)||t.Updated.set(i,e);else (n===`NodeRemoved`||n===`EdgeRemoved`||n===`ComboRemoved`)&&(t.Added.has(i)?t.Added.delete(i):(t.Updated.has(i)&&t.Updated.delete(i),t.Removed.set(i,e)))}),[...Array.from(t.Added.values()),...Array.from(t.Updated.values()),...Array.from(t.Removed.values())]}function _0(e){let{NodeAdded:t=[],NodeUpdated:n=[],NodeRemoved:r=[],EdgeAdded:i=[],EdgeUpdated:a=[],EdgeRemoved:o=[],ComboAdded:s=[],ComboUpdated:c=[],ComboRemoved:l=[]}=xS(e,e=>e.type);return{add:{nodes:t,edges:i,combos:s},update:{nodes:n,edges:a,combos:c},remove:{nodes:r,edges:o,combos:l}}}function v0(e,t){for(let n in e)oS(e[n])&&!Array.isArray(e[n])&&e[n]!==null?(t[n]||(t[n]={}),v0(e[n],t[n])):t[n]===void 0&&(t[n]=zN(n))}function y0(e,t=!1,n){let r={animation:t,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:i,update:a,remove:o}=_0(g0(e));return[`nodes`,`edges`,`combos`].forEach(e=>{a[e]&&a[e].forEach(t=>{var i,a;let o=Object.assign({},t.value),s=Object.assign({},t.original);if(n){let e=n.graph.getElementType($(t.original)),r=e===`edge`?`stroke`:`fill`,i=n.element.getElementComputedStyle(e,t.original);s=Object.assign(Object.assign({},t.original),{style:Object.assign({[r]:i[r]},t.original.style)})}v0(o,s),(i=r.current.update)[e]||(i[e]=[]),r.current.update[e].push(o),(a=r.original.update)[e]||(a[e]=[]),r.original.update[e].push(s)}),i[e]&&i[e].forEach(t=>{var n,i;let a=Object.assign({},t.value);(n=r.current.add)[e]||(n[e]=[]),r.current.add[e].push(a),(i=r.original.remove)[e]||(i[e]=[]),r.original.remove[e].push(a)}),o[e]&&o[e].forEach(t=>{var n,i;let a=Object.assign({},t.value);(n=r.current.remove)[e]||(n[e]=[]),r.current.remove[e].push(a),(i=r.original.add)[e]||(i[e]=[]),r.original.add[e].push(a)})}),r}var b0=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(e,t=!0)=>{var n,r,i;this.freezed=!0,(r=(n=this.options).executeCommand)==null||r.call(n,e);let a=t?e.original:e.current;this.context.graph.addData(a.add),this.context.graph.updateData(a.update),this.context.graph.removeData(iF(a.remove,!1)),(i=this.context.element)==null||i.draw({silence:!0,animation:e.animation}),this.freezed=!1},this.addCommand=e=>{if(!this.freezed){if(e.type===Q.AFTER_DRAW){let{dataChanges:t=[],animation:n=!0}=e.data;if(this.context.batch?.isBatching){if(!this.batchChanges)return;this.batchChanges.push(t),this.batchAnimation&&=n;return}this.batchChanges=[t],this.batchAnimation=n}this.undoStackPush(y0(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(EN.ADD,this.undoStack[this.undoStack.length-1])}},this.initBatchCommand=e=>{let{initiate:t}=e.data;this.batchAnimation=!1,t?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null)},this.emitter=new XB;let{graph:r}=this.context;r.on(Q.AFTER_DRAW,this.addCommand),r.on(Q.BATCH_START,this.initBatchCommand),r.on(Q.BATCH_END,this.addCommand)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){var e,t,n;let r=this.undoStack.pop();if(r){if(this.executeCommand(r),(e=this.options).beforeAddCommand?.call(e,r,!1)===!1)return;this.redoStack.push(r),(n=(t=this.options).afterAddCommand)==null||n.call(t,r,!1),this.notify(EN.UNDO,r)}return this}redo(){let e=this.redoStack.pop();return e&&(this.executeCommand(e,!1),this.undoStackPush(e),this.notify(EN.REDO,e)),this}undoAndCancel(){let e=this.undoStack.pop();return e&&(this.executeCommand(e,!1),this.redoStack=[],this.notify(EN.CANCEL,e)),this}undoStackPush(e){var t,n,r;let{stackSize:i}=this.options;i!==0&&this.undoStack.length>=i&&this.undoStack.shift(),(t=this.options).beforeAddCommand?.call(t,e,!0)!==!1&&(this.undoStack.push(e),(r=(n=this.options).afterAddCommand)==null||r.call(n,e,!0))}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(EN.CLEAR,null)}notify(e,t){this.emitter.emit(e,{cmd:t}),this.emitter.emit(EN.CHANGE,{cmd:t})}on(e,t){this.emitter.on(e,t)}destroy(){let{graph:e}=this.context;e.off(Q.AFTER_DRAW,this.addCommand),e.off(Q.BATCH_START,this.initBatchCommand),e.off(Q.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[]}};b0.defaultOptions={stackSize:0};const x0={toXy(e,t){if(!t)return[...e];let n=t[0].slice(1),r=t[1].slice(1);return e.map(e=>[e[n],e[r]])},fromXy(e,t){if(!t)return[...e];let n=t[0].slice(1),r=t[1].slice(1);return e.map(([e,t])=>({[n]:e,[r]:t}))}};var S0=class{constructor(e,t){this._cells=[],this._cellSize=t,this._reverseCellSize=1/t;for(let t of e){let e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]);this._cells[e]||(this._cells[e]=[]),this._cells[e][n]||(this._cells[e][n]=[]),this._cells[e][n].push(t)}}cellPoints(e,t){return this._cells[e]?.[t]||[]}rangePoints(e){let t=this.coordToCellNum(e[0]),n=this.coordToCellNum(e[1]),r=this.coordToCellNum(e[2]),i=this.coordToCellNum(e[3]),a=[];for(let e=t;e<=r;e++)for(let t=n;t<=i;t++){let n=this.cellPoints(e,t);for(let e of n)a.push(e)}return a}removePoint(e){let t=this.coordToCellNum(e[0]),n=this.coordToCellNum(e[1]),r=this._cells[t][n],i=r.findIndex(([t,n])=>t===e[0]&&n===e[1]);return i>-1&&r.splice(i,1),r}trunc(e){return Math.trunc(e)}coordToCellNum(e){return this.trunc(e*this._reverseCellSize)}extendBbox(e,t){return[e[0]-t*this._cellSize,e[1]-t*this._cellSize,e[2]+t*this._cellSize,e[3]+t*this._cellSize]}};function C0(e,t){return new S0(e,t)}var w0=+(2**27+1);function T0(e,t,n){let r=e*t,i=w0*e,a=i-e,o=i-a,s=e-o,c=w0*t,l=c-t,u=c-l,d=t-u,f=r-o*u-s*u-o*d,p=s*d-f;return n?(n[0]=p,n[1]=r,n):[p,r]}function E0(e,t,n){let r=e+t,i=r-e,a=r-i,o=t-i,s=e-a;return n?(n[0]=s+o,n[1]=r,n):[s+o,r]}function D0(e,t){let n=e.length;if(n===1){let n=T0(e[0],t);return n[0]?n:[n[1]]}let r=Array(2*n),i=[.1,.1],a=[.1,.1],o=0;T0(e[0],t,i),i[0]&&(r[o++]=i[0]);for(let s=1;s<n;++s){T0(e[s],t,a);let n=i[1];E0(n,a[0],i),i[0]&&(r[o++]=i[0]);let c=a[1],l=i[1],u=c+l,d=u-c,f=l-d;i[1]=u,f&&(r[o++]=f)}return i[1]&&(r[o++]=i[1]),o===0&&(r[o++]=0),r.length=o,r}function O0(e,t){let n=e+t,r=n-e,i=n-r,a=t-r,o=e-i+a;return o?[o,n]:[n]}function k0(e,t){let n=e.length|0,r=t.length|0;if(n===1&&r===1)return O0(e[0],-t[0]);let i=n+r,a=Array(i),o=0,s=0,c=0,l=Math.abs,u=e[s],d=l(u),f=-t[c],p=l(f),m,h;d<p?(h=u,s+=1,s<n&&(u=e[s],d=l(u))):(h=f,c+=1,c<r&&(f=-t[c],p=l(f))),s<n&&d<p||c>=r?(m=u,s+=1,s<n&&(u=e[s],d=l(u))):(m=f,c+=1,c<r&&(f=-t[c],p=l(f)));let g=m+h,_=g-m,v=h-_,y=v,b=g,x,S,C,w,T;for(;s<n&&c<r;)d<p?(m=u,s+=1,s<n&&(u=e[s],d=l(u))):(m=f,c+=1,c<r&&(f=-t[c],p=l(f))),h=y,g=m+h,_=g-m,v=h-_,v&&(a[o++]=v),x=b+g,S=x-b,C=x-S,w=g-S,T=b-C,y=T+w,b=x;for(;s<n;)m=u,h=y,g=m+h,_=g-m,v=h-_,v&&(a[o++]=v),x=b+g,S=x-b,C=x-S,w=g-S,T=b-C,y=T+w,b=x,s+=1,s<n&&(u=e[s]);for(;c<r;)m=f,h=y,g=m+h,_=g-m,v=h-_,v&&(a[o++]=v),x=b+g,S=x-b,C=x-S,w=g-S,T=b-C,y=T+w,b=x,c+=1,c<r&&(f=-t[c]);return y&&(a[o++]=y),b&&(a[o++]=b),o||(a[o++]=0),a.length=o,a}function A0(e,t){let n=e+t,r=n-e,i=n-r,a=t-r,o=e-i+a;return o?[o,n]:[n]}function j0(e,t){let n=e.length|0,r=t.length|0;if(n===1&&r===1)return A0(e[0],t[0]);let i=n+r,a=Array(i),o=0,s=0,c=0,l=Math.abs,u=e[s],d=l(u),f=t[c],p=l(f),m,h;d<p?(h=u,s+=1,s<n&&(u=e[s],d=l(u))):(h=f,c+=1,c<r&&(f=t[c],p=l(f))),s<n&&d<p||c>=r?(m=u,s+=1,s<n&&(u=e[s],d=l(u))):(m=f,c+=1,c<r&&(f=t[c],p=l(f)));let g=m+h,_=g-m,v=h-_,y=v,b=g,x,S,C,w,T;for(;s<n&&c<r;)d<p?(m=u,s+=1,s<n&&(u=e[s],d=l(u))):(m=f,c+=1,c<r&&(f=t[c],p=l(f))),h=y,g=m+h,_=g-m,v=h-_,v&&(a[o++]=v),x=b+g,S=x-b,C=x-S,w=g-S,T=b-C,y=T+w,b=x;for(;s<n;)m=u,h=y,g=m+h,_=g-m,v=h-_,v&&(a[o++]=v),x=b+g,S=x-b,C=x-S,w=g-S,T=b-C,y=T+w,b=x,s+=1,s<n&&(u=e[s]);for(;c<r;)m=f,h=y,g=m+h,_=g-m,v=h-_,v&&(a[o++]=v),x=b+g,S=x-b,C=x-S,w=g-S,T=b-C,y=T+w,b=x,c+=1,c<r&&(f=t[c]);return y&&(a[o++]=y),b&&(a[o++]=b),o||(a[o++]=0),a.length=o,a}var M0=5,N0=11102230246251565e-32,P0=(3+16*N0)*N0,F0=(7+56*N0)*N0;function I0(e,t,n,r){return function(n,i,a){let o=e(e(t(i[1],a[0]),t(-a[1],i[0])),e(t(n[1],i[0]),t(-i[1],n[0]))),s=e(t(n[1],a[0]),t(-a[1],n[0])),c=r(o,s);return c[c.length-1]}}function L0(e,t,n,r){return function(i,a,o,s){let c=e(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2])))),l=e(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),e(n(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(n(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2])))),u=r(c,l);return u[u.length-1]}}function R0(e,t,n,r){return function(i,a,o,s,c){let l=e(e(e(n(e(n(e(t(s[1],c[0]),t(-c[1],s[0])),o[2]),e(n(e(t(o[1],c[0]),t(-c[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),c[2]))),a[3]),e(n(e(n(e(t(s[1],c[0]),t(-c[1],s[0])),a[2]),e(n(e(t(a[1],c[0]),t(-c[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),c[2]))),-o[3]),n(e(n(e(t(o[1],c[0]),t(-c[1],o[0])),a[2]),e(n(e(t(a[1],c[0]),t(-c[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),c[2]))),s[3]))),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),-c[3]),e(n(e(n(e(t(s[1],c[0]),t(-c[1],s[0])),a[2]),e(n(e(t(a[1],c[0]),t(-c[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),c[2]))),i[3]),n(e(n(e(t(s[1],c[0]),t(-c[1],s[0])),i[2]),e(n(e(t(i[1],c[0]),t(-c[1],i[0])),-s[2]),n(e(t(i[1],s[0]),t(-s[1],i[0])),c[2]))),-a[3])))),e(e(n(e(n(e(t(a[1],c[0]),t(-c[1],a[0])),i[2]),e(n(e(t(i[1],c[0]),t(-c[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),c[2]))),s[3]),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),-c[3]),n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),i[3]))),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-a[3]),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),o[3]),n(e(n(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(n(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]))),-s[3]))))),u=e(e(e(n(e(n(e(t(s[1],c[0]),t(-c[1],s[0])),o[2]),e(n(e(t(o[1],c[0]),t(-c[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),c[2]))),i[3]),n(e(n(e(t(s[1],c[0]),t(-c[1],s[0])),i[2]),e(n(e(t(i[1],c[0]),t(-c[1],i[0])),-s[2]),n(e(t(i[1],s[0]),t(-s[1],i[0])),c[2]))),-o[3])),e(n(e(n(e(t(o[1],c[0]),t(-c[1],o[0])),i[2]),e(n(e(t(i[1],c[0]),t(-c[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),c[2]))),s[3]),n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-c[3]))),e(e(n(e(n(e(t(o[1],c[0]),t(-c[1],o[0])),a[2]),e(n(e(t(a[1],c[0]),t(-c[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),c[2]))),i[3]),n(e(n(e(t(o[1],c[0]),t(-c[1],o[0])),i[2]),e(n(e(t(i[1],c[0]),t(-c[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),c[2]))),-a[3])),e(n(e(n(e(t(a[1],c[0]),t(-c[1],a[0])),i[2]),e(n(e(t(i[1],c[0]),t(-c[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),c[2]))),o[3]),n(e(n(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(n(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]))),-c[3])))),d=r(l,u);return d[d.length-1]}}function z0(e){return(e===3?I0:e===4?L0:R0)(j0,T0,D0,k0)}var B0=z0(3),V0=z0(4),H0=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){let r=(e[1]-n[1])*(t[0]-n[0]),i=(e[0]-n[0])*(t[1]-n[1]),a=r-i,o;if(r>0){if(i<=0)return a;o=r+i}else if(r<0){if(i>=0)return a;o=-(r+i)}else return a;let s=P0*o;return a>=s||a<=-s?a:B0(e,t,n)},function(e,t,n,r){let i=e[0]-r[0],a=t[0]-r[0],o=n[0]-r[0],s=e[1]-r[1],c=t[1]-r[1],l=n[1]-r[1],u=e[2]-r[2],d=t[2]-r[2],f=n[2]-r[2],p=a*l,m=o*c,h=o*s,g=i*l,_=i*c,v=a*s,y=u*(p-m)+d*(h-g)+f*(_-v),b=(Math.abs(p)+Math.abs(m))*Math.abs(u)+(Math.abs(h)+Math.abs(g))*Math.abs(d)+(Math.abs(_)+Math.abs(v))*Math.abs(f),x=F0*b;return y>x||-y>x?y:V0(e,t,n,r)}];function U0(e){let t=H0[e.length];return t||=H0[e.length]=z0(e.length),t.apply(void 0,...e)}function W0(e,t,n,r,i,a,o){return function(...t){switch(t.length){case 0:case 1:return 0;case 2:return r(t[0],t[1]);case 3:return i(t[0],t[1],t[2]);case 4:return a(t[0],t[1],t[2],t[3]);case 5:return o(t[0],t[1],t[2],t[3],t[4])}return e(t)}}function G0(){for(;H0.length<=M0;)H0.push(z0(H0.length));let e=W0(void 0,U0,...H0);for(let t=0;t<=M0;++t)e[t]=H0[t];return e}var K0=G0(),q0=K0[3];function J0(e){let t=e.length;if(t<3){let n=Array(t);for(let e=0;e<t;++e)n[e]=e;return t===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:n}let n=Array(t);for(let e=0;e<t;++e)n[e]=e;n.sort((t,n)=>e[t][0]-e[n][0]||e[t][1]-e[n][1]);let r=[n[0],n[1]],i=[n[0],n[1]];for(let a=2;a<t;++a){let t=n[a],o=e[t],s=r.length;for(;s>1&&q0(e[r[s-2]],e[r[s-1]],o)<=0;)--s,r.pop();for(r.push(t),s=i.length;s>1&&q0(e[i[s-2]],e[i[s-1]],o)>=0;)--s,i.pop();i.push(t)}let a=Array(i.length+r.length-2),o=0;for(let e=0,t=r.length;e<t;++e)a[o++]=r[e];for(let e=i.length-2;e>0;--e)a[o++]=i[e];return a}function Y0(e,t,n,r){for(let i=0;i<2;++i){let a=e[i],o=t[i],[s,c]=[Math.min(a,o),Math.max(a,o)],l=n[i],u=r[i],[d,f]=[Math.min(l,u),Math.max(l,u)];if(f<s||c<d)return!1}return!0}function X0(e,t,n,r){let i=K0(e,n,r),a=K0(t,n,r);if(i>0&&a>0||i<0&&a<0)return!1;let o=K0(n,e,t),s=K0(r,e,t);return o>0&&s>0||o<0&&s<0?!1:i===0&&a===0&&o===0&&s===0?Y0(e,t,n,r):!0}function Z0(e){let t=[e[0]],n=e[0];for(let r=1;r<e.length;r++){let i=e[r];(n[0]!==i[0]||n[1]!==i[1])&&t.push(i),n=i}return t}function Q0(e){return e.sort(function(e,t){return e[0]-t[0]||e[1]-t[1]})}function $0(e,t){return(t[0]-e[0])**2+(t[1]-e[1])**2}function e2(e,t,n){let r=[t[0]-e[0],t[1]-e[1]],i=[n[0]-e[0],n[1]-e[1]],a=$0(e,t),o=$0(e,n);return(r[0]*i[0]+r[1]*i[1])/Math.sqrt(a*o)}function t2(e,t){for(let n=0;n<t.length-1;n++){let r=[t[n],t[n+1]];if(!(e[0][0]===r[0][0]&&e[0][1]===r[0][1]||e[0][0]===r[1][0]&&e[0][1]===r[1][1])&&X0(e[0],e[1],r[0],r[1]))return!0}return!1}function n2(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(let a=e.length-1;a>=0;a--)e[a][0]<t&&(t=e[a][0]),e[a][1]<n&&(n=e[a][1]),e[a][0]>r&&(r=e[a][0]),e[a][1]>i&&(i=e[a][1]);return[r-t,i-n]}function r2(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function i2(e,t,n){let r=null,i=s2,a=s2,o,s;for(let c=0;c<t.length;c++)o=e2(e[0],e[1],t[c]),s=e2(e[1],e[0],t[c]),o>i&&s>a&&!t2([e[0],t[c]],n)&&!t2([e[1],t[c]],n)&&(i=o,a=s,r=t[c]);return r}function a2(e,t,n,r,i){let a=!1;for(let o=0;o<e.length-1;o++){let s=[e[o],e[o+1]],c=s[0][0]+`,`+s[0][1]+`,`+s[1][0]+`,`+s[1][1];if($0(s[0],s[1])<t||i.has(c))continue;let l=0,u=r2(s),d,f,p;do u=r.extendBbox(u,l),d=u[2]-u[0],f=u[3]-u[1],p=i2(s,r.rangePoints(u),e),l++;while(p===null&&(n[0]>d||n[1]>f));d>=n[0]&&f>=n[1]&&i.add(c),p!==null&&(e.splice(o+1,0,p),r.removePoint(p),a=!0)}return a?a2(e,t,n,r,i):e}function o2(e,t,n){let r=t||20,i=Z0(Q0(x0.toXy(e,n)));if(i.length<4){let e=i.concat([i[0]]);return n?x0.fromXy(e,n):e}let a=n2(i),o=[a[0]*c2,a[1]*c2],s=J0(i).reverse().map(e=>i[e]);s.push(s[0]);let c=i.filter(function(e){return s.indexOf(e)<0}),l=Math.ceil(1/(i.length/(a[0]*a[1]))),u=a2(s,r**2,o,C0(c,l),new Set);return n?x0.fromXy(u,n):u}var s2=Math.cos(90/(180/Math.PI)),c2=.6;function l2(e,t,n){if(e.length===1)return u2(e[0],t,n);if(e.length===2)return d2(e,t,n);if(e.length===3){let[r,i,a]=cI(e);if(ZF(r,i,a))return d2([r,a],t,n)}switch(n){case`smooth`:return p2(e,t);case`sharp`:return m2(e,t);case`rounded`:default:return f2(e,t)}}var u2=(e,t,n)=>{if(n===`sharp`)return[[`M`,e[0]-t,e[1]-t],[`L`,e[0]+t,e[1]-t],[`L`,e[0]+t,e[1]+t],[`L`,e[0]-t,e[1]+t],[`Z`]];let r=[t,t,0,0,0];return[[`M`,e[0],e[1]-t],[`A`,...r,e[0],e[1]+t],[`A`,...r,e[0],e[1]-t]]},d2=(e,t,n)=>{let r=[t,t,0,0,0],i=n===`sharp`?xF(e[0],DF(AF(SF(e[0],e[1])),t)):e[0],a=n===`sharp`?xF(e[1],DF(AF(SF(e[1],e[0])),t)):e[1],o=DF(AF(MF(SF(i,a),!1)),t),s=DF(o,-1),c=xF(i,o),l=xF(a,o),u=xF(a,s),d=xF(i,s);return n===`sharp`?[[`M`,c[0],c[1]],[`L`,l[0],l[1]],[`L`,u[0],u[1]],[`L`,d[0],d[1]],[`Z`]]:[[`M`,c[0],c[1]],[`L`,l[0],l[1]],[`A`,...r,u[0],u[1]],[`L`,d[0],d[1]],[`A`,...r,c[0],c[1]]]},f2=(e,t)=>{let n=cI(e).map((n,r)=>{let i=(r-2+e.length)%e.length,a=(r-1+e.length)%e.length,o=(r+1)%e.length,s=e[i],c=e[a],l=e[o],u=SF(s,c),d=SF(c,n),f=SF(n,l),p=(e,t)=>jF(e,t,!0)<Math.PI,m=p(u,d),h=p(d,f),g=e=>DF(AF(MF(e,!1)),t),_=g(d);return[{p:PF(m?xF(c,g(u)):xF(c,_)),concave:m&&c},{p:PF(h?xF(n,g(f)):xF(n,_)),concave:h&&n}]}),r=[t,t,0,0,0],i=n.findIndex((e,t)=>!n[(t-1+n.length)%n.length][0].concave&&!n[(t-1+n.length)%n.length][1].concave&&!e[0].concave&&!e[0].concave&&!e[1].concave),a=n.slice(i).concat(n.slice(0,i)),o=[];return a.flatMap((e,t)=>{let i=[],s=a[n.length-1];return t===0&&i.push([`M`,...s[1].p]),e[0].concave?o.push(e[0].p,e[1].p):i.push([`A`,...r,...e[0].p]),e[1].concave?o.unshift(e[1].p):i.push([`L`,...e[1].p]),o.length===3&&(i.pop(),i.push([`C`,...o.flat()]),o=[]),i})},p2=(e,t)=>{let n=cI(e).map((t,n)=>{let r=e[(n+1)%e.length];return{p:t,v:AF(SF(r,t))}});return n.forEach((r,i)=>{let a=i>0?i-1:e.length-1,o=n[a].v,s=AF(xF(o,DF(r.v,jF(o,r.v,!0)<Math.PI?1:-1)));r.p=xF(r.p,DF(s,t))}),$I(n.map(e=>e.p))},m2=(e,t)=>{let n=e.map((n,r)=>{let i=e[r===0?e.length-1:r-1],a=FF(DF(AF(MF(SF(i,n),!1)),t));return[xF(i,a),xF(n,a)]}).flat();return n.map((e,t)=>{if(t%2==0)return null;let r=[n[(t-1)%n.length],n[t%n.length]],i=[n[(t+1)%n.length],n[(t+2)%n.length]];return RF(r,i,!0)}).filter(Boolean).map((e,t)=>[t===0?`M`:`L`,e[0],e[1]]).concat([[`Z`]])},h2=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},g2=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.hullMemberIds=[],this.drawHull=()=>{if(!this.shape)this.shape=new nL({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);else{let e=!aC(this.optionsCache,this.options);this.shape.update(this.getHullStyle(e))}this.optionsCache=Object.assign({},this.options)},this.updateHullPath=e=>{this.shape&&this.options.members.includes($(e.data))&&this.shape.update({d:this.getHullPath(!0)})},this.getHullPath=(e=!1)=>{let{graph:t}=this.context,n=this.getMember();if(n.length===0)return``;let r=n.map(e=>t.getNodeData(e)),i=o2(r.map(BF),this.options.concavity).slice(1).reverse(),a=i.flatMap(e=>r.filter(t=>aC(BF(t),e)).map($));return aC(a,this.hullMemberIds)&&!e?this.path:(this.hullMemberIds=a,this.path=l2(i,this.getPadding(),this.options.corner),this.path)},this.bindEvents()}bindEvents(){this.context.graph.on(Q.AFTER_RENDER,this.drawHull),this.context.graph.on(Q.AFTER_ELEMENT_UPDATE,this.updateHullPath)}unbindEvents(){this.context.graph.off(Q.AFTER_RENDER,this.drawHull),this.context.graph.off(Q.AFTER_ELEMENT_UPDATE,this.updateHullPath)}getHullStyle(e){let t=this.options,{members:n,padding:r,corner:i}=t,a=h2(t,[`members`,`padding`,`corner`]);return Object.assign(Object.assign({},a),{d:this.getHullPath(e)})}getPadding(){let{graph:e}=this.context;return this.hullMemberIds.reduce((t,n)=>{let{halfExtents:r}=e.getElementRenderBounds(n),i=Math.max(r[0],r[1]);return Math.max(t,i)},0)+this.options.padding}addMember(e){let t=Array.isArray(e)?e:[e];this.options.members=[...new Set([...this.options.members,...t])],this.shape.update({d:this.getHullPath()})}removeMember(e){let t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(e=>!t.includes(e)),t.some(e=>this.hullMemberIds.includes(e))&&this.shape.update({d:this.getHullPath()})}updateMember(e){this.options.members=rS(e)?e(this.options.members):e,this.shape.update(this.getHullStyle(!0))}getMember(){return this.options.members}destroy(){this.unbindEvents(),this.shape.destroy(),this.hullMemberIds=[],super.destroy()}};g2.defaultOptions={members:[],padding:10,corner:`rounded`,concavity:1/0,fill:`lightblue`,fillOpacity:.2,labelOpacity:1,stroke:`blue`,strokeOpacity:.2};function _2(e,t){t(e),e.children&&e.children.forEach(function(e){e&&_2(e,t)})}function v2(e){b2(e,!0)}function y2(e){b2(e,!1)}function b2(e,t){var n=t?`visible`:`hidden`;_2(e,function(e){e.attr(`visibility`,n)})}var x2=function(e){wn(t,e);function t(){var t=[...arguments],n=e.apply(this,kn([],B(t),!1))||this;return n.isMutationObserved=!0,n.addEventListener(LA.INSERTED,function(){y2(n)}),n}return t}(Lj);function S2(e){var t=e.appendChild(new x2({class:`offscreen`}));return y2(t),t}function C2(e){for(var t=e;t;){if(t.className===`offscreen`)return!0;t=t.parent}return!1}var w2=function(e){wn(t,e);function t(t){t===void 0&&(t={});var n=t.style,r=Tn(t,[`style`]);return e.call(this,z({style:z({text:``,fill:`black`,fontFamily:`sans-serif`,fontSize:16,fontStyle:`normal`,fontVariant:`normal`,fontWeight:`normal`,lineWidth:1,textAlign:`start`,textBaseline:`middle`},n)},r))||this}return Object.defineProperty(t.prototype,`offscreenGroup`,{get:function(){return this._offscreen||=S2(this),this._offscreen},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var e;(e=this._offscreen)==null||e.destroy()},t}(Zj);function T2(e){return e*Math.PI/180}function E2(e){return Number((e*180/Math.PI).toPrecision(5))}var D2=function(){function e(e,t,n,r){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=t,this.width=n,this.height=r}return Object.defineProperty(e.prototype,`bottom`,{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`left`,{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`right`,{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`top`,{get:function(){return this.y},enumerable:!1,configurable:!0}),e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},e.prototype.isPointIn=function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom},e}();function O2(e,t){return rS(e)?e.apply(void 0,kn([],B(t),!1)):e}var k2=function(e,t){var n=function(e){return`${t}-${e}`},r=Object.fromEntries(Object.entries(e).map(function(e){var t=B(e,2),r=t[0],i=t[1],a=n(i);return[r,{name:a,class:`.${a}`,id:`#${a}`,toString:function(){return a}}]}));return Object.assign(r,{prefix:n}),r},A2=5,j2=function(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=A2),Object.entries(t).forEach(function(i){var a=B(i,2),o=a[0],s=a[1],c=e;Object.prototype.hasOwnProperty.call(t,o)&&(s?fS(s)?(fS(e[o])||(c[o]={}),n<r?j2(e[o],s,n+1,r):c[o]=t[o]):aS(s)?(c[o]=[],c[o]=c[o].concat(s)):c[o]=s:c[o]=s)})},M2=function(e){for(var t=[...arguments].slice(1),n=0;n<t.length;n+=1)j2(e,t[n]);return e},N2=function(e){return e!==void 0&&e!=null&&!Number.isNaN(e)},P2,F2,I2=XS(function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return F2?F2(e,n):(P2||=X.offscreenCanvasCreator.getOrCreateContext(void 0),P2.font=[a,o,i,`${n}px`,r].join(` `),P2.measureText(e).width)},function(e,t){return[e,Object.values(t||L2(e)).join()].join(``)},4096),L2=function(e){var t=e.style.fontFamily||`sans-serif`,n=e.style.fontWeight||`normal`,r=e.style.fontStyle||`normal`,i=e.style.fontVariant,a=e.style.fontSize;return a=typeof a==`object`?a.value:a,{fontSize:a,fontFamily:t,fontWeight:n,fontStyle:r,fontVariant:i}};function R2(e){return e.nodeName===`text`?e:e.nodeName===`g`&&e.children.length===1&&e.children[0].nodeName===`text`?e.children[0]:null}function z2(e,t){var n=R2(e);n&&n.attr(t)}function B2(e,t,n){n===void 0&&(n=`...`),z2(e,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:n})}function V2(e,t,n,r){n===void 0&&(n=2),r===void 0&&(r=`top`),z2(e,{wordWrap:!0,wordWrapWidth:t,maxLines:n,textBaseline:r})}function H2(e){var t=e.canvas,n=e.touches,r=e.offsetX,i=e.offsetY;if(t){var a=t.x,o=t.y;return[a,o]}if(n){var s=n[0],c=s.clientX,l=s.clientY;return[c,l]}return r&&i?[r,i]:[0,0]}function U2(e){return typeof e==`function`?e():_S(e)||K(e)?new w2({style:{text:String(e)}}):e}function W2(e,t){return typeof e==`function`?e():_S(e)||K(e)?new zj({style:z(z({},t),{innerHTML:String(e)})}):e}function G2(e,t){return e.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{})}function K2(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(e){e.node().removeChildren()}),e?n(t):(r&&i(t),null)}function q2(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&e===t||i&&e===n?!0:e>t&&e<n}var J2=function(e,t){return function(n){return e*(1-n)+t*n}};function Y2(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0;return function(i){var a=Array(r),o=Array(n),s=0;for(s=0;s<r;++s)a[s]=Z2(e[s],t[s]);for(;s<n;++s)o[s]=t[s];for(s=0;s<r;++s)o[s]=a[s](i);return o}}function X2(e,t){e===void 0&&(e={}),t===void 0&&(t={});var n={},r={};return Object.entries(t).forEach(function(t){var i=B(t,2),a=i[0],o=i[1];a in e?n[a]=Z2(e[a],o):r[a]=o}),function(e){return Object.entries(n).forEach(function(t){var n=B(t,2),i=n[0],a=n[1];return r[i]=a(e)}),r}}function Z2(e,t){return typeof e==`number`&&typeof t==`number`?J2(e,t):Array.isArray(e)&&Array.isArray(t)?Y2(e,t):typeof e==`object`&&typeof t==`object`?X2(e,t):(function(t){return e})}function Q2(e,t,n,r){if(!r)return e.attr(`__keyframe_data__`,n),null;var i=r.duration,a=i===void 0?0:i,o=Z2(t,n),s=Math.ceil(a/16),c=Array(s).fill(0).map(function(e,t,n){return{__keyframe_data__:o(t/(n.length-1))}});return e.animate(c,z({fill:`both`},r))}function $2(e,t){return[e[0]*t,e[1]*t]}function e4(e,t){return[e[0]+t[0],e[1]+t[1]]}function t4(e,t){return[e[0]-t[0],e[1]-t[1]]}function n4(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])]}function r4(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}function i4(e,t){return Math.sqrt((e[0]-t[0])**2+(e[1]-t[1])**2)}function a4(e){if(e[0]===0&&e[1]===0)return[0,0];var t=Math.sqrt(e[0]**2+e[1]**2);return[e[0]/t,e[1]/t]}function o4(e,t){return t?[e[1],-e[0]]:[-e[1],e[0]]}function s4(e,t){return+e.toPrecision(t)}function c4(e,t){var n={},r=Array.isArray(t)?t:[t];for(var i in e)r.includes(i)||(n[i]=e[i]);return n}function l4(e,t,n,r){var i,a=[],o=!!r,s,c,l=[1/0,1/0],u=[-1/0,-1/0],d,f,p;if(o){i=B(r,2),l=i[0],u=i[1];for(var m=0,h=e.length;m<h;m+=1){var g=e[m];l=n4(l,g),u=r4(u,g)}}for(var m=0,_=e.length;m<_;m+=1){var g=e[m];if(m===0&&!n)p=g;else if(m===_-1&&!n)f=g,a.push(p),a.push(f);else{var v=[m?m-1:_-1,m-1][n?0:1];s=e[v],c=e[n?(m+1)%_:m+1];var y=[0,0];y=t4(c,s),y=$2(y,t);var b=i4(g,s),x=i4(g,c),S=b+x;S!==0&&(b/=S,x/=S);var C=$2(y,-b),w=$2(y,x);f=e4(g,C),d=e4(g,w),d=n4(d,r4(c,g)),d=r4(d,n4(c,g)),C=t4(d,g),C=$2(C,-b/x),f=e4(g,C),f=n4(f,r4(s,g)),f=r4(f,n4(s,g)),w=t4(g,f),w=$2(w,x/b),d=e4(g,w),o&&(f=r4(f,l),f=n4(f,u),d=r4(d,l),d=n4(d,u)),a.push(p),a.push(f),p=d}}return n&&a.push(a.shift()),a}function u4(e,t,n){var r;t===void 0&&(t=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var i=!!t,a=[],o=0,s=e.length;o<s;o+=2)a.push([e[o],e[o+1]]);for(var c=l4(a,.4,i,n),l=a.length,u=[],d,f,p,o=0;o<l-1;o+=1)d=c[o*2],f=c[o*2+1],p=a[o+1],u.push([`C`,d[0],d[1],f[0],f[1],p[0],p[1]]);return i&&(d=c[l],f=c[l+1],r=B(a,1),p=r[0],u.push([`C`,d[0],d[1],f[0],f[1],p[0],p[1]])),u}var d4=`$el.cx.cy.d.dx.dy.fill.fillOpacity.filter.fontFamily.fontSize.fontStyle.fontVariant.fontWeight.height.img.increasedLineWidthForHitTesting.innerHTML.isBillboard.billboardRotation.isSizeAttenuation.isClosed.isOverflowing.leading.letterSpacing.lineDash.lineHeight.lineWidth.markerEnd.markerEndOffset.markerMid.markerStart.markerStartOffset.maxLines.metrics.miterLimit.offsetX.offsetY.opacity.path.points.r.radius.rx.ry.shadowColor.src.stroke.strokeOpacity.text.textAlign.textBaseline.textDecorationColor.textDecorationLine.textDecorationStyle.textOverflow.textPath.textPathSide.textPathStartOffset.transform.transformOrigin.visibility.width.wordWrap.wordWrapWidth.x.x1.x2.y.y1.y2.z1.z2.zIndex`.split(`.`);function f4(e){return d4.includes(e)}function p4(e){var t={};for(var n in e)f4(n)&&(t[n]=e[n]);return t}function m4(e,t){if(e.length<=t)return e;for(var n=Math.floor(e.length/t),r=[],i=0;i<e.length;i+=n)r.push(e[i]);return r}function h4(e,t,n){n===void 0&&(n=!1);var r=e.getBBox(),i=r.width,a=r.height,o=t/Math.max(i,a);return n&&(e.style.transform=`scale(${o})`),o}function g4(e,t){var n=new Map;return e.forEach(function(e){var r=t(e);n.has(r)||n.set(r,[]),n.get(r).push(e)}),n}function _4(e){throw Error(e)}var v4=function(){function e(e,n,r,i,a,o,s){e===void 0&&(e=null),n===void 0&&(n=null),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=[null,null,null,null,null]),o===void 0&&(o=[]),s===void 0&&(s=[]),t.add(this),this._elements=Array.from(e),this._data=n,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}e.prototype.selectAll=function(e){var t=typeof e==`string`?this._parent.querySelectorAll(e):e;return new n(t,null,this._elements[0],this._document)},e.prototype.selectFacetAll=function(e){var t=typeof e==`string`?this._parent.querySelectorAll(e):e;return new n(this._elements,null,this._parent,this._document,void 0,void 0,t)},e.prototype.select=function(e){var t=typeof e==`string`?this._parent.querySelectorAll(e)[0]||null:e;return new n([t],null,t,this._document)},e.prototype.append=function(e){var t=this,r=typeof e==`function`?e:function(){return t.createElement(e)},i=[];if(this._data!==null){for(var a=0;a<this._data.length;a++){var o=this._data[a],s=B(Array.isArray(o)?o:[o,null],2),c=s[0],l=s[1],u=r(c,a);u.__data__=c,l!==null&&(u.__fromElements__=l),this._parent.appendChild(u),i.push(u)}return new n(i,null,this._parent,this._document)}for(var a=0;a<this._elements.length;a++){var d=this._elements[a],c=d.__data__,u=r(c,a);d.appendChild(u),i.push(u)}return new n(i,null,i[0],this._document)},e.prototype.maybeAppend=function(e,n){var i=An(this,t,`m`,r).call(this,e[0]===`#`?e:`#${e}`,n);return i.attr(`id`,e),i},e.prototype.maybeAppendByClassName=function(e,n){var i=e.toString(),a=An(this,t,`m`,r).call(this,i[0]===`.`?i:`.${i}`,n);return a.attr(`className`,i),a},e.prototype.maybeAppendByName=function(e,n){var i=An(this,t,`m`,r).call(this,`[name="${e}"]`,n);return i.attr(`name`,e),i},e.prototype.data=function(e,t,r){var i,a;t===void 0&&(t=function(e){return e}),r===void 0&&(r=function(){return null});for(var o=[],s=[],c=new Set(this._elements),l=[],u=new Set,d=new Map(this._elements.map(function(e,n){return[t(e.__data__,n),e]})),f=new Map(this._facetElements.map(function(e,n){return[t(e.__data__,n),e]})),p=g4(this._elements,function(e){return r(e.__data__)}),m=0;m<e.length;m++){var h=e[m],g=t(h,m),_=r(h,m);if(d.has(g)){var v=d.get(g);v.__data__=h,v.__facet__=!1,s.push(v),c.delete(v),d.delete(g)}else if(f.has(g)){var v=f.get(g);v.__data__=h,v.__facet__=!0,s.push(v),f.delete(g)}else if(p.has(g)){var y=p.get(g);l.push([h,y]);try{for(var b=(i=void 0,Dn(y)),x=b.next();!x.done;x=b.next()){var v=x.value;c.delete(v)}}catch(e){i={error:e}}finally{try{x&&!x.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}p.delete(g)}else if(d.has(_)){var v=d.get(_);v.__toData__?v.__toData__.push(h):v.__toData__=[h],u.add(v),c.delete(v)}else o.push(h)}var S=[new n([],o,this._parent,this._document),new n(s,null,this._parent,this._document),new n(c,null,this._parent,this._document),new n([],l,this._parent,this._document),new n(u,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,S)},e.prototype.merge=function(e){var t=kn(kn([],B(this._elements),!1),B(e._elements),!1),r=kn(kn([],B(this._transitions),!1),B(e._transitions),!1);return new n(t,null,this._parent,this._document,void 0,r)},e.prototype.createElement=function(e){if(this._document)return this._document.createElement(e,{});var t=n.registry[e];return t?new t:_4(`Unknown node type: ${e}`)},e.prototype.join=function(e,t,n,r,i){e===void 0&&(e=function(e){return e}),t===void 0&&(t=function(e){return e}),n===void 0&&(n=function(e){return e.remove()}),r===void 0&&(r=function(e){return e}),i===void 0&&(i=function(e){return e.remove()});var a=e(this._enter),o=t(this._update),s=n(this._exit),c=r(this._merge),l=i(this._split);return o.merge(a).merge(s).merge(c).merge(l)},e.prototype.remove=function(){for(var e=function(e){var n=t._elements[e],r=t._transitions[e];r?r.then(function(){return n.remove()}):n.remove()},t=this,r=0;r<this._elements.length;r++)e(r);return new n([],null,this._parent,this._document,void 0,this._transitions)},e.prototype.each=function(e){for(var t=0;t<this._elements.length;t++){var n=this._elements[t],r=n.__data__;e.call(n,r,t)}return this},e.prototype.attr=function(e,t){var n=typeof t==`function`?t:function(){return t};return this.each(function(r,i){t!==void 0&&(this[e]=n.call(this,r,i))})},e.prototype.style=function(e,t,n){n===void 0&&(n=!0);var r=typeof t!=`function`||!n?function(){return t}:t;return this.each(function(n,i){t!==void 0&&(this.style[e]=r.call(this,n,i))})},e.prototype.styles=function(e,t){return e===void 0&&(e={}),t===void 0&&(t=!0),this.each(function(n,r){var i=this;Object.entries(e).forEach(function(e){var a=B(e,2),o=a[0],s=a[1],c=typeof s!=`function`||!t?function(){return s}:s;s!==void 0&&i.attr(o,c.call(i,n,r))})})},e.prototype.update=function(e,t){t===void 0&&(t=!0);var n=typeof e!=`function`||!t?function(){return e}:e;return this.each(function(t,r){e&&this.update&&this.update(n.call(this,t,r))})},e.prototype.maybeUpdate=function(e,t){t===void 0&&(t=!0);var n=typeof e!=`function`||!t?function(){return e}:e;return this.each(function(t,r){e&&this.update&&this.update(n.call(this,t,r))})},e.prototype.transition=function(e){this._transitions;var t=Array(this._elements.length);return this.each(function(n,r){t[r]=e.call(this,n,r)}),this._transitions=pS(t),this},e.prototype.on=function(e,t){return this.each(function(){this.addEventListener(e,t)}),this},e.prototype.call=function(e){var t=[...arguments].slice(1);return e.call.apply(e,kn([this._parent,this],B(t),!1)),this},e.prototype.node=function(){return this._elements[0]},e.prototype.nodes=function(){return this._elements},e.prototype.transitions=function(){return this._transitions.filter(function(e){return!!e})},e.prototype.parent=function(){return this._parent};var t,n=e,r;return t=new WeakSet,r=function(e,t){var r=this._elements[0],i=r.querySelector(e);if(i)return new n([i],null,this._parent,this._document);var a=typeof t==`string`?this.createElement(t):t();return r.appendChild(a),new n([a],null,this._parent,this._document)},e.registry={g:Lj,rect:Yj,circle:Mj,path:Wj,text:w2,ellipse:Fj,image:Bj,line:Hj,polygon:Kj,polyline:Jj,html:zj},e}();function y4(e){return new v4([e],null,e,e.ownerDocument)}function b4(e,t,n){return e.querySelector(t)?y4(e).select(t):y4(e).append(n)}function x4(e){if(K(e))return[e,e,e,e];if(aS(e)){var t=e.length;if(t===1)return[e[0],e[0],e[0],e[0]];if(t===2)return[e[0],e[1],e[0],e[1]];if(t===3)return[e[0],e[1],e[2],e[1]];if(t===4)return e}return[0,0,0,0]}function S4(e){var t=e.getLocalBounds(),n=t.min,r=t.max,i=B([n,r],2),a=B(i[0],2),o=a[0],s=a[1],c=B(i[1],2),l=c[0],u=c[1];return{x:o,y:s,width:l-o,height:u-s,left:o,bottom:u,top:s,right:l}}function C4(e,t){var n=B(e,2),r=n[0],i=n[1],a=B(t,2),o=a[0],s=a[1];return r!==o&&i===s}function w4(e,t){var n,r,i=t.attributes;try{for(var a=Dn(Object.entries(i)),o=a.next();!o.done;o=a.next()){var s=B(o.value,2),c=s[0],l=s[1];c!==`id`&&c!==`className`&&e.attr(c,l)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}function T4(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}function E4(e){return e.toString().charAt(0).toLowerCase()+e.toString().slice(1)}function D4(e,t){return`${t}${T4(e)}`}function O4(e,t,n){n===void 0&&(n=!0);var r=t||e.match(/^([a-z][a-z0-9]+)/)?.[0]||``,i=e.replace(RegExp(`^(${r})`),``);return n?E4(i):i}function k4(e,t){Object.entries(t).forEach(function(t){var n=B(t,2),r=n[0],i=n[1];kn([e],B(e.querySelectorAll(r)),!1).filter(function(e){return e.matches(r)}).forEach(function(e){if(e){var t=e;t.style.cssText+=Object.entries(i).reduce(function(e,t){return`${e}${t.join(`:`)};`},``)}})})}var A4=function(e,t){if(!e?.startsWith(t))return!1;var n=e[t.length];return n>=`A`&&n<=`Z`};function j4(e,t,n){n===void 0&&(n=!1);var r={};return Object.entries(e).forEach(function(e){var i=B(e,2),a=i[0],o=i[1];if(!(a===`className`||a===`class`)){if(A4(a,`show`)&&A4(O4(a,`show`),t)!==n)a===D4(t,`show`)?r[a]=o:r[a.replace(new RegExp(T4(t)),``)]=o;else if(!A4(a,`show`)&&A4(a,t)!==n){var s=O4(a,t);s===`filter`&&typeof o==`function`||(r[s]=o)}}}),r}function M4(e,t){return Object.entries(e).reduce(function(e,n){var r=B(n,2),i=r[0],a=r[1];return i.startsWith(`show`)?e[`show${t}${i.slice(4)}`]=a:e[`${t}${T4(i)}`]=a,e},{})}function N4(e,t){t===void 0&&(t=[`x`,`y`,`class`,`className`]);var n=[`transform`,`transformOrigin`,`anchor`,`visibility`,`pointerEvents`,`zIndex`,`cursor`,`clipPath`,`clipPathTargets`,`offsetPath`,`offsetPathTargets`,`offsetDistance`,`draggable`,`droppable`],r={},i={};return Object.entries(e).forEach(function(e){var a=B(e,2),o=a[0],s=a[1];t.includes(o)||(n.indexOf(o)===-1?r[o]=s:i[o]=s)}),[r,i]}function P4(e,t){var n={YYYY:e.getFullYear(),MM:e.getMonth()+1,DD:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds()},r=t;return Object.keys(n).forEach(function(e){var t=n[e];r=r.replace(e,e===`YYYY`?`${t}`:`${t}`.padStart(2,`0`))}),r}function F4(e,t,n){var r=e.getBBox(),i=r.width,a=r.height,o=B([t,n].map(function(e,t){return e.includes(`%`)?parseFloat(e.match(/[+-]?([0-9]*[.])?[0-9]+/)?.[0]||`0`)/100*(t===0?i:a):e}),2),s=o[0],c=o[1];return[s,c]}function I4(e,t){if(t)try{var n=t.replace(/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,function(t,n,r){return`translate(${F4(e,n,r)})`});e.attr(`transform`,n)}catch{}}function L4(e){return e[0]?.map(function(t,n){return e.map(function(e){return e[n]})})||[]}var R4=function(e,t){if(t==null){e.innerHTML=``;return}e.replaceChildren?Array.isArray(t)?e.replaceChildren.apply(e,kn([],B(t),!1)):e.replaceChildren(t):(e.innerHTML=``,Array.isArray(t)?t.forEach(function(t){return e.appendChild(t)}):e.appendChild(t))};function z4(e){return/\S+-\S+/g.test(e)?e.split(`-`).map(function(e){return e[0]}):e.length>2?[e[0]]:e.split(``)}var B4=function(e){var t=new DOMParser().parseFromString(e,`text/html`).body.firstElementChild;if(console.log(t?.getClientRects(),11),!t)return 0;var n=t.getAttribute(`style`)||``,r=Object.fromEntries(n.split(`;`).map(function(e){return e.trim()}).filter(function(e){return e.includes(`:`)}).map(function(e){var t=B(e.split(`:`).map(function(e){return e.trim()}),2),n=t[0],r=t[1];return[n.toLowerCase(),r]})),i=function(e){if(!e)return 0;var t=e.match(/([\d.]+)px/);return t?parseFloat(t[1]):0};if(r.height)return i(r.height);var a=i(r[`font-size`])||16,o=r[`line-height`],s=!o||o===`normal`?1.2*a:o.endsWith(`px`)?i(o):/^[\d.]+$/.test(o)?parseFloat(o)*a:a,c=i(r[`padding-top`]),l=i(r[`padding-bottom`]);if(r.padding){var u=r.padding.split(/\s+/).map(i);u.length===1||u.length===2?(c=u[0],l=u[0]):(u.length===3||u.length===4)&&(c=u[0],l=u[2])}var d=i(r[`border-top-width`]),f=i(r[`border-bottom-width`]);if(r.border){var p=r.border.match(/([\d.]+)px/);p&&(d=parseFloat(p[1]),f=parseFloat(p[1]))}if(r[`border-width`]){var u=r[`border-width`].split(/\s+/).map(i);u.length===1||u.length===2?(d=u[0],f=u[0]):(u.length===3||u.length===4)&&(d=u[0],f=u[2])}return s+c+l+d+f};function V4(){b2(this,this.attributes.visibility!==`hidden`)}var H4=function(e){wn(t,e);function t(t,n){n===void 0&&(n={});var r=e.call(this,M2({},{style:n},t))||this;return r.initialized=!1,r._defaultOptions=n,r}return Object.defineProperty(t.prototype,`offscreenGroup`,{get:function(){return this._offscreen||=S2(this),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`defaultOptions`,{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},t.prototype.disconnectedCallback=function(){var e;(e=this._offscreen)==null||e.destroy()},t.prototype.attributeChangedCallback=function(e){e===`visibility`&&V4.call(this)},t.prototype.update=function(e,t){return this.attr(M2({},this.attributes,e||{})),this.render?.call(this,this.attributes,this,t)},t.prototype.clear=function(){this.removeChildren()},t.prototype.bindEvents=function(e,t){},t.prototype.getSubShapeStyle=function(e){return e.x,e.y,e.transform,e.transformOrigin,e.class,e.className,e.zIndex,Tn(e,[`x`,`y`,`transform`,`transformOrigin`,`class`,`className`,`zIndex`])},t}(Pj),U4=function(e,t,n){return[[`M`,e-n,t],[`A`,n,n,0,1,0,e+n,t],[`A`,n,n,0,1,0,e-n,t],[`Z`]]},W4=U4,G4=function(e,t,n){return[[`M`,e-n,t-n],[`L`,e+n,t-n],[`L`,e+n,t+n],[`L`,e-n,t+n],[`Z`]]},K4=function(e,t,n){return[[`M`,e-n,t],[`L`,e,t-n],[`L`,e+n,t],[`L`,e,t+n],[`Z`]]},q4=function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[[`M`,e-n,t+r],[`L`,e,t-r],[`L`,e+n,t+r],[`Z`]]},J4=function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[[`M`,e-n,t-r],[`L`,e+n,t-r],[`L`,e,t+r],[`Z`]]},Y4=function(e,t,n){var r=n/2*Math.sqrt(3);return[[`M`,e,t-n],[`L`,e+r,t-n/2],[`L`,e+r,t+n/2],[`L`,e,t+n],[`L`,e-r,t+n/2],[`L`,e-r,t-n/2],[`Z`]]},X4=function(e,t,n){var r=n-1.5;return[[`M`,e-n,t-r],[`L`,e+n,t+r],[`L`,e+n,t-r],[`L`,e-n,t+r],[`Z`]]},Z4=function(e,t,n){return[[`M`,e,t+n],[`L`,e,t-n]]},Q4=function(e,t,n){return[[`M`,e-n,t-n],[`L`,e+n,t+n],[`M`,e+n,t-n],[`L`,e-n,t+n]]},$4=function(e,t,n){return[[`M`,e-n/2,t-n],[`L`,e+n/2,t-n],[`M`,e,t-n],[`L`,e,t+n],[`M`,e-n/2,t+n],[`L`,e+n/2,t+n]]},e3=function(e,t,n){return[[`M`,e-n,t],[`L`,e+n,t],[`M`,e,t-n],[`L`,e,t+n]]},t3=function(e,t,n){return[[`M`,e-n,t],[`L`,e+n,t]]},n3=function(e,t,n){return[[`M`,e-n,t],[`L`,e+n,t]]},r3=n3,i3=function(e,t,n){return[[`M`,e-n,t],[`A`,n/2,n/2,0,1,1,e,t],[`A`,n/2,n/2,0,1,0,e+n,t]]},a3=function(e,t,n){return[[`M`,e-n-1,t-2.5],[`L`,e,t-2.5],[`L`,e,t+2.5],[`L`,e+n+1,t+2.5]]},o3=function(e,t,n){return[[`M`,e-n-1,t+2.5],[`L`,e,t+2.5],[`L`,e,t-2.5],[`L`,e+n+1,t-2.5]]},s3=function(e,t,n){return[[`M`,e-(n+1),t+2.5],[`L`,e-n/2,t+2.5],[`L`,e-n/2,t-2.5],[`L`,e+n/2,t-2.5],[`L`,e+n/2,t+2.5],[`L`,e+n+1,t+2.5]]};function c3(e,t){return[[`M`,e-5,t+2.5],[`L`,e-5,t],[`L`,e,t],[`L`,e,t-3],[`L`,e,t+3],[`L`,e+6.5,t+3]]}var l3=function(e,t,n){return[[`M`,e-n,t-n],[`L`,e+n,t],[`L`,e-n,t+n],[`Z`]]},u3=function(e,t,n){var r=n,i=n*.2,a=n*.7;return[[`M`,e-r,t],[`A`,r,r,0,1,0,e+r,t],[`A`,r,r,0,1,0,e-r,t],[`Z`],[`M`,e-a,t],[`L`,e-i,t],[`M`,e+i,t],[`L`,e+a,t],[`M`,e,t-a],[`L`,e,t-i],[`M`,e,t+i],[`L`,e,t+a]]};function d3(e){var t=`default`;if(oS(e)&&e instanceof Image)t=`image`;else if(rS(e))t=`symbol`;else if(_S(e)){var n=RegExp(`data:(image|text)`);t=e.match(n)?`base64`:/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?`url`:`symbol`}return t}function f3(e){var t=d3(e);return[`base64`,`url`,`image`].includes(t)?`image`:e&&t===`symbol`?`path`:null}var p3=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(e,n){var r=e.x,i=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=this.getSubShapeStyle(e),c=s.symbol,l=s.size,u=l===void 0?16:l,d=Tn(s,[`symbol`,`size`]),f=f3(c);K2(!!f,y4(n),function(e){e.maybeAppendByClassName(`marker`,f).attr(`className`,`marker ${f}-marker`).call(function(e){if(f===`image`){var n=u*2;e.styles({img:c,width:n,height:n,x:i-u,y:o-u})}else{var n=u/2,r=rS(c)?c:t.getSymbol(c);e.styles(z({d:r?.(i,o,n)},d))}})})},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(e,n){t.MARKER_SYMBOL_MAP.set(e,n)},t.getSymbol=function(e){return t.MARKER_SYMBOL_MAP.get(e)},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys())},t}(H4);p3.registerSymbol(`cross`,Q4),p3.registerSymbol(`hyphen`,t3),p3.registerSymbol(`line`,Z4),p3.registerSymbol(`plus`,e3),p3.registerSymbol(`tick`,$4),p3.registerSymbol(`circle`,U4),p3.registerSymbol(`point`,W4),p3.registerSymbol(`bowtie`,X4),p3.registerSymbol(`hexagon`,Y4),p3.registerSymbol(`square`,G4),p3.registerSymbol(`diamond`,K4),p3.registerSymbol(`triangle`,q4),p3.registerSymbol(`triangle-down`,J4),p3.registerSymbol(`line`,Z4),p3.registerSymbol(`dot`,n3),p3.registerSymbol(`dash`,r3),p3.registerSymbol(`smooth`,i3),p3.registerSymbol(`hv`,a3),p3.registerSymbol(`vh`,o3),p3.registerSymbol(`hvh`,s3),p3.registerSymbol(`vhv`,c3),p3.registerSymbol(`focus`,u3);function m3(e,...t){return t.reduce((e,t)=>n=>e(t(n)),e)}function h3(e,t){return t-e?n=>(n-e)/(t-e):e=>.5}function g3(e,t){let n=t<e?t:e,r=e>t?e:t;return e=>Math.min(Math.max(n,e),r)}function _3(e,t,n,r,i){let a=n||0,o=r||e.length,s=i||(e=>e);for(;a<o;){let n=Math.floor((a+o)/2);s(e[n])>t?o=n:a=n+1}return a}var v3=Math.sqrt(50),y3=Math.sqrt(10),b3=Math.sqrt(2);function x3(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/10**i;return i>=0?(a>=v3?10:a>=y3?5:a>=b3?2:1)*10**i:-(10**-i)/(a>=v3?10:a>=y3?5:a>=b3?2:1)}const S3=(e,t,n=5)=>{let r=[e,t],i=0,a=r.length-1,o=r[i],s=r[a],c;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),c=x3(o,s,n),c>0?(o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c,c=x3(o,s,n)):c<0&&(o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c,c=x3(o,s,n)),c>0?(r[i]=Math.floor(o/c)*c,r[a]=Math.ceil(s/c)*c):c<0&&(r[i]=Math.ceil(o*c)/c,r[a]=Math.floor(s*c)/c),r};function C3(e){return!BS(e)&&!LS(e)&&!Number.isNaN(e)}var w3=t(Hu());function T3(e,t,n){let r=n;return r<0&&(r+=1),r>1&&--r,r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function E3(e){let t=e[0]/360,n=e[1]/100,r=e[2]/100,i=e[3];if(n===0)return[r*255,r*255,r*255,i];let a=r<.5?r*(1+n):r+n-r*n,o=2*r-a,s=T3(o,a,t+1/3),c=T3(o,a,t),l=T3(o,a,t-1/3);return[s*255,c*255,l*255,i]}function D3(e){let t=w3.default.get(e);if(!t)return null;let{model:n,value:r}=t;return n===`rgb`?r:n===`hsl`?E3(r):null}const O3=(e,t)=>n=>e*(1-n)+t*n,k3=(e,t)=>{let n=D3(e),r=D3(t);return n===null||r===null?n?()=>e:()=>t:e=>{let t=[,,,,];for(let i=0;i<4;i+=1){let a=n[i],o=r[i];t[i]=a*(1-e)+o*e}let[i,a,o,s]=t;return`rgba(${Math.round(i)}, ${Math.round(a)}, ${Math.round(o)}, ${s})`}},A3=(e,t)=>typeof e==`number`&&typeof t==`number`?O3(e,t):typeof e==`string`&&typeof t==`string`?k3(e,t):()=>e,j3=(e,t)=>{let n=O3(e,t);return e=>Math.round(n(e))};function M3({map:e,initKey:t},n){let r=t(n);return e.has(r)?e.get(r):n}function N3({map:e,initKey:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function P3({map:e,initKey:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function F3(e){return typeof e==`object`?e.valueOf():e}var I3=class extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=F3,e!==null)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(M3({map:this.map,initKey:this.initKey},e))}has(e){return super.has(M3({map:this.map,initKey:this.initKey},e))}set(e,t){return super.set(N3({map:this.map,initKey:this.initKey},e),t)}delete(e){return super.delete(P3({map:this.map,initKey:this.initKey},e))}},L3=class{constructor(e){this.options=eC({},this.getDefaultOptions()),this.update(e)}getOptions(){return this.options}update(e={}){this.options=eC({},this.options,e),this.rescale(e)}rescale(e){}};const R3=Symbol(`defaultUnknown`);function z3(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r)}function B3(e){let{value:t,from:n,to:r,mapper:i,notFoundReturn:a}=e,o=i.get(t);if(o===void 0){if(a!==R3)return a;o=n.push(t)-1,i.set(t,o)}return r[o%r.length]}function V3(e){return e instanceof Date?e=>`${e}`:typeof e==`object`?e=>JSON.stringify(e):e=>e}var H3=class e extends L3{getDefaultOptions(){return{domain:[],range:[],unknown:R3}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&z3(this.domainIndexMap,this.getDomain(),this.domainKey),B3({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&z3(this.rangeIndexMap,this.getRange(),this.rangeKey),B3({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){let[t]=this.options.domain,[n]=this.options.range;if(this.domainKey=V3(t),this.rangeKey=V3(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new e(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;let{domain:e,compare:t}=this.options;return this.sortedDomain=t?[...e].sort(t):e,this.sortedDomain}};function U3(e){let t=Math.min(...e);return e.map(e=>e/t)}function W3(e,t){let n=e.length,r=t-n;return r>0?[...e,...Array(r).fill(1)]:r<0?e.slice(0,t):e}function G3(e){return Math.round(e*0xe8d4a51000)/0xe8d4a51000}function K3(e){let{domain:t,range:n,paddingOuter:r,paddingInner:i,flex:a,round:o,align:s}=e,c=t.length,l=W3(a,c),[u,d]=n,f=d-u,p=2/c*r+1-1/c*i,m=f/p,h=m*i/c,g=m-c*h,_=U3(l),v=_.reduce((e,t)=>e+t),y=g/v,b=new I3(t.map((e,t)=>{let n=_[t]*y;return[e,o?Math.floor(n):n]})),x=new I3(t.map((e,t)=>{let n=_[t]*y+h;return[e,o?Math.floor(n):n]})),S=Array.from(x.values()).reduce((e,t)=>e+t),C=(f-(S-S/c*i))*s,w=u+C,T=o?Math.round(w):w,E=Array(c);for(let e=0;e<c;e+=1){E[e]=G3(T);let n=t[e];T+=x.get(n)}return{valueBandWidth:b,valueStep:x,adjustedRange:E}}function q3(e){let{domain:t}=e,n=t.length;if(n===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(e.flex?.length)return K3(e);let{range:r,paddingOuter:i,paddingInner:a,round:o,align:s}=e,c,l,u=r[0],d=r[1]-u,f=i*2,p=n-a;c=d/Math.max(1,f+p),o&&(c=Math.floor(c)),u+=(d-c*(n-a))*s,l=c*(1-a),o&&(u=Math.round(u),l=Math.round(l));let m=Array(n).fill(0).map((e,t)=>u+t*c);return{valueStep:c,valueBandWidth:l,adjustedRange:m}}var J3=class e extends H3{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:R3,flex:[]}}constructor(e){super(e)}clone(){return new e(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep==`number`?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth==`number`?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){let{padding:e,paddingInner:t}=this.options;return e>0?e:t}getPaddingOuter(){let{padding:e,paddingOuter:t}=this.options;return e>0?e:t}rescale(){super.rescale();let{align:e,domain:t,range:n,round:r,flex:i}=this.options,{adjustedRange:a,valueBandWidth:o,valueStep:s}=q3({align:e,range:n,round:r,flex:i,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:t});this.valueStep=s,this.valueBandWidth=o,this.adjustedRange=a}};const Y3=(e,t,n)=>{let r,i,a=e,o=t;if(a===o&&n>0)return[a];let s=x3(a,o,n);if(s===0||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=Array(r=Math.ceil(o-a+1));for(let e=0;e<r;e+=1)i[e]=(a+e)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=Array(r=Math.ceil(o-a+1));for(let e=0;e<r;e+=1)i[e]=(a+e)/s}return i};var X3=(e,t,n)=>{let[r,i]=e,[a,o]=t,s,c;return r<i?(s=h3(r,i),c=n(a,o)):(s=h3(i,r),c=n(o,a)),m3(c,s)},Z3=(e,t,n)=>{let r=Math.min(e.length,t.length)-1,i=Array(r),a=Array(r),o=e[0]>e[r],s=o?[...e].reverse():e,c=o?[...t].reverse():t;for(let e=0;e<r;e+=1)i[e]=h3(s[e],s[e+1]),a[e]=n(c[e],c[e+1]);return t=>{let n=_3(e,t,1,r)-1,o=i[n],s=a[n];return m3(s,o)(t)}},Q3=(e,t,n,r)=>(Math.min(e.length,t.length)>2?Z3:X3)(e,t,r?j3:n),$3=class extends L3{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:O3,tickCount:5}}map(e){return C3(e)?this.output(e):this.options.unknown}invert(e){return C3(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice)return;let[e,t,n,...r]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,t,n,...r)}getTicks(){let{tickMethod:e}=this.options,[t,n,r,...i]=this.getTickMethodOptions();return e(t,n,r,...i)}getTickMethodOptions(){let{domain:e,tickCount:t}=this.options,n=e[0],r=e[e.length-1];return[n,r,t]}chooseNice(){return S3}rescale(){this.nice();let[e,t]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,t,this.chooseClamp(t))}chooseClamp(e){let{clamp:t,range:n}=this.options,r=this.options.domain.map(e),i=Math.min(r.length,n.length);return t?g3(r[0],r[i-1]):hC}composeOutput(e,t){let{domain:n,range:r,round:i,interpolate:a}=this.options,o=Q3(n.map(e),r,a,i);this.output=m3(o,t,e)}composeInput(e,t,n){let{domain:r,range:i}=this.options,a=Q3(i,r.map(e),O3);this.input=m3(t,n,a)}},e6=class e extends $3{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:A3,tickMethod:Y3,tickCount:5}}chooseTransforms(){return[hC,hC]}clone(){return new e(this.options)}},t6=function(e){wn(t,e);function t(t){var n=this,r=t.style,i=Tn(t,[`style`]);return n=e.call(this,eC({},{type:`column`},z({style:r},i)))||this,n.columnsGroup=new Lj({name:`columns`}),n.appendChild(n.columnsGroup),n.render(),n}return t.prototype.render=function(){var e=this.attributes,t=e.columns,n=e.x,r=e.y;this.columnsGroup.style.transform=`translate(${n}, ${r})`,y4(this.columnsGroup).selectAll(`.column`).data(t.flat()).join(function(e){return e.append(`rect`).attr(`className`,`column`).each(function(e){this.attr(e)})},function(e){return e.each(function(e){this.attr(e)})},function(e){return e.remove()})},t.prototype.update=function(e){this.attr(M2({},this.attributes,e)),this.render()},t.prototype.clear=function(){this.removeChildren()},t}(jj),n6=function(e){wn(t,e);function t(t){var n=this,r=t.style,i=Tn(t,[`style`]);return n=e.call(this,eC({},{type:`lines`},z({style:r},i)))||this,n.linesGroup=n.appendChild(new Lj),n.areasGroup=n.appendChild(new Lj),n.render(),n}return t.prototype.render=function(){var e=this.attributes,t=e.lines,n=e.areas,r=e.x,i=e.y;this.style.transform=`translate(${r}, ${i})`,t&&this.renderLines(t),n&&this.renderAreas(n)},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},t.prototype.update=function(e){this.attr(M2({},this.attributes,e)),this.render()},t.prototype.renderLines=function(e){y4(this.linesGroup).selectAll(`.line`).data(e).join(function(e){return e.append(`path`).attr(`className`,`line`).each(function(e){this.attr(e)})},function(e){return e.each(function(e){this.attr(e)})},function(e){return e.remove()})},t.prototype.renderAreas=function(e){y4(this.linesGroup).selectAll(`.area`).data(e).join(function(e){return e.append(`path`).attr(`className`,`area`).each(function(e){this.attr(e)})},function(e){return e.each(function(e){this.style(e)})},function(e){return e.remove()})},t}(jj);function r6(e,t){var n,r=t.x,i=t.y,a=B(i.getOptions().range||[0,0],2),o=a[0],s=a[1];return s>o&&(n=B([o,s],2),s=n[0],o=n[1]),e.map(function(e){return e.map(function(e,t){return[r.map(t),SS(i.map(e),s,o)]})})}function i6(e,t){t===void 0&&(t=!1);var n=t?e.length-1:0,r=e.map(function(e,t){return kn([t===n?`M`:`L`],B(e),!1)});return t?r.reverse():r}function a6(e,t){if(t===void 0&&(t=!1),e.length<=2)return i6(e);for(var n=[],r=e.length,i=0;i<r;i+=1){var a=t?e[r-i-1]:e[i];aC(a,n.slice(-2))||n.push.apply(n,kn([],B(a),!1))}var o=u4(n,!1);return t?o.unshift(kn([`M`],B(e[r-1]),!1)):o.unshift(kn([`M`],B(e[0]),!1)),o}function o6(e,t,n){var r=GS(e);return r.push([`L`,t,n],[`L`,0,n],[`Z`]),r}function s6(e,t,n,r){return e.map(function(e){return o6(t?a6(e):i6(e),n,r)})}function c6(e,t,n){for(var r=[],i=e.length-1;i>=0;--i){var a=e[i],o=i6(a),s=void 0;if(i===0)s=o6(o,t,n);else{var c=e[i-1],l=i6(c,!0);l[0][0]=`L`,s=kn(kn(kn([],B(o),!1),B(l),!1),[[`Z`]],!1)}r.push(s)}return r}function l6(e,t,n){for(var r=[],i=e.length-1;i>=0;--i){var a=e[i],o=a6(a),s=void 0;if(i===0)s=o6(o,t,n);else{var c=e[i-1],l=a6(c,!0),u=a[0];l[0][0]=`L`,s=kn(kn(kn([],B(o),!1),B(l),!1),[kn([`M`],B(u),!1),[`Z`]],!1)}r.push(s)}return r}function u6(e){return e.length===0?[0,0]:[hS(ES(e,function(e){return hS(e)||0})),mS(TS(e,function(e){return mS(e)||0}))]}function d6(e){for(var t=GS(e),n=t[0].length,r=B([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],a=r[1],o=0;o<t.length;o+=1)for(var s=t[o],c=0;c<n;c+=1)s[c]>=0?(s[c]+=i[c],i[c]=s[c]):(s[c]+=a[c],a[c]=s[c]);return t}var f6=function(e){wn(t,e);function t(t){return e.call(this,t,{type:`line`,x:0,y:0,width:200,height:20,isStack:!1,color:[`#83daad`,`#edbf45`,`#d2cef9`,`#e290b3`,`#6f63f4`],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:`#fff`,scale:1,spacing:0})||this}return Object.defineProperty(t.prototype,`rawData`,{get:function(){var e=this.attributes.data;if(!e||e?.length===0)return[[]];var t=GS(e);return K(t[0])?[t]:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`data`,{get:function(){return this.attributes.isStack?d6(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`scales`,{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`baseline`,{get:function(){var e=this.scales.y,t=B(e.getOptions().domain||[0,0],2),n=t[0],r=t[1];return r<0?e.map(r):e.map(n<0?0:n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`containerShape`,{get:function(){var e=this.attributes,t=e.width,n=e.height;return{width:t,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`linesStyle`,{get:function(){var e=this,t=this.attributes,n=t.type,r=t.isStack,i=t.smooth;if(n!==`line`)throw Error(`linesStyle can only be used in line type`);var a=j4(this.attributes,`area`),o=j4(this.attributes,`line`),s=this.containerShape.width,c=this.data;if(c[0].length===0)return{lines:[],areas:[]};var l=this.scales,u=l.x,d=l.y,f=r6(c,{type:`line`,x:u,y:d}),p=[];if(a){var m=this.baseline;p=r?i?l6(f,s,m):c6(f,s,m):s6(f,i,s,m)}return{lines:f.map(function(t,n){return z({stroke:e.getColor(n),d:i?a6(t):i6(t)},o)}),areas:p.map(function(t,n){return z({d:t,fill:e.getColor(n)},a)})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`columnsStyle`,{get:function(){var e=this,t=j4(this.attributes,`column`),n=this.attributes,r=n.isStack,i=n.type,a=n.scale;if(i!==`column`)throw Error(`columnsStyle can only be used in column type`);var o=this.containerShape.height,s=this.rawData;if(!s)return{columns:[]};r&&(s=d6(s));var c=this.createScales(s),l=c.x,u=c.y,d=B(u6(s),2),f=d[0],p=d[1],m=new e6({domain:[0,p-(f>0?0:f)],range:[0,o*a]}),h=l.getBandWidth(),g=this.rawData;return{columns:s.map(function(n,i){return n.map(function(n,a){var o=h/s.length;return z(z({fill:e.getColor(i)},t),r?function(){return{x:l.map(a),y:u.map(n),width:h,height:m.map(g[i][a])}}():function(){return{x:l.map(a)+o*i,y:n>=0?u.map(n):u.map(0),width:o,height:m.map(Math.abs(n))}}())})})}},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t){b4(t,`.container`,`rect`).attr(`className`,`container`).node();var n=e.type,r=e.x,i=e.y,a=`spark${n}`,o=z({x:r,y:i},n===`line`?this.linesStyle:this.columnsStyle);y4(t).selectAll(`.spark`).data([n]).join(function(e){return e.append(function(e){return e===`line`?new n6({className:a,style:o}):new t6({className:a,style:o})}).attr(`className`,`spark ${a}`)},function(e){return e.update(o)},function(e){return e.remove()})},t.prototype.getColor=function(e){var t=this.attributes.color;return aS(t)?t[e%t.length]:rS(t)?t.call(null,e):t},t.prototype.createScales=function(e){var t=this.attributes,n=t.type,r=t.scale,i=t.range,a=i===void 0?[]:i,o=t.spacing,s=this.containerShape,c=s.width,l=s.height,u=B(u6(e),2),d=u[0],f=u[1],p=new e6({domain:[a[0]??d,a[1]??f],range:[l,l*(1-r)]});return n===`line`?{type:n,x:new e6({domain:[0,e[0].length-1],range:[0,c]}),y:p}:{type:n,x:new J3({domain:e[0].map(function(e,t){return t}),range:[0,c],paddingInner:o,paddingOuter:o/2,align:.5}),y:p}},t.tag=`sparkline`,t}(H4);function p6(e){return typeof e==`boolean`?!1:`enter`in e&&`update`in e&&`exit`in e}function m6(e){if(!e)return{enter:!1,update:!1,exit:!1};var t=[`enter`,`update`,`exit`],n=Object.fromEntries(Object.entries(e).filter(function(e){var n=B(e,1),r=n[0];return!t.includes(r)}));return Object.fromEntries(t.map(function(t){return p6(e)?e[t]===!1?[t,!1]:[t,z(z({},e[t]),n)]:[t,n]}))}function h6(e,t){e?e.finished.then(t):t()}function g6(e,t){e.length===0?t():Promise.all(e.map(function(e){return e?.finished})).then(t)}function _6(e,t){`update`in e?e.update(t):e.attr(t)}function v6(e,t,n){if(t.length===0)return null;if(!n){var r=t.slice(-1)[0];return _6(e,{style:r}),null}return e.animate(t,n)}function y6(e,t){return!(e.nodeName!==`text`||t.nodeName!==`text`||e.attributes.text!==t.attributes.text)}function b6(e,t,n,r){if(r===void 0&&(r=`destroy`),y6(e,t))return e.remove(),[null];var i=function(){r===`destroy`?e.destroy():r===`hide`&&y2(e),t.isVisible()&&v2(t)};if(!n)return i(),[null];var a=n.duration,o=a===void 0?0:a,s=n.delay,c=s===void 0?0:s,l=Math.ceil(o/2),u=o/4,d=B(e.getGeometryBounds().center,2),f=d[0],p=d[1],m=B(t.getGeometryBounds().center,2),h=m[0],g=m[1],_=B([(f+h)/2-f,(p+g)/2-p],2),v=_[0],y=_[1],b=e.style.opacity,x=b===void 0?1:b,S=t.style.opacity,C=S===void 0?1:S,w=e.style.transform||``,T=t.style.transform||``,E=e.animate([{opacity:x,transform:`translate(0, 0) ${w}`},{opacity:0,transform:`translate(${v}, ${y}) ${w}`}],z(z({fill:`both`},n),{duration:c+l+u})),D=t.animate([{opacity:0,transform:`translate(${-v}, ${-y}) ${T}`,offset:.01},{opacity:C,transform:`translate(0, 0) ${T}`}],z(z({fill:`both`},n),{duration:l+u,delay:c+l-u}));return h6(D,i),[E,D]}function x6(e,t,n){var r={},i={};return Object.entries(t).forEach(function(t){var n=B(t,2),a=n[0],o=n[1];if(!iS(o)){var s=e.style[a]||e.parsedStyle[a]||0;s!==o&&(r[a]=s,i[a]=o)}}),n?v6(e,[r,i],z({fill:`both`},n)):(_6(e,i),null)}function S6(e,t){return e.style.opacity||(e.style.opacity=1),x6(e,{opacity:0},t)}var C6={fill:`#fff`,lineWidth:1,radius:2,size:10,stroke:`#bfbfbf`,strokeOpacity:1,zIndex:0},w6={fill:`#000`,fillOpacity:.45,fontSize:12,textAlign:`center`,textBaseline:`middle`,zIndex:1},T6={x:0,y:0,orientation:`horizontal`,showLabel:!0,type:`start`},E6=k2({foreground:`foreground`,handle:`handle`,selection:`selection`,sparkline:`sparkline`,sparklineGroup:`sparkline-group`,track:`track`,brushArea:`brush-area`},`slider`),D6=k2({labelGroup:`label-group`,label:`label`,iconGroup:`icon-group`,icon:`icon`,iconRect:`icon-rect`,iconLine:`icon-line`},`handle`),O6=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(e,t){var n=e.x,r=e.y,i=e.size,a=i===void 0?10:i,o=e.radius,s=o===void 0?a/4:o,c=e.orientation,l=Tn(e,[`x`,`y`,`size`,`radius`,`orientation`]),u=a,d=u*2.4,f=y4(t).maybeAppendByClassName(D6.iconRect,`rect`).styles(z(z({},l),{width:u,height:d,radius:s,x:n-u/2,y:r-d/2,transformOrigin:`center`})),p=n+1/3*u-u/2,m=n+2/3*u-u/2,h=r+1/4*d-d/2,g=r+3/4*d-d/2;f.maybeAppendByClassName(`${D6.iconLine}-1`,`line`).styles(z({x1:p,x2:p,y1:h,y2:g},l)),f.maybeAppendByClassName(`${D6.iconLine}-2`,`line`).styles(z({x1:m,x2:m,y1:h,y2:g},l)),c===`vertical`&&(f.node().style.transform=`rotate(90)`)},t}(H4),k6=function(e){wn(t,e);function t(t){return e.call(this,t,T6)||this}return t.prototype.renderLabel=function(e){var t=this,n=this.attributes,r=n.x,i=n.y,a=n.showLabel,o=j4(this.attributes,`label`),s=o.x,c=s===void 0?0:s,l=o.y,u=l===void 0?0:l,d=o.transform,f=o.transformOrigin,p=Tn(o,[`x`,`y`,`transform`,`transformOrigin`]),m=B(N4(p,[]),2),h=m[0],g=m[1],_=y4(e).maybeAppendByClassName(D6.labelGroup,`g`).styles(g),v=z(z({},w6),h),y=v.text,b=Tn(v,[`text`]);K2(!!a,_,function(e){t.label=e.maybeAppendByClassName(D6.label,`text`).styles(z(z({},b),{x:r+c,y:i+u,transform:d,transformOrigin:f,text:`${y}`})),t.label.on(`mousedown`,function(e){e.stopPropagation()}),t.label.on(`touchstart`,function(e){e.stopPropagation()})})},t.prototype.renderIcon=function(e){var t=this.attributes,n=t.x,r=t.y,i=t.orientation,a=t.type,o=z(z({x:n,y:r,orientation:i},C6),j4(this.attributes,`icon`)),s=this.attributes.iconShape,c=s===void 0?function(){return new O6({style:o})}:s;y4(e).maybeAppendByClassName(D6.iconGroup,`g`).selectAll(D6.icon.class).data([c]).join(function(e){return e.append(typeof c==`string`?c:function(){return c(a)}).attr(`className`,D6.icon.name)},function(e){return e.update(o)},function(e){return e.remove()})},t.prototype.render=function(e,t){this.renderIcon(t),this.renderLabel(t)},t}(H4),A6=function(e){wn(t,e);function t(t){var n=e.call(this,t,z(z(z({x:0,y:0,animate:{duration:100,fill:`both`},brushable:!0,formatter:function(e){return e.toString()},handleSpacing:2,orientation:`horizontal`,padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:`#5B8FF9`,selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:`#416180`,trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:`range`,selectionType:`select`,handleIconOffset:0},M4(T6,`handle`)),M4(C6,`handleIcon`)),M4(w6,`handleLabel`)))||this;return n.range=[0,1],n.onDragStart=function(e){return function(t){t.stopPropagation(),n.target=e,n.prevPos=n.getOrientVal(H2(t));var r=n.availableSpace,i=r.x,a=r.y,o=n.getBBox(),s=o.x,c=o.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([i,a])-n.getOrientVal([+s,+c])),n.selectionWidth=0,document.addEventListener(`pointermove`,n.onDragging),document.addEventListener(`pointerup`,n.onDragEnd)}},n.onDragging=function(e){var t=n.attributes,r=t.slidable,i=t.brushable,a=t.type;e.stopPropagation();var o=n.getOrientVal(H2(e)),s=o-n.prevPos;if(s){var c=n.getRatio(s);switch(n.target){case`start`:r&&n.setValuesOffset(c);break;case`end`:r&&n.setValuesOffset(0,c);break;case`selection`:r&&n.setValuesOffset(c,c);break;case`track`:if(!i)return;n.selectionWidth+=c,a===`range`?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0);break;default:break}n.prevPos=o}},n.onDragEnd=function(){document.removeEventListener(`pointermove`,n.onDragging),document.removeEventListener(`pointermove`,n.onDragging),document.removeEventListener(`pointerup`,n.onDragEnd),n.target=``,n.updateHandlesPosition(!1)},n.onValueChange=function(e){var t=n.attributes,r=t.onChange,i=t.type,a=i===`range`?e:e[1],o=i===`range`?n.getValues():n.getValues()[1],s=new DA(`valuechange`,{detail:{oldValue:a,value:o}});n.dispatchEvent(s),r?.(o)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target=``,n}return Object.defineProperty(t.prototype,`values`,{get:function(){return this.attributes.values},set:function(e){this.attributes.values=this.clampValues(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`sparklineStyle`,{get:function(){if(this.attributes.orientation!==`horizontal`)return null;var e=j4(this.attributes,`sparkline`);return z(z({zIndex:0},this.availableSpace),e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`shape`,{get:function(){var e=this.attributes,t=e.trackLength,n=e.trackSize,r=B(this.getOrientVal([[t,n],[n,t]]),2),i=r[0],a=r[1];return{width:i,height:a}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`availableSpace`,{get:function(){var e=this.attributes;e.x,e.y;var t=e.padding,n=B(x4(t),4),r=n[0],i=n[1],a=n[2],o=n[3],s=this.shape,c=s.width,l=s.height;return{x:o,y:r,width:c-(o+i),height:l-(r+a)}},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values},t.prototype.setValues=function(e,t){e===void 0&&(e=[0,0]),t===void 0&&(t=!1),this.attributes.values=e;var n=t===!1?!1:this.attributes.animate;this.updateSelectionArea(n),this.updateHandlesPosition(n)},t.prototype.updateSelectionArea=function(e){var t=this.calcSelectionArea();this.foregroundGroup.selectAll(E6.selection.class).each(function(n,r){x6(this,t[r],e)})},t.prototype.updateHandlesPosition=function(e){this.attributes.showHandle&&(this.startHandle&&x6(this.startHandle,this.getHandleStyle(`start`),e),this.endHandle&&x6(this.endHandle,this.getHandleStyle(`end`),e))},t.prototype.innerSetValues=function(e,t){e===void 0&&(e=[0,0]),t===void 0&&(t=!1);var n=this.values,r=this.clampValues(e);this.attributes.values=r,this.setValues(r),t&&this.onValueChange(n)},t.prototype.renderTrack=function(e){var t=this.attributes,n=t.x,r=t.y,i=j4(this.attributes,`track`);this.trackShape=y4(e).maybeAppendByClassName(E6.track,`rect`).styles(z(z({x:n,y:r},this.shape),i))},t.prototype.renderBrushArea=function(e){var t=this.attributes,n=t.x,r=t.y,i=t.brushable;this.brushArea=y4(e).maybeAppendByClassName(E6.brushArea,`rect`).styles(z({x:n,y:r,fill:`transparent`,cursor:i?`crosshair`:`default`},this.shape))},t.prototype.renderSparkline=function(e){var t=this,n=this.attributes,r=n.x,i=n.y,a=n.orientation,o=y4(e).maybeAppendByClassName(E6.sparklineGroup,`g`);K2(a===`horizontal`,o,function(e){var n=z(z({},t.sparklineStyle),{x:r,y:i});e.maybeAppendByClassName(E6.sparkline,function(){return new f6({style:n})}).update(n)})},t.prototype.renderHandles=function(){var e=this,t,n=this.attributes,r=n.showHandle,i=n.type===`range`?[`start`,`end`]:[`end`],a=r?i:[],o=this;(t=this.foregroundGroup)==null||t.selectAll(E6.handle.class).data(a.map(function(e){return{type:e}}),function(e){return e.type}).join(function(t){return t.append(function(t){var n=t.type;return new k6({style:e.getHandleStyle(n)})}).each(function(e){var t=e.type;this.attr(`class`,`${E6.handle.name} ${t}-handle`);var n=`${t}Handle`;o[n]=this,this.addEventListener(`pointerdown`,o.onDragStart(t))})},function(e){return e.each(function(e){var t=e.type;this.update(o.getHandleStyle(t))})},function(e){return e.each(function(e){var t=`${e.type}Handle`;o[t]=void 0}).remove()})},t.prototype.renderSelection=function(e){var t=this.attributes,n=t.x,r=t.y,i=t.type,a=t.selectionType;this.foregroundGroup=y4(e).maybeAppendByClassName(E6.foreground,`g`);var o=j4(this.attributes,`selection`),s=function(e){return e.style(`visibility`,function(e){return e.show?`visible`:`hidden`}).style(`cursor`,function(e){return a===`select`?`grab`:a===`invert`?`crosshair`:`default`}).styles(z(z({},o),{transform:`translate(${n}, ${r})`}))},c=this;this.foregroundGroup.selectAll(E6.selection.class).data(i===`value`?[]:this.calcSelectionArea().map(function(e,t){return{style:z({},e),index:t,show:a===`select`?t===1:t!==1}}),function(e){return e.index}).join(function(e){return e.append(`rect`).attr(`className`,E6.selection.name).call(s).each(function(e,t){var n=this;t===1?(c.selectionShape=y4(this),this.on(`pointerdown`,function(e){n.attr(`cursor`,`grabbing`),c.onDragStart(`selection`)(e)}),c.dispatchCustomEvent(this,`pointerenter`,`selectionMouseenter`),c.dispatchCustomEvent(this,`pointerleave`,`selectionMouseleave`),c.dispatchCustomEvent(this,`click`,`selectionClick`),this.addEventListener(`pointerdown`,function(){n.attr(`cursor`,`grabbing`)}),this.addEventListener(`pointerup`,function(){n.attr(`cursor`,`pointer`)}),this.addEventListener(`pointerover`,function(){n.attr(`cursor`,`pointer`)})):this.on(`pointerdown`,c.onDragStart(`track`))})},function(e){return e.call(s)},function(e){return e.remove()}),this.updateSelectionArea(!1),this.renderHandles()},t.prototype.render=function(e,t){this.renderTrack(t),this.renderSparkline(t),this.renderBrushArea(t),this.renderSelection(t)},t.prototype.clampValues=function(e,t){var n;t===void 0&&(t=4);var r=B(this.range,2),i=r[0],a=r[1],o=B(this.getValues().map(function(e){return s4(e,t)}),2),s=o[0],c=o[1],l=B(((Array.isArray(e)?e:[s,e??c])||[s,c]).map(function(e){return s4(e,t)}),2),u=l[0],d=l[1];if(this.attributes.type===`value`)return[0,SS(d,i,a)];u>d&&(n=B([d,u],2),u=n[0],d=n[1]);var f=d-u;return f>a-i?[i,a]:u<i?s===i&&c===d?[i,d]:[i,f+i]:d>a?c===a&&s===u?[u,a]:[a-f,a]:[u,d]},t.prototype.calcSelectionArea=function(e){var t=B(this.clampValues(e),2),n=t[0],r=t[1],i=this.availableSpace,a=i.x,o=i.y,s=i.width,c=i.height;return this.getOrientVal([[{y:o,height:c,x:a,width:n*s},{y:o,height:c,x:n*s+a,width:(r-n)*s},{y:o,height:c,x:r*s,width:(1-r)*s}],[{x:a,width:s,y:o,height:n*c},{x:a,width:s,y:n*c+o,height:(r-n)*c},{x:a,width:s,y:r*c,height:(1-r)*c}]])},t.prototype.calcHandlePosition=function(e){var t=this.attributes.handleIconOffset,n=this.availableSpace,r=n.x,i=n.y,a=n.width,o=n.height,s=B(this.clampValues(),2),c=s[0],l=s[1],u=e===`start`?-t:t,d=(e===`start`?c:l)*this.getOrientVal([a,o])+u;return{x:r+this.getOrientVal([d,a/2]),y:i+this.getOrientVal([o/2,d])}},t.prototype.inferTextStyle=function(e){return this.attributes.orientation===`horizontal`?{}:e===`start`?{transformOrigin:`left center`,transform:`rotate(90)`,textAlign:`start`}:e===`end`?{transformOrigin:`right center`,transform:`rotate(90)`,textAlign:`end`}:{}},t.prototype.calcHandleText=function(e){var t,n=this.attributes,r=n.type,i=n.orientation,a=n.formatter,o=n.autoFitLabel,s=j4(this.attributes,`handle`),c=j4(s,`label`),l=s.spacing,u=this.getHandleSize(),d=this.clampValues(),f=e===`start`?d[0]:d[1],p=a(f),m=new w2({style:z(z(z({},c),this.inferTextStyle(e)),{text:p})}),h=m.getBBox(),g=h.width,_=h.height;if(m.destroy(),!o){if(r===`value`)return{text:p,x:0,y:-_-l};var v=l+u+(i===`horizontal`?g/2:0);return t={text:p},t[i===`horizontal`?`x`:`y`]=e===`start`?-v:v,t}var y=0,b=0,x=this.availableSpace,S=x.width,C=x.height,w=this.calcSelectionArea()[1],T=w.x,E=w.y,D=w.width,O=w.height,k=l+u;if(i===`horizontal`){var A=k+g/2;y=e===`start`?T-k-g>0?-A:A:S-T-D-k>g?A:-A}else{var j=k,M=_+k;b=e===`start`?E-u>_?-M:j:C-(E+O)-u>_?M:-j}return{x:y,y:b,text:p}},t.prototype.getHandleLabelStyle=function(e){var t=j4(this.attributes,`handleLabel`);return z(z(z({},t),this.calcHandleText(e)),this.inferTextStyle(e))},t.prototype.getHandleIconStyle=function(){var e=this.attributes.handleIconShape,t=j4(this.attributes,`handleIcon`),n=this.getOrientVal([`ew-resize`,`ns-resize`]),r=this.getHandleSize();return z({cursor:n,shape:e,size:r},t)},t.prototype.getHandleStyle=function(e){var t=this.attributes,n=t.x,r=t.y,i=t.showLabel,a=t.showLabelOnInteraction,o=t.orientation,s=this.calcHandlePosition(e),c=s.x,l=s.y,u=this.calcHandleText(e),d=i;return!i&&a&&(d=!!this.target),z(z(z({},M4(this.getHandleIconStyle(),`icon`)),M4(z(z({},this.getHandleLabelStyle(e)),u),`label`)),{transform:`translate(${c+n}, ${l+r})`,orientation:o,showLabel:d,type:e,zIndex:3})},t.prototype.getHandleSize=function(){var e=this.attributes,t=e.handleIconSize,n=e.width,r=e.height;return t||Math.floor((this.getOrientVal([+r,+n])+4)/2.4)},t.prototype.getOrientVal=function(e){var t=B(e,2),n=t[0],r=t[1];return this.attributes.orientation===`horizontal`?n:r},t.prototype.setValuesOffset=function(e,t){t===void 0&&(t=0);var n=this.attributes.type,r=B(this.getValues(),2),i=r[0],a=r[1],o=[i+(n===`range`?e:0),a+t].sort();this.innerSetValues(o,!0)},t.prototype.getRatio=function(e){var t=this.availableSpace,n=t.width,r=t.height;return e/this.getOrientVal([n,r])},t.prototype.dispatchCustomEvent=function(e,t,n){var r=this;e.on(t,function(e){e.stopPropagation(),r.dispatchEvent(new DA(n,{detail:e}))})},t.prototype.bindEvents=function(){this.addEventListener(`wheel`,this.onScroll);var e=this.brushArea;this.dispatchCustomEvent(e,`click`,`trackClick`),this.dispatchCustomEvent(e,`pointerenter`,`trackMouseenter`),this.dispatchCustomEvent(e,`pointerleave`,`trackMouseleave`),e.on(`pointerdown`,this.onDragStart(`track`))},t.prototype.onScroll=function(e){if(this.attributes.scrollable){var t=e.deltaX,n=e.deltaY||t,r=this.getRatio(n);this.setValuesOffset(r,r)}},t.tag=`slider`,t}(H4),j6={data:[],animate:{enter:!1,update:{duration:100,easing:`ease-in-out-sine`,fill:`both`},exit:{duration:100,fill:`both`}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:`black`,crossPadding:10,titleFill:`black`,titleFontSize:12,titlePosition:`lb`,titleSpacing:0,titleTextAlign:`center`,titleTextBaseline:`middle`,lineArrow:function(){return new Wj({style:{d:[[`M`,10,10],[`L`,-10,0],[`L`,10,-10],[`L`,0,0],[`L`,10,10],[`Z`]],fill:`black`,transformOrigin:`center`}})},labelAlign:`parallel`,labelDirection:`positive`,labelFontSize:12,labelSpacing:0,gridConnect:`line`,gridControlAngles:[],gridDirection:`positive`,gridLength:0,gridType:`segment`,lineArrowOffset:15,lineArrowSize:10,tickDirection:`positive`,tickLength:5,tickLineWidth:1,tickStroke:`black`,labelOverlap:[]};eC({},j6,{style:{type:`arc`}}),eC({},j6,{style:{}});var M6=k2({mainGroup:`main-group`,gridGroup:`grid-group`,grid:`grid`,lineGroup:`line-group`,line:`line`,tickGroup:`tick-group`,tick:`tick`,tickItem:`tick-item`,labelGroup:`label-group`,label:`label`,labelItem:`label-item`,titleGroup:`title-group`,title:`title`,lineFirst:`line-first`,lineSecond:`line-second`},`axis`),N6=k2({lineGroup:`line-group`,line:`line`,regionGroup:`region-group`,region:`region`},`grid`);function P6(e){return e.reduce(function(e,t,n){return e.push(kn([n===0?`M`:`L`],B(t),!1)),e},[])}function F6(e,t,n){var r=t.connect,i=r===void 0?`line`:r,a=t.center;if(i===`line`)return P6(e);if(!a)return[];var o=i4(e[0],a),s=n?0:1;return e.reduce(function(e,t,n){return n===0?e.push(kn([`M`],B(t),!1)):e.push(kn([`A`,o,o,0,0,s],B(t),!1)),e},[])}function I6(e,t,n){return t.type===`surround`?F6(e,t,n):P6(e)}function L6(e,t,n){var r=n.type,i=n.connect,a=n.center,o=n.closed?[[`Z`]]:[],s=B([I6(e,n),I6(t.slice().reverse(),n,!0)],2),c=s[0],l=s[1],u=B([e[0],t.slice(-1)[0]],2),d=u[0],f=u[1],p=function(e,t){return[c,e,l,t,o].flat()};if(i===`line`||r===`surround`)return p([kn([`L`],B(f),!1)],[kn([`L`],B(d),!1)]);if(!a)throw Error(`Arc grid need to specified center`);var m=B([i4(f,a),i4(d,a)],2),h=m[0],g=m[1];return p([kn([`A`,h,h,0,0,1],B(f),!1),kn([`L`],B(f),!1)],[kn([`A`,g,g,0,0,0],B(d),!1),kn([`L`],B(d),!1)])}function R6(e,t,n,r){var i=n.animate,a=n.isBillboard,o=t.map(function(e,t){return{id:e.id||`grid-line-${t}`,d:I6(e.points,n)}});return e.selectAll(N6.line.class).data(o,function(e){return e.id}).join(function(e){return e.append(`path`).each(function(e,t){var n=O2(p4(z({d:e.d},r)),[e,t,o]);this.attr(z({class:N6.line.name,stroke:`#D9D9D9`,lineWidth:1,lineDash:[4,4],isBillboard:a},n))})},function(e){return e.transition(function(e,t){var n=O2(p4(z({d:e.d},r)),[e,t,o]);return x6(this,n,i.update)})},function(e){return e.transition(function(){var e=this,t=S6(this,i.exit);return h6(t,function(){return e.remove()}),t})}).transitions()}function z6(e,t,n){var r=n.animate,i=n.connect,a=n.areaFill;if(t.length<2||!a||!i)return[];for(var o=Array.isArray(a)?a:[a,`transparent`],s=function(e){return o[e%o.length]},c=[],l=0;l<t.length-1;l++){var u=B([t[l].points,t[l+1].points],2),d=u[0],f=u[1],p=L6(d,f,n);c.push({d:p,fill:s(l)})}return e.selectAll(N6.region.class).data(c,function(e,t){return t}).join(function(e){return e.append(`path`).each(function(e,t){var n=O2(e,[e,t,c]);this.attr(n)}).attr(`className`,N6.region.name)},function(e){return e.transition(function(e,t){var n=O2(e,[e,t,c]);return x6(this,n,r.update)})},function(e){return e.transition(function(){var e=this,t=S6(this,r.exit);return h6(t,function(){return e.remove()}),t})}).transitions()}function B6(e){var t=e.data,n=t===void 0?[]:t;return e.closed?n.map(function(e){var t=e.points,n=B(t,1),r=n[0];return z(z({},e),{points:kn(kn([],B(t),!1),[r],!1)})}):n}var V6=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(e,t){e.type,e.center,e.areaFill,e.closed;var n=Tn(e,[`type`,`center`,`areaFill`,`closed`]),r=B6(e),i=y4(t).maybeAppendByClassName(N6.lineGroup,`g`),a=y4(t).maybeAppendByClassName(N6.regionGroup,`g`),o=R6(i,r,e,n),s=z6(a,r,e);return kn(kn([],B(o),!1),B(s),!1)},t}(H4);function H6(e,t){return Object.fromEntries(Object.entries(e).map(function(e){var n=B(e,2),r=n[0],i=n[1];return[r,O2(i,t)]}))}function U6(e,t){return t&&rS(t)?e.filter(t):e}function W6(e,t){var n=t.startAngle;return(t.endAngle-n)*e+n}function G6(e,t){if(t.type===`linear`){var n=B(t.startPos,2),r=n[0],i=n[1],a=B(t.endPos,2),o=a[0],s=a[1],c=B([o-r,s-i],2),l=c[0],u=c[1];return a4([l,u])}var d=T2(W6(e,t));return[-Math.sin(d),Math.cos(d)]}function K6(e,t,n){var r=G6(e,n);return o4(r,t!==`positive`)}function q6(e,t){return K6(e,t.labelDirection,t)}function J6(e,t){var n=B(t.startPos,2),r=n[0],i=n[1],a=B(t.endPos,2),o=a[0],s=a[1],c=B([o-r,s-i],2),l=c[0],u=c[1];return[r+l*e,i+u*e]}function Y6(e,t){var n=t.radius,r=B(t.center,2),i=r[0],a=r[1],o=T2(W6(e,t));return[i+n*Math.cos(o),a+n*Math.sin(o)]}function X6(e,t){return t.type===`linear`?J6(e,t):Y6(e,t)}function Z6(e){return G6(0,e)[1]===0}function Q6(e){return G6(0,e)[0]===0}function $6(e,t){return t-e===360}function e8(e,t,n,r,i){var a=t-e,o=B([i,i],2),s=o[0],c=o[1],l=B([T2(e),T2(t)],2),u=l[0],d=l[1],f=function(e){return[n+i*Math.cos(e),r+i*Math.sin(e)]},p=B(f(u),2),m=p[0],h=p[1],g=B(f(d),2),_=g[0],v=g[1];if($6(e,t)){var y=(d+u)/2,b=B(f(y),2),x=b[0],S=b[1];return[[`M`,m,h],[`A`,s,c,0,1,0,x,S],[`A`,s,c,0,1,0,_,v]]}return`M${m},${h},A${s},${c},0,${a>180?1:0},${e>t?0:1},${_},${v}`}function t8(e){var t=e.attributes,n=t.startAngle,r=t.endAngle,i=t.center,a=t.radius;return kn(kn([n,r],B(i),!1),[a],!1)}function n8(e,t,n,r){var i=t.startAngle,a=t.endAngle,o=t.center,s=t.radius;return e.selectAll(M6.line.class).data([{d:e8.apply(void 0,kn(kn([i,a],B(o),!1),[s],!1))}],function(e,t){return t}).join(function(e){return e.append(`path`).attr(`className`,M6.line.name).styles(t).styles({d:function(e){return e.d}})},function(e){return e.transition(function(){var e=this,t=Q2(this,t8(this),kn(kn([i,a],B(o),!1),[s],!1),r.update);if(t){var n=function(){var t=oC(e.attributes,`__keyframe_data__`);e.style.d=e8.apply(void 0,kn([],B(t),!1))};t.onframe=n,t.onfinish=n}return t}).styles(t)},function(e){return e.remove()}).styles(n).transitions()}function r8(e,t){t.truncRange,t.truncShape,t.lineExtension}function i8(e,t,n){n===void 0&&(n=[0,0]);var r=B([e,t,n],3),i=B(r[0],2),a=i[0],o=i[1],s=B(r[1],2),c=s[0],l=s[1],u=B(r[2],2),d=u[0],f=u[1],p=B([c-a,l-o],2),m=p[0],h=p[1],g=Math.sqrt(m**2+h**2),_=B([-d/g,f/g],2),v=_[0],y=_[1];return[v*m,v*h,y*m,y*h]}function a8(e){var t=B(e,2),n=B(t[0],2),r=n[0],i=n[1],a=B(t[1],2),o=a[0],s=a[1];return{x1:r,y1:i,x2:o,y2:s}}function o8(e,t,n,r){var i=t.showTrunc,a=t.startPos,o=t.endPos,s=t.truncRange,c=t.lineExtension,l=B([a,o],2),u=B(l[0],2),d=u[0],f=u[1],p=B(l[1],2),m=p[0],h=p[1],g=B(c?i8(a,o,c):[,,,,].fill(0),4),_=g[0],v=g[1],y=g[2],b=g[3],x=function(t){return e.selectAll(M6.line.class).data(t,function(e,t){return t}).join(function(e){return e.append(`line`).attr(`className`,function(e){return`${M6.line.name} ${e.className}`}).styles(n).transition(function(e){return x6(this,a8(e.line),!1)})},function(e){return e.styles(n).transition(function(e){var t=e.line;return x6(this,a8(t),r.update)})},function(e){return e.remove()}).transitions()};if(!i||!s)return x([{line:[[d+_,f+v],[m+y,h+b]],className:M6.line.name}]);var S=B(s,2),C=S[0],w=S[1],T=m-d,E=h-f,D=B([d+T*C,f+E*C],2),O=D[0],k=D[1],A=B([d+T*w,f+E*w],2),j=A[0],M=A[1],ee=x([{line:[[d+_,f+v],[O,k]],className:M6.lineFirst.name},{line:[[j,M],[m+y,h+b]],className:M6.lineSecond.name}]);return r8(e,t),ee}function s8(e,t,n,r){var i=n.showArrow,a=n.showTrunc,o=n.lineArrow,s=n.lineArrowOffset,c=n.lineArrowSize,l=t===`arc`?e.select(M6.line.class):a?e.select(M6.lineSecond.class):e.select(M6.line.class);if(!i||!o||n.type===`arc`&&$6(n.startAngle,n.endAngle)){var u=l.node();u&&(u.style.markerEnd=void 0);return}var d=U2(o);d.attr(r),h4(d,c,!0),l.style(`markerEnd`,d).style(`markerEndOffset`,-s)}function c8(e,t,n){var r=t.type,i,a=j4(t,`line`);return i=r===`linear`?o8(e,t,c4(a,`arrow`),n):n8(e,t,c4(a,`arrow`),n),s8(e,r,t,a),i}function l8(e,t){return K6(e,t.gridDirection,t)}function u8(e){var t=e.type,n=e.gridCenter;return t===`linear`?n:n||e.center}function d8(e,t){var n=t.gridLength;return e.map(function(e,r){var i=e.value,a=B(X6(i,t),2),o=a[0],s=a[1],c=B($2(l8(i,t),n),2),l=c[0],u=c[1];return{id:r,points:[[o,s],[o+l,s+u]]}})}function f8(e,t){var n=t.gridControlAngles,r=u8(t);if(!r)throw Error(`grid center is not provide`);if(e.length<2)throw Error(`Invalid grid data`);if(!n||n.length===0)throw Error(`Invalid gridControlAngles`);var i=B(r,2),a=i[0],o=i[1];return e.map(function(e,r){var i=e.value,s=B(X6(i,t),2),c=s[0],l=s[1],u=B([c-a,l-o],2),d=u[0],f=u[1],p=[];return n.forEach(function(e){var t=T2(e),n=B([Math.cos(t),Math.sin(t)],2),r=n[0],i=n[1],s=d*r-f*i+a,c=d*i+f*r+o;p.push([s,c])}),{points:p,id:r}})}function p8(e,t,n,r){var i=j4(n,`grid`),a=i.type,o=i.areaFill,s=u8(n),c=U6(t,n.gridFilter),l=a===`segment`?d8(c,n):f8(c,n),u=z(z({},i),{center:s,areaFill:rS(o)?c.map(function(e,t){return O2(o,[e,t,c])}):o,animate:r,data:l});return e.selectAll(M6.grid.class).data([1]).join(function(e){return e.append(function(){return new V6({style:u})}).attr(`className`,M6.grid.name)},function(e){return e.transition(function(){return this.update(u)})},function(e){return e.remove()}).transitions()}var m8=function(){function e(e,t,n,r){this.set(e,t,n,r)}return Object.defineProperty(e.prototype,`left`,{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`top`,{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`right`,{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`bottom`,{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`width`,{get:function(){return this.defined(`x2`)&&this.defined(`x1`)?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`height`,{get:function(){return this.defined(`y2`)&&this.defined(`y1`)?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),e.prototype.rotatedPoints=function(e,t,n){var r=this,i=r.x1,a=r.y1,o=r.x2,s=r.y2,c=Math.cos(e),l=Math.sin(e),u=t-t*c+n*l,d=n-t*l-n*c;return[[c*i-l*s+u,l*i+c*s+d],[c*o-l*s+u,l*o+c*s+d],[c*i-l*a+u,l*i+c*a+d],[c*o-l*a+u,l*o+c*a+d]]},e.prototype.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},e.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},e}();function h8(e,t){var n=e.getEulerAngles()||0;e.setEulerAngles(0);var r=e.getBounds(),i=B(r.min,2),a=i[0],o=i[1],s=B(r.max,2),c=s[0],l=s[1],u=e.getBBox(),d=u.width,f=u.height,p=0,m=0,h=a,g=o,_=R2(e);if(_){f-=1.5;var v=_.style.textAlign,y=_.style.textBaseline;v===`center`?h=(a+c)/2:(v===`right`||v===`end`)&&(h=c),y===`middle`?g=(o+l)/2:y===`bottom`&&(g=l)}var b=B(x4(t),4),x=b[0],S=x===void 0?0:x,C=b[1],w=C===void 0?0:C,T=b[2],E=T===void 0?S:T,D=b[3],O=D===void 0?w:D,k=new m8((p+=a)-O,(m+=o)-S,p+d+w,m+f+E);return e.setEulerAngles(n),k.rotatedPoints(T2(n),h,g)}function g8(e,t){return t[0]<=Math.max(e[0][0],e[1][0])&&t[0]<=Math.min(e[0][0],e[1][0])&&t[1]<=Math.max(e[0][1],e[1][1])&&t[1]<=Math.min(e[0][1],e[1][1])}function _8(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return r===0?0:r<0?2:1}function v8(e,t){var n=_8(e[0],e[1],t[0]),r=_8(e[0],e[1],t[1]),i=_8(t[0],t[1],e[0]),a=_8(t[0],t[1],e[1]);return!!(n!==r&&i!==a||n===0&&g8(e,t[0])||r===0&&g8(e,t[1])||i===0&&g8(t,e[0])||a===0&&g8(t,e[1]))}function y8(e,t){var n=e.length;if(n<3)return!1;var r=[t,[9999,t[1]]],i=0,a=0;do{var o=[e[a],e[(a+1)%n]];if(v8(o,r)){if(_8(o[0],t,o[1])===0)return g8(o,t);i++}a=(a+1)%n}while(a!==0);return!!(i&1)}function b8(e,t){return t.every(function(t){return y8(e,t)})}function x8(e,t,n){var r=e.x1,i=e.x2,a=e.y1,o=e.y2,s=[[r,a],[i,a],[i,o],[r,o]],c=h8(t,n);return b8(s,c)}function S8(e,t){var n=B(e,4),r=n[0],i=n[1],a=n[2],o=n[3],s=B(t,4),c=s[0],l=s[1],u=s[2],d=s[3],f=a-r,p=o-i,m=u-c,h=d-l,g=f*h-m*p;if(g===0)return!1;var _=g>0,v=r-c,y=i-l,b=f*y-p*v;if(b<0===_)return!1;var x=m*y-h*v;return!(x<0===_||b>g===_||x>g===_)}function C8(e,t){return[[e[0],e[1],e[2],e[3]],[e[2],e[3],e[4],e[5]],[e[4],e[5],e[6],e[7]],[e[6],e[7],e[0],e[1]]].some(function(e){return S8(t,e)})}function w8(e,t,n){var r,i,a=h8(e,n).flat(1),o=h8(t,n).flat(1),s=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var c=Dn(s),l=c.next();!l.done;l=c.next()){var u=l.value;if(C8(o,u))return!0}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return!1}function T8(e,t){var n=e.type,r=e.labelDirection,i=e.crossSize;if(!i)return!1;if(n===`arc`){var a=e.center,o=e.radius,s=B(a,2),c=s[0],l=s[1],u=r===`negative`?0:i,d=-o-u,f=o+u,p=B(x4(t),4),m=p[0],h=p[1],g=p[2],_=p[3];return new m8(c+d-_,l+d-m,c+f+h,l+f+g)}var v=B(e.startPos,2),y=v[0],b=v[1],x=B(e.endPos,2),S=x[0],C=x[1],w=B(Q6(e)?[-t,0,t,0]:[0,t,0,-t],4),T=w[0],E=w[1],D=w[2],O=w[3],k=q6(0,e),A=$2(k,i),j=new m8(y,b,S,C);return j.x1+=O,j.y1+=T,j.x2+=E+A[0],j.y2+=D+A[1],j}function E8(e,t,n){var r,i,a=t.crossPadding,o=new Set,s=null,c=T8(t,a),l=function(e){return c?x8(c,e):!0},u=function(e,t){return!e||!e.firstChild?!0:!w8(e.firstChild,t.firstChild,x4(n))};try{for(var d=Dn(e),f=d.next();!f.done;f=d.next()){var p=f.value;l(p)?!s||u(s,p)?s=p:(o.add(s),o.add(p)):o.add(p)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return Array.from(o)}function D8(e,t){return t===void 0&&(t={}),iS(e)?0:typeof e==`number`?e:Math.floor(I2(e,t))}function O8(e,t,n,r){if(!(e.length<=0)){var i=t.suffix,a=i===void 0?`...`:i,o=t.minLength,s=t.maxLength,c=s===void 0?1/0:s,l=t.step,u=l===void 0?` `:l,d=t.margin,f=d===void 0?[0,0,0,0]:d,p=L2(r.getTextShape(e[0])),m=D8(u,p),h=o?D8(o,p):m,g=D8(c,p);(iS(g)||g===1/0)&&(g=Math.max.apply(null,e.map(function(e){return e.getBBox().width})));var _=e.slice(),v=B(f,4);v[0],v[1],v[2],v[3];for(var y=function(t){if(_.forEach(function(e){r.ellipsis(r.getTextShape(e),t,a)}),_=E8(e,n,f),_.length<1)return{value:void 0}},b=g;b>h+m;b-=m){var x=y(b);if(typeof x==`object`)return x.value}}}var k8={parity:function(e,t){var n=t.seq,r=n===void 0?2:n;return e.filter(function(e,t){return t%r?(y2(e),!1):!0})}},A8=function(e){return e.filter(N2)};function j8(e,t,n,r){var i=e.length,a=t.keepHeader,o=t.keepTail;if(!(i<=1||i===2&&a&&o)){var s=k8.parity,c=function(e){return e.forEach(r.show),e},l=2,u=e.slice(),d=e.slice(),f=Math.min.apply(Math,kn([1],B(e.map(function(e){return e.getBBox().width})),!1));if(n.type===`linear`&&(Z6(n)||Q6(n))){var p=S4(e[0]).left,m=S4(e[i-1]).right,h=Math.abs(m-p)||1;l=Math.max(Math.floor(i*f/h),l)}var g,_;for(a&&(g=u.splice(0,1)[0]),o&&(_=u.splice(-1,1)[0],u.reverse()),c(u);l<e.length&&E8(A8(_?kn(kn([_],B(d),!1),[g],!1):kn([g],B(d),!1)),n,t?.margin).length;){if(_&&!g&&l%2==0){var v=u.splice(0,1);v.forEach(r.hide)}else if(_&&g){var v=u.splice(0,1);v.forEach(r.hide)}d=s(c(u),{seq:l}),l++}}}function M8(e,t,n,r){var i,a,o=t.optionalAngles,s=o===void 0?[0,45,90]:o,c=t.margin,l=t.recoverWhenFailed,u=l===void 0?!0:l,d=e.map(function(e){return e.getLocalEulerAngles()}),f=function(){return E8(e,n,c).length<1},p=function(t){return e.forEach(function(e,n){var i=Array.isArray(t)?t[n]:t;r.rotate(e,+i)})};try{for(var m=Dn(s),h=m.next();!h.done;h=m.next()){var g=h.value;if(p(g),f())return}}catch(e){i={error:e}}finally{try{h&&!h.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}u&&p(d)}function N8(e){var t=e.type,n=e.labelDirection;return t===`linear`&&Z6(e)?n===`negative`?`bottom`:`top`:`middle`}function P8(e,t,n,r,i){var a=t.maxLines,o=a===void 0?3:a,s=t.recoverWhenFailed,c=s===void 0?!0:s,l=t.margin,u=l===void 0?[0,0,0,0]:l,d=O2(t.wordWrapWidth??50,[i]),f=e.map(function(e){return e.attr(`maxLines`)||1}),p=Math.min.apply(Math,kn([],B(f),!1)),m=function(){return E8(e,n,u).length<1},h=N8(n),g=function(t){return e.forEach(function(e,n){var i=Array.isArray(t)?t[n]:t;r.wrap(e,d,i,h)})};if(!(p>o)){if(n.type===`linear`&&Z6(n)){if(g(o),m())return}else for(var _=p;_<=o;_++)if(g(_),m())return;c&&g(f)}}var F8=new Map([[`hide`,j8],[`rotate`,M8],[`ellipsis`,O8],[`wrap`,P8]]);function I8(e,t,n){return t.labelOverlap.length<1?!1:n===`hide`?!C2(e[0]):n===`rotate`?!e.some(function(e){return!!e.attr(`transform`)?.includes(`rotate`)}):n===`ellipsis`||n===`wrap`?e.filter(function(e){return e.querySelector(`text`)}).length>=1:!0}function L8(e,t,n,r){var i=t.labelOverlap,a=i===void 0?[]:i;a.length&&a.forEach(function(i){var a=i.type,o=F8.get(a);I8(e,t,a)&&o?.(e,i,t,r,n)})}function R8(){var e=[...arguments],t=function(e){return e===`positive`?-1:1};return e.reduce(function(e,n){return e*t(n)},1)}function z8(e){for(var t=e;t<0;)t+=360;return Math.round(t%360)}function B8(e,t){var n=B(e,2),r=n[0],i=n[1],a=B(t,2),o=a[0],s=a[1],c=B([r*o+i*s,r*s-i*o],2),l=c[0],u=c[1];return Math.atan2(u,l)}function V8(e){var t=(e+360)%180;return q2(t,-90,90)||(t+=180),t}function H8(e,t,n){var r=n.labelAlign;if(t.style.transform?.includes(`rotate`))return t.getLocalEulerAngles();var i=0,a=q6(e.value,n),o=G6(e.value,n);return r===`horizontal`?0:(i=r===`perpendicular`?B8([1,0],a):B8([o[0]<0?-1:1,0],o),V8(E2(i)))}function U8(e,t,n){var r=n.type,i=n.labelAlign,a=q6(e,n),o=z8(t),s=z8(E2(B8([1,0],a))),c=`center`,l=`middle`;return r===`linear`?[90,270].includes(s)&&o===0?(c=`center`,l=a[1]===1?`top`:`bottom`):!(s%180)&&[90,270].includes(o)?c=`center`:s===0?(q2(o,0,90,!1,!0)||q2(o,0,90)||q2(o,270,360))&&(c=`start`):s===90?q2(o,0,90,!1,!0)?c=`start`:(q2(o,90,180)||q2(o,270,360))&&(c=`end`):s===270?q2(o,0,90,!1,!0)?c=`end`:(q2(o,90,180)||q2(o,270,360))&&(c=`start`):s===180&&(o===90?c=`start`:(q2(o,0,90)||q2(o,270,360))&&(c=`end`)):i===`parallel`?l=q2(s,0,180,!0)?`top`:`bottom`:i===`horizontal`?q2(s,90,270,!1)?c=`end`:(q2(s,270,360,!1)||q2(s,0,90))&&(c=`start`):i===`perpendicular`&&(c=q2(s,90,270)?`end`:`start`),{textAlign:c,textBaseline:l}}function W8(e,t,n){t.setLocalEulerAngles(e);var r=t.__data__.value,i=U8(r,e,n),a=t.querySelector(M6.labelItem.class);a&&J8(a,i)}function G8(e,t,n){var r=n.showTick,i=n.tickLength,a=n.tickDirection,o=n.labelDirection,s=n.labelSpacing,c=t.indexOf(e),l=O2(s,[e,c,t]),u=B([q6(e.value,n),R8(o,a)],2),d=u[0],f=u[1]===1?O2(r?i:0,[e,c,t]):0,p=B(e4($2(d,l+f),X6(e.value,n)),2),m=p[0],h=p[1];return{x:m,y:h}}function K8(e,t,n,r){var i=r.labelFormatter;return rS(i)?function(){return U2(O2(i,[e,t,n,q6(e.value,r)]))}:function(){return U2(e.label||``)}}function q8(e,t,n,r){var i=r.labelRender,a=(oC(r,`endPos.0`,400)-oC(r,`startPos.0`,0))/n.length,o=rS(i)?O2(i,[e,t,n,q6(e.value,r)]):e.label||``,s=B4(o)||30;return function(){return W2(o,{width:a,height:s})}}function J8(e,t){[`text`,`html`].includes(e.nodeName)&&e.attr(t)}function Y8(e,t){L8(this.node().childNodes,e,t,{hide:y2,show:v2,rotate:function(t,n){W8(+n,t,e)},ellipsis:function(e,t,n){e&&B2(e,t||1/0,n)},wrap:function(e,t,n){e&&V2(e,t,n)},getTextShape:function(e){return e.querySelector(`text`)}})}function X8(e,t,n,r,i){var a=n.indexOf(t),o=i.labelRender,s=y4(e).append(o?q8(t,a,n,i):K8(t,a,n,i)).attr(`className`,M6.labelItem.name).node(),c=B(N4(H6(r,[t,a,n])),2),l=c[0],u=c[1],d=u.transform,f=Tn(u,[`transform`]);I4(s,d);var p=H8(t,s,i);return s.getLocalEulerAngles()||s.setLocalEulerAngles(p),J8(s,z(z({},U8(t.value,p,i)),l)),e.attr(f),s}function Z8(e,t,n,r,i){var a=U6(t,n.labelFilter),o=j4(n,`label`),s,c=e.selectAll(M6.label.class).data(a,function(e,t){return t}).join(function(e){return e.append(`g`).attr(`className`,M6.label.name).transition(function(e){X8(this,e,t,o,n);var r=G8(e,t,n),i=r.x,a=r.y;return this.style.transform=`translate(${i}, ${a})`,null})},function(e){return e.transition(function(e){var i=this.querySelector(M6.labelItem.class),a=X8(this,e,t,o,n),s=b6(i,a,r.update),c=G8(e,t,n),l=c.x,u=c.y,d=x6(this,{transform:`translate(${l}, ${u})`},r.update);return kn(kn([],B(s),!1),[d],!1)})},function(e){return s=e,e.transition(function(){var e=this,t=S6(this.childNodes[0],r.exit);return h6(t,function(){return y4(e).remove()}),t}),s}).transitions();return g6(c,function(){Y8.call(e,n,i)}),c}function Q8(e,t){return K6(e,t.tickDirection,t)}function $8(e,t){var n=B(e,2),r=n[0],i=n[1];return[[0,0],[r*t,i*t]]}function e5(e,t,n,r,i){var a=i.tickLength,o=B($8(r,O2(a,[e,t,n])),2),s=B(o[0],2),c=s[0],l=s[1],u=B(o[1],2),d=u[0],f=u[1];return{x1:c,x2:d,y1:l,y2:f}}function t5(e,t,n,r,i){var a=i.tickFormatter,o=Q8(t.value,i),s=`line`;return rS(a)&&(s=function(){return O2(a,[t,n,r,o])}),e.append(s).attr(`className`,M6.tickItem.name)}function n5(e,t,n,r,i,a,o){var s=Q8(e.value,a),c=e5(e,t,n,s,a),l=c.x1,u=c.x2,d=c.y1,f=c.y2,p=B(N4(H6(o,[e,t,n,s])),2),m=p[0],h=p[1];r.node().nodeName===`line`&&r.styles(z({x1:l,x2:u,y1:d,y2:f},m)),i.attr(h),r.styles(m)}function r5(e,t,n,r,i,a){var o=t5(y4(this),e,t,n,r);n5(e,t,n,o,this,r,i);var s=B(X6(e.value,r),2),c=s[0],l=s[1];return x6(this,{transform:`translate(${c}, ${l})`},a)}function i5(e,t,n,r){var i=U6(t,n.tickFilter),a=j4(n,`tick`);return e.selectAll(M6.tick.class).data(i,function(e){return e.id||e.label}).join(function(e){return e.append(`g`).attr(`className`,M6.tick.name).transition(function(e,t){return r5.call(this,e,t,i,n,a,!1)})},function(e){return e.transition(function(e,t){return this.removeChildren(),r5.call(this,e,t,i,n,a,r.update)})},function(e){return e.transition(function(){var e=this,t=S6(this.childNodes[0],r.exit);return h6(t,function(){return e.remove()}),t})}).transitions()}function a5(e,t,n){var r=n.titlePosition,i=r===void 0?`lb`:r,a=n.titleSpacing,o=z4(i),s=e.node().getLocalBounds(),c=B(s.min,2),l=c[0],u=c[1],d=B(s.halfExtents,2),f=d[0],p=d[1],m=B(t.node().getLocalBounds().halfExtents,2),h=m[0],g=m[1],_=B([l+f,u+p],2),v=_[0],y=_[1],b=B(x4(a),4),x=b[0],S=b[1],C=b[2],w=b[3];if([`start`,`end`].includes(i)&&n.type===`linear`){var T=n.startPos,E=n.endPos,D=B(i===`start`?[T,E]:[E,T],2),O=D[0],k=D[1],A=a4([-k[0]+O[0],-k[1]+O[1]]),j=B($2(A,x),2),M=j[0],ee=j[1];return{x:O[0]+M,y:O[1]+ee}}return o.includes(`t`)&&(y-=p+g+x),o.includes(`r`)&&(v+=f+h+S),o.includes(`l`)&&(v-=f+h+w),o.includes(`b`)&&(y+=p+g+C),{x:v,y}}function o5(e,t,n){var r=e.getGeometryBounds().halfExtents[1]*2;if(t===`vertical`){if(n===`left`)return`rotate(-90) translate(0, ${r/2})`;if(n===`right`)return`rotate(-90) translate(0, -${r/2})`}return``}function s5(e,t,n,r,i){var a=j4(r,`title`),o=B(N4(a),2),s=o[0],c=o[1],l=c.transform,u=c.transformOrigin,d=Tn(c,[`transform`,`transformOrigin`]);t.styles(d);var f=l||o5(e.node(),s.direction,s.position);e.styles(z(z({},s),{transformOrigin:u})),I4(e.node(),f);var p=a5(y4(n._offscreen||n.querySelector(M6.mainGroup.class)),t,r),m=p.x,h=p.y;return x6(t.node(),{transform:`translate(${m}, ${h})`},i)}function c5(e,t,n,r){var i=n.titleText;return e.selectAll(M6.title.class).data([{title:i}].filter(function(e){return!!e.title}),function(e,t){return e.title}).join(function(a){return a.append(function(){return U2(i)}).attr(`className`,M6.title.name).transition(function(){return s5(y4(this),e,t,n,r.enter)})},function(i){return i.transition(function(){return s5(y4(this),e,t,n,r.update)})},function(e){return e.remove()}).transitions()}function l5(e,t,n,r){var i=e.showLine,a=e.showTick,o=e.showLabel,s=t.maybeAppendByClassName(M6.lineGroup,`g`),c=K2(i,s,function(t){return c8(t,e,r)})||[],l=t.maybeAppendByClassName(M6.tickGroup,`g`),u=K2(a,l,function(t){return i5(t,n,e,r)})||[],d=t.maybeAppendByClassName(M6.labelGroup,`g`),f=K2(o,d,function(i){return Z8(i,n,e,r,t.node())})||[];return kn(kn(kn([],B(c),!1),B(u),!1),B(f),!1).filter(function(e){return!!e})}var u5=function(e){wn(t,e);function t(t){return e.call(this,t,j6)||this}return t.prototype.render=function(e,t,n){var r=this,i=e.titleText,a=e.data,o=e.animate,s=e.showTitle,c=e.showGrid,l=e.dataThreshold,u=e.truncRange,d=m4(a,l).filter(function(e){var t=e.value;return!(u&&t>u[0]&&t<u[1])}),f=m6(n===void 0?o:n),p=y4(t).maybeAppendByClassName(M6.gridGroup,`g`),m=K2(c,p,function(t){return p8(t,d,e,f)})||[],h=y4(t).maybeAppendByClassName(M6.mainGroup,`g`);i&&(!this.initialized&&f.enter||this.initialized&&f.update)&&l5(e,y4(this.offscreenGroup),d,m6(!1));var g=l5(e,y4(h.node()),d,f),_=y4(t).maybeAppendByClassName(M6.titleGroup,`g`),v=K2(s,_,function(t){return c5(t,r,e,f)})||[];return kn(kn(kn([],B(m),!1),B(g),!1),B(v),!1).flat().filter(function(e){return!!e})},t}(H4),d5=k2({text:`text`},`title`);function f5(e,t){var n=e.attributes,r=n.position,i=n.spacing,a=n.inset,o=n.text,s=e.getBBox(),c=t.getBBox(),l=z4(r),u=B(x4(o?i:0),4),d=u[0],f=u[1],p=u[2],m=u[3],h=B(x4(a),4),g=h[0],_=h[1],v=h[2],y=h[3],b=B([m+f,d+p],2),x=b[0],S=b[1],C=B([y+_,g+v],2),w=C[0],T=C[1];if(l[0]===`l`)return new D2(s.x,s.y,c.width+s.width+x+w,Math.max(c.height+T,s.height));if(l[0]===`t`)return new D2(s.x,s.y,Math.max(c.width+w,s.width),c.height+s.height+S+T);var E=B([t.attributes.width||c.width,t.attributes.height||c.height],2),D=E[0],O=E[1];return new D2(c.x,c.y,D+s.width+x+w,O+s.height+S+T)}function p5(e,t){var n=Object.entries(t).reduce(function(t,n){var r=B(n,2),i=r[0],a=r[1];return e.node().attr(i)||(t[i]=a),t},{});e.styles(n)}function m5(e){var t,n,r,i,a=e,o=a.width,s=a.height,c=a.position,l=B([o/2,s/2],2),u=l[0],d=l[1],f=B([+u,+d,`center`,`middle`],4),p=f[0],m=f[1],h=f[2],g=f[3],_=z4(c);return _.includes(`l`)&&(t=B([0,`start`],2),p=t[0],h=t[1]),_.includes(`r`)&&(n=B([+o,`end`],2),p=n[0],h=n[1]),_.includes(`t`)&&(r=B([0,`top`],2),m=r[0],g=r[1]),_.includes(`b`)&&(i=B([+s,`bottom`],2),m=i[0],g=i[1]),{x:p,y:m,textAlign:h,textBaseline:g}}var h5=function(e){wn(t,e);function t(t){return e.call(this,t,{text:``,width:0,height:0,fill:`#4a505a`,fontWeight:`bold`,fontSize:12,fontFamily:`sans-serif`,inset:0,spacing:0,position:`top-left`})||this}return t.prototype.getAvailableSpace=function(){var e=this,t=this.attributes,n=t.width,r=t.height,i=t.position,a=t.spacing,o=t.inset,s=e.querySelector(d5.text.class);if(!s)return new D2(0,0,+n,+r);var c=s.getBBox(),l=c.width,u=c.height,d=B(x4(a),4),f=d[0],p=d[1],m=d[2],h=d[3],g=B([0,0,+n,+r],4),_=g[0],v=g[1],y=g[2],b=g[3],x=z4(i);if(x.includes(`i`))return new D2(_,v,y,b);x.forEach(function(e,t){var i,a,o,s;e===`t`&&(i=B(t===0?[u+m,+r-u-m]:[0,+r],2),v=i[0],b=i[1]),e===`r`&&(a=B([+n-l-h],1),y=a[0]),e===`b`&&(o=B([+r-u-f],1),b=o[0]),e===`l`&&(s=B(t===0?[l+p,+n-l-p]:[0,+n],2),_=s[0],y=s[1])});var S=B(x4(o),4),C=S[0],w=S[1],T=S[2],E=S[3],D=B([E+w,C+T],2),O=D[0],k=D[1];return new D2(_+E,v+C,y-O,b-k)},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new D2(0,0,0,0)},t.prototype.render=function(e,t){var n=this;e.width,e.height,e.position,e.spacing;var r=Tn(e,[`width`,`height`,`position`,`spacing`]),i=B(N4(r),1),a=i[0],o=m5(e),s=o.x,c=o.y,l=o.textAlign,u=o.textBaseline;K2(!!r.text,y4(t),function(e){n.title=e.maybeAppendByClassName(d5.text,`text`).styles(a).call(p5,{x:s,y:c,textAlign:l,textBaseline:u}).node()})},t}(H4),g5=k2({prevBtnGroup:`prev-btn-group`,prevBtn:`prev-btn`,nextBtnGroup:`next-btn-group`,nextBtn:`next-btn`,pageInfoGroup:`page-info-group`,pageInfo:`page-info`,playWindow:`play-window`,contentGroup:`content-group`,controller:`controller`,clipPath:`clip-path`},`navigator`),_5=function(e){wn(t,e);function t(t){var n=e.call(this,t,{x:0,y:0,animate:{easing:`linear`,duration:200,fill:`both`},buttonCursor:`pointer`,buttonFill:`black`,buttonD:l3(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(e,t){return`${e}/${t}`},defaultPage:0,loop:!1,orientation:`horizontal`,pageNumFill:`black`,pageNumFontSize:12,pageNumTextAlign:`start`,pageNumTextBaseline:`middle`})||this;return n.playState=`idle`,n.contentGroup=n.appendChild(new Lj({class:g5.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new Lj({class:g5.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return Object.defineProperty(t.prototype,`defaultPage`,{get:function(){var e=this.attributes.defaultPage;return SS(e,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`pageViews`,{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`controllerShape`,{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`pageShape`,{get:function(){var e=this.pageViews,t=B(L4(e.map(function(e){var t=e.getBBox(),n=t.width,r=t.height;return[n,r]})).map(function(e){return Math.max.apply(Math,kn([],B(e),!1))}),2),n=t[0],r=t[1],i=this.attributes,a=i.pageWidth,o=a===void 0?n:a,s=i.pageHeight;return{pageWidth:o,pageHeight:s===void 0?r:s}},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(t.prototype,`totalPages`,{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`currPage`,{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var t=e.prototype.getBBox.call(this),n=t.x,r=t.y,i=this.controllerShape,a=this.pageShape,o=a.pageWidth,s=a.pageHeight;return new D2(n,r,o+i.width,s)},t.prototype.goTo=function(e){var t=this,n=this.attributes.animate,r=this,i=r.currPage,a=r.playState,o=r.playWindow,s=r.pageViews;if(a!==`idle`||e<0||s.length<=0||e>=s.length)return null;s[i].setLocalPosition(0,0),this.prepareFollowingPage(e);var c=B(this.getFollowingPageDiff(e),2),l=c[0],u=c[1];this.playState=`running`;var d=v6(o,[{transform:`translate(0, 0)`},{transform:`translate(${-l}, ${-u})`}],n);return h6(d,function(){t.innerCurrPage=e,t.playState=`idle`,t.setVisiblePages([e]),t.updatePageInfo()}),d},t.prototype.prev=function(){var e=this.attributes.loop,t=this.pageViews.length,n=this.currPage;if(!e&&n<=0)return null;var r=e?(n-1+t)%t:SS(n-1,0,t);return this.goTo(r)},t.prototype.next=function(){var e=this.attributes.loop,t=this.pageViews.length,n=this.currPage;if(!e&&n>=t-1)return null;var r=e?(n+1)%t:SS(n+1,0,t);return this.goTo(r)},t.prototype.renderClipPath=function(e){var t=this.pageShape,n=t.pageWidth,r=t.pageHeight;if(!n||!r){this.contentGroup.style.clipPath=void 0;return}this.clipPath=e.maybeAppendByClassName(g5.clipPath,`rect`).styles({width:n,height:r}),this.contentGroup.attr(`clipPath`,this.clipPath.node())},t.prototype.setVisiblePages=function(e){this.playWindow.children.forEach(function(t,n){e.includes(n)?v2(t):y2(t)})},t.prototype.adjustControllerLayout=function(){var e=this,t=e.prevBtnGroup,n=e.nextBtnGroup,r=e.pageInfoGroup,i=this.attributes,a=i.orientation,o=i.controllerPadding,s=r.getBBox(),c=s.width;s.height;var l=B(a===`horizontal`?[-180,0]:[-90,90],2),u=l[0],d=l[1];t.setLocalEulerAngles(u),n.setLocalEulerAngles(d);var f=t.getBBox(),p=f.width,m=f.height,h=n.getBBox(),g=h.width,_=h.height,v=Math.max(p,c,g),y=a===`horizontal`?{offset:[[0,0],[p/2+o,0],[p+c+o*2,0]],textAlign:`start`}:{offset:[[v/2,-m-o],[v/2,0],[v/2,_+o]],textAlign:`center`},b=B(y.offset,3),x=B(b[0],2),S=x[0],C=x[1],w=B(b[1],2),T=w[0],E=w[1],D=B(b[2],2),O=D[0],k=D[1],A=y.textAlign,j=r.querySelector(`text`);j&&(j.style.textAlign=A),t.setLocalPosition(S,C),r.setLocalPosition(T,E),n.setLocalPosition(O,k)},t.prototype.updatePageInfo=function(){var e,t=this,n=t.currPage,r=t.pageViews,i=t.attributes.formatter;r.length<2||((e=this.pageInfoGroup.querySelector(g5.pageInfo.class))==null||e.attr(`text`,i(n+1,r.length)),this.adjustControllerLayout())},t.prototype.getFollowingPageDiff=function(e){var t=this.currPage;if(t===e)return[0,0];var n=this.attributes.orientation,r=this.pageShape,i=r.pageWidth,a=r.pageHeight,o=e<t?-1:1;return n===`horizontal`?[o*i,0]:[0,o*a]},t.prototype.prepareFollowingPage=function(e){var t=this,n=t.currPage,r=t.pageViews;if(this.setVisiblePages([e,n]),e!==n){var i=B(this.getFollowingPageDiff(e),2),a=i[0],o=i[1];r[e].setLocalPosition(a,o)}},t.prototype.renderController=function(e){var t=this,n=this.attributes.controllerSpacing,r=this.pageShape,i=r.pageWidth,a=r.pageHeight,o=this.pageViews.length>=2,s=e.maybeAppendByClassName(g5.controller,`g`);if(b2(s.node(),o),o){var c=j4(this.attributes,`button`),l=j4(this.attributes,`pageNum`),u=B(N4(c),2),d=u[0],f=u[1],p=d.size,m=Tn(d,[`size`]),h=!s.select(g5.prevBtnGroup.class).node(),g=s.maybeAppendByClassName(g5.prevBtnGroup,`g`).styles(f);this.prevBtnGroup=g.node();var _=g.maybeAppendByClassName(g5.prevBtn,`path`),v=s.maybeAppendByClassName(g5.nextBtnGroup,`g`).styles(f);this.nextBtnGroup=v.node();var y=v.maybeAppendByClassName(g5.nextBtn,`path`);[_,y].forEach(function(e){e.styles(z(z({},m),{transformOrigin:`center`})),h4(e.node(),p,!0)});var b=s.maybeAppendByClassName(g5.pageInfoGroup,`g`);this.pageInfoGroup=b.node(),b.maybeAppendByClassName(g5.pageInfo,`text`).styles(l),this.updatePageInfo(),s.node().setLocalPosition(i+n,a/2),h&&(this.prevBtnGroup.addEventListener(`click`,function(){t.prev()}),this.nextBtnGroup.addEventListener(`click`,function(){t.next()}))}},t.prototype.render=function(e,t){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i;this.attr(`transform`,`translate(${r}, ${a})`);var o=y4(t);this.renderClipPath(o),this.renderController(o),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},t.prototype.bindEvents=function(){var e=this,t=qS(function(){return e.render(e.attributes,e)},50);this.playWindow.addEventListener(LA.INSERTED,t),this.playWindow.addEventListener(LA.REMOVED,t)},t}(H4);function v5(e,t,n){var r=1.4*n;return[[`M`,e-n,t-r],[`L`,e+n,t-r],[`L`,e+n,t+r],[`L`,e-n,t+r],[`Z`]]}var y5=1.4,b5=.4;function x5(e,t,n){var r=n,i=r*y5,a=r/2,o=r/6,s=e+i*b5;return[[`M`,e,t],[`L`,s,t+a],[`L`,e+i,t+a],[`L`,e+i,t-a],[`L`,s,t-a],[`Z`],[`M`,s,t+o],[`L`,e+i-2,t+o],[`M`,s,t-o],[`L`,e+i-2,t-o]]}function S5(e,t,n){var r=n,i=r*y5,a=r/2,o=r/6,s=t+i*b5;return[[`M`,e,t],[`L`,e-a,s],[`L`,e-a,t+i],[`L`,e+a,t+i],[`L`,e+a,s],[`Z`],[`M`,e-o,s],[`L`,e-o,t+i-2],[`M`,e+o,s],[`L`,e+o,t+i-2]]}p3.registerSymbol(`hiddenHandle`,v5),p3.registerSymbol(`verticalHandle`,x5),p3.registerSymbol(`horizontalHandle`,S5);function C5(e,t,n){return e===void 0&&(e=`horizontal`),e===`horizontal`?t:n}var w5,T5={CONTAINER:`component-poptip`,ARROW:`component-poptip-arrow`,TEXT:`component-poptip-text`},E5=(w5={},w5[`.${T5.CONTAINER}`]={visibility:`visible`,position:`absolute`,"background-color":`rgba(0, 0, 0)`,"box-shadow":`0px 0px 10px #aeaeae`,"border-radius":`3px`,color:`#fff`,opacity:.8,"font-size":`12px`,padding:`4px 6px`,display:`flex`,"justify-content":`center`,"align-items":`center`,"z-index":8,transition:`visibility 50ms`},w5[`.${T5.TEXT}`]={"text-align":`center`},w5[`.${T5.CONTAINER}[data-position='top']`]={transform:`translate(-50%, -100%)`},w5[`.${T5.CONTAINER}[data-position='left']`]={transform:`translate(-100%, -50%)`},w5[`.${T5.CONTAINER}[data-position='right']`]={transform:`translate(0, -50%)`},w5[`.${T5.CONTAINER}[data-position='bottom']`]={transform:`translate(-50%, 0)`},w5[`.${T5.CONTAINER}[data-position='top-left']`]={transform:`translate(0,-100%)`},w5[`.${T5.CONTAINER}[data-position='top-right']`]={transform:`translate(-100%,-100%)`},w5[`.${T5.CONTAINER}[data-position='left-top']`]={transform:`translate(-100%, 0)`},w5[`.${T5.CONTAINER}[data-position='left-bottom']`]={transform:`translate(-100%, -100%)`},w5[`.${T5.CONTAINER}[data-position='right-top']`]={transform:`translate(0, 0)`},w5[`.${T5.CONTAINER}[data-position='right-bottom']`]={transform:`translate(0, -100%)`},w5[`.${T5.CONTAINER}[data-position='bottom-left']`]={transform:`translate(0, 0)`},w5[`.${T5.CONTAINER}[data-position='bottom-right']`]={transform:`translate(-100%, 0)`},w5[`.${T5.ARROW}`]={width:`4px`,height:`4px`,transform:`rotate(45deg)`,"background-color":`rgba(0, 0, 0)`,position:`absolute`,"z-index":-1},w5[`.${T5.CONTAINER}[data-position='top']`]={transform:`translate(-50%, calc(-100% - 5px))`},w5[`[data-position='top'] .${T5.ARROW}`]={bottom:`-2px`},w5[`.${T5.CONTAINER}[data-position='left']`]={transform:`translate(calc(-100% - 5px), -50%)`},w5[`[data-position='left'] .${T5.ARROW}`]={right:`-2px`},w5[`.${T5.CONTAINER}[data-position='right']`]={transform:`translate(5px, -50%)`},w5[`[data-position='right'] .${T5.ARROW}`]={left:`-2px`},w5[`.${T5.CONTAINER}[data-position='bottom']`]={transform:`translate(-50%, 5px)`},w5[`[data-position='bottom'] .${T5.ARROW}`]={top:`-2px`},w5[`.${T5.CONTAINER}[data-position='top-left']`]={transform:`translate(0, calc(-100% - 5px))`},w5[`[data-position='top-left'] .${T5.ARROW}`]={left:`10px`,bottom:`-2px`},w5[`.${T5.CONTAINER}[data-position='top-right']`]={transform:`translate(-100%, calc(-100% - 5px))`},w5[`[data-position='top-right'] .${T5.ARROW}`]={right:`10px`,bottom:`-2px`},w5[`.${T5.CONTAINER}[data-position='left-top']`]={transform:`translate(calc(-100% - 5px), 0)`},w5[`[data-position='left-top'] .${T5.ARROW}`]={right:`-2px`,top:`8px`},w5[`.${T5.CONTAINER}[data-position='left-bottom']`]={transform:`translate(calc(-100% - 5px), -100%)`},w5[`[data-position='left-bottom'] .${T5.ARROW}`]={right:`-2px`,bottom:`8px`},w5[`.${T5.CONTAINER}[data-position='right-top']`]={transform:`translate(5px, 0)`},w5[`[data-position='right-top'] .${T5.ARROW}`]={left:`-2px`,top:`8px`},w5[`.${T5.CONTAINER}[data-position='right-bottom']`]={transform:`translate(5px, -100%)`},w5[`[data-position='right-bottom'] .${T5.ARROW}`]={left:`-2px`,bottom:`8px`},w5[`.${T5.CONTAINER}[data-position='bottom-left']`]={transform:`translate(0, 5px)`},w5[`[data-position='bottom-left'] .${T5.ARROW}`]={top:`-2px`,left:`8px`},w5[`.${T5.CONTAINER}[data-position='bottom-right']`]={transform:`translate(-100%, 5px)`},w5[`[data-position='bottom-right'] .${T5.ARROW}`]={top:`-2px`,right:`8px`},w5),D5=void 0;function O5(e,t,n,r,i,a){if(i===void 0&&(i=!1),a===void 0&&(a=!1),a)return[e,t];var o=n.getBoundingClientRect(),s=o.x,c=o.y,l=o.width,u=o.height;switch(r){case`top`:return i?[s+l/2,c]:[e,c];case`left`:return i?[s,c+u/2]:[s,t];case`bottom`:return i?[s+l/2,c+u]:[e,c+u];case`right`:return i?[s+l,c+u/2]:[s+l,t];case`top-right`:case`right-top`:return[s+l,c];case`left-bottom`:case`bottom-left`:return[s,c+u];case`right-bottom`:case`bottom-right`:return[s+l,c+u];case`top-left`:case`left-top`:default:return[s,c]}}var k5=function(e){var t;return function(){var n=[...arguments];return t||=e.apply(D5,n),t}};function A5(e){var t=e&&document.getElementById(e);return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),document.body.appendChild(t)),t}function j5(e){return k5(A5)(e)}var M5=function(e){wn(t,e);function t(n){var r=e.call(this,eC({style:{id:`component-poptip`}},t.defaultOptions,n))||this;return r.visibility=`visible`,r.map=new Map,r.domStyles=``,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(t.prototype,`visible`,{get:function(){return this.visibility===`visible`},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t){this.visibility=this.style.visibility,this.updatePoptipElement()},t.prototype.update=function(e){this.attr(eC({},this.style,e)),this.render(this.attributes,this)},t.prototype.bind=function(e,t){var n=this;if(e){var r=this.style.text,i=function(i){var a=e,o=n.style,s=r;if(t){var c=typeof t==`function`?t.call(null,i):t,l=c.html,u=c.target,d=Tn(c,[`html`,`target`]);o=US({},n.style,d),(u||u===!1)&&(a=u),typeof l==`string`&&(s=l)}var f=o.position,p=o.arrowPointAtCenter,m=o.follow,h=o.offset;if(a){var g=i,_=g.clientX,v=g.clientY,y=B(O5(_,v,a,f,p,m),2),b=y[0],x=y[1];n.showTip(b,x,{text:s,position:f,offset:h})}else n.hideTip()},a=function(){n.hideTip()};e.addEventListener(`mousemove`,i),e.addEventListener(`mouseleave`,a),this.map.set(e,[i,a])}},t.prototype.unbind=function(e){if(this.map.has(e)){var t=B(this.map.get(e)||[],2),n=t[0],r=t[1];n&&e.removeEventListener(`mousemove`,n),r&&e.removeEventListener(`mouseleave`,r),this.map.delete(e)}},t.prototype.clear=function(){this.container.innerHTML=``},t.prototype.destroy=function(){var t=this,n;kn([],B(this.map.keys()),!1).forEach(function(e){return t.unbind(e)}),(n=this.container)==null||n.remove(),e.prototype.destroy.call(this)},t.prototype.showTip=function(e,t,n){var r=oC(n,`text`);if(!(r&&typeof r!=`string`)&&(this.applyStyles(),e&&t&&n)){var i=n.offset,a=n.position;if(a&&this.container.setAttribute(`data-position`,a),this.setOffsetPosition(e,t,i),typeof r==`string`){var o=this.container.querySelector(`.${T5.TEXT}`);o&&(o.innerHTML=r)}this.visibility=`visible`,this.container.style.visibility=`visible`}},t.prototype.hideTip=function(){this.visibility=`hidden`,this.container.style.visibility=`hidden`},t.prototype.getContainer=function(){return this.container},t.prototype.getClassName=function(){var e=this.style.containerClassName;return`${T5.CONTAINER}${e?` ${e}`:``}`},t.prototype.initShape=function(){var e=this,t=this.style.id;this.container=j5(t),this.container.className=this.getClassName(),this.container.addEventListener(`mousemove`,function(){return e.showTip()}),this.container.addEventListener(`mouseleave`,function(){return e.hideTip()})},t.prototype.updatePoptipElement=function(){var e=this.container;this.clear();var t=this.style,n=t.id,r=t.template,i=t.text;this.container.setAttribute(`id`,n),this.container.className=this.getClassName(),e.innerHTML=`<span class="${T5.ARROW}"></span>`,_S(r)?e.innerHTML+=r:r&&VS(r)&&e.appendChild(r),i&&(e.getElementsByClassName(T5.TEXT)[0].textContent=i),this.applyStyles(),this.container.style.visibility=this.visibility},t.prototype.applyStyles=function(){var e=M2({},E5,this.style.domStyles),t=Object.entries(e).reduce(function(e,t){var n=B(t,2),r=n[0],i=n[1],a=Object.entries(i).reduce(function(e,t){var n=B(t,2),r=n[0],i=n[1];return`${e}${r}: ${i};`},``);return`${e}${r}{${a}}`},``);if(this.domStyles!==t){this.domStyles=t;var n=this.container.querySelector(`style`);n&&this.container.removeChild(n),n=document.createElement(`style`),n.innerHTML=t,this.container.appendChild(n)}},t.prototype.setOffsetPosition=function(e,t,n){n===void 0&&(n=this.style.offset);var r=B(n,2),i=r[0],a=i===void 0?0:i,o=r[1],s=o===void 0?0:o;this.container.style.left=`${e+a}px`,this.container.style.top=`${t+s}px`},t.tag=`poptip`,t.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:`hidden`,text:``,position:`top`,follow:!1,offset:[0,0],domStyles:E5,template:`<div class="${T5.TEXT}"></div>`}},t}(H4),N5=k2({layout:`flex`,markerGroup:`marker-group`,marker:`marker`,labelGroup:`label-group`,label:`label`,valueGroup:`value-group`,focusGroup:`focus-group`,focus:`focus`,value:`value`,backgroundGroup:`background-group`,background:`background`},`legend-category-item`),P5={offset:[0,20],domStyles:{".component-poptip":{opacity:`1`,padding:`8px 12px`,background:`#fff`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.15)`},".component-poptip-arrow":{display:`none`},".component-poptip-text":{color:`#000`,lineHeight:`20px`}}};function F5(e){var t=e.querySelector(N5.marker.class);return t?t.style:{}}var I5=function(e){wn(t,e);function t(t){return e.call(this,t,{span:[1,1],marker:function(){return new Mj({style:{r:6}})},markerSize:10,labelFill:`#646464`,valueFill:`#646464`,labelFontSize:12,valueFontSize:12,labelTextBaseline:`middle`,valueTextBaseline:`middle`})||this}return Object.defineProperty(t.prototype,`showValue`,{get:function(){var e=this.attributes.valueText;return e?typeof e==`string`||typeof e==`number`?e!==``:typeof e==`function`?!0:e.attr(`text`)!==``:!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`actualSpace`,{get:function(){var e=this.labelGroup,t=this.valueGroup,n=this.attributes,r=n.markerSize,i=n.focus,a=n.focusMarkerSize,o=e.node().getBBox(),s=o.width,c=o.height,l=t.node().getBBox(),u=l.width,d=l.height;return{markerWidth:r,labelWidth:s,valueWidth:u,focusWidth:i?a??12:0,height:Math.max(r,c,d)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`span`,{get:function(){var e=this.attributes.span;if(!e)return[1,1];var t=B(x4(e),2),n=t[0],r=t[1],i=this.showValue?r:0,a=n+i;return[n/a,i/a]},enumerable:!1,configurable:!0}),t.prototype.setAttribute=function(t,n){e.prototype.setAttribute.call(this,t,n)},Object.defineProperty(t.prototype,`shape`,{get:function(){var e,t=this.attributes,n=t.markerSize,r=t.width,i=this.actualSpace,a=i.markerWidth,o=i.focusWidth,s=i.height,c=this.actualSpace,l=c.labelWidth,u=c.valueWidth,d=B(this.spacing,3),f=d[0],p=d[1],m=d[2];if(r){var h=r-n-f-p-o-m,g=B(this.span,2),_=g[0],v=g[1];e=B([_*h,v*h],2),l=e[0],u=e[1]}return{width:a+l+u+f+p+o+m,height:s,markerWidth:a,labelWidth:l,valueWidth:u,focusWidth:o}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`spacing`,{get:function(){var e=this.attributes,t=e.spacing,n=e.focus;if(!t)return[0,0,0];var r=B(x4(t),3),i=r[0],a=r[1],o=r[2];return[i,this.showValue?a:0,n?o:0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`layout`,{get:function(){var e=this.shape,t=e.markerWidth,n=e.labelWidth,r=e.valueWidth,i=e.focusWidth,a=e.width,o=e.height,s=B(this.spacing,3),c=s[0],l=s[1],u=s[2];return{height:o,width:a,markerWidth:t,labelWidth:n,valueWidth:r,focusWidth:i,position:[t/2,t+c,t+n+c+l,t+n+r+c+l+u+i/2]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`scaleSize`,{get:function(){var e=F5(this.markerGroup.node()),t=this.attributes,n=t.markerSize,r=t.markerStrokeWidth,i=r===void 0?e.strokeWidth:r,a=t.markerLineWidth,o=a===void 0?e.lineWidth:a,s=t.markerStroke,c=s===void 0?e.stroke:s,l=+(i||o||(c?1:0))*Math.sqrt(2),u=this.markerGroup.node().getBBox(),d=u.width,f=u.height;return(1-l/Math.max(d,f))*n},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(e){var t=this,n=this.attributes.marker,r=j4(this.attributes,`marker`);this.markerGroup=e.maybeAppendByClassName(N5.markerGroup,`g`).style(`zIndex`,0),K2(!!n,this.markerGroup,function(){var e=t.markerGroup.node(),i=e.childNodes?.[0],a=typeof n==`string`?new p3({style:{symbol:n},className:N5.marker.name}):n();i?a.nodeName===i.nodeName?i instanceof p3?i.update(z(z({},r),{symbol:n})):(w4(i,a),y4(i).styles(r)):(i.remove(),y4(a).attr(`className`,N5.marker.name).styles(r),e.appendChild(a)):(a instanceof p3||y4(a).attr(`className`,N5.marker.name).styles(r),e.appendChild(a)),t.markerGroup.node().scale(1/t.markerGroup.node().getScale()[0]);var o=h4(t.markerGroup.node(),t.scaleSize,!0);t.markerGroup.node().style._transform=`scale(${o})`})},t.prototype.renderLabel=function(e){var t=j4(this.attributes,`label`),n=t.text,r=Tn(t,[`text`]);this.labelGroup=e.maybeAppendByClassName(N5.labelGroup,`g`).style(`zIndex`,0),this.labelGroup.maybeAppendByClassName(N5.label,function(){return U2(n)}).styles(r)},t.prototype.renderValue=function(e){var t=this,n=j4(this.attributes,`value`),r=n.text,i=Tn(n,[`text`]);this.valueGroup=e.maybeAppendByClassName(N5.valueGroup,`g`).style(`zIndex`,0),K2(this.showValue,this.valueGroup,function(){t.valueGroup.maybeAppendByClassName(N5.value,function(){return U2(r)}).styles(i)})},t.prototype.createPoptip=function(){var e=this.attributes.poptip||{};e.render;var t=Tn(e,[`render`]),n=new M5({style:M2(P5,t)});return this.poptipGroup=n,n},t.prototype.bindPoptip=function(e){var t=this,n=this.attributes.poptip;n&&(this.poptipGroup||this.createPoptip()).bind(e,function(){var e=t.attributes,r=e.labelText,i=e.valueText,a=e.markerFill,o=typeof r==`string`?r:r?.attr(`text`),s=typeof i==`string`?i:i?.attr(`text`);if(typeof n.render==`function`)return{html:n.render({label:o,value:s,color:a})};var c=``;return(typeof o==`string`||typeof o==`number`)&&(c+=`<div class="component-poptip-label">${o}</div>`),(typeof s==`string`||typeof s==`number`)&&(c+=`<div class="component-poptip-value">${s}</div>`),{html:c}})},t.prototype.renderFocus=function(e){var t=this,n=this.attributes,r=n.focus,i={x:0,y:0,size:n.focusMarkerSize,opacity:.6,symbol:`focus`,stroke:`#aaaaaa`,lineWidth:1};BS(r)||(this.focusGroup=e.maybeAppendByClassName(N5.focusGroup,`g`).style(`zIndex`,0),K2(r,this.focusGroup,function(){var n=new p3({style:z(z({},i),{symbol:`focus`})}),r=new Mj({style:{r:i.size/2,fill:`transparent`}}),a=t.focusGroup.node();a.appendChild(r),a.appendChild(n),n.update({opacity:0}),e.node().addEventListener(`pointerenter`,function(){n.update({opacity:1})}),e.node().addEventListener(`pointerleave`,function(){n.update({opacity:0})})}))},t.prototype.renderPoptip=function(e){var t=this;if(this.attributes.poptip){var n=e.maybeAppendByClassName(N5.value,`g`).node(),r=e.maybeAppendByClassName(N5.label,`g`).node();[n,r].forEach(function(e){e&&t.bindPoptip(e)})}},t.prototype.renderBackground=function(e){var t=this.shape,n=t.width,r=t.height,i=j4(this.attributes,`background`);this.background=e.maybeAppendByClassName(N5.backgroundGroup,`g`).style(`zIndex`,-1),this.background.maybeAppendByClassName(N5.background,`rect`).styles(z({width:n,height:r},i))},t.prototype.adjustLayout=function(){var e=this.layout,t=e.labelWidth,n=e.valueWidth,r=e.height,i=B(e.position,4),a=i[0],o=i[1],s=i[2],c=i[3],l=r/2;this.markerGroup.styles({transform:`translate(${a}, ${l})${this.markerGroup.node().style._transform}`}),this.labelGroup.styles({transform:`translate(${o}, ${l})`}),this.focusGroup&&this.focusGroup.styles({transform:`translate(${c}, ${l})`}),B2(this.labelGroup.select(N5.label.class).node(),Math.ceil(t)),this.showValue&&(this.valueGroup.styles({transform:`translate(${s}, ${l})`}),B2(this.valueGroup.select(N5.value.class).node(),Math.ceil(n)))},t.prototype.render=function(e,t){var n=y4(t),r=e.x,i=r===void 0?0:r,a=e.y,o=a===void 0?0:a;n.styles({transform:`translate(${i}, ${o})`}),this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.renderPoptip(n),this.renderFocus(n),this.adjustLayout()},t}(H4),L5=k2({page:`item-page`,navigator:`navigator`,item:`item`},`items`),R5=function(e,t,n){return n===void 0&&(n=!0),e?t(e):n},z5=function(e){wn(t,e);function t(t){var n=e.call(this,t,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:`flex`,orientation:`horizontal`,click:mC,mouseenter:mC,mouseleave:mC})||this;return n.navigatorShape=[0,0],n}return Object.defineProperty(t.prototype,`pageViews`,{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`grid`,{get:function(){var e=this.attributes,t=e.gridRow,n=e.gridCol,r=e.data;if(!t&&!n)throw Error(`gridRow and gridCol can not be set null at the same time`);return t&&n?[t,n]:t?[t,r.length]:[r.length,n]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`renderData`,{get:function(){var e=this.attributes,t=e.data,n=e.layout,r=e.poptip,i=e.focus,a=e.focusMarkerSize,o=j4(this.attributes,`item`);return t.map(function(e,s){var c=e.id,l=c===void 0?s:c,u=e.label,d=e.value;return{id:`${l}`,index:s,style:z({layout:n,labelText:u,valueText:d,poptip:r,focus:i,focusMarkerSize:a},Object.fromEntries(Object.entries(o).map(function(n){var r=B(n,2),i=r[0],a=r[1];return[i,O2(a,[e,s,t])]})))}})},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var e=this,t=this.attributes,n=t.orientation,r=t.width,i=t.rowPadding,a=t.colPadding,o=B(this.navigatorShape,1),s=o[0],c=B(this.grid,2),l=c[0],u=c[1],d=u*l,f=0;return this.pageViews.children.map(function(t,o){var c,p,m=Math.floor(o/d),h=o%d,g=e.ifHorizontal(u,l),_=[Math.floor(h/g),h%g];n===`vertical`&&_.reverse();var v=B(_,2),y=v[0],b=v[1],x=(r-s-(u-1)*a)/u,S=t.getBBox().height,C=B([0,0],2),w=C[0],T=C[1];return n===`horizontal`?(c=B([f,y*(S+i)],2),w=c[0],T=c[1],f=b===u-1?0:f+x+a):(p=B([b*(x+a),f],2),w=p[0],T=p[1],f=y===l-1?0:f+S+i),{page:m,index:o,row:y,col:b,pageIndex:h,width:x,height:S,x:w,y:T}})},t.prototype.getFlexLayout=function(){var e=this.attributes,t=e.width,n=e.height,r=e.rowPadding,i=e.colPadding,a=B(this.navigatorShape,1),o=a[0],s=B(this.grid,2),c=s[0],l=s[1],u=B([t-o,n],2),d=u[0],f=u[1],p=B([0,0,0,0,0,0,0,0],8),m=p[0],h=p[1],g=p[2],_=p[3],v=p[4],y=p[5],b=p[6],x=p[7];return this.pageViews.children.map(function(e,t){var n,a,o,s,u=e.getBBox(),p=u.width,S=u.height,C=b===0?0:i,w=b+C+p;return w<=d&&R5(v,function(e){return e<l})?(n=B([b+C,x,w],3),m=n[0],h=n[1],b=n[2],{width:p,height:S,x:m,y:h,page:g,index:t,pageIndex:_++,row:y,col:v++}):(a=B([y+1,0,0,x+S+r],4),y=a[0],v=a[1],b=a[2],x=a[3],x+S<=f&&R5(y,function(e){return e<c})?(o=B([b,x,p],3),m=o[0],h=o[1],b=o[2],{width:p,height:S,x:m,y:h,page:g,index:t,pageIndex:_++,row:y,col:v++}):(s=B([0,0,p,0,g+1,0,0,0],8),m=s[0],h=s[1],b=s[2],x=s[3],g=s[4],_=s[5],y=s[6],v=s[7],{width:p,height:S,x:m,y:h,page:g,index:t,pageIndex:_++,row:y,col:v++}))})},Object.defineProperty(t.prototype,`itemsLayout`,{get:function(){this.navigatorShape=[0,0];var e=this.attributes.layout===`grid`?this.getGridLayout:this.getFlexLayout,t=e.call(this);return t.slice(-1)[0].page>0?(this.navigatorShape=[55,0],e.call(this)):t},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(e,t){var n=this.attributes.orientation;return C5(n,e,t)},t.prototype.flattenPage=function(e){e.querySelectorAll(L5.item.class).forEach(function(t){e.appendChild(t)}),e.querySelectorAll(L5.page.class).forEach(function(t){e.removeChild(t).destroy()})},t.prototype.renderItems=function(e){var t=this.attributes,n=t.click,r=t.mouseenter,i=t.mouseleave;this.flattenPage(e);var a=this.dispatchCustomEvent.bind(this);y4(e).selectAll(L5.item.class).data(this.renderData,function(e){return e.id}).join(function(e){return e.append(function(e){var t=e.style;return new I5({style:t})}).attr(`className`,L5.item.name).on(`click`,function(){n?.(this),a(`itemClick`,{item:this})}).on(`pointerenter`,function(){r?.(this),a(`itemMouseenter`,{item:this})}).on(`pointerleave`,function(){i?.(this),a(`itemMouseleave`,{item:this})})},function(e){return e.each(function(e){var t=e.style;this.update(t)})},function(e){return e.remove()})},t.prototype.relayoutNavigator=function(){var e=this.attributes,t=e.layout,n=e.width,r=this.pageViews.children[0]?.getBBox().height||0,i=B(this.navigatorShape,2),a=i[0],o=i[1];this.navigator.update(t===`grid`?{pageWidth:n-a,pageHeight:r-o}:{})},t.prototype.adjustLayout=function(){var e=this,t=Object.entries(G2(this.itemsLayout,`page`)).map(function(e){var t=B(e,2),n=t[0],r=t[1];return{page:n,layouts:r}}),n=kn([],B(this.navigator.getContainer().children),!1);t.forEach(function(t){var r=t.layouts,i=e.pageViews.appendChild(new Lj({className:L5.page.name}));r.forEach(function(e){var t=e.x,r=e.y,a=e.index,o=e.width,s=e.height,c=n[a];i.appendChild(c),sC(c,`__layout__`,e),c.update({x:t,y:r,width:o,height:s})})}),this.relayoutNavigator()},t.prototype.renderNavigator=function(e){var t=this.attributes.orientation,n=j4(this.attributes,`nav`),r=M2({orientation:t},n),i=this;return e.selectAll(L5.navigator.class).data([`nav`]).join(function(e){return e.append(function(){return new _5({style:r})}).attr(`className`,L5.navigator.name).each(function(){i.navigator=this})},function(e){return e.each(function(){this.update(r)})},function(e){return e.remove()}),this.navigator},t.prototype.getBBox=function(){return this.navigator.getBBox()},t.prototype.render=function(e,t){var n=this.attributes.data;if(!(!n||n.length===0)){var r=this.renderNavigator(y4(t));this.renderItems(r.getContainer()),this.adjustLayout()}},t.prototype.dispatchCustomEvent=function(e,t){var n=new DA(e,{detail:t});this.dispatchEvent(n)},t}(H4),B5=k2({markerGroup:`marker-group`,marker:`marker`,labelGroup:`label-group`,label:`label`},`handle`),V5={showLabel:!0,formatter:function(e){return e.toString()},markerSize:25,markerStroke:`#c5c5c5`,markerFill:`#fff`,markerLineWidth:1,labelFontSize:12,labelFill:`#c5c5c5`,labelText:``,orientation:`vertical`,spacing:0};(function(e){wn(t,e);function t(t){return e.call(this,t,V5)||this}return t.prototype.render=function(e,t){var n=y4(t).maybeAppendByClassName(B5.markerGroup,`g`);this.renderMarker(n);var r=y4(t).maybeAppendByClassName(B5.labelGroup,`g`);this.renderLabel(r)},t.prototype.renderMarker=function(e){var t=this,n=this.attributes,r=n.orientation,i=n.markerSymbol,a=i===void 0?C5(r,`horizontalHandle`,`verticalHandle`):i;K2(!!a,e,function(e){var n=j4(t.attributes,`marker`),r=z({symbol:a},n);t.marker=e.maybeAppendByClassName(B5.marker,function(){return new p3({style:r})}).update(r)})},t.prototype.renderLabel=function(e){var t=this,n=this.attributes,r=n.showLabel,i=n.orientation,a=n.spacing,o=a===void 0?0:a,s=n.formatter;K2(r,e,function(e){var n=j4(t.attributes,`label`),r=n.text,a=Tn(n,[`text`]),c=e.select(B5.marker.class)?.node().getBBox()||{},l=c.width,u=l===void 0?0:l,d=c.height,f=B(C5(i,[0,(d===void 0?0:d)+o,`center`,`top`],[u+o,0,`start`,`middle`]),4),p=f[0],m=f[1],h=f[2],g=f[3];e.maybeAppendByClassName(B5.label,`text`).styles(z(z({},a),{x:p,y:m,text:s(r).toString(),textAlign:h,textBaseline:g}))})},t})(H4);var H5={showTitle:!0,padding:0,orientation:`horizontal`,backgroundFill:`transparent`,titleText:``,titleSpacing:4,titlePosition:`top-left`,titleFill:`#2C3542`,titleFontWeight:`bold`,titleFontFamily:`sans-serif`,titleFontSize:12},U5=M2({},H5,{});M2({},H5,M4(V5,`handle`),{color:[`#d0e3fa`,`#acc7f6`,`#8daaf2`,`#6d8eea`,`#4d73cd`,`#325bb1`,`#5a3e75`,`#8c3c79`,`#e23455`,`#e7655b`],indicatorBackgroundFill:`#262626`,indicatorLabelFill:`white`,indicatorLabelFontSize:12,indicatorVisibility:`hidden`,labelAlign:`value`,labelDirection:`positive`,labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:``,type:`continuous`});var W5=k2({title:`title`,titleGroup:`title-group`,items:`items`,itemsGroup:`items-group`,contentGroup:`content-group`,ribbonGroup:`ribbon-group`,ribbon:`ribbon`,handlesGroup:`handles-group`,handle:`handle`,startHandle:`start-handle`,endHandle:`end-handle`,labelGroup:`label-group`,label:`label`,indicator:`indicator`},`legend`),G5=function(e){wn(t,e);function t(t){return e.call(this,t,U5)||this}return t.prototype.renderTitle=function(e,t,n){var r=this.attributes,i=r.showTitle,a=r.titleText,o=j4(this.attributes,`title`),s=B(N4(o),2),c=s[0],l=s[1];this.titleGroup=e.maybeAppendByClassName(W5.titleGroup,`g`).styles(l);var u=z(z({width:t,height:n},c),{text:i?a:``});this.title=this.titleGroup.maybeAppendByClassName(W5.title,function(){return new h5({style:u})}).update(u)},t.prototype.renderItems=function(e,t){var n=t.x,r=t.y,i=t.width,a=t.height,o=j4(this.attributes,`title`,!0),s=B(N4(o),2),c=s[0],l=s[1],u=z(z({},c),{width:i,height:a,x:0,y:0});this.itemsGroup=e.maybeAppendByClassName(W5.itemsGroup,`g`).styles(z(z({},l),{transform:`translate(${n}, ${r})`}));var d=this;this.itemsGroup.selectAll(W5.items.class).data([`items`]).join(function(e){return e.append(function(){return new z5({style:u})}).attr(`className`,W5.items.name).each(function(){d.items=y4(this)})},function(e){return e.update(u)},function(e){return e.remove()})},t.prototype.adjustLayout=function(){if(this.attributes.showTitle){var e=this.title.node().getAvailableSpace(),t=e.x,n=e.y;this.itemsGroup.node().style.transform=`translate(${t}, ${n})`}},Object.defineProperty(t.prototype,`availableSpace`,{get:function(){var e=this.attributes,t=e.showTitle,n=e.width,r=e.height;return t?this.title.node().getAvailableSpace():new D2(0,0,n,r)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var t=this.title?.node(),n=this.items?.node();return!t||!n?e.prototype.getBBox.call(this):f5(t,n)},t.prototype.render=function(e,t){var n=this.attributes,r=n.width,i=n.height,a=n.x,o=a===void 0?0:a,s=n.y,c=s===void 0?0:s,l=y4(t);t.style.transform=`translate(${o}, ${c})`,this.renderTitle(l,r,i),this.renderItems(l,this.availableSpace),this.adjustLayout()},t}(H4),K5={backgroundFill:`#262626`,backgroundLineCap:`round`,backgroundLineWidth:1,backgroundStroke:`#333`,backgroundZIndex:-1,formatter:function(e){return e.toString()},labelFill:`#fff`,labelFontSize:12,labelTextBaseline:`middle`,padding:[2,4],position:`right`,radius:0,zIndex:999},q5=k2({background:`background`,labelGroup:`label-group`,label:`label`},`indicator`),J5=function(e){wn(t,e);function t(t){var n=e.call(this,t,K5)||this;return n.point=[0,0],n.group=n.appendChild(new Lj({})),n.isMutationObserved=!0,n}return t.prototype.renderBackground=function(){if(this.label){var e=this.attributes,t=e.position,n=e.padding,r=B(x4(n),4),i=r[0],a=r[1],o=r[2],s=r[3],c=this.label.node().getLocalBounds(),l=c.min,u=c.max,d=new D2(l[0]-s,l[1]-i,u[0]+a-l[0]+s,u[1]+o-l[1]+i),f=this.getPath(t,d),p=j4(this.attributes,`background`);this.background=y4(this.group).maybeAppendByClassName(q5.background,`path`).styles(z(z({},p),{d:f})),this.group.appendChild(this.label.node())}},t.prototype.renderLabel=function(){var e=this.attributes,t=e.formatter,n=e.labelText,r=j4(this.attributes,`label`),i=B(N4(r),2),a=i[0],o=i[1];a.text;var s=Tn(a,[`text`]);this.label=y4(this.group).maybeAppendByClassName(q5.labelGroup,`g`).styles(o),n&&this.label.maybeAppendByClassName(q5.label,function(){return U2(t(n))}).style(`text`,t(n).toString()).selectAll(`text`).styles(s)},t.prototype.adjustLayout=function(){var e=B(this.point,2),t=e[0],n=e[1],r=this.attributes,i=r.x,a=r.y;this.group.attr(`transform`,`translate(${i-t}, ${a-n})`)},t.prototype.getPath=function(e,t){var n=this.attributes.radius,r=t.x,i=t.y,a=t.width,o=t.height,s=[[`M`,r+n,i],[`L`,r+a-n,i],[`A`,n,n,0,0,1,r+a,i+n],[`L`,r+a,i+o-n],[`A`,n,n,0,0,1,r+a-n,i+o],[`L`,r+n,i+o],[`A`,n,n,0,0,1,r,i+o-n],[`L`,r,i+n],[`A`,n,n,0,0,1,r+n,i],[`Z`]],c={top:4,right:6,bottom:0,left:2}[e],l=this.createCorner([s[c].slice(-2),s[c+1].slice(-2)]);return s.splice.apply(s,kn([c+1,1],B(l),!1)),s[0][0]=`M`,s},t.prototype.createCorner=function(e,t){t===void 0&&(t=10);var n=.8,r=C4.apply(void 0,kn([],B(e),!1)),i=B(e,2),a=B(i[0],2),o=a[0],s=a[1],c=B(i[1],2),l=c[0],u=c[1],d=B(r?[l-o,[o,l]]:[u-s,[s,u]],2),f=d[0],p=B(d[1],2),m=p[0],h=p[1],g=f/2,_=f/Math.abs(f),v=t*_,y=v/2,b=v*Math.sqrt(3)/2*n,x=B([m,m+g-y,m+g,m+g+y,h],5),S=x[0],C=x[1],w=x[2],T=x[3],E=x[4];return r?(this.point=[w,s-b],[[`L`,S,s],[`L`,C,s],[`L`,w,s-b],[`L`,T,s],[`L`,E,s]]):(this.point=[o+b,w],[[`L`,o,S],[`L`,o,C],[`L`,o+b,w],[`L`,o,T],[`L`,o,E]])},t.prototype.applyVisibility=function(){this.attributes.visibility===`hidden`?y2(this):v2(this)},t.prototype.bindEvents=function(){this.label.on(LA.BOUNDS_CHANGED,this.renderBackground)},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},t}(H4);function Y5(e){return e===void 0&&(e=``),{CONTAINER:`${e}tooltip`,TITLE:`${e}tooltip-title`,LIST:`${e}tooltip-list`,LIST_ITEM:`${e}tooltip-list-item`,NAME:`${e}tooltip-list-item-name`,MARKER:`${e}tooltip-list-item-marker`,NAME_LABEL:`${e}tooltip-list-item-name-label`,VALUE:`${e}tooltip-list-item-value`,CROSSHAIR_X:`${e}tooltip-crosshair-x`,CROSSHAIR_Y:`${e}tooltip-crosshair-y`}}var X5={overflow:`hidden`,"white-space":`nowrap`,"text-overflow":`ellipsis`};function Z5(e){var t;e===void 0&&(e=``);var n=Y5(e);return t={},t[`.${n.CONTAINER}`]={position:`absolute`,visibility:`visible`,"z-index":8,transition:`visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)`,"background-color":`rgba(255, 255, 255, 0.96)`,"box-shadow":`0 6px 12px 0 rgba(0, 0, 0, 0.12)`,"border-radius":`4px`,color:`rgba(0, 0, 0, 0.65)`,"font-size":`12px`,"line-height":`20px`,padding:`12px`,"min-width":`120px`,"max-width":`360px`,"font-family":`Roboto-Regular`},t[`.${n.TITLE}`]={color:`rgba(0, 0, 0, 0.45)`},t[`.${n.LIST}`]={margin:`0px`,"list-style-type":`none`,padding:`0px`},t[`.${n.LIST_ITEM}`]={"list-style-type":`none`,display:`flex`,"line-height":`2em`,"align-items":`center`,"justify-content":`space-between`,"white-space":`nowrap`},t[`.${n.MARKER}`]={width:`8px`,height:`8px`,"border-radius":`50%`,display:`inline-block`,"margin-right":`4px`},t[`.${n.NAME}`]={display:`flex`,"align-items":`center`,"max-width":`216px`},t[`.${n.NAME_LABEL}`]=z({flex:1},X5),t[`.${n.VALUE}`]=z({display:`inline-block`,float:`right`,flex:1,"text-align":`right`,"min-width":`28px`,"margin-left":`30px`,color:`rgba(0, 0, 0, 0.85)`},X5),t[`.${n.CROSSHAIR_X}`]={position:`absolute`,width:`1px`,"background-color":`rgba(0, 0, 0, 0.25)`},t[`.${n.CROSSHAIR_Y}`]={position:`absolute`,height:`1px`,"background-color":`rgba(0, 0, 0, 0.25)`},t}var Q5=function(e){wn(t,e);function t(t){var n=this,r=t.style?.template?.prefixCls,i=Y5(r);return n=e.call(this,t,{data:[],x:0,y:0,visibility:`visible`,title:``,position:`bottom-right`,offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:``,container:`<div class="${i.CONTAINER}"></div>`,title:`<div class="${i.TITLE}"></div>`,item:`<li class="${i.LIST_ITEM}" data-index={index}>
        <span class="${i.NAME}">
          <span class="${i.MARKER}" style="background:{color}"></span>
          <span class="${i.NAME_LABEL}" title="{name}">{name}</span>
        </span>
        <span class="${i.VALUE}" title="{value}">{value}</span>
      </li>`},style:Z5(r)})||this,n.timestamp=-1,n.prevCustomContentKey=n.attributes.contentKey,n.initShape(),n.render(n.attributes,n),n}return Object.defineProperty(t.prototype,`HTMLTooltipElement`,{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element},Object.defineProperty(t.prototype,`elementSize`,{get:function(){var e=this.element.offsetWidth,t=this.element.offsetHeight;return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`HTMLTooltipItemsElements`,{get:function(){var e=this.attributes,t=e.data,n=e.template;return t.map(function(e,t){var r=e.name,i=r===void 0?``:r,a=e.color,o=a===void 0?`black`:a,s=e.index,c=Tn(e,[`name`,`color`,`index`]),l=z({name:i,color:o,index:s??t},c);return ow(jS(n.item,l))})},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t){this.renderHTMLTooltipElement(),this.updatePosition()},t.prototype.destroy=function(){var t;(t=this.element)==null||t.remove(),e.prototype.destroy.call(this)},t.prototype.show=function(e,t){var n=this;if(e!==void 0&&t!==void 0){var r=this.element.style.visibility===`hidden`,i=function(){n.attributes.x=e??n.attributes.x,n.attributes.y=t??n.attributes.y,n.updatePosition()};r?this.closeTransition(i):i()}this.element.style.visibility=`visible`},t.prototype.hide=function(e,t){e===void 0&&(e=0),t===void 0&&(t=0),!(this.attributes.enterable&&this.isCursorEntered(e,t))&&(this.element.style.visibility=`hidden`)},t.prototype.initShape=function(){var e=this.attributes.template;this.element=ow(e.container),this.id&&this.element.setAttribute(`id`,this.id)},t.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var e=this.attributes.content;e&&(typeof e==`string`?this.element.innerHTML=e:R4(this.element,e))}},t.prototype.renderHTMLTooltipElement=function(){var e,t=this.attributes,n=t.template,r=t.title,i=t.enterable,a=t.style,o=t.content,s=Y5(n.prefixCls),c=this.element;if(this.element.style.pointerEvents=i?`auto`:`none`,o)this.renderCustomContent();else{r?(c.innerHTML=n.title,c.getElementsByClassName(s.TITLE)[0].innerHTML=r):(e=c.getElementsByClassName(s.TITLE)?.[0])==null||e.remove();var l=this.HTMLTooltipItemsElements,u=document.createElement(`ul`);u.className=s.LIST,R4(u,l);var d=this.element.querySelector(`.${s.LIST}`);d?d.replaceWith(u):c.appendChild(u)}k4(c,a)},t.prototype.getRelativeOffsetFromCursor=function(e){var t=this.attributes,n=t.position,r=t.offset,i=(e||n).split(`-`),a={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},o=this.elementSize,s=o.width,c=o.height,l=[-s/2,-c/2];return i.forEach(function(e){var t=B(l,2),n=t[0],i=t[1],o=B(a[e],2),u=o[0],d=o[1];l=[n+(s/2+r[0])*u,i+(c/2+r[1])*d]}),l},t.prototype.setOffsetPosition=function(e){var t=B(e,2),n=t[0],r=t[1],i=this.attributes,a=i.x,o=a===void 0?0:a,s=i.y,c=s===void 0?0:s,l=i.container,u=l.x,d=l.y;this.element.style.left=`${+o+u+n}px`,this.element.style.top=`${+c+d+r}px`},t.prototype.updatePosition=function(){var e=this.attributes.showDelay,t=e===void 0?60:e,n=Date.now();this.timestamp>0&&n-this.timestamp<t||(this.timestamp=n,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},t.prototype.autoPosition=function(e){var t=B(e,2),n=t[0],r=t[1],i=this.attributes,a=i.x,o=i.y,s=i.bounding,c=i.position;if(!s)return[n,r];var l=this.element,u=l.offsetWidth,d=l.offsetHeight,f=B([+a+n,+o+r],2),p=f[0],m=f[1],h={left:`right`,right:`left`,top:`bottom`,bottom:`top`},g=s.x,_=s.y,v=s.width,y=s.height,b={left:p<g,right:p+u>g+v,top:m<_,bottom:m+d>_+y},x=[];c.split(`-`).forEach(function(e){b[e]?x.push(h[e]):x.push(e)});var S=x.join(`-`);return this.getRelativeOffsetFromCursor(S)},t.prototype.isCursorEntered=function(e,t){if(this.element){var n=this.element.getBoundingClientRect(),r=n.x,i=n.y,a=n.width,o=n.height;return new D2(r,i,a,o).isPointIn(e,t)}return!1},t.prototype.closeTransition=function(e){var t=this,n=this.element.style.transition;this.element.style.transition=`none`,e(),setTimeout(function(){t.element.style.transition=n},10)},t.tag=`tooltip`,t}(H4),$5=function(e){wn(t,e);function t(n){var r=e.call(this,M2({},t.defaultOptions,n))||this;return r.hoverColor=`#f5f5f5`,r.selectedColor=`#e6f7ff`,r.background=r.appendChild(new Yj({})),r.label=r.background.appendChild(new Lj({})),r}return Object.defineProperty(t.prototype,`padding`,{get:function(){return x4(this.style.padding)},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(){var e=this.style,t=e.label,n=e.value,r=j4(this.attributes,`label`);y4(this.label).maybeAppend(`.label`,function(){return U2(t)}).attr(`className`,`label`).styles(r),this.label.attr(`__data__`,n)},t.prototype.renderBackground=function(){var e=this.label.getBBox(),t=B(this.padding,4),n=t[0],r=t[1],i=t[2],a=t[3],o=e.width,s=e.height,c=o+a+r,l=s+n+i,u=j4(this.attributes,`background`),d=this.style,f=d.width,p=f===void 0?0:f,m=d.height,h=m===void 0?0:m,g=d.selected;this.background.attr(z(z({},u),{width:Math.max(c,p),height:Math.max(l,h),fill:g?this.selectedColor:`#fff`})),this.label.attr({transform:`translate(${a}, ${(l-s)/2})`})},t.prototype.render=function(){this.renderLabel(),this.renderBackground()},t.prototype.bindEvents=function(){var e=this;this.addEventListener(`pointerenter`,function(){e.style.selected||e.background.attr(`fill`,e.hoverColor)}),this.addEventListener(`pointerleave`,function(){e.style.selected||e.background.attr(`fill`,e.style.backgroundFill)});var t=this;this.addEventListener(`click`,function(){var n=e.style,r=n.label,i=n.value,a=n.onClick;a?.(i,{label:r,value:i},t)})},t.defaultOptions={style:{value:``,label:``,cursor:`pointer`}},t}(H4),e7=function(e){wn(t,e);function t(n){var r=e.call(this,M2({},t.defaultOptions,n))||this;r.currentValue=t.defaultOptions.style?.defaultValue,r.isPointerInSelect=!1,r.select=r.appendChild(new Yj({className:`select`,style:{cursor:`pointer`,width:0,height:0}})),r.dropdown=r.appendChild(new Yj({className:`dropdown`}));var i=r.style.defaultValue;return i&&r.style.options?.some(function(e){return e.value===i})&&(r.currentValue=i),r}return t.prototype.setValue=function(e){this.currentValue=e,this.render()},t.prototype.getValue=function(){return this.currentValue},Object.defineProperty(t.prototype,`dropdownPadding`,{get:function(){return x4(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),t.prototype.renderSelect=function(){var e=this,t=this.style,n=t.x,r=t.y,i=t.width,a=t.height,o=t.bordered,s=t.showDropdownIcon,c=j4(this.attributes,`select`),l=j4(this.attributes,`placeholder`);this.select.attr(z(z({x:n,y:r,width:i,height:a},c),{fill:`#fff`,strokeWidth:o?1:0}));var u=this.dropdownPadding;s&&y4(this.select).maybeAppend(`.dropdown-icon`,`path`).style(`d`,`M-5,-3.5 L0,3.5 L5,-3.5`).style(`transform`,`translate(${n+i-10-u[1]-u[3]}, ${r+a/2})`).style(`lineWidth`,1).style(`stroke`,this.select.style.stroke);var d=this.style.options?.find(function(t){return t.value===e.currentValue}),f=z({x:n+u[3]},l);y4(this.select).selectAll(`.placeholder`).data(d?[]:[1]).join(function(e){return e.append(`text`).attr(`className`,`placeholder`).styles(f).style(`y`,function(){var e=this.getBBox();return r+(a-e.height)/2})},function(e){return e.styles(f)},function(e){return e.remove()});var p=j4(this.attributes,`optionLabel`),m=z({x:n+u[3]},p);y4(this.select).selectAll(`.value`).data(d?[d]:[]).join(function(e){return e.append(function(e){return U2(e.label)}).attr(`className`,`value`).styles(m).style(`y`,function(){var e=this.getBBox();return r+(a-e.height)/2})},function(e){return e.styles(m)},function(e){return e.remove()})},t.prototype.renderDropdown=function(){var e=this,t=this.style,n=t.x,r=t.y,i=t.width,a=t.height,o=t.options,s=t.onSelect,c=t.open,l=j4(this.attributes,`dropdown`),u=j4(this.attributes,`option`),d=this.dropdownPadding;y4(this.dropdown).maybeAppend(`.dropdown-container`,`g`).attr(`className`,`dropdown-container`).selectAll(`.dropdown-item`).data(o,function(e){return e.value}).join(function(t){return t.append(function(t){return new $5({className:`dropdown-item`,style:z(z(z({},t),u),{width:i-d[1]-d[3],selected:t.value===e.currentValue,onClick:function(t,n,r){e.setValue(t),s?.(t,n,r),e.dispatchEvent(new DA(`change`,{detail:{value:t,option:n,item:r}})),y2(e.dropdown)}})})}).each(function(e,t){var n=(this.parentNode?.children).reduce(function(e,n,r){return r<t&&(e+=n.getBBox().height),e},0);this.attr(`transform`,`translate(${d[3]}, ${d[0]+n})`)})},function(t){return t.update(function(t){return{selected:t.value===e.currentValue}})},function(e){return e.remove()});var f=(this.dropdown.getElementsByClassName(`dropdown-container`)?.[0])?.getBBox(),p=l.spacing;this.dropdown.attr(z({transform:`translate(${n}, ${r+a+p})`,width:f.width+d[1]+d[3],height:f.height+d[0]+d[2]},l)),!c&&y2(this.dropdown)},t.prototype.render=function(){this.renderSelect(),this.renderDropdown()},t.prototype.bindEvents=function(){var e=this;this.addEventListener(`click`,function(e){e.stopPropagation()}),this.select.addEventListener(`click`,function(){e.dropdown.style.visibility===`visible`?y2(e.dropdown):v2(e.dropdown)}),this.addEventListener(`pointerenter`,function(){e.isPointerInSelect=!0}),this.addEventListener(`pointerleave`,function(){e.isPointerInSelect=!1}),document==null||document.addEventListener(`click`,function(){e.isPointerInSelect||y2(e.dropdown)})},t.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:``,selectRadius:8,selectStroke:`#d9d9d9`,showDropdownIcon:!0,placeholderText:`请选择`,placeholderFontSize:12,placeholderTextBaseline:`top`,placeholderFill:`#c2c2c2`,dropdownFill:`#fff`,dropdownStroke:`#d9d9d9`,dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:`rgba(0, 0, 0, 0.08)`,dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:`top`,optionBackgroundFill:`#fff`,optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:`top`}},t}(H4),t7=function(e){wn(t,e);function t(n){var r=e.call(this,M2({},{style:{backgroundOpacity:t.backgroundOpacities.default}},t.defaultOptions,n))||this;return r.showBackground=!0,r.background=r.appendChild(new Yj({})),r.icon=r.appendChild(new Lj({})),r}return Object.defineProperty(t.prototype,`label`,{get:function(){return`BaseIcon`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`lineWidth`,{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`padding`,{get:function(){return x4(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`iconSize`,{get:function(){var e=this.attributes.size,t=B(this.padding,4),n=t[0],r=t[1],i=t[2],a=t[3];return Math.max(e-Math.max(a+r,n+i),this.lineWidth*2+1)},enumerable:!1,configurable:!0}),t.prototype.renderBackground=function(){var e=this.attributes,t=e.x,n=e.y,r=e.size,i=r/2,a=j4(this.attributes,`background`);this.background.attr(z({x:t-i,y:n-i,width:r,height:r},a))},t.prototype.showIndicator=function(){if(this.label){var e=this.attributes.size,t=this.background.getBBox(),n=t.x,r=t.y;this.indicator.update({x:n+e/2,y:r-5,labelText:this.label,visibility:`visible`})}},t.prototype.hideIndicator=function(){this.indicator.update({visibility:`hidden`})},t.prototype.connectedCallback=function(){e.prototype.connectedCallback.call(this);var t=this.attributes.size,n=this.background.getBBox(),r=n.x,i=n.y,a=this.ownerDocument?.defaultView;a&&(this.indicator=a.appendChild(new J5({style:{x:r+t/2,y:i-t/2,visibility:`hidden`,position:`top`,radius:3,zIndex:100}})))},t.prototype.disconnectedCallback=function(){this.indicator.destroy()},t.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},t.prototype.bindEvents=function(){var e=this,n=this.attributes.onClick;if(this.addEventListener(`click`,function(){n?.(e)}),this.showBackground){var r=function(){return e.background.attr({opacity:t.backgroundOpacities.default})},i=function(){return e.background.attr({opacity:t.backgroundOpacities.hover})},a=function(){return e.background.attr({opacity:t.backgroundOpacities.active})};this.addEventListener(`pointerenter`,function(){i(),e.showIndicator()}),this.addEventListener(`pointerleave`,function(){r(),e.hideIndicator()}),this.addEventListener(`pointerdown`,function(){a()}),this.addEventListener(`pointerup`,function(){r()})}},t.tag=`IconBase`,t.defaultOptions={style:{x:0,y:0,size:10,color:`#565758`,backgroundRadius:4,backgroundFill:`#e2e2e2`}},t.backgroundOpacities={default:0,hover:.8,active:1},t}(H4),n7=function(e,t){return t===void 0&&(t=`#565758`),new Wj({style:{fill:t,d:`M ${e},${e} L -${e},0 L ${e},-${e} Z`,transformOrigin:`center`}})},r7=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.arcPath=function(e,t,n){var r=B([n,n],2),i=r[0],a=r[1],o=function(r){return[e+n*Math.cos(r),t+n*Math.sin(r)]},s=B(o(-5/4*Math.PI),2),c=s[0],l=s[1],u=B(o(1/4*Math.PI),2),d=u[0],f=u[1];return`M${c},${l},A${i},${a},0,1,1,${d},${f}`},Object.defineProperty(t.prototype,`label`,{get:function(){return`重置`},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=this.lineWidth,o=a+.5;y4(this.icon).maybeAppend(`.reset`,`path`).styles({stroke:r,lineWidth:a,d:this.arcPath(t,n,i/2-a),markerStart:n7(o,r)})},t}(t7),i7=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`label`,{get:function(){return`快退`},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/2,o=i/2/3**.5,s=[[t,n],[t,n-o],[t-a,n],[t,n+o],[t,n],[t+a,n-o],[t+a,n+o],[t,n]];y4(this.icon).maybeAppend(`.backward`,`polygon`).styles({points:s,fill:r})},t}(t7),a7=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`label`,{get:function(){return`快进`},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/2,o=i/2/3**.5,s=[[t,n],[t,n-o],[t+a,n],[t,n+o],[t,n],[t-a,n-o],[t-a,n+o],[t,n]];y4(this.icon).maybeAppend(`.forward`,`polygon`).styles({points:s,fill:r})},t}(t7),o7=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`label`,{get:function(){return`播放`},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/3*3**.5*.8,o=[[t+a,n],[t-a/2,n-i/2*.8],[t-a/2,n+i/2*.8],[t+a,n]];y4(this.icon).maybeAppend(`.play`,`polygon`).styles({points:o,fill:r})},t}(t7),s7=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`label`,{get:function(){return`暂停`},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/3,o=[[t-a,n-i/2],[t-a,n+i/2],[t-a/2,n+i/2],[t-a/2,n-i/2],[t-a,n-i/2],[t+a/2,n-i/2],[t+a/2,n+i/2],[t+a,n+i/2],[t+a,n-i/2]];y4(this.icon).maybeAppend(`.pause`,`polygon`).styles({points:o,fill:r})},t}(t7),c7=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`label`,{get:function(){return`范围时间`},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this,a=i.iconSize,o=i.lineWidth,s=o;y4(this.icon).maybeAppend(`.left-line`,`line`).styles({x1:t-a/2,y1:n-a/2,x2:t-a/2,y2:n+a/2,stroke:r,lineWidth:o}),y4(this.icon).maybeAppend(`.right-line`,`line`).styles({x1:t+a/2,y1:n-a/2,x2:t+a/2,y2:n+a/2,stroke:r,lineWidth:o}),y4(this.icon).maybeAppend(`.left-arrow`,`line`).styles({x1:t,y1:n,x2:t-a/2+s*2,y2:n,stroke:r,lineWidth:o,markerEnd:n7(o*2,r)}),y4(this.icon).maybeAppend(`.right-arrow`,`line`).styles({x1:t,y1:n,x2:t+a/2-s*2,y2:n,stroke:r,lineWidth:o,markerEnd:n7(o*2,r)})},t}(t7),l7=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`label`,{get:function(){return`单一时间`},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this,a=i.iconSize,o=i.lineWidth;y4(this.icon).maybeAppend(`.line`,`line`).styles({x1:t,y1:n-a/2,x2:t,y2:n+a/2,stroke:r,lineWidth:o});var s=o;y4(this.icon).maybeAppend(`.left-arrow`,`line`).styles({x1:t-a/2-s*2,y1:n,x2:t-s*2,y2:n,stroke:r,lineWidth:o,markerEnd:n7(o*2,r)}),y4(this.icon).maybeAppend(`.right-arrow`,`line`).styles({x1:t+a/2+s*2,y1:n,x2:t+s*2,y2:n,stroke:r,lineWidth:o,markerEnd:n7(o*2,r)})},t}(t7),u7=function(e){return[[-e/2,-e/2],[-e/2,e/2],[e/2,e/2]]},d7=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`label`,{get:function(){return`折线图`},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this,a=i.iconSize,o=i.lineWidth,s=o,c=(a-s*2-o)/4,l=(a-s*2-o)/2,u=B([t-a/2+s,n+a/2-s*2],2),d=u[0],f=u[1];y4(this.icon).maybeAppend(`.coordinate`,`polyline`).styles({points:u7(a).map(function(e){var r=B(e,2),i=r[0],a=r[1];return[i+t,a+n]}),stroke:r,lineWidth:o}),y4(this.icon).maybeAppend(`.line`,`polyline`).styles({points:[[d,f],[d+c,f-l],[d+c*2,f],[d+c*4,f-l*2]],stroke:r,lineWidth:o})},t}(t7),f7=function(e){wn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`label`,{get:function(){return`条形图`},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`data`,{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.data,t=this.attributes,n=t.x,r=t.y,i=t.color,a=this,o=a.iconSize,s=a.lineWidth,c=s,l=(o-c)/e.length,u=(o-c*2)/4,d=B([n-o/2+c*2,r+o/2-c],2),f=d[0],p=d[1];y4(this.icon).maybeAppend(`.coordinate`,`polyline`).styles({points:u7(o).map(function(e){var t=B(e,2),i=t[0],a=t[1];return[i+n,a+r]}),stroke:i,lineWidth:s}),y4(this.icon).maybeAppend(`.bars`,`g`).selectAll(`.column`).data(this.data.map(function(e,t){return{value:e,index:t}})).join(function(e){return e.append(`line`).attr(`className`,`column`).style(`x1`,function(e){var t=e.index;return f+l*t}).style(`y1`,p).style(`x2`,function(e){var t=e.index;return f+l*t}).style(`y2`,function(e){var t=e.value;return p-u*t}).styles({y1:p,stroke:i,lineWidth:s})})},t}(t7),p7=function(e){wn(t,e);function t(t){var n=e.call(this,M2({},{style:{color:`#d8d9d9`}},t))||this;return n.showBackground=!1,n}return t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this,a=i.iconSize,o=i.lineWidth;y4(this.icon).maybeAppend(`.split`,`line`).styles({x1:t,y1:n-a/2,x2:t,y2:n+a/2,stroke:r,lineWidth:o})},t}(t7),m7=function(e){wn(t,e);function t(){var t=e.apply(this,kn([],B(arguments),!1))||this;return t.showBackground=!1,t}return Object.defineProperty(t.prototype,`padding`,{get:function(){return x4(0)},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.iconSize,t=this.attributes,n=t.x,r=t.y,i=t.speed,a=i===void 0?1:i,o=uC(this.attributes,[`x`,`y`,`transform`,`transformOrigin`,`width`,`height`,`size`,`color`,`speed`]),s=SS(e,20,1/0),c=20,l=z(z({},o),{x:n-s/2,y:r-c/2,width:s,height:c,defaultValue:a,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:e/5,placeholderFontSize:e/2,optionPadding:0,optionLabelFontSize:e/2,optionBackgroundRadius:1,options:[{label:`1x`,value:1},{label:`1.5x`,value:1.5},{label:`2x`,value:2}]});y4(this.icon).maybeAppend(`.speed`,function(){return new e7({style:l})}).attr(`className`,`speed`).each(function(){this.update(l)})},t.tag=`SpeedSelect`,t}(t7),h7=function(e){wn(t,e);function t(t){var n=e.call(this,t)||this;return n.icon=n.appendChild(new Lj({})),n.currentType=n.attributes.type,n}return t.prototype.getType=function(){return this.currentType},t.prototype.render=function(){var e=this,t=this.attributes;t.onChange;var n=Tn(t,[`onChange`]);y4(this.icon).selectAll(`.icon`).data([this.currentType]).join(function(t){return t.append(function(t){var n=e.toggles.find(function(e){return B(e,1)[0]===t})?.[1];if(!n)throw Error(`Invalid type: ${t}`);return new n({})}).attr(`className`,`icon`).styles(n,!1).update({})},function(e){return e.styles({restStyles:n}).update({})},function(e){return e.remove()})},t.prototype.bindEvents=function(){var e=this,t=this.attributes.onChange;this.addEventListener(`click`,function(n){n.preventDefault(),n.stopPropagation();var r=(e.toggles.findIndex(function(t){return B(t,1)[0]===e.currentType})+1)%e.toggles.length,i=e.toggles[r][0];t?.(e.currentType),e.currentType=i,e.render()})},t.tag=`ToggleIcon`,t}(H4),g7=function(e){wn(t,e);function t(t){var n=e.call(this,M2({},{style:{type:`play`}},t))||this;return n.toggles=[[`play`,o7],[`pause`,s7]],n}return t}(h7),_7=function(e){wn(t,e);function t(t){var n=e.call(this,M2({},{style:{type:`range`}},t))||this;return n.toggles=[[`range`,c7],[`value`,l7]],n}return t}(h7),v7=function(e){wn(t,e);function t(t){var n=e.call(this,M2({},{style:{type:`column`}},t))||this;return n.toggles=[[`line`,d7],[`column`,f7]],n}return t}(h7),y7={reset:r7,speed:m7,backward:i7,playPause:g7,forward:a7,selectionType:_7,chartType:v7,split:p7},b7=function(e){wn(t,e);function t(n){var r=e.call(this,M2({},t.defaultOptions,n))||this;return r.background=r.appendChild(new Yj({})),r.functions=r.appendChild(new Lj({})),r}return Object.defineProperty(t.prototype,`padding`,{get:function(){return x4(this.attributes.padding)},enumerable:!1,configurable:!0}),t.prototype.renderBackground=function(){var e=this.style,t=e.x,n=e.y,r=e.width,i=e.height,a=j4(this.attributes,`background`);this.background.attr(z({x:t,y:n,width:r,height:i},a))},t.prototype.renderFunctions=function(){var e=this,t,n=this.attributes,r=n.functions,i=n.iconSize,a=n.iconSpacing,o=n.x,s=n.y,c=n.width,l=n.height,u=n.align,d=B(this.padding,4),f=d[1],p=d[3],m=r.reduce(function(e,t){return e.length&&t.length?e.concat.apply(e,kn([`split`],B(t),!1)):e.concat.apply(e,kn([],B(t),!1))},[]),h=m.length*(i+a)-a,g={left:p+i/2,center:(c-h)/2+i/2,right:c-h-p-f+i/2}[u]||0;(t=this.speedSelect)==null||t.destroy(),this.functions.removeChildren(),m.forEach(function(t,n){var r=y7[t],c={x:o+n*(i+a)+g,y:s+l/2,size:i};if(r===m7?(c.speed=e.attributes.speed,c.onSelect=function(n){return e.handleFunctionChange(t,{value:n})}):[g7,_7,v7].includes(r)?(c.onChange=function(n){return e.handleFunctionChange(t,{value:n})},r===g7&&(c.type=e.attributes.state===`play`?`pause`:`play`),r===_7&&(c.type=e.attributes.selectionType===`range`?`value`:`range`),r===v7&&(c.type=e.attributes.chartType===`line`?`column`:`line`)):c.onClick=function(){return e.handleFunctionChange(t,{value:t})},r===m7){var u=e.ownerDocument?.defaultView;u&&(e.speedSelect=new r({style:z(z({},c),{zIndex:100})}),u.appendChild(e.speedSelect))}else e.functions.appendChild(new r({style:c}))})},t.prototype.disconnectedCallback=function(){var t;e.prototype.disconnectedCallback.call(this),(t=this.speedSelect)==null||t.destroy()},t.prototype.render=function(){this.renderBackground(),this.renderFunctions()},t.prototype.handleFunctionChange=function(e,t){var n=this.attributes.onChange;n?.(e,t)},t.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:`center`,iconSize:25,iconSpacing:0,speed:1,state:`pause`,chartType:`line`,selectionType:`range`,backgroundFill:`#fbfdff`,backgroundStroke:`#ebedf0`,functions:[[`reset`,`speed`],[`backward`,`playPause`,`forward`],[`selectionType`,`chartType`]]}},t}(H4),x7=function(e){wn(t,e);function t(n){var r=e.call(this,M2({},t.defaultOptions,n))||this;return r.bindEvents(),r}return t.prototype.bindEvents=function(){var e=this;this.addEventListener(`mouseenter`,function(){e.attr(`lineWidth`,Math.ceil((e.style.r||0)/2))}),this.addEventListener(`mouseleave`,function(){e.attr(`lineWidth`,0)})},t.defaultOptions={style:{r:5,fill:`#3f7cf7`,lineWidth:0,stroke:`#3f7cf7`,strokeOpacity:.5,cursor:`pointer`}},t}(Mj),S7=function(e){wn(t,e);function t(n){return e.call(this,M2({},t.defaultOptions,n))||this}return t.prototype.renderBackground=function(){var e=this.attributes,t=e.x,n=e.y,r=e.width,i=e.height,a=j4(this.attributes,`background`);y4(this).maybeAppend(`background`,`rect`).attr(`className`,`background`).styles(z({x:t-r/2,y:n-i/2,width:r,height:i},a))},t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.iconSize,i=j4(this.attributes,`icon`),a=1,o=r/2;y4(this).maybeAppend(`icon-left-line`,`line`).attr(`className`,`icon-left-line`).styles(z({x1:t-a,y1:n-o,x2:t-a,y2:n+o},i)),y4(this).maybeAppend(`icon-right-line`,`line`).attr(`className`,`icon-right-line`).styles(z({x1:t+a,y1:n-o,x2:t+a,y2:n+o},i))},t.prototype.renderBorder=function(){var e=this.attributes,t=e.x,n=e.y,r=e.width,i=e.height,a=e.type,o=j4(this.attributes,`border`),s=a===`start`?r/2:-r/2;y4(this).maybeAppend(`border`,`line`).attr(`className`,`border`).styles(z({x1:s+t,y1:n-i/2,x2:s+t,y2:n+i/2},o))},t.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},t.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:`start`,backgroundFill:`#fff`,backgroundFillOpacity:.5,iconStroke:`#9a9a9a`,iconLineWidth:1,borderStroke:`#e8e8e8`,borderLineWidth:1}},t}(H4);function C7(e,t){return typeof e==`number`?T7(e):w7(e,t)}function w7(e,t){var n=new Date(e);switch(t){case`half-hour`:case`hour`:case`four-hour`:return[0,6,12,18].includes(n.getHours())&&n.getMinutes()===0?P4(n,`HH:mm
YYYY-MM-DD`):P4(n,`HH:mm`);case`half-day`:return n.getHours()<12?`AM
${P4(n,`YYYY-MM-DD`)}`:`PM`;case`day`:return[1,10,20].includes(n.getDate())?P4(n,`DD
YYYY-MM`):P4(n,`DD`);case`week`:return n.getDate()<=7?P4(n,`DD
YYYY-MM`):P4(n,`DD`);case`month`:return[0,6].includes(n.getMonth())?P4(n,`MM月
YYYY`):P4(n,`MM月`);case`season`:return[0].includes(n.getMonth())?P4(n,`MM月
YYYY`):P4(n,`MM月`);case`year`:return P4(n,`YYYY`);default:return P4(n,`YYYY-MM-DD HH:mm`)}}function T7(e){var t=String(Math.floor(e/3600)).padStart(2,`0`),n=String(Math.floor(e%3600/60)).padStart(2,`0`),r=String(Math.floor(e%60)).padStart(2,`0`);return e<3600?`${n}:${r}`:`${t}:${n}:${r}`}var E7=function(e){wn(t,e);function t(n){var r=e.call(this,M2({},t.defaultOptions,n))||this;r.axis=r.appendChild(new u5({style:{type:`linear`,startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),r.timeline=r.appendChild(new A6({style:{onChange:function(e){r.handleSliderChange(e)}}})),r.controller=r.appendChild(new b7({})),r.states={},r.handleSliderChange=function(e){var t=(function(){var e=r.states.values;return Array.isArray(e)?kn([],B(e),!1):e})();r.setBySliderValues(e),r.dispatchOnChange(t)};var i=r.attributes,a=i.selectionType,o=i.chartType,s=i.speed,c=i.state,l=i.playMode,u=i.values;return r.states={chartType:o,playMode:l,selectionType:a,speed:s,state:c},r.setByTimebarValues(u),r}return Object.defineProperty(t.prototype,`data`,{get:function(){return this.attributes.data.sort(function(e,t){return e.time<t.time?-1:e.time>t.time?1:0})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`space`,{get:function(){var e=this.attributes,t=e.x,n=e.y,r=e.width,i=e.height,a=e.type,o=e.controllerHeight,s=SS(+i-o,0,+i),c=new D2(t,n+ +i-o,+r,o),l,u=0;a===`chart`?(u=35,l=new D2(t,n+s-u,+r,u)):l=new D2;var d=a===`time`?10:s,f=new D2(t,n+(a===`time`?s:s-d),+r,d-u);return{axisBBox:l,controllerBBox:c,timelineBBox:f}},enumerable:!1,configurable:!0}),t.prototype.setBySliderValues=function(e){var t=this.data,n=B(Array.isArray(e)?e:[0,e],2),r=n[0],i=n[1],a=t.length,o=t[Math.floor(r*a)],s=t[Math.ceil(i*a)-(Array.isArray(e)?0:1)];this.states.values=[o?.time??t[0].time,s?.time??1/0]},t.prototype.setByTimebarValues=function(e){var t=this.data,n=B(Array.isArray(e)?e:[void 0,e],2),r=n[0],i=n[1],a=t.find(function(e){return e.time===r}),o=t.find(function(e){return e.time===i});this.states.values=[a?.time??t[0]?.time,o?.time??1/0]},t.prototype.setByIndex=function(e){var t=this.data,n=B(e,2),r=n[0],i=n[1];this.states.values=[t[r]?.time??t[0].time,this.data[i]?.time??1/0]},Object.defineProperty(t.prototype,`sliderValues`,{get:function(){var e=this.states,t=e.values,n=e.selectionType,r=B(Array.isArray(t)?t:[void 0,t],2),i=r[0],a=r[1],o=this.data,s=o.length,c=n===`value`;return[function(){var e=o.findIndex(function(e){return e.time===i});return c?0:e>-1?e/s:0}(),function(){if(a===1/0)return 1;var e=o.findIndex(function(e){return e.time===a});return e>-1?e/s:c?.5:1}()]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`values`,{get:function(){var e=this.states,t=e.values,n=e.selectionType,r=B(Array.isArray(t)?t:[this.data[0].time,t],2),i=r[0],a=r[1];return n===`value`?a:[i,a]},enumerable:!1,configurable:!0}),t.prototype.getDatumByRatio=function(e){var t=this.data,n=t.length,r=Math.floor(e*(n-1));return t[r]},Object.defineProperty(t.prototype,`chartHandleIconShape`,{get:function(){var e=this.states.selectionType,t=this.space.timelineBBox.height;return e===`range`?function(e){return new S7({style:{type:e,height:t,iconSize:t/6}})}:function(){return new Hj({style:{x1:0,y1:-t/2,x2:0,y2:t/2,lineWidth:2,stroke:`#c8c8c8`}})}},enumerable:!1,configurable:!0}),t.prototype.getChartStyle=function(e){var t=this,n=e.x,r=e.y,i=e.width,a=e.height,o=this.states,s=o.selectionType,c=o.chartType,l=this.data,u=this.attributes,d=u.type,f=u.labelFormatter,p=j4(this.attributes,`chart`);p.type;var m=Tn(p,[`type`]),h=s===`range`;if(d===`time`)return z({handleIconShape:function(){return new x7({})},selectionFill:`#2e7ff8`,selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:h?-15:0,autoFitLabel:h,handleSpacing:h?-15:0,trackFill:`#edeeef`,trackLength:i,trackOpacity:.5,trackRadius:a/2,trackSize:a/2,type:s,values:this.sliderValues,formatter:function(e){if(f)return f(e);var n=t.getDatumByRatio(e).time;return typeof n==`number`?T7(n):P4(n,`YYYY-MM-DD HH:mm:ss`)},transform:`translate(${n}, ${r})`,zIndex:1},m);var g=s===`range`?5:0,_=l.map(function(e){return e.value});return z({handleIconOffset:g,handleIconShape:this.chartHandleIconShape,selectionFill:`#fff`,selectionFillOpacity:.5,selectionType:`invert`,sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:`#d4e5fd`,sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:_,sparklineType:c,sparklineScale:.8,trackLength:i,trackSize:a,type:s,values:this.sliderValues,transform:`translate(${n}, ${r})`,zIndex:1},m)},t.prototype.renderChart=function(e){e===void 0&&(e=this.space.timelineBBox),this.timeline.update(this.getChartStyle(e))},t.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},t.prototype.getAxisStyle=function(e){var t=this.data,n=this.attributes,r=n.interval,i=n.labelFormatter,a=j4(this.attributes,`axis`),o=e.x,s=e.y,c=e.width,l=kn(kn([],B(t),!1),[{time:0}],!1).map(function(e,t,n){var r=e.time;return{label:`${r}`,value:t/(n.length-1),time:r}});return z({startPos:[o,s],endPos:[o+c,s],data:l,labelFilter:function(e,t){return t<l.length-1},labelFormatter:function(e){var t=e.time;return i?i(t):C7(t,r)}},a)},t.prototype.renderAxis=function(e){e===void 0&&(e=this.space.axisBBox),this.attributes.type===`chart`&&this.axis.update(this.getAxisStyle(e))},t.prototype.renderController=function(e){e===void 0&&(e=this.space.controllerBBox);var t=this.attributes.type,n=this.states,r=n.state,i=n.speed,a=n.selectionType,o=n.chartType,s=j4(this.attributes,`controller`),c=this,l=z(z(z({},e),{iconSize:20,speed:i,state:r,selectionType:a,chartType:o,onChange:function(e,t){var n=t.value;switch(e){case`reset`:c.internalReset();break;case`speed`:c.handleSpeedChange(n);break;case`backward`:c.internalBackward();break;case`playPause`:n===`play`?c.internalPlay():c.internalPause();break;case`forward`:c.internalForward();break;case`selectionType`:c.handleSelectionTypeChange(n);break;case`chartType`:c.handleChartTypeChange(n);break;default:break}}}),s);t===`time`&&(l.functions=[[`reset`,`speed`],[`backward`,`playPause`,`forward`],[`selectionType`]]),this.controller.update(l)},t.prototype.dispatchOnChange=function(e){var t=this.data,n=this.attributes.onChange,r=this.states,i=r.values,a=r.selectionType,o=B(i,2),s=o[0],c=o[1],l=c===1/0?t.at(-1).time:c;(!e||!function(e,t){return Array.isArray(e)?Array.isArray(t)?e[0]===t[0]&&(e[1]===t[1]||e[1]===1/0||t[1]===1/0):!1:Array.isArray(t)?!1:e===t}(e,a===`range`?[s,l]:l))&&n?.(a===`range`?[s,l]:l)},t.prototype.internalReset=function(e){var t,n,r=this.states.selectionType;this.internalPause(),this.setBySliderValues(r===`range`?[0,1]:[0,0]),this.renderController(),this.updateSelection(),e||((n=(t=this.attributes)?.onReset)==null||n.call(t),this.dispatchOnChange())},t.prototype.reset=function(){this.internalReset()},t.prototype.moveSelection=function(e,t){var n=this.data,r=n.length,i=this.states,a=i.values,o=i.selectionType,s=i.playMode,c=B(a,2),l=c[0],u=c[1],d=n.findIndex(function(e){return e.time===l}),f=n.findIndex(function(e){return e.time===u});f===-1&&(f=r);var p=e===`backward`?-1:1,m;o===`range`?s===`acc`?(m=[d,f+p],p===-1&&d===f&&(m=[d,r])):m=[d+p,f+p]:m=[d,f+p];var h=function(e){var t=B(e.sort(function(e,t){return e-t}),2),n=t[0],i=t[1],a=function(e){return SS(e,0,r)};return i>r?o===`value`?[0,0]:s===`acc`?[a(n),a(n)]:[0,a(i-n)]:n<0?s===`acc`?[0,a(i)]:[a(n+r-i),r]:[a(n),a(i)]}(m);return this.setByIndex(h),this.updateSelection(),h},t.prototype.internalBackward=function(e){var t,n,r=this.moveSelection(`backward`,e);return e||((n=(t=this.attributes)?.onBackward)==null||n.call(t),this.dispatchOnChange()),r},t.prototype.backward=function(){this.internalBackward()},t.prototype.internalPlay=function(e){var t=this,n,r,i=this.data,a=this.attributes.loop,o=this.states.speed,s=o===void 0?1:o;this.playInterval=window.setInterval(function(){t.internalForward()[1]===i.length&&!a&&(t.internalPause(),t.renderController())},1e3/s),this.states.state=`play`,!e&&((r=(n=this.attributes)?.onPlay)==null||r.call(n))},t.prototype.play=function(){this.internalPlay()},t.prototype.internalPause=function(e){var t,n;clearInterval(this.playInterval),this.states.state=`pause`,!e&&((n=(t=this.attributes)?.onPause)==null||n.call(t))},t.prototype.pause=function(){this.internalPause()},t.prototype.internalForward=function(e){var t,n,r=this.moveSelection(`forward`,e);return e||((n=(t=this.attributes)?.onForward)==null||n.call(t),this.dispatchOnChange()),r},t.prototype.forward=function(){this.internalForward()},t.prototype.handleSpeedChange=function(e){var t,n;this.states.speed=e,this.states.state===`play`&&(this.internalPause(!0),this.internalPlay(!0)),(n=(t=this.attributes)?.onSpeedChange)==null||n.call(t,e)},t.prototype.handleSelectionTypeChange=function(e){var t,n;this.states.selectionType=e,this.renderChart(),(n=(t=this.attributes)?.onSelectionTypeChange)==null||n.call(t,e)},t.prototype.handleChartTypeChange=function(e){var t,n;this.states.chartType=e,this.renderChart(),(n=(t=this.attributes)?.onChartTypeChange)==null||n.call(t,e)},t.prototype.render=function(){var e=this.space,t=e.axisBBox,n=e.controllerBBox,r=e.timelineBBox;this.renderController(n),this.renderAxis(t),this.renderChart(r),this.states.state===`play`&&this.internalPlay()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.internalPause(!0)},t.defaultOptions={style:{x:0,y:0,axisLabelFill:`#6e6e6e`,axisLabelTextAlign:`left`,axisLabelTextBaseline:`top`,axisLabelTransform:`translate(5, -12)`,axisLineLineWidth:1,axisLineStroke:`#cacdd1`,axisTickLength:15,axisTickLineWidth:1,axisTickStroke:`#cacdd1`,chartShowLabel:!1,chartType:`line`,controllerAlign:`center`,controllerHeight:40,data:[],interval:`day`,loop:!1,playMode:`acc`,selectionType:`range`,type:`time`}},t}(H4);function D7(e){let{width:t,height:n,renderer:r}=e,i=O7(e),a=new mM({width:t,height:n,container:i,renderer:r||new GR});return[i,a]}function O7(e){var t;let{container:n,className:r,graphCanvas:i}=e;if(n)return typeof n==`string`?document.getElementById(n):n;let a=z$(r,!1),{width:o,height:s,containerStyle:c}=e,[l,u]=k7(e);return Object.assign(a.style,Object.assign({position:`absolute`,left:l+`px`,top:u+`px`,width:o+`px`,height:s+`px`},c)),(t=i.getContainer())==null||t.appendChild(a),a}function k7(e){let{width:t,height:n,placement:r,graphCanvas:i}=e,[a,o]=i.getSize(),[s,c]=zF(r);return[s*(a-t),c*(o-n)]}var A7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},j7=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.typePrefix=`__data__`,this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{let{graph:e}=this.context;e.on(Q.AFTER_DRAW,this.createElement)},this.changeState=(e,t)=>{let{graph:n}=this.context,{typePrefix:r}=this,i=oC(e,[r,`id`]),a=oC(e,[r,`style`,`labelText`]),[o]=i.split(`__`),s=this.fieldMap[o].get(a)||[];n.setElementState(Object.fromEntries(s?.map(e=>[e,t])))},this.click=e=>{if(this.options.trigger===`hover`)return;let t=oC(e,[this.typePrefix,`id`]);this.selectedItems.includes(t)?(this.selectedItems=this.selectedItems.filter(e=>e!==t),this.changeState(e,[])):(this.selectedItems.push(t),this.changeState(e,`selected`))},this.mouseleave=e=>{this.options.trigger!==`click`&&(this.selectedItems=[],this.changeState(e,[]))},this.mouseenter=e=>{if(this.options.trigger===`click`)return;let t=oC(e,[this.typePrefix,`id`]);this.selectedItems.includes(t)?this.selectedItems=this.selectedItems.filter(e=>e!==t):(this.selectedItems.push(t),this.changeState(e,`active`))},this.setFieldMap=(e,t,n)=>{if(!e)return;let r=this.fieldMap[n];if(r)if(!r.has(e))r.set(e,[t]);else{let n=r.get(e);n&&(n.push(t),r.set(e,n))}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(e,t)=>{if(!e)return[];let{model:n,element:r}=this.context,{nodes:i,edges:a,combos:o}=n.getData(),s={},c=t=>rS(e)?e(t):e,l={node:`circle`,edge:`line`,combo:`rect`},u={circle:`circle`,ellipse:`circle`,image:`bowtie`,rect:`square`,star:`cross`,triangle:`triangle`,diamond:`diamond`,cubic:`dot`,line:`hyphen`,polyline:`hyphen`,quadratic:`hv`,"cubic-horizontal":`hyphen`,"cubic-vertical":`line`},d=(e,t)=>r?.getElementComputedStyle(e,t),f=(e,t)=>{e.forEach(e=>{let{id:n}=e,i=oC(e,[`data`,c(e)]),a=r?.getElementType(t,e)||`circle`,o=d(t,e),f=(t===`edge`?o?.stroke:o?.fill)||`#1783ff`;n&&i&&i.replace(/\s+/g,``)&&(this.setFieldMap(i,n,t),s[i]||(s[i]={id:`${t}__${n}`,label:i,marker:u[a]||l[t],elementType:t,lineWidth:1,stroke:f,fill:f}))})};switch(t){case`node`:f(i,`node`);break;case`edge`:f(a,`edge`);break;case`combo`:f(o,`combo`);break;default:return[]}return Object.values(s)},this.createElement=()=>{if(this.draw){this.updateElement();return}let e=this.options,{width:t,height:n,nodeField:r,edgeField:i,comboField:a,trigger:o,position:s,container:c,containerStyle:l,className:u}=e,d=A7(e,[`width`,`height`,`nodeField`,`edgeField`,`comboField`,`trigger`,`position`,`container`,`containerStyle`,`className`]),f=this.getMarkerData(r,`node`),p=this.getMarkerData(i,`edge`),m=this.getMarkerData(a,`combo`),h=[...f,...m,...p],g=Object.assign({width:t,height:n,data:h,itemMarkerLineWidth:({lineWidth:e})=>e,itemMarker:({marker:e})=>e,itemMarkerStroke:({stroke:e})=>e,itemMarkerFill:({fill:e})=>e,gridCol:f.length},d,this.getEvents()),_=new G5({className:`legend`,style:g});this.category=_,this.upsertCanvas().appendChild(_),this.draw=!0},this.bindEvents()}update(e){super.update(e),this.clear(),this.createElement()}clear(){var e,t;(e=this.canvas)==null||e.destroy(),(t=this.container)==null||t.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5,itemLabelOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5})}upsertCanvas(){if(this.canvas)return this.canvas;let e=this.context.canvas,[t,n]=e.getSize(),{width:r=t,height:i=n,position:a,container:o,containerStyle:s,className:c}=this.options,[l,u]=D7({width:r,height:i,graphCanvas:e,container:o,containerStyle:s,placement:a,className:`legend`});return this.container=l,c&&l.classList.add(c),this.canvas=u,this.canvas}destroy(){this.clear(),this.context.graph.off(Q.AFTER_DRAW,this.createElement),super.destroy()}};j7.defaultOptions={position:`bottom`,trigger:`hover`,orientation:`horizontal`,layout:`flex`,itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};var M7=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.onDraw=e=>{e?.data?.render||this.onRender()},this.shapes=new Map,this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=e=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(e.pointerId),this.mask.addEventListener(`pointermove`,this.onMaskDrag),this.mask.addEventListener(`pointerup`,this.onMaskDragEnd),this.mask.addEventListener(`pointercancel`,this.onMaskDragEnd))},this.onMaskDrag=e=>{if(!this.mask||!this.isMaskDragging)return;let{size:[t,n]}=this.options,{movementX:r,movementY:i}=e,{left:a,top:o,width:s,height:c}=this.mask.style,[,,l,u]=this.maskBBox,d=parseInt(a)+r,f=parseInt(o)+i,p=parseInt(s),m=parseInt(c);d<0&&(d=0),f<0&&(f=0),d+p>t&&(d=P7(t-p,0)),f+m>n&&(f=P7(n-m,0)),p<l&&(r>0?(d=P7(d-r,0),p=N7(p+r,t)):r<0&&(p=N7(p-r,t))),m<u&&(i>0?(f=P7(f-i,0),m=N7(m+i,n)):i<0&&(m=N7(m-i,n))),Object.assign(this.mask.style,{left:d+`px`,top:f+`px`,width:p+`px`,height:m+`px`});let h=parseInt(a)-d,g=parseInt(o)-f;if(h===0&&g===0)return;let _=this.context.canvas.getCamera().getZoom(),v=this.canvas.getCamera().getZoom(),y=_/v;this.context.graph.translateBy([h*y,g*y],!1)},this.onMaskDragEnd=e=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(e.pointerId),this.mask.removeEventListener(`pointermove`,this.onMaskDrag),this.mask.removeEventListener(`pointerup`,this.onMaskDragEnd),this.mask.removeEventListener(`pointercancel`,this.onMaskDragEnd))},this.onTransform=dC(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera())},32,{leading:!0}),this.setOnRender(),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),`delay`in e&&this.setOnRender(),this.bindEvents()}setOnRender(){this.onRender=qS(()=>{this.renderMinimap(),this.renderMask()},this.options.delay)}bindEvents(){let{graph:e}=this.context;e.on(Q.AFTER_DRAW,this.onDraw),e.on(Q.AFTER_RENDER,this.onRender),e.on(Q.AFTER_ANIMATE,this.onRender),e.on(Q.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){let{graph:e}=this.context;e.off(Q.AFTER_DRAW,this.onDraw),e.off(Q.AFTER_RENDER,this.onRender),e.off(Q.AFTER_ANIMATE,this.onRender),e.off(Q.AFTER_TRANSFORM,this.onTransform)}renderMinimap(){let e=this.getElements(),t=this.initCanvas();this.setShapes(t,e)}getElements(){let{filter:e}=this.options,{model:t,element:n}=this.context,r=t.getData(),i={nodes:r.nodes.filter(e=>n?.getElement($(e))),edges:r.edges.filter(e=>{let t=n?.getElement($(e));return t&&NB(t)}),combos:r.combos.filter(e=>n?.getElement($(e)))};if(!e)return i;let{nodes:a,edges:o,combos:s}=i;return{nodes:a.filter(t=>e($(t),`node`)),edges:o.filter(t=>e($(t),`edge`)),combos:s.filter(t=>e($(t),`combo`))}}setShapes(e,t){let{nodes:n,edges:r,combos:i}=t,{shape:a}=this.options,{element:o}=this.context;if(a===`key`){let t=new Set,a=n=>{let r=$(n);t.add(r);let i=o.getElement(r);if(!i)return;let a=i.getShape(`key`),s=this.shapes.get(r)||a.cloneNode();s.setPosition(a.getPosition()),i.style.zIndex&&(s.style.zIndex=i.style.zIndex),s.id=i.id,this.shapes.has(r)?Object.entries(a.attributes).forEach(([e,t])=>{s.style[e]!==t&&(s.style[e]=t)}):(e.appendChild(s),this.shapes.set(r,s))};r.forEach(a),i.forEach(a),n.forEach(a),this.shapes.forEach((n,r)=>{t.has(r)||(e.removeChild(n),this.shapes.delete(r))});return}let s=(e,t)=>{let n=o.getElement(e).getPosition();return t.setPosition(n),t};e.removeChildren(),r.forEach(t=>e.appendChild(a($(t),`edge`))),i.forEach(t=>{e.appendChild(s($(t),a($(t),`combo`)))}),n.forEach(t=>{e.appendChild(s($(t),a($(t),`node`)))})}initCanvas(){let{renderer:e,size:[t,n]}=this.options;if(this.canvas){let{width:r,height:i}=this.canvas.getConfig();(t!==r||n!==i)&&this.canvas.resize(t,n),e&&this.canvas.setRenderer(e)}else{let{className:r,position:i,container:a,containerStyle:o}=this.options,[s,c]=D7({renderer:e,width:t,height:n,placement:i,className:`minimap`,container:a,containerStyle:o,graphCanvas:this.context.canvas});r&&s.classList.add(r),this.container=s,this.canvas=c}return this.setCamera(),this.canvas}createLandmark(e,t,n){let r=`${e.join(`,`)}-${t.join(`,`)}-${n}`;if(this.landmarkMap.has(r))return this.landmarkMap.get(r);let i=this.canvas.getCamera().createLandmark(r,{position:e,focalPoint:t,zoom:n});return this.landmarkMap.set(r,i),i}setCamera(){let{canvas:e}=this.context,t=this.canvas?.getCamera();if(!t)return;let{size:[n,r],padding:i}=this.options,[a,o,s,c]=iP(i),{min:l,max:u,center:d}=e.getBounds(`elements`),f=u[0]-l[0],p=u[1]-l[1],m=n-c-o,h=r-a-s,g=m/f,_=h/p,v=Math.min(g,_),y=this.createLandmark(d,d,v);t.gotoLandmark(y,0)}get maskBBox(){let{canvas:e}=this.context,t=e.getSize(),n=e.getCanvasByViewport([0,0]),r=e.getCanvasByViewport(t),i=this.canvas.canvas2Viewport(GF(n)),a=this.canvas.canvas2Viewport(GF(r)),o=a.x-i.x,s=a.y-i.y;return[i.x,i.y,o,s]}calculateMaskBBox(){let{size:[e,t]}=this.options,[n,r,i,a]=this.maskBBox;return n<0&&(i=N7(i+n,e),n=0),r<0&&(a=N7(a+r,t),r=0),n+i>e&&(i=P7(e-n,0)),r+a>t&&(a=P7(t-r,0)),[N7(n,e),N7(r,t),P7(i,0),P7(a,0)]}renderMask(){let{maskStyle:e}=this.options;this.mask||(this.mask=document.createElement(`div`),this.mask.addEventListener(`pointerdown`,this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener(`dragstart`,e=>e.preventDefault&&e.preventDefault())),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},e),{cursor:`move`,position:`absolute`,pointerEvents:`auto`})),this.updateMask()}updateMask(){if(!this.mask)return;let[e,t,n,r]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:t+`px`,left:e+`px`,width:n+`px`,height:r+`px`})}destroy(){var e,t,n;this.unbindEvents(),(e=this.canvas)==null||e.destroy(),(t=this.mask)==null||t.remove(),(n=this.container)==null||n.remove(),super.destroy()}};M7.defaultOptions={size:[240,160],shape:`key`,padding:10,position:`right-bottom`,maskStyle:{border:`1px solid #ddd`,background:`rgba(0, 0, 0, 0.1)`},containerStyle:{border:`1px solid #ddd`,background:`#fff`},delay:128};var N7=(e,t)=>Math.min(e,t),P7=(e,t)=>Math.max(e,t),F7=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},I7={x1:0,y1:0,x2:0,y2:0,visibility:`hidden`},L7=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.initSnapline=()=>{let e=this.context.canvas.getLayer(`transient`);this.horizontalLine||=e.appendChild(new Hj({style:Object.assign(Object.assign({},I7),this.options.horizontalLineStyle)})),this.verticalLine||=e.appendChild(new Hj({style:Object.assign(Object.assign({},I7),this.options.verticalLineStyle)}))},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(e,t,n)=>F7(this,void 0,void 0,function*(){let{verticalX:r,horizontalY:i}=n,{tolerance:a}=this.options,{min:[o,s],max:[c,l],center:[u,d]}=t,f=0,p=0;r!==null&&(R7(c,r)<a&&(f=r-c),R7(o,r)<a&&(f=r-o),R7(u,r)<a&&(f=r-u),f!==0&&(this.isVerticalSticking=!0)),i!==null&&(R7(l,i)<a&&(p=i-l),R7(s,i)<a&&(p=i-s),R7(d,i)<a&&(p=i-d),p!==0&&(this.isHorizontalSticking=!0)),(f!==0||p!==0)&&(yield this.context.graph.translateElementBy({[e]:[f,p]},!1))}),this.enableSnap=e=>{let{target:t}=e,n=.5;if(this.isHorizontalSticking||this.isVerticalSticking){let[r,i]=this.getDelta(e);if(this.isHorizontalSticking&&this.isVerticalSticking&&Math.abs(r)<=n&&Math.abs(i)<=n)return this.context.graph.translateElementBy({[t.id]:[-r,-i]},!1),!1;if(this.isHorizontalSticking&&Math.abs(i)<=n)return this.context.graph.translateElementBy({[t.id]:[0,-i]},!1),!1;if(this.isVerticalSticking&&Math.abs(r)<=n)return this.context.graph.translateElementBy({[t.id]:[-r,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0},200)}return this.enableStick},this.calcSnaplineMetadata=(e,t)=>{let{tolerance:n,shape:r}=this.options,{min:[i,a],max:[o,s],center:[c,l]}=t,u=null,d=null,f=null,p=null,m=null,h=null;return this.getNodes().some(t=>{if(aC(e.id,t.id))return!1;let{min:[g,_],max:[v,y],center:[b,x]}=z7(t,r).getRenderBounds();return u===null&&(R7(b,c)<n?u=b:R7(g,i)<n||R7(g,o)<n?u=g:(R7(v,o)<n||R7(v,i)<n)&&(u=v),u!==null&&(d=Math.min(_,a),f=Math.max(y,s))),p===null&&(R7(x,l)<n?p=x:R7(_,a)<n||R7(_,s)<n?p=_:(R7(y,s)<n||R7(y,a)<n)&&(p=y),p!==null&&(m=Math.min(g,i),h=Math.max(v,o))),u!==null&&p!==null}),{verticalX:u,verticalMinY:d,verticalMaxY:f,horizontalY:p,horizontalMinX:m,horizontalMaxX:h}},this.onDragStart=()=>{this.initSnapline()},this.onDrag=e=>F7(this,void 0,void 0,function*(){let{target:t}=e;if(this.options.autoSnap&&!this.enableSnap(e))return;let n=z7(t,this.options.shape).getRenderBounds(),r=this.calcSnaplineMetadata(t,n);this.hideSnapline(),(r.verticalX!==null||r.horizontalY!==null)&&this.updateSnapline(r),this.options.autoSnap&&(yield this.autoSnapToLine(t.id,n,r))}),this.onDragEnd=()=>{this.hideSnapline()},this.bindEvents()}getNodes(){let{filter:e}=this.options,t=(this.context.element?.getNodes()||[]).filter(e=>NB(e)&&this.context.viewport?.isInViewport(e.getRenderBounds()));return e?t.filter(t=>e(t)):t}hideSnapline(){this.horizontalLine.style.visibility=`hidden`,this.verticalLine.style.visibility=`hidden`}getLineWidth(e){let{lineWidth:t}=this.options[`${e}LineStyle`];return+(t||I7.lineWidth||1)/this.context.graph.getZoom()}updateSnapline(e){let{verticalX:t,verticalMinY:n,verticalMaxY:r,horizontalY:i,horizontalMinX:a,horizontalMaxX:o}=e,[s,c]=this.context.canvas.getSize(),{offset:l}=this.options;i===null?this.horizontalLine.style.visibility=`hidden`:Object.assign(this.horizontalLine.style,{x1:l===1/0?0:a-l,y1:i,x2:l===1/0?s:o+l,y2:i,visibility:`visible`,lineWidth:this.getLineWidth(`horizontal`)}),t===null?this.verticalLine.style.visibility=`hidden`:Object.assign(this.verticalLine.style,{x1:t,y1:l===1/0?0:n-l,x2:t,y2:l===1/0?c:r+l,visibility:`visible`,lineWidth:this.getLineWidth(`vertical`)})}getDelta(e){let t=this.context.graph.getZoom();return wF([e.dx,e.dy],t)}bindEvents(){return F7(this,void 0,void 0,function*(){let{graph:e}=this.context;e.on(DN.DRAG_START,this.onDragStart),e.on(DN.DRAG,this.onDrag),e.on(DN.DRAG_END,this.onDragEnd)})}unbindEvents(){let{graph:e}=this.context;e.off(DN.DRAG_START,this.onDragStart),e.off(DN.DRAG,this.onDrag),e.off(DN.DRAG_END,this.onDragEnd)}destroyElements(){var e,t;(e=this.horizontalLine)==null||e.destroy(),(t=this.verticalLine)==null||t.destroy()}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy()}};L7.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:`key`,verticalLineStyle:{stroke:`#1783FF`},horizontalLineStyle:{stroke:`#1783FF`},filter:()=>!0};var R7=(e,t)=>Math.abs(e-t),z7=(e,t)=>typeof t==`function`?t(e):e.getShape(t),B7=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},V7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},H7=[`timestamp`,`time`,`date`,`datetime`],U7=class e extends R${get padding(){return iP(this.options.padding)}constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.backup(),this.upsertTimebar()}play(){var e;(e=this.timebar)==null||e.play()}pause(){var e;(e=this.timebar)==null||e.pause()}forward(){var e;(e=this.timebar)==null||e.forward()}backward(){var e;(e=this.timebar)==null||e.backward()}reset(){var e;(e=this.timebar)==null||e.reset()}update(e){super.update(e),this.backup(),this.upsertTimebar()}backup(){this.originalData=W7(this.context.graph.getData())}upsertTimebar(){let{canvas:e}=this.context,t=this.options,{onChange:n,timebarType:r,data:i,x:a,y:o,width:s,height:c,mode:l}=t,u=V7(t,[`onChange`,`timebarType`,`data`,`x`,`y`,`width`,`height`,`mode`]),d=e.getSize(),[f]=this.padding;this.upsertCanvas().ready.then(()=>{var e;let t=Object.assign(Object.assign({x:d[0]/2-s/2,y:f,onChange:e=>{let t=(aS(e)?e:[e,e]).map(e=>IS(e)?e.getTime():e);this.options.mode===`modify`?this.filterElements(t):this.hiddenElements(t),n?.(t)}},u),{data:i.map(e=>K(e)?{time:e,value:0}:e),width:s,height:c,type:r});this.timebar?this.timebar.update(t):(this.timebar=new E7({style:t}),(e=this.canvas)==null||e.appendChild(this.timebar))})}upsertCanvas(){if(this.canvas)return this.canvas;let{className:e,height:t,position:n}=this.options,r=this.context.canvas,[i]=r.getSize(),[a,,o]=this.padding,[s,c]=D7({width:i,height:t+a+o,graphCanvas:r,className:`timebar`,placement:n});return this.container=s,e&&s.classList.add(e),this.canvas=c,this.canvas}filterElements(e){return B7(this,void 0,void 0,function*(){if(!this.originalData)return;let{elementTypes:t,getTime:n}=this.options,{graph:r,element:i}=this.context,a=W7(this.originalData);t.forEach(t=>{let r=`${t}s`;a[r]=(this.originalData[r]||[]).filter(t=>{let r=n(t);return!!G7(r,e)})});let o=[...a.nodes,...a.combos].map(e=>$(e));a.edges=a.edges.filter(e=>{let t=e.source,n=e.target;return o.includes(t)&&o.includes(n)}),r.setData(a),yield i.draw({animation:!1,silence:!0})?.finished})}hiddenElements(e){let{graph:t}=this.context,{elementTypes:n,getTime:r}=this.options,i=[],a=[];n.forEach(t=>{let n=`${t}s`;(this.originalData?.[n]||[]).forEach(t=>{let n=$(t),o=r(t);G7(o,e)?a.push(n):i.push(n)})}),t.hideElement(i,!1),t.showElement(a,!1)}destroy(){var e,t,n;let{graph:r}=this.context;this.originalData&&r.setData(Object.assign({},this.originalData)),(e=this.timebar)==null||e.destroy(),(t=this.canvas)==null||t.destroy(),(n=this.container)==null||n.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy()}};U7.defaultOptions={position:`bottom`,enable:!0,timebarType:`time`,className:`g6-timebar`,width:450,height:60,zIndex:3,elementTypes:[`node`],padding:10,mode:`modify`,getTime:e=>mte(e,H7,void 0),loop:!1};var W7=e=>{let{nodes:t=[],edges:n=[],combos:r=[]}=e;return{nodes:[...t],edges:[...n],combos:[...r]}},G7=(e,t)=>{if(K(t))return e===t;let[n,r]=t;return e>=n&&e<=r},mte=(e,t,n)=>{for(let n=0;n<t.length;n++){let r=t[n],i=e.data?.[r];if(i)return i}return n};function hte(e){let t={top:`unset`,right:`unset`,bottom:`unset`,left:`unset`};return e.split(`-`).forEach(e=>{t[e]=`8px`}),t.flexDirection=e.startsWith(`top`)||e.startsWith(`bottom`)?`row`:`column`,t}var K7=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},q7=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.$element=z$(`toolbar`,!1),this.onToolbarItemClick=e=>{let{onClick:t}=this.options;if(e.target instanceof Element&&e.target.className.includes(`g6-toolbar-item`)){let n=e.target.getAttribute(`value`);t?.(n,e.target)}};let r=this.context.canvas.getContainer();this.$element.style.display=`flex`,r.appendChild(this.$element),B$(`g6-toolbar-css`,`style`,{},`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,document.head),B$(`g6-toolbar-svgicon`,`div`,{display:`none`},`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`),this.$element.addEventListener(`click`,this.onToolbarItemClick),this.update(n)}update(e){let t=Object.create(null,{update:{get:()=>super.update}});return K7(this,void 0,void 0,function*(){t.update.call(this,e);let{className:n,position:r,style:i}=this.options;this.$element.className=`g6-toolbar ${n||``}`,Object.assign(this.$element.style,i,hte(r)),this.$element.innerHTML=yield this.getDOMContent()})}destroy(){this.$element.removeEventListener(`click`,this.onToolbarItemClick),this.$element.remove(),super.destroy()}getDOMContent(){return K7(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(e=>`
          <div class="g6-toolbar-item" value="${e.value}" title="${e.title??``}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${e.id}"></use>
            </svg>
          </div>`).join(``)})}};q7.defaultOptions={position:`top-left`};var J7=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},Y7=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(e,t)=>{let{enable:n}=this.options;return typeof n==`function`?n(e,t):n},this.onClick=e=>{let{target:{id:t}}=e;this.currentTarget===t?this.hide(e):this.show(e)},this.onPointerMove=e=>{let{target:t}=e;!this.currentTarget||t.id===this.currentTarget||this.show(e)},this.onPointerLeave=e=>{this.hide(e)},this.onCanvasMove=e=>{this.hide(e)},this.onPointerOver=e=>{this.show(e)},this.showById=e=>J7(this,void 0,void 0,function*(){let t={target:{id:e}};yield this.show(t)}),this.getElementData=(e,t)=>{let{model:n}=this.context;switch(t){case`node`:return n.getNodeData([e]);case`edge`:return n.getEdgeData([e]);case`combo`:return n.getComboData([e]);default:return[]}},this.show=e=>J7(this,void 0,void 0,function*(){var t,n;let{client:r,target:{id:i}}=e;if(RB(e.target))return;let a=this.context.graph.getElementType(i),{getContent:o,title:s}=this.options,c=this.getElementData(i,a);if(!this.tooltipElement||!this.isEnable(e,c))return;let l={};if(o){if(l.content=yield o(e,c),!l.content)return}else{let e=this.context.graph.getElementRenderStyle(i),t=a===`node`?e.fill:e.stroke;l={title:s||a,data:c.map(e=>({name:`ID`,value:e.id||`${e.source} -> ${e.target}`,color:t}))}}this.currentTarget=i;let u,d;if(r)u=r.x,d=r.y;else{let e=oC(c,`0.style`,{x:0,y:0});u=e.x,d=e.y}(n=(t=this.options).onOpenChange)==null||n.call(t,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:u,y:d,style:{".tooltip":{visibility:`visible`}}}),l))}),this.hide=e=>{var t,n,r,i,a;if(!e){(n=(t=this.options).onOpenChange)==null||n.call(t,!1),(r=this.tooltipElement)==null||r.hide(),this.currentTarget=null;return}if(!this.tooltipElement||!this.currentTarget)return;let{client:{x:o,y:s}}=e;(a=(i=this.options).onOpenChange)==null||a.call(i,!1),this.tooltipElement.hide(o,s),this.currentTarget=null},this.initTooltip=()=>{var e;let t=new Q5({className:`tooltip`,style:this.tooltipStyleProps});return(e=this.container)==null||e.appendChild(t.HTMLTooltipElement),t},this.render(),this.bindEvents()}getEvents(){return this.options.trigger===`click`?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerover":this.onPointerOver,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerover":this.onPointerOver,"edge:pointermove":this.onPointerMove,"combo:pointerover":this.onPointerOver,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}update(e){var t;this.unbindEvents(),super.update(e),this.tooltipElement&&((t=this.container)==null||t.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}render(){let{canvas:e}=this.context,t=e.getContainer();t&&(this.container=t,this.tooltipElement=this.initTooltip())}unbindEvents(){let{graph:e}=this.context,t=this.getEvents();Object.keys(t).forEach(n=>{e.off(n,t[n])})}bindEvents(){let{graph:e}=this.context,t=this.getEvents();Object.keys(t).forEach(n=>{e.on(n,t[n])})}get tooltipStyleProps(){let{canvas:e}=this.context,{center:t}=e.getBounds(),{top:n,left:r}=e.getContainer().getBoundingClientRect(),{style:i,position:a,enterable:o,container:s={x:-r,y:-n},title:c,offset:l}=this.options,[u,d]=t,[f,p]=e.getSize();return{x:u,y:d,container:s,title:c,bounding:{x:0,y:0,width:f,height:p},position:a,enterable:o,offset:l,style:i}}destroy(){var e;this.unbindEvents(),this.tooltipElement&&((e=this.container)==null||e.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy()}};Y7.defaultOptions={trigger:`hover`,position:`top-right`,enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:`hidden`}}};var X7=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},Z7;function Q7(e,t){return Z7||=document.createElement(`canvas`),Z7.width=e,Z7.height=t,Z7.getContext(`2d`).clearRect(0,0,e,t),Z7}function gte(e,t,n,r){return X7(this,void 0,void 0,function*(){let i=Q7(e,t),a=i.getContext(`2d`),{rotate:o,opacity:s,textFill:c,textFontSize:l,textFontFamily:u,textFontVariant:d,textFontWeight:f,textAlign:p,textBaseline:m}=r;return a.textAlign=p,a.textBaseline=m,a.translate(e/2,t/2),a.font=`${l}px ${u} ${d} ${f}`,o&&a.rotate(o),s&&(a.globalAlpha=s),c&&(a.fillStyle=c,a.fillText(`${n}`,0,0)),i.toDataURL()})}function _te(e,t,n,r){return X7(this,void 0,void 0,function*(){let i=Q7(e,t),a=i.getContext(`2d`),{rotate:o,opacity:s}=r;o&&a.rotate(o),s&&(a.globalAlpha=s);let c=new Image;return c.crossOrigin=`anonymous`,c.src=n,new Promise(n=>{c.onload=function(){let r=e>c.width?(e-c.width)/2:0,o=t>c.height?(t-c.height)/2:0;a.drawImage(c,0,0,c.width,c.height,r,o,e-r*2,t-o*2),n(i.toDataURL())}})})}var vte=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},yte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},$7=class e extends R${constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.$element=z$(`watermark`),this.context.canvas.getContainer().appendChild(this.$element),this.update(n)}update(e){let t=Object.create(null,{update:{get:()=>super.update}});return vte(this,void 0,void 0,function*(){t.update.call(this,e);let n=this.options,{width:r,height:i,text:a,imageURL:o}=n,s=yte(n,[`width`,`height`,`text`,`imageURL`]);Object.keys(s).forEach(t=>{t.startsWith(`background`)&&(this.$element.style[t]=e[t])});let c=o?yield _te(r,i,o,s):yield gte(r,i,a,s);this.$element.style.backgroundImage=`url(${c})`})}destroy(){super.destroy(),this.$element.remove()}};$7.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:``,textFill:`#000`,textFontSize:16,textAlign:`center`,textBaseline:`middle`,backgroundRepeat:`repeat`};var bte=[`#7E92B5`,`#F4664A`,`#FFBE3A`],xte={type:`group`,color:[`#1783FF`,`#00C9C9`,`#F08F56`,`#D580FF`,`#7863FF`,`#DB9D0D`,`#60C42D`,`#FF80CA`,`#2491B3`,`#17C76F`]},Ste={type:`group`,color:[`#99ADD1`,`#1783FF`,`#00C9C9`,`#F08F56`,`#D580FF`,`#7863FF`,`#DB9D0D`,`#60C42D`,`#FF80CA`,`#2491B3`,`#17C76F`]};function e9(e){let{bgColor:t,textColor:n,nodeColor:r,nodeColorDisabled:i,nodeStroke:a,nodeHaloStrokeOpacityActive:o=.15,nodeHaloStrokeOpacitySelected:s=.25,nodeOpacityDisabled:c=.06,nodeIconOpacityInactive:l=.85,nodeOpacityInactive:u=.25,nodeBadgePalette:d=bte,nodePaletteOptions:f=xte,edgeColor:p,edgeColorDisabled:m,edgePaletteOptions:h=Ste,comboColor:g,comboColorDisabled:_,comboStroke:v,comboStrokeDisabled:y,edgeColorInactive:b}=e;return{background:t,node:{palette:f,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:`#fff`,badgeFontSize:8,badgePadding:[0,4],badgePalette:d,fill:r,fillOpacity:1,halo:!1,iconFill:`#fff`,iconOpacity:1,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:n,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:r,portLineWidth:1,portStroke:a,portStrokeOpacity:.65,size:32,stroke:a,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:s,labelFontSize:12,labelFontWeight:`bold`,lineWidth:4,stroke:a},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:o},highlight:{labelFontWeight:`bold`,lineWidth:4,stroke:a,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:u,donutOpacity:u,fillOpacity:u,iconOpacity:l,labelFill:n,labelFillOpacity:u,strokeOpacity:u},disabled:{badgeBackgroundOpacity:.25,donutOpacity:c,fill:i,fillOpacity:c,iconFill:i,iconOpacity:.25,labelFill:n,labelFillOpacity:.25,strokeOpacity:c}},animation:{enter:`fade`,exit:`fade`,show:`fade`,hide:`fade`,expand:`node-expand`,collapse:`node-collapse`,update:[{fields:[`x`,`y`,`fill`,`stroke`]}],translate:[{fields:[`x`,`y`]}]}},edge:{palette:h,style:{badgeBackgroundFill:p,badgeFill:`#fff`,badgeFontSize:8,badgeOffsetX:10,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:`center`,labelTextBaseline:`middle`,lineWidth:1,stroke:p,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:`bold`,lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:`bold`,lineWidth:3},inactive:{stroke:b,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:m,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:`fade`,exit:`fade`,expand:`path-in`,collapse:`path-out`,show:`fade`,hide:`fade`,update:[{fields:[`sourceNode`,`targetNode`]},{fields:[`stroke`],shape:`key`}],translate:[{fields:[`sourceNode`,`targetNode`]}]}},combo:{style:{collapsedMarkerFill:t,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:g,halo:!1,haloLineWidth:12,haloStroke:v,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:v},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:_,fillOpacity:.25,labelOpacity:.25,stroke:y,strokeOpacity:.25}},animation:{enter:`fade`,exit:`fade`,show:`fade`,hide:`fade`,expand:`combo-expand`,collapse:`combo-collapse`,update:[{fields:[`x`,`y`]},{fields:[`fill`,`stroke`,`lineWidth`],shape:`key`}],translate:[{fields:[`x`,`y`]}]}}}}const Cte=e9({bgColor:`#000000`,comboColor:`#fdfdfd`,comboColorDisabled:`#d0e4ff`,comboStroke:`#99add1`,comboStrokeDisabled:`#969696`,edgeColor:`#637088`,edgeColorDisabled:`#637088`,edgeColorInactive:`#D0E4FF`,edgePaletteOptions:{type:`group`,color:[`#637088`,`#0F55A6`,`#008383`,`#9C5D38`,`#8B53A6`,`#4E40A6`,`#8F6608`,`#3E801D`,`#A65383`,`#175E75`,`#0F8248`]},nodeColor:`#1783ff`,nodeColorDisabled:`#D0E4FF`,nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:`#d0e4ff`,textColor:`#ffffff`}),wte=e9({bgColor:`#ffffff`,comboColor:`#99ADD1`,comboColorDisabled:`#f0f0f0`,comboStroke:`#99add1`,comboStrokeDisabled:`#d9d9d9`,edgeColor:`#99add1`,edgeColorDisabled:`#d9d9d9`,edgeColorInactive:`#1B324F`,nodeColor:`#1783ff`,nodeColorDisabled:`#1B324F`,nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:`#000000`,textColor:`#000000`});var t9=class extends _F{beforeDraw(e,t){return e}afterLayout(e,t){}},Tte=class extends t9{beforeDraw(e){let{model:t}=this.context,n=e.add.combos,r=e=>{let n=[];return e.forEach((e,r)=>{let i=t.getAncestorsData(r,`combo`).map(e=>$(e)).reverse();n.push([r,e,i.length])}),new Map(n.sort(([,,e],[,,t])=>t-e).map(([e,t])=>[e,t]))};return e.add.combos=r(n),e.update.combos=r(e.update.combos),e}};function n9(e,t,n,r,i){let a=$(r),o=`${n}s`,s=i?r:e.add[o].get(a)||e.update[o].get(a)||e.remove[o].get(a)||r;Object.entries(e).forEach(([e,n])=>{t===e?n[o].set(a,s):n[o].delete(a)})}function r9(e,t){return Object.keys(e).every(n=>e[n]===t[n])}var Ete=class extends t9{beforeDraw(e,t){if(t.stage===`visibility`||!this.context.model.model.hasTreeStructure(`combo`))return e;let{model:n}=this.context,{add:r,update:i}=e,a=[...e.update.combos.entries(),...e.add.combos.entries()];for(;a.length;){let[t,o]=a.pop();if(wI(o)){let o=n.getDescendantsData(t),s=o.map($),{internal:c,external:l}=jz(s,e=>n.getRelatedEdgesData(e));o.forEach(t=>{let r=$(t),i=a.findIndex(([e])=>e===r);i!==-1&&a.splice(i,1);let o=n.getElementType(r);n9(e,`remove`,o,t)}),c.forEach(t=>n9(e,`remove`,`edge`,t)),l.forEach(e=>{let t=$(e);this.context.element?.getElement(t)?i.edges.set(t,e):r.edges.set(t,e)})}else{let r=n.getChildrenData(t),i=r.map($),{edges:o}=jz(i,e=>n.getRelatedEdgesData(e));[...r,...o].forEach(t=>{let r=$(t),i=n.getElementType(r);this.context.element?.getElement(r)?n9(e,`update`,i,t):n9(e,`add`,i,t),i===`combo`&&a.push([r,t])})}}return e}},i9=(e,t,n,r)=>{let i=`${n}s`,a=$(r);!e.add[i].has(a)&&!e.update[i].has(a)&&e[t][i].set($(r),r)},Dte=class extends t9{getElement(e){return this.context.element.getElement(e)}handleExpand(e,t){if(i9(t,`add`,`node`,e),wI(e))return;let n=$(e);i9(t,`add`,`node`,e),this.context.model.getRelatedEdgesData(n).forEach(e=>{n9(t,`add`,`edge`,e)}),this.context.model.getChildrenData(n).forEach(e=>{this.handleExpand(e,t)})}beforeDraw(e){let{graph:t,model:n}=this.context;if(!n.model.hasTreeStructure(`tree`))return e;let{add:{nodes:r,edges:i},update:{nodes:a}}=e,o=new Map,s=new Map;r.forEach((e,t)=>{wI(e)&&o.set(t,e)}),i.forEach(e=>{if(t.getElementType(e.source)!==`node`)return;let n=t.getNodeData(e.source);wI(n)&&o.set(e.source,n)}),a.forEach((e,t)=>{let n=this.getElement(t);if(!n)return;let r=n.attributes.collapsed;wI(e)?r||o.set(t,e):r&&s.set(t,e)});let c=new Set;return o.forEach((t,r)=>{n.getDescendantsData(r).forEach(t=>{let r=$(t);c.has(r)||(n9(e,`remove`,`node`,t),n.getRelatedEdgesData(r).forEach(t=>{n9(e,`remove`,`edge`,t)}),c.add(r))})}),s.forEach((t,r)=>{if(n.getAncestorsData(r,`tree`).some(wI)){n9(e,`remove`,`node`,t);return}this.handleExpand(t,e)}),e}};function a9(e,t,n){jN[e][t]&&FN.warn(`The extension ${t} of ${e} has been registered before, and will be overridden.`),Object.assign(jN[e],{[t]:n})}var o9=function(){function e(t){W(this,e),this.dragndropPluginOptions=t}return G(e,[{key:`apply`,value:function(t){var n=this,r=t.renderingService,i=t.renderingContext.root.ownerDocument,a=i.defaultView,o=function(e){var t=e.target,r=t===i,o=r&&n.dragndropPluginOptions.isDocumentDraggable?i:t.closest&&t.closest(`[draggable=true]`);if(o){var s=!1,c=e.timeStamp,l=[e.clientX,e.clientY],u=null,d=[e.clientX,e.clientY],f=function(){var e=Ww(Hw().mark(function e(a){var f,p,m,h,g,_;return Hw().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}if(f=a.timeStamp-c,p=zC([a.clientX,a.clientY],l),!(f<=n.dragndropPluginOptions.dragstartTimeThreshold||p<=n.dragndropPluginOptions.dragstartDistanceThreshold)){e.next=1;break}return e.abrupt(`return`);case 1:a.type=`dragstart`,o.dispatchEvent(a),s=!0;case 2:if(a.type=`drag`,a.dx=a.clientX-d[0],a.dy=a.clientY-d[1],o.dispatchEvent(a),d=[a.clientX,a.clientY],r){e.next=4;break}return m=n.dragndropPluginOptions.overlap===`pointer`?[a.canvasX,a.canvasY]:t.getBounds().center,e.next=3,i.elementsFromPoint(m[0],m[1]);case 3:h=e.sent,g=h[h.indexOf(t)+1],_=g?.closest(`[droppable=true]`)||(n.dragndropPluginOptions.isDocumentDroppable?i:null),u!==_&&(u&&(a.type=`dragleave`,a.target=u,u.dispatchEvent(a)),_&&(a.type=`dragenter`,a.target=_,_.dispatchEvent(a)),u=_,u&&(a.type=`dragover`,a.target=u,u.dispatchEvent(a)));case 4:case`end`:return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();a.addEventListener(`pointermove`,f);var p=function(e){if(s){e.detail={preventClick:!0};var t=e.clone();u&&(t.type=`drop`,t.target=u,u.dispatchEvent(t)),t.type=`dragend`,o.dispatchEvent(t),s=!1}a.removeEventListener(`pointermove`,f)};t.addEventListener(`pointerup`,p,{once:!0}),t.addEventListener(`pointerupoutside`,p,{once:!0})}};r.hooks.init.tap(e.tag,function(){a.addEventListener(`pointerdown`,o)}),r.hooks.destroy.tap(e.tag,function(){a.removeEventListener(`pointerdown`,o)})}}])}();o9.tag=`Dragndrop`;var Ote=function(e){function t(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return W(this,t),e=Yy(this,t),e.name=`dragndrop`,e.options=n,e}return Zy(t,e),G(t,[{key:`init`,value:function(){this.addRenderingPlugin(new o9(Ly({overlap:`pointer`,isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:`destroy`,value:function(){this.removeAllRenderingPlugins()}},{key:`setOptions`,value:function(e){Object.assign(this.plugins[0].dragndropPluginOptions,e)}}])}(Zw),s9=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},c9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},l9=[`main`],u9=[`background`,`main`,`label`,`transient`];function kte(e){return e.main}var d9=class{getConfig(){return this.config}getLayer(e=`main`){return this.extends.layers[e]||kte(this.getLayers())}getLayers(){return this.extends.layers}getRenderer(e){return this.extends.renderers[e]}getCamera(e=`main`){return this.getLayer(e).getCamera()}getRoot(e=`main`){return this.getLayer(e).getRoot()}getContextService(e=`main`){return this.getLayer(e).getContextService()}setCursor(e){this.config.cursor=e,this.getLayer().setCursor(e)}get document(){return this.getLayer().document}get context(){return this.getLayer().context}constructor(e){this.config={enableMultiLayer:!0},Object.assign(this.config,e);let t=this.config,{renderer:n,background:r,cursor:i,enableMultiLayer:a}=t,o=c9(t,[`renderer`,`background`,`cursor`,`enableMultiLayer`]),s=a?u9:l9,c=f9(n,s),l=Object.fromEntries(s.map(e=>{let t=new mM(Object.assign(Object.assign({},o),{supportsMutipleCanvasesInOneContainer:a,renderer:c[e],background:a?e===`background`?r:void 0:r}));return[e,t]}));p9(l),this.extends={config:this.config,renderer:n,renderers:c,layers:l}}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,e])=>e.ready))}resize(e,t){Object.assign(this.extends.config,{width:e,height:t}),Object.values(this.getLayers()).forEach(n=>{let r=n.getCamera(),i=r.getPosition(),a=r.getFocalPoint();n.resize(e,t),r.setPosition(i),r.setFocalPoint(a)})}getBounds(e){return fP(Object.values(this.getLayers()).map(t=>e?t.getRoot().childNodes.find(t=>t.classList.includes(e)):t.getRoot()).filter(e=>e?.childNodes.length>0).map(e=>e.getBounds()))}getContainer(){let e=this.extends.config.container;return typeof e==`string`?document.getElementById(e):e}getSize(){return[this.extends.config.width||0,this.extends.config.height||0]}appendChild(e,t){let n=e.style?.$layer||`main`;return this.getLayer(n).appendChild(e,t)}setRenderer(e){if(e===this.extends.renderer)return;let t=f9(e,this.config.enableMultiLayer?u9:l9);this.extends.renderers=t,Object.entries(t).forEach(([e,t])=>this.getLayer(e).setRenderer(t)),p9(this.getLayers())}getCanvasByViewport(e){return WF(this.getLayer().viewport2Canvas(GF(e)))}getViewportByCanvas(e){return WF(this.getLayer().canvas2Viewport(GF(e)))}getViewportByClient(e){return WF(this.getLayer().client2Viewport(GF(e)))}getClientByViewport(e){return WF(this.getLayer().viewport2Client(GF(e)))}getClientByCanvas(e){return this.getClientByViewport(this.getViewportByCanvas(e))}getCanvasByClient(e){let t=this.getLayer(),n=t.client2Viewport(GF(e));return WF(t.viewport2Canvas(n))}toDataURL(){return s9(this,arguments,void 0,function*(e={}){let t=globalThis.devicePixelRatio||1,{mode:n=`viewport`}=e,r=c9(e,[`mode`]),[i,a,o,s]=[0,0,0,0];if(n===`viewport`)[o,s]=this.getSize();else if(n===`overall`){let e=this.getBounds(),t=cP(e);[i,a]=e.min,[o,s]=t}let c=ow(`<div id="virtual-image"></div>`),l=new mM({width:o,height:s,renderer:new GR,devicePixelRatio:t,container:c,background:this.extends.config.background});yield l.ready,l.appendChild(this.getLayer(`background`).getRoot().cloneNode(!0)),l.appendChild(this.getRoot().cloneNode(!0));let u=this.getLayer(`label`).getRoot().cloneNode(!0),d=l.viewport2Canvas({x:0,y:0}),f=this.getCanvasByViewport([0,0]);u.translate([f[0]-d.x,f[1]-d.y]),u.scale(1/this.getCamera().getZoom()),l.appendChild(u),l.appendChild(this.getLayer(`transient`).getRoot().cloneNode(!0));let p=this.getCamera(),m=l.getCamera();if(n===`viewport`)m.setZoom(p.getZoom()),m.setPosition(p.getPosition()),m.setFocalPoint(p.getFocalPoint());else if(n===`overall`){let[e,t,n]=m.getPosition(),[r,o,s]=m.getFocalPoint();m.setPosition([e+i,t+a,n]),m.setFocalPoint([r+i,o+a,s])}let h=l.getContextService();return new Promise(e=>{l.addEventListener(aM.RERENDER,()=>s9(this,void 0,void 0,function*(){yield new Promise(e=>setTimeout(e,300));let t=yield h.toDataURL(r);e(t)}))})})}destroy(){Object.values(this.getLayers()).forEach(e=>{e.getCamera().cancelLandmarkAnimation(),e.destroy()})}};function f9(e,t){return Object.fromEntries(t.map(t=>{let n=e?.(t)||new GR;return n instanceof GR&&n.setConfig({enableDirtyRectangleRendering:!1}),t===`main`?n.registerPlugin(new Ote({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):n.unregisterPlugin(n.getPlugin(`dom-interaction`)),[t,n]}))}function p9(e){Object.entries(e).forEach(([e,t])=>{let n=t.getContextService().getDomElement();n?.style&&(n.style.gridArea=`1 / 1 / 2 / 2`,n.style.outline=`none`,n.tabIndex=1,e!==`main`&&(n.style.pointerEvents=`none`)),n?.parentElement&&(n.parentElement.style.display=`grid`,n.parentElement.style.isolation=`isolate`)})}var m9=e=>e?parseInt(e):0;function Ate(e){let t=getComputedStyle(e),n=e.clientWidth||m9(t.width),r=e.clientHeight||m9(t.height),i=m9(t.paddingLeft)+m9(t.paddingRight),a=m9(t.paddingTop)+m9(t.paddingBottom);return[n-i,r-a]}function h9(e){if(!e)return[0,0];let t=640,n=480,[r,i]=Ate(e);return t=r||t,n=i||n,[Math.max(K(t)?t:1,1),Math.max(K(n)?n:1,1)]}var g9=class{constructor(e){this.type=e}},_9=class extends g9{constructor(e,t){super(e),this.data=t}},v9=class extends g9{constructor(e,t,n,r){super(e),this.animationType=t,this.animation=n,this.data=r}},y9=class extends g9{constructor(e,t,n){super(e),this.elementType=t,this.data=n}},b9=class extends g9{constructor(e,t){super(e),this.data=t}};function x9(e,t){e.emit(t.type,t)}function jte(e){if(!e)return null;if(e instanceof $j)return{type:`canvas`,element:e};let t=e;for(;t;){if(dB(t))return{type:`node`,element:t};if(fB(t))return{type:`edge`,element:t};if(pB(t))return{type:`combo`,element:t};t=t.parentElement}return null}function S9(e){return e?.style?.zIndex||0}var C9=`cachedStyle`,w9=e=>`__${e}__`;function Mte(e,t){let n=Array.isArray(t)?t:[t];oC(e,C9)||sC(e,C9,{}),n.forEach(t=>{sC(oC(e,C9),w9(t),e.attributes[t])})}function T9(e,t){return oC(e,[C9,w9(t)])}function Nte(e,t){return w9(t)in(oC(e,C9)||{})}var Pte=class{constructor(e){this.tasks=[],this.animations=new Set,this.context=e}getTasks(){let e=[...this.tasks];return this.tasks=[],e}add(e,t){this.tasks.push([e,t])}animate(e,t,n){var r,i,a;(r=t?.before)==null||r.call(t);let o=this.getTasks().map(([t,r])=>{var i,a,o;let{element:s,elementType:c,stage:l}=t,u=HN(this.context.options,c,l,e);(i=r?.before)==null||i.call(r);let d=u.length?GN(s,this.inferStyle(t,n),u):null;return d?((a=r?.beforeAnimate)==null||a.call(r,d),d.finished.then(()=>{var e,t;(e=r?.afterAnimate)==null||e.call(r,d),(t=r?.after)==null||t.call(r),this.animations.delete(d)})):(o=r?.after)==null||o.call(r),d}).filter(Boolean);o.forEach(e=>this.animations.add(e));let s=LN(o);return s?((i=t?.beforeAnimate)==null||i.call(t,s),s.finished.then(()=>{var e,n;(e=t?.afterAnimate)==null||e.call(t,s),(n=t?.after)==null||n.call(t),this.release()})):(a=t?.after)==null||a.call(t),s}inferStyle(e,t){let{element:n,elementType:r,stage:i,originalStyle:a,updatedStyle:o={}}=e;e.modifiedStyle||=Object.assign(Object.assign({},a),o);let{modifiedStyle:s}=e,c={},l={};if(i===`enter`)Object.assign(c,{opacity:0});else if(i===`exit`)Object.assign(l,{opacity:0});else if(i===`show`)Object.assign(c,{opacity:0}),Object.assign(l,{opacity:T9(n,`opacity`)??zN(`opacity`)});else if(i===`hide`)Object.assign(c,{opacity:T9(n,`opacity`)??zN(`opacity`)}),Object.assign(l,{opacity:0});else if(i===`collapse`){let{collapse:e}=t||{},{target:i,descendants:o,position:c}=e;if(r===`node`){if(o.includes(n.id)){let[e,t,n]=c;Object.assign(l,{x:e,y:t,z:n})}}else if(r===`combo`){if(n.id===i||o.includes(n.id)){let[e,t]=c;Object.assign(l,{x:e,y:t,childrenNode:a.childrenNode})}}else r===`edge`&&Object.assign(l,{sourceNode:s.sourceNode,targetNode:s.targetNode})}else if(i===`expand`){let{expand:e}=t||{},{target:i,descendants:a,position:o}=e;if(r===`node`){if(n.id===i||a.includes(n.id)){let[e,t,n]=o;Object.assign(c,{x:e,y:t,z:n})}}else if(r===`combo`){if(n.id===i||a.includes(n.id)){let[e,t,n]=o;Object.assign(c,{x:e,y:t,z:n,childrenNode:s.childrenNode})}}else r===`edge`&&Object.assign(c,{sourceNode:s.sourceNode,targetNode:s.targetNode})}return[Object.keys(c).length>0?Object.assign({},a,c):a,Object.keys(l).length>0?Object.assign({},s,l):s]}stop(){this.animations.forEach(e=>e.cancel())}clear(){this.tasks=[]}release(){let{canvas:e}=this.context,t=e.document?.timeline?.animationsWithPromises;t&&(e.document.timeline.animationsWithPromises=t.filter(e=>e.playState!==`finished`))}destroy(){this.stop(),this.animations.clear(),this.tasks=[]}},Fte=class{constructor(e){this.batchCount=0,this.context=e}emit(e){let{graph:t}=this.context;t.emit(e.type,e)}startBatch(e=!0){this.batchCount++,this.batchCount===1&&this.emit(new _9(Q.BATCH_START,{initiate:e}))}endBatch(){this.batchCount--,this.batchCount===0&&this.emit(new _9(Q.BATCH_END))}get isBatching(){return this.batchCount>0}destroy(){this.context=null}},Ite=class extends gF{constructor(e){super(e),this.currentTarget=null,this.currentTargetType=null,this.category=`behavior`,this.forwardCanvasEvents=e=>{let{target:t}=e,n=jte(t);if(!n)return;let{graph:r,canvas:i}=this.context,{type:a,element:o}=n;if(`destroyed`in o&&(RB(o)||o.destroyed))return;let{type:s,detail:c,button:l}=e,u=Object.assign(Object.assign({},e),{target:o,targetType:a,originalTarget:t});s===Z.POINTER_MOVE&&(this.currentTarget!==o&&(this.currentTarget&&r.emit(`${this.currentTargetType}:${Z.POINTER_LEAVE}`,Object.assign(Object.assign({},u),{type:Z.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),o&&(Object.assign(u,{type:Z.POINTER_ENTER}),r.emit(`${a}:${Z.POINTER_ENTER}`,u))),this.currentTarget=o,this.currentTargetType=a),s===Z.CLICK&&l===2||(r.emit(`${a}:${s}`,u),r.emit(s,u)),s===Z.CLICK&&c===2&&(Object.assign(u,{type:Z.DBLCLICK}),r.emit(`${a}:${Z.DBLCLICK}`,u),r.emit(Z.DBLCLICK,u)),s===Z.POINTER_DOWN&&l===2&&(Object.assign(u,{type:Z.CONTEXT_MENU,preventDefault:()=>{var e;(e=i.getContainer())==null||e.addEventListener(Z.CONTEXT_MENU,e=>e.preventDefault(),{once:!0})}}),r.emit(`${a}:${Z.CONTEXT_MENU}`,u),r.emit(Z.CONTEXT_MENU,u))},this.forwardContainerEvents=e=>{this.context.graph.emit(e.type,e)},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[])}setBehaviors(e){this.setExtensions(e)}forwardEvents(){let e=this.context.canvas.getContainer();e&&[wN.KEY_DOWN,wN.KEY_UP].forEach(t=>{e.addEventListener(t,this.forwardContainerEvents)});let t=this.context.canvas.document;t&&[Z.CLICK,Z.DBLCLICK,Z.POINTER_OVER,Z.POINTER_LEAVE,Z.POINTER_ENTER,Z.POINTER_MOVE,Z.POINTER_OUT,Z.POINTER_DOWN,Z.POINTER_UP,Z.CONTEXT_MENU,Z.DRAG_START,Z.DRAG,Z.DRAG_END,Z.DRAG_ENTER,Z.DRAG_OVER,Z.DRAG_LEAVE,Z.DROP,Z.WHEEL].forEach(e=>{t.addEventListener(e,this.forwardCanvasEvents)})}destroy(){let e=this.context.canvas.getContainer();e&&[wN.KEY_DOWN,wN.KEY_UP].forEach(t=>{e.removeEventListener(t,this.forwardContainerEvents)}),this.context.canvas.document.removeAllEventListeners(),super.destroy()}},E9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function D9(e,t){let{data:n,style:r}=e,i=E9(e,[`data`,`style`]),{data:a,style:o}=t,s=E9(t,[`data`,`style`]),c=Object.assign(Object.assign({},i),s);return(n||a)&&Object.assign(c,{data:Object.assign(Object.assign({},n),a)}),(r||o)&&Object.assign(c,{style:Object.assign(Object.assign({},r),o)}),c}function O9(e){let{data:t,style:n}=e,r=E9(e,[`data`,`style`]);return t&&(r.data=Object.assign({},t)),n&&(r.style=Object.assign({},n)),r}function k9(e={},t={}){let{states:n=[],data:r={},style:i={},children:a=[]}=e,o=E9(e,[`states`,`data`,`style`,`children`]),{states:s=[],data:c={},style:l={},children:u=[]}=t,d=E9(t,[`states`,`data`,`style`,`children`]),f=(e,t)=>e.length===t.length?e.every((e,n)=>e===t[n]):!1,p=(e,t)=>{let n=Object.keys(e),r=Object.keys(t);return n.length===r.length?n.every(n=>e[n]===t[n]):!1};return!(!p(o,d)||!f(a,u)||!f(n,s)||!p(r,c)||!p(i,l))}var Lte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function A9(e){let{id:t=$(e),style:n,data:r}=e,i=Lte(e,[`id`,`style`,`data`]),a=Object.assign(Object.assign({},e),{style:Object.assign({},n),data:Object.assign({},r)});return eP(e)?Object.assign({id:t,data:a},i):{id:t,data:a}}function j9(e){return e.data}function Rte(e){if(e.hasTreeStructure(`tree`))return;e.attachTreeStructure(kN);let t=e.getAllEdges();for(let n of t){let{source:t,target:r}=n;e.setParent(r,t,kN)}}var zte=class{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new tV}pushChange(e){if(this.isTraceless)return;let{type:t}=e;if(t===bN.NodeUpdated||t===bN.EdgeUpdated||t===bN.ComboUpdated){let{value:n,original:r}=e;this.changes.push({value:O9(n),original:O9(r),type:t})}else this.changes.push({value:O9(e.value),type:t})}getChanges(){return this.changes}clearChanges(){this.changes=[]}batch(e){this.batchCount++,this.model.batch(e),this.batchCount--}isBatching(){return this.batchCount>0}silence(e){this.isTraceless=!0,e(),this.isTraceless=!1}isCombo(e){return this.comboIds.has(e)||this.latestRemovedComboIds.has(e)}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}getNodeData(e){return this.model.getAllNodes().reduce((t,n)=>{let r=j9(n);return this.isCombo($(r))||(e===void 0||e.includes($(r)))&&t.push(r),t},[])}getEdgeDatum(e){return j9(this.model.getEdge(e))}getEdgeData(e){return this.model.getAllEdges().reduce((t,n)=>{let r=j9(n);return(e===void 0||e.includes($(r)))&&t.push(r),t},[])}getComboData(e){return this.model.getAllNodes().reduce((t,n)=>{let r=j9(n);return this.isCombo($(r))&&(e===void 0||e.includes($(r)))&&t.push(r),t},[])}getRootsData(e=kN){return this.model.getRoots(e).map(j9)}getAncestorsData(e,t){let{model:n}=this;return!n.hasNode(e)||!n.hasTreeStructure(t)?[]:n.getAncestors(e,t).map(j9)}getDescendantsData(e){let t=this.getElementDataById(e),n=[];return _I(t,e=>{e!==t&&n.push(e)},e=>this.getChildrenData($(e)),`TB`),n}getParentData(e,t){let{model:n}=this;if(!t){FN.warn(`The hierarchy structure key is not specified`);return}if(!n.hasNode(e)||!n.hasTreeStructure(t))return;let r=n.getParent(e,t);return r?j9(r):void 0}getChildrenData(e){let t=this.getElementType(e)===`node`?kN:ON,{model:n}=this;return!n.hasNode(e)||!n.hasTreeStructure(t)?[]:n.getChildren(e,t).map(j9)}getElementsDataByType(e){return e===`node`?this.getNodeData():e===`edge`?this.getEdgeData():e===`combo`?this.getComboData():[]}getElementDataById(e){return this.getElementType(e)===`edge`?this.getEdgeDatum(e):this.getNodeLikeDatum(e)}getNodeLikeDatum(e){let t=this.model.getNode(e);return j9(t)}getNodeLikeData(e){return this.model.getAllNodes().reduce((t,n)=>{let r=j9(n);return e?e.includes($(r))&&t.push(r):t.push(r),t},[])}getElementDataByState(e,t){return this.getElementsDataByType(e).filter(e=>e.states?.includes(t))}getElementState(e){return this.getElementDataById(e)?.states||[]}hasNode(e){return this.model.hasNode(e)&&!this.isCombo(e)}hasEdge(e){return this.model.hasEdge(e)}hasCombo(e){return this.model.hasNode(e)&&this.isCombo(e)}getRelatedEdgesData(e,t=`both`){return this.model.getRelatedEdges(e,t).map(j9)}getNeighborNodesData(e){return this.model.getNeighbors(e).map(j9)}setData(e){let{nodes:t=[],edges:n=[],combos:r=[]}=e,{nodes:i,edges:a,combos:o}=this.getData(),s=pF(i,t,e=>$(e),k9),c=pF(a,n,e=>$(e),k9),l=pF(o,r,e=>$(e),k9);this.batch(()=>{let e={nodes:s.enter,edges:c.enter,combos:l.enter};this.addData(e),this.computeZIndex(e,`add`,!0);let t={nodes:s.update,edges:c.update,combos:l.update};this.updateData(t),this.computeZIndex(t,`update`,!0);let n={nodes:s.exit.map($),edges:c.exit.map($),combos:l.exit.map($)};this.removeData(n)})}addData(e){let{nodes:t,edges:n,combos:r}=e;this.batch(()=>{this.addComboData(r),this.addNodeData(t),this.addEdgeData(n)}),this.computeZIndex(e,`add`)}addNodeData(e=[]){e.length&&(this.model.addNodes(e.map(e=>(this.pushChange({value:e,type:bN.NodeAdded}),A9(e)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({nodes:e},`add`))}addEdgeData(e=[]){e.length&&(this.model.addEdges(e.map(e=>(this.pushChange({value:e,type:bN.EdgeAdded}),A9(e)))),this.computeZIndex({edges:e},`add`))}addComboData(e=[]){if(!e.length)return;let{model:t}=this;t.hasTreeStructure(`combo`)||t.attachTreeStructure(ON),t.addNodes(e.map(e=>(this.comboIds.add($(e)),this.pushChange({value:e,type:bN.ComboAdded}),A9(e)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({combos:e},`add`)}addChildrenData(e,t){let n=this.getNodeLikeDatum(e),r=t.map($);this.addNodeData(t),this.updateNodeData([{id:e,children:[...n.children||[],...r]}]),this.addEdgeData(r.map(t=>({source:e,target:t})))}computeZIndex(e,t,n=!1){!n&&this.isBatching()||this.batch(()=>{let{nodes:n=[],edges:r=[],combos:i=[]}=e;i.forEach(e=>{let n=$(e);if(t===`add`&&K(e.style?.zIndex)||t===`update`&&!(`combo`in e))return;let r=this.getParentData(n,ON),i=r?(r.style?.zIndex??0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:n,style:{zIndex:i}}])})}),n.forEach(e=>{let n=$(e);if(t===`add`&&K(e.style?.zIndex)||t===`update`&&!(`combo`in e)&&!(`children`in e))return;let r=0,i=this.getParentData(n,ON);if(i)r=(i.style?.zIndex||0)+1;else{let e=this.getParentData(n,kN);e&&(r=e?.style?.zIndex||0)}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:n,style:{zIndex:r}}])})}),r.forEach(e=>{if(K(e.style?.zIndex))return;let{id:t,source:n,target:r}=e;if(!t)t=$(e);else{let e=this.getEdgeDatum(t);n=e.source,r=e.target}if(!n||!r)return;let i=this.getNodeLikeDatum(n)?.style?.zIndex||0,a=this.getNodeLikeDatum(r)?.style?.zIndex||0;this.updateEdgeData([{id:$(e),style:{zIndex:Math.max(i,a)-1}}])})})}getFrontZIndex(e){let t=this.getElementType(e),n=this.getElementDataById(e),r=this.getData();if(Object.assign(r,{[`${t}s`]:r[`${t}s`].filter(t=>$(t)!==e)}),t===`combo`&&!wI(n)){let t=new Set(this.getAncestorsData(e,ON).map($));r.nodes=r.nodes.filter(e=>!t.has($(e))),r.combos=r.combos.filter(e=>!t.has($(e))),r.edges=r.edges.filter(({source:e,target:n})=>!t.has(e)&&!t.has(n))}return Math.max(n.style?.zIndex||0,0,...Object.values(r).flat().map(e=>(e?.style?.zIndex||0)+1))}updateNodeLikeHierarchy(e){if(!this.enableUpdateNodeLikeHierarchy)return;let{model:t}=this;e.forEach(e=>{let n=$(e),r=rF(e);r!==void 0&&(t.hasTreeStructure(`combo`)||t.attachTreeStructure(ON),r===null&&this.refreshComboData(n),this.setParent(n,rF(e),ON));let i=e.children||[];if(i.length){t.hasTreeStructure(`tree`)||t.attachTreeStructure(kN);let e=i.filter(e=>t.hasNode(e));e.forEach(e=>this.setParent(e,n,kN)),e.length!==i.length&&this.updateNodeData([{id:n,children:e}])}})}preventUpdateNodeLikeHierarchy(e){this.enableUpdateNodeLikeHierarchy=!1,e(),this.enableUpdateNodeLikeHierarchy=!0}updateData(e){let{nodes:t,edges:n,combos:r}=e;this.batch(()=>{this.updateNodeData(t),this.updateComboData(r),this.updateEdgeData(n)}),this.computeZIndex(e,`update`)}updateNodeData(e=[]){if(!e.length)return;let{model:t}=this;this.batch(()=>{let n=[];e.forEach(e=>{let r=$(e),i=j9(t.getNode(r));if(k9(i,e))return;let a=D9(i,e);this.pushChange({value:a,original:i,type:bN.NodeUpdated}),t.mergeNodeData(r,a),n.push(a)}),this.updateNodeLikeHierarchy(n)}),this.computeZIndex({nodes:e},`update`)}refreshData(){let{nodes:e,edges:t,combos:n}=this.getData();e.forEach(e=>{this.pushChange({value:e,original:e,type:bN.NodeUpdated})}),t.forEach(e=>{this.pushChange({value:e,original:e,type:bN.EdgeUpdated})}),n.forEach(e=>{this.pushChange({value:e,original:e,type:bN.ComboUpdated})})}syncNodeLikeDatum(e){let{model:t}=this,n=$(e);if(!t.hasNode(n))return;let r=j9(t.getNode(n)),i=D9(r,e);t.mergeNodeData(n,i)}syncEdgeDatum(e){let{model:t}=this,n=$(e);if(!t.hasEdge(n))return;let r=j9(t.getEdge(n)),i=D9(r,e);t.mergeEdgeData(n,i)}updateEdgeData(e=[]){if(!e.length)return;let{model:t}=this;this.batch(()=>{e.forEach(e=>{let n=$(e),r=j9(t.getEdge(n));if(k9(r,e))return;e.source&&r.source!==e.source&&t.updateEdgeSource(n,e.source),e.target&&r.target!==e.target&&t.updateEdgeTarget(n,e.target);let i=D9(r,e);this.pushChange({value:i,original:r,type:bN.EdgeUpdated}),t.mergeEdgeData(n,i)})}),this.computeZIndex({edges:e},`update`)}updateComboData(e=[]){if(!e.length)return;let{model:t}=this;t.batch(()=>{let n=[];e.forEach(e=>{let r=$(e),i=j9(t.getNode(r));if(k9(i,e))return;let a=D9(i,e);this.pushChange({value:a,original:i,type:bN.ComboUpdated}),t.mergeNodeData(r,a),n.push(a)}),this.updateNodeLikeHierarchy(n)}),this.computeZIndex({combos:e},`update`)}setParent(e,t,n,r=!0){if(e===t)return;let i=this.getNodeLikeDatum(e),a=rF(i);if(a!==t&&n===`combo`){let n={id:e,combo:t};this.isCombo(e),this.syncNodeLikeDatum(n)}this.model.setParent(e,t,n),r&&n===`combo`&&vS([a,t]).forEach(e=>{e!==void 0&&this.refreshComboData(e)})}refreshComboData(e){let t=this.getComboData([e])[0],n=this.getAncestorsData(e,ON);t&&this.pushChange({value:t,original:t,type:bN.ComboUpdated}),n.forEach(e=>{this.pushChange({value:e,original:e,type:bN.ComboUpdated})})}getElementPosition(e){let t=this.getElementDataById(e);return BF(t)}translateNodeLikeBy(e,t){this.isCombo(e)?this.translateComboBy(e,t):this.translateNodeBy(e,t)}translateNodeLikeTo(e,t){this.isCombo(e)?this.translateComboTo(e,t):this.translateNodeTo(e,t)}translateNodeBy(e,t){let n=this.getElementPosition(e),r=xF(n,[...t,0].slice(0,3));this.translateNodeTo(e,r)}translateNodeTo(e,t){let[n=0,r=0,i=0]=t;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:e,style:{x:n,y:r,z:i}}])})}translateComboBy(e,t){let[n=0,r=0,i=0]=t;if([n,r,i].some(isNaN)||[n,r,i].every(e=>e===0))return;let a=this.getComboData([e])[0];if(!a)return;let o=new Set;_I(a,e=>{let t=$(e);if(o.has(t))return;o.add(t);let[a,s,c]=BF(e),l=D9(e,{style:{x:a+n,y:s+r,z:c+i}});this.pushChange({value:l,original:e,type:this.isCombo(t)?bN.ComboUpdated:bN.NodeUpdated}),this.model.mergeNodeData(t,l)},e=>this.getChildrenData($(e)),`BT`)}translateComboTo(e,t){if(t.some(isNaN))return;let[n=0,r=0,i=0]=t,a=this.getComboData([e])?.[0];if(!a)return;let[o,s,c]=BF(a),l=n-o,u=r-s,d=i-c;_I(a,e=>{let t=$(e),[n,r,i]=BF(e),a=D9(e,{style:{x:n+l,y:r+u,z:i+d}});this.pushChange({value:a,original:e,type:this.isCombo(t)?bN.ComboUpdated:bN.NodeUpdated}),this.model.mergeNodeData(t,a)},e=>this.getChildrenData($(e)),`BT`)}removeData(e){let{nodes:t,edges:n,combos:r}=e;this.batch(()=>{this.removeEdgeData(n),this.removeNodeData(t),this.removeComboData(r),this.latestRemovedComboIds=new Set(r)})}removeNodeData(e=[]){e.length&&this.batch(()=>{e.forEach(e=>{this.removeEdgeData(this.getRelatedEdgesData(e).map($)),this.pushChange({value:this.getNodeData([e])[0],type:bN.NodeRemoved}),this.removeNodeLikeHierarchy(e)}),this.model.removeNodes(e)})}removeEdgeData(e=[]){e.length&&(e.forEach(e=>this.pushChange({value:this.getEdgeData([e])[0],type:bN.EdgeRemoved})),this.model.removeEdges(e))}removeComboData(e=[]){e.length&&this.batch(()=>{e.forEach(e=>{this.pushChange({value:this.getComboData([e])[0],type:bN.ComboRemoved}),this.removeNodeLikeHierarchy(e),this.comboIds.delete(e)}),this.model.removeNodes(e)})}removeNodeLikeHierarchy(e){if(this.model.hasTreeStructure(`combo`)){let t=rF(this.getNodeLikeDatum(e));this.setParent(e,void 0,ON,!1),this.model.getChildren(e,ON).forEach(e=>{let n=j9(e),r=$(n);this.setParent($(n),t,ON,!1);let i=D9(n,{id:$(n),combo:t});this.pushChange({value:i,original:n,type:this.isCombo(r)?bN.ComboUpdated:bN.NodeUpdated}),this.model.mergeNodeData($(n),i)}),iS(t)||this.refreshComboData(t)}}getElementType(e){if(this.model.hasNode(e))return this.isCombo(e)?`combo`:`node`;if(this.model.hasEdge(e))return`edge`;throw Error(PN(`Unknown element type of id: ${e}`))}destroy(){let{model:e}=this,t=e.getAllNodes(),n=e.getAllEdges();e.removeEdges(n.map(e=>e.id)),e.removeNodes(t.map(e=>e.id)),this.context={}}},M9=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},Bte=class{constructor(e){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=e}init(){this.initContainer()}initContainer(){if(!this.container||this.container.destroyed){let{canvas:e}=this.context;this.container=e.appendChild(new Lj({className:`elements`}))}}emit(e,t){t.silence||x9(this.context.graph,e)}forEachElementData(e){gI.forEach(t=>{let n=this.context.model.getElementsDataByType(t);e(t,n)})}getElementType(e,t){let{options:n,graph:r}=this.context,i=n[e]?.type||t.type;return i?typeof i==`string`?i:i.call(r,t):e===`edge`?`line`:`circle`}getTheme(e){return IN(this.context.options)[e]||{}}getThemeStyle(e){return this.getTheme(e).style||{}}getThemeStateStyle(e,t){let{state:n={}}=this.getTheme(e);return Object.assign({},...t.map(e=>n[e]||{}))}computePaletteStyle(){let{options:e}=this.context;this.paletteStyle={},this.forEachElementData((t,n)=>{let r=Object.assign({},LI(this.getTheme(t)?.palette),LI(e[t]?.palette));r?.field&&Object.assign(this.paletteStyle,RI(n,r))})}getPaletteStyle(e,t){let n=this.paletteStyle[t];return n?e===`edge`?{stroke:n}:{fill:n}:{}}computeElementDefaultStyle(e,t){let{options:n}=this.context,r=n[e]?.style||{};`transform`in r&&Array.isArray(r.transform)&&(r.transform=[...r.transform]),this.defaultStyle[$(t.datum)]=NI(r,t)}computeElementsDefaultStyle(e){let{graph:t}=this.context;this.forEachElementData((n,r)=>{let i=r.length;for(let a=0;a<i;a++){let i=r[a];(e===void 0||e.includes($(i)))&&this.computeElementDefaultStyle(n,{datum:i,graph:t})}})}getDefaultStyle(e){return this.defaultStyle[e]||{}}getElementState(e){try{let{model:t}=this.context;return t.getElementState(e)}catch{return[]}}getElementStateStyle(e,t,n){let{options:r}=this.context,i=r[e]?.state?.[t]||{};return NI(i,n)}computeElementStatesStyle(e,t,n){this.stateStyle[$(n.datum)]=Object.assign({},...t.map(t=>this.getElementStateStyle(e,t,n)))}computeElementsStatesStyle(e){let{graph:t}=this.context;this.forEachElementData((n,r)=>{let i=r.length;for(let a=0;a<i;a++){let i=r[a];if(e===void 0||e.includes($(i))){let e=this.getElementState($(i));this.computeElementStatesStyle(n,e,{datum:i,graph:t})}}})}getStateStyle(e){return this.stateStyle[e]||{}}computeStyle(e,t){e&&[`translate`,`zIndex`].includes(e)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(t),this.computeElementsStatesStyle(t))}getElement(e){return this.elementMap[e]}getNodes(){return this.context.model.getNodeData().map(({id:e})=>this.elementMap[e])}getEdges(){return this.context.model.getEdgeData().map(e=>this.elementMap[$(e)])}getCombos(){return this.context.model.getComboData().map(({id:e})=>this.elementMap[e])}getElementComputedStyle(e,t){let n=$(t),r=this.getThemeStyle(e),i=this.getPaletteStyle(e,n),a=t.style||{},o=this.getDefaultStyle(n),s=this.getThemeStateStyle(e,this.getElementState(n)),c=this.getStateStyle(n),l=Object.assign({},r,i,a,o,s,c);if(e===`combo`){let e=this.context.model.getChildrenData(n),t=l.collapsed?[]:e.map($).filter(e=>this.getElement(e));Object.assign(l,{childrenNode:t,childrenData:e})}return l}getDrawData(e){this.init();let t=this.computeChangesAndDrawData(e);if(!t)return null;let{type:n=`draw`,stage:r=n}=e;return this.markDestroyElement(t.drawData),this.computeStyle(r),{type:n,stage:r,data:t}}draw(e={animation:!0}){let t=this.getDrawData(e);if(!t)return;let{data:{drawData:{add:n,update:r,remove:i}}}=t;return this.destroyElements(i,e),this.createElements(n,e),this.updateElements(r,e),this.setAnimationTask(e,t)}preLayoutDraw(){return M9(this,arguments,void 0,function*(e={animation:!0}){var t;let n=this.getDrawData(e);if(!n)return;let{data:{drawData:r}}=n;yield((t=this.context.layout)?.preLayout)?.call(t,r);let{add:i,update:a,remove:o}=r;return this.destroyElements(o,e),this.createElements(i,e),this.updateElements(a,e),this.setAnimationTask(e,n)})}setAnimationTask(e,t){let{animation:n,silence:r}=e,{data:{dataChanges:i,drawData:a},stage:o,type:s}=t;return this.context.animation.animate(n,r?{}:{before:()=>this.emit(new _9(Q.BEFORE_DRAW,{dataChanges:i,animation:n,stage:o,render:s===`render`}),e),beforeAnimate:t=>this.emit(new v9(Q.BEFORE_ANIMATE,xN.DRAW,t,a),e),afterAnimate:t=>this.emit(new v9(Q.AFTER_ANIMATE,xN.DRAW,t,a),e),after:()=>this.emit(new _9(Q.AFTER_DRAW,{dataChanges:i,animation:n,stage:o,render:s===`render`,firstRender:this.context.graph.rendered===!1}),e)})}computeChangesAndDrawData(e){let{model:t}=this.context,n=t.getChanges(),r=g0(n);if(r.length===0)return null;let{NodeAdded:i=[],NodeUpdated:a=[],NodeRemoved:o=[],EdgeAdded:s=[],EdgeUpdated:c=[],EdgeRemoved:l=[],ComboAdded:u=[],ComboUpdated:d=[],ComboRemoved:f=[]}=xS(r,e=>e.type),p=e=>new Map(e.map(e=>{let t=e.value;return[$(t),t]})),m={add:{nodes:p(i),edges:p(s),combos:p(u)},update:{nodes:p(a),edges:p(c),combos:p(d)},remove:{nodes:p(o),edges:p(l),combos:p(f)}},h=this.transformData(m,e);return t.clearChanges(),{dataChanges:n,drawData:h}}transformData(e,t){let n=this.context.transform.getTransformInstance();return Object.values(n).reduce((e,n)=>n.beforeDraw(e,t),e)}createElement(e,t,n){var r;let i=$(t);if(this.getElement(i))return;let a=this.getElementType(e,t),o=this.getElementComputedStyle(e,t),s=MN(e,a);if(!s)return FN.warn(`The element ${a} of ${e} is not registered.`);this.emit(new y9(Q.BEFORE_ELEMENT_CREATE,e,t),n);let c=this.container.appendChild(new s({id:i,context:this.context,style:o}));this.shapeTypeMap[i]=a,this.elementMap[i]=c;let{stage:l=`enter`}=n;(r=this.context.animation)==null||r.add({element:c,elementType:e,stage:l,originalStyle:Object.assign({},c.attributes),updatedStyle:o},{after:()=>{var r;this.emit(new y9(Q.AFTER_ELEMENT_CREATE,e,t),n),(r=c.onCreate)==null||r.call(c)}})}createElements(e,t){let{nodes:n,edges:r,combos:i}=e;[[`node`,n],[`combo`,i],[`edge`,r]].forEach(([e,n])=>{n.forEach(n=>this.createElement(e,n,t))})}getUpdateStageStyle(e,t,n){let{stage:r=`update`}=n;if(r===`translate`)if(e===`node`||e===`combo`){let{style:{x:e=0,y:n=0,z:r=0}={}}=t;return{x:e,y:n,z:r}}else return{};return this.getElementComputedStyle(e,t)}updateElement(e,t,n){var r;let i=$(t),{stage:a=`update`}=n,o=this.getElement(i);if(!o)return()=>null;this.emit(new y9(Q.BEFORE_ELEMENT_UPDATE,e,t),n);let s=this.getElementType(e,t),c=this.getUpdateStageStyle(e,t,n);this.shapeTypeMap[i]!==s&&(o.destroy(),delete this.shapeTypeMap[i],delete this.elementMap[i],this.createElement(e,t,{animation:!1,silence:!0}));let l=a===`visibility`?c.visibility===`hidden`?`hide`:`show`:a;l===`hide`&&delete c.visibility,(r=this.context.animation)==null||r.add({element:o,elementType:e,stage:l,originalStyle:Object.assign({},o.attributes),updatedStyle:c},{before:()=>{let e=this.elementMap[i];a!==`collapse`&&FB(e,c),a===`visibility`&&(Nte(e,`opacity`)||Mte(e,`opacity`),this.visibilityCache.set(e,l===`show`?`visible`:`hidden`),l===`show`&&mF(e,`visible`))},after:()=>{var r;let o=this.elementMap[i];a===`collapse`&&FB(o,c),l===`hide`&&mF(o,this.visibilityCache.get(o)),this.emit(new y9(Q.AFTER_ELEMENT_UPDATE,e,t),n),(r=o.onUpdate)==null||r.call(o)}})}updateElements(e,t){let{nodes:n,edges:r,combos:i}=e;[[`node`,n],[`combo`,i],[`edge`,r]].forEach(([e,n])=>{n.forEach(n=>this.updateElement(e,n,t))})}markDestroyElement(e){Object.values(e.remove).forEach(e=>{e.forEach(e=>{let t=$(e),n=this.getElement(t);n&&LB(n)})})}destroyElement(e,t,n){var r;let{stage:i=`exit`}=n,a=$(t),o=this.elementMap[a];if(!o)return()=>null;this.emit(new y9(Q.BEFORE_ELEMENT_DESTROY,e,t),n),(r=this.context.animation)==null||r.add({element:o,elementType:e,stage:i,originalStyle:Object.assign({},o.attributes),updatedStyle:{}},{after:()=>{var r;this.clearElement(a),o.destroy(),(r=o.onDestroy)==null||r.call(o),this.emit(new y9(Q.AFTER_ELEMENT_DESTROY,e,t),n)}})}destroyElements(e,t){let{nodes:n,edges:r,combos:i}=e;[[`combo`,i],[`edge`,r],[`node`,n]].forEach(([e,n])=>{n.forEach(n=>this.destroyElement(e,n,t))})}clearElement(e){delete this.paletteStyle[e],delete this.defaultStyle[e],delete this.stateStyle[e],delete this.elementMap[e],delete this.shapeTypeMap[e]}alignLayoutResultToElement(e,t){var n;let r=e.nodes?.find(e=>$(e)===t);if(r){let i=BF(this.context.model.getNodeLikeDatum(t)),a=BF(r),o=SF(i,a);(n=e.nodes)==null||n.forEach(e=>{e.style?.x&&(e.style.x+=o[0]),e.style?.y&&(e.style.y+=o[1]),e.style?.z&&(e.style.z+=o[2]||0)})}}collapseNode(e,t){return M9(this,void 0,void 0,function*(){let{animation:n}=t,{model:r}=this.context,i=this.computeChangesAndDrawData({stage:`collapse`,animation:n});if(!i)return;let{drawData:a}=i,{add:o,remove:s,update:c}=a;this.markDestroyElement(a);let l={animation:n,stage:`collapse`,data:a};this.destroyElements(s,l),this.createElements(o,l),this.updateElements(c,l),yield this.context.animation.animate(n,{beforeAnimate:e=>this.emit(new v9(Q.BEFORE_ANIMATE,xN.COLLAPSE,e,a),l),afterAnimate:e=>this.emit(new v9(Q.AFTER_ANIMATE,xN.COLLAPSE,e,a),l)},{collapse:{target:e,descendants:Array.from(s.nodes).map(([,e])=>$(e)),position:BF(c.nodes.get(e))}})?.finished})}expandNode(e,t){return M9(this,void 0,void 0,function*(){let{model:n,layout:r}=this.context,{animation:i,align:a}=t,o=BF(n.getNodeData([e])[0]),s=this.computeChangesAndDrawData({stage:`expand`,animation:i});if(this.createElements(s.drawData.add,{animation:!1,stage:`expand`,target:e}),this.context.animation.clear(),this.computeStyle(`expand`),!s)return;let{drawData:c}=s,{update:l,add:u}=c,d={animation:i,stage:`expand`,data:c};u.edges.forEach(e=>l.edges.set($(e),e)),u.nodes.forEach(e=>l.nodes.set($(e),e)),this.updateElements(l,d),yield this.context.animation.animate(i,{beforeAnimate:e=>this.emit(new v9(Q.BEFORE_ANIMATE,xN.EXPAND,e,c),d),afterAnimate:e=>this.emit(new v9(Q.AFTER_ANIMATE,xN.EXPAND,e,c),d)},{expand:{target:e,descendants:Array.from(u.nodes).map(([,e])=>$(e)),position:o}})?.finished})}collapseCombo(e,t){return M9(this,void 0,void 0,function*(){let{model:n,element:r}=this.context;if(n.getAncestorsData(e,`combo`).some(e=>wI(e)))return;let i=r.getElement(e),a=i.getComboPosition(Object.assign(Object.assign({},i.attributes),{collapsed:!0})),o=this.computeChangesAndDrawData({stage:`collapse`,animation:t});if(!o)return;let{dataChanges:s,drawData:c}=o;this.markDestroyElement(c);let{update:l,remove:u}=c,d={animation:t,stage:`collapse`,data:c};this.destroyElements(u,d),this.updateElements(l,d);let f=e=>Array.from(e).map(([,e])=>$(e));yield this.context.animation.animate(t,{before:()=>this.emit(new _9(Q.BEFORE_DRAW,{dataChanges:s,animation:t}),d),beforeAnimate:e=>this.emit(new v9(Q.BEFORE_ANIMATE,xN.COLLAPSE,e,c),d),afterAnimate:e=>this.emit(new v9(Q.AFTER_ANIMATE,xN.COLLAPSE,e,c),d),after:()=>this.emit(new _9(Q.AFTER_DRAW,{dataChanges:s,animation:t}),d)},{collapse:{target:e,descendants:[...f(u.nodes),...f(u.combos)],position:a}})?.finished})}expandCombo(e,t){return M9(this,void 0,void 0,function*(){let{model:n}=this.context,r=BF(n.getComboData([e])[0]);this.computeStyle(`expand`);let i=this.computeChangesAndDrawData({stage:`expand`,animation:t});if(!i)return;let{dataChanges:a,drawData:o}=i,{add:s,update:c}=o,l={animation:t,stage:`expand`,data:o,target:e};this.createElements(s,l),this.updateElements(c,l);let u=e=>Array.from(e).map(([,e])=>$(e));yield this.context.animation.animate(t,{before:()=>this.emit(new _9(Q.BEFORE_DRAW,{dataChanges:a,animation:t}),l),beforeAnimate:e=>this.emit(new v9(Q.BEFORE_ANIMATE,xN.EXPAND,e,o),l),afterAnimate:e=>this.emit(new v9(Q.AFTER_ANIMATE,xN.EXPAND,e,o),l),after:()=>this.emit(new _9(Q.AFTER_DRAW,{dataChanges:a,animation:t}),l)},{expand:{target:e,descendants:[...u(s.nodes),...u(s.combos)],position:r}})?.finished})}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}destroy(){this.clear(),this.container.destroy(),this.context={}}},N9=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},Vte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Hte=class{get presetOptions(){return{animation:!!BN(this.context.options,!0)}}get options(){let{options:e}=this.context;return e.layout}constructor(e){this.instances=[],this.context=e}getLayoutInstance(){return this.instances}preLayout(e){return N9(this,void 0,void 0,function*(){var t,n,r;let{graph:i,model:a}=this.context,{add:o}=e;x9(i,new _9(Q.BEFORE_LAYOUT,{type:`pre`}));let s=yield this.context.layout?.simulate();(t=s?.nodes)==null||t.forEach(e=>{let t=$(e),n=o.nodes.get(t);a.syncNodeLikeDatum(e),n&&Object.assign(n.style,e.style)}),(n=s?.edges)==null||n.forEach(e=>{let t=$(e),n=o.edges.get(t);a.syncEdgeDatum(e),n&&Object.assign(n.style,e.style)}),(r=s?.combos)==null||r.forEach(e=>{let t=$(e),n=o.combos.get(t);a.syncNodeLikeDatum(e),n&&Object.assign(n.style,e.style)}),x9(i,new _9(Q.AFTER_LAYOUT,{type:`pre`})),this.transformDataAfterLayout(`pre`,e)})}postLayout(){return N9(this,arguments,void 0,function*(e=this.options){if(!e)return;let t=Array.isArray(e)?e:[e],{graph:n}=this.context;x9(n,new _9(Q.BEFORE_LAYOUT,{type:`post`}));for(let e=0;e<t.length;e++){let r=t[e],i=this.getLayoutData(r),a=Object.assign(Object.assign({},this.presetOptions),r);x9(n,new _9(Q.BEFORE_STAGE_LAYOUT,{options:a,index:e}));let o=yield this.stepLayout(i,a,e);x9(n,new _9(Q.AFTER_STAGE_LAYOUT,{options:a,index:e})),r.animation||this.updateElementPosition(o,!1)}x9(n,new _9(Q.AFTER_LAYOUT,{type:`post`})),this.transformDataAfterLayout(`post`)})}transformDataAfterLayout(e,t){let n=this.context.transform.getTransformInstance();Object.values(n).forEach(n=>n.afterLayout(e,t))}simulate(){return N9(this,void 0,void 0,function*(){if(!this.options)return{};let e=Array.isArray(this.options)?this.options:[this.options],t={};for(let n=0;n<e.length;n++){let r=e[n],i=this.getLayoutData(r);t=yield this.stepLayout(i,Object.assign(Object.assign(Object.assign({},this.presetOptions),r),{animation:!1}),n)}return t})}stepLayout(e,t,n){return N9(this,void 0,void 0,function*(){return aV(t)?yield this.treeLayout(e,t,n):yield this.graphLayout(e,t,n)})}graphLayout(e,t,n){return N9(this,void 0,void 0,function*(){let{animation:r,enableWorker:i,iterations:a=300}=t,o=this.initGraphLayout(t);if(!o)return{};if(this.instances[n]=o,this.instance=o,i){let t=o;return this.supervisor=new C$(t.graphData2LayoutModel(e),t.instance,{iterations:a}),sV(yield this.supervisor.execute())}if(XG(o))return r?yield o.execute(e,{onTick:e=>{this.updateElementPosition(e,!1)}}):(o.execute(e),o.stop(),o.tick(a));let s=yield o.execute(e);return r&&(yield this.updateElementPosition(s,r)?.finished),s})}treeLayout(e,t,n){return N9(this,void 0,void 0,function*(){let{type:n,animation:r}=t,i=MN(`layout`,n);if(!i)return{};let{nodes:a=[],edges:o=[]}=e,s=new tV({nodes:a.map(e=>({id:$(e),data:e.data||{}})),edges:o.map(e=>({id:$(e),source:e.source,target:e.target,data:e.data||{}}))});Rte(s);let c={nodes:[],edges:[]},l={nodes:[],edges:[]};s.getRoots(kN).forEach(e=>{_I(e,e=>{e.children=s.getSuccessors(e.id)},e=>s.getSuccessors(e.id),`TB`);let n=i(e,t),{x:r,y:a,z:o=0}=n;_I(n,e=>{let{id:t,x:n,y:i,z:s=0}=e;c.nodes.push({id:t,style:{x:r,y:a,z:o}}),l.nodes.push({id:t,style:{x:n,y:i,z:s}})},e=>e.children,`TB`)});let u=this.inferTreeLayoutOffset(l);return P9(l,u),r&&(P9(c,u),this.updateElementPosition(c,!1),yield this.updateElementPosition(l,r)?.finished),l})}inferTreeLayoutOffset(e){var t;let[n,r]=[1/0,-1/0],[i,a]=[1/0,-1/0];(t=e.nodes)==null||t.forEach(e=>{let{x:t=0,y:o=0}=e.style||{};n=Math.min(n,t),r=Math.max(r,t),i=Math.min(i,o),a=Math.max(a,o)});let{canvas:o}=this.context,s=o.getSize(),[c,l]=o.getCanvasByViewport([0,0]),[u,d]=o.getCanvasByViewport(s);if(n>=c&&r<=u&&i>=l&&a<=d)return[0,0];let f=(c+u)/2,p=(l+d)/2;return[f-(n+r)/2,p-(i+a)/2]}stopLayout(){this.instance&&XG(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&=(this.supervisor.stop(),void 0),this.animationResult&&=(this.animationResult.finish(),void 0)}getLayoutData(e){let{nodeFilter:t=()=>!0,preLayout:n=!1,isLayoutInvisibleNodes:r=!1}=e,{nodes:i,edges:a,combos:o}=this.context.model.getData(),{element:s,model:c}=this.context,l=e=>s.getElement(e),u=n?e=>!r&&(e.style?.visibility===`hidden`||c.getAncestorsData(e.id,`tree`).some(wI)||c.getAncestorsData(e.id,`combo`).some(wI))?!1:t(e):e=>{let n=$(e),r=l(n);return!r||RB(r)?!1:t(e)},d=i.filter(u),f=new Map(d.map(e=>[$(e),e]));o.forEach(e=>f.set($(e),e));let p=a.filter(({source:e,target:t})=>f.has(e)&&f.has(t));return{nodes:d,edges:p,combos:o}}initGraphLayout(e){let{element:t,viewport:n}=this.context,{type:r,enableWorker:i,animation:a,iterations:o}=e,s=Vte(e,[`type`,`enableWorker`,`animation`,`iterations`]),[c,l]=n.getCanvasSize(),u=[c/2,l/2],d=e?.nodeSize??(e=>{let n=t?.getElement(e.id);return n?n.attributes.size:t?.getElementComputedStyle(`node`,e).size}),f=MN(`layout`,r);if(!f)return FN.warn(`The layout of ${r} is not registered.`);let p=new(Object.getPrototypeOf(f.prototype)===nV.prototype?f:cV(f,this.context))(this.context),m={nodeSize:d,width:c,height:l,center:u};switch(p.id){case`d3-force`:case`d3-force-3d`:Object.assign(m,{center:{x:c/2,y:l/2,z:0}});break;default:break}return eC(p.options,m,s),p}updateElementPosition(e,t){let{model:n,element:r}=this.context;return r?(n.updateData(e),r.draw({animation:t,silence:!0})):null}destroy(){var e;this.stopLayout(),this.context={},(e=this.supervisor)==null||e.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}},P9=(e,t)=>{var n;let[r,i]=t;(n=e.nodes)==null||n.forEach(e=>{if(e.style){let{x:t=0,y:n=0}=e.style;e.style.x=t+r,e.style.y=n+i}else e.style={x:r,y:i}})};function Ute(e){return[Wte].reduce((e,t)=>t(e),e)}function Wte(e){return!e.layout||Array.isArray(e.layout)||`preLayout`in e.layout||[`antv-dagre`,`combo-combined`,`compact-box`,`circular`,`concentric`,`dagre`,`fishbone`,`grid`,`indented`,`mds`,`radial`,`random`,`snake`,`dendrogram`,`mindmap`].includes(e.layout.type)&&(e.layout.preLayout=!0),e}var Gte=class extends gF{constructor(e){super(e),this.category=`plugin`,this.setPlugins(this.context.options.plugins||[])}setPlugins(e){this.setExtensions(e)}getPluginInstance(e){let t=this.extensionMap[e];if(t)return t;FN.warn(`Cannot find the plugin ${e}, will try to find it by type.`);let n=this.extensions.find(t=>t.type===e);if(n)return this.extensionMap[n.key]}};const F9=[`update-related-edges`,`collapse-expand-node`,`collapse-expand-combo`,`get-edge-actual-ends`,`arrange-draw-order`];var Kte=class extends gF{constructor(e){super(e),this.category=`transform`,this.setTransforms(this.context.options.transforms||[])}getTransforms(){}setTransforms(e){this.setExtensions([...F9.slice(0,F9.length-1),...e,F9[F9.length-1]])}getTransformInstance(e){return e?this.extensionMap[e]:this.extensionMap}},I9=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},qte=class{get padding(){return iP(this.context.options.padding)}get paddingOffset(){let[e,t,n,r]=this.padding,[i,a,o]=[(r-t)/2,(e-n)/2,0];return[i,a,o]}constructor(e){this.landmarkCounter=0,this.context=e;let[t,n]=this.paddingOffset,{zoom:r,rotation:i,x:a=t,y:o=n}=e.options;this.transform({mode:`absolute`,scale:r,translate:[a,o],rotate:i},!1)}get camera(){let{canvas:e}=this.context;return new Proxy(e.getCamera(),{get:(t,n)=>{let r=Object.entries(e.getLayers()).filter(([e])=>![`main`].includes(e)).map(([,e])=>e.getCamera()),i=t[n];if(typeof i==`function`)return(...e)=>{let a=i.apply(t,e);return r.forEach(t=>{t[n].apply(t,e)}),a}}})}createLandmark(e){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,e)}getAnimation(e){let t=BN(this.context.options,e);return t?lC(Object.assign({},t),[`easing`,`duration`]):!1}getCanvasSize(){let{canvas:e}=this.context,{width:t=0,height:n=0}=e.getConfig();return[t,n]}getCanvasCenter(){let{canvas:e}=this.context,{width:t=0,height:n=0}=e.getConfig();return[t/2,n/2,0]}getViewportCenter(){let[e,t]=this.camera.getPosition();return[e,t,0]}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}getZoom(){return this.camera.getZoom()}getRotation(){return this.camera.getRoll()}getTranslateOptions(e){let{camera:t}=this,{mode:n,translate:r=[]}=e,i=this.getZoom(),a=t.getPosition(),o=t.getFocalPoint(),[s,c]=this.getCanvasCenter(),[l=0,u=0,d=0]=r,f=wF([-l,-u,-d],i);return n===`relative`?{position:xF(a,f),focalPoint:xF(o,f)}:{position:xF([s,c,a[2]],f),focalPoint:xF([s,c,o[2]],f)}}getRotateOptions(e){let{mode:t,rotate:n=0}=e;return{roll:t===`relative`?this.camera.getRoll()+n:n}}getZoomOptions(e){let{zoomRange:t}=this.context.options,n=this.camera.getZoom(),{mode:r,scale:i=1}=e;return SS(r===`relative`?n*i:i,...t)}transform(e,t){return I9(this,void 0,void 0,function*(){let{graph:n}=this.context,{translate:r,rotate:i,scale:a,origin:o}=e;this.cancelAnimation();let s=this.getAnimation(t);if(x9(n,new b9(Q.BEFORE_TRANSFORM,e)),!i&&a&&!r&&o&&!s){this.camera.setZoomByViewportPoint(this.getZoomOptions(e),o),x9(n,new b9(Q.AFTER_TRANSFORM,e));return}let c={};if(r&&Object.assign(c,this.getTranslateOptions(e)),K(i)&&Object.assign(c,this.getRotateOptions(e)),K(a)&&Object.assign(c,{zoom:this.getZoomOptions(e)}),s)return x9(n,new v9(Q.BEFORE_ANIMATE,xN.TRANSFORM,null,e)),new Promise(t=>{this.transformResolver=t,this.camera.gotoLandmark(this.createLandmark(c),Object.assign(Object.assign({},s),{onfinish:()=>{x9(n,new v9(Q.AFTER_ANIMATE,xN.TRANSFORM,null,e)),x9(n,new b9(Q.AFTER_TRANSFORM,e)),this.transformResolver=void 0,t()}}))});this.camera.gotoLandmark(this.createLandmark(c),{duration:0}),x9(n,new b9(Q.AFTER_TRANSFORM,e))})}fitView(e,t){return I9(this,void 0,void 0,function*(){let[n,r,i,a]=this.padding,{when:o=`always`,direction:s=`both`}=e||{},[c,l]=this.context.canvas.getSize(),u=c-a-r,d=l-n-i,f=this.context.canvas.getBounds(),p=this.getBBoxInViewport(f),[m,h]=cP(p);if(o===`overflow`&&!(s===`x`&&m>=u||s===`y`&&h>=d||s===`both`&&m>=u&&h>=d))return yield this.fitCenter({animation:t});let g=u/m,_=d/h,v=s===`x`?g:s===`y`?_:Math.min(g,_),y=this.getAnimation(t);yield this.transform({mode:`relative`,scale:v,translate:xF(SF(this.getCanvasCenter(),this.getBBoxInViewport(f).center),wF(this.paddingOffset,v))},y)})}fitCenter(e){return I9(this,void 0,void 0,function*(){let t=this.context.canvas.getBounds();yield this.focus(t,e)})}focusElements(e){return I9(this,arguments,void 0,function*(e,t={}){let{element:n}=this.context;if(!n)return;let r=e=>t.shapes?e.getShape(t.shapes).getRenderBounds():e.getRenderBounds(),i=fP(e.map(e=>r(n.getElement(e))));yield this.focus(i,t)})}focus(e,t){return I9(this,void 0,void 0,function*(){let n=this.context.graph.getViewportByCanvas(e.center),r=t.position||this.getCanvasCenter(),i=SF(r,n);yield this.transform({mode:`relative`,translate:xF(i,this.paddingOffset)},t.animation)})}getBBoxInViewport(e){let{min:t,max:n}=e,{graph:r}=this.context,[i,a]=r.getViewportByCanvas(t),[o,s]=r.getViewportByCanvas(n),c=new aT;return c.setMinMax([i,a,0],[o,s,0]),c}isInViewport(e,t=!1,n=0){let{graph:r}=this.context,i=this.getCanvasSize(),[a,o]=r.getCanvasByViewport([0,0]),[s,c]=r.getCanvasByViewport(i),l=new aT;return l.setMinMax([a,o,0],[s,c,0]),n&&(l=dP(l,n)),nP(e)?mP(e,l):t?pP(e,l):l.intersects(e)}cancelAnimation(){var e;this.camera.landmarks?.length&&this.camera.cancelLandmarkAnimation(),(e=this.transformResolver)==null||e.call(this)}},L9=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},R9=class e extends XB{constructor(t){var n;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new zte},this.isCollapsingExpanding=!1,this.onResize=qS(()=>{this.resize()},300),this._setOptions(Object.assign({},e.defaultOptions,t),!0),this.context.graph=this,this.options.autoResize&&((n=globalThis.addEventListener)==null||n.call(globalThis,`resize`,this.onResize))}getOptions(){return this.options}setOptions(e){this._setOptions(e,!1)}_setOptions(e,t){if(this.updateCanvas(e),Object.assign(this.options,Ute(e)),t){let{data:t}=e;t&&this.addData(t);return}let{behaviors:n,combo:r,data:i,edge:a,layout:o,node:s,plugins:c,theme:l,transforms:u}=e;n&&this.setBehaviors(n),i&&this.setData(i),s&&this.setNode(s),a&&this.setEdge(a),r&&this.setCombo(r),o&&this.setLayout(o),l&&this.setTheme(l),c&&this.setPlugins(c),u&&this.setTransforms(u)}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}setSize(e,t){e&&(this.options.width=e),t&&(this.options.height=t),this.resize(e,t)}setZoomRange(e){this.options.zoomRange=e}getZoomRange(){return this.options.zoomRange}setNode(e){this.options.node=e,this.context.model.refreshData()}setEdge(e){this.options.edge=e,this.context.model.refreshData()}setCombo(e){this.options.combo=e,this.context.model.refreshData()}getTheme(){return this.options.theme}setTheme(e){this.options.theme=rS(e)?e(this.getTheme()):e}setLayout(e){this.options.layout=rS(e)?e(this.getLayout()):e}getLayout(){return this.options.layout}setBehaviors(e){var t;this.options.behaviors=rS(e)?e(this.getBehaviors()):e,(t=this.context.behavior)==null||t.setBehaviors(this.options.behaviors)}updateBehavior(e){this.setBehaviors(t=>t.map(t=>typeof t==`object`&&t.key===e.key?Object.assign(Object.assign({},t),e):t))}getBehaviors(){return this.options.behaviors||[]}setPlugins(e){var t;this.options.plugins=rS(e)?e(this.getPlugins()):e,(t=this.context.plugin)==null||t.setPlugins(this.options.plugins)}updatePlugin(e){this.setPlugins(t=>t.map(t=>typeof t==`object`&&t.key===e.key?Object.assign(Object.assign({},t),e):t))}getPlugins(){return this.options.plugins||[]}getPluginInstance(e){return this.context.plugin.getPluginInstance(e)}setTransforms(e){var t;this.options.transforms=rS(e)?e(this.getTransforms()):e,(t=this.context.transform)==null||t.setTransforms(this.options.transforms)}updateTransform(e){this.setTransforms(t=>t.map(t=>typeof t==`object`&&t.key===e.key?Object.assign(Object.assign({},t),e):t)),this.context.model.refreshData()}getTransforms(){return this.options.transforms||[]}getData(){return this.context.model.getData()}getElementData(e){return Array.isArray(e)?e.map(e=>this.context.model.getElementDataById(e)):this.context.model.getElementDataById(e)}getNodeData(e){return e===void 0?this.context.model.getNodeData():Array.isArray(e)?this.context.model.getNodeData(e):this.context.model.getNodeLikeDatum(e)}getEdgeData(e){return e===void 0?this.context.model.getEdgeData():Array.isArray(e)?this.context.model.getEdgeData(e):this.context.model.getEdgeDatum(e)}getComboData(e){return e===void 0?this.context.model.getComboData():Array.isArray(e)?this.context.model.getComboData(e):this.context.model.getNodeLikeDatum(e)}setData(e){this.context.model.setData(rS(e)?e(this.getData()):e)}addData(e){this.context.model.addData(rS(e)?e(this.getData()):e)}addNodeData(e){this.context.model.addNodeData(rS(e)?e(this.getNodeData()):e)}addEdgeData(e){this.context.model.addEdgeData(rS(e)?e(this.getEdgeData()):e)}addComboData(e){this.context.model.addComboData(rS(e)?e(this.getComboData()):e)}addChildrenData(e,t){this.context.model.addChildrenData(e,t)}updateData(e){this.context.model.updateData(rS(e)?e(this.getData()):e)}updateNodeData(e){this.context.model.updateNodeData(rS(e)?e(this.getNodeData()):e)}updateEdgeData(e){this.context.model.updateEdgeData(rS(e)?e(this.getEdgeData()):e)}updateComboData(e){this.context.model.updateComboData(rS(e)?e(this.getComboData()):e)}removeData(e){this.context.model.removeData(rS(e)?e(this.getData()):e)}removeNodeData(e){this.context.model.removeNodeData(rS(e)?e(this.getNodeData()):e)}removeEdgeData(e){this.context.model.removeEdgeData(rS(e)?e(this.getEdgeData()):e)}removeComboData(e){this.context.model.removeComboData(rS(e)?e(this.getComboData()):e)}getElementType(e){return this.context.model.getElementType(e)}getRelatedEdgesData(e,t=`both`){return this.context.model.getRelatedEdgesData(e,t)}getNeighborNodesData(e){return this.context.model.getNeighborNodesData(e)}getAncestorsData(e,t){return this.context.model.getAncestorsData(e,t)}getParentData(e,t){return this.context.model.getParentData(e,t)}getChildrenData(e){return this.context.model.getChildrenData(e)}getDescendantsData(e){return this.context.model.getDescendantsData(e)}getElementDataByState(e,t){return this.context.model.getElementDataByState(e,t)}initCanvas(){return L9(this,void 0,void 0,function*(){if(this.context.canvas)return yield this.context.canvas.ready;let{container:e=`container`,width:t,height:n,renderer:r,cursor:i,background:a,canvas:o,devicePixelRatio:s=globalThis.devicePixelRatio??1}=this.options;if(e instanceof d9)this.context.canvas=e,i&&e.setCursor(i),r&&e.setRenderer(r),yield e.ready;else{let c=_S(e)?document.getElementById(e):e,l=h9(c);this.emit(Q.BEFORE_CANVAS_INIT,{container:c,width:t,height:n});let u=Object.assign(Object.assign({},o),{container:c,width:t||l[0],height:n||l[1],background:a,renderer:r,cursor:i,devicePixelRatio:s}),d=new d9(u);this.context.canvas=d,yield d.ready,this.emit(Q.AFTER_CANVAS_INIT,{canvas:d})}})}updateCanvas(e){let{renderer:t,cursor:n,height:r,width:i}=e,a=this.context.canvas;a&&(t&&(this.emit(Q.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),a.setRenderer(t),this.emit(Q.AFTER_RENDERER_CHANGE,{renderer:t})),n&&a.setCursor(n),(K(i)||K(r))&&this.setSize(i??this.options.width??0,r??this.options.height??0))}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new Fte(this.context)),this.context.plugin||(this.context.plugin=new Gte(this.context)),this.context.viewport||(this.context.viewport=new qte(this.context)),this.context.transform||(this.context.transform=new Kte(this.context)),this.context.element||(this.context.element=new Bte(this.context)),this.context.animation||(this.context.animation=new Pte(this.context)),this.context.layout||(this.context.layout=new Hte(this.context)),this.context.behavior||(this.context.behavior=new Ite(this.context))}prepare(){return L9(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed){console.error(PN(`The graph instance has been destroyed`));return}yield this.initCanvas(),this.initRuntime()})}render(){return L9(this,void 0,void 0,function*(){if(yield this.prepare(),x9(this,new _9(Q.BEFORE_RENDER)),this.options.layout)if(!this.rendered&&oV(this.options.layout)){let e=yield this.context.element.preLayoutDraw({type:`render`});yield Promise.all([e?.finished,this.autoFit()])}else{let e=this.context.element.draw({type:`render`});yield Promise.all([e?.finished,this.context.layout.postLayout()]),yield this.autoFit()}else{let e=this.context.element.draw({type:`render`});yield Promise.all([e?.finished,this.autoFit()])}this.rendered=!0,x9(this,new _9(Q.AFTER_RENDER))})}draw(){return L9(this,void 0,void 0,function*(){yield this.prepare(),yield this.context.element.draw()?.finished})}layout(e){return L9(this,void 0,void 0,function*(){yield this.context.layout.postLayout(e)})}stopLayout(){this.context.layout.stopLayout()}clear(){return L9(this,void 0,void 0,function*(){let{model:e,element:t}=this.context;e.setData({}),e.clearChanges(),t?.clear()})}destroy(){var e;x9(this,new _9(Q.BEFORE_DESTROY));let{layout:t,animation:n,element:r,model:i,canvas:a,behavior:o,plugin:s}=this.context;s?.destroy(),o?.destroy(),t?.destroy(),n?.destroy(),r?.destroy(),i.destroy(),a?.destroy(),this.options={},this.context={},this.off(),(e=globalThis.removeEventListener)==null||e.call(globalThis,`resize`,this.onResize),this.destroyed=!0,x9(this,new _9(Q.AFTER_DESTROY))}getCanvas(){return this.context.canvas}resize(e,t){let n=h9(this.context.canvas?.getContainer()),r=[e||n[0],t||n[1]];if(!this.context.canvas)return;let i=this.context.canvas.getSize();aC(r,i)||(x9(this,new _9(Q.BEFORE_SIZE_CHANGE,{size:r})),this.context.canvas.resize(...r),x9(this,new _9(Q.AFTER_SIZE_CHANGE,{size:r})))}fitView(e,t){return L9(this,void 0,void 0,function*(){yield this.context.viewport?.fitView(e,t)})}fitCenter(e){return L9(this,void 0,void 0,function*(){yield this.context.viewport?.fitCenter({animation:e})})}autoFit(){return L9(this,void 0,void 0,function*(){let{autoFit:e}=this.context.options;if(e)if(_S(e))e===`view`?yield this.fitView():e===`center`&&(yield this.fitCenter());else{let{type:t,animation:n}=e;t===`view`?yield this.fitView(e.options,n):t===`center`&&(yield this.fitCenter(n))}})}focusElement(e,t){return L9(this,void 0,void 0,function*(){yield this.context.viewport?.focusElements(Array.isArray(e)?e:[e],{animation:t})})}zoomBy(e,t,n){return L9(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:`relative`,scale:e,origin:n},t)})}zoomTo(e,t,n){return L9(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:`absolute`,scale:e,origin:n},t)})}getZoom(){return this.context.viewport.getZoom()}rotateBy(e,t,n){return L9(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:`relative`,rotate:e,origin:n},t)})}rotateTo(e,t,n){return L9(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:`absolute`,rotate:e,origin:n},t)})}getRotation(){return this.context.viewport.getRotation()}translateBy(e,t){return L9(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:`relative`,translate:e},t)})}translateTo(e,t){return L9(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:`absolute`,translate:e},t)})}getPosition(){return SF([0,0],this.getCanvasByViewport([0,0]))}translateElementBy(e,t){return L9(this,arguments,void 0,function*(e,t,n=!0){let[r,i]=oS(e)?[e,t??!0]:[{[e]:t},n];Object.entries(r).forEach(([e,t])=>this.context.model.translateNodeLikeBy(e,t)),yield this.context.element.draw({animation:i,stage:`translate`})?.finished})}translateElementTo(e,t){return L9(this,arguments,void 0,function*(e,t,n=!0){let[r,i]=oS(e)?[e,t??!0]:[{[e]:t},n];Object.entries(r).forEach(([e,t])=>this.context.model.translateNodeLikeTo(e,t)),yield this.context.element.draw({animation:i,stage:`translate`})?.finished})}getElementPosition(e){return this.context.model.getElementPosition(e)}getElementRenderStyle(e){return uC(this.context.element.getElement(e).attributes,[`context`])}setElementVisibility(e,t){return L9(this,arguments,void 0,function*(e,t,n=!0){let[r,i]=oS(e)?[e,t??!0]:[{[e]:t},n],a={nodes:[],edges:[],combos:[]};Object.entries(r).forEach(([e,t])=>{let n=this.getElementType(e);a[`${n}s`].push({id:e,style:{visibility:t}})});let{model:o,element:s}=this.context;o.preventUpdateNodeLikeHierarchy(()=>{o.updateData(a)}),yield s.draw({animation:i,stage:`visibility`})?.finished})}showElement(e,t){return L9(this,void 0,void 0,function*(){let n=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(n.map(e=>[e,`visible`])),t)})}hideElement(e,t){return L9(this,void 0,void 0,function*(){let n=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(n.map(e=>[e,`hidden`])),t)})}getElementVisibility(e){return this.context.element.getElement(e)?.style?.visibility??`visible`}setElementZIndex(e,t){return L9(this,void 0,void 0,function*(){let n={nodes:[],edges:[],combos:[]},r=oS(e)?e:{[e]:t};Object.entries(r).forEach(([e,t])=>{let r=this.getElementType(e);n[`${r}s`].push({id:e,style:{zIndex:t}})});let{model:i,element:a}=this.context;i.preventUpdateNodeLikeHierarchy(()=>i.updateData(n)),yield a.draw({animation:!1,stage:`zIndex`})?.finished})}frontElement(e){return L9(this,void 0,void 0,function*(){let t=Array.isArray(e)?e:[e],{model:n}=this.context,r={};t.map(e=>{let t=n.getFrontZIndex(e);if(n.getElementType(e)===`combo`){let i=n.getAncestorsData(e,`combo`).at(-1)||this.getComboData(e),a=[i,...n.getDescendantsData($(i))],o=t-S9(i);a.forEach(e=>{r[$(e)]=this.getElementZIndex($(e))+o});let{internal:s}=jz(a.map($),e=>n.getRelatedEdgesData(e));s.forEach(e=>{let t=$(e);r[t]=this.getElementZIndex(t)+o})}else r[e]=t}),yield this.setElementZIndex(r)})}getElementZIndex(e){return S9(this.context.model.getElementDataById(e))}setElementState(e,t){return L9(this,arguments,void 0,function*(e,t,n=!0){let[r,i]=oS(e)?[e,t??!0]:[{[e]:t},n],a=e=>e?Array.isArray(e)?e:[e]:[],o={nodes:[],edges:[],combos:[]};Object.entries(r).forEach(([e,t])=>{let n=this.getElementType(e);o[`${n}s`].push({id:e,states:a(t)})}),this.updateData(o),yield this.context.element.draw({animation:i,stage:`state`})?.finished})}getElementState(e){return this.context.model.getElementState(e)}getElementRenderBounds(e){return this.context.element.getElement(e).getRenderBounds()}collapseElement(e){return L9(this,arguments,void 0,function*(e,t=!0){let{model:n,element:r}=this.context;if(wI(n.getNodeLikeData([e])[0])||this.isCollapsingExpanding)return;typeof t==`boolean`&&(t={animation:t,align:!0});let i=n.getElementType(e);yield this.frontElement(e),this.isCollapsingExpanding=!0,n.updateData(i===`node`?{nodes:[{id:e,style:{collapsed:!0}}]}:{combos:[{id:e,style:{collapsed:!0}}]}),i===`node`?yield r.collapseNode(e,t):i===`combo`&&(yield r.collapseCombo(e,!!t.animation)),this.isCollapsingExpanding=!1})}expandElement(e){return L9(this,arguments,void 0,function*(e,t=!0){let{model:n,element:r}=this.context;if(!wI(n.getNodeLikeData([e])[0])||this.isCollapsingExpanding)return;typeof t==`boolean`&&(t={animation:t,align:!0});let i=n.getElementType(e);this.isCollapsingExpanding=!0,n.updateData(i===`node`?{nodes:[{id:e,style:{collapsed:!1}}]}:{combos:[{id:e,style:{collapsed:!1}}]}),i===`node`?yield r.expandNode(e,t):i===`combo`&&(yield r.expandCombo(e,!!t.animation)),this.isCollapsingExpanding=!1})}setElementCollapsibility(e,t){let n=this.getElementType(e);n===`node`?this.updateNodeData([{id:e,style:{collapsed:t}}]):n===`combo`&&this.updateComboData([{id:e,style:{collapsed:t}}])}toDataURL(){return L9(this,arguments,void 0,function*(e={}){return this.context.canvas.toDataURL(e)})}getCanvasByViewport(e){return this.context.canvas.getCanvasByViewport(e)}getViewportByCanvas(e){return this.context.canvas.getViewportByCanvas(e)}getClientByCanvas(e){return this.context.canvas.getClientByCanvas(e)}getCanvasByClient(e){return this.context.canvas.getCanvasByClient(e)}getViewportCenter(){return this.context.viewport.getViewportCenter()}getCanvasCenter(){return this.context.viewport.getCanvasCenter()}on(e,t,n){return super.on(e,t,n)}once(e,t){return super.once(e,t)}off(e,t){return super.off(e,t)}};R9.defaultOptions={autoResize:!1,theme:`light`,rotation:0,zoom:1,zoomRange:[.01,10]};var Jte=class extends t9{beforeDraw(e){let{add:t,update:n}=e,{model:r}=this.context;return[...t.edges.entries(),...n.edges.entries()].forEach(([,e])=>{z9(r,e)}),e}};const z9=(e,t)=>{let{source:n,target:r}=t,i=e.getElementDataById(n),a=e.getElementDataById(r),o=Mz(i,t=>e.getParentData(t,ON)),s=Mz(a,t=>e.getParentData(t,ON)),c=$(o),l=$(s),u={sourceNode:c,targetNode:l};return t.style?Object.assign(t.style,u):t.style=u,t},Yte=(e,t,n)=>{let[r,i]=t,[a,o]=n;if(i===r)return a;let s=(e-r)/(i-r);return a+s*(o-a)},Xte=(e,t,n)=>{let[r,i]=t,[a,o]=n,s=Math.log(e-r+1)/Math.log(i-r+1);return a+s*(o-a)},Zte=(e,t,n,r=2)=>{let[i,a]=t,[o,s]=n,c=((e-i)/(a-i))**+r;return o+c*(s-o)},Qte=(e,t,n)=>{let[r,i]=t,[a,o]=n,s=Math.sqrt((e-r)/(i-r));return a+s*(o-a)};var B9=class e extends t9{constructor(t,n){super(t,eC({},e.defaultOptions,n)),this.assignSizeByCentrality=(e,t,n,r,i,a)=>{let o=[t,n],s=[r[0],i[0]],c=[r[1],i[1]],l=[r[2],i[2]],u=(e,t)=>{if(typeof a==`function`)return a(e,o,t);switch(a){case`linear`:return Yte(e,o,t);case`log`:return Xte(e,o,t);case`pow`:return Zte(e,o,t,2);case`sqrt`:return Qte(e,o,t);default:return t[0]}};return[u(e,s),u(e,c),u(e,l)]}}beforeDraw(e){let{model:t}=this.context,n=t.getNodeData(),r=jI(this.options.maxSize),i=jI(this.options.minSize),a=this.getCentralities(this.options.centrality),o=a.size>0?Math.max(...a.values()):0,s=a.size>0?Math.min(...a.values()):0;return n.forEach(t=>{let n=this.assignSizeByCentrality(a.get($(t))||0,s,o,i,r,this.options.scale),c=this.context.element?.getElement($(t)),l={size:n};this.assignLabelStyle(l,n,t,c),(!c||!r9(l,c.attributes))&&n9(e,c?`update`:`add`,`node`,eC(t,{style:l}),!0)}),e}assignLabelStyle(e,t,n,r){let i=r?r.config.style:this.context.element?.getElementComputedStyle(`node`,n);if(Object.assign(e,lC(i,[`labelFontSize`,`labelLineHeight`])),this.options.mapLabelSize){let n=this.getLabelSizeByNodeSize(t,1/0,Number(e.labelFontSize));Object.assign(e,{labelFontSize:n,labelLineHeight:n+aP(e.labelPadding)})}return e}getLabelSizeByNodeSize(e,t,n){let r=Math.min(...e)/2,[i,a]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[n,t];return Math.min(a,Math.max(r,i))}getCentralities(e){let{model:t}=this.context,n=t.getData();if(typeof e==`function`)return e(n);let r=t.getRelatedEdgesData.bind(t);return aF(n,r,e)}};B9.defaultOptions={centrality:{type:`degree`},maxSize:80,minSize:20,scale:`linear`,mapLabelSize:!1};var V9=class e extends t9{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n))}get ref(){return this.context.model.getRootsData()[0]}afterLayout(){var e;let t=BF(this.ref),{graph:n,model:r}=this.context;(e=r.getData().nodes)==null||e.forEach(e=>{if($(e)===$(this.ref))return;let i=IF(SF(BF(e),t)),a=Math.abs(i)>Math.PI/2,o=!e.children||e.children.length===0,s=$(e),c=this.context.element?.getElement(s);if(!c||!c.isVisible())return;let l=jI(n.getElementRenderStyle(s).size)[0]/2,u=(o?1:-1)*(l+this.options.offset),d=[[`translate`,u*Math.cos(i),u*Math.sin(i)],[`rotate`,a?bT(i)+180:bT(i)]];r.updateNodeData([{id:$(e),style:{labelTextAlign:a===o?`right`:`left`,labelTextBaseline:`middle`,labelTransform:d}}])}),n.draw()}};V9.defaultOptions={offset:5};var $te=`quadratic`,H9=[`top`,`top-right`,`right`,`right-bottom`,`bottom`,`bottom-left`,`left`,`left-top`],U9=class e extends t9{constructor(t,n){super(t,Object.assign({},e.defaultOptions,n)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=e=>{let{add:{edges:t},update:{nodes:n,edges:r,combos:i},remove:{edges:a}}=e,{model:o}=this.context,s=new Map,c=(e,t)=>{o.getRelatedEdgesData(t).forEach(e=>!s.has($(e))&&s.set($(e),e))};n.forEach(c),i.forEach(c);let l=e=>{let t=o.getEdgeData().map(e=>z9(o,e));ene(e,t,!0).forEach(e=>!s.has($(e))&&s.set($(e),e))};if(a.size&&a.forEach(l),t.size&&t.forEach(l),r.size){let e=_0(g0(o.getChanges())).update.edges;r.forEach(t=>{l(t);let n=e.find(e=>$(e.value)===$(t))?.original;n&&!G9(t,n)&&l(n)})}rC(this.options.edges)||s.forEach((e,t)=>!this.options.edges.includes(t)&&s.delete(t));let u=o.getEdgeData().map($);return new Map([...s].sort((e,t)=>u.indexOf(e[0])-u.indexOf(t[0])))},this.applyBundlingStyle=(e,t,n)=>{let{edgeMap:r,reverses:i}=W9(t);r.forEach(t=>{t.forEach((t,r,a)=>{let o=a.length,s=t.style||{};if(t.source===t.target){let e=H9.length;s.loopPlacement=H9[r%e],s.loopDist=Math.floor(r/e)*n+50}else if(o===1)s.curveOffset=0;else{let e=(r%2==0?1:-1)*(i[`${t.source}|${t.target}|${r}`]?-1:1);s.curveOffset=o%2==1?e*Math.ceil(r/2)*n*2:e*(Math.floor(r/2)*n*2+n)}let c=Object.assign(t,{type:$te,style:s}),l=this.context.element?.getElement($(t));(!l||!r9(c.style,l.attributes))&&n9(e,l?`update`:`add`,`edge`,c,!0)})})},this.resetEdgeStyle=e=>{let t=e.style||{},n=this.cacheMergeStyle.get($(e))||{};return Object.keys(n).forEach(r=>{aC(t[r],n[r])&&(e[r]?t[r]=e[r]:delete t[r])}),Object.assign(e,{style:t})},this.applyMergingStyle=(e,t)=>{let{edgeMap:n,reverses:r}=W9(t);n.forEach(t=>{if(t.length===1){let n=t[0],r=this.context.element?.getElement($(n)),i=this.resetEdgeStyle(n);(!r||!r9(i,r.attributes))&&n9(e,r?`update`:`add`,`edge`,i);return}let n=t.map(({source:e,target:t,style:n={}},i)=>{let{startArrow:a,endArrow:o}=n,s={},[c,l]=r[`${e}|${t}|${i}`]?[`endArrow`,`startArrow`]:[`startArrow`,`endArrow`];return FS(a)&&(s[c]=a),FS(o)&&(s[l]=o),s}).reduce((e,t)=>Object.assign(Object.assign({},e),t),{});t.forEach((t,r,i)=>{if(r!==0){n9(e,`remove`,`edge`,t);return}let a=Object.assign({},rS(this.options.style)?this.options.style(i):this.options.style,{childrenData:i});this.cacheMergeStyle.set($(t),a);let o=Object.assign(Object.assign({},t),{type:`line`,style:Object.assign(Object.assign(Object.assign({},t.style),n),a)}),s=this.context.element?.getElement($(t));(!s||!r9(o.style,s.attributes))&&n9(e,s?`update`:`add`,`edge`,o,!0)})})}}beforeDraw(e){let t=this.getAffectedParallelEdges(e);return t.size===0||(this.options.mode===`bundle`?this.applyBundlingStyle(e,t,this.options.distance):this.applyMergingStyle(e,t)),e}};U9.defaultOptions={mode:`bundle`,distance:15};const W9=e=>{let t=new Map,n=new Set,r={},i=new Map;for(let[a,o]of e){if(n.has(a))continue;let{source:s,target:c}=o,l=`${s}-${c}`;t.has(l)||(t.set(l,[]),i.set(l,new Set));let u=t.get(l),d=i.get(l);u&&d&&!d.has(a)&&(u.push(o),d.add(a),n.add(a));for(let[u,d]of e){if(n.has(u)||u===a)continue;if(G9(o,d)){let e=t.get(l),a=i.get(l);e&&a&&!a.has(u)&&(e.push(d),a.add(u),s===d.target&&c===d.source&&(r[`${d.source}|${d.target}|${e.length-1}`]=!0),n.add(u))}}}return{edgeMap:t,reverses:r}},ene=(e,t,n)=>t.filter(t=>(n||$(t)!==$(e))&&G9(t,e)),G9=(e,t)=>{let{sourceNode:n,targetNode:r}=e.style||{},{sourceNode:i,targetNode:a}=t.style||{};return n===i&&r===a||n===a&&r===i};var tne=class extends t9{beforeDraw(e,t){let{stage:n}=t;if(n===`visibility`)return e;let{model:r}=this.context,{update:{nodes:i,edges:a,combos:o}}=e,s=(e,t)=>{r.getRelatedEdgesData(t).forEach(e=>!a.has($(e))&&a.set($(e),e))};return i.forEach(s),o.forEach(s),e}},nne={animation:{"combo-collapse":QN,"combo-expand":$N,"node-collapse":JN,"node-expand":YN,"path-in":XN,"path-out":ZN,fade:KN,translate:qN},behavior:{"brush-select":pI,"click-select":CI,"collapse-expand":BB,"create-edge":WB,"drag-canvas":KB,"drag-element-force":fV,"drag-element":JB,"fix-element-size":mV,"focus-element":gV,"hover-activate":_V,"lasso-select":vV,"auto-adapt-label":yF,"optimize-viewport-transform":yV,"scroll-canvas":xV,"zoom-canvas":CV},combo:{circle:tz,rect:nz},edge:{cubic:Wz,line:Jz,polyline:cB,quadratic:lB,"cubic-horizontal":Gz,"cubic-radial":Kz,"cubic-vertical":qz},layout:{"antv-dagre":hW,"combo-combined":$G,"compact-box":w$.compactBox,"d3-force":XK,"force-atlas2":SQ,circular:yW,concentric:wW,dagre:_Q,dendrogram:w$.dendrogram,fishbone:E$,force:EG,fruchterman:TQ,grid:DQ,indented:w$.indented,mds:qG,mindmap:w$.mindmap,radial:VQ,random:JQ,snake:j$},node:{circle:hL,diamond:_L,ellipse:wL,hexagon:TL,html:qR,image:YR,rect:XR,star:ZR,donut:yL,triangle:QR},palette:{spectral:N$,tableau:P$,oranges:F$,greens:I$,blues:L$},theme:{dark:Cte,light:wte},plugin:{"bubble-sets":K1,"edge-bundling":Q1,"edge-filter-lens":c0,"grid-line":h0,background:H$,contextmenu:Z1,fisheye:f0,fullscreen:p0,history:b0,hull:g2,legend:j7,minimap:M7,snapline:L7,timebar:U7,toolbar:q7,tooltip:Y7,watermark:$7},transform:{"arrange-draw-order":Tte,"collapse-expand-combo":Ete,"collapse-expand-node":Dte,"get-edge-actual-ends":Jte,"map-node-size":B9,"place-radial-labels":V9,"process-parallel-edges":U9,"update-related-edges":tne},shape:{circle:Mj,ellipse:Fj,group:Lj,html:zj,image:aL,line:Hj,path:Wj,polygon:Kj,polyline:Jj,rect:Yj,text:Zj,label:qI,badge:JI}};function rne(){Object.entries(nne).forEach(([e,t])=>{Object.entries(t).forEach(([t,n])=>{a9(e,t,n)})})}rne();var ine=t(c()),K9=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},q9=Object.assign({},ine),{version:ane,render:one,unmountComponentAtNode:sne}=q9,J9;function Y9(){return K9(this,void 0,void 0,function*(){if(!J9&&Number((ane||``).split(`.`)[0])>=18)try{let e=yield yd(()=>import(`./client-BoYiH0Lb.js`).then(o()),__vite__mapDeps([5,6,2]));e.createRoot&&(J9=e.createRoot)}catch{}})}function X9(e){let{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:t}=q9;t&&typeof t==`object`&&(t.usingClientEntryPoint=e)}var Z9=`__rc_react_root__`;function cne(e,t){X9(!0);let n=t[Z9]||J9(t);X9(!1),n.render(e),t[Z9]=n}function lne(e,t){one(e,t)}function Q9(e,t){return K9(this,void 0,void 0,function*(){yield Y9(),J9?cne(e,t):lne(e,t)})}function une(e){return K9(this,void 0,void 0,function*(){return Promise.resolve().then(()=>{var t;(t=e[Z9])==null||t.unmount(),delete e[Z9]})})}function dne(e){sne(e)}function fne(e){return K9(this,void 0,void 0,function*(){if(yield Y9(),J9)return une(e);dne(e)})}var pne=class extends qR{getKeyStyle(e){return Object.assign({},super.getKeyStyle(e))}constructor(e){super(e)}update(e){super.update(e)}connectedCallback(){super.connectedCallback();let{component:e}=this.attributes;Q9(e,this.getDomElement())}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===`component`&&t!==n&&Q9(this.attributes.component,this.getDomElement())}destroy(){fne(this.getDomElement()),super.destroy()}};a9(AN.NODE,`dialog-entry`,pne);const mne=({data:e})=>{let t=e,n=e.states?.includes(`active`),r=e.states?.includes(`selected`),i=`${n&&`bg-foreground-100`} ${r&&`border-1`}`;return typeof t.text==`string`&&(t.text={translate:t.text}),(0,V.jsx)(yf,{className:`w-full h-full ${i}`.trim(),id:t.id,children:(0,V.jsxs)(gf,{children:[(0,V.jsx)(`p`,{children:wy(t.speaker)}),(0,V.jsx)(`p`,{children:wy(t.text)})]})})},hne=e=>{let{options:t,onRender:n,onDestroy:r}=e,i=(0,b.useRef)(void 0),a=(0,b.useRef)(null);return(0,b.useEffect)(()=>(i.current=new R9({container:a.current,autoResize:!0,autoFit:{type:`view`,options:{when:`overflow`,direction:`y`},animation:{duration:1e3,easing:`ease-in-out`}},layout:{type:`antv-dagre`},zoomRange:[.3,1],behaviors:[`drag-canvas`,`zoom-canvas`,`hover-activate`,`click-select`]}),()=>{let e=i.current;e&&(e.destroy(),r?.(),i.current=void 0)}),[]),(0,b.useEffect)(()=>{let e=a.current,r=i.current;!e||!r||r.destroyed||(r.setOptions(t),r.render().then(()=>n?.(r)).catch(e=>console.debug(e)))},[t]),(0,V.jsx)(`div`,{ref:a,className:`w-full h-full`,id:e.id})},$9=({label:e,description:t,classNames:n={base:Vu(`inline-flex flex-row-reverse w-full max-w-full bg-content2 hover:bg-content3`,`justify-between cursor-pointer rounded-xl py-3 px-1.5`),wrapper:`p-0 h-5 overflow-visible mr-1`,thumb:Vu(`w-6 h-6 border-2 shadow-lg`,`group-data-[hover=true]:border-primary`,`group-data-[selected=true]:ms-6`,`group-data-[pressed=true]:w-7`,`group-data-pressed:group-data-selected:ms-4`)},...r})=>{let i=Array.isArray(t)?t:t?[t]:[];return(0,V.jsx)(Dp,{classNames:n,...r,children:(0,V.jsxs)(`div`,{className:`flex flex-col gap-1`,children:[(0,V.jsx)(`p`,{className:`text-tiny`,children:e}),i.map((e,t)=>(0,V.jsx)(`p`,{className:`text-tiny text-default-400`,children:e},t))]})})};function gne(){let e=Ie(),{id:t}=Re(),n=Cy(e=>e.dialogsFolder),r=Sy();(0,b.useEffect)(()=>{(!t||!n)&&e(`/`)},[t,n,e]);let[i,a]=(0,b.useState)({id:t||``,start:`start`,entries:[]});(0,b.useEffect)(()=>{fv.info(`Dialog Sequence:`,t),t&&r.getDialogSequence(t).then(e=>{a(e)})},[t,r]);let o=(0,b.useMemo)(()=>({nodes:i.entries.map(e=>({...e})),edges:[...i.entries?.map((e,t)=>t<i.entries.length-1?{source:e.id,target:i.entries[t+1].id}:null).filter(Boolean)].filter(e=>e.source&&e.target)}),[i.entries]),s=(0,b.useMemo)(()=>({data:o,node:{type:`dialog-entry`,style:e=>{let t={component:(0,V.jsx)(mne,{data:e}),portLinkToCenter:!0,ports:[{placement:`top`},{placement:`right`},{placement:`bottom`},{placement:`left`}]};return Object.assign(t,{size:[400,200],dx:-200,dy:-100}),t}},edge:{type:`polyline`,style:{stroke:`#8b9baf`,lineWidth:2,radius:20,endArrow:!0,labelText:e=>e.data?.text??``,labelBackground:!0,labelBackgroundFill:`#f8f8f8`,labelBackgroundOpacity:1,labelBackgroundLineWidth:2,labelBackgroundStroke:`#8b9baf`,labelPadding:[1,10],labelBackgroundRadius:4,router:{type:`orth`}}}}),[o]),c=e=>{e.preventDefault();let t=Object.fromEntries(new FormData(e.currentTarget)),n={...i,...t,allowClose:t.allowClose===`true`,invulnerable:t.invulnerable===`true`,invisible:t.invisible===`true`};a(n),fv.info(`Dialog Sequence:`,n)};return(0,V.jsx)(jy,{children:(0,V.jsxs)(`div`,{className:`w-full h-full overflow-hidden`,children:[(0,V.jsxs)(cg,{"aria-label":`Options`,classNames:{base:`absolute z-10 md:pl-3`,panel:`absolute z-9 w-full sm:w-auto md:pl-3`},children:[(0,V.jsx)(lg,{title:`属性`,children:(0,V.jsx)(yf,{className:`w-full sm:w-96 py-2 mt-10 max-h-[calc(100vh-11rem)]`,children:(0,V.jsx)(pg,{className:`scrollbar gutter-both scrollbar-w-1 scrollbar-thumb-rounded-full scrollbar-thumb-background hover:scrollbar-thumb-zinc-400`,children:(0,V.jsx)(gf,{children:(0,V.jsxs)(Jf,{className:`w-full gap-3`,onSubmit:c,children:[(0,V.jsx)(Mp,{isClearable:!0,isRequired:!0,defaultValue:i.id,label:`ID (唯一，请勿重复)`,labelPlacement:`inside`,name:`id`,type:`text`}),(0,V.jsxs)(Wg,{defaultSelectedKeys:[i.type?.toString()??`SCREEN`],label:`类型`,name:`type`,children:[(0,V.jsx)(wg,{children:`覆层（类似字幕，不影响操作）`},`OVERLAY`),(0,V.jsx)(wg,{children:`屏幕（默认，影响操作）`},`SCREEN`),(0,V.jsx)(wg,{children:`菜单（屏幕的变种，对话框较窄）`},`MENU`)]}),(0,V.jsx)(Mp,{isClearable:!0,defaultValue:i.title,label:`标题`,labelPlacement:`inside`,name:`title`,type:`text`}),(0,V.jsx)(nm,{isClearable:!0,defaultValue:i.description,label:`描述`,labelPlacement:`inside`,minRows:1,name:`description`,placeholder:`不会在游戏中显示，仅做标识`}),(0,V.jsx)($9,{defaultSelected:i.allowClose,description:`是否允许通过 Esc 键关闭对话`,label:`是否可关闭`,name:`allowClose`,value:`true`}),(0,V.jsx)($9,{defaultSelected:i.invulnerable,description:[`开启对话框后是否无敌`,`无敌后不受伤害，且不可被选中`],label:`是否无敌`,name:`invulnerable`,value:`true`}),(0,V.jsx)($9,{defaultSelected:i.invisible,description:[`开启对话框后是否隐身，隐身后玩家且不可见`,`隐身后必定无敌`],label:`是否隐身`,name:`invisible`,value:`true`}),(0,V.jsxs)(`div`,{className:`flex gap-2 w-full mt-3`,children:[(0,V.jsx)(ff,{className:`w-4/7`,type:`reset`,variant:`flat`,children:`重置`}),(0,V.jsx)(ff,{className:`w-4/7`,color:`primary`,type:`submit`,children:`保存`})]})]})})})})},`property`),(0,V.jsx)(lg,{title:`对话序列`},`sequence`)]}),(0,V.jsx)(hne,{id:`dialog-entries`,options:s})]})})}function _ne(){return(0,b.useEffect)(()=>{document.title=`页面未找到 - ${pv.name}`},[]),(0,V.jsxs)(`div`,{className:`relative flex flex-col h-screen`,children:[(0,V.jsx)(Nv,{}),(0,V.jsx)(`main`,{className:`w-full min-h-3/5`,children:(0,V.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-full`,children:[(0,V.jsx)(`div`,{className:`font-bold text-[11rem] text-foreground-200`,children:`4 0 4`}),(0,V.jsxs)(`p`,{className:`text-xl text-center text-foreground-500 mb-10`,children:[`哎呀！这个页面好像迷路了... `,(0,V.jsx)(`br`,{}),`它可能正在宇宙的某个角落探险呢！`]}),(0,V.jsx)(Qf,{href:`/`,children:(0,V.jsx)(ff,{className:`w-40 h-14 text-md`,radius:`full`,children:`带我回首页`})})]})})]})}function vne(){return(0,V.jsxs)(at,{children:[(0,V.jsx)(rt,{element:(0,V.jsx)(My,{}),path:`/`}),(0,V.jsx)(rt,{element:(0,V.jsx)(gne,{}),path:`/:id`}),(0,V.jsx)(rt,{element:(0,V.jsx)(_ne,{}),path:`*`})]})}var yne=vne;function bne({children:e}){let t=Ie();return(0,V.jsxs)(gc,{navigate:t,useHref:Me,children:[(0,V.jsx)(Nee,{placement:`bottom-right`}),e]})}v.createRoot(document.getElementById(`root`)).render((0,V.jsx)(b.StrictMode,{children:(0,V.jsx)(lt,{basename:`/dialog-editor/`,children:(0,V.jsx)(bne,{children:(0,V.jsx)(yne,{})})})}));