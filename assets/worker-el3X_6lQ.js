(function(){var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(e&&(t=e(e=0)),t),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=e=>{let n={};for(var r in e)t(n,r,{get:e[r],enumerable:!0});return n},l=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},u=(n,r,a)=>(a=n==null?{}:e(i(n)),l(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),d=e=>l(t({},`__esModule`,{value:!0}),e);function f(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function p(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}var m=`*`,h=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],a=this._events[m]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],s=o.callback;o.once&&(r.splice(a,1),r.length===0&&delete t._events[e],i--,a--),s.apply(t,n)}};o(i),o(a)},e.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);n.length===0&&delete this._events[e]}return this},e.prototype.getEvents=function(){return this._events},e}();function g(e,t,n,r){for(;e.length;){let i=e.shift();if(n(i))return!0;t.add(i.id),r(i.id).forEach(n=>{t.has(n.id)||(t.add(n.id),e.push(n))})}return!1}function _(e,t,n,r){if(n(e))return!0;t.add(e.id);for(let i of r(e.id))if(!t.has(i.id)&&_(i,t,n,r))return!0;return!1}let v=()=>!0;var y=class{graph;nodeFilter;edgeFilter;cacheEnabled;inEdgesMap=new Map;outEdgesMap=new Map;bothEdgesMap=new Map;allNodesMap=new Map;allEdgesMap=new Map;constructor(e){this.graph=e.graph;let t=e.nodeFilter||v,n=e.edgeFilter||v;this.nodeFilter=t,this.edgeFilter=e=>{let{source:r,target:i}=this.graph.getEdgeDetail(e.id);return!t(r)||!t(i)?!1:n(e,r,i)},e.cache===`auto`?(this.cacheEnabled=!0,this.startAutoCache()):e.cache===`manual`?this.cacheEnabled=!0:this.cacheEnabled=!1}clearCache=()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()};refreshCache=()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(e=>e.id))};updateCache=e=>{let t=new Set;e.forEach(e=>{let n=this.bothEdgesMap.get(e);if(n&&n.forEach(e=>t.add(e.id)),!this.hasNode(e))this.inEdgesMap.delete(e),this.outEdgesMap.delete(e),this.bothEdgesMap.delete(e),this.allNodesMap.delete(e);else{let n=this.graph.getRelatedEdges(e,`in`).filter(this.edgeFilter),r=this.graph.getRelatedEdges(e,`out`).filter(this.edgeFilter),i=Array.from(new Set([...n,...r]));i.forEach(e=>t.add(e.id)),this.inEdgesMap.set(e,n),this.outEdgesMap.set(e,r),this.bothEdgesMap.set(e,i),this.allNodesMap.set(e,this.graph.getNode(e))}}),t.forEach(e=>{this.hasEdge(e)?this.allEdgesMap.set(e,this.graph.getEdge(e)):this.allEdgesMap.delete(e)})};startAutoCache(){this.refreshCache(),this.graph.on(`changed`,this.handleGraphChanged)}stopAutoCache(){this.graph.off(`changed`,this.handleGraphChanged)}handleGraphChanged=e=>{let t=new Set;e.changes.forEach(n=>{switch(n.type){case`NodeAdded`:t.add(n.value.id);break;case`NodeDataUpdated`:t.add(n.id);break;case`EdgeAdded`:t.add(n.value.source),t.add(n.value.target);break;case`EdgeUpdated`:(n.propertyName===`source`||n.propertyName===`target`)&&(t.add(n.oldValue),t.add(n.newValue));break;case`EdgeDataUpdated`:if(e.graph.hasEdge(n.id)){let r=e.graph.getEdge(n.id);t.add(r.source),t.add(r.target)}break;case`EdgeRemoved`:t.add(n.value.source),t.add(n.value.target);break;case`NodeRemoved`:t.add(n.value.id);break;default:break}}),this.updateCache(t)};checkNodeExistence(e){this.getNode(e)}hasNode(e){if(!this.graph.hasNode(e))return!1;let t=this.graph.getNode(e);return this.nodeFilter(t)}areNeighbors(e,t){return this.checkNodeExistence(e),this.getNeighbors(t).some(t=>t.id===e)}getNode(e){let t=this.graph.getNode(e);if(!this.nodeFilter(t))throw Error(`Node not found for id: `+e);return t}getRelatedEdges(e,t){return this.checkNodeExistence(e),this.cacheEnabled?t===`in`?this.inEdgesMap.get(e):t===`out`?this.outEdgesMap.get(e):this.bothEdgesMap.get(e):this.graph.getRelatedEdges(e,t).filter(this.edgeFilter)}getDegree(e,t){return this.getRelatedEdges(e,t).length}getSuccessors(e){let t=this.getRelatedEdges(e,`out`).map(e=>this.getNode(e.target));return Array.from(new Set(t))}getPredecessors(e){let t=this.getRelatedEdges(e,`in`).map(e=>this.getNode(e.source));return Array.from(new Set(t))}getNeighbors(e){let t=this.getPredecessors(e),n=this.getSuccessors(e);return Array.from(new Set([...t,...n]))}hasEdge(e){if(!this.graph.hasEdge(e))return!1;let t=this.graph.getEdge(e);return this.edgeFilter(t)}getEdge(e){let t=this.graph.getEdge(e);if(!this.edgeFilter(t))throw Error(`Edge not found for id: `+e);return t}getEdgeDetail(e){let t=this.getEdge(e);return{edge:t,source:this.getNode(t.source),target:this.getNode(t.target)}}hasTreeStructure(e){return this.graph.hasTreeStructure(e)}getRoots(e){return this.graph.getRoots(e).filter(this.nodeFilter)}getChildren(e,t){return this.checkNodeExistence(e),this.graph.getChildren(e,t).filter(this.nodeFilter)}getParent(e,t){this.checkNodeExistence(e);let n=this.graph.getParent(e,t);return!n||!this.nodeFilter(n)?null:n}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(e,t,n=`out`){let r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];g([this.getNode(e)],new Set,t,r)}dfs(e,t,n=`out`){let r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];_(this.getNode(e),new Set,t,r)}},b=class e extends h{nodeMap=new Map;edgeMap=new Map;inEdgesMap=new Map;outEdgesMap=new Map;bothEdgesMap=new Map;treeIndices=new Map;changes=[];batchCount=0;onChanged=()=>{};constructor(e){super(),e&&(e.nodes&&this.addNodes(e.nodes),e.edges&&this.addEdges(e.edges),e.tree&&this.addTree(e.tree),e.onChanged&&(this.onChanged=e.onChanged))}batch=e=>{this.batchCount+=1,e(),--this.batchCount,this.batchCount||this.commit()};commit(){let e=this.changes;this.changes=[];let t={graph:this,changes:e};this.emit(`changed`,t),this.onChanged(t)}reduceChanges(e){let t=[];return e.forEach(e=>{switch(e.type){case`NodeRemoved`:{let n=!1;t=t.filter(t=>{if(t.type===`NodeAdded`){let r=t.value.id===e.value.id;return r&&(n=!0),!r}else if(t.type===`NodeDataUpdated`)return t.id!==e.value.id;else if(t.type===`TreeStructureChanged`)return t.nodeId!==e.value.id;return!0}),n||t.push(e);break}case`EdgeRemoved`:{let n=!1;t=t.filter(t=>{if(t.type===`EdgeAdded`){let r=t.value.id===e.value.id;return r&&(n=!0),!r}else if(t.type===`EdgeDataUpdated`||t.type===`EdgeUpdated`)return t.id!==e.value.id;return!0}),n||t.push(e);break}case`NodeDataUpdated`:case`EdgeDataUpdated`:case`EdgeUpdated`:{let n=t.findIndex(t=>t.type===e.type&&t.id===e.id&&(e.propertyName===void 0||t.propertyName===e.propertyName)),r=t[n];r?e.propertyName===void 0?(t.splice(n,1),t.push(e)):r.newValue=e.newValue:t.push(e);break}case`TreeStructureDetached`:t=t.filter(t=>t.type===`TreeStructureAttached`||t.type===`TreeStructureChanged`?t.treeKey!==e.treeKey:!0),t.push(e);break;case`TreeStructureChanged`:{let n=t.find(t=>t.type===`TreeStructureChanged`&&t.treeKey===e.treeKey&&t.nodeId===e.nodeId);n?n.newParentId=e.newParentId:t.push(e);break}default:t.push(e);break}}),t}checkNodeExistence(e){this.getNode(e)}hasNode(e){return this.nodeMap.has(e)}areNeighbors(e,t){return this.getNeighbors(t).some(t=>t.id===e)}getNode(e){let t=this.nodeMap.get(e);if(!t)throw Error(`Node not found for id: `+e);return t}getRelatedEdges(e,t){if(this.checkNodeExistence(e),t===`in`){let t=this.inEdgesMap.get(e);return Array.from(t)}else if(t===`out`){let t=this.outEdgesMap.get(e);return Array.from(t)}else{let t=this.bothEdgesMap.get(e);return Array.from(t)}}getDegree(e,t){return this.getRelatedEdges(e,t).length}getSuccessors(e){let t=this.getRelatedEdges(e,`out`).map(e=>this.getNode(e.target));return Array.from(new Set(t))}getPredecessors(e){let t=this.getRelatedEdges(e,`in`).map(e=>this.getNode(e.source));return Array.from(new Set(t))}getNeighbors(e){let t=this.getPredecessors(e),n=this.getSuccessors(e);return Array.from(new Set([...t,...n]))}doAddNode(e){if(this.hasNode(e.id))throw Error(`Node already exists: `+e.id);this.nodeMap.set(e.id,e),this.inEdgesMap.set(e.id,new Set),this.outEdgesMap.set(e.id,new Set),this.bothEdgesMap.set(e.id,new Set),this.treeIndices.forEach(t=>{t.childrenMap.set(e.id,new Set)}),this.changes.push({type:`NodeAdded`,value:e})}addNodes(e){this.batch(()=>{for(let t of e)this.doAddNode(t)})}addNode(e){this.addNodes([e])}doRemoveNode(e){let t=this.getNode(e);this.bothEdgesMap.get(e)?.forEach(e=>this.doRemoveEdge(e.id)),this.nodeMap.delete(e),this.treeIndices.forEach(n=>{n.childrenMap.get(e)?.forEach(e=>{n.parentMap.delete(e.id)});let r=n.parentMap.get(e);r&&n.childrenMap.get(r.id)?.delete(t),n.parentMap.delete(e),n.childrenMap.delete(e)}),this.bothEdgesMap.delete(e),this.inEdgesMap.delete(e),this.outEdgesMap.delete(e),this.changes.push({type:`NodeRemoved`,value:t})}removeNodes(e){this.batch(()=>{e.forEach(e=>this.doRemoveNode(e))})}removeNode(e){this.removeNodes([e])}updateNodeDataProperty(e,t,n){let r=this.getNode(e);this.batch(()=>{let i=r.data[t],a=n;r.data[t]=a,this.changes.push({type:`NodeDataUpdated`,id:e,propertyName:t,oldValue:i,newValue:a})})}mergeNodeData(e,t){this.batch(()=>{Object.entries(t).forEach(([t,n])=>{this.updateNodeDataProperty(e,t,n)})})}updateNodeData(...e){let t=e[0],n=this.getNode(t);if(typeof e[1]==`string`){this.updateNodeDataProperty(t,e[1],e[2]);return}let r;if(typeof e[1]==`function`){let t=e[1];r=t(n.data)}else typeof e[1]==`object`&&(r=e[1]);this.batch(()=>{let e=n.data,i=r;n.data=r,this.changes.push({type:`NodeDataUpdated`,id:t,oldValue:e,newValue:i})})}checkEdgeExistence(e){if(!this.hasEdge(e))throw Error(`Edge not found for id: `+e)}hasEdge(e){return this.edgeMap.has(e)}getEdge(e){return this.checkEdgeExistence(e),this.edgeMap.get(e)}getEdgeDetail(e){let t=this.getEdge(e);return{edge:t,source:this.getNode(t.source),target:this.getNode(t.target)}}doAddEdge(e){if(this.hasEdge(e.id))throw Error(`Edge already exists: `+e.id);this.checkNodeExistence(e.source),this.checkNodeExistence(e.target),this.edgeMap.set(e.id,e);let t=this.inEdgesMap.get(e.target),n=this.outEdgesMap.get(e.source),r=this.bothEdgesMap.get(e.source),i=this.bothEdgesMap.get(e.target);t.add(e),n.add(e),r.add(e),i.add(e),this.changes.push({type:`EdgeAdded`,value:e})}addEdges(e){this.batch(()=>{for(let t of e)this.doAddEdge(t)})}addEdge(e){this.addEdges([e])}doRemoveEdge(e){let t=this.getEdge(e),n=this.outEdgesMap.get(t.source),r=this.inEdgesMap.get(t.target),i=this.bothEdgesMap.get(t.source),a=this.bothEdgesMap.get(t.target);n.delete(t),r.delete(t),i.delete(t),a.delete(t),this.edgeMap.delete(e),this.changes.push({type:`EdgeRemoved`,value:t})}removeEdges(e){this.batch(()=>{e.forEach(e=>this.doRemoveEdge(e))})}removeEdge(e){this.removeEdges([e])}updateEdgeSource(e,t){let n=this.getEdge(e);this.checkNodeExistence(t);let r=n.source,i=t;this.outEdgesMap.get(r).delete(n),this.bothEdgesMap.get(r).delete(n),this.outEdgesMap.get(i).add(n),this.bothEdgesMap.get(i).add(n),n.source=t,this.batch(()=>{this.changes.push({type:`EdgeUpdated`,id:e,propertyName:`source`,oldValue:r,newValue:i})})}updateEdgeTarget(e,t){let n=this.getEdge(e);this.checkNodeExistence(t);let r=n.target,i=t;this.inEdgesMap.get(r).delete(n),this.bothEdgesMap.get(r).delete(n),this.inEdgesMap.get(i).add(n),this.bothEdgesMap.get(i).add(n),n.target=t,this.batch(()=>{this.changes.push({type:`EdgeUpdated`,id:e,propertyName:`target`,oldValue:r,newValue:i})})}updateEdgeDataProperty(e,t,n){let r=this.getEdge(e);this.batch(()=>{let i=r.data[t],a=n;r.data[t]=a,this.changes.push({type:`EdgeDataUpdated`,id:e,propertyName:t,oldValue:i,newValue:a})})}updateEdgeData(...e){let t=e[0],n=this.getEdge(t);if(typeof e[1]==`string`){this.updateEdgeDataProperty(t,e[1],e[2]);return}let r;if(typeof e[1]==`function`){let t=e[1];r=t(n.data)}else typeof e[1]==`object`&&(r=e[1]);this.batch(()=>{let e=n.data,i=r;n.data=r,this.changes.push({type:`EdgeDataUpdated`,id:t,oldValue:e,newValue:i})})}mergeEdgeData(e,t){this.batch(()=>{Object.entries(t).forEach(([t,n])=>{this.updateEdgeDataProperty(e,t,n)})})}checkTreeExistence(e){if(!this.hasTreeStructure(e))throw Error(`Tree structure not found for treeKey: `+e)}hasTreeStructure(e){return this.treeIndices.has(e)}attachTreeStructure(e){this.treeIndices.has(e)||(this.treeIndices.set(e,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:`TreeStructureAttached`,treeKey:e})}))}detachTreeStructure(e){this.checkTreeExistence(e),this.treeIndices.delete(e),this.batch(()=>{this.changes.push({type:`TreeStructureDetached`,treeKey:e})})}addTree(e,t){this.batch(()=>{this.attachTreeStructure(t);let n=[],r=Array.isArray(e)?e:[e];for(;r.length;){let e=r.shift();n.push(e),e.children&&r.push(...e.children)}this.addNodes(n),n.forEach(e=>{e.children?.forEach(n=>{this.setParent(n.id,e.id,t)})})})}getRoots(e){return this.checkTreeExistence(e),this.getAllNodes().filter(t=>!this.getParent(t.id,e))}getChildren(e,t){this.checkNodeExistence(e),this.checkTreeExistence(t);let n=this.treeIndices.get(t).childrenMap.get(e);return Array.from(n||[])}getParent(e,t){return this.checkNodeExistence(e),this.checkTreeExistence(t),this.treeIndices.get(t).parentMap.get(e)||null}getAncestors(e,t){let n=[],r=this.getNode(e),i;for(;i=this.getParent(r.id,t);)n.push(i),r=i;return n}setParent(e,t,n){this.checkTreeExistence(n);let r=this.treeIndices.get(n);if(!r)return;let i=this.getNode(e),a=r.parentMap.get(e);if(a?.id===t)return;if(t==null){a&&r.childrenMap.get(a.id)?.delete(i),r.parentMap.delete(e);return}let o=this.getNode(t);r.parentMap.set(e,o),a&&r.childrenMap.get(a.id)?.delete(i);let s=r.childrenMap.get(o.id);s||(s=new Set,r.childrenMap.set(o.id,s)),s.add(i),this.batch(()=>{this.changes.push({type:`TreeStructureChanged`,treeKey:n,nodeId:e,oldParentId:a?.id,newParentId:o.id})})}dfsTree(e,t,n){return _(this.getNode(e),new Set,t,e=>this.getChildren(e,n))}bfsTree(e,t,n){return g([this.getNode(e)],new Set,t,e=>this.getChildren(e,n))}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(e,t,n=`out`){let r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return g([this.getNode(e)],new Set,t,r)}dfs(e,t,n=`out`){let r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return _(this.getNode(e),new Set,t,r)}clone(){let t=this.getAllNodes().map(e=>({...e,data:{...e.data}})),n=this.getAllEdges().map(e=>({...e,data:{...e.data}})),r=new e({nodes:t,edges:n});return this.treeIndices.forEach(({parentMap:e,childrenMap:t},n)=>{let i=new Map;e.forEach((e,t)=>{i.set(t,r.getNode(e.id))});let a=new Map;t.forEach((e,t)=>{a.set(t,new Set(Array.from(e).map(e=>r.getNode(e.id))))}),r.treeIndices.set(n,{parentMap:i,childrenMap:a})}),r}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(e){return new y({graph:this,...e})}};
/**
* @license
* Copyright 2019 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/
let x=Symbol(`Comlink.proxy`),S=Symbol(`Comlink.endpoint`),C=Symbol(`Comlink.releaseProxy`),w=Symbol(`Comlink.finalizer`),T=Symbol(`Comlink.thrown`),E=e=>typeof e==`object`&&!!e||typeof e==`function`,D=new Map([[`proxy`,{canHandle:e=>E(e)&&e[x],serialize(e){let{port1:t,port2:n}=new MessageChannel;return k(e,t),[n,[n]]},deserialize(e){return e.start(),ee(e)}}],[`throw`,{canHandle:e=>E(e)&&T in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(Error(e.value.message),e.value):e.value}}]]);function O(e,t){for(let n of e)if(t===n||n===`*`||n instanceof RegExp&&n.test(t))return!0;return!1}function k(e,t=globalThis,n=[`*`]){t.addEventListener(`message`,function r(i){if(!i||!i.data)return;if(!O(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}let{id:a,type:o,path:s}=Object.assign({path:[]},i.data),c=(i.data.argumentList||[]).map(z),l;try{let t=s.slice(0,-1).reduce((e,t)=>e[t],e),n=s.reduce((e,t)=>e[t],e);switch(o){case`GET`:l=n;break;case`SET`:t[s.slice(-1)[0]]=z(i.data.value),l=!0;break;case`APPLY`:l=n.apply(t,c);break;case`CONSTRUCT`:{let e=new n(...c);l=ae(e)}break;case`ENDPOINT`:{let{port1:t,port2:n}=new MessageChannel;k(e,n),l=R(t,[t])}break;case`RELEASE`:l=void 0;break;default:return}}catch(e){l={value:e,[T]:0}}Promise.resolve(l).catch(e=>({value:e,[T]:0})).then(n=>{let[i,s]=oe(n);t.postMessage(Object.assign(Object.assign({},i),{id:a}),s),o===`RELEASE`&&(t.removeEventListener(`message`,r),j(t),w in e&&typeof e[w]==`function`&&e[w]())}).catch(e=>{let[n,r]=oe({value:TypeError(`Unserializable return value`),[T]:0});t.postMessage(Object.assign(Object.assign({},n),{id:a}),r)})}),t.start&&t.start()}function A(e){return e.constructor.name===`MessagePort`}function j(e){A(e)&&e.close()}function ee(e,t){let n=new Map;return e.addEventListener(`message`,function(e){let{data:t}=e;if(!t||!t.id)return;let r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}}),ne(e,n,[],t)}function M(e){if(e)throw Error(`Proxy has been released and is not useable`)}function N(e){return se(e,new Map,{type:`RELEASE`}).then(()=>{j(e)})}let P=new WeakMap,F=`FinalizationRegistry`in globalThis&&new FinalizationRegistry(e=>{let t=(P.get(e)||0)-1;P.set(e,t),t===0&&N(e)});function I(e,t){let n=(P.get(t)||0)+1;P.set(t,n),F&&F.register(e,t,e)}function te(e){F&&F.unregister(e)}function ne(e,t,n=[],r=function(){}){let i=!1,a=new Proxy(r,{get(r,o){if(M(i),o===C)return()=>{te(a),N(e),t.clear(),i=!0};if(o===`then`){if(n.length===0)return{then:()=>a};let r=se(e,t,{type:`GET`,path:n.map(e=>e.toString())}).then(z);return r.then.bind(r)}return ne(e,t,[...n,o])},set(r,a,o){M(i);let[s,c]=oe(o);return se(e,t,{type:`SET`,path:[...n,a].map(e=>e.toString()),value:s},c).then(z)},apply(r,a,o){M(i);let s=n[n.length-1];if(s===S)return se(e,t,{type:`ENDPOINT`}).then(z);if(s===`bind`)return ne(e,t,n.slice(0,-1));let[c,l]=re(o);return se(e,t,{type:`APPLY`,path:n.map(e=>e.toString()),argumentList:c},l).then(z)},construct(r,a){M(i);let[o,s]=re(a);return se(e,t,{type:`CONSTRUCT`,path:n.map(e=>e.toString()),argumentList:o},s).then(z)}});return I(a,e),a}function L(e){return Array.prototype.concat.apply([],e)}function re(e){let t=e.map(oe);return[t.map(e=>e[0]),L(t.map(e=>e[1]))]}let ie=new WeakMap;function R(e,t){return ie.set(e,t),e}function ae(e){return Object.assign(e,{[x]:!0})}function oe(e){for(let[t,n]of D)if(n.canHandle(e)){let[r,i]=n.serialize(e);return[{type:`HANDLER`,name:t,value:r},i]}return[{type:`RAW`,value:e},ie.get(e)||[]]}function z(e){switch(e.type){case`HANDLER`:return D.get(e.name).deserialize(e.value);case`RAW`:return e.value}}function se(e,t,n,r){return new Promise(i=>{let a=ce();t.set(a,i),e.start&&e.start(),e.postMessage(Object.assign({id:a},n),r)})}function ce(){return[,,,,].fill(0).map(()=>Math.floor(Math.random()*(2**53-1)).toString(16)).join(`-`)}function le(e){return typeof e==`function`}function ue(e){return e==null}function de(e){return Array.isArray(e)}var fe=(function(e){var t=typeof e;return e!==null&&t===`object`||t===`function`});function B(e,t){if(e){var n;if(de(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(fe(e)){for(var a in e)if(e.hasOwnProperty(a)&&(n=t(e[a],a),n===!1))break}}}var pe=B,me=function(e){return typeof e==`object`&&!!e},he={}.toString,V=function(e,t){return he.call(e)===`[object `+t+`]`},ge=function(e){if(!me(e)||!V(e,`Object`))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function _e(e){return typeof e==`string`}function H(e){return typeof e==`number`}var ve=function(e){if(typeof e!=`object`||!e)return e;var t;if(de(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]==`object`&&e[n]!=null?t[n]=ve(e[n]):t[n]=e[n]}else for(var i in t={},e)typeof e[i]==`object`&&e[i]!=null?t[i]=ve(e[i]):t[i]=e[i];return t},ye=ve,be=5;function xe(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(e==null)throw TypeError(`Cannot convert undefined or null to object`);return Object.prototype.hasOwnProperty.call(Object(e),t)}function Se(e,t,n,r){for(var i in n||=0,r||=be,t)if(xe(t,i)){var a=t[i];a!==null&&ge(a)?(ge(e[i])||(e[i]={}),n<r?Se(e[i],a,n+1,r):e[i]=t[i]):de(a)?(e[i]=[],e[i]=e[i].concat(a)):a!==void 0&&(e[i]=a)}}var Ce=function(e){for(var t=[...arguments].slice(1),n=0;n<t.length;n+=1)Se(e,t[n]);return e},we=Object.prototype.hasOwnProperty,Te=(function(e,t){if(e===null||!ge(e))return{};var n={};return pe(t,function(t){we.call(e,t)&&(n[t]=e[t])}),n});let Ee=(e,t)=>{if(e!==`next`&&e!==`prev`)return t},De=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};var Oe=class{constructor(){let e={};e.prev=e,e.next=e.prev,this.shortcut=e}dequeue(){let e=this.shortcut,t=e.prev;if(t&&t!==e)return De(t),t}enqueue(e){let t=this.shortcut;e.prev&&e.next&&De(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t}toString(){let e=[],t=this.shortcut,n=t.prev;for(;n!==t;)e.push(JSON.stringify(n,Ee)),n=n?.prev;return`[${e.join(`, `)}]`}},ke=class extends Oe{};let Ae=()=>1,je=(e,t)=>{if(e.getAllNodes().length<=1)return[];let n=Pe(e,t||Ae);return Me(n.graph,n.buckets,n.zeroIdx).map(t=>e.getRelatedEdges(t.v,`out`).filter(({target:e})=>e===t.w))?.flat()},Me=(e,t,n)=>{let r=[],i=t[t.length-1],a=t[0],o;for(;e.getAllNodes().length;){for(;o=a.dequeue();)Ne(e,t,n,o);for(;o=i.dequeue();)Ne(e,t,n,o);if(e.getAllNodes().length){for(let i=t.length-2;i>0;--i)if(o=t[i].dequeue(),o){r=r.concat(Ne(e,t,n,o,!0));break}}}return r},Ne=(e,t,n,r,i)=>{var a,o;let s=[];return e.hasNode(r.v)&&((a=e.getRelatedEdges(r.v,`in`))==null||a.forEach(r=>{let a=r.data.weight,o=e.getNode(r.source);i&&s.push({v:r.source,w:r.target,in:0,out:0}),o.data.out===void 0&&(o.data.out=0),o.data.out-=a,Fe(t,n,Object.assign({v:o.id},o.data))}),(o=e.getRelatedEdges(r.v,`out`))==null||o.forEach(r=>{let i=r.data.weight,a=r.target,o=e.getNode(a);o.data.in===void 0&&(o.data.in=0),o.data.in-=i,Fe(t,n,Object.assign({v:o.id},o.data))}),e.removeNode(r.v)),i?s:void 0},Pe=(e,t)=>{let n=new b,r=0,i=0;e.getAllNodes().forEach(e=>{n.addNode({id:e.id,data:{v:e.id,in:0,out:0}})}),e.getAllEdges().forEach(e=>{let a=n.getRelatedEdges(e.source,`out`).find(t=>t.target===e.target),o=t?.(e)||1;a?n.updateEdgeData(a?.id,Object.assign(Object.assign({},a.data),{weight:a.data.weight+o})):n.addEdge({id:e.id,source:e.source,target:e.target,data:{weight:o}}),i=Math.max(i,n.getNode(e.source).data.out+=o),r=Math.max(r,n.getNode(e.target).data.in+=o)});let a=[],o=i+r+3;for(let e=0;e<o;e++)a.push(new ke);let s=r+1;return n.getAllNodes().forEach(e=>{Fe(a,s,Object.assign({v:e.id},n.getNode(e.id).data))}),{buckets:a,zeroIdx:s,graph:n}},Fe=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},Ie=(e,t)=>{(t===`greedy`?je(e,(e=>e=>e.data.weight||1)(e)):Le(e))?.forEach(t=>{let n=t.data;e.removeEdge(t.id),n.forwardName=t.data.name,n.reversed=!0,e.addEdge({id:t.id,source:t.target,target:t.source,data:Object.assign({},n)})})},Le=e=>{let t=[],n={},r={},i=a=>{r[a]||(r[a]=!0,n[a]=!0,e.getRelatedEdges(a,`out`).forEach(e=>{n[e.target]?t.push(e):i(e.target)}),delete n[a])};return e.getAllNodes().forEach(e=>i(e.id)),t},Re=e=>{e.getAllEdges().forEach(t=>{let n=t.data;if(n.reversed){e.removeEdge(t.id);let r=n.forwardName;delete n.reversed,delete n.forwardName,e.addEdge({id:t.id,source:t.target,target:t.source,data:Object.assign(Object.assign({},n),{forwardName:r})})}})},ze=(e,t)=>Number(e)-Number(t),Be=(e,t,n,r)=>{let i;do i=`${r}${Math.random()}`;while(e.hasNode(i));return n.dummy=t,e.addNode({id:i,data:n}),i},Ve=e=>{let t=new b;return e.getAllNodes().forEach(e=>{t.addNode(Object.assign({},e))}),e.getAllEdges().forEach(e=>{let n=t.getRelatedEdges(e.source,`out`).find(t=>t.target===e.target);n?t.updateEdgeData(n?.id,Object.assign(Object.assign({},n.data),{weight:n.data.weight+e.data.weight||0,minlen:Math.max(n.data.minlen,e.data.minlen||1)})):t.addEdge({id:e.id,source:e.source,target:e.target,data:{weight:e.data.weight||0,minlen:e.data.minlen||1}})}),t},He=e=>{let t=new b;return e.getAllNodes().forEach(n=>{e.getChildren(n.id).length||t.addNode(Object.assign({},n))}),e.getAllEdges().forEach(e=>{t.addEdge(e)}),t},Ue=(e,t)=>e?.reduce((e,n,r)=>(e[n]=t[r],e),{}),We=(e,t)=>{let n=Number(e.x),r=Number(e.y),i=Number(t.x)-n,a=Number(t.y)-r,o=Number(e.width)/2,s=Number(e.height)/2;if(!i&&!a)return{x:0,y:0};let c,l;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),c=s*i/a,l=s):(i<0&&(o=-o),c=o,l=o*a/i),{x:n+c,y:r+l}},Ge=e=>{let t=[],n=Ye(e)+1;for(let e=0;e<n;e++)t.push([]);e.getAllNodes().forEach(e=>{let n=e.data.rank;n!==void 0&&t[n]&&t[n].push(e.id)});for(let r=0;r<n;r++)t[r]=t[r].sort((t,n)=>ze(e.getNode(t).data.order,e.getNode(n).data.order));return t},Ke=e=>{let t=e.getAllNodes().filter(e=>e.data.rank!==void 0).map(e=>e.data.rank),n=Math.min(...t);e.getAllNodes().forEach(e=>{e.data.hasOwnProperty(`rank`)&&n!==1/0&&(e.data.rank-=n)})},qe=(e,t=0)=>{let n=e.getAllNodes(),r=n.filter(e=>e.data.rank!==void 0).map(e=>e.data.rank),i=Math.min(...r),a=[];n.forEach(e=>{let t=(e.data.rank||0)-i;a[t]||(a[t]=[]),a[t].push(e.id)});let o=0;for(let n=0;n<a.length;n++){let r=a[n];r===void 0?n%t!==0&&--o:o&&r?.forEach(t=>{let n=e.getNode(t);n&&(n.data.rank=n.data.rank||0,n.data.rank+=o)})}},Je=(e,t,n,r)=>{let i={width:0,height:0};return H(n)&&H(r)&&(i.rank=n,i.order=r),Be(e,`border`,i,t)},Ye=e=>{let t;return e.getAllNodes().forEach(e=>{let n=e.data.rank;n!==void 0&&(t===void 0||n>t)&&(t=n)}),t||=0,t},Xe=(e,t)=>{let n={lhs:[],rhs:[]};return e?.forEach(e=>{t(e)?n.lhs.push(e):n.rhs.push(e)}),n},Ze=(e,t)=>e.reduce((e,n)=>{let r=t(e),i=t(n);return r>i?n:e}),Qe=(e,t,n,r,i,a)=>{r.includes(t.id)||(r.push(t.id),n||a.push(t.id),i(t.id).forEach(t=>Qe(e,t,n,r,i,a)),n&&a.push(t.id))},$e=(e,t,n,r)=>{let i=Array.isArray(t)?t:[t],a=t=>r?e.getSuccessors(t):e.getNeighbors(t),o=[],s=[];return i.forEach(t=>{if(e.hasNode(t.id))Qe(e,t,n===`post`,s,a,o);else throw Error(`Graph does not have node: ${t}`)}),o},et=e=>{let t=n=>{let r=e.getChildren(n),i=e.getNode(n);if(r?.length&&r.forEach(e=>t(e.id)),i.data.hasOwnProperty(`minRank`)){i.data.borderLeft=[],i.data.borderRight=[];for(let t=i.data.minRank,r=i.data.maxRank+1;t<r;t+=1)tt(e,`borderLeft`,`_bl`,n,i,t),tt(e,`borderRight`,`_br`,n,i,t)}};e.getRoots().forEach(e=>t(e.id))},tt=(e,t,n,r,i,a)=>{let o={rank:a,borderType:t,width:0,height:0},s=i.data[t][a-1],c=Be(e,`border`,o,n);i.data[t][a]=c,e.setParent(c,r),s&&e.addEdge({id:`e${Math.random()}`,source:s,target:c,data:{weight:1}})},nt=(e,t)=>{let n=t.toLowerCase();(n===`lr`||n===`rl`)&&it(e)},rt=(e,t)=>{let n=t.toLowerCase();(n===`bt`||n===`rl`)&&ot(e),(n===`lr`||n===`rl`)&&(ct(e),it(e))},it=e=>{e.getAllNodes().forEach(e=>{at(e)}),e.getAllEdges().forEach(e=>{at(e)})},at=e=>{let t=e.data.width;e.data.width=e.data.height,e.data.height=t},ot=e=>{e.getAllNodes().forEach(e=>{st(e.data)}),e.getAllEdges().forEach(e=>{var t;(t=e.data.points)==null||t.forEach(e=>st(e)),e.data.hasOwnProperty(`y`)&&st(e.data)})},st=e=>{e?.y&&(e.y=-e.y)},ct=e=>{e.getAllNodes().forEach(e=>{lt(e.data)}),e.getAllEdges().forEach(e=>{var t;(t=e.data.points)==null||t.forEach(e=>lt(e)),e.data.hasOwnProperty(`x`)&&lt(e.data)})},lt=e=>{let t=e.x;e.x=e.y,e.y=t},ut=e=>{let t=Be(e,`root`,{},`_root`),n=ft(e),r=Math.max(...Object.values(n));Math.abs(r)===1/0&&(r=1);let i=r-1,a=2*i+1;e.getAllEdges().forEach(e=>{e.data.minlen*=a});let o=pt(e)+1;return e.getRoots().forEach(r=>{dt(e,t,a,o,i,n,r.id)}),{nestingRoot:t,nodeRankFactor:a}},dt=(e,t,n,r,i,a,o)=>{let s=e.getChildren(o);if(!s?.length){o!==t&&e.addEdge({id:`e${Math.random()}`,source:t,target:o,data:{weight:0,minlen:n}});return}let c=Je(e,`_bt`),l=Je(e,`_bb`),u=e.getNode(o);e.setParent(c,o),u.data.borderTop=c,e.setParent(l,o),u.data.borderBottom=l,s?.forEach(s=>{dt(e,t,n,r,i,a,s.id);let u=s.data.borderTop?s.data.borderTop:s.id,d=s.data.borderBottom?s.data.borderBottom:s.id,f=s.data.borderTop?r:2*r,p=u===d?i-a[o]+1:1;e.addEdge({id:`e${Math.random()}`,source:c,target:u,data:{minlen:p,weight:f,nestingEdge:!0}}),e.addEdge({id:`e${Math.random()}`,source:d,target:l,data:{minlen:p,weight:f,nestingEdge:!0}})}),e.getParent(o)||e.addEdge({id:`e${Math.random()}`,source:t,target:c,data:{weight:0,minlen:i+a[o]}})},ft=e=>{let t={},n=(r,i)=>{e.getChildren(r)?.forEach(e=>n(e.id,i+1)),t[r]=i};return e.getRoots().forEach(e=>n(e.id,1)),t},pt=e=>{let t=0;return e.getAllEdges().forEach(e=>{t+=e.data.weight}),t},mt=(e,t)=>{t&&e.removeNode(t),e.getAllEdges().forEach(t=>{t.data.nestingEdge&&e.removeEdge(t.id)})},ht=`edge-label`,gt=(e,t)=>{e.getAllEdges().forEach(n=>_t(e,n,t))},_t=(e,t,n)=>{let r=t.source,i=e.getNode(r).data.rank,a=t.target,o=e.getNode(a).data.rank,s=t.data.labelRank;if(o===i+1)return;e.removeEdge(t.id);let c,l,u;for(u=0,++i;i<o;++u,++i)t.data.points=[],l={originalEdge:t,width:0,height:0,rank:i},c=Be(e,`edge`,l,`_d`),i===s&&(l.width=t.data.width,l.height=t.data.height,l.dummy=ht,l.labelpos=t.data.labelpos),e.addEdge({id:`e${Math.random()}`,source:r,target:c,data:{weight:t.data.weight}}),u===0&&n.push(c),r=c;e.addEdge({id:`e${Math.random()}`,source:r,target:a,data:{weight:t.data.weight}})},vt=(e,t)=>{t.forEach(t=>{let n=e.getNode(t),{data:r}=n,i=r.originalEdge,a;i&&e.addEdge(i);let o=t;for(;n.data.dummy;)a=e.getSuccessors(o)[0],e.removeNode(o),i.data.points.push({x:n.data.x,y:n.data.y}),n.data.dummy===ht&&(i.data.x=n.data.x,i.data.y=n.data.y,i.data.width=n.data.width,i.data.height=n.data.height),o=a.id,n=e.getNode(o)})},yt=(e,t,n)=>{let r={},i;n?.forEach(n=>{let a=e.getParent(n),o,s;for(;a;){if(o=e.getParent(a.id),o?(s=r[o.id],r[o.id]=a.id):(s=i,i=a.id),s&&s!==a.id){t.hasNode(s)||t.addNode({id:s,data:{}}),t.hasNode(a.id)||t.addNode({id:a.id,data:{}}),t.hasEdge(`e${s}-${a.id}`)||t.addEdge({id:`e${s}-${a.id}`,source:s,target:a.id,data:{}});return}a=o}})},bt=(e,t,n)=>{let r=xt(e),i=new b({tree:[{id:r,children:[],data:{}}]});return e.getAllNodes().forEach(a=>{let o=e.getParent(a.id);(a.data.rank===t||a.data.minRank<=t&&t<=a.data.maxRank)&&(i.hasNode(a.id)||i.addNode(Object.assign({},a)),o?.id&&!i.hasNode(o?.id)&&i.addNode(Object.assign({},o)),i.setParent(a.id,o?.id||r),e.getRelatedEdges(a.id,n).forEach(t=>{let n=t.source===a.id?t.target:t.source;i.hasNode(n)||i.addNode(Object.assign({},e.getNode(n)));let r=i.getRelatedEdges(n,`out`).find(({target:e})=>e===a.id),o=r===void 0?0:r.data.weight;r?i.updateEdgeData(r.id,Object.assign(Object.assign({},r.data),{weight:t.data.weight+o})):i.addEdge({id:t.id,source:n,target:a.id,data:{weight:t.data.weight+o}})}),a.data.hasOwnProperty(`minRank`)&&i.updateNodeData(a.id,Object.assign(Object.assign({},a.data),{borderLeft:a.data.borderLeft[t],borderRight:a.data.borderRight[t]})))}),i},xt=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},St=(e,t,n)=>{let r=Ue(n,n.map((e,t)=>t)),i=t.map(t=>e.getRelatedEdges(t,`out`).map(e=>({pos:r[e.target]||0,weight:e.data.weight}))?.sort((e,t)=>e.pos-t.pos)).flat().filter(e=>e!==void 0),a=1;for(;a<n.length;)a<<=1;let o=2*a-1;--a;let s=Array(o).fill(0,0,o),c=0;return i?.forEach(e=>{if(e){let t=e.pos+a;s[t]+=e.weight;let n=0;for(;t>0;)t%2&&(n+=s[t+1]),t=t-1>>1,s[t]+=e.weight;c+=e.weight*n}}),c},Ct=(e,t)=>{let n=0;for(let r=1;r<t?.length;r+=1)n+=St(e,t[r-1],t[r]);return n},wt=e=>{let t={},n=e.getAllNodes(),r=n.map(e=>e.data.rank??-1/0),i=Math.max(...r),a=[];for(let e=0;e<i+1;e++)a.push([]);let o=n.sort((t,n)=>e.getNode(t.id).data.rank-e.getNode(n.id).data.rank);return o.filter(t=>e.getNode(t.id).data.fixorder!==void 0).sort((t,n)=>e.getNode(t.id).data.fixorder-e.getNode(n.id).data.fixorder)?.forEach(n=>{isNaN(e.getNode(n.id).data.rank)||a[e.getNode(n.id).data.rank].push(n.id),t[n.id]=!0}),o?.forEach(n=>e.dfsTree(n.id,e=>{if(t.hasOwnProperty(e.id))return!0;t[e.id]=!0,isNaN(e.data.rank)||a[e.data.rank].push(e.id)})),a},Tt=(e,t)=>t.map(t=>{let n=e.getRelatedEdges(t,`in`);if(!n?.length)return{v:t};let r={sum:0,weight:0};return n?.forEach(t=>{let n=e.getNode(t.source);r.sum+=t.data.weight*n.data.order,r.weight+=t.data.weight}),{v:t,barycenter:r.sum/r.weight,weight:r.weight}}),Et=(e,t)=>{var n,r;let i={};e?.forEach((e,t)=>{i[e.v]={i:t,indegree:0,in:[],out:[],vs:[e.v]};let n=i[e.v];e.barycenter!==void 0&&(n.barycenter=e.barycenter,n.weight=e.weight)}),(n=t.getAllEdges())==null||n.forEach(e=>{let t=i[e.source],n=i[e.target];t!==void 0&&n!==void 0&&(n.indegree++,t.out.push(i[e.target]))});let a=(r=Object.values(i)).filter?.call(r,e=>!e.indegree);return Dt(a)},Dt=e=>{var t,n;let r=[],i=e=>t=>{t.merged||(t.barycenter===void 0||e.barycenter===void 0||t.barycenter>=e.barycenter)&&Ot(e,t)},a=t=>n=>{n.in.push(t),--n.indegree===0&&e.push(n)};for(;e?.length;){let o=e.pop();r.push(o),(t=o.in.reverse())==null||t.forEach(e=>i(o)(e)),(n=o.out)==null||n.forEach(e=>a(o)(e))}let o=r.filter(e=>!e.merged),s=[`vs`,`i`,`barycenter`,`weight`];return o.map(e=>{let t={};return s?.forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t})},Ot=(e,t)=>{let n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs?.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0};var kt=Et;let At=(e,t,n,r)=>{let i=Xe(e,e=>{let t=e.hasOwnProperty(`fixorder`)&&!isNaN(e.fixorder);return r?!t&&e.hasOwnProperty(`barycenter`):t||e.hasOwnProperty(`barycenter`)}),a=i.lhs,o=i.rhs.sort((e,t)=>-e.i- -t.i),s=[],c=0,l=0,u=0;a?.sort(Mt(!!t,!!n)),u=jt(s,o,u),a?.forEach(e=>{u+=e.vs?.length,s.push(e.vs),c+=e.barycenter*e.weight,l+=e.weight,u=jt(s,o,u)});let d={vs:s.flat()};return l&&(d.barycenter=c/l,d.weight=l),d},jt=(e,t,n)=>{let r=n,i;for(;t.length&&(i=t[t.length-1]).i<=r;)t.pop(),e?.push(i.vs),r++;return r},Mt=(e,t)=>(n,r)=>{if(n.fixorder!==void 0&&r.fixorder!==void 0)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(t&&n.order!==void 0&&r.order!==void 0){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return e?r.i-n.i:n.i-r.i},Nt=(e,t,n,r,i,a)=>{var o;let s=e.getChildren(t).map(e=>e.id),c=e.getNode(t),l=c?c.data.borderLeft:void 0,u=c?c.data.borderRight:void 0,d={};l&&(s=s?.filter(e=>e!==l&&e!==u));let f=Tt(e,s||[]);f?.forEach(t=>{if(e.getChildren(t.v)?.length){let i=Nt(e,t.v,n,r,a);d[t.v]=i,i.hasOwnProperty(`barycenter`)&&Ft(t,i)}});let p=kt(f,n);Pt(p,d),(o=p.filter(e=>e.vs.length>0))==null||o.forEach(t=>{let n=e.getNode(t.vs[0]);n&&(t.fixorder=n.data.fixorder,t.order=n.data.order)});let m=At(p,r,i,a);if(l&&(m.vs=[l,m.vs,u].flat(),e.getPredecessors(l)?.length)){let t=e.getNode(e.getPredecessors(l)?.[0].id||``),n=e.getNode(e.getPredecessors(u)?.[0].id||``);m.hasOwnProperty(`barycenter`)||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+t.data.order+n.data.order)/(m.weight+2),m.weight+=2}return m},Pt=(e,t)=>{e?.forEach(e=>{e.vs=(e.vs?.map(e=>t[e]?t[e].vs:e)).flat()})},Ft=(e,t)=>{e.barycenter===void 0?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)},It=(e,t)=>{let n=Ye(e),r=[],i=[];for(let e=1;e<n+1;e++)r.push(e);for(let e=n-1;e>-1;e--)i.push(e);let a=Lt(e,r,`in`),o=Lt(e,i,`out`),s=wt(e);zt(e,s);let c=1/0,l;for(let n=0,r=0;r<4;++n,++r){Rt(n%2?a:o,n%4>=2,!1,t),s=Ge(e);let i=Ct(e,s);i<c&&(r=0,l=ye(s),c=i)}s=wt(e),zt(e,s);for(let n=0,r=0;r<4;++n,++r){Rt(n%2?a:o,n%4>=2,!0,t),s=Ge(e);let i=Ct(e,s);i<c&&(r=0,l=ye(s),c=i)}zt(e,l)},Lt=(e,t,n)=>t.map(t=>bt(e,t,n)),Rt=(e,t,n,r)=>{let i=new b;e?.forEach(e=>{let a=e.getRoots()[0].id,o=Nt(e,a,i,t,n,r);for(let t=0;t<o.vs?.length;t++){let n=e.getNode(o.vs[t]);n&&(n.data.order=t)}yt(e,i,o.vs)})},zt=(e,t)=>{t?.forEach(t=>{t?.forEach((t,n)=>{e.getNode(t).data.order=n})})},Bt=(e,t)=>{let n=e.getAllNodes().filter(t=>!e.getChildren(t.id)?.length).map(e=>e.data.rank),r=Math.max(...n),i=[];for(let e=0;e<r+1;e++)i[e]=[];t?.forEach(t=>{let n=e.getNode(t);!n||n.data.dummy||isNaN(n.data.rank)||(n.data.fixorder=i[n.data.rank].length,i[n.data.rank].push(t))})},Vt=e=>{let t={},n=0,r=i=>{let a=n;e.getChildren(i).forEach(e=>r(e.id)),t[i]={low:a,lim:n++}};return e.getRoots().forEach(e=>r(e.id)),t},Ht=(e,t,n,r)=>{let i=[],a=[],o=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),c,l;c=n;do c=e.getParent(c)?.id,i.push(c);while(c&&(t[c].low>o||s>t[c].lim));for(l=c,c=r;c&&c!==l;)a.push(c),c=e.getParent(c)?.id;return{lca:l,path:i.concat(a.reverse())}},Ut=(e,t)=>{let n=Vt(e);t.forEach(t=>{let r=t,i=e.getNode(r),a=i.data.originalEdge;if(!a)return;let o=Ht(e,n,a.source,a.target),s=o.path,c=o.lca,l=0,u=s[l],d=!0;for(;r!==a.target;){if(i=e.getNode(r),d){for(;u!==c&&e.getNode(u)?.data.maxRank<i.data.rank;)l++,u=s[l];u===c&&(d=!1)}if(!d){for(;l<s.length-1&&e.getNode(s[l+1])?.data.minRank<=i.data.rank;)l++;u=s[l]}e.hasNode(u)&&e.setParent(r,u),r=e.getSuccessors(r)[0].id}})},Wt=(e,t)=>{let n={};return t?.length&&t.reduce((t,r)=>{let i=0,a=0,o=t.length,s=r?.[r?.length-1];return r?.forEach((t,c)=>{var l;let u=Kt(e,t),d=u?e.getNode(u.id).data.order:o;(u||t===s)&&((l=r.slice(a,c+1))==null||l.forEach(t=>{var r;(r=e.getPredecessors(t))==null||r.forEach(r=>{let a=e.getNode(r.id),o=a.data.order;(o<i||d<o)&&!(a.data.dummy&&e.getNode(t)?.data.dummy)&&qt(n,r.id,t)})}),a=c+1,i=d)}),r}),n},Gt=(e,t)=>{let n={};function r(t,r,i,a,o){var s;let c;for(let l=r;l<i;l++)c=t[l],e.getNode(c)?.data.dummy&&((s=e.getPredecessors(c))==null||s.forEach(t=>{let r=e.getNode(t.id);r.data.dummy&&(r.data.order<a||r.data.order>o)&&qt(n,t.id,c)}))}function i(e){return JSON.stringify(e.slice(1))}function a(e,t){let n=i(e);t.get(n)||(r(...e),t.set(n,!0))}return t?.length&&t.reduce((t,n)=>{let r=-1,i,o=0,s=new Map;return n?.forEach((c,l)=>{if(e.getNode(c)?.data.dummy===`border`){let t=e.getPredecessors(c)||[];t.length&&(i=e.getNode(t[0].id).data.order,a([n,o,l,r,i],s),o=l,r=i)}a([n,o,n.length,i,t.length],s)}),n}),n},Kt=(e,t)=>{if(e.getNode(t)?.data.dummy)return e.getPredecessors(t)?.find(t=>e.getNode(t.id).data.dummy)},qt=(e,t,n)=>{let r=t,i=n;if(r>i){let e=r;r=i,i=e}let a=e[r];a||(e[r]=a={}),a[i]=!0},Jt=(e,t,n)=>{let r=t,i=n;if(r>i){let e=t;r=i,i=e}return!!e[r]},Yt=(e,t,n,r)=>{let i={},a={},o={};return t?.forEach(e=>{e?.forEach((e,t)=>{i[e]=e,a[e]=e,o[e]=t})}),t?.forEach(e=>{let t=-1;e?.forEach(e=>{let s=r(e).map(e=>e.id);if(s.length){s=s.sort((e,t)=>o[e]-o[t]);let r=(s.length-1)/2;for(let c=Math.floor(r),l=Math.ceil(r);c<=l;++c){let r=s[c];a[e]===e&&t<o[r]&&!Jt(n,e,r)&&(a[r]=e,a[e]=i[e]=i[r],t=o[r])}}})}),{root:i,align:a}},Xt=(e,t,n,r,i,a,o)=>{var s;let c={},l=Zt(e,t,n,i,a,o),u=o?`borderLeft`:`borderRight`,d=(e,t)=>{let n=l.getAllNodes(),r=n.pop(),i={};for(;r;)i[r.id]?e(r.id):(i[r.id]=!0,n.push(r),n=n.concat(t(r.id))),r=n.pop()};return d(e=>{c[e]=(l.getRelatedEdges(e,`in`)||[]).reduce((e,t)=>Math.max(e,(c[t.source]||0)+t.data.weight),0)},l.getPredecessors.bind(l)),d(t=>{let n=(l.getRelatedEdges(t,`out`)||[]).reduce((e,t)=>Math.min(e,(c[t.target]||0)-t.data.weight),1/0),r=e.getNode(t);n!==1/0&&r.data.borderType!==u&&(c[t]=Math.max(c[t],n))},l.getSuccessors.bind(l)),(s=Object.values(r))==null||s.forEach(e=>{c[e]=c[n[e]]}),c},Zt=(e,t,n,r,i,a)=>{let o=new b,s=tn(r,i,a);return t?.forEach(t=>{let r;t?.forEach(t=>{let i=n[t];if(o.hasNode(i)||o.addNode({id:i,data:{}}),r){let a=n[r],c=o.getRelatedEdges(a,`out`).find(e=>e.target===i);c?o.updateEdgeData(c.id,Object.assign(Object.assign({},c.data),{weight:Math.max(s(e,t,r),c.data.weight||0)})):o.addEdge({id:`e${Math.random()}`,source:a,target:i,data:{weight:Math.max(s(e,t,r),0)}})}r=t})}),o},Qt=(e,t)=>Ze(Object.values(t),t=>{var n;let r=-1/0,i=1/0;return(n=Object.keys(t))==null||n.forEach(n=>{let a=t[n],o=nn(e,n)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)}),r-i});function $t(e,t){let n=Object.values(t),r=Math.min(...n),i=Math.max(...n);[`u`,`d`].forEach(n=>{[`l`,`r`].forEach(a=>{let o=n+a,s=e[o],c;if(s===t)return;let l=Object.values(s);c=a===`l`?r-Math.min(...l):i-Math.max(...l),c&&(e[o]={},Object.keys(s).forEach(t=>{e[o][t]=s[t]+c}))})})}let en=(e,t)=>{let n={};return Object.keys(e.ul).forEach(r=>{if(t)n[r]=e[t.toLowerCase()][r];else{let t=Object.values(e).map(e=>e[r]);n[r]=(t[0]+t[1])/2}}),n},tn=(e,t,n)=>(r,i,a)=>{let o=r.getNode(i),s=r.getNode(a),c=0,l=0;if(c+=o.data.width/2,o.data.hasOwnProperty(`labelpos`))switch((o.data.labelpos||``).toLowerCase()){case`l`:l=-o.data.width/2;break;case`r`:l=o.data.width/2;break}if(l&&(c+=n?l:-l),l=0,c+=(o.data.dummy?t:e)/2,c+=(s.data.dummy?t:e)/2,c+=s.data.width/2,s.data.labelpos)switch((s.data.labelpos||``).toLowerCase()){case`l`:l=s.data.width/2;break;case`r`:l=-s.data.width/2;break}return l&&(c+=n?l:-l),l=0,c},nn=(e,t)=>e.getNode(t).data.width||0,rn=(e,t)=>{let{ranksep:n=0}=t||{},r=Ge(e),i=0;r?.forEach(t=>{let r=t.map(t=>e.getNode(t).data.height),a=Math.max(...r,0);t?.forEach(t=>{e.getNode(t).data.y=i+a/2}),i+=a+n})},an=(e,t)=>{let{align:n,nodesep:r=0,edgesep:i=0}=t||{},a=Ge(e),o=Object.assign(Wt(e,a),Gt(e,a)),s={},c=[];[`u`,`d`].forEach(t=>{c=t===`u`?a:Object.values(a).reverse(),[`l`,`r`].forEach(n=>{n===`r`&&(c=c.map(e=>Object.values(e).reverse()));let a=(t===`u`?e.getPredecessors:e.getSuccessors).bind(e),l=Yt(e,c,o,a),u=Xt(e,c,l.root,l.align,r,i,n===`r`);n===`r`&&Object.keys(u).forEach(e=>u[e]=-u[e]),s[t+n]=u})});let l=Qt(e,s);return l&&$t(s,l),en(s,n)},on=(e,t)=>{var n;let r=He(e);rn(r,t);let i=an(r,t);(n=Object.keys(i))==null||n.forEach(e=>{r.getNode(e).data.x=i[e]})},sn=e=>{let t={},n=r=>{var i;let a=e.getNode(r);if(!a)return 0;if(t[r])return a.data.rank;t[r]=!0;let o;return(i=e.getRelatedEdges(r,`out`))==null||i.forEach(e=>{let t=n(e.target),r=e.data.minlen,i=t-r;i&&(o===void 0||i<o)&&(o=i)}),o||=0,a.data.rank=o,o};e.getAllNodes().filter(t=>e.getRelatedEdges(t.id,`in`).length===0).forEach(e=>n(e.id))},cn=e=>{let t={},n,r=i=>{var a;let o=e.getNode(i);if(!o)return 0;if(t[i])return o.data.rank;t[i]=!0;let s;return(a=e.getRelatedEdges(i,`out`))==null||a.forEach(e=>{let t=r(e.target),n=e.data.minlen,i=t-n;i&&(s===void 0||i<s)&&(s=i)}),s||=0,(n===void 0||s<n)&&(n=s),o.data.rank=s,s};e.getAllNodes().filter(t=>e.getRelatedEdges(t.id,`in`).length===0).forEach(e=>{e&&r(e.id)}),n===void 0&&(n=0);let i={},a=(t,n)=>{var r;let o=e.getNode(t),s=isNaN(o.data.layer)?n:o.data.layer;(o.data.rank===void 0||o.data.rank<s)&&(o.data.rank=s),!i[t]&&(i[t]=!0,(r=e.getRelatedEdges(t,`out`))==null||r.forEach(e=>{a(e.target,s+e.data.minlen)}))};e.getAllNodes().forEach(e=>{let t=e.data;t&&(isNaN(t.layer)?t.rank-=n:a(e.id,t.layer))})},ln=(e,t)=>e.getNode(t.target).data.rank-e.getNode(t.source).data.rank-t.data.minlen,un=e=>{let t=new b({tree:[]}),n=e.getAllNodes()[0],r=e.getAllNodes().length;t.addNode(n);let i,a;for(;dn(t,e)<r;)i=mn(t,e),a=t.hasNode(i.source)?ln(e,i):-ln(e,i),hn(t,e,a);return t},dn=(e,t)=>{let n=r=>{t.getRelatedEdges(r,`both`).forEach(i=>{let a=i.source,o=r===a?i.target:a;!e.hasNode(o)&&!ln(t,i)&&(e.addNode({id:o,data:{}}),e.addEdge({id:i.id,source:r,target:o,data:{}}),n(o))})};return e.getAllNodes().forEach(e=>n(e.id)),e.getAllNodes().length},fn=e=>{let t=new b({tree:[]}),n=e.getAllNodes()[0],r=e.getAllNodes().length;t.addNode(n);let i,a;for(;pn(t,e)<r;)i=mn(t,e),a=t.hasNode(i.source)?ln(e,i):-ln(e,i),hn(t,e,a);return t},pn=(e,t)=>{let n=r=>{var i;(i=t.getRelatedEdges(r,`both`))==null||i.forEach(i=>{let a=i.source,o=r===a?i.target:a;!e.hasNode(o)&&(t.getNode(o).data.layer!==void 0||!ln(t,i))&&(e.addNode({id:o,data:{}}),e.addEdge({id:i.id,source:r,target:o,data:{}}),n(o))})};return e.getAllNodes().forEach(e=>n(e.id)),e.getAllNodes().length},mn=(e,t)=>Ze(t.getAllEdges(),n=>e.hasNode(n.source)===e.hasNode(n.target)?1/0:ln(t,n)),hn=(e,t,n)=>{e.getAllNodes().forEach(e=>{let r=t.getNode(e.id);r.data.rank||(r.data.rank=0),r.data.rank+=n})},gn=e=>{let t=Ve(e);sn(t);let n=un(t);bn(n),_n(n,t);let r,i;for(;r=Sn(n);)i=Cn(n,t,r),wn(n,t,r,i)},_n=(e,t)=>{let n=$e(e,e.getAllNodes(),`post`,!1);n=n.slice(0,n?.length-1),n.forEach(n=>{vn(e,t,n)})},vn=(e,t,n)=>{let r=e.getNode(n).data.parent,i=e.getRelatedEdges(n,`both`).find(e=>e.target===r||e.source===r);i.data.cutvalue=yn(e,t,n)},yn=(e,t,n)=>{let r=e.getNode(n).data.parent,i=!0,a=t.getRelatedEdges(n,`out`).find(e=>e.target===r),o=0;return a||=(i=!1,t.getRelatedEdges(r,`out`).find(e=>e.target===n)),o=a.data.weight,t.getRelatedEdges(n,`both`).forEach(t=>{let a=t.source===n,s=a?t.target:t.source;if(s!==r){let r=a===i,c=t.data.weight;if(o+=r?c:-c,En(e,n,s)){let t=e.getRelatedEdges(n,`both`).find(e=>e.source===s||e.target===s).data.cutvalue;o+=r?-t:t}}}),o},bn=(e,t=e.getAllNodes()[0].id)=>{xn(e,{},1,t)},xn=(e,t,n,r,i)=>{var a;let o=n,s=n,c=e.getNode(r);return t[r]=!0,(a=e.getNeighbors(r))==null||a.forEach(n=>{t[n.id]||(s=xn(e,t,s,n.id,r))}),c.data.low=o,c.data.lim=s++,i?c.data.parent=i:delete c.data.parent,s},Sn=e=>e.getAllEdges().find(e=>e.data.cutvalue<0),Cn=(e,t,n)=>{let r=n.source,i=n.target;t.getRelatedEdges(r,`out`).find(e=>e.target===i)||(r=n.target,i=n.source);let a=e.getNode(r),o=e.getNode(i),s=a,c=!1;a.data.lim>o.data.lim&&(s=o,c=!0);let l=t.getAllEdges().filter(t=>c===Dn(e.getNode(t.source),s)&&c!==Dn(e.getNode(t.target),s));return Ze(l,e=>ln(t,e))},wn=(e,t,n,r)=>{let i=e.getRelatedEdges(n.source,`both`).find(e=>e.source===n.target||e.target===n.target);i&&e.removeEdge(i.id),e.addEdge({id:`e${Math.random()}`,source:r.source,target:r.target,data:{}}),bn(e),_n(e,t),Tn(e,t)},Tn=(e,t)=>{let n=e.getAllNodes().find(e=>!e.data.parent),r=$e(e,n,`pre`,!1);r=r.slice(1),r.forEach(n=>{let r=e.getNode(n).data.parent,i=t.getRelatedEdges(n,`out`).find(e=>e.target===r),a=!1;!i&&t.hasNode(r)&&(i=t.getRelatedEdges(r,`out`).find(e=>e.target===n),a=!0),t.getNode(n).data.rank=(t.hasNode(r)&&t.getNode(r).data.rank||0)+(a?i?.data.minlen:-i?.data.minlen)})},En=(e,t,n)=>e.getRelatedEdges(t,`both`).find(e=>e.source===n||e.target===n),Dn=(e,t)=>t.data.low<=e.data.lim&&e.data.lim<=t.data.lim,On=(e,t)=>{switch(t){case`network-simplex`:jn(e);break;case`tight-tree`:An(e);break;case`longest-path`:kn(e);break;default:An(e)}},kn=sn,An=e=>{cn(e),fn(e)},jn=e=>{gn(e)},Mn=(e,t)=>{let{edgeLabelSpace:n,keepNodeOrder:r,prevGraph:i,rankdir:a,ranksep:o}=t;!r&&i&&Pn(e,i);let s=Vn(e);n&&(t.ranksep=Hn(s,{rankdir:a,ranksep:o}));let c;try{c=Nn(s,t)}catch(e){if(e.message===`Not possible to find intersection inside of the rectangle`){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,e);return}throw e}return Fn(e,s),c},Nn=(e,t)=>{let{acyclicer:n,ranker:r,rankdir:i=`tb`,nodeOrder:a,keepNodeOrder:o,align:s,nodesep:c=50,edgesep:l=20,ranksep:u=50}=t;Zn(e),Ie(e,n);let{nestingRoot:d,nodeRankFactor:f}=ut(e);On(He(e),r),Un(e),qe(e,f),mt(e,d),Ke(e),Wn(e),Gn(e);let p=[];gt(e,p),Ut(e,p),et(e),o&&Bt(e,a),It(e,o),Qn(e),nt(e,i),on(e,{align:s,nodesep:c,edgesep:l,ranksep:u}),$n(e),Xn(e),vt(e,p),Jn(e),rt(e,i);let{width:m,height:h}=Kn(e);return qn(e),Yn(e),Re(e),{width:m,height:h}},Pn=(e,t)=>{e.getAllNodes().forEach(n=>{let r=e.getNode(n.id);if(t.hasNode(n.id)){let e=t.getNode(n.id);r.data.fixorder=e.data._order,delete e.data._order}else delete r.data.fixorder})},Fn=(e,t)=>{e.getAllNodes().forEach(n=>{let r=e.getNode(n.id);if(r){let e=t.getNode(n.id);r.data.x=e.data.x,r.data.y=e.data.y,r.data._order=e.data.order,r.data._rank=e.data.rank,t.getChildren(n.id)?.length&&(r.data.width=e.data.width,r.data.height=e.data.height)}}),e.getAllEdges().forEach(n=>{let r=e.getEdge(n.id),i=t.getEdge(n.id);r.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty(`x`)&&(r.data.x=i.data.x,r.data.y=i.data.y)})},In=[`width`,`height`,`layer`,`fixorder`],Ln={width:0,height:0},Rn=[`minlen`,`weight`,`width`,`height`,`labeloffset`],zn={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:`r`},Bn=[`labelpos`],Vn=e=>{let t=new b({tree:[]});return e.getAllNodes().forEach(n=>{let r=tr(e.getNode(n.id).data),i=Object.assign(Object.assign({},Ln),r),a=er(i,In);t.hasNode(n.id)||t.addNode({id:n.id,data:Object.assign({},a)});let o=e.hasTreeStructure(`combo`)?e.getParent(n.id,`combo`):e.getParent(n.id);ue(o)||(t.hasNode(o.id)||t.addNode(Object.assign({},o)),t.setParent(n.id,o.id))}),e.getAllEdges().forEach(n=>{let r=tr(e.getEdge(n.id).data),i={};Bn?.forEach(e=>{r[e]!==void 0&&(i[e]=r[e])}),t.addEdge({id:n.id,source:n.source,target:n.target,data:Object.assign({},zn,er(r,Rn),i)})}),t},Hn=(e,t)=>{let{ranksep:n=0,rankdir:r}=t;return e.getAllNodes().forEach(e=>{isNaN(e.data.layer)||e.data.layer||(e.data.layer=0)}),e.getAllEdges().forEach(e=>{e.data.minlen*=2,e.data.labelpos?.toLowerCase()!==`c`&&(r===`TB`||r===`BT`?e.data.width+=e.data.labeloffset:e.data.height+=e.data.labeloffset)}),n/2},Un=e=>{e.getAllEdges().forEach(t=>{if(t.data.width&&t.data.height){let n=e.getNode(t.source),r=e.getNode(t.target),i={e:t,rank:(r.data.rank-n.data.rank)/2+n.data.rank};Be(e,`edge-proxy`,i,`_ep`)}})},Wn=e=>{let t=0;return e.getAllNodes().forEach(n=>{n.data.borderTop&&(n.data.minRank=e.getNode(n.data.borderTop)?.data.rank,n.data.maxRank=e.getNode(n.data.borderBottom)?.data.rank,t=Math.max(t,n.data.maxRank||-1/0))}),t},Gn=e=>{e.getAllNodes().forEach(t=>{t.data.dummy===`edge-proxy`&&(e.getEdge(t.data.e.id).data.labelRank=t.data.rank,e.removeNode(t.id))})},Kn=(e,t)=>{let n,r=0,i,a=0,{marginx:o=0,marginy:s=0}=t||{},c=e=>{if(!e.data)return;let t=e.data.x,o=e.data.y,s=e.data.width,c=e.data.height;!isNaN(t)&&!isNaN(s)&&(n===void 0&&(n=t-s/2),n=Math.min(n,t-s/2),r=Math.max(r,t+s/2)),!isNaN(o)&&!isNaN(c)&&(i===void 0&&(i=o-c/2),i=Math.min(i,o-c/2),a=Math.max(a,o+c/2))};return e.getAllNodes().forEach(e=>{c(e)}),e.getAllEdges().forEach(e=>{e?.data.hasOwnProperty(`x`)&&c(e)}),n-=o,i-=s,e.getAllNodes().forEach(e=>{e.data.x-=n,e.data.y-=i}),e.getAllEdges().forEach(e=>{var t;(t=e.data.points)==null||t.forEach(e=>{e.x-=n,e.y-=i}),e.data.hasOwnProperty(`x`)&&(e.data.x-=n),e.data.hasOwnProperty(`y`)&&(e.data.y-=i)}),{width:r-n+o,height:a-i+s}},qn=e=>{e.getAllEdges().forEach(t=>{let n=e.getNode(t.source),r=e.getNode(t.target),i,a;t.data.points?(i=t.data.points[0],a=t.data.points[t.data.points.length-1]):(t.data.points=[],i={x:r.data.x,y:r.data.y},a={x:n.data.x,y:n.data.y}),t.data.points.unshift(We(n.data,i)),t.data.points.push(We(r.data,a))})},Jn=e=>{e.getAllEdges().forEach(e=>{if(e.data.hasOwnProperty(`x`))switch((e.data.labelpos===`l`||e.data.labelpos===`r`)&&(e.data.width-=e.data.labeloffset),e.data.labelpos){case`l`:e.data.x-=e.data.width/2+e.data.labeloffset;break;case`r`:e.data.x+=e.data.width/2+e.data.labeloffset;break}})},Yn=e=>{e.getAllEdges().forEach(e=>{var t;e.data.reversed&&((t=e.data.points)==null||t.reverse())})},Xn=e=>{e.getAllNodes().forEach(t=>{if(e.getChildren(t.id)?.length){let n=e.getNode(t.id),r=e.getNode(n.data.borderTop),i=e.getNode(n.data.borderBottom),a=e.getNode(n.data.borderLeft[n.data.borderLeft?.length-1]),o=e.getNode(n.data.borderRight[n.data.borderRight?.length-1]);n.data.width=Math.abs(o?.data.x-a?.data.x)||10,n.data.height=Math.abs(i?.data.y-r?.data.y)||10,n.data.x=(a?.data.x||0)+n.data.width/2,n.data.y=(r?.data.y||0)+n.data.height/2}}),e.getAllNodes().forEach(t=>{t.data.dummy===`border`&&e.removeNode(t.id)})},Zn=e=>{e.getAllEdges().forEach(t=>{if(t.source===t.target){let n=e.getNode(t.source);n.data.selfEdges||(n.data.selfEdges=[]),n.data.selfEdges.push(t),e.removeEdge(t.id)}})},Qn=e=>{Ge(e)?.forEach(t=>{let n=0;t?.forEach((t,r)=>{var i;let a=e.getNode(t);a.data.order=r+n,(i=a.data.selfEdges)==null||i.forEach(t=>{Be(e,`selfedge`,{width:t.data.width,height:t.data.height,rank:a.data.rank,order:r+ ++n,e:t},`_se`)}),delete a.data.selfEdges})})},$n=e=>{e.getAllNodes().forEach(t=>{let n=e.getNode(t.id);if(n.data.dummy===`selfedge`){let r=e.getNode(n.data.e.source),i=r.data.x+r.data.width/2,a=r.data.y,o=n.data.x-i,s=r.data.height/2;e.hasEdge(n.data.e.id)?e.updateEdgeData(n.data.e.id,n.data.e.data):e.addEdge({id:n.data.e.id,source:n.data.e.source,target:n.data.e.target,data:n.data.e.data}),e.removeNode(t.id),n.data.e.data.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{y:a,x:i+o},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.data.e.data.x=n.data.x,n.data.e.data.y=n.data.y}})},er=(e,t)=>{let n={};return t?.forEach(t=>{e[t]!==void 0&&(n[t]=+e[t])}),n},tr=(e={})=>{let t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},nr=Array.isArray,rr=e=>{let t=[],n=e.length;for(let r=0;r<n;r+=1){t[r]=[];for(let i=0;i<n;i+=1)r===i?t[r][i]=0:e[r][i]===0||!e[r][i]?t[r][i]=1/0:t[r][i]=e[r][i]}for(let e=0;e<n;e+=1)for(let r=0;r<n;r+=1)for(let i=0;i<n;i+=1)t[r][i]>t[r][e]+t[e][i]&&(t[r][i]=t[r][e]+t[e][i]);return t},ir=(e,t)=>{let{nodes:n,edges:r}=e,i=[],a={};if(!n)throw Error(`invalid nodes data!`);return n&&n.forEach((e,t)=>{a[e.id]=t,i.push([])}),r?.forEach(e=>{let{source:n,target:r}=e,o=a[n],s=a[r];o===void 0||s===void 0||(i[o][s]=1,t||(i[s][o]=1))}),i},ar=(e,t)=>{let n=[];return e.forEach(e=>{let r=[];e.forEach(e=>{r.push(e*t)}),n.push(r)}),n},or=e=>{let t=1/0,n=1/0,r=-1/0,i=-1/0;return e.forEach(e=>{let a=e.data.size;nr(a)?a.length===1&&(a=[a[0],a[0]]):H(a)?a=[a,a]:(a===void 0||isNaN(a))&&(a=[30,30]);let o=[a[0]/2,a[1]/2],s=e.data.x-o[0],c=e.data.x+o[0],l=e.data.y-o[1],u=e.data.y+o[1];t>s&&(t=s),n>l&&(n=l),r<c&&(r=c),i<u&&(i=u)}),{minX:t,minY:n,maxX:r,maxY:i}},sr=(e,t)=>Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)),cr=(e,t,n,r=`TB`,i,a={})=>{if(!t?.length)return;let{stopBranchFn:o,stopAllFn:s}=a;for(let c=0;c<t.length;c++){let l=t[c];if(e.hasNode(l.id)&&!o?.(l)){if(s?.(l))return;r===`TB`&&n(l),cr(e,e.getChildren(l.id,i),n,r,i,a),r!==`TB`&&n(l)}}},lr=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){let t=[];return e.forEach(e=>{t.push(e)}),t.map(e=>lr(e))}if(typeof e==`object`){let t={};return Object.keys(e).forEach(n=>{t[n]=lr(e[n])}),t}return e},ur=(e,t)=>{let n=lr(e);return n.data=n.data||{},t&&(H(n.data.x)||(n.data.x=Math.random()*t[0]),H(n.data.y)||(n.data.y=Math.random()*t[1])),n};function dr(e){if(!e)return[0,0,0];if(H(e))return[e,e,e];if(e.length===0)return[0,0,0];let[t,n=t,r=t]=e;return[t,n,r]}function fr(e,t){let n;return n=le(t)?t:H(t)?()=>t:()=>e,n}function pr(e,t,n=!0){return!t&&t!==0?t=>{let{size:r}=t.data||{};return r?Array.isArray(r)?n?Math.max(...r)||e:r:fe(r)&&r.width&&r.height?n?Math.max(r.width,r.height)||e:[r.width,r.height]:r:e}:le(t)?t:H(t)?()=>t:Array.isArray(t)?()=>n?Math.max(...t)||e:t:fe(t)&&t.width&&t.height?()=>n?Math.max(t.width,t.height)||e:[t.width,t.height]:()=>e}let mr=(e,t,n=10)=>{let r,i=typeof t==`function`?t:()=>t||0;return r=e?Array.isArray(e)?t=>e:le(e)?e:t=>e:e=>{if(e.data?.bboxSize)return e.data?.bboxSize;if(e.data?.size){let t=e.data.size;return Array.isArray(t)?t:fe(t)?[t.width,t.height]:t}return n},e=>{let t=r(e),n=i(e);return Math.max(...dr(t))+n}},hr={rankdir:`TB`,nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:`tight-tree`,controlPoints:!1,radial:!1,focusNode:null};var gr=class{constructor(e={}){this.options=e,this.id=`antv-dagre`,this.options=Object.assign(Object.assign({},hr),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,t)})}genericDagreLayout(e,t,n){return p(this,void 0,void 0,function*(){let{nodeSize:r,align:i,rankdir:a=`TB`,ranksep:o,nodesep:s,ranksepFunc:c,nodesepFunc:l,edgeLabelSpace:u,ranker:d,nodeOrder:f,begin:p,controlPoints:m,radial:h,sortByCombo:g,preset:_}=Object.assign(Object.assign({},this.options),n),v=new b({tree:[]}),y=fr(o||50,c),x=fr(s||50,l),S=x,C=y;(a===`LR`||a===`RL`)&&(S=y,C=x);let w=pr(10,r,!1),T=t.getAllNodes(),E=t.getAllEdges();T.forEach(e=>{let t=dr(w(e)),n=C(e),r=S(e),i=t[0]+2*r,a=t[1]+2*n,o=e.data.layer;H(o)?v.addNode({id:e.id,data:{width:i,height:a,layer:o}}):v.addNode({id:e.id,data:{width:i,height:a}})}),g&&(v.attachTreeStructure(`combo`),T.forEach(e=>{let{parentId:t}=e.data;t!==void 0&&v.hasNode(t)&&v.setParent(e.id,t,`combo`)})),E.forEach(e=>{v.addEdge({id:e.id,source:e.source,target:e.target,data:{weight:e.data.weight||1}})});let D;_?.length&&(D=new b({nodes:_})),Mn(v,{prevGraph:D,edgeLabelSpace:u,keepNodeOrder:!!f,nodeOrder:f||[],acyclicer:`greedy`,ranker:d,rankdir:a,nodesep:s,align:i});let O=[0,0];if(p){let e=1/0,t=1/0;v.getAllNodes().forEach(n=>{e>n.data.x&&(e=n.data.x),t>n.data.y&&(t=n.data.y)}),v.getAllEdges().forEach(n=>{var r;(r=n.data.points)==null||r.forEach(n=>{e>n.x&&(e=n.x),t>n.y&&(t=n.y)})}),O[0]=p[0]-e,O[1]=p[1]-t}let k=a===`LR`||a===`RL`;if(!h){let e=new Set,t=a===`BT`||a===`RL`?(e,t)=>t-e:(e,t)=>e-t;v.getAllNodes().forEach(t=>{t.data.x=t.data.x+O[0],t.data.y=t.data.y+O[1],e.add(k?t.data.x:t.data.y)});let n=Array.from(e).sort(t),r=k?(e,t)=>e.x!==t.x:(e,t)=>e.y!==t.y,i=k?(e,t,n)=>{let r=Math.max(t.y,n.y),i=Math.min(t.y,n.y);return e.filter(e=>e.y<=r&&e.y>=i)}:(e,t,n)=>{let r=Math.max(t.x,n.x),i=Math.min(t.x,n.x);return e.filter(e=>e.x<=r&&e.x>=i)};v.getAllEdges().forEach((e,t)=>{u&&m&&e.data.type!==`loop`&&(e.data.controlPoints=_r(e.data.points?.map(({x:e,y:t})=>({x:e+O[0],y:t+O[1]})),v.getNode(e.source),v.getNode(e.target),n,k,r,i))})}let A=[];A=v.getAllNodes().map(e=>ur(e));let j=v.getAllEdges();return e&&(A.forEach(e=>{t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})}),j.forEach(e=>{t.mergeEdgeData(e.id,{controlPoints:e.data.controlPoints})})),{nodes:A,edges:j}})}};let _r=(e,t,n,r,i,a,o)=>{let s=e?.slice(1,e.length-1)||[];if(t&&n){let{x:e,y:c}=t.data,{x:l,y:u}=n.data;if(i&&(e=t.data.y,c=t.data.x,l=n.data.y,u=n.data.x),u!==c&&e!==l){let d=r.indexOf(c),f=r[d+1];if(f){let e=s[0],t=i?{x:(c+f)/2,y:e?.y||l}:{x:e?.x||l,y:(c+f)/2};(!e||a(e,t))&&s.unshift(t)}let p=r.indexOf(u),m=Math.abs(p-d);if(m===1)s=o(s,t.data,n.data),s.length||s.push(i?{x:(c+u)/2,y:e}:{x:e,y:(c+u)/2});else if(m>1){let t=r[p-1];if(t){let n=s[s.length-1],r=i?{x:(u+t)/2,y:n?.y||l}:{x:n?.x||e,y:(u+t)/2};(!n||a(n,r))&&s.push(r)}}}}return s},vr=(e,t,n)=>{let r=e.getAllNodes(),i=e.getAllEdges();if(!r?.length)return{nodes:[],edges:i};if(r.length===1)return t&&e.mergeNodeData(r[0].id,{x:n[0],y:n[1]}),{nodes:[Object.assign(Object.assign({},r[0]),{data:Object.assign(Object.assign({},r[0].data),{x:n[0],y:n[1]})})],edges:i}},yr={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1};var br=class{constructor(e={}){this.options=e,this.id=`circular`,this.options=Object.assign(Object.assign({},yr),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,e,t)})}genericCircularLayout(e,t,n){return p(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.options),n),{width:i,height:a,center:o,divisions:s,startAngle:c=0,endAngle:l=2*Math.PI,angleRatio:u,ordering:d,clockwise:f,nodeSpacing:p,nodeSize:m}=r,h=t.getAllNodes(),g=t.getAllEdges(),[_,v,y]=Cr(i,a,o),b=h?.length;if(!b||b===1)return vr(t,e,y);let x=(l-c)/b,{radius:S,startRadius:C,endRadius:w}=r;if(p){let e=fr(10,p),t=pr(10,m),n=-1/0;h.forEach(e=>{let r=t(e);n<r&&(n=r)});let r=0;h.forEach((t,i)=>{i===0?r+=n||10:r+=(e(t)||0)+(n||10)}),S=r/(2*Math.PI)}else !S&&!C&&!w?S=Math.min(v,_)/2:!C&&w?C=w:C&&!w&&(w=C);let T=x*u,E=[];E=d===`topology`?xr(t,h):d===`topology-directed`?xr(t,h,!0):d===`degree`?Sr(t,h):h.map(e=>ur(e));let D=Math.ceil(b/s);for(let e=0;e<b;++e){let t=S;!t&&C!==null&&w!==null&&(t=C+e*(w-C)/(b-1)),t||=10+e*100/(b-1);let n=c+e%D*T+2*Math.PI/s*Math.floor(e/D);f||(n=l-e%D*T-2*Math.PI/s*Math.floor(e/D)),E[e].data.x=y[0]+Math.cos(n)*t,E[e].data.y=y[1]+Math.sin(n)*t}return e&&E.forEach(e=>{t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})}),{nodes:E,edges:g}})}};let xr=(e,t,n=!1)=>{let r=[ur(t[0])],i={},a=t.length;i[t[0].id]=!0;let o=0;return t.forEach((s,c)=>{if(c!==0)if((c===a-1||e.getDegree(s.id,`both`)!==e.getDegree(t[c+1].id,`both`)||e.areNeighbors(r[o].id,s.id))&&!i[s.id])r.push(ur(s)),i[s.id]=!0,o++;else{let c=n?e.getSuccessors(r[o].id):e.getNeighbors(r[o].id),l=!1;for(let t=0;t<c.length;t++){let n=c[t];if(e.getDegree(n.id)===e.getDegree(s.id)&&!i[n.id]){r.push(ur(n)),i[n.id]=!0,l=!0;break}}let u=0;for(;!l&&(i[t[u].id]||(r.push(ur(t[u])),i[t[u].id]=!0,l=!0),u++,u!==a););}}),r};function Sr(e,t){let n=[];return t.forEach((e,t)=>{n.push(ur(e))}),n.sort((t,n)=>e.getDegree(t.id,`both`)-e.getDegree(n.id,`both`)),n}let Cr=(e,t,n)=>{let r=e,i=t,a=n;return!r&&typeof window<`u`&&(r=window.innerWidth),!i&&typeof window<`u`&&(i=window.innerHeight),a||=[r/2,i/2],[r,i,a]},wr={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:`degree`};var Tr=class{constructor(e={}){this.options=e,this.id=`concentric`,this.options=Object.assign(Object.assign({},wr),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,e,t)})}genericConcentricLayout(e,t,n){return p(this,void 0,void 0,function*(){let{center:r,width:i,height:a,sortBy:o,maxLevelDiff:s,sweep:c,clockwise:l,equidistant:u,preventOverlap:d,startAngle:f=3/2*Math.PI,nodeSize:p,nodeSpacing:m}=Object.assign(Object.assign({},this.options),n),h=t.getAllNodes(),g=t.getAllEdges(),_=!i&&typeof window<`u`?window.innerWidth:i,v=!a&&typeof window<`u`?window.innerHeight:a,y=r||[_/2,v/2];if(!h?.length||h.length===1)return vr(t,e,y);let b=[],x,S=0;nr(p)?x=Math.max(p[0],p[1]):le(p)?(x=-1/0,h.forEach(e=>{let t=Math.max(...dr(p(e)));t>x&&(x=t)})):x=p,nr(m)?S=Math.max(m[0],m[1]):H(m)&&(S=m),h.forEach(e=>{let t=ur(e);b.push(t);let n=x,{data:r}=t;nr(r.size)?n=Math.max(r.size[0],r.size[1]):H(r.size)?n=r.size:fe(r.size)&&(n=Math.max(r.size.width,r.size.height)),x=Math.max(x,n),le(m)&&(S=Math.max(m(e),S))});let C={};b.forEach((e,t)=>{C[e.id]=t});let w=o;(!_e(w)||b[0].data[w]===void 0)&&(w=`degree`),w===`degree`?b.sort((e,n)=>t.getDegree(n.id,`both`)-t.getDegree(e.id,`both`)):b.sort((e,t)=>t.data[w]-e.data[w]);let T=b[0],E=(s||(w===`degree`?t.getDegree(T.id,`both`):T.data[w]))/4,D=[{nodes:[]}],O=D[0];b.forEach(e=>{if(O.nodes.length>0){let n=w===`degree`?Math.abs(t.getDegree(O.nodes[0].id,`both`)-t.getDegree(e.id,`both`)):Math.abs(O.nodes[0].data[w]-e.data[w]);E&&n>=E&&(O={nodes:[]},D.push(O))}O.nodes.push(e)});let k=x+S;if(!d){let e=D.length>0&&D[0].nodes.length>1,t=(Math.min(_,v)/2-k)/(D.length+(e?1:0));k=Math.min(k,t)}let A=0;if(D.forEach(e=>{if(e.dTheta=(c===void 0?2*Math.PI-2*Math.PI/e.nodes.length:c)/Math.max(1,e.nodes.length-1),e.nodes.length>1&&d){let t=Math.cos(e.dTheta)-Math.cos(0),n=Math.sin(e.dTheta)-Math.sin(0),r=Math.sqrt(k*k/(t*t+n*n));A=Math.max(r,A)}e.r=A,A+=k}),u){let e=0,t=0;for(let n=0;n<D.length;n++){let r=(D[n].r||0)-t;e=Math.max(e,r)}t=0,D.forEach((n,r)=>{r===0&&(t=n.r||0),n.r=t,t+=e})}return D.forEach(e=>{let t=e.dTheta||0,n=e.r||0;e.nodes.forEach((e,r)=>{let i=f+(l?1:-1)*t*r;e.data.x=y[0]+n*Math.cos(i),e.data.y=y[1]+n*Math.sin(i)})}),e&&b.forEach(e=>t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})),{nodes:b,edges:g}})}};function Er(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return Dr(this.cover(t,n),t,n,e)}function Dr(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a=e._root,o={data:r},s=e._x0,c=e._y0,l=e._x1,u=e._y1,d,f,p,m,h,g,_,v;if(!a)return e._root=o,e;for(;a.length;)if((h=t>=(d=(s+l)/2))?s=d:l=d,(g=n>=(f=(c+u)/2))?c=f:u=f,i=a,!(a=a[_=g<<1|h]))return i[_]=o,e;if(p=+e._x.call(null,a.data),m=+e._y.call(null,a.data),t===p&&n===m)return o.next=a,i?i[_]=o:e._root=o,e;do i=i?i[_]=[,,,,]:e._root=[,,,,],(h=t>=(d=(s+l)/2))?s=d:l=d,(g=n>=(f=(c+u)/2))?c=f:u=f;while((_=g<<1|h)==(v=(m>=f)<<1|p>=d));return i[v]=a,i[_]=o,e}function Or(e){var t,n,r=e.length,i,a,o=Array(r),s=Array(r),c=1/0,l=1/0,u=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=i,s[n]=a,i<c&&(c=i),i>u&&(u=i),a<l&&(l=a),a>d&&(d=a));if(c>u||l>d)return this;for(this.cover(c,l).cover(u,d),n=0;n<r;++n)Dr(this,o[n],s[n],e[n]);return this}function kr(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var o=i-n||1,s=this._root,c,l;n>e||e>=i||r>t||t>=a;)switch(l=(t<r)<<1|e<n,c=[,,,,],c[l]=s,s=c,o*=2,l){case 0:i=n+o,a=r+o;break;case 1:n=i-o,a=r+o;break;case 2:i=n+o,r=a-o;break;case 3:n=i-o,r=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function Ar(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function jr(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function U(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Mr(e,t,n){var r,i=this._x0,a=this._y0,o,s,c,l,u=this._x1,d=this._y1,f=[],p=this._root,m,h;for(p&&f.push(new U(p,i,a,u,d)),n==null?n=1/0:(i=e-n,a=t-n,u=e+n,d=t+n,n*=n);m=f.pop();)if(!(!(p=m.node)||(o=m.x0)>u||(s=m.y0)>d||(c=m.x1)<i||(l=m.y1)<a))if(p.length){var g=(o+c)/2,_=(s+l)/2;f.push(new U(p[3],g,_,c,l),new U(p[2],o,_,g,l),new U(p[1],g,s,c,_),new U(p[0],o,s,g,_)),(h=(t>=_)<<1|e>=g)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-h],f[f.length-1-h]=m)}else{var v=e-+this._x.call(null,p.data),y=t-+this._y.call(null,p.data),b=v*v+y*y;if(b<n){var x=Math.sqrt(n=b);i=e-x,a=t-x,u=e+x,d=t+x,r=p.data}}return r}function Nr(e){if(isNaN(u=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,a,o=this._x0,s=this._y0,c=this._x1,l=this._y1,u,d,f,p,m,h,g,_;if(!n)return this;if(n.length)for(;;){if((m=u>=(f=(o+c)/2))?o=f:c=f,(h=d>=(p=(s+l)/2))?s=p:l=p,t=n,!(n=n[g=h<<1|m]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,_=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[g]=a:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=a,this)}function Pr(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Fr(){return this._root}function Ir(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Lr(e){var t=[],n,r=this._root,i,a,o,s,c;for(r&&t.push(new U(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,a=n.x0,o=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(a+s)/2,u=(o+c)/2;(i=r[3])&&t.push(new U(i,l,u,s,c)),(i=r[2])&&t.push(new U(i,a,u,l,c)),(i=r[1])&&t.push(new U(i,l,o,s,u)),(i=r[0])&&t.push(new U(i,a,o,l,u))}return this}function Rr(e){var t=[],n=[],r;for(this._root&&t.push(new U(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(o+c)/2,d=(s+l)/2;(a=i[0])&&t.push(new U(a,o,s,u,d)),(a=i[1])&&t.push(new U(a,u,s,c,d)),(a=i[2])&&t.push(new U(a,o,d,u,l)),(a=i[3])&&t.push(new U(a,u,d,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function zr(e){return e[0]}function Br(e){return arguments.length?(this._x=e,this):this._x}function Vr(e){return e[1]}function Hr(e){return arguments.length?(this._y=e,this):this._y}function Ur(e,t,n){var r=new Wr(t??zr,n??Vr,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Wr(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Gr(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var W=Ur.prototype=Wr.prototype;W.copy=function(){var e=new Wr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Gr(t),e;for(n=[{source:t,target:e._root=[,,,,]}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=[,,,,]}):t.target[i]=Gr(r));return e},W.add=Er,W.addAll=Or,W.cover=kr,W.data=Ar,W.extent=jr,W.find=Mr,W.remove=Nr,W.removeAll=Pr,W.root=Fr,W.size=Ir,W.visit=Lr,W.visitAfter=Rr,W.x=Br,W.y=Hr;function Kr(e){let t=+this._x.call(null,e),n=+this._y.call(null,e),r=+this._z.call(null,e);return qr(this.cover(t,n,r),t,n,r,e)}function qr(e,t,n,r,i){if(isNaN(t)||isNaN(n)||isNaN(r))return e;var a,o=e._root,s={data:i},c=e._x0,l=e._y0,u=e._z0,d=e._x1,f=e._y1,p=e._z1,m,h,g,_,v,y,b,x,S,C,w;if(!o)return e._root=s,e;for(;o.length;)if((b=t>=(m=(c+d)/2))?c=m:d=m,(x=n>=(h=(l+f)/2))?l=h:f=h,(S=r>=(g=(u+p)/2))?u=g:p=g,a=o,!(o=o[C=S<<2|x<<1|b]))return a[C]=s,e;if(_=+e._x.call(null,o.data),v=+e._y.call(null,o.data),y=+e._z.call(null,o.data),t===_&&n===v&&r===y)return s.next=o,a?a[C]=s:e._root=s,e;do a=a?a[C]=Array(8):e._root=Array(8),(b=t>=(m=(c+d)/2))?c=m:d=m,(x=n>=(h=(l+f)/2))?l=h:f=h,(S=r>=(g=(u+p)/2))?u=g:p=g;while((C=S<<2|x<<1|b)==(w=(y>=g)<<2|(v>=h)<<1|_>=m));return a[w]=o,a[C]=s,e}function Jr(e){Array.isArray(e)||(e=Array.from(e));let t=e.length,n=new Float64Array(t),r=new Float64Array(t),i=new Float64Array(t),a=1/0,o=1/0,s=1/0,c=-1/0,l=-1/0,u=-1/0;for(let d=0,f,p,m,h;d<t;++d)isNaN(p=+this._x.call(null,f=e[d]))||isNaN(m=+this._y.call(null,f))||isNaN(h=+this._z.call(null,f))||(n[d]=p,r[d]=m,i[d]=h,p<a&&(a=p),p>c&&(c=p),m<o&&(o=m),m>l&&(l=m),h<s&&(s=h),h>u&&(u=h));if(a>c||o>l||s>u)return this;this.cover(a,o,s).cover(c,l,u);for(let a=0;a<t;++a)qr(this,n[a],r[a],i[a],e[a]);return this}function Yr(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,a=this._z0,o=this._x1,s=this._y1,c=this._z1;if(isNaN(r))o=(r=Math.floor(e))+1,s=(i=Math.floor(t))+1,c=(a=Math.floor(n))+1;else{for(var l=o-r||1,u=this._root,d,f;r>e||e>=o||i>t||t>=s||a>n||n>=c;)switch(f=(n<a)<<2|(t<i)<<1|e<r,d=Array(8),d[f]=u,u=d,l*=2,f){case 0:o=r+l,s=i+l,c=a+l;break;case 1:r=o-l,s=i+l,c=a+l;break;case 2:o=r+l,i=s-l,c=a+l;break;case 3:r=o-l,i=s-l,c=a+l;break;case 4:o=r+l,s=i+l,a=c-l;break;case 5:r=o-l,s=i+l,a=c-l;break;case 6:o=r+l,i=s-l,a=c-l;break;case 7:r=o-l,i=s-l,a=c-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=c,this}function Xr(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Zr(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function G(e,t,n,r,i,a,o){this.node=e,this.x0=t,this.y0=n,this.z0=r,this.x1=i,this.y1=a,this.z1=o}function Qr(e,t,n,r){var i,a=this._x0,o=this._y0,s=this._z0,c,l,u,d,f,p,m=this._x1,h=this._y1,g=this._z1,_=[],v=this._root,y,b;for(v&&_.push(new G(v,a,o,s,m,h,g)),r==null?r=1/0:(a=e-r,o=t-r,s=n-r,m=e+r,h=t+r,g=n+r,r*=r);y=_.pop();)if(!(!(v=y.node)||(c=y.x0)>m||(l=y.y0)>h||(u=y.z0)>g||(d=y.x1)<a||(f=y.y1)<o||(p=y.z1)<s))if(v.length){var x=(c+d)/2,S=(l+f)/2,C=(u+p)/2;_.push(new G(v[7],x,S,C,d,f,p),new G(v[6],c,S,C,x,f,p),new G(v[5],x,l,C,d,S,p),new G(v[4],c,l,C,x,S,p),new G(v[3],x,S,u,d,f,C),new G(v[2],c,S,u,x,f,C),new G(v[1],x,l,u,d,S,C),new G(v[0],c,l,u,x,S,C)),(b=(n>=C)<<2|(t>=S)<<1|e>=x)&&(y=_[_.length-1],_[_.length-1]=_[_.length-1-b],_[_.length-1-b]=y)}else{var w=e-+this._x.call(null,v.data),T=t-+this._y.call(null,v.data),E=n-+this._z.call(null,v.data),D=w*w+T*T+E*E;if(D<r){var O=Math.sqrt(r=D);a=e-O,o=t-O,s=n-O,m=e+O,h=t+O,g=n+O,i=v.data}}return i}let $r=(e,t,n,r,i,a)=>Math.sqrt((e-r)**2+(t-i)**2+(n-a)**2);function ei(e,t,n,r){let i=[],a=e-r,o=t-r,s=n-r,c=e+r,l=t+r,u=n+r;return this.visit((d,f,p,m,h,g,_)=>{if(!d.length)do{let a=d.data;$r(e,t,n,this._x(a),this._y(a),this._z(a))<=r&&i.push(a)}while(d=d.next);return f>c||p>l||m>u||h<a||g<o||_<s}),i}function ti(e){if(isNaN(f=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e))||isNaN(m=+this._z.call(null,e)))return this;var t,n=this._root,r,i,a,o=this._x0,s=this._y0,c=this._z0,l=this._x1,u=this._y1,d=this._z1,f,p,m,h,g,_,v,y,b,x,S;if(!n)return this;if(n.length)for(;;){if((v=f>=(h=(o+l)/2))?o=h:l=h,(y=p>=(g=(s+u)/2))?s=g:u=g,(b=m>=(_=(c+d)/2))?c=_:d=_,t=n,!(n=n[x=b<<2|y<<1|v]))return this;if(!n.length)break;(t[x+1&7]||t[x+2&7]||t[x+3&7]||t[x+4&7]||t[x+5&7]||t[x+6&7]||t[x+7&7])&&(r=t,S=x)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[x]=a:delete t[x],(n=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&n===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[S]=n:this._root=n),this):(this._root=a,this)}function ni(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function ri(){return this._root}function ii(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function ai(e){var t=[],n,r=this._root,i,a,o,s,c,l,u;for(r&&t.push(new G(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=t.pop();)if(!e(r=n.node,a=n.x0,o=n.y0,s=n.z0,c=n.x1,l=n.y1,u=n.z1)&&r.length){var d=(a+c)/2,f=(o+l)/2,p=(s+u)/2;(i=r[7])&&t.push(new G(i,d,f,p,c,l,u)),(i=r[6])&&t.push(new G(i,a,f,p,d,l,u)),(i=r[5])&&t.push(new G(i,d,o,p,c,f,u)),(i=r[4])&&t.push(new G(i,a,o,p,d,f,u)),(i=r[3])&&t.push(new G(i,d,f,s,c,l,p)),(i=r[2])&&t.push(new G(i,a,f,s,d,l,p)),(i=r[1])&&t.push(new G(i,d,o,s,c,f,p)),(i=r[0])&&t.push(new G(i,a,o,s,d,f,p))}return this}function oi(e){var t=[],n=[],r;for(this._root&&t.push(new G(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=t.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,c=r.z0,l=r.x1,u=r.y1,d=r.z1,f=(o+l)/2,p=(s+u)/2,m=(c+d)/2;(a=i[0])&&t.push(new G(a,o,s,c,f,p,m)),(a=i[1])&&t.push(new G(a,f,s,c,l,p,m)),(a=i[2])&&t.push(new G(a,o,p,c,f,u,m)),(a=i[3])&&t.push(new G(a,f,p,c,l,u,m)),(a=i[4])&&t.push(new G(a,o,s,m,f,p,d)),(a=i[5])&&t.push(new G(a,f,s,m,l,p,d)),(a=i[6])&&t.push(new G(a,o,p,m,f,u,d)),(a=i[7])&&t.push(new G(a,f,p,m,l,u,d))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function si(e){return e[0]}function ci(e){return arguments.length?(this._x=e,this):this._x}function li(e){return e[1]}function ui(e){return arguments.length?(this._y=e,this):this._y}function di(e){return e[2]}function fi(e){return arguments.length?(this._z=e,this):this._z}function pi(e,t,n,r){var i=new mi(t??si,n??li,r??di,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function mi(e,t,n,r,i,a,o,s,c){this._x=e,this._y=t,this._z=n,this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=c,this._root=void 0}function hi(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var K=pi.prototype=mi.prototype;K.copy=function(){var e=new mi(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=hi(t),e;for(n=[{source:t,target:e._root=Array(8)}];t=n.pop();)for(var i=0;i<8;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=Array(8)}):t.target[i]=hi(r));return e},K.add=Kr,K.addAll=Jr,K.cover=Yr,K.data=Xr,K.extent=Zr,K.find=Qr,K.findAllWithinRadius=ei,K.remove=ti,K.removeAll=ni,K.root=ri,K.size=ii,K.visit=ai,K.visitAfter=oi,K.x=ci,K.y=ui,K.z=fi;let gi=.1;function _i(e,t,n,r,i=2){let a=t/n,o=e.getAllNodes(),s=o.map((e,t)=>{let{nodeStrength:n,x:r,y:i,z:o,size:s}=e.data;return{x:r,y:i,z:o,size:s,index:t,id:e.id,vx:0,vy:0,vz:0,weight:a*n}}),c=(i===2?Ur(s,e=>e.x,e=>e.y):pi(s,e=>e.x,e=>e.y,e=>e.z)).visitAfter(vi),l=new Map;return s.forEach(e=>{l.set(e.id,e),bi(e,c,i)}),s.map((e,t)=>{let{id:n,data:i}=o[t],{mass:a=1}=i;r[n]={x:e.vx/a,y:e.vy/a,z:e.vz/a}}),r}function vi(e){let t=0,n=0,r=0,i=0,a=0,o=e.length;if(o){for(let s=0;s<o;s++){let o=e[s];o&&o.weight&&(t+=o.weight,n+=o.x*o.weight,r+=o.y*o.weight,i+=o.z*o.weight,a+=o.size*o.weight)}e.x=n/t,e.y=r/t,e.z=i/t,e.size=a/t,e.weight=t}else{let t=e;e.x=t.data.x,e.y=t.data.y,e.z=t.data.z,e.size=t.data.size,e.weight=t.data.weight}}let yi=(e,t,n,r,i,a,o)=>{if(e.data?.id===a.id)return;let s=[n,r,i][o-1],c=a.x-e.x||gi,l=a.y-e.y||gi,u=a.z-e.z||gi,d=[c,l,u],f=s-t,p=0;for(let e=0;e<o;e++)p+=d[e]*d[e];let m=Math.sqrt(p)*p;if(f*f*.81<p){let t=e.weight/m;return a.vx+=c*t,a.vy+=l*t,a.vz+=u*t,!0}if(e.length)return!1;if(e.data!==a){let t=e.data.weight/m;a.vx+=c*t,a.vy+=l*t,a.vz+=u*t}};function bi(e,t,n){t.visit((t,r,i,a,o)=>yi(t,r,i,a,o,e,n))}let xi={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:`mean`};var Si=class{constructor(e={}){this.options=e,this.id=`force`,this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},xi),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericForceLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,e,t)})}stop(){this.timeInterval&&typeof window<`u`&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let t=0;(this.judgingDistance>this.lastOptions.minMovement||t<1)&&t<e;t++)this.runOneStep(this.lastCalcGraph,this.lastGraph,t,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);let t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(e=>this.lastGraph.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:this.options.dimensions===3?e.data.z:void 0})),t}genericForceLayout(e,t,n){return p(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.options),n),i=t.getAllNodes(),a=t.getAllEdges(),o=this.formatOptions(r,t),{dimensions:s,width:c,height:l,nodeSize:u,getMass:d,nodeStrength:f,edgeStrength:p,linkDistance:m}=o,h=i.map((e,t)=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{x:H(e.data.x)?e.data.x:Math.random()*c,y:H(e.data.y)?e.data.y:Math.random()*l,z:H(e.data.z)?e.data.z:Math.random()*Math.sqrt(c*l),size:u(e)||30,mass:d(e),nodeStrength:f(e)})})),g=a.map(e=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{edgeStrength:p(e),linkDistance:m(e,t.getNode(e.source),t.getNode(e.target))})}));if(!i?.length)return this.lastResult={nodes:[],edges:a},{nodes:[],edges:a};let _={};i.forEach((e,t)=>{_[e.id]={x:0,y:0,z:0}});let v=new b({nodes:h,edges:g});this.formatCentripetal(o,v);let{maxIteration:y,minMovement:x,onTick:S}=o;if(this.lastLayoutNodes=h,this.lastLayoutEdges=g,this.lastAssign=e,this.lastGraph=t,this.lastCalcGraph=v,this.lastOptions=o,this.lastVelMap=_,typeof window>`u`)return;let C=0;return new Promise(n=>{this.timeInterval=window.setInterval(()=>{(!i||!this.running)&&n({nodes:Di(t,h),edges:a}),this.runOneStep(v,t,C,_,o),this.updatePosition(t,v,_,o),e&&h.forEach(e=>t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:s===3?e.data.z:void 0})),S?.({nodes:Di(t,h),edges:a}),C++,(C>=y||this.judgingDistance<x)&&(window.clearInterval(this.timeInterval),n({nodes:Di(t,h),edges:a}))},0),this.running=!0})})}formatOptions(e,t){let n=Object.assign({},e),{width:r,height:i,getMass:a}=e;return n.width=!r&&typeof window<`u`?window.innerWidth:r,n.height=!i&&typeof window<`u`?window.innerHeight:i,e.center||(n.center=[n.width/2,n.height/2]),a||(n.getMass=e=>{let n=1;H(e?.data.mass)&&(n=e?.data.mass);let r=t.getDegree(e.id,`both`);return!r||r<5?n:r*5*n}),n.nodeSize=mr(e.nodeSize,e.nodeSpacing),n.linkDistance=e.linkDistance?fr(1,e.linkDistance):e=>1+n.nodeSize(t.getNode(e.source))+n.nodeSize(t.getNode(e.target)),n.nodeStrength=fr(1,e.nodeStrength),n.edgeStrength=fr(1,e.edgeStrength),n}formatCentripetal(e,t){let{dimensions:n,centripetalOptions:r,center:i,clusterNodeStrength:a,leafCluster:o,clustering:s,nodeClusterBy:c}=e,l=t.getAllNodes(),u=r||{leaf:2,single:2,others:1,center:e=>({x:i[0],y:i[1],z:n===3?i[2]:void 0})};typeof a!=`function`&&(e.clusterNodeStrength=e=>a);let d,f;if(o&&c&&(d=Ci(t,c),f=Array.from(new Set(l?.map(e=>e.data[c])))||[],e.centripetalOptions=Object.assign(u,{single:100,leaf:t=>{let{siblingLeaves:n,sameTypeLeaves:r}=d[t.id]||{};return r?.length===n?.length||f?.length===1?1:e.clusterNodeStrength(t)},others:1,center:e=>{let n=t.getDegree(e.id,`both`);if(!n)return{x:100,y:100,z:0};let r;if(n===1){let{sameTypeLeaves:t=[]}=d[e.id]||{};t.length===1?r=void 0:t.length>1&&(r=Ei(t))}else r=void 0;return{x:r?.x,y:r?.y,z:r?.z}}})),s&&c){d||=Ci(t,c),f||=Array.from(new Set(l.map(e=>e.data[c]))),f=f.filter(e=>e!==void 0);let n={};f.forEach(e=>{let r=l.filter(t=>t.data[c]===e).map(e=>t.getNode(e.id));n[e]=Ei(r)}),e.centripetalOptions=Object.assign(u,{single:t=>e.clusterNodeStrength(t),leaf:t=>e.clusterNodeStrength(t),others:t=>e.clusterNodeStrength(t),center:e=>{let t=n[e.data[c]];return{x:t?.x,y:t?.y,z:t?.z}}})}let{leaf:p,single:m,others:h}=e.centripetalOptions||{};p&&typeof p!=`function`&&(e.centripetalOptions.leaf=()=>p),m&&typeof m!=`function`&&(e.centripetalOptions.single=()=>m),h&&typeof h!=`function`&&(e.centripetalOptions.others=()=>h)}runOneStep(e,t,n,r,i){let a={},o=e.getAllNodes(),s=e.getAllEdges();if(!o?.length)return;let{monitor:c}=i;if(this.calRepulsive(e,a,i),s&&this.calAttractive(e,a,i),this.calGravity(e,t,a,i),this.updateVelocity(e,a,r,i),c){let e=this.calTotalEnergy(a,o);c({energy:e,nodes:t.getAllNodes(),edges:t.getAllEdges(),iterations:n})}}calTotalEnergy(e,t){if(!t?.length)return 0;let n=0;return t.forEach((t,r)=>{let i=e[t.id].x,a=e[t.id].y,o=this.options.dimensions===3?e[t.id].z:0,s=i*i+a*a+o*o,{mass:c=1}=t.data;n+=c*s*.5}),n}calRepulsive(e,t,n){let{dimensions:r,factor:i,coulombDisScale:a}=n;_i(e,i,a*a,t,r)}calAttractive(e,t,n){let{dimensions:r,nodeSize:i}=n;e.getAllEdges().forEach((n,a)=>{let{source:o,target:s}=n,c=e.getNode(o),l=e.getNode(s);if(!c||!l)return;let u=l.data.x-c.data.x,d=l.data.y-c.data.y,f=r===3?l.data.z-c.data.z:0;!u&&!d&&(u=Math.random()*.01,d=Math.random()*.01,r===3&&!f&&(f=Math.random()*.01));let p=Math.sqrt(u*u+d*d+f*f);if(p<i(c)+i(l))return;let m=u/p,h=d/p,g=f/p,{linkDistance:_=200,edgeStrength:v=200}=n.data||{},y=(_-p)*v,b=c.data.mass||1,x=l.data.mass||1,S=1/b,C=1/x,w=m*y,T=h*y,E=g*y;t[o].x-=w*S,t[o].y-=T*S,t[o].z-=E*S,t[s].x+=w*C,t[s].y+=T*C,t[s].z+=E*C})}calGravity(e,t,n,r){let{getCenter:i}=r,a=e.getAllNodes(),o=t.getAllNodes(),s=t.getAllEdges(),{width:c,height:l,center:u,gravity:d,centripetalOptions:f}=r;a&&a.forEach(r=>{let{id:a,data:p}=r,{mass:m,x:h,y:g,z:_}=p,v=t.getNode(a),y=0,b=0,x=0,S=d,C=e.getDegree(a,`in`),w=e.getDegree(a,`out`),T=e.getDegree(a,`both`),E=i?.(v,T);if(E){let[e,t,n]=E;y=h-e,b=g-t,S=n}else y=h-u[0],b=g-u[1],x=_-u[2];if(S&&(n[a].x-=S*y/m,n[a].y-=S*b/m,n[a].z-=S*x/m),f){let{leaf:e,single:t,others:r,center:i}=f,{x:u,y:d,z:p,centerStrength:y}=i?.(v,o,s,c,l)||{x:0,y:0,z:0,centerStrength:0};if(!H(u)||!H(d))return;let b=(h-u)/m,x=(g-d)/m,S=(_-p)/m;if(y&&(n[a].x-=y*b,n[a].y-=y*x,n[a].z-=y*S),T===0){let e=t(v);if(!e)return;n[a].x-=e*b,n[a].y-=e*x,n[a].z-=e*S;return}if(C===0||w===0){let t=e(v,o,s);if(!t)return;n[a].x-=t*b,n[a].y-=t*x,n[a].z-=t*S;return}let E=r(v);if(!E)return;n[a].x-=E*b,n[a].y-=E*x,n[a].z-=E*S}})}updateVelocity(e,t,n,r){let{damping:i,maxSpeed:a,interval:o,dimensions:s}=r,c=e.getAllNodes();c?.length&&c.forEach(e=>{let{id:r}=e,c=(n[r].x+t[r].x*o)*i||.01,l=(n[r].y+t[r].y*o)*i||.01,u=s===3?(n[r].z+t[r].z*o)*i||.01:0,d=Math.sqrt(c*c+l*l+u*u);if(d>a){let e=a/d;c=e*c,l=e*l,u=e*u}n[r]={x:c,y:l,z:u}})}updatePosition(e,t,n,r){let{distanceThresholdMode:i,interval:a,dimensions:o}=r,s=t.getAllNodes();if(!s?.length){this.judgingDistance=0;return}let c=0;i===`max`?this.judgingDistance=-1/0:i===`min`&&(this.judgingDistance=1/0),s.forEach(r=>{let{id:s}=r,l=e.getNode(s);if(H(l.data.fx)&&H(l.data.fy)){t.mergeNodeData(s,{x:l.data.fx,y:l.data.fy,z:o===3?l.data.fz:void 0});return}let u=n[s].x*a,d=n[s].y*a,f=o===3?n[s].z*a:0;t.mergeNodeData(s,{x:r.data.x+u,y:r.data.y+d,z:r.data.z+f});let p=Math.sqrt(u*u+d*d+f*f);switch(i){case`max`:this.judgingDistance<p&&(this.judgingDistance=p);break;case`min`:this.judgingDistance>p&&(this.judgingDistance=p);break;default:c+=p;break}}),(!i||i===`mean`)&&(this.judgingDistance=c/s.length)}};let Ci=(e,t)=>{let n=e.getAllNodes();if(!n?.length)return{};let r={};return n.forEach((n,i)=>{e.getDegree(n.id,`both`)===1&&(r[n.id]=wi(e,`leaf`,n,t))}),r},wi=(e,t,n,r)=>{let i=e.getDegree(n.id,`in`),a=e.getDegree(n.id,`out`),o=n,s=[];i===0?(o=e.getSuccessors(n.id)[0],s=e.getNeighbors(o.id)):a===0&&(o=e.getPredecessors(n.id)[0],s=e.getNeighbors(o.id)),s=s.filter(t=>e.getDegree(t.id,`in`)===0||e.getDegree(t.id,`out`)===0);let c=Ti(e,t,r,n,s);return{coreNode:o,siblingLeaves:s,sameTypeLeaves:c}},Ti=(e,t,n,r,i)=>{let a=r.data[n]||``,o=i?.filter(e=>e.data[n]===a)||[];return t===`leaf`&&(o=o.filter(t=>e.getDegree(t.id,`in`)===0||e.getDegree(t.id,`out`)===0)),o},Ei=e=>{let t={x:0,y:0};e.forEach(e=>{let{x:n,y:r}=e.data;t.x+=n||0,t.y+=r||0});let n=e.length||1;return{x:t.x/n,y:t.y/n}},Di=(e,t)=>t.map(t=>{let{id:n,data:r}=t,i=e.getNode(n);return Object.assign(Object.assign({},i),{data:Object.assign(Object.assign({},i.data),{x:r.x,y:r.y,z:r.z})})});var Oi=c({isAnyArray:()=>ki});function ki(e){let t=Ai.call(e);return t.endsWith(`Array]`)&&!t.includes(`Big`)}var Ai,ji=o((()=>{Ai=Object.prototype.toString}));function Mi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ki(e))throw TypeError(`input must be an array`);if(e.length===0)throw TypeError(`input must not be empty`);var n=t.fromIndex,r=n===void 0?0:n,i=t.toIndex,a=i===void 0?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw Error(`fromIndex must be a positive integer smaller than length`);if(a<=r||a>e.length||!Number.isInteger(a))throw Error(`toIndex must be an integer greater than fromIndex and at most equal to length`);for(var o=e[r],s=r+1;s<a;s++)e[s]>o&&(o=e[s]);return o}var Ni=o((()=>{ji()}));function Pi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ki(e))throw TypeError(`input must be an array`);if(e.length===0)throw TypeError(`input must not be empty`);var n=t.fromIndex,r=n===void 0?0:n,i=t.toIndex,a=i===void 0?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw Error(`fromIndex must be a positive integer smaller than length`);if(a<=r||a>e.length||!Number.isInteger(a))throw Error(`toIndex must be an integer greater than fromIndex and at most equal to length`);for(var o=e[r],s=r+1;s<a;s++)e[s]<o&&(o=e[s]);return o}var Fi=o((()=>{ji()})),Ii=c({default:()=>Li});function Li(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ki(e)){if(e.length===0)throw TypeError(`input must not be empty`)}else throw TypeError(`input must be an array`);var n;if(t.output!==void 0){if(!ki(t.output))throw TypeError(`output option must be an array if specified`);n=t.output}else n=Array(e.length);var r=Pi(e),i=Mi(e);if(r===i)throw RangeError(`minimum and maximum input values are equal. Cannot rescale a constant array`);var a=t.min,o=a===void 0?t.autoMinMax?r:0:a,s=t.max,c=s===void 0?t.autoMinMax?i:1:s;if(o>=c)throw RangeError(`min option must be smaller than max option`);for(var l=(c-o)/(i-r),u=0;u<e.length;u++)n[u]=(e[u]-r)*l+o;return n}var Ri=o((()=>{ji(),Ni(),Fi()})),q=u(s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});var t=(ji(),d(Oi)),n=(Ri(),d(Ii));let r=` `.repeat(2),i=` `.repeat(4);function a(){return o(this)}function o(e,t={}){let{maxRows:n=15,maxColumns:a=10,maxNumSize:o=8,padMinus:c=`auto`}=t;return`${e.constructor.name} {
${r}[
${i}${s(e,n,a,o,c)}
${r}]
${r}rows: ${e.rows}
${r}columns: ${e.columns}
}`}function s(e,t,n,r,a){let{rows:o,columns:s}=e,l=Math.min(o,t),u=Math.min(s,n),d=[];if(a===`auto`){a=!1;loop:for(let t=0;t<l;t++)for(let n=0;n<u;n++)if(e.get(t,n)<0){a=!0;break loop}}for(let t=0;t<l;t++){let n=[];for(let i=0;i<u;i++)n.push(c(e.get(t,i),r,a));d.push(`${n.join(` `)}`)}return u!==s&&(d[d.length-1]+=` ... ${s-n} more columns`),l!==o&&d.push(`... ${o-t} more rows`),d.join(`\n${i}`)}function c(e,t,n){return(e>=0&&n?` ${l(e,t-1)}`:l(e,t)).padEnd(t)}function l(e,t){let n=e.toString();if(n.length<=t)return n;let r=e.toFixed(t);if(r.length>t&&(r=e.toFixed(Math.max(0,t-(r.length-t)))),r.length<=t&&!r.startsWith(`0.000`)&&!r.startsWith(`-0.000`))return r;let i=e.toExponential(t);return i.length>t&&(i=e.toExponential(Math.max(0,t-(i.length-t)))),i.slice(0)}function u(e,t){e.prototype.add=function(e){return typeof e==`number`?this.addS(e):this.addM(e)},e.prototype.addS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e);return this},e.prototype.addM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e.get(t,n));return this},e.add=function(e,n){return new t(e).add(n)},e.prototype.sub=function(e){return typeof e==`number`?this.subS(e):this.subM(e)},e.prototype.subS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e);return this},e.prototype.subM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e.get(t,n));return this},e.sub=function(e,n){return new t(e).sub(n)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(e){return typeof e==`number`?this.mulS(e):this.mulM(e)},e.prototype.mulS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this},e.prototype.mulM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e.get(t,n));return this},e.mul=function(e,n){return new t(e).mul(n)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(e){return typeof e==`number`?this.divS(e):this.divM(e)},e.prototype.divS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e);return this},e.prototype.divM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e.get(t,n));return this},e.div=function(e,n){return new t(e).div(n)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(e){return typeof e==`number`?this.modS(e):this.modM(e)},e.prototype.modS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e);return this},e.prototype.modM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e.get(t,n));return this},e.mod=function(e,n){return new t(e).mod(n)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(e){return typeof e==`number`?this.andS(e):this.andM(e)},e.prototype.andS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e);return this},e.prototype.andM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e.get(t,n));return this},e.and=function(e,n){return new t(e).and(n)},e.prototype.or=function(e){return typeof e==`number`?this.orS(e):this.orM(e)},e.prototype.orS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e);return this},e.prototype.orM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e.get(t,n));return this},e.or=function(e,n){return new t(e).or(n)},e.prototype.xor=function(e){return typeof e==`number`?this.xorS(e):this.xorM(e)},e.prototype.xorS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e);return this},e.prototype.xorM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e.get(t,n));return this},e.xor=function(e,n){return new t(e).xor(n)},e.prototype.leftShift=function(e){return typeof e==`number`?this.leftShiftS(e):this.leftShiftM(e)},e.prototype.leftShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e);return this},e.prototype.leftShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e.get(t,n));return this},e.leftShift=function(e,n){return new t(e).leftShift(n)},e.prototype.signPropagatingRightShift=function(e){return typeof e==`number`?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},e.prototype.signPropagatingRightShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e);return this},e.prototype.signPropagatingRightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e.get(t,n));return this},e.signPropagatingRightShift=function(e,n){return new t(e).signPropagatingRightShift(n)},e.prototype.rightShift=function(e){return typeof e==`number`?this.rightShiftS(e):this.rightShiftM(e)},e.prototype.rightShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e);return this},e.prototype.rightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e.get(t,n));return this},e.rightShift=function(e,n){return new t(e).rightShift(n)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},e.not=function(e){return new t(e).not()},e.prototype.abs=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},e.abs=function(e){return new t(e).abs()},e.prototype.acos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},e.acos=function(e){return new t(e).acos()},e.prototype.acosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},e.acosh=function(e){return new t(e).acosh()},e.prototype.asin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},e.asin=function(e){return new t(e).asin()},e.prototype.asinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},e.asinh=function(e){return new t(e).asinh()},e.prototype.atan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},e.atan=function(e){return new t(e).atan()},e.prototype.atanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},e.atanh=function(e){return new t(e).atanh()},e.prototype.cbrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},e.cbrt=function(e){return new t(e).cbrt()},e.prototype.ceil=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},e.ceil=function(e){return new t(e).ceil()},e.prototype.clz32=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},e.clz32=function(e){return new t(e).clz32()},e.prototype.cos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},e.cos=function(e){return new t(e).cos()},e.prototype.cosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},e.cosh=function(e){return new t(e).cosh()},e.prototype.exp=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},e.exp=function(e){return new t(e).exp()},e.prototype.expm1=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},e.expm1=function(e){return new t(e).expm1()},e.prototype.floor=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},e.floor=function(e){return new t(e).floor()},e.prototype.fround=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},e.fround=function(e){return new t(e).fround()},e.prototype.log=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},e.log=function(e){return new t(e).log()},e.prototype.log1p=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},e.log1p=function(e){return new t(e).log1p()},e.prototype.log10=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},e.log10=function(e){return new t(e).log10()},e.prototype.log2=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},e.log2=function(e){return new t(e).log2()},e.prototype.round=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},e.round=function(e){return new t(e).round()},e.prototype.sign=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},e.sign=function(e){return new t(e).sign()},e.prototype.sin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},e.sin=function(e){return new t(e).sin()},e.prototype.sinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},e.sinh=function(e){return new t(e).sinh()},e.prototype.sqrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},e.sqrt=function(e){return new t(e).sqrt()},e.prototype.tan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},e.tan=function(e){return new t(e).tan()},e.prototype.tanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},e.tanh=function(e){return new t(e).tanh()},e.prototype.trunc=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},e.trunc=function(e){return new t(e).trunc()},e.pow=function(e,n){return new t(e).pow(n)},e.prototype.pow=function(e){return typeof e==`number`?this.powS(e):this.powM(e)},e.prototype.powS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)**e);return this},e.prototype.powM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw RangeError(`Matrices dimensions must be equal`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)**e.get(t,n));return this}}function f(e,t,n){let r=n?e.rows:e.rows-1;if(t<0||t>r)throw RangeError(`Row index out of range`)}function p(e,t,n){let r=n?e.columns:e.columns-1;if(t<0||t>r)throw RangeError(`Column index out of range`)}function m(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw RangeError(`vector size must be the same as the number of columns`);return t}function h(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw RangeError(`vector size must be the same as the number of rows`);return t}function g(e,n){if(!t.isAnyArray(n))throw TypeError(`row indices must be an array`);for(let t=0;t<n.length;t++)if(n[t]<0||n[t]>=e.rows)throw RangeError(`row indices are out of range`)}function _(e,n){if(!t.isAnyArray(n))throw TypeError(`column indices must be an array`);for(let t=0;t<n.length;t++)if(n[t]<0||n[t]>=e.columns)throw RangeError(`column indices are out of range`)}function v(e,t,n,r,i){if(arguments.length!==5)throw RangeError(`expected 4 arguments`);if(b(`startRow`,t),b(`endRow`,n),b(`startColumn`,r),b(`endColumn`,i),t>n||r>i||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||i<0||i>=e.columns)throw RangeError(`Submatrix indices are out of range`)}function y(e,t=0){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function b(e,t){if(typeof t!=`number`)throw TypeError(`${e} must be a number`)}function x(e){if(e.isEmpty())throw Error(`Empty matrix has no elements to index`)}function S(e){let t=y(e.rows);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}function C(e){let t=y(e.columns);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}function w(e){let t=0;for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)t+=e.get(n,r);return t}function T(e){let t=y(e.rows,1);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}function E(e){let t=y(e.columns,1);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}function D(e){let t=1;for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)t*=e.get(n,r);return t}function O(e,t,n){let r=e.rows,i=e.columns,a=[];for(let o=0;o<r;o++){let r=0,s=0,c=0;for(let t=0;t<i;t++)c=e.get(o,t)-n[o],r+=c,s+=c*c;t?a.push((s-r*r/i)/(i-1)):a.push((s-r*r/i)/i)}return a}function k(e,t,n){let r=e.rows,i=e.columns,a=[];for(let o=0;o<i;o++){let i=0,s=0,c=0;for(let t=0;t<r;t++)c=e.get(t,o)-n[o],i+=c,s+=c*c;t?a.push((s-i*i/r)/(r-1)):a.push((s-i*i/r)/r)}return a}function A(e,t,n){let r=e.rows,i=e.columns,a=r*i,o=0,s=0,c=0;for(let t=0;t<r;t++)for(let r=0;r<i;r++)c=e.get(t,r)-n,o+=c,s+=c*c;return t?(s-o*o/a)/(a-1):(s-o*o/a)/a}function j(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}function ee(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}function M(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}function N(e){let t=[];for(let n=0;n<e.rows;n++){let r=0;for(let t=0;t<e.columns;t++)r+=e.get(n,t)**2/(e.columns-1);t.push(Math.sqrt(r))}return t}function P(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}function F(e){let t=[];for(let n=0;n<e.columns;n++){let r=0;for(let t=0;t<e.rows;t++)r+=e.get(t,n)**2/(e.rows-1);t.push(Math.sqrt(r))}return t}function I(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}function te(e){let t=e.size-1,n=0;for(let r=0;r<e.columns;r++)for(let i=0;i<e.rows;i++)n+=e.get(i,r)**2/t;return Math.sqrt(n)}function ne(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}var L=class e{static from1DArray(e,t,n){if(e*t!==n.length)throw RangeError(`data length does not match given dimensions`);let r=new R(e,t);for(let i=0;i<e;i++)for(let e=0;e<t;e++)r.set(i,e,n[i*t+e]);return r}static rowVector(e){let t=new R(1,e.length);for(let n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){let t=new R(e.length,1);for(let n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static zeros(e,t){return new R(e,t)}static ones(e,t){return new R(e,t).fill(1)}static rand(e,t,n={}){if(typeof n!=`object`)throw TypeError(`options must be an object`);let{random:r=Math.random}=n,i=new R(e,t);for(let n=0;n<e;n++)for(let e=0;e<t;e++)i.set(n,e,r());return i}static randInt(e,t,n={}){if(typeof n!=`object`)throw TypeError(`options must be an object`);let{min:r=0,max:i=1e3,random:a=Math.random}=n;if(!Number.isInteger(r))throw TypeError(`min must be an integer`);if(!Number.isInteger(i))throw TypeError(`max must be an integer`);if(r>=i)throw RangeError(`min must be smaller than max`);let o=i-r,s=new R(e,t);for(let n=0;n<e;n++)for(let e=0;e<t;e++){let t=r+Math.round(a()*o);s.set(n,e,t)}return s}static eye(e,t,n){t===void 0&&(t=e),n===void 0&&(n=1);let r=Math.min(e,t),i=this.zeros(e,t);for(let e=0;e<r;e++)i.set(e,e,n);return i}static diag(e,t,n){let r=e.length;t===void 0&&(t=r),n===void 0&&(n=t);let i=Math.min(r,t,n),a=this.zeros(t,n);for(let t=0;t<i;t++)a.set(t,t,e[t]);return a}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,r=e.columns,i=new R(n,r);for(let a=0;a<n;a++)for(let n=0;n<r;n++)i.set(a,n,Math.min(e.get(a,n),t.get(a,n)));return i}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,r=e.columns,i=new this(n,r);for(let a=0;a<n;a++)for(let n=0;n<r;n++)i.set(a,n,Math.max(e.get(a,n),t.get(a,n)));return i}static checkMatrix(t){return e.isMatrix(t)?t:new R(t)}static isMatrix(e){return e!=null&&e.klass===`Matrix`}get size(){return this.rows*this.columns}apply(e){if(typeof e!=`function`)throw TypeError(`callback must be a function`);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.call(this,t,n);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let e=0;e<this.rows;e++)if(this.get(e,e)!==0)return!1;return!0}isEchelonForm(){let e=0,t=0,n=-1,r=!0,i=!1;for(;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&i===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(i=!0,n=t):(r=!1,i=!0);e++}return r}isReducedEchelonForm(){let e=0,t=0,n=-1,r=!0,i=!1;for(;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&i===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(i=!0,n=t):(r=!1,i=!0);for(let n=t+1;n<this.rows;n++)this.get(e,n)!==0&&(r=!1);e++}return r}echelonForm(){let e=this.clone(),t=0,n=0;for(;t<e.rows&&n<e.columns;){let r=t;for(let i=t;i<e.rows;i++)e.get(i,n)>e.get(r,n)&&(r=i);if(e.get(r,n)===0)n++;else{e.swapRows(t,r);let i=e.get(t,n);for(let r=n;r<e.columns;r++)e.set(t,r,e.get(t,r)/i);for(let r=t+1;r<e.rows;r++){let i=e.get(r,n)/e.get(t,n);e.set(r,n,0);for(let a=n+1;a<e.columns;a++)e.set(r,a,e.get(r,a)-e.get(t,a)*i)}t++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,n=e.rows,r=n-1;for(;r>=0;)if(e.maxRow(r)===0)r--;else{let i=0,a=!1;for(;i<n&&a===!1;)e.get(r,i)===1?a=!0:i++;for(let n=0;n<r;n++){let a=e.get(n,i);for(let o=i;o<t;o++){let t=e.get(n,o)-a*e.get(r,o);e.set(n,o,t)}}r--}return e}set(){throw Error(`set method is unimplemented`)}get(){throw Error(`get method is unimplemented`)}repeat(e={}){if(typeof e!=`object`)throw TypeError(`options must be an object`);let{rows:t=1,columns:n=1}=e;if(!Number.isInteger(t)||t<=0)throw TypeError(`rows must be a positive integer`);if(!Number.isInteger(n)||n<=0)throw TypeError(`columns must be a positive integer`);let r=new R(this.rows*t,this.columns*n);for(let e=0;e<t;e++)for(let t=0;t<n;t++)r.setSubMatrix(this,this.rows*e,this.columns*t);return r}fill(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,e);return this}neg(){return this.mulS(-1)}getRow(e){f(this,e);let t=[];for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}getRowVector(e){return R.rowVector(this.getRow(e))}setRow(e,t){f(this,e),t=m(this,t);for(let n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){f(this,e),f(this,t);for(let n=0;n<this.columns;n++){let r=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,r)}return this}getColumn(e){p(this,e);let t=[];for(let n=0;n<this.rows;n++)t.push(this.get(n,e));return t}getColumnVector(e){return R.columnVector(this.getColumn(e))}setColumn(e,t){p(this,e),t=h(this,t);for(let n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){p(this,e),p(this,t);for(let n=0;n<this.rows;n++){let r=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,r)}return this}addRowVector(e){e=m(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}subRowVector(e){e=m(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}mulRowVector(e){e=m(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}divRowVector(e){e=m(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}addColumnVector(e){e=h(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}subColumnVector(e){e=h(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}mulColumnVector(e){e=h(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}divColumnVector(e){e=h(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}mulRow(e,t){f(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){p(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(e){if(this.isEmpty())return NaN;switch(e){case`row`:{let e=Array(this.rows).fill(-1/0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e[t]&&(e[t]=this.get(t,n));return e}case`column`:{let e=Array(this.columns).fill(-1/0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e[n]&&(e[n]=this.get(t,n));return e}case void 0:{let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}default:throw Error(`invalid option: ${e}`)}}maxIndex(){x(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}min(e){if(this.isEmpty())return NaN;switch(e){case`row`:{let e=Array(this.rows).fill(1/0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e[t]&&(e[t]=this.get(t,n));return e}case`column`:{let e=Array(this.columns).fill(1/0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e[n]&&(e[n]=this.get(t,n));return e}case void 0:{let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}default:throw Error(`invalid option: ${e}`)}}minIndex(){x(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}maxRow(e){if(f(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){f(this,e),x(this);let t=this.get(e,0),n=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),n[1]=r);return n}minRow(e){if(f(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){f(this,e),x(this);let t=this.get(e,0),n=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),n[1]=r);return n}maxColumn(e){if(p(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){p(this,e),x(this);let t=this.get(0,e),n=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),n[0]=r);return n}minColumn(e){if(p(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){p(this,e),x(this);let t=this.get(0,e),n=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),n[0]=r);return n}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let n=0;n<e;n++)t.push(this.get(n,n));return t}norm(e=`frobenius`){switch(e){case`max`:return this.max();case`frobenius`:return Math.sqrt(this.dot(this));default:throw RangeError(`unknown norm type: ${e}`)}}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}dot(t){e.isMatrix(t)&&(t=t.to1DArray());let n=this.to1DArray();if(n.length!==t.length)throw RangeError(`vectors do not have the same size`);let r=0;for(let e=0;e<n.length;e++)r+=n[e]*t[e];return r}mmul(e){e=R.checkMatrix(e);let t=this.rows,n=this.columns,r=e.columns,i=new R(t,r),a=new Float64Array(n);for(let o=0;o<r;o++){for(let t=0;t<n;t++)a[t]=e.get(t,o);for(let e=0;e<t;e++){let t=0;for(let r=0;r<n;r++)t+=this.get(e,r)*a[r];i.set(e,o,t)}}return i}mpow(e){if(!this.isSquare())throw RangeError(`Matrix must be square`);if(!Number.isInteger(e)||e<0)throw RangeError(`Exponent must be a non-negative integer`);let t=R.eye(this.rows),n=this;for(let r=e;r>=1;r/=2)r&1&&(t=t.mmul(n)),n=n.mmul(n);return t}strassen2x2(e){e=R.checkMatrix(e);let t=new R(2,2),n=this.get(0,0),r=e.get(0,0),i=this.get(0,1),a=e.get(0,1),o=this.get(1,0),s=e.get(1,0),c=this.get(1,1),l=e.get(1,1),u=(n+c)*(r+l),d=(o+c)*r,f=n*(a-l),p=c*(s-r),m=(n+i)*l,h=(o-n)*(r+a),g=(i-c)*(s+l),_=u+p-m+g,v=f+m,y=d+p,b=u-d+f+h;return t.set(0,0,_),t.set(0,1,v),t.set(1,0,y),t.set(1,1,b),t}strassen3x3(e){e=R.checkMatrix(e);let t=new R(3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),a=this.get(1,0),o=this.get(1,1),s=this.get(1,2),c=this.get(2,0),l=this.get(2,1),u=this.get(2,2),d=e.get(0,0),f=e.get(0,1),p=e.get(0,2),m=e.get(1,0),h=e.get(1,1),g=e.get(1,2),_=e.get(2,0),v=e.get(2,1),y=e.get(2,2),b=(n+r+i-a-o-l-u)*h,x=(n-a)*(-f+h),S=o*(-d+f+m-h-g-_+y),C=(-n+a+o)*(d-f+h),w=(a+o)*(-d+f),T=n*d,E=(-n+c+l)*(d-p+g),D=(-n+c)*(p-g),O=(c+l)*(-d+p),k=(n+r+i-o-s-c-l)*g,A=l*(-d+p+m-h-g-_+v),j=(-i+l+u)*(h+_-v),ee=(i-u)*(h-v),M=i*_,N=(l+u)*(-_+v),P=(-i+o+s)*(g+_-y),F=(i-s)*(g-y),I=(o+s)*(-_+y),te=r*m,ne=s*v,L=a*p,re=c*f,ie=u*y,ae=T+M+te,oe=b+C+w+T+j+M+N,z=T+E+O+k+M+P+I,se=x+S+C+T+M+P+F,ce=x+C+w+T+ne,le=M+P+F+I+L,ue=T+E+D+A+j+ee+M,de=j+ee+M+N+re,fe=T+E+D+O+ie;return t.set(0,0,ae),t.set(0,1,oe),t.set(0,2,z),t.set(1,0,se),t.set(1,1,ce),t.set(1,2,le),t.set(2,0,ue),t.set(2,1,de),t.set(2,2,fe),t}mmulStrassen(t){t=R.checkMatrix(t);let n=this.clone(),r=n.rows,i=n.columns,a=t.rows,o=t.columns;i!==a&&console.warn(`Multiplying ${r} x ${i} and ${a} x ${o} matrix: dimensions do not match.`);function s(t,n,r){let i=t.rows,a=t.columns;if(i===n&&a===r)return t;{let i=e.zeros(n,r);return i=i.setSubMatrix(t,0,0),i}}let c=Math.max(r,a),l=Math.max(i,o);n=s(n,c,l),t=s(t,c,l);function u(t,n,r,i){if(r<=512||i<=512)return t.mmul(n);r%2==1&&i%2==1?(t=s(t,r+1,i+1),n=s(n,r+1,i+1)):r%2==1?(t=s(t,r+1,i),n=s(n,r+1,i)):i%2==1&&(t=s(t,r,i+1),n=s(n,r,i+1));let a=parseInt(t.rows/2,10),o=parseInt(t.columns/2,10),c=t.subMatrix(0,a-1,0,o-1),l=n.subMatrix(0,a-1,0,o-1),d=t.subMatrix(0,a-1,o,t.columns-1),f=n.subMatrix(0,a-1,o,n.columns-1),p=t.subMatrix(a,t.rows-1,0,o-1),m=n.subMatrix(a,n.rows-1,0,o-1),h=t.subMatrix(a,t.rows-1,o,t.columns-1),g=n.subMatrix(a,n.rows-1,o,n.columns-1),_=u(e.add(c,h),e.add(l,g),a,o),v=u(e.add(p,h),l,a,o),y=u(c,e.sub(f,g),a,o),b=u(h,e.sub(m,l),a,o),x=u(e.add(c,d),g,a,o),S=u(e.sub(p,c),e.add(l,f),a,o),C=u(e.sub(d,h),e.add(m,g),a,o),w=e.add(_,b);w.sub(x),w.add(C);let T=e.add(y,x),E=e.add(v,b),D=e.sub(_,v);D.add(y),D.add(S);let O=e.zeros(2*w.rows,2*w.columns);return O=O.setSubMatrix(w,0,0),O=O.setSubMatrix(T,w.rows,0),O=O.setSubMatrix(E,0,w.columns),O=O.setSubMatrix(D,w.rows,w.columns),O.subMatrix(0,r-1,0,i-1)}return u(n,t,c,l)}scaleRows(e={}){if(typeof e!=`object`)throw TypeError(`options must be an object`);let{min:t=0,max:r=1}=e;if(!Number.isFinite(t))throw TypeError(`min must be a number`);if(!Number.isFinite(r))throw TypeError(`max must be a number`);if(t>=r)throw RangeError(`min must be smaller than max`);let i=new R(this.rows,this.columns);for(let e=0;e<this.rows;e++){let a=this.getRow(e);a.length>0&&n(a,{min:t,max:r,output:a}),i.setRow(e,a)}return i}scaleColumns(e={}){if(typeof e!=`object`)throw TypeError(`options must be an object`);let{min:t=0,max:r=1}=e;if(!Number.isFinite(t))throw TypeError(`min must be a number`);if(!Number.isFinite(r))throw TypeError(`max must be a number`);if(t>=r)throw RangeError(`min must be smaller than max`);let i=new R(this.rows,this.columns);for(let e=0;e<this.columns;e++){let a=this.getColumn(e);a.length&&n(a,{min:t,max:r,output:a}),i.setColumn(e,a)}return i}flipRows(){let e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let n=0;n<e;n++){let e=this.get(t,n),r=this.get(t,this.columns-1-n);this.set(t,n,r),this.set(t,this.columns-1-n,e)}return this}flipColumns(){let e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let n=0;n<e;n++){let e=this.get(n,t),r=this.get(this.rows-1-n,t);this.set(n,t,r),this.set(this.rows-1-n,t,e)}return this}kroneckerProduct(e){e=R.checkMatrix(e);let t=this.rows,n=this.columns,r=e.rows,i=e.columns,a=new R(t*r,n*i);for(let o=0;o<t;o++)for(let t=0;t<n;t++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)a.set(r*o+n,i*t+s,this.get(o,t)*e.get(n,s));return a}kroneckerSum(e){if(e=R.checkMatrix(e),!this.isSquare()||!e.isSquare())throw Error(`Kronecker Sum needs two Square Matrices`);let t=this.rows,n=e.rows,r=this.kroneckerProduct(R.eye(n,n)),i=R.eye(t,t).kroneckerProduct(e);return r.add(i)}transpose(){let e=new R(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}sortRows(e=re){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=re){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,r){v(this,e,t,n,r);let i=new R(t-e+1,r-n+1);for(let a=e;a<=t;a++)for(let t=n;t<=r;t++)i.set(a-e,t-n,this.get(a,t));return i}subMatrixRow(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw RangeError(`Argument out of range`);let r=new R(e.length,n-t+1);for(let i=0;i<e.length;i++)for(let a=t;a<=n;a++){if(e[i]<0||e[i]>=this.rows)throw RangeError(`Row index out of range: ${e[i]}`);r.set(i,a-t,this.get(e[i],a))}return r}subMatrixColumn(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw RangeError(`Argument out of range`);let r=new R(n-t+1,e.length);for(let i=0;i<e.length;i++)for(let a=t;a<=n;a++){if(e[i]<0||e[i]>=this.columns)throw RangeError(`Column index out of range: ${e[i]}`);r.set(a-t,i,this.get(a,e[i]))}return r}setSubMatrix(e,t,n){if(e=R.checkMatrix(e),e.isEmpty())return this;let r=t+e.rows-1,i=n+e.columns-1;v(this,t,r,n,i);for(let r=0;r<e.rows;r++)for(let i=0;i<e.columns;i++)this.set(t+r,n+i,e.get(r,i));return this}selection(e,t){g(this,e),_(this,t);let n=new R(e.length,t.length);for(let r=0;r<e.length;r++){let i=e[r];for(let e=0;e<t.length;e++){let a=t[e];n.set(r,e,this.get(i,a))}}return n}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let n=0;n<e;n++)t+=this.get(n,n);return t}clone(){return this.constructor.copy(this,new R(this.rows,this.columns))}static copy(e,t){for(let[n,r,i]of e.entries())t.set(n,r,i);return t}sum(e){switch(e){case`row`:return S(this);case`column`:return C(this);case void 0:return w(this);default:throw Error(`invalid option: ${e}`)}}product(e){switch(e){case`row`:return T(this);case`column`:return E(this);case void 0:return D(this);default:throw Error(`invalid option: ${e}`)}}mean(e){let t=this.sum(e);switch(e){case`row`:for(let e=0;e<this.rows;e++)t[e]/=this.columns;return t;case`column`:for(let e=0;e<this.columns;e++)t[e]/=this.rows;return t;case void 0:return t/this.size;default:throw Error(`invalid option: ${e}`)}}variance(e,n={}){if(typeof e==`object`&&(n=e,e=void 0),typeof n!=`object`)throw TypeError(`options must be an object`);let{unbiased:r=!0,mean:i=this.mean(e)}=n;if(typeof r!=`boolean`)throw TypeError(`unbiased must be a boolean`);switch(e){case`row`:if(!t.isAnyArray(i))throw TypeError(`mean must be an array`);return O(this,r,i);case`column`:if(!t.isAnyArray(i))throw TypeError(`mean must be an array`);return k(this,r,i);case void 0:if(typeof i!=`number`)throw TypeError(`mean must be a number`);return A(this,r,i);default:throw Error(`invalid option: ${e}`)}}standardDeviation(e,t){typeof e==`object`&&(t=e,e=void 0);let n=this.variance(e,t);if(e===void 0)return Math.sqrt(n);for(let e=0;e<n.length;e++)n[e]=Math.sqrt(n[e]);return n}center(e,n={}){if(typeof e==`object`&&(n=e,e=void 0),typeof n!=`object`)throw TypeError(`options must be an object`);let{center:r=this.mean(e)}=n;switch(e){case`row`:if(!t.isAnyArray(r))throw TypeError(`center must be an array`);return j(this,r),this;case`column`:if(!t.isAnyArray(r))throw TypeError(`center must be an array`);return ee(this,r),this;case void 0:if(typeof r!=`number`)throw TypeError(`center must be a number`);return M(this,r),this;default:throw Error(`invalid option: ${e}`)}}scale(e,n={}){if(typeof e==`object`&&(n=e,e=void 0),typeof n!=`object`)throw TypeError(`options must be an object`);let r=n.scale;switch(e){case`row`:if(r===void 0)r=N(this);else if(!t.isAnyArray(r))throw TypeError(`scale must be an array`);return P(this,r),this;case`column`:if(r===void 0)r=F(this);else if(!t.isAnyArray(r))throw TypeError(`scale must be an array`);return I(this,r),this;case void 0:if(r===void 0)r=te(this);else if(typeof r!=`number`)throw TypeError(`scale must be a number`);return ne(this,r),this;default:throw Error(`invalid option: ${e}`)}}toString(e){return o(this,e)}[Symbol.iterator](){return this.entries()}*entries(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield[e,t,this.get(e,t)]}*values(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield this.get(e,t)}};L.prototype.klass=`Matrix`,typeof Symbol<`u`&&(L.prototype[Symbol.for(`nodejs.util.inspect.custom`)]=a);function re(e,t){return e-t}function ie(e){return e.every(e=>typeof e==`number`)}L.random=L.rand,L.randomInt=L.randInt,L.diagonal=L.diag,L.prototype.diagonal=L.prototype.diag,L.identity=L.eye,L.prototype.negate=L.prototype.neg,L.prototype.tensorProduct=L.prototype.kroneckerProduct;var R=class e extends L{data;#initData(e,t){if(this.data=[],Number.isInteger(t)&&t>=0)for(let n=0;n<e;n++)this.data.push(new Float64Array(t));else throw TypeError(`nColumns must be a positive integer`);this.rows=e,this.columns=t}constructor(n,r){if(super(),e.isMatrix(n))this.#initData(n.rows,n.columns),e.copy(n,this);else if(Number.isInteger(n)&&n>=0)this.#initData(n,r);else if(t.isAnyArray(n)){let e=n;if(n=e.length,r=n?e[0].length:0,typeof r!=`number`)throw TypeError(`Data must be a 2D array with at least one element`);this.data=[];for(let t=0;t<n;t++){if(e[t].length!==r)throw RangeError(`Inconsistent array dimensions`);if(!ie(e[t]))throw TypeError(`Input data contains non-numeric values`);this.data.push(Float64Array.from(e[t]))}this.rows=n,this.columns=r}else throw TypeError(`First argument must be a positive number or an array`)}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}removeRow(e){return f(this,e),this.data.splice(e,1),--this.rows,this}addRow(e,t){return t===void 0&&(t=e,e=this.rows),f(this,e,!0),t=Float64Array.from(m(this,t)),this.data.splice(e,0,t),this.rows+=1,this}removeColumn(e){p(this,e);for(let t=0;t<this.rows;t++){let n=new Float64Array(this.columns-1);for(let r=0;r<e;r++)n[r]=this.data[t][r];for(let r=e+1;r<this.columns;r++)n[r-1]=this.data[t][r];this.data[t]=n}return--this.columns,this}addColumn(e,t){t===void 0&&(t=e,e=this.columns),p(this,e,!0),t=h(this,t);for(let n=0;n<this.rows;n++){let r=new Float64Array(this.columns+1),i=0;for(;i<e;i++)r[i]=this.data[n][i];for(r[i++]=t[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}};u(L,R);var ae=class e extends L{#matrix;get size(){return this.#matrix.size}get rows(){return this.#matrix.rows}get columns(){return this.#matrix.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(e){return R.isMatrix(e)&&e.klassType===`SymmetricMatrix`}static zeros(e){return new this(e)}static ones(e){return new this(e).fill(1)}constructor(e){if(super(),R.isMatrix(e)){if(!e.isSymmetric())throw TypeError(`not symmetric data`);this.#matrix=R.copy(e,new R(e.rows,e.rows))}else if(Number.isInteger(e)&&e>=0)this.#matrix=new R(e,e);else if(this.#matrix=new R(e),!this.isSymmetric())throw TypeError(`not symmetric data`)}clone(){let t=new e(this.diagonalSize);for(let[e,n,r]of this.upperRightEntries())t.set(e,n,r);return t}toMatrix(){return new R(this)}get(e,t){return this.#matrix.get(e,t)}set(e,t,n){return this.#matrix.set(e,t,n),this.#matrix.set(t,e,n),this}removeCross(e){return this.#matrix.removeRow(e),this.#matrix.removeColumn(e),this}addCross(e,t){t===void 0&&(t=e,e=this.diagonalSize);let n=t.slice();return n.splice(e,1),this.#matrix.addRow(e,n),this.#matrix.addColumn(e,t),this}applyMask(e){if(e.length!==this.diagonalSize)throw RangeError(`Mask size do not match with matrix size`);let t=[];for(let[n,r]of e.entries()){if(r)continue;t.push(n)}t.reverse();for(let e of t)this.removeCross(e);return this}toCompact(){let{diagonalSize:e}=this,t=Array(e*(e+1)/2);for(let n=0,r=0,i=0;i<t.length;i++)t[i]=this.get(r,n),++n>=e&&(n=++r);return t}static fromCompact(t){let n=t.length,r=(Math.sqrt(8*n+1)-1)/2;if(!Number.isInteger(r))throw TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);let i=new e(r);for(let e=0,a=0,o=0;o<n;o++)i.set(e,a,t[o]),++e>=r&&(e=++a);return i}*upperRightEntries(){for(let e=0,t=0;e<this.diagonalSize;){let n=this.get(e,t);yield[e,t,n],++t>=this.diagonalSize&&(t=++e)}}*upperRightValues(){for(let e=0,t=0;e<this.diagonalSize;)yield this.get(e,t),++t>=this.diagonalSize&&(t=++e)}};ae.prototype.klassType=`SymmetricMatrix`;var oe=class e extends ae{static isDistanceMatrix(e){return ae.isSymmetricMatrix(e)&&e.klassSubType===`DistanceMatrix`}constructor(e){if(super(e),!this.isDistance())throw TypeError(`Provided arguments do no produce a distance matrix`)}set(e,t,n){return e===t&&(n=0),super.set(e,t,n)}addCross(e,t){return t===void 0&&(t=e,e=this.diagonalSize),t=t.slice(),t[e]=0,super.addCross(e,t)}toSymmetricMatrix(){return new ae(this)}clone(){let t=new e(this.diagonalSize);for(let[e,n,r]of this.upperRightEntries()){if(e===n)continue;t.set(e,n,r)}return t}toCompact(){let{diagonalSize:e}=this,t=(e-1)*e/2,n=Array(t);for(let t=1,r=0,i=0;i<n.length;i++)n[i]=this.get(r,t),++t>=e&&(t=++r+1);return n}static fromCompact(e){let t=e.length;if(t===0)return new this(0);let n=(Math.sqrt(8*t+1)+1)/2;if(!Number.isInteger(n))throw TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(e)}`);let r=new this(n);for(let i=1,a=0,o=0;o<t;o++)r.set(i,a,e[o]),++i>=n&&(i=++a+1);return r}};oe.prototype.klassSubType=`DistanceMatrix`;var z=class extends L{constructor(e,t,n){super(),this.matrix=e,this.rows=t,this.columns=n}},se=class extends z{constructor(e,t){p(e,t),super(e,e.rows,1),this.column=t}set(e,t,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}},ce=class extends z{constructor(e,t){_(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}},le=class extends z{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}},ue=class extends z{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}},de=class extends z{constructor(e,t){f(e,t),super(e,1,e.columns),this.row=t}set(e,t,n){return this.matrix.set(this.row,t,n),this}get(e,t){return this.matrix.get(this.row,t)}},fe=class extends z{constructor(e,t){g(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}},B=class extends z{constructor(e,t,n){g(e,t),_(e,n),super(e,t.length,n.length),this.rowIndices=t,this.columnIndices=n}set(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}},pe=class extends z{constructor(e,t,n,r,i){v(e,t,n,r,i),super(e,n-t+1,i-r+1),this.startRow=t,this.startColumn=r}set(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}},me=class extends z{constructor(e){super(e,e.columns,e.rows)}set(e,t,n){return this.matrix.set(t,e,n),this}get(e,t){return this.matrix.get(t,e)}},he=class extends L{constructor(e,t={}){let{rows:n=1}=t;if(e.length%n!==0)throw Error(`the data length is not divisible by the number of rows`);super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,t,n){let r=this._calculateIndex(e,t);return this.data[r]=n,this}get(e,t){let n=this._calculateIndex(e,t);return this.data[n]}_calculateIndex(e,t){return e*this.columns+t}},V=class extends L{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}};function ge(e,n){if(t.isAnyArray(e))return e[0]&&t.isAnyArray(e[0])?new V(e):new he(e,n);throw Error(`the argument is not an array`)}var _e=class{constructor(e){e=V.checkMatrix(e);let t=e.clone(),n=t.rows,r=t.columns,i=new Float64Array(n),a=1,o,s,c,l,u,d,f,p,m;for(o=0;o<n;o++)i[o]=o;for(p=new Float64Array(n),s=0;s<r;s++){for(o=0;o<n;o++)p[o]=t.get(o,s);for(o=0;o<n;o++){for(m=Math.min(o,s),u=0,c=0;c<m;c++)u+=t.get(o,c)*p[c];p[o]-=u,t.set(o,s,p[o])}for(l=s,o=s+1;o<n;o++)Math.abs(p[o])>Math.abs(p[l])&&(l=o);if(l!==s){for(c=0;c<r;c++)d=t.get(l,c),t.set(l,c,t.get(s,c)),t.set(s,c,d);f=i[l],i[l]=i[s],i[s]=f,a=-a}if(s<n&&t.get(s,s)!==0)for(o=s+1;o<n;o++)t.set(o,s,t.get(o,s)/t.get(s,s))}this.LU=t,this.pivotVector=i,this.pivotSign=a}isSingular(){let e=this.LU,t=e.columns;for(let n=0;n<t;n++)if(e.get(n,n)===0)return!0;return!1}solve(e){e=R.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw Error(`Invalid matrix dimensions`);if(this.isSingular())throw Error(`LU matrix is singular`);let n=e.columns,r=e.subMatrixRow(this.pivotVector,0,n-1),i=t.columns,a,o,s;for(s=0;s<i;s++)for(a=s+1;a<i;a++)for(o=0;o<n;o++)r.set(a,o,r.get(a,o)-r.get(s,o)*t.get(a,s));for(s=i-1;s>=0;s--){for(o=0;o<n;o++)r.set(s,o,r.get(s,o)/t.get(s,s));for(a=0;a<s;a++)for(o=0;o<n;o++)r.set(a,o,r.get(a,o)-r.get(s,o)*t.get(a,s))}return r}get determinant(){let e=this.LU;if(!e.isSquare())throw Error(`Matrix must be square`);let t=this.pivotSign,n=e.columns;for(let r=0;r<n;r++)t*=e.get(r,r);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,r=new R(t,n);for(let i=0;i<t;i++)for(let t=0;t<n;t++)i>t?r.set(i,t,e.get(i,t)):i===t?r.set(i,t,1):r.set(i,t,0);return r}get upperTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,r=new R(t,n);for(let i=0;i<t;i++)for(let t=0;t<n;t++)i<=t?r.set(i,t,e.get(i,t)):r.set(i,t,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}};function H(e,t){let n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):t===0?0:(n=e/t,Math.abs(t)*Math.sqrt(1+n*n))}var ve=class{constructor(e){e=V.checkMatrix(e);let t=e.clone(),n=e.rows,r=e.columns,i=new Float64Array(r),a,o,s,c;for(s=0;s<r;s++){let e=0;for(a=s;a<n;a++)e=H(e,t.get(a,s));if(e!==0){for(t.get(s,s)<0&&(e=-e),a=s;a<n;a++)t.set(a,s,t.get(a,s)/e);for(t.set(s,s,t.get(s,s)+1),o=s+1;o<r;o++){for(c=0,a=s;a<n;a++)c+=t.get(a,s)*t.get(a,o);for(c=-c/t.get(s,s),a=s;a<n;a++)t.set(a,o,t.get(a,o)+c*t.get(a,s))}}i[s]=-e}this.QR=t,this.Rdiag=i}solve(e){e=R.checkMatrix(e);let t=this.QR,n=t.rows;if(e.rows!==n)throw Error(`Matrix row dimensions must agree`);if(!this.isFullRank())throw Error(`Matrix is rank deficient`);let r=e.columns,i=e.clone(),a=t.columns,o,s,c,l;for(c=0;c<a;c++)for(s=0;s<r;s++){for(l=0,o=c;o<n;o++)l+=t.get(o,c)*i.get(o,s);for(l=-l/t.get(c,c),o=c;o<n;o++)i.set(o,s,i.get(o,s)+l*t.get(o,c))}for(c=a-1;c>=0;c--){for(s=0;s<r;s++)i.set(c,s,i.get(c,s)/this.Rdiag[c]);for(o=0;o<c;o++)for(s=0;s<r;s++)i.set(o,s,i.get(o,s)-i.get(c,s)*t.get(o,c))}return i.subMatrix(0,a-1,0,r-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(this.Rdiag[t]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,t=e.columns,n=new R(t,t),r,i;for(r=0;r<t;r++)for(i=0;i<t;i++)r<i?n.set(r,i,e.get(r,i)):r===i?n.set(r,i,this.Rdiag[r]):n.set(r,i,0);return n}get orthogonalMatrix(){let e=this.QR,t=e.rows,n=e.columns,r=new R(t,n),i,a,o,s;for(o=n-1;o>=0;o--){for(i=0;i<t;i++)r.set(i,o,0);for(r.set(o,o,1),a=o;a<n;a++)if(e.get(o,o)!==0){for(s=0,i=o;i<t;i++)s+=e.get(i,o)*r.get(i,a);for(s=-s/e.get(o,o),i=o;i<t;i++)r.set(i,a,r.get(i,a)+s*e.get(i,o))}}return r}},ye=class{constructor(e,t={}){if(e=V.checkMatrix(e),e.isEmpty())throw Error(`Matrix must be non-empty`);let n=e.rows,r=e.columns,{computeLeftSingularVectors:i=!0,computeRightSingularVectors:a=!0,autoTranspose:o=!1}=t,s=!!i,c=!!a,l=!1,u;if(n<r)if(!o)u=e.clone(),console.warn(`Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose`);else{u=e.transpose(),n=u.rows,r=u.columns,l=!0;let t=s;s=c,c=t}else u=e.clone();let d=Math.min(n,r),f=Math.min(n+1,r),p=new Float64Array(f),m=new R(n,d),h=new R(r,r),g=new Float64Array(r),_=new Float64Array(n),v=new Float64Array(f);for(let e=0;e<f;e++)v[e]=e;let y=Math.min(n-1,r),b=Math.max(0,Math.min(r-2,n)),x=Math.max(y,b);for(let e=0;e<x;e++){if(e<y){p[e]=0;for(let t=e;t<n;t++)p[e]=H(p[e],u.get(t,e));if(p[e]!==0){u.get(e,e)<0&&(p[e]=-p[e]);for(let t=e;t<n;t++)u.set(t,e,u.get(t,e)/p[e]);u.set(e,e,u.get(e,e)+1)}p[e]=-p[e]}for(let t=e+1;t<r;t++){if(e<y&&p[e]!==0){let r=0;for(let i=e;i<n;i++)r+=u.get(i,e)*u.get(i,t);r=-r/u.get(e,e);for(let i=e;i<n;i++)u.set(i,t,u.get(i,t)+r*u.get(i,e))}g[t]=u.get(e,t)}if(s&&e<y)for(let t=e;t<n;t++)m.set(t,e,u.get(t,e));if(e<b){g[e]=0;for(let t=e+1;t<r;t++)g[e]=H(g[e],g[t]);if(g[e]!==0){g[e+1]<0&&(g[e]=0-g[e]);for(let t=e+1;t<r;t++)g[t]/=g[e];g[e+1]+=1}if(g[e]=-g[e],e+1<n&&g[e]!==0){for(let t=e+1;t<n;t++)_[t]=0;for(let t=e+1;t<n;t++)for(let n=e+1;n<r;n++)_[t]+=g[n]*u.get(t,n);for(let t=e+1;t<r;t++){let r=-g[t]/g[e+1];for(let i=e+1;i<n;i++)u.set(i,t,u.get(i,t)+r*_[i])}}if(c)for(let t=e+1;t<r;t++)h.set(t,e,g[t])}}let S=Math.min(r,n+1);if(y<r&&(p[y]=u.get(y,y)),n<S&&(p[S-1]=0),b+1<S&&(g[b]=u.get(b,S-1)),g[S-1]=0,s){for(let e=y;e<d;e++){for(let t=0;t<n;t++)m.set(t,e,0);m.set(e,e,1)}for(let e=y-1;e>=0;e--)if(p[e]!==0){for(let t=e+1;t<d;t++){let r=0;for(let i=e;i<n;i++)r+=m.get(i,e)*m.get(i,t);r=-r/m.get(e,e);for(let i=e;i<n;i++)m.set(i,t,m.get(i,t)+r*m.get(i,e))}for(let t=e;t<n;t++)m.set(t,e,-m.get(t,e));m.set(e,e,1+m.get(e,e));for(let t=0;t<e-1;t++)m.set(t,e,0)}else{for(let t=0;t<n;t++)m.set(t,e,0);m.set(e,e,1)}}if(c)for(let e=r-1;e>=0;e--){if(e<b&&g[e]!==0)for(let t=e+1;t<r;t++){let n=0;for(let i=e+1;i<r;i++)n+=h.get(i,e)*h.get(i,t);n=-n/h.get(e+1,e);for(let i=e+1;i<r;i++)h.set(i,t,h.get(i,t)+n*h.get(i,e))}for(let t=0;t<r;t++)h.set(t,e,0);h.set(e,e,1)}let C=S-1,w=2**-52;for(;S>0;){let e,t;for(e=S-2;e>=-1&&e!==-1;e--){let t=Number.MIN_VALUE+w*Math.abs(p[e]+Math.abs(p[e+1]));if(Math.abs(g[e])<=t||Number.isNaN(g[e])){g[e]=0;break}}if(e===S-2)t=4;else{let n;for(n=S-1;n>=e&&n!==e;n--){let t=(n===S?0:Math.abs(g[n]))+(n===e+1?0:Math.abs(g[n-1]));if(Math.abs(p[n])<=w*t){p[n]=0;break}}n===e?t=3:n===S-1?t=1:(t=2,e=n)}switch(e++,t){case 1:{let t=g[S-2];g[S-2]=0;for(let n=S-2;n>=e;n--){let i=H(p[n],t),a=p[n]/i,o=t/i;if(p[n]=i,n!==e&&(t=-o*g[n-1],g[n-1]=a*g[n-1]),c)for(let e=0;e<r;e++)i=a*h.get(e,n)+o*h.get(e,S-1),h.set(e,S-1,-o*h.get(e,n)+a*h.get(e,S-1)),h.set(e,n,i)}break}case 2:{let t=g[e-1];g[e-1]=0;for(let r=e;r<S;r++){let i=H(p[r],t),a=p[r]/i,o=t/i;if(p[r]=i,t=-o*g[r],g[r]=a*g[r],s)for(let t=0;t<n;t++)i=a*m.get(t,r)+o*m.get(t,e-1),m.set(t,e-1,-o*m.get(t,r)+a*m.get(t,e-1)),m.set(t,r,i)}break}case 3:{let t=Math.max(Math.abs(p[S-1]),Math.abs(p[S-2]),Math.abs(g[S-2]),Math.abs(p[e]),Math.abs(g[e])),i=p[S-1]/t,a=p[S-2]/t,o=g[S-2]/t,l=p[e]/t,u=g[e]/t,d=((a+i)*(a-i)+o*o)/2,f=i*o*(i*o),_=0;(d!==0||f!==0)&&(_=d<0?0-Math.sqrt(d*d+f):Math.sqrt(d*d+f),_=f/(d+_));let v=(l+i)*(l-i)+_,y=l*u;for(let t=e;t<S-1;t++){let i=H(v,y);i===0&&(i=Number.MIN_VALUE);let a=v/i,o=y/i;if(t!==e&&(g[t-1]=i),v=a*p[t]+o*g[t],g[t]=a*g[t]-o*p[t],y=o*p[t+1],p[t+1]=a*p[t+1],c)for(let e=0;e<r;e++)i=a*h.get(e,t)+o*h.get(e,t+1),h.set(e,t+1,-o*h.get(e,t)+a*h.get(e,t+1)),h.set(e,t,i);if(i=H(v,y),i===0&&(i=Number.MIN_VALUE),a=v/i,o=y/i,p[t]=i,v=a*g[t]+o*p[t+1],p[t+1]=-o*g[t]+a*p[t+1],y=o*g[t+1],g[t+1]=a*g[t+1],s&&t<n-1)for(let e=0;e<n;e++)i=a*m.get(e,t)+o*m.get(e,t+1),m.set(e,t+1,-o*m.get(e,t)+a*m.get(e,t+1)),m.set(e,t,i)}g[S-2]=v;break}case 4:if(p[e]<=0&&(p[e]=p[e]<0?-p[e]:0,c))for(let t=0;t<=C;t++)h.set(t,e,-h.get(t,e));for(;e<C&&!(p[e]>=p[e+1]);){let t=p[e];if(p[e]=p[e+1],p[e+1]=t,c&&e<r-1)for(let n=0;n<r;n++)t=h.get(n,e+1),h.set(n,e+1,h.get(n,e)),h.set(n,e,t);if(s&&e<n-1)for(let r=0;r<n;r++)t=m.get(r,e+1),m.set(r,e+1,m.get(r,e)),m.set(r,e,t);e++}S--;break}}if(l){let e=h;h=m,m=e}this.m=n,this.n=r,this.s=p,this.U=m,this.V=h}solve(e){let t=e,n=this.threshold,r=this.s.length,i=R.zeros(r,r);for(let e=0;e<r;e++)Math.abs(this.s[e])<=n?i.set(e,e,0):i.set(e,e,1/this.s[e]);let a=this.U,o=this.rightSingularVectors,s=o.mmul(i),c=o.rows,l=a.rows,u=R.zeros(c,l);for(let e=0;e<c;e++)for(let t=0;t<l;t++){let n=0;for(let i=0;i<r;i++)n+=s.get(e,i)*a.get(t,i);u.set(e,t,n)}return u.mmul(t)}solveForDiagonal(e){return this.solve(R.diag(e))}inverse(){let e=this.V,t=this.threshold,n=e.rows,r=e.columns,i=new R(n,this.s.length);for(let a=0;a<n;a++)for(let n=0;n<r;n++)Math.abs(this.s[n])>t&&i.set(a,n,e.get(a,n)/this.s[n]);let a=this.U,o=a.rows,s=a.columns,c=new R(n,o);for(let e=0;e<n;e++)for(let t=0;t<o;t++){let n=0;for(let r=0;r<s;r++)n+=i.get(e,r)*a.get(t,r);c.set(e,t,n)}return c}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*2**-52,t=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return 2**-52/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return R.diag(this.s)}};function be(e,t=!1){return e=V.checkMatrix(e),t?new ye(e).inverse():xe(e,R.eye(e.rows))}function xe(e,t,n=!1){return e=V.checkMatrix(e),t=V.checkMatrix(t),n?new ye(e).solve(t):e.isSquare()?new _e(e).solve(t):new ve(e).solve(t)}function Se(e){if(e=R.checkMatrix(e),e.isSquare()){if(e.columns===0)return 1;let t,n,r,i;if(e.columns===2)return t=e.get(0,0),n=e.get(0,1),r=e.get(1,0),i=e.get(1,1),t*i-n*r;if(e.columns===3){let i,a,o;return i=new B(e,[1,2],[1,2]),a=new B(e,[1,2],[0,2]),o=new B(e,[1,2],[0,1]),t=e.get(0,0),n=e.get(0,1),r=e.get(0,2),t*Se(i)-n*Se(a)+r*Se(o)}else return new _e(e).determinant}else throw Error(`determinant can only be calculated for a square matrix`)}function Ce(e,t){let n=[];for(let r=0;r<e;r++)r!==t&&n.push(r);return n}function we(e,t,n,r=1e-9,i=1e-9){if(e>i)return Array(t.rows+1).fill(0);{let e=t.addRow(n,[0]);for(let t=0;t<e.rows;t++)Math.abs(e.get(t,0))<r&&e.set(t,0,0);return e.to1DArray()}}function Te(e,t={}){let{thresholdValue:n=1e-9,thresholdError:r=1e-9}=t;e=R.checkMatrix(e);let i=e.rows,a=new R(i,i);for(let t=0;t<i;t++){let o=R.columnVector(e.getRow(t)),s=e.subMatrixRow(Ce(i,t)).transpose(),c=new ye(s).solve(o),l=R.sub(o,s.mmul(c)).abs().max();a.setRow(t,we(l,c,t,n,r))}return a}function Ee(e,t=2**-52){if(e=R.checkMatrix(e),e.isEmpty())return e.transpose();let n=new ye(e,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,a=n.diagonal;for(let e=0;e<a.length;e++)Math.abs(a[e])>t?a[e]=1/a[e]:a[e]=0;return i.mmul(R.diag(a).mmul(r.transpose()))}function De(e,n=e,r={}){e=new R(e);let i=!1;if(typeof n==`object`&&!R.isMatrix(n)&&!t.isAnyArray(n)?(r=n,n=e,i=!0):n=new R(n),e.rows!==n.rows)throw TypeError(`Both matrices must have the same number of rows`);let{center:a=!0}=r;a&&(e=e.center(`column`),i||(n=n.center(`column`)));let o=e.transpose().mmul(n);for(let t=0;t<o.rows;t++)for(let n=0;n<o.columns;n++)o.set(t,n,o.get(t,n)*(1/(e.rows-1)));return o}function Oe(e,n=e,r={}){e=new R(e);let i=!1;if(typeof n==`object`&&!R.isMatrix(n)&&!t.isAnyArray(n)?(r=n,n=e,i=!0):n=new R(n),e.rows!==n.rows)throw TypeError(`Both matrices must have the same number of rows`);let{center:a=!0,scale:o=!0}=r;a&&(e.center(`column`),i||n.center(`column`)),o&&(e.scale(`column`),i||n.scale(`column`));let s=e.standardDeviation(`column`,{unbiased:!0}),c=i?s:n.standardDeviation(`column`,{unbiased:!0}),l=e.transpose().mmul(n);for(let t=0;t<l.rows;t++)for(let n=0;n<l.columns;n++)l.set(t,n,l.get(t,n)*(1/(s[t]*c[n]))*(1/(e.rows-1)));return l}var ke=class{constructor(e,t={}){let{assumeSymmetric:n=!1}=t;if(e=V.checkMatrix(e),!e.isSquare())throw Error(`Matrix is not a square matrix`);if(e.isEmpty())throw Error(`Matrix must be non-empty`);let r=e.columns,i=new R(r,r),a=new Float64Array(r),o=new Float64Array(r),s=e,c,l,u=!1;if(u=n?!0:e.isSymmetric(),u){for(c=0;c<r;c++)for(l=0;l<r;l++)i.set(c,l,s.get(c,l));Ae(r,o,a,i),je(r,o,a,i)}else{let e=new R(r,r),t=new Float64Array(r);for(l=0;l<r;l++)for(c=0;c<r;c++)e.set(c,l,s.get(c,l));Me(r,e,t,i),Ne(r,o,a,i,e)}this.n=r,this.e=o,this.d=a,this.V=i}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,t=this.e,n=this.d,r=new R(e,e),i,a;for(i=0;i<e;i++){for(a=0;a<e;a++)r.set(i,a,0);r.set(i,i,n[i]),t[i]>0?r.set(i,i+1,t[i]):t[i]<0&&r.set(i,i-1,t[i])}return r}};function Ae(e,t,n,r){let i,a,o,s,c,l,u,d;for(c=0;c<e;c++)n[c]=r.get(e-1,c);for(s=e-1;s>0;s--){for(d=0,o=0,l=0;l<s;l++)d+=Math.abs(n[l]);if(d===0)for(t[s]=n[s-1],c=0;c<s;c++)n[c]=r.get(s-1,c),r.set(s,c,0),r.set(c,s,0);else{for(l=0;l<s;l++)n[l]/=d,o+=n[l]*n[l];for(i=n[s-1],a=Math.sqrt(o),i>0&&(a=-a),t[s]=d*a,o-=i*a,n[s-1]=i-a,c=0;c<s;c++)t[c]=0;for(c=0;c<s;c++){for(i=n[c],r.set(c,s,i),a=t[c]+r.get(c,c)*i,l=c+1;l<=s-1;l++)a+=r.get(l,c)*n[l],t[l]+=r.get(l,c)*i;t[c]=a}for(i=0,c=0;c<s;c++)t[c]/=o,i+=t[c]*n[c];for(u=i/(o+o),c=0;c<s;c++)t[c]-=u*n[c];for(c=0;c<s;c++){for(i=n[c],a=t[c],l=c;l<=s-1;l++)r.set(l,c,r.get(l,c)-(i*t[l]+a*n[l]));n[c]=r.get(s-1,c),r.set(s,c,0)}}n[s]=o}for(s=0;s<e-1;s++){if(r.set(e-1,s,r.get(s,s)),r.set(s,s,1),o=n[s+1],o!==0){for(l=0;l<=s;l++)n[l]=r.get(l,s+1)/o;for(c=0;c<=s;c++){for(a=0,l=0;l<=s;l++)a+=r.get(l,s+1)*r.get(l,c);for(l=0;l<=s;l++)r.set(l,c,r.get(l,c)-a*n[l])}}for(l=0;l<=s;l++)r.set(l,s+1,0)}for(c=0;c<e;c++)n[c]=r.get(e-1,c),r.set(e-1,c,0);r.set(e-1,e-1,1),t[0]=0}function je(e,t,n,r){let i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y;for(o=1;o<e;o++)t[o-1]=t[o];t[e-1]=0;let b=0,x=0,S=2**-52;for(l=0;l<e;l++){for(x=Math.max(x,Math.abs(n[l])+Math.abs(t[l])),u=l;u<e&&!(Math.abs(t[u])<=S*x);)u++;if(u>l)do{for(i=n[l],d=(n[l+1]-i)/(2*t[l]),f=H(d,1),d<0&&(f=-f),n[l]=t[l]/(d+f),n[l+1]=t[l]*(d+f),p=n[l+1],a=i-n[l],o=l+2;o<e;o++)n[o]-=a;for(b+=a,d=n[u],m=1,h=m,g=m,_=t[l+1],v=0,y=0,o=u-1;o>=l;o--)for(g=h,h=m,y=v,i=m*t[o],a=m*d,f=H(d,t[o]),t[o+1]=v*f,v=t[o]/f,m=d/f,d=m*n[o]-v*i,n[o+1]=a+v*(m*i+v*n[o]),c=0;c<e;c++)a=r.get(c,o+1),r.set(c,o+1,v*r.get(c,o)+m*a),r.set(c,o,m*r.get(c,o)-v*a);d=-v*y*g*_*t[l]/p,t[l]=v*d,n[l]=m*d}while(Math.abs(t[l])>S*x);n[l]=n[l]+b,t[l]=0}for(o=0;o<e-1;o++){for(c=o,d=n[o],s=o+1;s<e;s++)n[s]<d&&(c=s,d=n[s]);if(c!==o)for(n[c]=n[o],n[o]=d,s=0;s<e;s++)d=r.get(s,o),r.set(s,o,r.get(s,c)),r.set(s,c,d)}}function Me(e,t,n,r){let i=e-1,a,o,s,c,l,u,d;for(u=1;u<=i-1;u++){for(d=0,c=u;c<=i;c++)d+=Math.abs(t.get(c,u-1));if(d!==0){for(s=0,c=i;c>=u;c--)n[c]=t.get(c,u-1)/d,s+=n[c]*n[c];for(o=Math.sqrt(s),n[u]>0&&(o=-o),s-=n[u]*o,n[u]=n[u]-o,l=u;l<e;l++){for(a=0,c=i;c>=u;c--)a+=n[c]*t.get(c,l);for(a/=s,c=u;c<=i;c++)t.set(c,l,t.get(c,l)-a*n[c])}for(c=0;c<=i;c++){for(a=0,l=i;l>=u;l--)a+=n[l]*t.get(c,l);for(a/=s,l=u;l<=i;l++)t.set(c,l,t.get(c,l)-a*n[l])}n[u]=d*n[u],t.set(u,u-1,d*o)}}for(c=0;c<e;c++)for(l=0;l<e;l++)r.set(c,l,c===l?1:0);for(u=i-1;u>=1;u--)if(t.get(u,u-1)!==0){for(c=u+1;c<=i;c++)n[c]=t.get(c,u-1);for(l=u;l<=i;l++){for(o=0,c=u;c<=i;c++)o+=n[c]*r.get(c,l);for(o=o/n[u]/t.get(u,u-1),c=u;c<=i;c++)r.set(c,l,r.get(c,l)+o*n[c])}}}function Ne(e,t,n,r,i){let a=e-1,o=e-1,s=2**-52,c=0,l=0,u=0,d=0,f=0,p=0,m=0,h=0,g,_,v,y,b,x,S,C,w,T,E,D,O,k,A;for(g=0;g<e;g++)for((g<0||g>o)&&(n[g]=i.get(g,g),t[g]=0),_=Math.max(g-1,0);_<e;_++)l+=Math.abs(i.get(g,_));for(;a>=0;){for(y=a;y>0&&(p=Math.abs(i.get(y-1,y-1))+Math.abs(i.get(y,y)),p===0&&(p=l),!(Math.abs(i.get(y,y-1))<s*p));)y--;if(y===a)i.set(a,a,i.get(a,a)+c),n[a]=i.get(a,a),t[a]=0,a--,h=0;else if(y===a-1){if(S=i.get(a,a-1)*i.get(a-1,a),u=(i.get(a-1,a-1)-i.get(a,a))/2,d=u*u+S,m=Math.sqrt(Math.abs(d)),i.set(a,a,i.get(a,a)+c),i.set(a-1,a-1,i.get(a-1,a-1)+c),C=i.get(a,a),d>=0){for(m=u>=0?u+m:u-m,n[a-1]=C+m,n[a]=n[a-1],m!==0&&(n[a]=C-S/m),t[a-1]=0,t[a]=0,C=i.get(a,a-1),p=Math.abs(C)+Math.abs(m),u=C/p,d=m/p,f=Math.sqrt(u*u+d*d),u/=f,d/=f,_=a-1;_<e;_++)m=i.get(a-1,_),i.set(a-1,_,d*m+u*i.get(a,_)),i.set(a,_,d*i.get(a,_)-u*m);for(g=0;g<=a;g++)m=i.get(g,a-1),i.set(g,a-1,d*m+u*i.get(g,a)),i.set(g,a,d*i.get(g,a)-u*m);for(g=0;g<=o;g++)m=r.get(g,a-1),r.set(g,a-1,d*m+u*r.get(g,a)),r.set(g,a,d*r.get(g,a)-u*m)}else n[a-1]=C+u,n[a]=C+u,t[a-1]=m,t[a]=-m;a-=2,h=0}else{if(C=i.get(a,a),w=0,S=0,y<a&&(w=i.get(a-1,a-1),S=i.get(a,a-1)*i.get(a-1,a)),h===10){for(c+=C,g=0;g<=a;g++)i.set(g,g,i.get(g,g)-C);p=Math.abs(i.get(a,a-1))+Math.abs(i.get(a-1,a-2)),C=w=.75*p,S=-.4375*p*p}if(h===30&&(p=(w-C)/2,p=p*p+S,p>0)){for(p=Math.sqrt(p),w<C&&(p=-p),p=C-S/((w-C)/2+p),g=0;g<=a;g++)i.set(g,g,i.get(g,g)-p);c+=p,C=w=S=.964}for(h+=1,b=a-2;b>=y&&(m=i.get(b,b),f=C-m,p=w-m,u=(f*p-S)/i.get(b+1,b)+i.get(b,b+1),d=i.get(b+1,b+1)-m-f-p,f=i.get(b+2,b+1),p=Math.abs(u)+Math.abs(d)+Math.abs(f),u/=p,d/=p,f/=p,!(b===y||Math.abs(i.get(b,b-1))*(Math.abs(d)+Math.abs(f))<s*(Math.abs(u)*(Math.abs(i.get(b-1,b-1))+Math.abs(m)+Math.abs(i.get(b+1,b+1))))));)b--;for(g=b+2;g<=a;g++)i.set(g,g-2,0),g>b+2&&i.set(g,g-3,0);for(v=b;v<=a-1&&(k=v!==a-1,v!==b&&(u=i.get(v,v-1),d=i.get(v+1,v-1),f=k?i.get(v+2,v-1):0,C=Math.abs(u)+Math.abs(d)+Math.abs(f),C!==0&&(u/=C,d/=C,f/=C)),C!==0);v++)if(p=Math.sqrt(u*u+d*d+f*f),u<0&&(p=-p),p!==0){for(v===b?y!==b&&i.set(v,v-1,-i.get(v,v-1)):i.set(v,v-1,-p*C),u+=p,C=u/p,w=d/p,m=f/p,d/=u,f/=u,_=v;_<e;_++)u=i.get(v,_)+d*i.get(v+1,_),k&&(u+=f*i.get(v+2,_),i.set(v+2,_,i.get(v+2,_)-u*m)),i.set(v,_,i.get(v,_)-u*C),i.set(v+1,_,i.get(v+1,_)-u*w);for(g=0;g<=Math.min(a,v+3);g++)u=C*i.get(g,v)+w*i.get(g,v+1),k&&(u+=m*i.get(g,v+2),i.set(g,v+2,i.get(g,v+2)-u*f)),i.set(g,v,i.get(g,v)-u),i.set(g,v+1,i.get(g,v+1)-u*d);for(g=0;g<=o;g++)u=C*r.get(g,v)+w*r.get(g,v+1),k&&(u+=m*r.get(g,v+2),r.set(g,v+2,r.get(g,v+2)-u*f)),r.set(g,v,r.get(g,v)-u),r.set(g,v+1,r.get(g,v+1)-u*d)}}}if(l!==0){for(a=e-1;a>=0;a--)if(u=n[a],d=t[a],d===0)for(y=a,i.set(a,a,1),g=a-1;g>=0;g--){for(S=i.get(g,g)-u,f=0,_=y;_<=a;_++)f+=i.get(g,_)*i.get(_,a);if(t[g]<0)m=S,p=f;else if(y=g,t[g]===0?i.set(g,a,S===0?-f/(s*l):-f/S):(C=i.get(g,g+1),w=i.get(g+1,g),d=(n[g]-u)*(n[g]-u)+t[g]*t[g],x=(C*p-m*f)/d,i.set(g,a,x),i.set(g+1,a,Math.abs(C)>Math.abs(m)?(-f-S*x)/C:(-p-w*x)/m)),x=Math.abs(i.get(g,a)),s*x*x>1)for(_=g;_<=a;_++)i.set(_,a,i.get(_,a)/x)}else if(d<0)for(y=a-1,Math.abs(i.get(a,a-1))>Math.abs(i.get(a-1,a))?(i.set(a-1,a-1,d/i.get(a,a-1)),i.set(a-1,a,-(i.get(a,a)-u)/i.get(a,a-1))):(A=Pe(0,-i.get(a-1,a),i.get(a-1,a-1)-u,d),i.set(a-1,a-1,A[0]),i.set(a-1,a,A[1])),i.set(a,a-1,0),i.set(a,a,1),g=a-2;g>=0;g--){for(T=0,E=0,_=y;_<=a;_++)T+=i.get(g,_)*i.get(_,a-1),E+=i.get(g,_)*i.get(_,a);if(S=i.get(g,g)-u,t[g]<0)m=S,f=T,p=E;else if(y=g,t[g]===0?(A=Pe(-T,-E,S,d),i.set(g,a-1,A[0]),i.set(g,a,A[1])):(C=i.get(g,g+1),w=i.get(g+1,g),D=(n[g]-u)*(n[g]-u)+t[g]*t[g]-d*d,O=(n[g]-u)*2*d,D===0&&O===0&&(D=s*l*(Math.abs(S)+Math.abs(d)+Math.abs(C)+Math.abs(w)+Math.abs(m))),A=Pe(C*f-m*T+d*E,C*p-m*E-d*T,D,O),i.set(g,a-1,A[0]),i.set(g,a,A[1]),Math.abs(C)>Math.abs(m)+Math.abs(d)?(i.set(g+1,a-1,(-T-S*i.get(g,a-1)+d*i.get(g,a))/C),i.set(g+1,a,(-E-S*i.get(g,a)-d*i.get(g,a-1))/C)):(A=Pe(-f-w*i.get(g,a-1),-p-w*i.get(g,a),m,d),i.set(g+1,a-1,A[0]),i.set(g+1,a,A[1]))),x=Math.max(Math.abs(i.get(g,a-1)),Math.abs(i.get(g,a))),s*x*x>1)for(_=g;_<=a;_++)i.set(_,a-1,i.get(_,a-1)/x),i.set(_,a,i.get(_,a)/x)}for(g=0;g<e;g++)if(g<0||g>o)for(_=g;_<e;_++)r.set(g,_,i.get(g,_));for(_=e-1;_>=0;_--)for(g=0;g<=o;g++){for(m=0,v=0;v<=Math.min(_,o);v++)m+=r.get(g,v)*i.get(v,_);r.set(g,_,m)}}}function Pe(e,t,n,r){let i,a;return Math.abs(n)>Math.abs(r)?(i=r/n,a=n+i*r,[(e+i*t)/a,(t-i*e)/a]):(i=n/r,a=r+i*n,[(i*e+t)/a,(i*t-e)/a])}var Fe=class{constructor(e){if(e=V.checkMatrix(e),!e.isSymmetric())throw Error(`Matrix is not symmetric`);let t=e,n=t.rows,r=new R(n,n),i=!0,a,o,s;for(o=0;o<n;o++){let e=0;for(s=0;s<o;s++){let n=0;for(a=0;a<s;a++)n+=r.get(s,a)*r.get(o,a);n=(t.get(o,s)-n)/r.get(s,s),r.set(o,s,n),e+=n*n}for(e=t.get(o,o)-e,i&&=e>0,r.set(o,o,Math.sqrt(Math.max(e,0))),s=o+1;s<n;s++)r.set(o,s,0)}this.L=r,this.positiveDefinite=i}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=V.checkMatrix(e);let t=this.L,n=t.rows;if(e.rows!==n)throw Error(`Matrix dimensions do not match`);if(this.isPositiveDefinite()===!1)throw Error(`Matrix is not positive definite`);let r=e.columns,i=e.clone(),a,o,s;for(s=0;s<n;s++)for(o=0;o<r;o++){for(a=0;a<s;a++)i.set(s,o,i.get(s,o)-i.get(a,o)*t.get(s,a));i.set(s,o,i.get(s,o)/t.get(s,s))}for(s=n-1;s>=0;s--)for(o=0;o<r;o++){for(a=s+1;a<n;a++)i.set(s,o,i.get(s,o)-i.get(a,o)*t.get(a,s));i.set(s,o,i.get(s,o)/t.get(s,s))}return i}get lowerTriangularMatrix(){return this.L}},Ie=class{constructor(e,n={}){e=V.checkMatrix(e);let{Y:r}=n,{scaleScores:i=!1,maxIterations:a=1e3,terminationCriteria:o=1e-10}=n,s;if(r){if(r=t.isAnyArray(r)&&typeof r[0]==`number`?R.columnVector(r):V.checkMatrix(r),r.rows!==e.rows)throw Error(`Y should have the same number of rows as X`);s=r.getColumnVector(0)}else s=e.getColumnVector(0);let c=1,l,u,d,f;for(let t=0;t<a&&c>o;t++)d=e.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),d=d.div(d.norm()),l=e.mmul(d).div(d.transpose().mmul(d).get(0,0)),t>0&&(c=l.clone().sub(f).pow(2).sum()),f=l.clone(),r?(u=r.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),u=u.div(u.norm()),s=r.mmul(u).div(u.transpose().mmul(u).get(0,0))):s=l;if(r){let t=e.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0));t=t.div(t.norm());let n=e.clone().sub(l.clone().mmul(t.transpose())),i=s.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),a=r.clone().sub(l.clone().mulS(i.get(0,0)).mmul(u.transpose()));this.t=l,this.p=t.transpose(),this.w=d.transpose(),this.q=u,this.u=s,this.s=l.transpose().mmul(l),this.xResidual=n,this.yResidual=a,this.betas=i}else this.w=d.transpose(),this.s=l.transpose().mmul(l).sqrt(),i?this.t=l.clone().div(this.s.get(0,0)):this.t=l,this.xResidual=e.sub(l.mmul(d.transpose()))}};exports.AbstractMatrix=L,exports.CHO=Fe,exports.CholeskyDecomposition=Fe,exports.DistanceMatrix=oe,exports.EVD=ke,exports.EigenvalueDecomposition=ke,exports.LU=_e,exports.LuDecomposition=_e,exports.Matrix=R,exports.MatrixColumnSelectionView=ce,exports.MatrixColumnView=se,exports.MatrixFlipColumnView=le,exports.MatrixFlipRowView=ue,exports.MatrixRowSelectionView=fe,exports.MatrixRowView=de,exports.MatrixSelectionView=B,exports.MatrixSubView=pe,exports.MatrixTransposeView=me,exports.NIPALS=Ie,exports.Nipals=Ie,exports.QR=ve,exports.QrDecomposition=ve,exports.SVD=ye,exports.SingularValueDecomposition=ye,exports.SymmetricMatrix=ae,exports.WrapperMatrix1D=he,exports.WrapperMatrix2D=V,exports.correlation=Oe,exports.covariance=De,exports.default=R,exports.determinant=Se,exports.inverse=be,exports.linearDependencies=Te,exports.pseudoInverse=Ee,exports.solve=xe,exports.wrap=ge}))(),1);q.AbstractMatrix,q.CHO,q.CholeskyDecomposition,q.DistanceMatrix,q.EVD,q.EigenvalueDecomposition,q.LU,q.LuDecomposition;let zi=q.Matrix;q.MatrixColumnSelectionView,q.MatrixColumnView,q.MatrixFlipColumnView,q.MatrixFlipRowView,q.MatrixRowSelectionView,q.MatrixRowView,q.MatrixSelectionView,q.MatrixSubView,q.MatrixTransposeView,q.NIPALS,q.Nipals,q.QR,q.QrDecomposition,q.SVD;let Bi=q.SingularValueDecomposition;q.SymmetricMatrix,q.WrapperMatrix1D,q.WrapperMatrix2D,q.correlation,q.covariance,q.default.Matrix?q.default.Matrix:q.Matrix,q.determinant,q.inverse,q.linearDependencies,q.pseudoInverse,q.solve,q.wrap;let Vi={center:[0,0],linkDistance:50};var Hi=class{constructor(e={}){this.options=e,this.id=`mds`,this.options=Object.assign(Object.assign({},Vi),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,e,t)})}genericMDSLayout(e,t,n){return p(this,void 0,void 0,function*(){let{center:r=[0,0],linkDistance:i=50}=Object.assign(Object.assign({},this.options),n),a=t.getAllNodes(),o=t.getAllEdges();if(!a?.length||a.length===1)return vr(t,e,r);let s=ir({nodes:a,edges:o},!1),c=rr(s);Ui(c);let l=ar(c,i),u=Wi(l),d=[];return u.forEach((e,t)=>{let n=ur(a[t]);n.data.x=e[0]+r[0],n.data.y=e[1]+r[1],d.push(n)}),e&&d.forEach(e=>t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})),{nodes:d,edges:o}})}};let Ui=e=>{let t=-999999;e.forEach(e=>{e.forEach(e=>{e!==1/0&&t<e&&(t=e)})}),e.forEach((n,r)=>{n.forEach((n,i)=>{n===1/0&&(e[r][i]=t)})})},Wi=e=>{let t=zi.mul(zi.pow(e,2),-.5),n=t.mean(`row`),r=t.mean(`column`),i=t.mean();t.add(i).subRowVector(n).subColumnVector(r);let a=new Bi(t),o=zi.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map(e=>zi.mul([e],[o]).toJSON()[0].splice(0,2))};function Gi(e){return!!e.tick&&!!e.stop}let Ki={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},qi={center:[0,0],comboPadding:10,treeKey:`combo`};var Ji=class{constructor(e={}){this.options=e,this.id=`comboCombined`,this.options=Object.assign(Object.assign({},qi),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,e,t)})}genericComboCombinedLayout(e,t,n){return p(this,void 0,void 0,function*(){let r=this.initVals(Object.assign(Object.assign({},this.options),n)),{center:i,treeKey:a,outerLayout:o}=r,s=t.getAllNodes().filter(e=>!e.data._isCombo),c=t.getAllNodes().filter(e=>e.data._isCombo),l=t.getAllEdges(),u=s?.length;if(!u||u===1)return vr(t,e,i);let d=[],f=new Map;s.forEach(e=>{f.set(e.id,e)});let p=new Map;c.forEach(e=>{p.set(e.id,e)});let m=new Map,h=this.getInnerGraphs(t,a,f,p,l,r,m);yield Promise.all(h);let g=new Map,_=[],v=new Map,y=!0;t.getRoots(a).forEach(e=>{let n=m.get(e.id),r=p.get(e.id)||f.get(e.id),i={id:e.id,data:Object.assign(Object.assign({},e.data),{x:n.data.x||r.data.x,y:n.data.y||r.data.y,fx:n.data.fx||r.data.fx,fy:n.data.fy||r.data.fy,mass:n.data.mass||r.data.mass,size:n.data.size})};_.push(i),g.set(e.id,!0),!isNaN(i.data.x)&&i.data.x!==0&&!isNaN(i.data.y)&&i.data.y!==0?y=!1:(i.data.x=Math.random()*100,i.data.y=Math.random()*100),cr(t,[e],t=>{t.id!==e.id&&v.set(t.id,e.id)},`TB`,a)});let x=[];l.forEach(e=>{let t=v.get(e.source)||e.source,n=v.get(e.target)||e.target;t!==n&&g.has(t)&&g.has(n)&&x.push({id:e.id,source:t,target:n,data:{}})});let S;if(_?.length){if(_.length===1)_[0].data.x=i[0],_[0].data.y=i[1];else{let e=new b({nodes:_,edges:x}),t=o||new Si;y&&Ki[t.id]&&(yield(_.length<100?new Hi:new Tr).assign(e));let n=Object.assign({center:i,kg:5,preventOverlap:!0,animate:!1},t.id===`force`?{gravity:1,factor:4,linkDistance:(e,t,n)=>{let r=Math.max(...t.data.size)||32,i=Math.max(...n.data.size)||32;return r/2+i/2+200}}:{});S=yield Yi(t,e,n)}m.forEach(e=>{var t;let n=S.nodes.find(t=>t.id===e.id);if(n){let{x:t,y:r}=n.data;e.data.visited=!0,e.data.x=t,e.data.y=r,d.push({id:e.id,data:{x:t,y:r}})}let{x:r,y:i}=e.data;(t=e.data.nodes)==null||t.forEach(e=>{d.push({id:e.id,data:{x:e.data.x+r,y:e.data.y+i}})})}),m.forEach(({data:e})=>{let{x:t,y:n,visited:r,nodes:i}=e;i?.forEach(e=>{if(!r){let r=d.find(t=>t.id===e.id);r.data.x+=t||0,r.data.y+=n||0}})})}return e&&d.forEach(e=>{t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})}),{nodes:d,edges:l}})}initVals(e){let t=Object.assign({},e),{nodeSize:n,spacing:r,comboPadding:i}=e,a,o;if(o=H(r)?()=>r:le(r)?r:()=>0,t.spacing=o,!n)a=e=>{let t=o(e);return e.size?nr(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+t)/2:fe(e.size)?((e.size.width>e.size.height?e.size.width:e.size.height)+t)/2:(e.size+t)/2:32+t/2};else if(le(n))a=e=>{let t=n(e),r=o(e);return nr(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+r)/2:((t||32)+r)/2};else if(nr(n)){let e=(n[0]>n[1]?n[0]:n[1])/2;a=t=>e+o(t)/2}else{let e=n/2;a=t=>e+o(t)/2}t.nodeSize=a;let s;return s=H(i)?()=>i:nr(i)?()=>Math.max.apply(null,i):le(i)?i:()=>0,t.comboPadding=s,t}getInnerGraphs(e,t,n,r,i,a,o){let{nodeSize:s,comboPadding:c,spacing:l,innerLayout:u}=a,d=u||new Tr({}),f={center:[0,0],preventOverlap:!0,nodeSpacing:l},m=[],h=e=>{let t=c?.(e)||10;return nr(t)&&(t=Math.max(...t)),{size:t?[t*2,t*2]:[30,30],padding:t}};return e.getRoots(t).forEach(a=>{o.set(a.id,{id:a.id,data:{nodes:[],size:h(a).size}});let c=Promise.resolve();cr(e,[a],a=>{if(!a.data._isCombo)return;let{size:l,padding:u}=h(a);if(!e.getChildren(a.id,t)?.length)o.set(a.id,{id:a.id,data:Object.assign(Object.assign({},a.data),{size:l})});else{let l=o.get(a.id);o.set(a.id,{id:a.id,data:Object.assign({nodes:[]},l?.data)});let m=new Map,h=e.getChildren(a.id,t).map(e=>{if(e.data._isCombo)return o.has(e.id)||o.set(e.id,{id:e.id,data:Object.assign({},e.data)}),m.set(e.id,!0),o.get(e.id);let t=n.get(e.id)||r.get(e.id);return m.set(e.id,!0),{id:e.id,data:Object.assign(Object.assign({},t.data),e.data)}}),g={nodes:h,edges:i.filter(e=>m.has(e.source)&&m.has(e.target))},_=1/0;h.forEach(e=>{let{size:t}=e.data;t||=o.get(e.id)?.data.size||s?.(e)||[30,30],H(t)&&(t=[t,t]);let[n,r]=t;_>n&&(_=n),_>r&&(_=r),e.data.size=t}),c=c.then(()=>p(this,void 0,void 0,function*(){let e=new b(g);yield Yi(d,e,f,!0);let{minX:t,minY:n,maxX:r,maxY:i}=or(h),s={x:(r+t)/2,y:(i+n)/2};g.nodes.forEach(e=>{e.data.x-=s.x,e.data.y-=s.y});let c=[Math.max(r-t,_)+u*2,Math.max(i-n,_)+u*2];o.get(a.id).data.size=c,o.get(a.id).data.nodes=h}))}return!0},`BT`,t),m.push(c)}),m}};function Yi(e,t,n,r){return p(this,void 0,void 0,function*(){return Gi(e)?(e.execute(t,n),e.stop(),e.tick(n.iterations??300)):r?yield e.assign(t,n):yield e.execute(t,n)})}function Xi(e,t){var n,r=1;e??=0,t??=0;function i(){var i,a=n.length,o,s=0,c=0;for(i=0;i<a;++i)o=n[i],s+=o.x,c+=o.y;for(s=(s/a-e)*r,c=(c/a-t)*r,i=0;i<a;++i)o=n[i],o.x-=s,o.y-=c}return i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i}function J(e){return function(){return e}}function Zi(e){return(e()-.5)*1e-6}function Qi(e){return e.x+e.vx}function $i(e){return e.y+e.vy}function ea(e){var t,n,r,i=1,a=1;typeof e!=`function`&&(e=J(e==null?1:+e));function o(){for(var e,o=t.length,c,l,u,d,f,p,m=0;m<a;++m)for(c=Ur(t,Qi,$i).visitAfter(s),e=0;e<o;++e)l=t[e],f=n[l.index],p=f*f,u=l.x+l.vx,d=l.y+l.vy,c.visit(h);function h(e,t,n,a,o){var s=e.data,c=e.r,m=f+c;if(s){if(s.index>l.index){var h=u-s.x-s.vx,g=d-s.y-s.vy,_=h*h+g*g;_<m*m&&(h===0&&(h=Zi(r),_+=h*h),g===0&&(g=Zi(r),_+=g*g),_=(m-(_=Math.sqrt(_)))/_*i,l.vx+=(h*=_)*(m=(c*=c)/(p+c)),l.vy+=(g*=_)*m,s.vx-=h*(m=1-m),s.vy-=g*m)}return}return t>u+m||a<u-m||n>d+m||o<d-m}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function c(){if(t){var r,i=t.length,a;for(n=Array(i),r=0;r<i;++r)a=t[r],n[a.index]=+e(a,r,t)}}return o.initialize=function(e,n){t=e,r=n,c()},o.iterations=function(e){return arguments.length?(a=+e,o):a},o.strength=function(e){return arguments.length?(i=+e,o):i},o.radius=function(t){return arguments.length?(e=typeof t==`function`?t:J(+t),c(),o):e},o}function ta(e){return e.index}function na(e,t){var n=e.get(t);if(!n)throw Error(`node not found: `+t);return n}function ra(e){var t=ta,n=d,r,i=J(30),a,o,s,c,l,u=1;e??=[];function d(e){return 1/Math.min(s[e.source.index],s[e.target.index])}function f(t){for(var n=0,i=e.length;n<u;++n)for(var o=0,s,d,f,p,m,h,g;o<i;++o)s=e[o],d=s.source,f=s.target,p=f.x+f.vx-d.x-d.vx||Zi(l),m=f.y+f.vy-d.y-d.vy||Zi(l),h=Math.sqrt(p*p+m*m),h=(h-a[o])/h*t*r[o],p*=h,m*=h,f.vx-=p*(g=c[o]),f.vy-=m*g,d.vx+=p*(g=1-g),d.vy+=m*g}function p(){if(o){var n,i=o.length,l=e.length,u=new Map(o.map((e,n)=>[t(e,n,o),e])),d;for(n=0,s=Array(i);n<l;++n)d=e[n],d.index=n,typeof d.source!=`object`&&(d.source=na(u,d.source)),typeof d.target!=`object`&&(d.target=na(u,d.target)),s[d.source.index]=(s[d.source.index]||0)+1,s[d.target.index]=(s[d.target.index]||0)+1;for(n=0,c=Array(l);n<l;++n)d=e[n],c[n]=s[d.source.index]/(s[d.source.index]+s[d.target.index]);r=Array(l),m(),a=Array(l),h()}}function m(){if(o)for(var t=0,i=e.length;t<i;++t)r[t]=+n(e[t],t,e)}function h(){if(o)for(var t=0,n=e.length;t<n;++t)a[t]=+i(e[t],t,e)}return f.initialize=function(e,t){o=e,l=t,p()},f.links=function(t){return arguments.length?(e=t,p(),f):e},f.id=function(e){return arguments.length?(t=e,f):t},f.iterations=function(e){return arguments.length?(u=+e,f):u},f.strength=function(e){return arguments.length?(n=typeof e==`function`?e:J(+e),m(),f):n},f.distance=function(e){return arguments.length?(i=typeof e==`function`?e:J(+e),h(),f):i},f}var ia={value:()=>{}};function aa(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+``)||r in n||/[\s.]/.test(r))throw Error(`illegal type: `+r);n[r]=[]}return new oa(n)}function oa(e){this._=e}function sa(e,t){return e.trim().split(/^|\s+/).map(function(e){var n=``,r=e.indexOf(`.`);if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw Error(`unknown type: `+e);return{type:e,name:n}})}oa.prototype=aa.prototype={constructor:oa,on:function(e,t){var n=this._,r=sa(e+``,n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=ca(n[i],e.name)))return i;return}if(t!=null&&typeof t!=`function`)throw Error(`invalid callback: `+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=la(n[i],e.name,t);else if(t==null)for(i in n)n[i]=la(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new oa(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function ca(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function la(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ia,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ua=aa,da=0,fa=0,pa=0,ma=1e3,ha,ga,_a=0,va=0,ya=0,ba=typeof performance==`object`&&performance.now?performance:Date,xa=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Sa(){return va||=(xa(Ca),ba.now()+ya)}function Ca(){va=0}function wa(){this._call=this._time=this._next=null}wa.prototype=Ta.prototype={constructor:wa,restart:function(e,t,n){if(typeof e!=`function`)throw TypeError(`callback is not a function`);n=(n==null?Sa():+n)+(t==null?0:+t),!this._next&&ga!==this&&(ga?ga._next=this:ha=this,ga=this),this._call=e,this._time=n,Aa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Aa())}};function Ta(e,t,n){var r=new wa;return r.restart(e,t,n),r}function Ea(){Sa(),++da;for(var e=ha,t;e;)(t=va-e._time)>=0&&e._call.call(void 0,t),e=e._next;--da}function Da(){va=(_a=ba.now())+ya,da=fa=0;try{Ea()}finally{da=0,ka(),va=0}}function Oa(){var e=ba.now(),t=e-_a;t>ma&&(ya-=t,_a=e)}function ka(){for(var e,t=ha,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ha=n);ga=e,Aa(r)}function Aa(e){da||(fa&&=clearTimeout(fa),e-va>24?(e<1/0&&(fa=setTimeout(Da,e-ba.now()-ya)),pa&&=clearInterval(pa)):(pa||=(_a=ba.now(),setInterval(Oa,ma)),da=1,xa(Da)))}let ja=4294967296;function Ma(){let e=1;return()=>(e=(1664525*e+1013904223)%ja)/ja}function Na(e){return e.x}function Pa(e){return e.y}var Fa=10,Ia=Math.PI*(3-Math.sqrt(5));function La(e){var t,n=1,r=.001,i=1-r**(1/300),a=0,o=.6,s=new Map,c=Ta(d),l=ua(`tick`,`end`),u=Ma();e??=[];function d(){f(),l.call(`tick`,t),n<r&&(c.stop(),l.call(`end`,t))}function f(r){var c,l=e.length,u;r===void 0&&(r=1);for(var d=0;d<r;++d)for(n+=(a-n)*i,s.forEach(function(e){e(n)}),c=0;c<l;++c)u=e[c],u.fx==null?u.x+=u.vx*=o:(u.x=u.fx,u.vx=0),u.fy==null?u.y+=u.vy*=o:(u.y=u.fy,u.vy=0);return t}function p(){for(var t=0,n=e.length,r;t<n;++t){if(r=e[t],r.index=t,r.fx!=null&&(r.x=r.fx),r.fy!=null&&(r.y=r.fy),isNaN(r.x)||isNaN(r.y)){var i=Fa*Math.sqrt(.5+t),a=t*Ia;r.x=i*Math.cos(a),r.y=i*Math.sin(a)}(isNaN(r.vx)||isNaN(r.vy))&&(r.vx=r.vy=0)}}function m(t){return t.initialize&&t.initialize(e,u),t}return p(),t={tick:f,restart:function(){return c.restart(d),t},stop:function(){return c.stop(),t},nodes:function(n){return arguments.length?(e=n,p(),s.forEach(m),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(a=+e,t):a},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},randomSource:function(e){return arguments.length?(u=e,s.forEach(m),t):u},force:function(e,n){return arguments.length>1?(n==null?s.delete(e):s.set(e,m(n)),t):s.get(e)},find:function(t,n,r){var i=0,a=e.length,o,s,c,l,u;for(r==null?r=1/0:r*=r,i=0;i<a;++i)l=e[i],o=t-l.x,s=n-l.y,c=o*o+s*s,c<r&&(u=l,r=c);return u},on:function(e,n){return arguments.length>1?(l.on(e,n),t):l.on(e)}}}function Ra(){var e,t,n,r,i=J(-30),a,o=1,s=1/0,c=.81;function l(n){var i,a=e.length,o=Ur(e,Na,Pa).visitAfter(d);for(r=n,i=0;i<a;++i)t=e[i],o.visit(f)}function u(){if(e){var t,n=e.length,r;for(a=Array(n),t=0;t<n;++t)r=e[t],a[r.index]=+i(r,t,e)}}function d(e){var t=0,n,r,i=0,o,s,c;if(e.length){for(o=s=c=0;c<4;++c)(n=e[c])&&(r=Math.abs(n.value))&&(t+=n.value,i+=r,o+=r*n.x,s+=r*n.y);e.x=o/i,e.y=s/i}else{n=e,n.x=n.data.x,n.y=n.data.y;do t+=a[n.data.index];while(n=n.next)}e.value=t}function f(e,i,l,u){if(!e.value)return!0;var d=e.x-t.x,f=e.y-t.y,p=u-i,m=d*d+f*f;if(p*p/c<m)return m<s&&(d===0&&(d=Zi(n),m+=d*d),f===0&&(f=Zi(n),m+=f*f),m<o&&(m=Math.sqrt(o*m)),t.vx+=d*e.value*r/m,t.vy+=f*e.value*r/m),!0;if(!(e.length||m>=s)){(e.data!==t||e.next)&&(d===0&&(d=Zi(n),m+=d*d),f===0&&(f=Zi(n),m+=f*f),m<o&&(m=Math.sqrt(o*m)));do e.data!==t&&(p=a[e.data.index]*r/m,t.vx+=d*p,t.vy+=f*p);while(e=e.next)}}return l.initialize=function(t,r){e=t,n=r,u()},l.strength=function(e){return arguments.length?(i=typeof e==`function`?e:J(+e),u(),l):i},l.distanceMin=function(e){return arguments.length?(o=e*e,l):Math.sqrt(o)},l.distanceMax=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l.theta=function(e){return arguments.length?(c=e*e,l):Math.sqrt(c)},l}function za(e,t,n){var r,i=J(.1),a,o;typeof e!=`function`&&(e=J(+e)),t??=0,n??=0;function s(e){for(var i=0,s=r.length;i<s;++i){var c=r[i],l=c.x-t||1e-6,u=c.y-n||1e-6,d=Math.sqrt(l*l+u*u),f=(o[i]-d)*a[i]*e/d;c.vx+=l*f,c.vy+=u*f}}function c(){if(r){var t,n=r.length;for(a=Array(n),o=Array(n),t=0;t<n;++t)o[t]=+e(r[t],t,r),a[t]=isNaN(o[t])?0:+i(r[t],t,r)}}return s.initialize=function(e){r=e,c()},s.strength=function(e){return arguments.length?(i=typeof e==`function`?e:J(+e),c(),s):i},s.radius=function(t){return arguments.length?(e=typeof t==`function`?t:J(+t),c(),s):e},s.x=function(e){return arguments.length?(t=+e,s):t},s.y=function(e){return arguments.length?(n=+e,s):n},s}function Ba(e){var t=J(.1),n,r,i;typeof e!=`function`&&(e=J(e==null?0:+e));function a(e){for(var t=0,a=n.length,o;t<a;++t)o=n[t],o.vx+=(i[t]-o.x)*r[t]*e}function o(){if(n){var a,o=n.length;for(r=Array(o),i=Array(o),a=0;a<o;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return a.initialize=function(e){n=e,o()},a.strength=function(e){return arguments.length?(t=typeof e==`function`?e:J(+e),o(),a):t},a.x=function(t){return arguments.length?(e=typeof t==`function`?t:J(+t),o(),a):e},a}function Va(e){var t=J(.1),n,r,i;typeof e!=`function`&&(e=J(e==null?0:+e));function a(e){for(var t=0,a=n.length,o;t<a;++t)o=n[t],o.vy+=(i[t]-o.y)*r[t]*e}function o(){if(n){var a,o=n.length;for(r=Array(o),i=Array(o),a=0;a<o;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return a.initialize=function(e){n=e,o()},a.strength=function(e){return arguments.length?(t=typeof e==`function`?e:J(+e),o(),a):t},a.y=function(t){return arguments.length?(e=typeof t==`function`?t:J(+t),o(),a):e},a}var Ha=class{constructor(e){this.id=`d3-force`,this.config={inputNodeAttrs:[`x`,`y`,`vx`,`vy`,`fx`,`fy`],outputNodeAttrs:[`x`,`y`,`vx`,`vy`],simulationAttrs:[`alpha`,`alphaMin`,`alphaDecay`,`alphaTarget`,`velocityDecay`,`randomSource`]},this.forceMap={link:ra,manyBody:Ra,center:Xi,collide:ea,radial:za,x:Ba,y:Va},this.options={link:{id:e=>e.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},Ce(this.options,e),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericLayout(!0,e,t)})}stop(){this.simulation.stop()}tick(e){return this.simulation.tick(e),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(e,t){let n=this.context.nodes.find(t=>t.id===e);n&&t.forEach((e,t)=>{if(typeof e==`number`||e===null){let r=[`fx`,`fy`,`fz`][t];n[r]=e}})}getOptions(e){let t=Ce({},this.options,e);return t.collide&&t.collide?.radius===void 0&&(t.collide=t.collide||{},t.collide.radius=t.nodeSize??10),t.iterations===void 0&&(t.link&&t.link.iterations===void 0&&(t.iterations=t.link.iterations),t.collide&&t.collide.iterations===void 0&&(t.iterations=t.collide.iterations)),this.context.options=t,t}genericLayout(e,t,n){var r;return p(this,void 0,void 0,function*(){let i=this.getOptions(n),a=t.getAllNodes().map(({id:e,data:t})=>Object.assign(Object.assign({id:e},t),Te(t.data,this.config.inputNodeAttrs))),o=t.getAllEdges().map(e=>Object.assign({},e));Object.assign(this.context,{assign:e,nodes:a,edges:o,graph:t});let s=new Promise(e=>{this.resolver=e}),c=this.setSimulation(i);return c.nodes(a),(r=c.force(`link`))==null||r.links(o),s})}getResult(){let{assign:e,nodes:t,edges:n,graph:r}=this.context,i=t.map(e=>({id:e.id,data:Object.assign(Object.assign({},e.data),Te(e,this.config.outputNodeAttrs))})),a=n.map(({id:e,source:t,target:n,data:r})=>({id:e,source:typeof t==`object`?t.id:t,target:typeof n==`object`?n.id:n,data:r}));return e&&i.forEach(e=>r.mergeNodeData(e.id,e.data)),{nodes:i,edges:a}}initSimulation(){return La()}setSimulation(e){let t=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||=t.on(`tick`,()=>e.onTick?.call(e,this.getResult())).on(`end`,()=>this.resolver?.call(this,this.getResult())),Ua(t,this.config.simulationAttrs.map(t=>[t,e[t]])),Object.entries(this.forceMap).forEach(([n,r])=>{let i=n;if(e[n]){let n=t.force(i);n||(n=r(),t.force(i,n)),Ua(n,Object.entries(e[i]))}else t.force(i,null)}),t}};let Ua=(e,t)=>t.reduce((t,[n,r])=>!t[n]||r===void 0?t:t[n].call(e,r),e);function Wa(e,t,n){var r,i=1;e??=0,t??=0,n??=0;function a(){var a,o=r.length,s,c=0,l=0,u=0;for(a=0;a<o;++a)s=r[a],c+=s.x||0,l+=s.y||0,u+=s.z||0;for(c=(c/o-e)*i,l=(l/o-t)*i,u=(u/o-n)*i,a=0;a<o;++a)s=r[a],c&&(s.x-=c),l&&(s.y-=l),u&&(s.z-=u)}return a.initialize=function(e){r=e},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(e){return arguments.length?(t=+e,a):t},a.z=function(e){return arguments.length?(n=+e,a):n},a.strength=function(e){return arguments.length?(i=+e,a):i},a}function Ga(e){let t=+this._x.call(null,e);return Ka(this.cover(t),t,e)}function Ka(e,t,n){if(isNaN(t))return e;var r,i=e._root,a={data:n},o=e._x0,s=e._x1,c,l,u,d,f;if(!i)return e._root=a,e;for(;i.length;)if((u=t>=(c=(o+s)/2))?o=c:s=c,r=i,!(i=i[d=+u]))return r[d]=a,e;if(l=+e._x.call(null,i.data),t===l)return a.next=i,r?r[d]=a:e._root=a,e;do r=r?r[d]=[,,]:e._root=[,,],(u=t>=(c=(o+s)/2))?o=c:s=c;while((d=+u)==(f=+(l>=c)));return r[f]=i,r[d]=a,e}function qa(e){Array.isArray(e)||(e=Array.from(e));let t=e.length,n=new Float64Array(t),r=1/0,i=-1/0;for(let a=0,o;a<t;++a)isNaN(o=+this._x.call(null,e[a]))||(n[a]=o,o<r&&(r=o),o>i&&(i=o));if(r>i)return this;this.cover(r).cover(i);for(let r=0;r<t;++r)Ka(this,n[r],e[r]);return this}function Ja(e){if(isNaN(e=+e))return this;var t=this._x0,n=this._x1;if(isNaN(t))n=(t=Math.floor(e))+1;else{for(var r=n-t||1,i=this._root,a,o;t>e||e>=n;)switch(o=+(e<t),a=[,,],a[o]=i,i=a,r*=2,o){case 0:n=t+r;break;case 1:t=n-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=t,this._x1=n,this}function Ya(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Xa(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Za(e,t,n){this.node=e,this.x0=t,this.x1=n}function Qa(e,t){var n,r=this._x0,i,a,o=this._x1,s=[],c=this._root,l,u;for(c&&s.push(new Za(c,r,o)),t==null?t=1/0:(r=e-t,o=e+t);l=s.pop();)if(!(!(c=l.node)||(i=l.x0)>o||(a=l.x1)<r))if(c.length){var d=(i+a)/2;s.push(new Za(c[1],d,a),new Za(c[0],i,d)),(u=+(e>=d))&&(l=s[s.length-1],s[s.length-1]=s[s.length-1-u],s[s.length-1-u]=l)}else{var f=Math.abs(e-+this._x.call(null,c.data));f<t&&(t=f,r=e-f,o=e+f,n=c.data)}return n}function $a(e){if(isNaN(c=+this._x.call(null,e)))return this;var t,n=this._root,r,i,a,o=this._x0,s=this._x1,c,l,u,d,f;if(!n)return this;if(n.length)for(;;){if((u=c>=(l=(o+s)/2))?o=l:s=l,t=n,!(n=n[d=+u]))return this;if(!n.length)break;t[d+1&1]&&(r=t,f=d)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[d]=a:delete t[d],(n=t[0]||t[1])&&n===(t[1]||t[0])&&!n.length&&(r?r[f]=n:this._root=n),this):(this._root=a,this)}function eo(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function to(){return this._root}function no(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function ro(e){var t=[],n,r=this._root,i,a,o;for(r&&t.push(new Za(r,this._x0,this._x1));n=t.pop();)if(!e(r=n.node,a=n.x0,o=n.x1)&&r.length){var s=(a+o)/2;(i=r[1])&&t.push(new Za(i,s,o)),(i=r[0])&&t.push(new Za(i,a,s))}return this}function io(e){var t=[],n=[],r;for(this._root&&t.push(new Za(this._root,this._x0,this._x1));r=t.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.x1,c=(o+s)/2;(a=i[0])&&t.push(new Za(a,o,c)),(a=i[1])&&t.push(new Za(a,c,s))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.x1);return this}function ao(e){return e[0]}function oo(e){return arguments.length?(this._x=e,this):this._x}function so(e,t){var n=new co(t??ao,NaN,NaN);return e==null?n:n.addAll(e)}function co(e,t,n){this._x=e,this._x0=t,this._x1=n,this._root=void 0}function lo(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Y=so.prototype=co.prototype;Y.copy=function(){var e=new co(this._x,this._x0,this._x1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=lo(t),e;for(n=[{source:t,target:e._root=[,,]}];t=n.pop();)for(var i=0;i<2;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=[,,]}):t.target[i]=lo(r));return e},Y.add=Ga,Y.addAll=qa,Y.cover=Ja,Y.data=Ya,Y.extent=Xa,Y.find=Qa,Y.remove=$a,Y.removeAll=eo,Y.root=to,Y.size=no,Y.visit=ro,Y.visitAfter=io,Y.x=oo;function X(e){return function(){return e}}function uo(e){return(e()-.5)*1e-6}function fo(e){return e.x+e.vx}function po(e){return e.y+e.vy}function mo(e){return e.z+e.vz}function ho(e){var t,n,r,i,a=1,o=1;typeof e!=`function`&&(e=X(e==null?1:+e));function s(){for(var e,s=t.length,l,u,d,f,p,m,h,g=0;g<o;++g)for(l=(n===1?so(t,fo):n===2?Ur(t,fo,po):n===3?pi(t,fo,po,mo):null).visitAfter(c),e=0;e<s;++e)u=t[e],m=r[u.index],h=m*m,d=u.x+u.vx,n>1&&(f=u.y+u.vy),n>2&&(p=u.z+u.vz),l.visit(_);function _(e,t,r,o,s,c,l){var g=[t,r,o,s,c,l],_=g[0],v=g[1],y=g[2],b=g[n],x=g[n+1],S=g[n+2],C=e.data,w=e.r,T=m+w;if(C){if(C.index>u.index){var E=d-C.x-C.vx,D=n>1?f-C.y-C.vy:0,O=n>2?p-C.z-C.vz:0,k=E*E+D*D+O*O;k<T*T&&(E===0&&(E=uo(i),k+=E*E),n>1&&D===0&&(D=uo(i),k+=D*D),n>2&&O===0&&(O=uo(i),k+=O*O),k=(T-(k=Math.sqrt(k)))/k*a,u.vx+=(E*=k)*(T=(w*=w)/(h+w)),n>1&&(u.vy+=(D*=k)*T),n>2&&(u.vz+=(O*=k)*T),C.vx-=E*(T=1-T),n>1&&(C.vy-=D*T),n>2&&(C.vz-=O*T))}return}return _>d+T||b<d-T||n>1&&(v>f+T||x<f-T)||n>2&&(y>p+T||S<p-T)}}function c(e){if(e.data)return e.r=r[e.data.index];for(var t=e.r=0;t<2**n;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function l(){if(t){var n,i=t.length,a;for(r=Array(i),n=0;n<i;++n)a=t[n],r[a.index]=+e(a,n,t)}}return s.initialize=function(e,...r){t=e,i=r.find(e=>typeof e==`function`)||Math.random,n=r.find(e=>[1,2,3].includes(e))||2,l()},s.iterations=function(e){return arguments.length?(o=+e,s):o},s.strength=function(e){return arguments.length?(a=+e,s):a},s.radius=function(t){return arguments.length?(e=typeof t==`function`?t:X(+t),l(),s):e},s}function go(e){return e.index}function _o(e,t){var n=e.get(t);if(!n)throw Error(`node not found: `+t);return n}function vo(e){var t=go,n=f,r,i=X(30),a,o,s,c,l,u,d=1;e??=[];function f(e){return 1/Math.min(c[e.source.index],c[e.target.index])}function p(t){for(var n=0,i=e.length;n<d;++n)for(var o=0,c,f,p,m=0,h=0,g=0,_,v;o<i;++o)c=e[o],f=c.source,p=c.target,m=p.x+p.vx-f.x-f.vx||uo(u),s>1&&(h=p.y+p.vy-f.y-f.vy||uo(u)),s>2&&(g=p.z+p.vz-f.z-f.vz||uo(u)),_=Math.sqrt(m*m+h*h+g*g),_=(_-a[o])/_*t*r[o],m*=_,h*=_,g*=_,p.vx-=m*(v=l[o]),s>1&&(p.vy-=h*v),s>2&&(p.vz-=g*v),f.vx+=m*(v=1-v),s>1&&(f.vy+=h*v),s>2&&(f.vz+=g*v)}function m(){if(o){var n,i=o.length,s=e.length,u=new Map(o.map((e,n)=>[t(e,n,o),e])),d;for(n=0,c=Array(i);n<s;++n)d=e[n],d.index=n,typeof d.source!=`object`&&(d.source=_o(u,d.source)),typeof d.target!=`object`&&(d.target=_o(u,d.target)),c[d.source.index]=(c[d.source.index]||0)+1,c[d.target.index]=(c[d.target.index]||0)+1;for(n=0,l=Array(s);n<s;++n)d=e[n],l[n]=c[d.source.index]/(c[d.source.index]+c[d.target.index]);r=Array(s),h(),a=Array(s),g()}}function h(){if(o)for(var t=0,i=e.length;t<i;++t)r[t]=+n(e[t],t,e)}function g(){if(o)for(var t=0,n=e.length;t<n;++t)a[t]=+i(e[t],t,e)}return p.initialize=function(e,...t){o=e,u=t.find(e=>typeof e==`function`)||Math.random,s=t.find(e=>[1,2,3].includes(e))||2,m()},p.links=function(t){return arguments.length?(e=t,m(),p):e},p.id=function(e){return arguments.length?(t=e,p):t},p.iterations=function(e){return arguments.length?(d=+e,p):d},p.strength=function(e){return arguments.length?(n=typeof e==`function`?e:X(+e),h(),p):n},p.distance=function(e){return arguments.length?(i=typeof e==`function`?e:X(+e),g(),p):i},p}let yo=4294967296;function bo(){let e=1;return()=>(e=(1664525*e+1013904223)%yo)/yo}var xo=3;function So(e){return e.x}function Co(e){return e.y}function wo(e){return e.z}var To=10,Eo=Math.PI*(3-Math.sqrt(5)),Do=Math.PI*20/(9+Math.sqrt(221));function Oo(e,t){t||=2;var n=Math.min(xo,Math.max(1,Math.round(t))),r,i=1,a=.001,o=1-a**(1/300),s=0,c=.6,l=new Map,u=Ta(p),d=ua(`tick`,`end`),f=bo();e??=[];function p(){m(),d.call(`tick`,r),i<a&&(u.stop(),d.call(`end`,r))}function m(t){var a,u=e.length,d;t===void 0&&(t=1);for(var f=0;f<t;++f)for(i+=(s-i)*o,l.forEach(function(e){e(i)}),a=0;a<u;++a)d=e[a],d.fx==null?d.x+=d.vx*=c:(d.x=d.fx,d.vx=0),n>1&&(d.fy==null?d.y+=d.vy*=c:(d.y=d.fy,d.vy=0)),n>2&&(d.fz==null?d.z+=d.vz*=c:(d.z=d.fz,d.vz=0));return r}function h(){for(var t=0,r=e.length,i;t<r;++t){if(i=e[t],i.index=t,i.fx!=null&&(i.x=i.fx),i.fy!=null&&(i.y=i.fy),i.fz!=null&&(i.z=i.fz),isNaN(i.x)||n>1&&isNaN(i.y)||n>2&&isNaN(i.z)){var a=To*(n>2?Math.cbrt(.5+t):n>1?Math.sqrt(.5+t):t),o=t*Eo,s=t*Do;n===1?i.x=a:n===2?(i.x=a*Math.cos(o),i.y=a*Math.sin(o)):(i.x=a*Math.sin(o)*Math.cos(s),i.y=a*Math.cos(o),i.z=a*Math.sin(o)*Math.sin(s))}(isNaN(i.vx)||n>1&&isNaN(i.vy)||n>2&&isNaN(i.vz))&&(i.vx=0,n>1&&(i.vy=0),n>2&&(i.vz=0))}}function g(t){return t.initialize&&t.initialize(e,f,n),t}return h(),r={tick:m,restart:function(){return u.restart(p),r},stop:function(){return u.stop(),r},numDimensions:function(e){return arguments.length?(n=Math.min(xo,Math.max(1,Math.round(e))),l.forEach(g),r):n},nodes:function(t){return arguments.length?(e=t,h(),l.forEach(g),r):e},alpha:function(e){return arguments.length?(i=+e,r):i},alphaMin:function(e){return arguments.length?(a=+e,r):a},alphaDecay:function(e){return arguments.length?(o=+e,r):+o},alphaTarget:function(e){return arguments.length?(s=+e,r):s},velocityDecay:function(e){return arguments.length?(c=1-e,r):1-c},randomSource:function(e){return arguments.length?(f=e,l.forEach(g),r):f},force:function(e,t){return arguments.length>1?(t==null?l.delete(e):l.set(e,g(t)),r):l.get(e)},find:function(){var t=Array.prototype.slice.call(arguments),r=t.shift()||0,i=(n>1?t.shift():null)||0,a=(n>2?t.shift():null)||0,o=t.shift()||1/0,s=0,c=e.length,l,u,d,f,p,m;for(o*=o,s=0;s<c;++s)p=e[s],l=r-p.x,u=i-(p.y||0),d=a-(p.z||0),f=l*l+u*u+d*d,f<o&&(m=p,o=f);return m},on:function(e,t){return arguments.length>1?(d.on(e,t),r):d.on(e)}}}function ko(){var e,t,n,r,i,a=X(-30),o,s=1,c=1/0,l=.81;function u(r){var a,o=e.length,s=(t===1?so(e,So):t===2?Ur(e,So,Co):t===3?pi(e,So,Co,wo):null).visitAfter(f);for(i=r,a=0;a<o;++a)n=e[a],s.visit(p)}function d(){if(e){var t,n=e.length,r;for(o=Array(n),t=0;t<n;++t)r=e[t],o[r.index]=+a(r,t,e)}}function f(e){var n=0,r,i,a=0,s,c,l,u,d=e.length;if(d){for(s=c=l=u=0;u<d;++u)(r=e[u])&&(i=Math.abs(r.value))&&(n+=r.value,a+=i,s+=i*(r.x||0),c+=i*(r.y||0),l+=i*(r.z||0));n*=Math.sqrt(4/d),e.x=s/a,t>1&&(e.y=c/a),t>2&&(e.z=l/a)}else{r=e,r.x=r.data.x,t>1&&(r.y=r.data.y),t>2&&(r.z=r.data.z);do n+=o[r.data.index];while(r=r.next)}e.value=n}function p(e,a,u,d,f){if(!e.value)return!0;var p=[u,d,f][t-1],m=e.x-n.x,h=t>1?e.y-n.y:0,g=t>2?e.z-n.z:0,_=p-a,v=m*m+h*h+g*g;if(_*_/l<v)return v<c&&(m===0&&(m=uo(r),v+=m*m),t>1&&h===0&&(h=uo(r),v+=h*h),t>2&&g===0&&(g=uo(r),v+=g*g),v<s&&(v=Math.sqrt(s*v)),n.vx+=m*e.value*i/v,t>1&&(n.vy+=h*e.value*i/v),t>2&&(n.vz+=g*e.value*i/v)),!0;if(!(e.length||v>=c)){(e.data!==n||e.next)&&(m===0&&(m=uo(r),v+=m*m),t>1&&h===0&&(h=uo(r),v+=h*h),t>2&&g===0&&(g=uo(r),v+=g*g),v<s&&(v=Math.sqrt(s*v)));do e.data!==n&&(_=o[e.data.index]*i/v,n.vx+=m*_,t>1&&(n.vy+=h*_),t>2&&(n.vz+=g*_));while(e=e.next)}}return u.initialize=function(n,...i){e=n,r=i.find(e=>typeof e==`function`)||Math.random,t=i.find(e=>[1,2,3].includes(e))||2,d()},u.strength=function(e){return arguments.length?(a=typeof e==`function`?e:X(+e),d(),u):a},u.distanceMin=function(e){return arguments.length?(s=e*e,u):Math.sqrt(s)},u.distanceMax=function(e){return arguments.length?(c=e*e,u):Math.sqrt(c)},u.theta=function(e){return arguments.length?(l=e*e,u):Math.sqrt(l)},u}function Ao(e,t,n,r){var i,a,o=X(.1),s,c;typeof e!=`function`&&(e=X(+e)),t??=0,n??=0,r??=0;function l(e){for(var o=0,l=i.length;o<l;++o){var u=i[o],d=u.x-t||1e-6,f=(u.y||0)-n||1e-6,p=(u.z||0)-r||1e-6,m=Math.sqrt(d*d+f*f+p*p),h=(c[o]-m)*s[o]*e/m;u.vx+=d*h,a>1&&(u.vy+=f*h),a>2&&(u.vz+=p*h)}}function u(){if(i){var t,n=i.length;for(s=Array(n),c=Array(n),t=0;t<n;++t)c[t]=+e(i[t],t,i),s[t]=isNaN(c[t])?0:+o(i[t],t,i)}}return l.initialize=function(e,...t){i=e,a=t.find(e=>[1,2,3].includes(e))||2,u()},l.strength=function(e){return arguments.length?(o=typeof e==`function`?e:X(+e),u(),l):o},l.radius=function(t){return arguments.length?(e=typeof t==`function`?t:X(+t),u(),l):e},l.x=function(e){return arguments.length?(t=+e,l):t},l.y=function(e){return arguments.length?(n=+e,l):n},l.z=function(e){return arguments.length?(r=+e,l):r},l}function jo(e){var t=X(.1),n,r,i;typeof e!=`function`&&(e=X(e==null?0:+e));function a(e){for(var t=0,a=n.length,o;t<a;++t)o=n[t],o.vx+=(i[t]-o.x)*r[t]*e}function o(){if(n){var a,o=n.length;for(r=Array(o),i=Array(o),a=0;a<o;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return a.initialize=function(e){n=e,o()},a.strength=function(e){return arguments.length?(t=typeof e==`function`?e:X(+e),o(),a):t},a.x=function(t){return arguments.length?(e=typeof t==`function`?t:X(+t),o(),a):e},a}function Mo(e){var t=X(.1),n,r,i;typeof e!=`function`&&(e=X(e==null?0:+e));function a(e){for(var t=0,a=n.length,o;t<a;++t)o=n[t],o.vy+=(i[t]-o.y)*r[t]*e}function o(){if(n){var a,o=n.length;for(r=Array(o),i=Array(o),a=0;a<o;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return a.initialize=function(e){n=e,o()},a.strength=function(e){return arguments.length?(t=typeof e==`function`?e:X(+e),o(),a):t},a.y=function(t){return arguments.length?(e=typeof t==`function`?t:X(+t),o(),a):e},a}function No(e){var t=X(.1),n,r,i;typeof e!=`function`&&(e=X(e==null?0:+e));function a(e){for(var t=0,a=n.length,o;t<a;++t)o=n[t],o.vz+=(i[t]-o.z)*r[t]*e}function o(){if(n){var a,o=n.length;for(r=Array(o),i=Array(o),a=0;a<o;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return a.initialize=function(e){n=e,o()},a.strength=function(e){return arguments.length?(t=typeof e==`function`?e:X(+e),o(),a):t},a.z=function(t){return arguments.length?(e=typeof t==`function`?t:X(+t),o(),a):e},a}var Po=class extends Ha{constructor(){super(...arguments),this.id=`d3-force-3d`,this.config={inputNodeAttrs:[`x`,`y`,`z`,`vx`,`vy`,`vz`,`fx`,`fy`,`fz`],outputNodeAttrs:[`x`,`y`,`z`,`vx`,`vy`,`vz`],simulationAttrs:[`alpha`,`alphaMin`,`alphaDecay`,`alphaTarget`,`velocityDecay`,`randomSource`,`numDimensions`]},this.forceMap={link:vo,manyBody:ko,center:Wa,collide:ho,radial:Ao,x:jo,y:Mo,z:No},this.options={numDimensions:3,link:{id:e=>e.id},manyBody:{},center:{x:0,y:0,z:0}}}initSimulation(){return Oo()}},Fo=s(((exports,t)=>{function n(){this.__data__=[],this.size=0}t.exports=n})),Io=s(((exports,t)=>{function n(e,t){return e===t||e!==e&&t!==t}t.exports=n})),Lo=s(((exports,t)=>{var n=Io();function r(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}t.exports=r})),Ro=s(((exports,t)=>{var n=Lo(),r=Array.prototype.splice;function i(e){var t=this.__data__,i=n(t,e);if(i<0)return!1;var a=t.length-1;return i==a?t.pop():r.call(t,i,1),--this.size,!0}t.exports=i})),zo=s(((exports,t)=>{var n=Lo();function r(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}t.exports=r})),Bo=s(((exports,t)=>{var n=Lo();function r(e){return n(this.__data__,e)>-1}t.exports=r})),Vo=s(((exports,t)=>{var n=Lo();function r(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}t.exports=r})),Ho=s(((exports,t)=>{var n=Fo(),r=Ro(),i=zo(),a=Bo(),o=Vo();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s})),Uo=s(((exports,t)=>{var n=Ho();function r(){this.__data__=new n,this.size=0}t.exports=r})),Wo=s(((exports,t)=>{function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}t.exports=n})),Go=s(((exports,t)=>{function n(e){return this.__data__.get(e)}t.exports=n})),Ko=s(((exports,t)=>{function n(e){return this.__data__.has(e)}t.exports=n})),qo=s(((exports,t)=>{t.exports=typeof global==`object`&&global&&global.Object===Object&&global})),Jo=s(((exports,t)=>{var n=qo(),r=typeof self==`object`&&self&&self.Object===Object&&self;t.exports=n||r||Function(`return this`)()})),Yo=s(((exports,t)=>{t.exports=Jo().Symbol})),Xo=s(((exports,t)=>{var n=Yo(),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,o=n?n.toStringTag:void 0;function s(e){var t=i.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch{}var s=a.call(e);return r&&(t?e[o]=n:delete e[o]),s}t.exports=s})),Zo=s(((exports,t)=>{var n=Object.prototype.toString;function r(e){return n.call(e)}t.exports=r})),Qo=s(((exports,t)=>{var n=Yo(),r=Xo(),i=Zo(),a=`[object Null]`,o=`[object Undefined]`,s=n?n.toStringTag:void 0;function c(e){return e==null?e===void 0?o:a:s&&s in Object(e)?r(e):i(e)}t.exports=c})),$o=s(((exports,t)=>{function n(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}t.exports=n})),es=s(((exports,t)=>{var n=Qo(),r=$o(),i=`[object AsyncFunction]`,a=`[object Function]`,o=`[object GeneratorFunction]`,s=`[object Proxy]`;function c(e){if(!r(e))return!1;var t=n(e);return t==a||t==o||t==i||t==s}t.exports=c})),ts=s(((exports,t)=>{t.exports=Jo()[`__core-js_shared__`]})),ns=s(((exports,t)=>{var n=ts(),r=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}();function i(e){return!!r&&r in e}t.exports=i})),rs=s(((exports,t)=>{var n=Function.prototype.toString;function r(e){if(e!=null){try{return n.call(e)}catch{}try{return e+``}catch{}}return``}t.exports=r})),os=s(((exports,t)=>{var n=es(),r=ns(),i=$o(),a=rs(),o=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,f=RegExp(`^`+u.call(d).replace(o,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function p(e){return!i(e)||r(e)?!1:(n(e)?f:s).test(a(e))}t.exports=p})),ss=s(((exports,t)=>{function n(e,t){return e?.[t]}t.exports=n})),cs=s(((exports,t)=>{var n=os(),r=ss();function i(e,t){var i=r(e,t);return n(i)?i:void 0}t.exports=i})),ls=s(((exports,t)=>{var n=cs(),r=Jo();t.exports=n(r,`Map`)})),us=s(((exports,t)=>{t.exports=cs()(Object,`create`)})),ds=s(((exports,t)=>{var n=us();function r(){this.__data__=n?n(null):{},this.size=0}t.exports=r})),fs=s(((exports,t)=>{function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n})),ps=s(((exports,t)=>{var n=us(),r=`__lodash_hash_undefined__`,i=Object.prototype.hasOwnProperty;function a(e){var t=this.__data__;if(n){var a=t[e];return a===r?void 0:a}return i.call(t,e)?t[e]:void 0}t.exports=a})),ms=s(((exports,t)=>{var n=us(),r=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;return n?t[e]!==void 0:r.call(t,e)}t.exports=i})),hs=s(((exports,t)=>{var n=us(),r=`__lodash_hash_undefined__`;function i(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n&&t===void 0?r:t,this}t.exports=i})),gs=s(((exports,t)=>{var n=ds(),r=fs(),i=ps(),a=ms(),o=hs();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s})),_s=s(((exports,t)=>{var n=gs(),r=Ho(),i=ls();function a(){this.size=0,this.__data__={hash:new n,map:new(i||r),string:new n}}t.exports=a})),vs=s(((exports,t)=>{function n(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}t.exports=n})),ys=s(((exports,t)=>{var n=vs();function r(e,t){var r=e.__data__;return n(t)?r[typeof t==`string`?`string`:`hash`]:r.map}t.exports=r})),bs=s(((exports,t)=>{var n=ys();function r(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}t.exports=r})),xs=s(((exports,t)=>{var n=ys();function r(e){return n(this,e).get(e)}t.exports=r})),Ss=s(((exports,t)=>{var n=ys();function r(e){return n(this,e).has(e)}t.exports=r})),Cs=s(((exports,t)=>{var n=ys();function r(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}t.exports=r})),ws=s(((exports,t)=>{var n=_s(),r=bs(),i=xs(),a=Ss(),o=Cs();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s})),Ts=s(((exports,t)=>{var n=Ho(),r=ls(),i=ws(),a=200;function o(e,t){var o=this.__data__;if(o instanceof n){var s=o.__data__;if(!r||s.length<a-1)return s.push([e,t]),this.size=++o.size,this;o=this.__data__=new i(s)}return o.set(e,t),this.size=o.size,this}t.exports=o})),Es=s(((exports,t)=>{var n=Ho(),r=Uo(),i=Wo(),a=Go(),o=Ko(),s=Ts();function c(e){this.size=(this.__data__=new n(e)).size}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=o,c.prototype.set=s,t.exports=c})),Ds=s(((exports,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}t.exports=n})),Os=s(((exports,t)=>{var n=cs();t.exports=function(){try{var e=n(Object,`defineProperty`);return e({},``,{}),e}catch{}}()})),ks=s(((exports,t)=>{var n=Os();function r(e,t,r){t==`__proto__`&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}t.exports=r})),As=s(((exports,t)=>{var n=ks(),r=Io(),i=Object.prototype.hasOwnProperty;function a(e,t,a){var o=e[t];(!(i.call(e,t)&&r(o,a))||a===void 0&&!(t in e))&&n(e,t,a)}t.exports=a})),js=s(((exports,t)=>{var n=As(),r=ks();function i(e,t,i,a){var o=!i;i||={};for(var s=-1,c=t.length;++s<c;){var l=t[s],u=a?a(i[l],e[l],l,i,e):void 0;u===void 0&&(u=e[l]),o?r(i,l,u):n(i,l,u)}return i}t.exports=i})),Ms=s(((exports,t)=>{function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}t.exports=n})),Ns=s(((exports,t)=>{function n(e){return typeof e==`object`&&!!e}t.exports=n})),Ps=s(((exports,t)=>{var n=Qo(),r=Ns(),i=`[object Arguments]`;function a(e){return r(e)&&n(e)==i}t.exports=a})),Fs=s(((exports,t)=>{var n=Ps(),r=Ns(),i=Object.prototype,a=i.hasOwnProperty,o=i.propertyIsEnumerable;t.exports=n(function(){return arguments}())?n:function(e){return r(e)&&a.call(e,`callee`)&&!o.call(e,`callee`)}})),Z=s(((exports,t)=>{t.exports=Array.isArray})),Is=s(((exports,t)=>{function n(){return!1}t.exports=n})),Ls=s(((exports,t)=>{var n=Jo(),r=Is(),i=typeof exports==`object`&&exports&&!exports.nodeType&&exports,a=i&&typeof t==`object`&&t&&!t.nodeType&&t,o=a&&a.exports===i?n.Buffer:void 0;t.exports=(o?o.isBuffer:void 0)||r})),Rs=s(((exports,t)=>{var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function i(e,t){var i=typeof e;return t??=n,!!t&&(i==`number`||i!=`symbol`&&r.test(e))&&e>-1&&e%1==0&&e<t}t.exports=i})),zs=s(((exports,t)=>{var n=9007199254740991;function r(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=n}t.exports=r})),Bs=s(((exports,t)=>{var n=Qo(),r=zs(),i=Ns(),a=`[object Arguments]`,o=`[object Array]`,s=`[object Boolean]`,c=`[object Date]`,l=`[object Error]`,u=`[object Function]`,d=`[object Map]`,f=`[object Number]`,p=`[object Object]`,m=`[object RegExp]`,h=`[object Set]`,g=`[object String]`,_=`[object WeakMap]`,v=`[object ArrayBuffer]`,y=`[object DataView]`,b=`[object Float32Array]`,x=`[object Float64Array]`,S=`[object Int8Array]`,C=`[object Int16Array]`,w=`[object Int32Array]`,T=`[object Uint8Array]`,E=`[object Uint8ClampedArray]`,D=`[object Uint16Array]`,O=`[object Uint32Array]`,k={};k[b]=k[x]=k[S]=k[C]=k[w]=k[T]=k[E]=k[D]=k[O]=!0,k[a]=k[o]=k[v]=k[s]=k[y]=k[c]=k[l]=k[u]=k[d]=k[f]=k[p]=k[m]=k[h]=k[g]=k[_]=!1;function A(e){return i(e)&&r(e.length)&&!!k[n(e)]}t.exports=A})),Vs=s(((exports,t)=>{function n(e){return function(t){return e(t)}}t.exports=n})),Hs=s(((exports,t)=>{var n=qo(),r=typeof exports==`object`&&exports&&!exports.nodeType&&exports,i=r&&typeof t==`object`&&t&&!t.nodeType&&t,a=i&&i.exports===r&&n.process;t.exports=function(){try{return i&&i.require&&i.require(`util`).types||a&&a.binding&&a.binding(`util`)}catch{}}()})),Us=s(((exports,t)=>{var n=Bs(),r=Vs(),i=Hs(),a=i&&i.isTypedArray;t.exports=a?r(a):n})),Ws=s(((exports,t)=>{var n=Ms(),r=Fs(),i=Z(),a=Ls(),o=Rs(),s=Us(),c=Object.prototype.hasOwnProperty;function l(e,t){var l=i(e),u=!l&&r(e),d=!l&&!u&&a(e),f=!l&&!u&&!d&&s(e),p=l||u||d||f,m=p?n(e.length,String):[],h=m.length;for(var g in e)(t||c.call(e,g))&&!(p&&(g==`length`||d&&(g==`offset`||g==`parent`)||f&&(g==`buffer`||g==`byteLength`||g==`byteOffset`)||o(g,h)))&&m.push(g);return m}t.exports=l})),Gs=s(((exports,t)=>{var n=Object.prototype;function r(e){var t=e&&e.constructor,r=typeof t==`function`&&t.prototype||n;return e===r}t.exports=r})),Ks=s(((exports,t)=>{function n(e,t){return function(n){return e(t(n))}}t.exports=n})),qs=s(((exports,t)=>{t.exports=Ks()(Object.keys,Object)})),Js=s(((exports,t)=>{var n=Gs(),r=qs(),i=Object.prototype.hasOwnProperty;function a(e){if(!n(e))return r(e);var t=[];for(var a in Object(e))i.call(e,a)&&a!=`constructor`&&t.push(a);return t}t.exports=a})),Ys=s(((exports,t)=>{var n=es(),r=zs();function i(e){return e!=null&&r(e.length)&&!n(e)}t.exports=i})),Xs=s(((exports,t)=>{var n=Ws(),r=Js(),i=Ys();function a(e){return i(e)?n(e):r(e)}t.exports=a})),Zs=s(((exports,t)=>{var n=js(),r=Xs();function i(e,t){return e&&n(t,r(t),e)}t.exports=i})),Qs=s(((exports,t)=>{function n(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}t.exports=n})),$s=s(((exports,t)=>{var n=$o(),r=Gs(),i=Qs(),a=Object.prototype.hasOwnProperty;function o(e){if(!n(e))return i(e);var t=r(e),o=[];for(var s in e)s==`constructor`&&(t||!a.call(e,s))||o.push(s);return o}t.exports=o})),ec=s(((exports,t)=>{var n=Ws(),r=$s(),i=Ys();function a(e){return i(e)?n(e,!0):r(e)}t.exports=a})),tc=s(((exports,t)=>{var n=js(),r=ec();function i(e,t){return e&&n(t,r(t),e)}t.exports=i})),nc=s(((exports,t)=>{var n=Jo(),r=typeof exports==`object`&&exports&&!exports.nodeType&&exports,i=r&&typeof t==`object`&&t&&!t.nodeType&&t,a=i&&i.exports===r?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function s(e,t){if(t)return e.slice();var n=e.length,r=o?o(n):new e.constructor(n);return e.copy(r),r}t.exports=s})),rc=s(((exports,t)=>{function n(e,t){var n=-1,r=e.length;for(t||=Array(r);++n<r;)t[n]=e[n];return t}t.exports=n})),ic=s(((exports,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}t.exports=n})),ac=s(((exports,t)=>{function n(){return[]}t.exports=n})),oc=s(((exports,t)=>{var n=ic(),r=ac(),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;t.exports=a?function(e){return e==null?[]:(e=Object(e),n(a(e),function(t){return i.call(e,t)}))}:r})),sc=s(((exports,t)=>{var n=js(),r=oc();function i(e,t){return n(e,r(e),t)}t.exports=i})),cc=s(((exports,t)=>{function n(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}t.exports=n})),lc=s(((exports,t)=>{t.exports=Ks()(Object.getPrototypeOf,Object)})),uc=s(((exports,t)=>{var n=cc(),r=lc(),i=oc(),a=ac();t.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,i(e)),e=r(e);return t}:a})),dc=s(((exports,t)=>{var n=js(),r=uc();function i(e,t){return n(e,r(e),t)}t.exports=i})),fc=s(((exports,t)=>{var n=cc(),r=Z();function i(e,t,i){var a=t(e);return r(e)?a:n(a,i(e))}t.exports=i})),pc=s(((exports,t)=>{var n=fc(),r=oc(),i=Xs();function a(e){return n(e,i,r)}t.exports=a})),mc=s(((exports,t)=>{var n=fc(),r=uc(),i=ec();function a(e){return n(e,i,r)}t.exports=a})),hc=s(((exports,t)=>{var n=cs(),r=Jo();t.exports=n(r,`DataView`)})),gc=s(((exports,t)=>{var n=cs(),r=Jo();t.exports=n(r,`Promise`)})),_c=s(((exports,t)=>{var n=cs(),r=Jo();t.exports=n(r,`Set`)})),vc=s(((exports,t)=>{var n=cs(),r=Jo();t.exports=n(r,`WeakMap`)})),yc=s(((exports,t)=>{var n=hc(),r=ls(),i=gc(),a=_c(),o=vc(),s=Qo(),c=rs(),l=`[object Map]`,u=`[object Object]`,d=`[object Promise]`,f=`[object Set]`,p=`[object WeakMap]`,m=`[object DataView]`,h=c(n),g=c(r),_=c(i),v=c(a),y=c(o),b=s;(n&&b(new n(new ArrayBuffer(1)))!=m||r&&b(new r)!=l||i&&b(i.resolve())!=d||a&&b(new a)!=f||o&&b(new o)!=p)&&(b=function(e){var t=s(e),n=t==u?e.constructor:void 0,r=n?c(n):``;if(r)switch(r){case h:return m;case g:return l;case _:return d;case v:return f;case y:return p}return t}),t.exports=b})),bc=s(((exports,t)=>{var n=Object.prototype.hasOwnProperty;function r(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]==`string`&&n.call(e,`index`)&&(r.index=e.index,r.input=e.input),r}t.exports=r})),xc=s(((exports,t)=>{t.exports=Jo().Uint8Array})),Sc=s(((exports,t)=>{var n=xc();function r(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}t.exports=r})),Cc=s(((exports,t)=>{var n=Sc();function r(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}t.exports=r})),wc=s(((exports,t)=>{var n=/\w*$/;function r(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}t.exports=r})),Tc=s(((exports,t)=>{var n=Yo(),r=n?n.prototype:void 0,i=r?r.valueOf:void 0;function a(e){return i?Object(i.call(e)):{}}t.exports=a})),Ec=s(((exports,t)=>{var n=Sc();function r(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}t.exports=r})),Dc=s(((exports,t)=>{var n=Sc(),r=Cc(),i=wc(),a=Tc(),o=Ec(),s=`[object Boolean]`,c=`[object Date]`,l=`[object Map]`,u=`[object Number]`,d=`[object RegExp]`,f=`[object Set]`,p=`[object String]`,m=`[object Symbol]`,h=`[object ArrayBuffer]`,g=`[object DataView]`,_=`[object Float32Array]`,v=`[object Float64Array]`,y=`[object Int8Array]`,b=`[object Int16Array]`,x=`[object Int32Array]`,S=`[object Uint8Array]`,C=`[object Uint8ClampedArray]`,w=`[object Uint16Array]`,T=`[object Uint32Array]`;function E(e,t,E){var D=e.constructor;switch(t){case h:return n(e);case s:case c:return new D(+e);case g:return r(e,E);case _:case v:case y:case b:case x:case S:case C:case w:case T:return o(e,E);case l:return new D;case u:case p:return new D(e);case d:return i(e);case f:return new D;case m:return a(e)}}t.exports=E})),Oc=s(((exports,t)=>{var n=$o(),r=Object.create;t.exports=function(){function e(){}return function(t){if(!n(t))return{};if(r)return r(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}()})),kc=s(((exports,t)=>{var n=Oc(),r=lc(),i=Gs();function a(e){return typeof e.constructor==`function`&&!i(e)?n(r(e)):{}}t.exports=a})),Ac=s(((exports,t)=>{var n=yc(),r=Ns(),i=`[object Map]`;function a(e){return r(e)&&n(e)==i}t.exports=a})),jc=s(((exports,t)=>{var n=Ac(),r=Vs(),i=Hs(),a=i&&i.isMap;t.exports=a?r(a):n})),Mc=s(((exports,t)=>{var n=yc(),r=Ns(),i=`[object Set]`;function a(e){return r(e)&&n(e)==i}t.exports=a})),Nc=s(((exports,t)=>{var n=Mc(),r=Vs(),i=Hs(),a=i&&i.isSet;t.exports=a?r(a):n})),Pc=s(((exports,t)=>{var n=Es(),r=Ds(),i=As(),a=Zs(),o=tc(),s=nc(),c=rc(),l=sc(),u=dc(),d=pc(),f=mc(),p=yc(),m=bc(),h=Dc(),g=kc(),_=Z(),v=Ls(),y=jc(),b=$o(),x=Nc(),S=Xs(),C=ec(),w=1,T=2,E=4,D=`[object Arguments]`,O=`[object Array]`,k=`[object Boolean]`,A=`[object Date]`,j=`[object Error]`,ee=`[object Function]`,M=`[object GeneratorFunction]`,N=`[object Map]`,P=`[object Number]`,F=`[object Object]`,I=`[object RegExp]`,te=`[object Set]`,ne=`[object String]`,L=`[object Symbol]`,re=`[object WeakMap]`,ie=`[object ArrayBuffer]`,R=`[object DataView]`,ae=`[object Float32Array]`,oe=`[object Float64Array]`,z=`[object Int8Array]`,se=`[object Int16Array]`,ce=`[object Int32Array]`,le=`[object Uint8Array]`,ue=`[object Uint8ClampedArray]`,de=`[object Uint16Array]`,fe=`[object Uint32Array]`,B={};B[D]=B[O]=B[ie]=B[R]=B[k]=B[A]=B[ae]=B[oe]=B[z]=B[se]=B[ce]=B[N]=B[P]=B[F]=B[I]=B[te]=B[ne]=B[L]=B[le]=B[ue]=B[de]=B[fe]=!0,B[j]=B[ee]=B[re]=!1;function pe(e,t,O,k,A,j){var N,P=t&w,I=t&T,te=t&E;if(O&&(N=A?O(e,k,A,j):O(e)),N!==void 0)return N;if(!b(e))return e;var ne=_(e);if(ne){if(N=m(e),!P)return c(e,N)}else{var L=p(e),re=L==ee||L==M;if(v(e))return s(e,P);if(L==F||L==D||re&&!A){if(N=I||re?{}:g(e),!P)return I?u(e,o(N,e)):l(e,a(N,e))}else{if(!B[L])return A?e:{};N=h(e,L,P)}}j||=new n;var ie=j.get(e);if(ie)return ie;j.set(e,N),x(e)?e.forEach(function(n){N.add(pe(n,t,O,n,e,j))}):y(e)&&e.forEach(function(n,r){N.set(r,pe(n,t,O,r,e,j))});var R=ne?void 0:(te?I?f:d:I?C:S)(e);return r(R||e,function(n,r){R&&(r=n,n=e[r]),i(N,r,pe(n,t,O,r,e,j))}),N}t.exports=pe})),Fc=s(((exports,t)=>{var n=Pc(),r=4;function i(e){return n(e,r)}t.exports=i})),Ic=s(((exports,t)=>{function n(e){return function(){return e}}t.exports=n})),Lc=s(((exports,t)=>{function n(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(n(a[c],c,a)===!1)break}return t}}t.exports=n})),Rc=s(((exports,t)=>{t.exports=Lc()()})),zc=s(((exports,t)=>{var n=Rc(),r=Xs();function i(e,t){return e&&n(e,t,r)}t.exports=i})),Bc=s(((exports,t)=>{var n=Ys();function r(e,t){return function(r,i){if(r==null)return r;if(!n(r))return e(r,i);for(var a=r.length,o=t?a:-1,s=Object(r);(t?o--:++o<a)&&i(s[o],o,s)!==!1;);return r}}t.exports=r})),Vc=s(((exports,t)=>{var n=zc();t.exports=Bc()(n)})),Hc=s(((exports,t)=>{function n(e){return e}t.exports=n})),Uc=s(((exports,t)=>{var n=Hc();function r(e){return typeof e==`function`?e:n}t.exports=r})),Wc=s(((exports,t)=>{var n=Ds(),r=Vc(),i=Uc(),a=Z();function o(e,t){return(a(e)?n:r)(e,i(t))}t.exports=o})),Gc=s(((exports,t)=>{t.exports=Wc()})),Kc=s(((exports,t)=>{var n=Vc();function r(e,t){var r=[];return n(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}t.exports=r})),qc=s(((exports,t)=>{var n=`__lodash_hash_undefined__`;function r(e){return this.__data__.set(e,n),this}t.exports=r})),Jc=s(((exports,t)=>{function n(e){return this.__data__.has(e)}t.exports=n})),Yc=s(((exports,t)=>{var n=ws(),r=qc(),i=Jc();function a(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=r,a.prototype.has=i,t.exports=a})),Xc=s(((exports,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}t.exports=n})),Zc=s(((exports,t)=>{function n(e,t){return e.has(t)}t.exports=n})),Qc=s(((exports,t)=>{var n=Yc(),r=Xc(),i=Zc(),a=1,o=2;function s(e,t,s,c,l,u){var d=s&a,f=e.length,p=t.length;if(f!=p&&!(d&&p>f))return!1;var m=u.get(e),h=u.get(t);if(m&&h)return m==t&&h==e;var g=-1,_=!0,v=s&o?new n:void 0;for(u.set(e,t),u.set(t,e);++g<f;){var y=e[g],b=t[g];if(c)var x=d?c(b,y,g,t,e,u):c(y,b,g,e,t,u);if(x!==void 0){if(x)continue;_=!1;break}if(v){if(!r(t,function(e,t){if(!i(v,t)&&(y===e||l(y,e,s,c,u)))return v.push(t)})){_=!1;break}}else if(!(y===b||l(y,b,s,c,u))){_=!1;break}}return u.delete(e),u.delete(t),_}t.exports=s})),$c=s(((exports,t)=>{function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}t.exports=n})),el=s(((exports,t)=>{function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}t.exports=n})),tl=s(((exports,t)=>{var n=Yo(),r=xc(),i=Io(),a=Qc(),o=$c(),s=el(),c=1,l=2,u=`[object Boolean]`,d=`[object Date]`,f=`[object Error]`,p=`[object Map]`,m=`[object Number]`,h=`[object RegExp]`,g=`[object Set]`,_=`[object String]`,v=`[object Symbol]`,y=`[object ArrayBuffer]`,b=`[object DataView]`,x=n?n.prototype:void 0,S=x?x.valueOf:void 0;function C(e,t,n,x,C,w,T){switch(n){case b:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case y:return!(e.byteLength!=t.byteLength||!w(new r(e),new r(t)));case u:case d:case m:return i(+e,+t);case f:return e.name==t.name&&e.message==t.message;case h:case _:return e==t+``;case p:var E=o;case g:var D=x&c;if(E||=s,e.size!=t.size&&!D)return!1;var O=T.get(e);if(O)return O==t;x|=l,T.set(e,t);var k=a(E(e),E(t),x,C,w,T);return T.delete(e),k;case v:if(S)return S.call(e)==S.call(t)}return!1}t.exports=C})),nl=s(((exports,t)=>{var n=pc(),r=1,i=Object.prototype.hasOwnProperty;function a(e,t,a,o,s,c){var l=a&r,u=n(e),d=u.length,f=n(t),p=f.length;if(d!=p&&!l)return!1;for(var m=d;m--;){var h=u[m];if(!(l?h in t:i.call(t,h)))return!1}var g=c.get(e),_=c.get(t);if(g&&_)return g==t&&_==e;var v=!0;c.set(e,t),c.set(t,e);for(var y=l;++m<d;){h=u[m];var b=e[h],x=t[h];if(o)var S=l?o(x,b,h,t,e,c):o(b,x,h,e,t,c);if(!(S===void 0?b===x||s(b,x,a,o,c):S)){v=!1;break}y||=h==`constructor`}if(v&&!y){var C=e.constructor,w=t.constructor;C!=w&&`constructor`in e&&`constructor`in t&&!(typeof C==`function`&&C instanceof C&&typeof w==`function`&&w instanceof w)&&(v=!1)}return c.delete(e),c.delete(t),v}t.exports=a})),rl=s(((exports,t)=>{var n=Es(),r=Qc(),i=tl(),a=nl(),o=yc(),s=Z(),c=Ls(),l=Us(),u=1,d=`[object Arguments]`,f=`[object Array]`,p=`[object Object]`,m=Object.prototype.hasOwnProperty;function h(e,t,h,g,_,v){var y=s(e),b=s(t),x=y?f:o(e),S=b?f:o(t);x=x==d?p:x,S=S==d?p:S;var C=x==p,w=S==p,T=x==S;if(T&&c(e)){if(!c(t))return!1;y=!0,C=!1}if(T&&!C)return v||=new n,y||l(e)?r(e,t,h,g,_,v):i(e,t,x,h,g,_,v);if(!(h&u)){var E=C&&m.call(e,`__wrapped__`),D=w&&m.call(t,`__wrapped__`);if(E||D){var O=E?e.value():e,k=D?t.value():t;return v||=new n,_(O,k,h,g,v)}}return T?(v||=new n,a(e,t,h,g,_,v)):!1}t.exports=h})),il=s(((exports,t)=>{var n=rl(),r=Ns();function i(e,t,a,o,s){return e===t?!0:e==null||t==null||!r(e)&&!r(t)?e!==e&&t!==t:n(e,t,a,o,i,s)}t.exports=i})),al=s(((exports,t)=>{var n=Es(),r=il(),i=1,a=2;function o(e,t,o,s){var c=o.length,l=c,u=!s;if(e==null)return!l;for(e=Object(e);c--;){var d=o[c];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++c<l;){d=o[c];var f=d[0],p=e[f],m=d[1];if(u&&d[2]){if(p===void 0&&!(f in e))return!1}else{var h=new n;if(s)var g=s(p,m,f,e,t,h);if(!(g===void 0?r(m,p,i|a,s,h):g))return!1}}return!0}t.exports=o})),ol=s(((exports,t)=>{var n=$o();function r(e){return e===e&&!n(e)}t.exports=r})),sl=s(((exports,t)=>{var n=ol(),r=Xs();function i(e){for(var t=r(e),i=t.length;i--;){var a=t[i],o=e[a];t[i]=[a,o,n(o)]}return t}t.exports=i})),cl=s(((exports,t)=>{function n(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}t.exports=n})),ll=s(((exports,t)=>{var n=al(),r=sl(),i=cl();function a(e){var t=r(e);return t.length==1&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}t.exports=a})),ul=s(((exports,t)=>{var n=Qo(),r=Ns(),i=`[object Symbol]`;function a(e){return typeof e==`symbol`||r(e)&&n(e)==i}t.exports=a})),dl=s(((exports,t)=>{var n=Z(),r=ul(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function o(e,t){if(n(e))return!1;var o=typeof e;return o==`number`||o==`symbol`||o==`boolean`||e==null||r(e)?!0:a.test(e)||!i.test(e)||t!=null&&e in Object(t)}t.exports=o})),fl=s(((exports,t)=>{var n=ws(),r=`Expected a function`;function i(e,t){if(typeof e!=`function`||t!=null&&typeof t!=`function`)throw TypeError(r);var a=function(){var n=arguments,r=t?t.apply(this,n):n[0],i=a.cache;if(i.has(r))return i.get(r);var o=e.apply(this,n);return a.cache=i.set(r,o)||i,o};return a.cache=new(i.Cache||n),a}i.Cache=n,t.exports=i})),pl=s(((exports,t)=>{var n=fl(),r=500;function i(e){var t=n(e,function(e){return i.size===r&&i.clear(),e}),i=t.cache;return t}t.exports=i})),ml=s(((exports,t)=>{var n=pl(),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g;t.exports=n(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(``),e.replace(r,function(e,n,r,a){t.push(r?a.replace(i,`$1`):n||e)}),t})})),hl=s(((exports,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}t.exports=n})),gl=s(((exports,t)=>{var n=Yo(),r=hl(),i=Z(),a=ul(),o=1/0,s=n?n.prototype:void 0,c=s?s.toString:void 0;function l(e){if(typeof e==`string`)return e;if(i(e))return r(e,l)+``;if(a(e))return c?c.call(e):``;var t=e+``;return t==`0`&&1/e==-o?`-0`:t}t.exports=l})),_l=s(((exports,t)=>{var n=gl();function r(e){return e==null?``:n(e)}t.exports=r})),vl=s(((exports,t)=>{var n=Z(),r=dl(),i=ml(),a=_l();function o(e,t){return n(e)?e:r(e,t)?[e]:i(a(e))}t.exports=o})),yl=s(((exports,t)=>{var n=ul(),r=1/0;function i(e){if(typeof e==`string`||n(e))return e;var t=e+``;return t==`0`&&1/e==-r?`-0`:t}t.exports=i})),bl=s(((exports,t)=>{var n=vl(),r=yl();function i(e,t){t=n(t,e);for(var i=0,a=t.length;e!=null&&i<a;)e=e[r(t[i++])];return i&&i==a?e:void 0}t.exports=i})),xl=s(((exports,t)=>{var n=bl();function r(e,t,r){var i=e==null?void 0:n(e,t);return i===void 0?r:i}t.exports=r})),Sl=s(((exports,t)=>{function n(e,t){return e!=null&&t in Object(e)}t.exports=n})),Cl=s(((exports,t)=>{var n=vl(),r=Fs(),i=Z(),a=Rs(),o=zs(),s=yl();function c(e,t,c){t=n(t,e);for(var l=-1,u=t.length,d=!1;++l<u;){var f=s(t[l]);if(!(d=e!=null&&c(e,f)))break;e=e[f]}return d||++l!=u?d:(u=e==null?0:e.length,!!u&&o(u)&&a(f,u)&&(i(e)||r(e)))}t.exports=c})),wl=s(((exports,t)=>{var n=Sl(),r=Cl();function i(e,t){return e!=null&&r(e,t,n)}t.exports=i})),Tl=s(((exports,t)=>{var n=il(),r=xl(),i=wl(),a=dl(),o=ol(),s=cl(),c=yl(),l=1,u=2;function d(e,t){return a(e)&&o(t)?s(c(e),t):function(a){var o=r(a,e);return o===void 0&&o===t?i(a,e):n(t,o,l|u)}}t.exports=d})),El=s(((exports,t)=>{function n(e){return function(t){return t?.[e]}}t.exports=n})),Dl=s(((exports,t)=>{var n=bl();function r(e){return function(t){return n(t,e)}}t.exports=r})),Ol=s(((exports,t)=>{var n=El(),r=Dl(),i=dl(),a=yl();function o(e){return i(e)?n(a(e)):r(e)}t.exports=o})),kl=s(((exports,t)=>{var n=ll(),r=Tl(),i=Hc(),a=Z(),o=Ol();function s(e){return typeof e==`function`?e:e==null?i:typeof e==`object`?a(e)?r(e[0],e[1]):n(e):o(e)}t.exports=s})),Al=s(((exports,t)=>{var n=ic(),r=Kc(),i=kl(),a=Z();function o(e,t){return(a(e)?n:r)(e,i(t,3))}t.exports=o})),jl=s(((exports,t)=>{var n=Object.prototype.hasOwnProperty;function r(e,t){return e!=null&&n.call(e,t)}t.exports=r})),Ml=s(((exports,t)=>{var n=jl(),r=Cl();function i(e,t){return e!=null&&r(e,t,n)}t.exports=i})),Nl=s(((exports,t)=>{var n=Js(),r=yc(),i=Fs(),a=Z(),o=Ys(),s=Ls(),c=Gs(),l=Us(),u=`[object Map]`,d=`[object Set]`,f=Object.prototype.hasOwnProperty;function p(e){if(e==null)return!0;if(o(e)&&(a(e)||typeof e==`string`||typeof e.splice==`function`||s(e)||l(e)||i(e)))return!e.length;var t=r(e);if(t==u||t==d)return!e.size;if(c(e))return!n(e).length;for(var p in e)if(f.call(e,p))return!1;return!0}t.exports=p})),Pl=s(((exports,t)=>{function n(e){return e===void 0}t.exports=n})),Fl=s(((exports,t)=>{var n=Vc(),r=Ys();function i(e,t){var i=-1,a=r(e)?Array(e.length):[];return n(e,function(e,n,r){a[++i]=t(e,n,r)}),a}t.exports=i})),Il=s(((exports,t)=>{var n=hl(),r=kl(),i=Fl(),a=Z();function o(e,t){return(a(e)?n:i)(e,r(t,3))}t.exports=o})),Ll=s(((exports,t)=>{function n(e,t,n,r){var i=-1,a=e==null?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}t.exports=n})),Rl=s(((exports,t)=>{function n(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}t.exports=n})),zl=s(((exports,t)=>{var n=Ll(),r=Vc(),i=kl(),a=Rl(),o=Z();function s(e,t,s){var c=o(e)?n:a,l=arguments.length<3;return c(e,i(t,4),s,l,r)}t.exports=s})),Bl=s(((exports,t)=>{var n=Qo(),r=Z(),i=Ns(),a=`[object String]`;function o(e){return typeof e==`string`||!r(e)&&i(e)&&n(e)==a}t.exports=o})),Vl=s(((exports,t)=>{t.exports=El()(`length`)})),Hl=s(((exports,t)=>{var n=`\\ud800-\\udfff`,r=`\\u0300-\\u036f`,i=`\\ufe20-\\ufe2f`,a=`\\u20d0-\\u20ff`,o=r+i+a,s=RegExp(`[\\u200d`+n+o+`\\ufe0e\\ufe0f]`);function c(e){return s.test(e)}t.exports=c})),Ul=s(((exports,t)=>{var n=`\\ud800-\\udfff`,r=`\\u0300-\\u036f`,i=`\\ufe20-\\ufe2f`,a=`\\u20d0-\\u20ff`,o=r+i+a,s=`\\ufe0e\\ufe0f`,c=`[`+n+`]`,l=`[`+o+`]`,u=`\\ud83c[\\udffb-\\udfff]`,d=`(?:`+l+`|`+u+`)`,f=`[^`+n+`]`,p=`(?:\\ud83c[\\udde6-\\uddff]){2}`,m=`[\\ud800-\\udbff][\\udc00-\\udfff]`,h=`\\u200d`,g=d+`?`,_=`[`+s+`]?`,v=`(?:`+h+`(?:`+[f,p,m].join(`|`)+`)`+_+g+`)*`,y=_+g+v,b=`(?:`+[f+l+`?`,l,p,m,c].join(`|`)+`)`,x=RegExp(u+`(?=`+u+`)|`+b+y,`g`);function S(e){for(var t=x.lastIndex=0;x.test(e);)++t;return t}t.exports=S})),Wl=s(((exports,t)=>{var n=Vl(),r=Hl(),i=Ul();function a(e){return r(e)?i(e):n(e)}t.exports=a})),Gl=s(((exports,t)=>{var n=Js(),r=yc(),i=Ys(),a=Bl(),o=Wl(),s=`[object Map]`,c=`[object Set]`;function l(e){if(e==null)return 0;if(i(e))return a(e)?o(e):e.length;var t=r(e);return t==s||t==c?e.size:n(e).length}t.exports=l})),Kl=s(((exports,t)=>{var n=Ds(),r=Oc(),i=zc(),a=kl(),o=lc(),s=Z(),c=Ls(),l=es(),u=$o(),d=Us();function f(e,t,f){var p=s(e),m=p||c(e)||d(e);if(t=a(t,4),f==null){var h=e&&e.constructor;f=m?p?new h:[]:u(e)&&l(h)?r(o(e)):{}}return(m?n:i)(e,function(e,n,r){return t(f,e,n,r)}),f}t.exports=f})),ql=s(((exports,t)=>{var n=Yo(),r=Fs(),i=Z(),a=n?n.isConcatSpreadable:void 0;function o(e){return i(e)||r(e)||!!(a&&e&&e[a])}t.exports=o})),Jl=s(((exports,t)=>{var n=cc(),r=ql();function i(e,t,a,o,s){var c=-1,l=e.length;for(a||=r,s||=[];++c<l;){var u=e[c];t>0&&a(u)?t>1?i(u,t-1,a,o,s):n(s,u):o||(s[s.length]=u)}return s}t.exports=i})),Yl=s(((exports,t)=>{function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}t.exports=n})),Xl=s(((exports,t)=>{var n=Yl(),r=Math.max;function i(e,t,i){return t=r(t===void 0?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=r(a.length-t,0),c=Array(s);++o<s;)c[o]=a[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=a[o];return l[t]=i(c),n(e,this,l)}}t.exports=i})),Zl=s(((exports,t)=>{var n=Ic(),r=Os(),i=Hc();t.exports=r?function(e,t){return r(e,`toString`,{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i})),Ql=s(((exports,t)=>{var n=800,r=16,i=Date.now;function a(e){var t=0,a=0;return function(){var o=i(),s=r-(o-a);if(a=o,s>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}t.exports=a})),$l=s(((exports,t)=>{var n=Zl();t.exports=Ql()(n)})),eu=s(((exports,t)=>{var n=Hc(),r=Xl(),i=$l();function a(e,t){return i(r(e,t,n),e+``)}t.exports=a})),tu=s(((exports,t)=>{function n(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}t.exports=n})),nu=s(((exports,t)=>{function n(e){return e!==e}t.exports=n})),ru=s(((exports,t)=>{function n(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}t.exports=n})),iu=s(((exports,t)=>{var n=tu(),r=nu(),i=ru();function a(e,t,a){return t===t?i(e,t,a):n(e,r,a)}t.exports=a})),au=s(((exports,t)=>{var n=iu();function r(e,t){return!!(e!=null&&e.length)&&n(e,t,0)>-1}t.exports=r})),ou=s(((exports,t)=>{function n(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}t.exports=n})),su=s(((exports,t)=>{function n(){}t.exports=n})),cu=s(((exports,t)=>{var n=_c(),r=su(),i=el();t.exports=n&&1/i(new n([,-0]))[1]==1/0?function(e){return new n(e)}:r})),lu=s(((exports,t)=>{var n=Yc(),r=au(),i=ou(),a=Zc(),o=cu(),s=el(),c=200;function l(e,t,l){var u=-1,d=r,f=e.length,p=!0,m=[],h=m;if(l)p=!1,d=i;else if(f>=c){var g=t?null:o(e);if(g)return s(g);p=!1,d=a,h=new n}else h=t?[]:m;outer:for(;++u<f;){var _=e[u],v=t?t(_):_;if(_=l||_!==0?_:0,p&&v===v){for(var y=h.length;y--;)if(h[y]===v)continue outer;t&&h.push(v),m.push(_)}else d(h,v,l)||(h!==m&&h.push(v),m.push(_))}return m}t.exports=l})),uu=s(((exports,t)=>{var n=Ys(),r=Ns();function i(e){return r(e)&&n(e)}t.exports=i})),du=s(((exports,t)=>{var n=Jl(),r=eu(),i=lu(),a=uu();t.exports=r(function(e){return i(n(e,1,a,!0))})})),fu=s(((exports,t)=>{var n=hl();function r(e,t){return n(t,function(t){return e[t]})}t.exports=r})),pu=s(((exports,t)=>{var n=fu(),r=Xs();function i(e){return e==null?[]:n(e,r(e))}t.exports=i})),mu=s(((exports,t)=>{var n;if(typeof require==`function`)try{n={clone:Fc(),constant:Ic(),each:Gc(),filter:Al(),has:Ml(),isArray:Z(),isEmpty:Nl(),isFunction:es(),isUndefined:Pl(),keys:Xs(),map:Il(),reduce:zl(),size:Gl(),transform:Kl(),union:du(),values:pu()}}catch{}n||=window._,t.exports=n})),hu=s(((exports,t)=>{var n=mu();t.exports=o;var r=`\0`,i=`\0`,a=``;function o(e){this._isDirected=n.has(e,`directed`)?e.directed:!0,this._isMultigraph=n.has(e,`multigraph`)?e.multigraph:!1,this._isCompound=n.has(e,`compound`)?e.compound:!1,this._label=void 0,this._defaultNodeLabelFn=n.constant(void 0),this._defaultEdgeLabelFn=n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[i]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(e){return this._label=e,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(e){return n.isFunction(e)||(e=n.constant(e)),this._defaultNodeLabelFn=e,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return n.keys(this._nodes)},o.prototype.sources=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._in[t])})},o.prototype.sinks=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._out[t])})},o.prototype.setNodes=function(e,t){var r=arguments,i=this;return n.each(e,function(e){r.length>1?i.setNode(e,t):i.setNode(e)}),this},o.prototype.setNode=function(e,t){return n.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=i,this._children[e]={},this._children[i][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},o.prototype.node=function(e){return this._nodes[e]},o.prototype.hasNode=function(e){return n.has(this._nodes,e)},o.prototype.removeNode=function(e){var t=this;if(n.has(this._nodes,e)){var r=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],n.each(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),n.each(n.keys(this._in[e]),r),delete this._in[e],delete this._preds[e],n.each(n.keys(this._out[e]),r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},o.prototype.setParent=function(e,t){if(!this._isCompound)throw Error(`Cannot set parent in a non-compound graph`);if(n.isUndefined(t))t=i;else{t+=``;for(var r=t;!n.isUndefined(r);r=this.parent(r))if(r===e)throw Error(`Setting `+t+` as parent of `+e+` would create a cycle`);this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},o.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},o.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==i)return t}},o.prototype.children=function(e){if(n.isUndefined(e)&&(e=i),this._isCompound){var t=this._children[e];if(t)return n.keys(t)}else if(e===i)return this.nodes();else if(this.hasNode(e))return[]},o.prototype.predecessors=function(e){var t=this._preds[e];if(t)return n.keys(t)},o.prototype.successors=function(e){var t=this._sucs[e];if(t)return n.keys(t)},o.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return n.union(t,this.successors(e))},o.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},o.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;n.each(this._nodes,function(n,r){e(r)&&t.setNode(r,n)}),n.each(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))});var i={};function a(e){var n=r.parent(e);return n===void 0||t.hasNode(n)?(i[e]=n,n):n in i?i[n]:a(n)}return this._isCompound&&n.each(t.nodes(),function(e){t.setParent(e,a(e))}),t},o.prototype.setDefaultEdgeLabel=function(e){return n.isFunction(e)||(e=n.constant(e)),this._defaultEdgeLabelFn=e,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return n.values(this._edgeObjs)},o.prototype.setPath=function(e,t){var r=this,i=arguments;return n.reduce(e,function(e,n){return i.length>1?r.setEdge(e,n,t):r.setEdge(e,n),n}),this},o.prototype.setEdge=function(){var e,t,r,i,a=!1,o=arguments[0];typeof o==`object`&&o&&`v`in o?(e=o.v,t=o.w,r=o.name,arguments.length===2&&(i=arguments[1],a=!0)):(e=o,t=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),e=``+e,t=``+t,n.isUndefined(r)||(r=``+r);var c=l(this._isDirected,e,t,r);if(n.has(this._edgeLabels,c))return a&&(this._edgeLabels[c]=i),this;if(!n.isUndefined(r)&&!this._isMultigraph)throw Error(`Cannot set a named edge when isMultigraph = false`);this.setNode(e),this.setNode(t),this._edgeLabels[c]=a?i:this._defaultEdgeLabelFn(e,t,r);var d=u(this._isDirected,e,t,r);return e=d.v,t=d.w,Object.freeze(d),this._edgeObjs[c]=d,s(this._preds[t],e),s(this._sucs[e],t),this._in[t][c]=d,this._out[e][c]=d,this._edgeCount++,this},o.prototype.edge=function(e,t,n){var r=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,e,t,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(e,t,r){var i=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,e,t,r);return n.has(this._edgeLabels,i)},o.prototype.removeEdge=function(e,t,n){var r=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],c(this._preds[t],e),c(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},o.prototype.inEdges=function(e,t){var r=this._in[e];if(r){var i=n.values(r);return t?n.filter(i,function(e){return e.v===t}):i}},o.prototype.outEdges=function(e,t){var r=this._out[e];if(r){var i=n.values(r);return t?n.filter(i,function(e){return e.w===t}):i}},o.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};function s(e,t){e[t]?e[t]++:e[t]=1}function c(e,t){--e[t]||delete e[t]}function l(e,t,i,o){var s=``+t,c=``+i;if(!e&&s>c){var l=s;s=c,c=l}return s+a+c+a+(n.isUndefined(o)?r:o)}function u(e,t,n,r){var i=``+t,a=``+n;if(!e&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return r&&(s.name=r),s}function d(e,t){return l(e,t.v,t.w,t.name)}})),gu=s(((exports,t)=>{t.exports=`2.1.8`})),_u=s(((exports,t)=>{t.exports={Graph:hu(),version:gu()}})),vu=s(((exports,t)=>{var n=mu(),r=hu();t.exports={write:i,read:s};function i(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:a(e),edges:o(e)};return n.isUndefined(e.graph())||(t.value=n.clone(e.graph())),t}function a(e){return n.map(e.nodes(),function(t){var r=e.node(t),i=e.parent(t),a={v:t};return n.isUndefined(r)||(a.value=r),n.isUndefined(i)||(a.parent=i),a})}function o(e){return n.map(e.edges(),function(t){var r=e.edge(t),i={v:t.v,w:t.w};return n.isUndefined(t.name)||(i.name=t.name),n.isUndefined(r)||(i.value=r),i})}function s(e){var t=new r(e.options).setGraph(e.value);return n.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),n.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}})),yu=s(((exports,t)=>{var n=mu();t.exports=r;function r(e){var t={},r=[],i;function a(r){n.has(t,r)||(t[r]=!0,i.push(r),n.each(e.successors(r),a),n.each(e.predecessors(r),a))}return n.each(e.nodes(),function(e){i=[],a(e),i.length&&r.push(i)}),r}})),bu=s(((exports,t)=>{var n=mu();t.exports=r;function r(){this._arr=[],this._keyIndices={}}r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(e){return e.key})},r.prototype.has=function(e){return n.has(this._keyIndices,e)},r.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},r.prototype.min=function(){if(this.size()===0)throw Error(`Queue underflow`);return this._arr[0].key},r.prototype.add=function(e,t){var r=this._keyIndices;if(e=String(e),!n.has(r,e)){var i=this._arr,a=i.length;return r[e]=a,i.push({key:e,priority:t}),this._decrease(a),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},r.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw Error(`New priority is greater than current priority. Key: `+e+` Old: `+this._arr[n].priority+` New: `+t);this._arr[n].priority=t,this._decrease(n)},r.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},r.prototype._decrease=function(e){for(var t=this._arr,n=t[e].priority,r;e!==0&&(r=e>>1,!(t[r].priority<n));)this._swap(e,r),e=r},r.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],a=n[t];n[e]=a,n[t]=i,r[a.key]=e,r[i.key]=t}})),xu=s(((exports,t)=>{var n=mu(),r=bu();t.exports=a;var i=n.constant(1);function a(e,t,n,r){return o(e,String(t),n||i,r||function(t){return e.outEdges(t)})}function o(e,t,n,i){var a={},o=new r,s,c,l=function(e){var t=e.v===s?e.w:e.v,r=a[t],i=n(e),l=c.distance+i;if(i<0)throw Error(`dijkstra does not allow negative edge weights. Bad edge: `+e+` Weight: `+i);l<r.distance&&(r.distance=l,r.predecessor=s,o.decrease(t,l))};for(e.nodes().forEach(function(e){var n=e===t?0:1/0;a[e]={distance:n},o.add(e,n)});o.size()>0&&(s=o.removeMin(),c=a[s],c.distance!==1/0);)i(s).forEach(l);return a}})),Su=s(((exports,t)=>{var n=xu(),r=mu();t.exports=i;function i(e,t,i){return r.transform(e.nodes(),function(r,a){r[a]=n(e,a,t,i)},{})}})),Cu=s(((exports,t)=>{var n=mu();t.exports=r;function r(e){var t=0,r=[],i={},a=[];function o(s){var c=i[s]={onStack:!0,lowlink:t,index:t++};if(r.push(s),e.successors(s).forEach(function(e){n.has(i,e)?i[e].onStack&&(c.lowlink=Math.min(c.lowlink,i[e].index)):(o(e),c.lowlink=Math.min(c.lowlink,i[e].lowlink))}),c.lowlink===c.index){var l=[],u;do u=r.pop(),i[u].onStack=!1,l.push(u);while(s!==u);a.push(l)}}return e.nodes().forEach(function(e){n.has(i,e)||o(e)}),a}})),wu=s(((exports,t)=>{var n=mu(),r=Cu();t.exports=i;function i(e){return n.filter(r(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}})),Tu=s(((exports,t)=>{var n=mu();t.exports=i;var r=n.constant(1);function i(e,t,n){return a(e,t||r,n||function(t){return e.outEdges(t)})}function a(e,t,n){var r={},i=e.nodes();return i.forEach(function(e){r[e]={},r[e][e]={distance:0},i.forEach(function(t){e!==t&&(r[e][t]={distance:1/0})}),n(e).forEach(function(n){var i=n.v===e?n.w:n.v,a=t(n);r[e][i]={distance:a,predecessor:e}})}),i.forEach(function(e){var t=r[e];i.forEach(function(n){var a=r[n];i.forEach(function(n){var r=a[e],i=t[n],o=a[n],s=r.distance+i.distance;s<o.distance&&(o.distance=s,o.predecessor=i.predecessor)})})}),r}})),Eu=s(((exports,t)=>{var n=mu();t.exports=r,r.CycleException=i;function r(e){var t={},r={},a=[];function o(s){if(n.has(r,s))throw new i;n.has(t,s)||(r[s]=!0,t[s]=!0,n.each(e.predecessors(s),o),delete r[s],a.push(s))}if(n.each(e.sinks(),o),n.size(t)!==e.nodeCount())throw new i;return a}function i(){}i.prototype=Error()})),Du=s(((exports,t)=>{var n=Eu();t.exports=r;function r(e){try{n(e)}catch(e){if(e instanceof n.CycleException)return!1;throw e}return!0}})),Ou=s(((exports,t)=>{var n=mu();t.exports=r;function r(e,t,r){n.isArray(t)||(t=[t]);var a=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],s={};return n.each(t,function(t){if(!e.hasNode(t))throw Error(`Graph does not have node: `+t);i(e,t,r===`post`,s,a,o)}),o}function i(e,t,r,a,o,s){n.has(a,t)||(a[t]=!0,r||s.push(t),n.each(o(t),function(t){i(e,t,r,a,o,s)}),r&&s.push(t))}})),ku=s(((exports,t)=>{var n=Ou();t.exports=r;function r(e,t){return n(e,t,`post`)}})),Au=s(((exports,t)=>{var n=Ou();t.exports=r;function r(e,t){return n(e,t,`pre`)}})),ju=s(((exports,t)=>{var n=mu(),r=hu(),i=bu();t.exports=a;function a(e,t){var a=new r,o={},s=new i,c;function l(e){var n=e.v===c?e.w:e.v,r=s.priority(n);if(r!==void 0){var i=t(e);i<r&&(o[n]=c,s.decrease(n,i))}}if(e.nodeCount()===0)return a;n.each(e.nodes(),function(e){s.add(e,1/0),a.setNode(e)}),s.decrease(e.nodes()[0],0);for(var u=!1;s.size()>0;){if(c=s.removeMin(),n.has(o,c))a.setEdge(c,o[c]);else if(u)throw Error(`Input graph is not connected: `+e);else u=!0;e.nodeEdges(c).forEach(l)}return a}})),Mu=s(((exports,t)=>{t.exports={components:yu(),dijkstra:xu(),dijkstraAll:Su(),findCycles:wu(),floydWarshall:Tu(),isAcyclic:Du(),postorder:ku(),preorder:Au(),prim:ju(),tarjan:Cu(),topsort:Eu()}})),Nu=s(((exports,t)=>{var n=_u();t.exports={Graph:n.Graph,json:vu(),alg:Mu(),version:n.version}})),Pu=s(((exports,t)=>{var n;if(typeof require==`function`)try{n=Nu()}catch{}n||=window.graphlib,t.exports=n})),Fu=s(((exports,t)=>{var n=Pc(),r=1,i=4;function a(e){return n(e,r|i)}t.exports=a})),Iu=s(((exports,t)=>{var n=Io(),r=Ys(),i=Rs(),a=$o();function o(e,t,o){if(!a(o))return!1;var s=typeof t;return(s==`number`?r(o)&&i(t,o.length):s==`string`&&t in o)?n(o[t],e):!1}t.exports=o})),Lu=s(((exports,t)=>{var n=eu(),r=Io(),i=Iu(),a=ec(),o=Object.prototype,s=o.hasOwnProperty;t.exports=n(function(e,t){e=Object(e);var n=-1,c=t.length,l=c>2?t[2]:void 0;for(l&&i(t[0],t[1],l)&&(c=1);++n<c;)for(var u=t[n],d=a(u),f=-1,p=d.length;++f<p;){var m=d[f],h=e[m];(h===void 0||r(h,o[m])&&!s.call(e,m))&&(e[m]=u[m])}return e})})),Ru=s(((exports,t)=>{var n=kl(),r=Ys(),i=Xs();function a(e){return function(t,a,o){var s=Object(t);if(!r(t)){var c=n(a,3);t=i(t),a=function(e){return c(s[e],e,s)}}var l=e(t,a,o);return l>-1?s[c?t[l]:l]:void 0}}t.exports=a})),zu=s(((exports,t)=>{var n=/\s/;function r(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}t.exports=r})),Bu=s(((exports,t)=>{var n=zu(),r=/^\s+/;function i(e){return e&&e.slice(0,n(e)+1).replace(r,``)}t.exports=i})),Vu=s(((exports,t)=>{var n=Bu(),r=$o(),i=ul(),a=NaN,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;function u(e){if(typeof e==`number`)return e;if(i(e))return a;if(r(e)){var t=typeof e.valueOf==`function`?e.valueOf():e;e=r(t)?t+``:t}if(typeof e!=`string`)return e===0?e:+e;e=n(e);var u=s.test(e);return u||c.test(e)?l(e.slice(2),u?2:8):o.test(e)?a:+e}t.exports=u})),Hu=s(((exports,t)=>{var n=Vu(),r=1/0,i=17976931348623157e292;function a(e){return e?(e=n(e),e===r||e===-r?(e<0?-1:1)*i:e===e?e:0):e===0?e:0}t.exports=a})),Uu=s(((exports,t)=>{var n=Hu();function r(e){var t=n(e),r=t%1;return t===t?r?t-r:t:0}t.exports=r})),Wu=s(((exports,t)=>{var n=tu(),r=kl(),i=Uu(),a=Math.max;function o(e,t,o){var s=e==null?0:e.length;if(!s)return-1;var c=o==null?0:i(o);return c<0&&(c=a(s+c,0)),n(e,r(t,3),c)}t.exports=o})),Gu=s(((exports,t)=>{var n=Ru(),r=Wu();t.exports=n(r)})),Ku=s(((exports,t)=>{var n=Jl();function r(e){return e!=null&&e.length?n(e,1):[]}t.exports=r})),qu=s(((exports,t)=>{var n=Rc(),r=Uc(),i=ec();function a(e,t){return e==null?e:n(e,r(t),i)}t.exports=a})),Ju=s(((exports,t)=>{function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}t.exports=n})),Yu=s(((exports,t)=>{var n=ks(),r=zc(),i=kl();function a(e,t){var a={};return t=i(t,3),r(e,function(e,r,i){n(a,r,t(e,r,i))}),a}t.exports=a})),Xu=s(((exports,t)=>{var n=ul();function r(e,t,r){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=t(o);if(s!=null&&(c===void 0?s===s&&!n(s):r(s,c)))var c=s,l=o}return l}t.exports=r})),Zu=s(((exports,t)=>{function n(e,t){return e>t}t.exports=n})),Qu=s(((exports,t)=>{var n=Xu(),r=Zu(),i=Hc();function a(e){return e&&e.length?n(e,i,r):void 0}t.exports=a})),$u=s(((exports,t)=>{var n=ks(),r=Io();function i(e,t,i){(i!==void 0&&!r(e[t],i)||i===void 0&&!(t in e))&&n(e,t,i)}t.exports=i})),ed=s(((exports,t)=>{var n=Qo(),r=lc(),i=Ns(),a=`[object Object]`,o=Function.prototype,s=Object.prototype,c=o.toString,l=s.hasOwnProperty,u=c.call(Object);function d(e){if(!i(e)||n(e)!=a)return!1;var t=r(e);if(t===null)return!0;var o=l.call(t,`constructor`)&&t.constructor;return typeof o==`function`&&o instanceof o&&c.call(o)==u}t.exports=d})),td=s(((exports,t)=>{function n(e,t){if(!(t===`constructor`&&typeof e[t]==`function`)&&t!=`__proto__`)return e[t]}t.exports=n})),nd=s(((exports,t)=>{var n=js(),r=ec();function i(e){return n(e,r(e))}t.exports=i})),rd=s(((exports,t)=>{var n=$u(),r=nc(),i=Ec(),a=rc(),o=kc(),s=Fs(),c=Z(),l=uu(),u=Ls(),d=es(),f=$o(),p=ed(),m=Us(),h=td(),g=nd();function _(e,t,_,v,y,b,x){var S=h(e,_),C=h(t,_),w=x.get(C);if(w){n(e,_,w);return}var T=b?b(S,C,_+``,e,t,x):void 0,E=T===void 0;if(E){var D=c(C),O=!D&&u(C),k=!D&&!O&&m(C);T=C,D||O||k?c(S)?T=S:l(S)?T=a(S):O?(E=!1,T=r(C,!0)):k?(E=!1,T=i(C,!0)):T=[]:p(C)||s(C)?(T=S,s(S)?T=g(S):(!f(S)||d(S))&&(T=o(C))):E=!1}E&&(x.set(C,T),y(T,C,v,b,x),x.delete(C)),n(e,_,T)}t.exports=_})),id=s(((exports,t)=>{var n=Es(),r=$u(),i=Rc(),a=rd(),o=$o(),s=ec(),c=td();function l(e,t,u,d,f){e!==t&&i(t,function(i,s){if(f||=new n,o(i))a(e,t,s,u,l,d,f);else{var p=d?d(c(e,s),i,s+``,e,t,f):void 0;p===void 0&&(p=i),r(e,s,p)}},s)}t.exports=l})),ad=s(((exports,t)=>{var n=eu(),r=Iu();function i(e){return n(function(t,n){var i=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=e.length>3&&typeof o==`function`?(a--,o):void 0,s&&r(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),t=Object(t);++i<a;){var c=n[i];c&&e(t,c,i,o)}return t})}t.exports=i})),od=s(((exports,t)=>{var n=id();t.exports=ad()(function(e,t,r){n(e,t,r)})})),sd=s(((exports,t)=>{function n(e,t){return e<t}t.exports=n})),cd=s(((exports,t)=>{var n=Xu(),r=sd(),i=Hc();function a(e){return e&&e.length?n(e,i,r):void 0}t.exports=a})),ld=s(((exports,t)=>{var n=Xu(),r=kl(),i=sd();function a(e,t){return e&&e.length?n(e,r(t,2),i):void 0}t.exports=a})),ud=s(((exports,t)=>{var n=Jo();t.exports=function(){return n.Date.now()}})),dd=s(((exports,t)=>{var n=As(),r=vl(),i=Rs(),a=$o(),o=yl();function s(e,t,s,c){if(!a(e))return e;t=r(t,e);for(var l=-1,u=t.length,d=u-1,f=e;f!=null&&++l<u;){var p=o(t[l]),m=s;if(p===`__proto__`||p===`constructor`||p===`prototype`)return e;if(l!=d){var h=f[p];m=c?c(h,p,f):void 0,m===void 0&&(m=a(h)?h:i(t[l+1])?[]:{})}n(f,p,m),f=f[p]}return e}t.exports=s})),fd=s(((exports,t)=>{var n=bl(),r=dd(),i=vl();function a(e,t,a){for(var o=-1,s=t.length,c={};++o<s;){var l=t[o],u=n(e,l);a(u,l)&&r(c,i(l,e),u)}return c}t.exports=a})),pd=s(((exports,t)=>{var n=fd(),r=wl();function i(e,t){return n(e,t,function(t,n){return r(e,n)})}t.exports=i})),md=s(((exports,t)=>{var n=Ku(),r=Xl(),i=$l();function a(e){return i(r(e,void 0,n),e+``)}t.exports=a})),hd=s(((exports,t)=>{var n=pd();t.exports=md()(function(e,t){return e==null?{}:n(e,t)})})),gd=s(((exports,t)=>{var n=Math.ceil,r=Math.max;function i(e,t,i,a){for(var o=-1,s=r(n((t-e)/(i||1)),0),c=Array(s);s--;)c[a?s:++o]=e,e+=i;return c}t.exports=i})),_d=s(((exports,t)=>{var n=gd(),r=Iu(),i=Hu();function a(e){return function(t,a,o){return o&&typeof o!=`number`&&r(t,a,o)&&(a=o=void 0),t=i(t),a===void 0?(a=t,t=0):a=i(a),o=o===void 0?t<a?1:-1:i(o),n(t,a,o,e)}}t.exports=a})),vd=s(((exports,t)=>{t.exports=_d()()})),yd=s(((exports,t)=>{function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}t.exports=n})),bd=s(((exports,t)=>{var n=ul();function r(e,t){if(e!==t){var r=e!==void 0,i=e===null,a=e===e,o=n(e),s=t!==void 0,c=t===null,l=t===t,u=n(t);if(!c&&!u&&!o&&e>t||o&&s&&l&&!c&&!u||i&&s&&l||!r&&l||!a)return 1;if(!i&&!o&&!u&&e<t||u&&r&&a&&!i&&!o||c&&r&&a||!s&&a||!l)return-1}return 0}t.exports=r})),xd=s(((exports,t)=>{var n=bd();function r(e,t,r){for(var i=-1,a=e.criteria,o=t.criteria,s=a.length,c=r.length;++i<s;){var l=n(a[i],o[i]);if(l){if(i>=c)return l;var u=r[i];return l*(u==`desc`?-1:1)}}return e.index-t.index}t.exports=r})),Sd=s(((exports,t)=>{var n=hl(),r=bl(),i=kl(),a=Fl(),o=yd(),s=Vs(),c=xd(),l=Hc(),u=Z();function d(e,t,d){t=t.length?n(t,function(e){return u(e)?function(t){return r(t,e.length===1?e[0]:e)}:e}):[l];var f=-1;t=n(t,s(i));var p=a(e,function(e,r,i){return{criteria:n(t,function(t){return t(e)}),index:++f,value:e}});return o(p,function(e,t){return c(e,t,d)})}t.exports=d})),Cd=s(((exports,t)=>{var n=Jl(),r=Sd(),i=eu(),a=Iu();t.exports=i(function(e,t){if(e==null)return[];var i=t.length;return i>1&&a(e,t[0],t[1])?t=[]:i>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),r(e,n(t,1),[])})})),wd=s(((exports,t)=>{var n=_l(),r=0;function i(e){var t=++r;return n(e)+t}t.exports=i})),Td=s(((exports,t)=>{function n(e,t,n){for(var r=-1,i=e.length,a=t.length,o={};++r<i;){var s=r<a?t[r]:void 0;n(o,e[r],s)}return o}t.exports=n})),Ed=s(((exports,t)=>{var n=As(),r=Td();function i(e,t){return r(e||[],t||[],n)}t.exports=i})),Q=s(((exports,t)=>{var n;if(typeof require==`function`)try{n={cloneDeep:Fu(),constant:Ic(),defaults:Lu(),each:Gc(),filter:Al(),find:Gu(),flatten:Ku(),forEach:Wc(),forIn:qu(),has:Ml(),isUndefined:Pl(),last:Ju(),map:Il(),mapValues:Yu(),max:Qu(),merge:od(),min:cd(),minBy:ld(),now:ud(),pick:hd(),range:vd(),reduce:zl(),sortBy:Cd(),uniqueId:wd(),values:pu(),zipObject:Ed()}}catch{}n||=window._,t.exports=n})),Dd=s(((exports,t)=>{t.exports=n;function n(){var e={};e._next=e._prev=e,this._sentinel=e}n.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return r(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,i)),n=n._prev;return`[`+e.join(`, `)+`]`};function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function i(e,t){if(e!==`_next`&&e!==`_prev`)return t}})),Od=s(((exports,t)=>{var n=Q(),r=Pu().Graph,i=Dd();t.exports=o;var a=n.constant(1);function o(e,t){if(e.nodeCount()<=1)return[];var r=l(e,t||a),i=s(r.graph,r.buckets,r.zeroIdx);return n.flatten(n.map(i,function(t){return e.outEdges(t.v,t.w)}),!0)}function s(e,t,n){for(var r=[],i=t[t.length-1],a=t[0],o;e.nodeCount();){for(;o=a.dequeue();)c(e,t,n,o);for(;o=i.dequeue();)c(e,t,n,o);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(o=t[s].dequeue(),o){r=r.concat(c(e,t,n,o,!0));break}}}return r}function c(e,t,r,i,a){var o=a?[]:void 0;return n.forEach(e.inEdges(i.v),function(n){var i=e.edge(n),s=e.node(n.v);a&&o.push({v:n.v,w:n.w}),s.out-=i,u(t,r,s)}),n.forEach(e.outEdges(i.v),function(n){var i=e.edge(n),a=n.w,o=e.node(a);o.in-=i,u(t,r,o)}),e.removeNode(i.v),o}function l(e,t){var a=new r,o=0,s=0;n.forEach(e.nodes(),function(e){a.setNode(e,{v:e,in:0,out:0})}),n.forEach(e.edges(),function(e){var n=a.edge(e.v,e.w)||0,r=t(e),i=n+r;a.setEdge(e.v,e.w,i),s=Math.max(s,a.node(e.v).out+=r),o=Math.max(o,a.node(e.w).in+=r)});var c=n.range(s+o+3).map(function(){return new i}),l=o+1;return n.forEach(a.nodes(),function(e){u(c,l,a.node(e))}),{graph:a,buckets:c,zeroIdx:l}}function u(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}})),kd=s(((exports,t)=>{var n=Q(),r=Od();t.exports={run:i,undo:o};function i(e){var t=e.graph().acyclicer===`greedy`?r(e,i(e)):a(e);n.forEach(t,function(t){var r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,n.uniqueId(`rev`))});function i(e){return function(t){return e.edge(t).weight}}}function a(e){var t=[],r={},i={};function a(o){n.has(i,o)||(i[o]=!0,r[o]=!0,n.forEach(e.outEdges(o),function(e){n.has(r,e.w)?t.push(e):a(e.w)}),delete r[o])}return n.forEach(e.nodes(),a),t}function o(e){n.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}})),$=s(((exports,t)=>{var n=Q(),r=Pu().Graph;t.exports={addDummyNode:i,simplify:a,asNonCompoundGraph:o,successorWeights:s,predecessorWeights:c,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:f,addBorderNode:p,maxRank:m,partition:h,time:g,notime:_};function i(e,t,r,i){var a;do a=n.uniqueId(i);while(e.hasNode(a));return r.dummy=t,e.setNode(a,r),a}function a(e){var t=new r().setGraph(e.graph());return n.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),n.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function o(e){var t=new r({multigraph:e.isMultigraph()}).setGraph(e.graph());return n.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),n.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function s(e){var t=n.map(e.nodes(),function(t){var r={};return n.forEach(e.outEdges(t),function(t){r[t.w]=(r[t.w]||0)+e.edge(t).weight}),r});return n.zipObject(e.nodes(),t)}function c(e){var t=n.map(e.nodes(),function(t){var r={};return n.forEach(e.inEdges(t),function(t){r[t.v]=(r[t.v]||0)+e.edge(t).weight}),r});return n.zipObject(e.nodes(),t)}function l(e,t){var n=e.x,r=e.y,i=t.x-n,a=t.y-r,o=e.width/2,s=e.height/2;if(!i&&!a)throw Error(`Not possible to find intersection inside of the rectangle`);var c,l;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),c=s*i/a,l=s):(i<0&&(o=-o),c=o,l=o*a/i),{x:n+c,y:r+l}}function u(e){var t=n.map(n.range(m(e)+1),function(){return[]});return n.forEach(e.nodes(),function(r){var i=e.node(r),a=i.rank;n.isUndefined(a)||(t[a][i.order]=r)}),t}function d(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank}));n.forEach(e.nodes(),function(r){var i=e.node(r);n.has(i,`rank`)&&(i.rank-=t)})}function f(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank})),r=[];n.forEach(e.nodes(),function(n){var i=e.node(n).rank-t;r[i]||(r[i]=[]),r[i].push(n)});var i=0,a=e.graph().nodeRankFactor;n.forEach(r,function(t,r){n.isUndefined(t)&&r%a!==0?--i:i&&n.forEach(t,function(t){e.node(t).rank+=i})})}function p(e,t,n,r){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),i(e,`border`,a,t)}function m(e){return n.max(n.map(e.nodes(),function(t){var r=e.node(t).rank;if(!n.isUndefined(r))return r}))}function h(e,t){var r={lhs:[],rhs:[]};return n.forEach(e,function(e){t(e)?r.lhs.push(e):r.rhs.push(e)}),r}function g(e,t){var r=n.now();try{return t()}finally{console.log(e+` time: `+(n.now()-r)+`ms`)}}function _(e,t){return t()}})),Ad=s(((exports,t)=>{var n=Q(),r=$();t.exports={run:i,undo:o};function i(e){e.graph().dummyChains=[],n.forEach(e.edges(),function(t){a(e,t)})}function a(e,t){var n=t.v,i=e.node(n).rank,a=t.w,o=e.node(a).rank,s=t.name,c=e.edge(t),l=c.labelRank;if(o!==i+1){e.removeEdge(t);var u,d,f;for(f=0,++i;i<o;++f,++i)c.points=[],d={width:0,height:0,edgeLabel:c,edgeObj:t,rank:i},u=r.addDummyNode(e,`edge`,d,`_d`),i===l&&(d.width=c.width,d.height=c.height,d.dummy=`edge-label`,d.labelpos=c.labelpos),e.setEdge(n,u,{weight:c.weight},s),f===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,a,{weight:c.weight},s)}}function o(e){n.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy===`edge-label`&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}})),jd=s(((exports,t)=>{var n=Q();t.exports={longestPath:r,slack:i};function r(e){var t={};function r(i){var a=e.node(i);if(n.has(t,i))return a.rank;t[i]=!0;var o=n.min(n.map(e.outEdges(i),function(t){return r(t.w)-e.edge(t).minlen}));return(o===1/0||o==null)&&(o=0),a.rank=o}n.forEach(e.sources(),r)}function i(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}})),Md=s(((exports,t)=>{var n=Q(),r=Pu().Graph,i=jd().slack;t.exports=a;function a(e){var t=new r({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});for(var l,u;o(t,e)<a;)l=s(t,e),u=t.hasNode(l.v)?i(e,l):-i(e,l),c(t,e,u);return t}function o(e,t){function r(a){n.forEach(t.nodeEdges(a),function(n){var o=n.v,s=a===o?n.w:o;!e.hasNode(s)&&!i(t,n)&&(e.setNode(s,{}),e.setEdge(a,s,{}),r(s))})}return n.forEach(e.nodes(),r),e.nodeCount()}function s(e,t){return n.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return i(t,n)})}function c(e,t,r){n.forEach(e.nodes(),function(e){t.node(e).rank+=r})}})),Nd=s(((exports,t)=>{var n=Q(),r=Md(),i=jd().slack,a=jd().longestPath,o=Pu().alg.preorder,s=Pu().alg.postorder,c=$().simplify;t.exports=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=f,l.leaveEdge=h,l.enterEdge=g,l.exchangeEdges=_;function l(e){e=c(e),a(e);var t=r(e);p(t),u(t,e);for(var n,i;n=h(t);)i=g(t,e,n),_(t,e,n,i)}function u(e,t){var r=s(e,e.nodes());r=r.slice(0,r.length-1),n.forEach(r,function(n){d(e,t,n)})}function d(e,t,n){var r=e.node(n).parent;e.edge(n,r).cutvalue=f(e,t,n)}function f(e,t,r){var i=e.node(r).parent,a=!0,o=t.edge(r,i),s=0;return o||=(a=!1,t.edge(i,r)),s=o.weight,n.forEach(t.nodeEdges(r),function(n){var o=n.v===r,c=o?n.w:n.v;if(c!==i){var l=o===a,u=t.edge(n).weight;if(s+=l?u:-u,y(e,r,c)){var d=e.edge(r,c).cutvalue;s+=l?-d:d}}}),s}function p(e,t){arguments.length<2&&(t=e.nodes()[0]),m(e,{},1,t)}function m(e,t,r,i,a){var o=r,s=e.node(i);return t[i]=!0,n.forEach(e.neighbors(i),function(a){n.has(t,a)||(r=m(e,t,r,a,i))}),s.low=o,s.lim=r++,a?s.parent=a:delete s.parent,r}function h(e){return n.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function g(e,t,r){var a=r.v,o=r.w;t.hasEdge(a,o)||(a=r.w,o=r.v);var s=e.node(a),c=e.node(o),l=s,u=!1;s.lim>c.lim&&(l=c,u=!0);var d=n.filter(t.edges(),function(t){return u===b(e,e.node(t.v),l)&&u!==b(e,e.node(t.w),l)});return n.minBy(d,function(e){return i(t,e)})}function _(e,t,n,r){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(r.v,r.w,{}),p(e),u(e,t),v(e,t)}function v(e,t){var r=n.find(e.nodes(),function(e){return!t.node(e).parent}),i=o(e,r);i=i.slice(1),n.forEach(i,function(n){var r=e.node(n).parent,i=t.edge(n,r),a=!1;i||(i=t.edge(r,n),a=!0),t.node(n).rank=t.node(r).rank+(a?i.minlen:-i.minlen)})}function y(e,t,n){return e.hasEdge(t,n)}function b(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}})),Pd=s(((exports,t)=>{var n=jd().longestPath,r=Md(),i=Nd();t.exports=a;function a(e){switch(e.graph().ranker){case`network-simplex`:c(e);break;case`tight-tree`:s(e);break;case`longest-path`:o(e);break;default:c(e)}}var o=n;function s(e){n(e),r(e)}function c(e){i(e)}})),Fd=s(((exports,t)=>{var n=Q();t.exports=r;function r(e){var t=a(e);n.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),a=r.edgeObj,o=i(e,t,a.v,a.w),s=o.path,c=o.lca,l=0,u=s[l],d=!0;n!==a.w;){if(r=e.node(n),d){for(;(u=s[l])!==c&&e.node(u).maxRank<r.rank;)l++;u===c&&(d=!1)}if(!d){for(;l<s.length-1&&e.node(u=s[l+1]).minRank<=r.rank;)l++;u=s[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function i(e,t,n,r){var i=[],a=[],o=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),c=n,l;do c=e.parent(c),i.push(c);while(c&&(t[c].low>o||s>t[c].lim));for(l=c,c=r;(c=e.parent(c))!==l;)a.push(c);return{path:i.concat(a.reverse()),lca:l}}function a(e){var t={},r=0;function i(a){var o=r;n.forEach(e.children(a),i),t[a]={low:o,lim:r++}}return n.forEach(e.children(),i),t}})),Id=s(((exports,t)=>{var n=Q(),r=$();t.exports={run:i,cleanup:c};function i(e){var t=r.addDummyNode(e,`root`,{},`_root`),i=o(e),c=n.max(n.values(i))-1,l=2*c+1;e.graph().nestingRoot=t,n.forEach(e.edges(),function(t){e.edge(t).minlen*=l});var u=s(e)+1;n.forEach(e.children(),function(n){a(e,t,l,u,c,i,n)}),e.graph().nodeRankFactor=l}function a(e,t,i,o,s,c,l){var u=e.children(l);if(!u.length){l!==t&&e.setEdge(t,l,{weight:0,minlen:i});return}var d=r.addBorderNode(e,`_bt`),f=r.addBorderNode(e,`_bb`),p=e.node(l);e.setParent(d,l),p.borderTop=d,e.setParent(f,l),p.borderBottom=f,n.forEach(u,function(n){a(e,t,i,o,s,c,n);var r=e.node(n),u=r.borderTop?r.borderTop:n,p=r.borderBottom?r.borderBottom:n,m=r.borderTop?o:2*o,h=u===p?s-c[l]+1:1;e.setEdge(d,u,{weight:m,minlen:h,nestingEdge:!0}),e.setEdge(p,f,{weight:m,minlen:h,nestingEdge:!0})}),e.parent(l)||e.setEdge(t,d,{weight:0,minlen:s+c[l]})}function o(e){var t={};function r(i,a){var o=e.children(i);o&&o.length&&n.forEach(o,function(e){r(e,a+1)}),t[i]=a}return n.forEach(e.children(),function(e){r(e,1)}),t}function s(e){return n.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function c(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,n.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}})),Ld=s(((exports,t)=>{var n=Q(),r=$();t.exports=i;function i(e){function t(r){var i=e.children(r),o=e.node(r);if(i.length&&n.forEach(i,t),n.has(o,`minRank`)){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,c=o.maxRank+1;s<c;++s)a(e,`borderLeft`,`_bl`,r,o,s),a(e,`borderRight`,`_br`,r,o,s)}}n.forEach(e.children(),t)}function a(e,t,n,i,a,o){var s={width:0,height:0,rank:o,borderType:t},c=a[t][o-1],l=r.addDummyNode(e,`border`,s,n);a[t][o]=l,e.setParent(l,i),c&&e.setEdge(c,l,{weight:1})}})),Rd=s(((exports,t)=>{var n=Q();t.exports={adjust:r,undo:i};function r(e){var t=e.graph().rankdir.toLowerCase();(t===`lr`||t===`rl`)&&a(e)}function i(e){var t=e.graph().rankdir.toLowerCase();(t===`bt`||t===`rl`)&&s(e),(t===`lr`||t===`rl`)&&(l(e),a(e))}function a(e){n.forEach(e.nodes(),function(t){o(e.node(t))}),n.forEach(e.edges(),function(t){o(e.edge(t))})}function o(e){var t=e.width;e.width=e.height,e.height=t}function s(e){n.forEach(e.nodes(),function(t){c(e.node(t))}),n.forEach(e.edges(),function(t){var r=e.edge(t);n.forEach(r.points,c),n.has(r,`y`)&&c(r)})}function c(e){e.y=-e.y}function l(e){n.forEach(e.nodes(),function(t){u(e.node(t))}),n.forEach(e.edges(),function(t){var r=e.edge(t);n.forEach(r.points,u),n.has(r,`x`)&&u(r)})}function u(e){var t=e.x;e.x=e.y,e.y=t}})),zd=s(((exports,t)=>{var n=Q();t.exports=r;function r(e){var t={},r=n.filter(e.nodes(),function(t){return!e.children(t).length}),i=n.max(n.map(r,function(t){return e.node(t).rank})),a=n.map(n.range(i+1),function(){return[]});function o(r){if(!n.has(t,r)){t[r]=!0;var i=e.node(r);a[i.rank].push(r),n.forEach(e.successors(r),o)}}var s=n.sortBy(r,function(t){return e.node(t).rank});return n.forEach(s,o),a}})),Bd=s(((exports,t)=>{var n=Q();t.exports=r;function r(e,t){for(var n=0,r=1;r<t.length;++r)n+=i(e,t[r-1],t[r]);return n}function i(e,t,r){for(var i=n.zipObject(r,n.map(r,function(e,t){return t})),a=n.flatten(n.map(t,function(t){return n.sortBy(n.map(e.outEdges(t),function(t){return{pos:i[t.w],weight:e.edge(t).weight}}),`pos`)}),!0),o=1;o<r.length;)o<<=1;var s=2*o-1;--o;var c=n.map(Array(s),function(){return 0}),l=0;return n.forEach(a.forEach(function(e){var t=e.pos+o;c[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=c[t+1]),t=t-1>>1,c[t]+=e.weight;l+=e.weight*n})),l}})),Vd=s(((exports,t)=>{var n=Q();t.exports=r;function r(e,t){return n.map(t,function(t){var r=e.inEdges(t);if(r.length){var i=n.reduce(r,function(t,n){var r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:t}})}})),Hd=s(((exports,t)=>{var n=Q();t.exports=r;function r(e,t){var r={};n.forEach(e,function(e,t){var i=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};n.isUndefined(e.barycenter)||(i.barycenter=e.barycenter,i.weight=e.weight)}),n.forEach(t.edges(),function(e){var t=r[e.v],i=r[e.w];!n.isUndefined(t)&&!n.isUndefined(i)&&(i.indegree++,t.out.push(r[e.w]))});var a=n.filter(r,function(e){return!e.indegree});return i(a)}function i(e){var t=[];function r(e){return function(t){t.merged||(n.isUndefined(t.barycenter)||n.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&a(e,t)}}function i(t){return function(n){n.in.push(t),--n.indegree===0&&e.push(n)}}for(;e.length;){var o=e.pop();t.push(o),n.forEach(o.in.reverse(),r(o)),n.forEach(o.out,i(o))}return n.map(n.filter(t,function(e){return!e.merged}),function(e){return n.pick(e,[`vs`,`i`,`barycenter`,`weight`])})}function a(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}})),Ud=s(((exports,t)=>{var n=Q(),r=$();t.exports=i;function i(e,t){var i=r.partition(e,function(e){return n.has(e,`barycenter`)}),s=i.lhs,c=n.sortBy(i.rhs,function(e){return-e.i}),l=[],u=0,d=0,f=0;s.sort(o(!!t)),f=a(l,c,f),n.forEach(s,function(e){f+=e.vs.length,l.push(e.vs),u+=e.barycenter*e.weight,d+=e.weight,f=a(l,c,f)});var p={vs:n.flatten(l,!0)};return d&&(p.barycenter=u/d,p.weight=d),p}function a(e,t,r){for(var i;t.length&&(i=n.last(t)).i<=r;)t.pop(),e.push(i.vs),r++;return r}function o(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}})),Wd=s(((exports,t)=>{var n=Q(),r=Vd(),i=Hd(),a=Ud();t.exports=o;function o(e,t,l,u){var d=e.children(t),f=e.node(t),p=f?f.borderLeft:void 0,m=f?f.borderRight:void 0,h={};p&&(d=n.filter(d,function(e){return e!==p&&e!==m}));var g=r(e,d);n.forEach(g,function(t){if(e.children(t.v).length){var r=o(e,t.v,l,u);h[t.v]=r,n.has(r,`barycenter`)&&c(t,r)}});var _=i(g,l);s(_,h);var v=a(_,u);if(p&&(v.vs=n.flatten([p,v.vs,m],!0),e.predecessors(p).length)){var y=e.node(e.predecessors(p)[0]),b=e.node(e.predecessors(m)[0]);n.has(v,`barycenter`)||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+y.order+b.order)/(v.weight+2),v.weight+=2}return v}function s(e,t){n.forEach(e,function(e){e.vs=n.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}function c(e,t){n.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}})),Gd=s(((exports,t)=>{var n=Q(),r=Pu().Graph;t.exports=i;function i(e,t,i){var o=a(e),s=new r({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(t){return e.node(t)});return n.forEach(e.nodes(),function(r){var a=e.node(r),c=e.parent(r);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(s.setNode(r),s.setParent(r,c||o),n.forEach(e[i](r),function(t){var i=t.v===r?t.w:t.v,a=s.edge(i,r),o=n.isUndefined(a)?0:a.weight;s.setEdge(i,r,{weight:e.edge(t).weight+o})}),n.has(a,`minRank`)&&s.setNode(r,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),s}function a(e){for(var t;e.hasNode(t=n.uniqueId(`_root`)););return t}})),Kd=s(((exports,t)=>{var n=Q();t.exports=r;function r(e,t,r){var i={},a;n.forEach(r,function(n){for(var r=e.parent(n),o,s;r;){if(o=e.parent(r),o?(s=i[o],i[o]=r):(s=a,a=r),s&&s!==r){t.setEdge(s,r);return}r=o}})}})),qd=s(((exports,t)=>{var n=Q(),r=zd(),i=Bd(),a=Wd(),o=Gd(),s=Kd(),c=Pu().Graph,l=$();t.exports=u;function u(e){var t=l.maxRank(e),a=d(e,n.range(1,t+1),`inEdges`),o=d(e,n.range(t-1,-1,-1),`outEdges`),s=r(e);p(e,s);for(var c=1/0,u,m=0,h=0;h<4;++m,++h){f(m%2?a:o,m%4>=2),s=l.buildLayerMatrix(e);var g=i(e,s);g<c&&(h=0,u=n.cloneDeep(s),c=g)}p(e,u)}function d(e,t,r){return n.map(t,function(t){return o(e,t,r)})}function f(e,t){var r=new c;n.forEach(e,function(e){var i=e.graph().root,o=a(e,i,r,t);n.forEach(o.vs,function(t,n){e.node(t).order=n}),s(e,r,o.vs)})}function p(e,t){n.forEach(t,function(t){n.forEach(t,function(t,n){e.node(t).order=n})})}})),Jd=s(((exports,t)=>{var n=Q(),r=Pu().Graph,i=$();t.exports={positionX:g,findType1Conflicts:a,findType2Conflicts:o,addConflict:c,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:m,findSmallestWidthAlignment:p,balance:h};function a(e,t){var r={};function i(t,i){var a=0,o=0,l=t.length,u=n.last(i);return n.forEach(i,function(t,d){var f=s(e,t),p=f?e.node(f).order:l;(f||t===u)&&(n.forEach(i.slice(o,d+1),function(t){n.forEach(e.predecessors(t),function(n){var i=e.node(n),o=i.order;(o<a||p<o)&&!(i.dummy&&e.node(t).dummy)&&c(r,n,t)})}),o=d+1,a=p)}),i}return n.reduce(t,i),r}function o(e,t){var r={};function i(t,i,a,o,s){var l;n.forEach(n.range(i,a),function(i){l=t[i],e.node(l).dummy&&n.forEach(e.predecessors(l),function(t){var n=e.node(t);n.dummy&&(n.order<o||n.order>s)&&c(r,t,l)})})}function a(t,r){var a=-1,o,s=0;return n.forEach(r,function(n,c){if(e.node(n).dummy===`border`){var l=e.predecessors(n);l.length&&(o=e.node(l[0]).order,i(r,s,c,a,o),s=c,a=o)}i(r,s,r.length,o,t.length)}),r}return n.reduce(t,a),r}function s(e,t){if(e.node(t).dummy)return n.find(e.predecessors(t),function(t){return e.node(t).dummy})}function c(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function l(e,t,r){if(t>r){var i=t;t=r,r=i}return n.has(e[t],r)}function u(e,t,r,i){var a={},o={},s={};return n.forEach(t,function(e){n.forEach(e,function(e,t){a[e]=e,o[e]=e,s[e]=t})}),n.forEach(t,function(e){var t=-1;n.forEach(e,function(e){var c=i(e);if(c.length){c=n.sortBy(c,function(e){return s[e]});for(var u=(c.length-1)/2,d=Math.floor(u),f=Math.ceil(u);d<=f;++d){var p=c[d];o[e]===e&&t<s[p]&&!l(r,e,p)&&(o[p]=e,o[e]=a[e]=a[p],t=s[p])}}})}),{root:a,align:o}}function d(e,t,r,i,a){var o={},s=f(e,t,r,a),c=a?`borderLeft`:`borderRight`;function l(e,t){for(var n=s.nodes(),r=n.pop(),i={};r;)i[r]?e(r):(i[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}function u(e){o[e]=s.inEdges(e).reduce(function(e,t){return Math.max(e,o[t.v]+s.edge(t))},0)}function d(t){var n=s.outEdges(t).reduce(function(e,t){return Math.min(e,o[t.w]-s.edge(t))},1/0),r=e.node(t);n!==1/0&&r.borderType!==c&&(o[t]=Math.max(o[t],n))}return l(u,s.predecessors.bind(s)),l(d,s.successors.bind(s)),n.forEach(i,function(e){o[e]=o[r[e]]}),o}function f(e,t,i,a){var o=new r,s=e.graph(),c=_(s.nodesep,s.edgesep,a);return n.forEach(t,function(t){var r;n.forEach(t,function(t){var n=i[t];if(o.setNode(n),r){var a=i[r],s=o.edge(a,n);o.setEdge(a,n,Math.max(c(e,t,r),s||0))}r=t})}),o}function p(e,t){return n.minBy(n.values(t),function(t){var r=-1/0,i=1/0;return n.forIn(t,function(t,n){var a=v(e,n)/2;r=Math.max(t+a,r),i=Math.min(t-a,i)}),r-i})}function m(e,t){var r=n.values(t),i=n.min(r),a=n.max(r);n.forEach([`u`,`d`],function(r){n.forEach([`l`,`r`],function(o){var s=r+o,c=e[s],l;if(c!==t){var u=n.values(c);l=o===`l`?i-n.min(u):a-n.max(u),l&&(e[s]=n.mapValues(c,function(e){return e+l}))}})})}function h(e,t){return n.mapValues(e.ul,function(r,i){if(t)return e[t.toLowerCase()][i];var a=n.sortBy(n.map(e,i));return(a[1]+a[2])/2})}function g(e){var t=i.buildLayerMatrix(e),r=n.merge(a(e,t),o(e,t)),s={},c;n.forEach([`u`,`d`],function(i){c=i===`u`?t:n.values(t).reverse(),n.forEach([`l`,`r`],function(t){t===`r`&&(c=n.map(c,function(e){return n.values(e).reverse()}));var a=(i===`u`?e.predecessors:e.successors).bind(e),o=u(e,c,r,a),l=d(e,c,o.root,o.align,t===`r`);t===`r`&&(l=n.mapValues(l,function(e){return-e})),s[i+t]=l})});var l=p(e,s);return m(s,l),h(s,e.graph().align)}function _(e,t,r){return function(i,a,o){var s=i.node(a),c=i.node(o),l=0,u;if(l+=s.width/2,n.has(s,`labelpos`))switch(s.labelpos.toLowerCase()){case`l`:u=-s.width/2;break;case`r`:u=s.width/2;break}if(u&&(l+=r?u:-u),u=0,l+=(s.dummy?t:e)/2,l+=(c.dummy?t:e)/2,l+=c.width/2,n.has(c,`labelpos`))switch(c.labelpos.toLowerCase()){case`l`:u=c.width/2;break;case`r`:u=-c.width/2;break}return u&&(l+=r?u:-u),u=0,l}}function v(e,t){return e.node(t).width}})),Yd=s(((exports,t)=>{var n=Q(),r=$(),i=Jd().positionX;t.exports=a;function a(e){e=r.asNonCompoundGraph(e),o(e),n.forEach(i(e),function(t,n){e.node(n).x=t})}function o(e){var t=r.buildLayerMatrix(e),i=e.graph().ranksep,a=0;n.forEach(t,function(t){var r=n.max(n.map(t,function(t){return e.node(t).height}));n.forEach(t,function(t){e.node(t).y=a+r/2}),a+=r+i})}})),Xd=s(((exports,t)=>{var n=Q(),r=kd(),i=Ad(),a=Pd(),o=$().normalizeRanks,s=Fd(),c=$().removeEmptyRanks,l=Id(),u=Ld(),d=Rd(),f=qd(),p=Yd(),m=$(),h=Pu().Graph;t.exports=g;function g(e,t){var n=t&&t.debugTiming?m.time:m.notime;n(`layout`,function(){var t=n(`  buildLayoutGraph`,function(){return D(e)});n(`  runLayout`,function(){_(t,n)}),n(`  updateInputGraph`,function(){v(e,t)})})}function _(e,t){t(`    makeSpaceForEdgeLabels`,function(){O(e)}),t(`    removeSelfEdges`,function(){I(e)}),t(`    acyclic`,function(){r.run(e)}),t(`    nestingGraph.run`,function(){l.run(e)}),t(`    rank`,function(){a(m.asNonCompoundGraph(e))}),t(`    injectEdgeLabelProxies`,function(){k(e)}),t(`    removeEmptyRanks`,function(){c(e)}),t(`    nestingGraph.cleanup`,function(){l.cleanup(e)}),t(`    normalizeRanks`,function(){o(e)}),t(`    assignRankMinMax`,function(){A(e)}),t(`    removeEdgeLabelProxies`,function(){j(e)}),t(`    normalize.run`,function(){i.run(e)}),t(`    parentDummyChains`,function(){s(e)}),t(`    addBorderSegments`,function(){u(e)}),t(`    order`,function(){f(e)}),t(`    insertSelfEdges`,function(){te(e)}),t(`    adjustCoordinateSystem`,function(){d.adjust(e)}),t(`    position`,function(){p(e)}),t(`    positionSelfEdges`,function(){ne(e)}),t(`    removeBorderNodes`,function(){F(e)}),t(`    normalize.undo`,function(){i.undo(e)}),t(`    fixupEdgeLabelCoords`,function(){N(e)}),t(`    undoCoordinateSystem`,function(){d.undo(e)}),t(`    translateGraph`,function(){ee(e)}),t(`    assignNodeIntersects`,function(){M(e)}),t(`    reversePoints`,function(){P(e)}),t(`    acyclic.undo`,function(){r.undo(e)})}function v(e,t){n.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),n.forEach(e.edges(),function(r){var i=e.edge(r),a=t.edge(r);i.points=a.points,n.has(a,`x`)&&(i.x=a.x,i.y=a.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var y=[`nodesep`,`edgesep`,`ranksep`,`marginx`,`marginy`],b={ranksep:50,edgesep:20,nodesep:50,rankdir:`tb`},x=[`acyclicer`,`ranker`,`rankdir`,`align`],S=[`width`,`height`],C={width:0,height:0},w=[`minlen`,`weight`,`width`,`height`,`labeloffset`],T={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:`r`},E=[`labelpos`];function D(e){var t=new h({multigraph:!0,compound:!0}),r=re(e.graph());return t.setGraph(n.merge({},b,L(r,y),n.pick(r,x))),n.forEach(e.nodes(),function(r){var i=re(e.node(r));t.setNode(r,n.defaults(L(i,S),C)),t.setParent(r,e.parent(r))}),n.forEach(e.edges(),function(r){var i=re(e.edge(r));t.setEdge(r,n.merge({},T,L(i,w),n.pick(i,E)))}),t}function O(e){var t=e.graph();t.ranksep/=2,n.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!==`c`&&(t.rankdir===`TB`||t.rankdir===`BT`?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function k(e){n.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};m.addDummyNode(e,`edge-proxy`,i,`_ep`)}})}function A(e){var t=0;n.forEach(e.nodes(),function(r){var i=e.node(r);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=n.max(t,i.maxRank))}),e.graph().maxRank=t}function j(e){n.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy===`edge-proxy`&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function ee(e){var t=1/0,r=0,i=1/0,a=0,o=e.graph(),s=o.marginx||0,c=o.marginy||0;function l(e){var n=e.x,o=e.y,s=e.width,c=e.height;t=Math.min(t,n-s/2),r=Math.max(r,n+s/2),i=Math.min(i,o-c/2),a=Math.max(a,o+c/2)}n.forEach(e.nodes(),function(t){l(e.node(t))}),n.forEach(e.edges(),function(t){var r=e.edge(t);n.has(r,`x`)&&l(r)}),t-=s,i-=c,n.forEach(e.nodes(),function(n){var r=e.node(n);r.x-=t,r.y-=i}),n.forEach(e.edges(),function(r){var a=e.edge(r);n.forEach(a.points,function(e){e.x-=t,e.y-=i}),n.has(a,`x`)&&(a.x-=t),n.has(a,`y`)&&(a.y-=i)}),o.width=r-t+s,o.height=a-i+c}function M(e){n.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),a,o;n.points?(a=n.points[0],o=n.points[n.points.length-1]):(n.points=[],a=i,o=r),n.points.unshift(m.intersectRect(r,a)),n.points.push(m.intersectRect(i,o))})}function N(e){n.forEach(e.edges(),function(t){var r=e.edge(t);if(n.has(r,`x`))switch((r.labelpos===`l`||r.labelpos===`r`)&&(r.width-=r.labeloffset),r.labelpos){case`l`:r.x-=r.width/2+r.labeloffset;break;case`r`:r.x+=r.width/2+r.labeloffset;break}})}function P(e){n.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function F(e){n.forEach(e.nodes(),function(t){if(e.children(t).length){var r=e.node(t),i=e.node(r.borderTop),a=e.node(r.borderBottom),o=e.node(n.last(r.borderLeft)),s=e.node(n.last(r.borderRight));r.width=Math.abs(s.x-o.x),r.height=Math.abs(a.y-i.y),r.x=o.x+r.width/2,r.y=i.y+r.height/2}}),n.forEach(e.nodes(),function(t){e.node(t).dummy===`border`&&e.removeNode(t)})}function I(e){n.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||=[],n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function te(e){var t=m.buildLayerMatrix(e);n.forEach(t,function(t){var r=0;n.forEach(t,function(t,i){var a=e.node(t);a.order=i+r,n.forEach(a.selfEdges,function(t){m.addDummyNode(e,`selfedge`,{width:t.label.width,height:t.label.height,rank:a.rank,order:i+ ++r,e:t.e,label:t.label},`_se`)}),delete a.selfEdges})})}function ne(e){n.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy===`selfedge`){var r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,o=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function L(e,t){return n.mapValues(n.pick(e,t),Number)}function re(e){var t={};return n.forEach(e,function(e,n){t[n.toLowerCase()]=e}),t}})),Zd=s(((exports,t)=>{var n=Q(),r=$(),i=Pu().Graph;t.exports={debugOrdering:a};function a(e){var t=r.buildLayerMatrix(e),a=new i({compound:!0,multigraph:!0}).setGraph({});return n.forEach(e.nodes(),function(t){a.setNode(t,{label:t}),a.setParent(t,`layer`+e.node(t).rank)}),n.forEach(e.edges(),function(e){a.setEdge(e.v,e.w,{},e.name)}),n.forEach(t,function(e,t){var r=`layer`+t;a.setNode(r,{rank:`same`}),n.reduce(e,function(e,t){return a.setEdge(e,t,{style:`invis`}),t})}),a}})),Qd=s(((exports,t)=>{t.exports=`0.8.5`})),$d=u(s(((exports,t)=>{t.exports={graphlib:Pu(),layout:Xd(),debug:Zd(),util:{time:$().time,notime:$().notime},version:Qd()}}))()),ef=class e{constructor(t){this.id=`dagre`,this.options={},Object.assign(this.options,e.defaultOptions,t)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,Object.assign(Object.assign({},this.options),t))})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,Object.assign(Object.assign({},this.options),t))})}genericDagreLayout(e,t,n){return p(this,void 0,void 0,function*(){let{nodeSize:r}=n,i=new $d.graphlib.Graph;i.setGraph(n),i.setDefaultEdgeLabel(()=>({}));let a=t.getAllNodes(),o=t.getAllEdges();[...a,...o].some(({id:e})=>H(e))&&console.error(`Dagre layout only support string id, it will convert number to string.`),t.getAllNodes().forEach(e=>{let{id:t}=e,n=Object.assign({},e.data);if(r!==void 0){let[t,i]=dr(le(r)?r(e):r);Object.assign(n,{width:t,height:i})}i.setNode(t.toString(),n)}),t.getAllEdges().forEach(({id:e,source:t,target:n})=>{i.setEdge(t.toString(),n.toString(),{id:e})}),$d.default.layout(i);let s={nodes:[],edges:[]};return i.nodes().forEach(n=>{let r=i.node(n);s.nodes.push({id:n,data:r}),e&&t.mergeNodeData(n,r)}),i.edges().forEach(n=>{let r=i.edge(n),{id:a}=r,o=f(r,[`id`]),{v:c,w:l}=n;s.edges.push({id:a,source:c,target:l,data:o}),e&&t.mergeEdgeData(a,o)}),s})}};ef.defaultOptions={};var tf=class e{constructor(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}distanceTo(e){let t=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(t,n)}setPos(e,t){this.rx=e,this.ry=t}resetForce(){this.fx=0,this.fy=0}addForce(e){let t=e.rx-this.rx,n=e.ry-this.ry,r=Math.hypot(t,n);r=r<1e-4?1e-4:r;let i=this.g*(this.degree+1)*(e.degree+1)/r;this.fx+=i*t/r,this.fy+=i*n/r}in(e){return e.contains(this.rx,this.ry)}add(t){let n=this.mass+t.mass,r=(this.rx*this.mass+t.rx*t.mass)/n,i=(this.ry*this.mass+t.ry*t.mass)/n,a=this.degree+t.degree;return new e({rx:r,ry:i,mass:n,degree:a})}},nf=class e{constructor(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}getLength(){return this.length}contains(e,t){let n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n}NW(){let t=this.xmid-this.length/4,n=this.ymid+this.length/4,r=this.length/2;return new e({xmid:t,ymid:n,length:r})}NE(){let t=this.xmid+this.length/4,n=this.ymid+this.length/4,r=this.length/2;return new e({xmid:t,ymid:n,length:r})}SW(){let t=this.xmid-this.length/4,n=this.ymid-this.length/4,r=this.length/2;return new e({xmid:t,ymid:n,length:r})}SE(){let t=this.xmid+this.length/4,n=this.ymid-this.length/4,r=this.length/2;return new e({xmid:t,ymid:n,length:r})}},rf=class e{constructor(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}insert(t){if(this.body==null){this.body=t;return}this._isExternal()?(this.quad&&(this.NW=new e(this.quad.NW()),this.NE=new e(this.quad.NE()),this.SW=new e(this.quad.SW()),this.SE=new e(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t))}_putBody(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{let t=this.quad?this.quad.getLength():0,n=this.body.distanceTo(e);t/n<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}}};let af={center:[0,0],width:300,height:300,kr:5,kg:1,mode:`normal`,preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1};var sf=class{constructor(e={}){this.options=e,this.id=`forceAtlas2`,this.options=Object.assign(Object.assign({},af),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,e,t)})}genericForceAtlas2Layout(e,t,n){return p(this,void 0,void 0,function*(){let r=t.getAllEdges(),i=t.getAllNodes(),a=this.formatOptions(n,i.length),{width:o,height:s,prune:c,maxIteration:l,nodeSize:u,center:d}=a;if(!i?.length||i.length===1)return vr(t,e,d);let f=i.map(e=>ur(e,[o,s])),p=r.filter(e=>{let{source:t,target:n}=e;return t!==n}),m=new b({nodes:f,edges:p}),h=this.getSizes(m,u);if(this.run(m,t,l,h,e,a),c){for(let e=0;e<p.length;e+=1){let{source:t,target:n}=p[e],r=m.getDegree(t),i=m.getDegree(t);if(r<=1){let e=m.getNode(n);m.mergeNodeData(t,{x:e.data.x,y:e.data.y})}else if(i<=1){let e=m.getNode(t);m.mergeNodeData(n,{x:e.data.x,y:e.data.y})}}let n=Object.assign(Object.assign({},a),{prune:!1,barnesHut:!1});this.run(m,t,100,h,e,n)}return{nodes:f,edges:r}})}getSizes(e,t){let n=e.getAllNodes(),r={};for(let e=0;e<n.length;e+=1){let i=n[e];r[i.id]=mr(t,void 0)(i)}return r}formatOptions(e={},t){let n=Object.assign(Object.assign({},this.options),e),{center:r,width:i,height:a,barnesHut:o,prune:s,maxIteration:c,kr:l,kg:u}=n;return n.width=!i&&typeof window<`u`?window.innerWidth:i,n.height=!a&&typeof window<`u`?window.innerHeight:a,n.center=r||[n.width/2,n.height/2],o===void 0&&t>250&&(n.barnesHut=!0),s===void 0&&t>100&&(n.prune=!0),c===0&&!s?(n.maxIteration=250,t<=200&&t>100?n.maxIteration=1e3:t>200&&(n.maxIteration=1200)):c===0&&s&&(n.maxIteration=100,t<=200&&t>100?n.maxIteration=500:t>200&&(n.maxIteration=950)),l||(n.kr=50,t>100&&t<=500?n.kr=20:t>500&&(n.kr=1)),u||(n.kg=20,t>100&&t<=500?n.kg=10:t>500&&(n.kg=1)),n}run(e,t,n,r,i,a){let{kr:o,barnesHut:s,onTick:c}=a,l=e.getAllNodes(),u=0,d=n,f={},p={},m={};for(let t=0;t<l.length;t+=1){let{data:n,id:r}=l[t];if(f[r]=[0,0],s){let i={id:t,rx:n.x,ry:n.y,mass:1,g:o,degree:e.getDegree(r)};m[r]=new tf(i)}}for(;d>0;)u=this.oneStep(e,{iter:d,preventOverlapIters:50,krPrime:100,sg:u,forces:f,preForces:p,bodies:m,sizes:r},a),d--,c?.({nodes:l,edges:t.getAllEdges()});return e}oneStep(e,t,n){let{iter:r,preventOverlapIters:i,krPrime:a,sg:o,preForces:s,bodies:c,sizes:l}=t,{forces:u}=t,{preventOverlap:d,barnesHut:f}=n,p=e.getAllNodes();for(let e=0;e<p.length;e+=1){let{id:t}=p[e];s[t]=[...u[t]],u[t]=[0,0]}return u=this.getAttrForces(e,r,i,l,u,n),u=f&&(d&&r>i||!d)?this.getOptRepGraForces(e,u,c,n):this.getRepGraForces(e,r,i,u,a,l,n),this.updatePos(e,u,s,o,n)}getAttrForces(e,t,n,r,i,a){let{preventOverlap:o,dissuadeHubs:s,mode:c,prune:l}=a,u=e.getAllEdges();for(let a=0;a<u.length;a+=1){let{source:d,target:f}=u[a],p=e.getNode(d),m=e.getNode(f),h=e.getDegree(d),g=e.getDegree(f);if(l&&(h<=1||g<=1))continue;let _=[m.data.x-p.data.x,m.data.y-p.data.y],v=Math.hypot(_[0],_[1]);v=v<1e-4?1e-4:v,_[0]/=v,_[1]/=v,o&&t<n&&(v=v-r[d]-r[f]);let y=v,b=y;c===`linlog`&&(y=Math.log(1+v),b=y),s&&(y=v/h,b=v/g),o&&t<n&&v<=0?(y=0,b=0):o&&t<n&&v>0&&(y=v,b=v),i[d][0]+=y*_[0],i[f][0]-=b*_[0],i[d][1]+=y*_[1],i[f][1]-=b*_[1]}return i}getOptRepGraForces(e,t,n,r){let{kg:i,center:a,prune:o}=r,s=e.getAllNodes(),c=s.length,l=9e10,u=-9e10,d=9e10,f=-9e10;for(let t=0;t<c;t+=1){let{id:r,data:i}=s[t];o&&e.getDegree(r)<=1||(n[r].setPos(i.x,i.y),i.x>=u&&(u=i.x),i.x<=l&&(l=i.x),i.y>=f&&(f=i.y),i.y<=d&&(d=i.y))}let p=Math.max(u-l,f-d),m={xmid:(u+l)/2,ymid:(f+d)/2,length:p,massCenter:a,mass:c},h=new nf(m),g=new rf(h);for(let t=0;t<c;t+=1){let{id:r}=s[t];o&&e.getDegree(r)<=1||n[r].in(h)&&g.insert(n[r])}for(let r=0;r<c;r+=1){let{id:c,data:l}=s[r],u=e.getDegree(c);if(o&&u<=1)continue;n[c].resetForce(),g.updateForce(n[c]),t[c][0]-=n[c].fx,t[c][1]-=n[c].fy;let d=[l.x-a[0],l.y-a[1]],f=Math.hypot(d[0],d[1]);f=f<1e-4?1e-4:f,d[0]/=f,d[1]/=f;let p=i*(u+1);t[c][0]-=p*d[0],t[c][1]-=p*d[1]}return t}getRepGraForces(e,t,n,r,i,a,o){let{preventOverlap:s,kr:c,kg:l,center:u,prune:d}=o,f=e.getAllNodes(),p=f.length;for(let o=0;o<p;o+=1){let m=f[o],h=e.getDegree(m.id);for(let l=o+1;l<p;l+=1){let o=f[l],u=e.getDegree(o.id);if(d&&(h<=1||u<=1))continue;let p=[o.data.x-m.data.x,o.data.y-m.data.y],g=Math.hypot(p[0],p[1]);g=g<1e-4?1e-4:g,p[0]/=g,p[1]/=g,s&&t<n&&(g=g-a[m.id]-a[o.id]);let _=c*(h+1)*(u+1)/g;s&&t<n&&g<0?_=i*(h+1)*(u+1):s&&t<n&&g===0?_=0:s&&t<n&&g>0&&(_=c*(h+1)*(u+1)/g),r[m.id][0]-=_*p[0],r[o.id][0]+=_*p[0],r[m.id][1]-=_*p[1],r[o.id][1]+=_*p[1]}let g=[m.data.x-u[0],m.data.y-u[1]],_=Math.hypot(g[0],g[1]);g[0]/=_,g[1]/=_;let v=l*(h+1);r[m.id][0]-=v*g[0],r[m.id][1]-=v*g[1]}return r}updatePos(e,t,n,r,i){let{ks:a,tao:o,prune:s,ksmax:c}=i,l=e.getAllNodes(),u=l.length,d=[],f=[],p=0,m=0,h=r;for(let r=0;r<u;r+=1){let{id:i}=l[r],a=e.getDegree(i);if(s&&a<=1)continue;let o=[t[i][0]-n[i][0],t[i][1]-n[i][1]],c=Math.hypot(o[0],o[1]),u=[t[i][0]+n[i][0],t[i][1]+n[i][1]],h=Math.hypot(u[0],u[1]);d[r]=c,f[r]=h/2,p+=(a+1)*d[r],m+=(a+1)*f[r]}let g=h;h=o*m/p,g!==0&&(h=h>1.5*g?1.5*g:h);for(let n=0;n<u;n+=1){let{id:r,data:i}=l[n],o=e.getDegree(r);if(s&&o<=1||H(i.fx)&&H(i.fy))continue;let u=a*h/(1+h*Math.sqrt(d[n])),f=Math.hypot(t[r][0],t[r][1]);f=f<1e-4?1e-4:f;let p=c/f;u=u>p?p:u;let m=u*t[r][0],g=u*t[r][1];e.mergeNodeData(r,{x:i.x+m,y:i.y+g})}return h}};let cf={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:`cluster`};var lf=class{constructor(e={}){this.options=e,this.id=`fruchterman`,this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},cf),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,e,t)})}stop(){this.timeInterval&&typeof window<`u`&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let t=0;t<e;t++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);let t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(e=>this.lastGraph.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:this.options.dimensions===3?e.data.z:void 0})),t}genericFruchtermanLayout(e,t,n){return p(this,void 0,void 0,function*(){if(this.running)return;let r=this.formatOptions(n),{dimensions:i,width:a,height:o,center:s,clustering:c,nodeClusterBy:l,maxIteration:u,onTick:d}=r,f=t.getAllNodes(),p=t.getAllEdges();if(!f?.length){let e={nodes:[],edges:p};return this.lastResult=e,e}if(f.length===1){e&&t.mergeNodeData(f[0].id,{x:s[0],y:s[1],z:i===3?s[2]:void 0});let n={nodes:[Object.assign(Object.assign({},f[0]),{data:Object.assign(Object.assign({},f[0].data),{x:s[0],y:s[1],z:i===3?s[2]:void 0})})],edges:p};return this.lastResult=n,n}let m=f.map(e=>ur(e,[a,o])),h=new b({nodes:m,edges:p}),g={};if(c&&m.forEach(e=>{let t=e.data[l];g[t]||(g[t]={name:t,cx:0,cy:0,count:0})}),this.lastLayoutNodes=m,this.lastLayoutEdges=p,this.lastAssign=e,this.lastGraph=h,this.lastOptions=r,this.lastClusterMap=g,typeof window>`u`)return;let _=0;return new Promise(n=>{this.timeInterval=window.setInterval(()=>{if(!this.running){n({nodes:m,edges:p});return}this.runOneStep(h,g,r),e&&m.forEach(({id:e,data:n})=>t.mergeNodeData(e,{x:n.x,y:n.y,z:i===3?n.z:void 0})),d?.({nodes:m,edges:p}),_++,_>=u&&(window.clearInterval(this.timeInterval),n({nodes:m,edges:p}))},0),this.running=!0})})}formatOptions(e={}){let t=Object.assign(Object.assign({},this.options),e),{clustering:n,nodeClusterBy:r}=t,{center:i,width:a,height:o}=t;return t.width=!a&&typeof window<`u`?window.innerWidth:a,t.height=!o&&typeof window<`u`?window.innerHeight:o,t.center=i||[t.width/2,t.height/2],t.clustering=n&&!!r,t}runOneStep(e,t,n){let{dimensions:r,height:i,width:a,gravity:o,center:s,speed:c,clustering:l,nodeClusterBy:u,clusterGravity:d}=n,f=i*a,p=Math.sqrt(f)/10,m=e.getAllNodes(),h=f/(m.length+1),g=Math.sqrt(h),_={};if(this.applyCalculate(e,_,g,h),l){for(let e in t)t[e].cx=0,t[e].cy=0,t[e].count=0;for(let e in m.forEach(e=>{let{data:n}=e,r=t[n[u]];H(n.x)&&(r.cx+=n.x),H(n.y)&&(r.cy+=n.y),r.count++}),t)t[e].cx/=t[e].count,t[e].cy/=t[e].count;let e=d||o;m.forEach((n,r)=>{let{id:i,data:a}=n;if(!H(a.x)||!H(a.y))return;let o=t[a[u]],s=Math.sqrt((a.x-o.cx)*(a.x-o.cx)+(a.y-o.cy)*(a.y-o.cy)),c=g*e;_[i].x-=c*(a.x-o.cx)/s,_[i].y-=c*(a.y-o.cy)/s})}m.forEach((e,t)=>{let{id:n,data:i}=e;if(!H(i.x)||!H(i.y))return;let a=.01*g*o;_[n].x-=a*(i.x-s[0]),_[n].y-=a*(i.y-s[1]),r===3&&(_[n].z-=a*(i.z-s[2]))}),m.forEach((t,n)=>{let{id:i,data:a}=t;if(H(a.fx)&&H(a.fy)){a.x=a.fx,a.y=a.fy,r===3&&(a.z=a.fz);return}if(!H(a.x)||!H(a.y))return;let o=Math.sqrt(_[i].x*_[i].x+_[i].y*_[i].y+(r===3?_[i].z*_[i].z:0));if(o>0){let t=Math.min(p*(c/800),o);e.mergeNodeData(i,{x:a.x+_[i].x/o*t,y:a.y+_[i].y/o*t,z:r===3?a.z+_[i].z/o*t:void 0})}})}applyCalculate(e,t,n,r){this.calRepulsive(e,t,r),this.calAttractive(e,t,n)}calRepulsive(e,t,n){let r=e.getAllNodes();r.forEach(({data:e,id:i},a)=>{t[i]={x:0,y:0,z:0},r.forEach(({data:r,id:o},s)=>{if(a<=s||!H(e.x)||!H(r.x)||!H(e.y)||!H(r.y))return;let c=e.x-r.x,l=e.y-r.y,u=this.options.dimensions===3?e.z-r.z:0,d=c*c+l*l+u*u;d===0&&(d=1,c=.01,l=.01,u=.01);let f=n/d,p=c*f,m=l*f,h=u*f;t[i].x+=p,t[i].y+=m,t[o].x-=p,t[o].y-=m,this.options.dimensions===3&&(t[i].z+=h,t[o].z-=h)})})}calAttractive(e,t,n){e.getAllEdges().forEach(r=>{let{source:i,target:a}=r;if(!i||!a||i===a)return;let{data:o}=e.getNode(i),{data:s}=e.getNode(a);if(!H(s.x)||!H(o.x)||!H(s.y)||!H(o.y))return;let c=s.x-o.x,l=s.y-o.y,u=this.options.dimensions===3?s.z-o.z:0,d=Math.sqrt(c*c+l*l+u*u)/n,f=c*d,p=l*d,m=u*d;t[i].x+=f,t[i].y+=p,t[a].x-=f,t[a].y-=p,this.options.dimensions===3&&(t[i].z+=m,t[a].z-=m)})}};let uf={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:`degree`,nodeSize:30,width:300,height:300};var df=class{constructor(e={}){this.options=e,this.id=`grid`,this.options=Object.assign(Object.assign({},uf),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericGridLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,e,t)})}genericGridLayout(e,t,n){return p(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.options),n),{begin:i=[0,0],condense:a,preventOverlapPadding:o,preventOverlap:s,rows:c,cols:l,nodeSpacing:u,nodeSize:d,width:f,height:p,position:m}=r,{sortBy:h}=r,g=t.getAllNodes(),_=t.getAllEdges(),v=g?.length;if(!v||v===1)return vr(t,e,i);let y=g.map(e=>ur(e));h!==`id`&&(!_e(h)||y[0].data[h]===void 0)&&(h=`degree`),h===`degree`?y.sort((e,n)=>t.getDegree(n.id,`both`)-t.getDegree(e.id,`both`)):h===`id`?y.sort((e,t)=>H(t.id)&&H(e.id)?t.id-e.id:`${e.id}`.localeCompare(`${t.id}`)):y.sort((e,t)=>t.data[h]-e.data[h]);let b=!f&&typeof window<`u`?window.innerWidth:f,x=!p&&typeof window<`u`?window.innerHeight:p,S=v,C={rows:c,cols:l};if(c!=null&&l!=null)C.rows=c,C.cols=l;else if(c!=null&&l==null)C.rows=c,C.cols=Math.ceil(S/C.rows);else if(c==null&&l!=null)C.cols=l,C.rows=Math.ceil(S/C.cols);else{let e=Math.sqrt(S*x/b);C.rows=Math.round(e),C.cols=Math.round(b/x*e)}if(C.rows=Math.max(C.rows,1),C.cols=Math.max(C.cols,1),C.cols*C.rows>S){let e=ff(C),t=pf(C);(e-1)*t>=S?ff(C,e-1):(t-1)*e>=S&&pf(C,t-1)}else for(;C.cols*C.rows<S;){let e=ff(C),t=pf(C);(t+1)*e>=S?pf(C,t+1):ff(C,e+1)}let w=a?0:b/C.cols,T=a?0:x/C.rows;if(s||u){let e=fr(10,u),n=pr(30,d,!1);y.forEach(r=>{(!r.data.x||!r.data.y)&&(r.data.x=0,r.data.y=0);let i=t.getNode(r.id),[a,s]=dr(n(i)||30),c=e===void 0?o:e(r),l=a+c,u=s+c;w=Math.max(w,l),T=Math.max(T,u)})}let E={},D={row:0,col:0},O={};for(let e=0;e<y.length;e++){let n=y[e],r;if(m&&(r=m(t.getNode(n.id))),r&&(r.row!==void 0||r.col!==void 0)){let e={row:r.row,col:r.col};if(e.col===void 0)for(e.col=0;mf(E,e);)e.col++;else if(e.row===void 0)for(e.row=0;mf(E,e);)e.row++;O[n.id]=e,hf(E,e)}_f(n,i,w,T,O,C,D,E)}let k={nodes:y,edges:_};return e&&y.forEach(e=>{t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})}),k})}};let ff=(e,t)=>{let n,r=e.rows||5,i=e.cols||5;return t==null?n=Math.min(r,i):Math.min(r,i)===e.rows?e.rows=t:e.cols=t,n},pf=(e,t)=>{let n,r=e.rows||5,i=e.cols||5;return t==null?n=Math.max(r,i):Math.max(r,i)===e.rows?e.rows=t:e.cols=t,n},mf=(e,t)=>e[`c-${t.row}-${t.col}`]||!1,hf=(e,t)=>e[`c-${t.row}-${t.col}`]=!0,gf=(e,t)=>{let n=e.cols||5;t.col++,t.col>=n&&(t.col=0,t.row++)},_f=(e,t,n,r,i,a,o,s)=>{let c,l,u=i[e.id];if(u)c=u.col*n+n/2+t[0],l=u.row*r+r/2+t[1];else{for(;mf(s,o);)gf(a,o);c=o.col*n+n/2+t[0],l=o.row*r+r/2+t[1],hf(s,o),gf(a,o)}e.data.x=c,e.data.y=l},vf=(e,t,n)=>{try{let n=zi.mul(zi.pow(t,2),-.5),r=n.mean(`row`),i=n.mean(`column`),a=n.mean();n.add(a).subRowVector(r).subColumnVector(i);let o=new Bi(n),s=zi.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map(t=>zi.mul([t],[s]).toJSON()[0].splice(0,e))}catch{let e=[];for(let r=0;r<t.length;r++){let t=Math.random()*n,r=Math.random()*n;e.push([t,r])}return e}},yf={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},bf=(e,t)=>{let{positions:n,iterations:r,width:i,k:a,speed:o=100,strictRadial:s,focusIdx:c,radii:l=[],nodeSizeFunc:u}=Object.assign(Object.assign({},yf),t),d=e.getAllNodes(),f=[],p=i/10;for(let e=0;e<r;e++)n.forEach((e,t)=>{f[t]={x:0,y:0}}),xf(d,n,f,a,l,u),Sf(n,f,o,s,c,p,i,l);return n},xf=(e,t,n,r,i,a)=>{t.forEach((o,s)=>{n[s]={x:0,y:0},t.forEach((t,c)=>{if(s===c||i[s]!==i[c])return;let l=o.x-t.x,u=o.y-t.y,d=Math.sqrt(l*l+u*u);if(d===0){d=1;let e=s>c?1:-1;l=.01*e,u=.01*e}if(d<a(e[s])/2+a(e[c])/2){let e=r*r/d;n[s].x+=l/d*e,n[s].y+=u/d*e}})})},Sf=(e,t,n,r,i,a,o,s)=>{let c=a||o/10;return r&&t.forEach((t,n)=>{let r=e[n].x-e[i].x,a=e[n].y-e[i].y,o=Math.sqrt(r*r+a*a),s=a/o,c=-r/o,l=Math.sqrt(t.x*t.x+t.y*t.y),u=Math.acos((s*t.x+c*t.y)/l);u>Math.PI/2&&(u-=Math.PI/2,s*=-1,c*=-1);let d=Math.cos(u)*l;t.x=s*d,t.y=c*d}),e.forEach((a,o)=>{if(o===i)return;let l=Math.sqrt(t[o].x*t[o].x+t[o].y*t[o].y);if(l>0&&o!==i){let u=Math.min(c*(n/800),l);if(a.x+=t[o].x/l*u,a.y+=t[o].y/l*u,r){let t=a.x-e[i].x,n=a.y-e[i].y,r=Math.sqrt(t*t+n*n);t=t/r*s[o],n=n/r*s[o],a.x=e[i].x+t,a.y=e[i].y+n}}}),e},Cf={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10};var wf=class{constructor(e={}){this.options=e,this.id=`radial`,this.options=Object.assign(Object.assign({},Cf),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,e,t)})}genericRadialLayout(e,t,n){return p(this,void 0,void 0,function*(){let{width:r,height:i,center:a,focusNode:o,unitRadius:s,nodeSize:c,nodeSpacing:l,strictRadial:u,preventOverlap:d,maxPreventOverlapIteration:f,sortBy:p,linkDistance:m=50,sortStrength:h=10,maxIteration:g=1e3}=Object.assign(Object.assign({},this.options),n),_=t.getAllNodes(),v=t.getAllEdges(),y=!r&&typeof window<`u`?window.innerWidth:r,b=!i&&typeof window<`u`?window.innerHeight:i,x=a||[y/2,b/2];if(!_?.length||_.length===1)return vr(t,e,x);let S=_[0];if(_e(o)){for(let e=0;e<_.length;e++)if(_[e].id===o){S=_[e];break}}else S=o||_[0];let C=Df(_,S.id),w=ir({nodes:_,edges:v},!1),T=rr(w),E=kf(T,C);Of(T,C,E+1);let D=T[C],O=y-x[0]>x[0]?x[0]:y-x[0],k=b-x[1]>x[1]?x[1]:b-x[1];O===0&&(O=y/2),k===0&&(k=b/2);let A=Math.min(O,k),j=Math.max(...D),ee=[],M=s||A/j;D.forEach((e,t)=>{ee[t]=e*M});let N=Tf(_,T,m,ee,M,p,h),P=Ef(N),F=vf(m,N,m),I=F.map(([e,t])=>({x:(isNaN(e)?Math.random()*m:e)-F[C][0],y:(isNaN(t)?Math.random()*m:t)-F[C][1]}));this.run(g,I,P,N,ee,C);let te;if(d){te=mr(c,l);let e={nodes:_,nodeSizeFunc:te,positions:I,radii:ee,height:b,width:y,strictRadial:!!u,focusIdx:C,iterations:f||200,k:I.length/4.5};I=bf(t,e)}let ne=[];return I.forEach((e,t)=>{let n=ur(_[t]);n.data.x=e.x+x[0],n.data.y=e.y+x[1],ne.push(n)}),e&&ne.forEach(e=>t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})),{nodes:ne,edges:v}})}run(e,t,n,r,i,a){for(let o=0;o<=e;o++){let s=o/e;this.oneIteration(s,t,i,r,n,a)}}oneIteration(e,t,n,r,i,a){let o=1-e;t.forEach((s,c)=>{let l=sr(s,{x:0,y:0}),u=l===0?0:1/l;if(c===a)return;let d=0,f=0,p=0;t.forEach((e,t)=>{if(c===t)return;let n=sr(s,e),a=n===0?0:1/n,o=r[t][c];p+=i[c][t],d+=i[c][t]*(e.x+o*(s.x-e.x)*a),f+=i[c][t]*(e.y+o*(s.y-e.y)*a)});let m=n[c]===0?0:1/n[c];p*=o,p+=e*m*m,d*=o,d+=e*m*s.x*u,s.x=d/p,f*=o,f+=e*m*s.y*u,s.y=f/p})}};let Tf=(e,t,n,r,i,a,o)=>{if(!e)return[];let s=[];if(t){let c={};t.forEach((t,l)=>{let u=[];t.forEach((t,s)=>{if(l===s)u.push(0);else if(r[l]===r[s])if(a===`data`)u.push(t*(Math.abs(l-s)*o)/(r[l]/i));else if(a){let n,d;if(c[e[l].id])n=c[e[l].id];else{let t=(a===`id`?e[l].id:e[l].data?.[a])||0;n=_e(t)?t.charCodeAt(0):t,c[e[l].id]=n}if(c[e[s].id])d=c[e[s].id];else{let t=(a===`id`?e[s].id:e[s].data?.[a])||0;d=_e(t)?t.charCodeAt(0):t,c[e[s].id]=d}u.push(t*(Math.abs(n-d)*o)/(r[l]/i))}else u.push(t*n/(r[l]/i));else{let e=(n+i)/2;u.push(t*e)}}),s.push(u)})}return s},Ef=e=>{let t=e.length,n=e[0].length,r=[];for(let i=0;i<t;i++){let t=[];for(let r=0;r<n;r++)e[i][r]===0?t.push(0):t.push(1/(e[i][r]*e[i][r]));r.push(t)}return r},Df=(e,t)=>{let n=-1;return e.forEach((e,r)=>{e.id===t&&(n=r)}),Math.max(n,0)},Of=(e,t,n)=>{let r=e.length;for(let i=0;i<r;i++)if(e[t][i]===1/0){e[t][i]=n,e[i][t]=n;for(let a=0;a<r;a++)e[i][a]!==1/0&&e[t][a]===1/0&&(e[t][a]=n+e[i][a],e[a][t]=n+e[i][a])}for(let n=0;n<r;n++)if(n!==t){for(let i=0;i<r;i++)if(e[n][i]===1/0){let r=Math.abs(e[t][n]-e[t][i]);r=r===0?1:r,e[n][i]=r}}},kf=(e,t)=>{let n=0;for(let r=0;r<e[t].length;r++)e[t][r]!==1/0&&(n=e[t][r]>n?e[t][r]:n);return n},Af={center:[0,0],width:300,height:300},jf={circular:br,concentric:Tr,mds:Hi,random:class{constructor(e={}){this.options=e,this.id=`random`,this.options=Object.assign(Object.assign({},Af),e)}execute(e,t){return p(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,e,t)})}assign(e,t){return p(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,e,t)})}genericRandomLayout(e,t,n){return p(this,void 0,void 0,function*(){let{center:r,width:i,height:a}=Object.assign(Object.assign({},this.options),n),o=t.getAllNodes(),s=.9,c=!i&&typeof window<`u`?window.innerWidth:i,l=!a&&typeof window<`u`?window.innerHeight:a,u=r||[c/2,l/2],d=[];return o&&o.forEach(e=>{d.push({id:e.id,data:{x:(Math.random()-.5)*s*c+u[0],y:(Math.random()-.5)*s*l+u[1]}})}),e&&d.forEach(e=>t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})),{nodes:d,edges:t.getAllEdges()}})}},grid:df,radial:wf,force:Si,d3force:Ha,"d3-force-3d":Po,fruchterman:lf,forceAtlas2:sf,dagre:ef,antvDagre:gr,comboCombined:Ji},Mf;k({stopLayout(){Mf?.stop&&Mf.stop()},calculateLayout(e,t){return p(this,void 0,void 0,function*(){let{layout:{id:n,options:r,iterations:i},nodes:a,edges:o}=e,s=new b({nodes:a,edges:o}),c=jf[n];if(c)Mf=new c(r);else throw Error(`Unknown layout id: ${n}`);let l=yield Mf.execute(s);return Gi(Mf)&&(Mf.stop(),l=Mf.tick(i)),[l,t]})}})})();